var FR=Object.defineProperty;var NR=(e,t,n)=>t in e?FR(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var lf=(e,t,n)=>NR(e,typeof t!="symbol"?t+"":t,n);function aI(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(r,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var Lw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sI={exports:{}},vv={},lI={exports:{}},xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm=Symbol.for("react.element"),jR=Symbol.for("react.portal"),UR=Symbol.for("react.fragment"),VR=Symbol.for("react.strict_mode"),WR=Symbol.for("react.profiler"),qR=Symbol.for("react.provider"),HR=Symbol.for("react.context"),GR=Symbol.for("react.forward_ref"),ZR=Symbol.for("react.suspense"),KR=Symbol.for("react.memo"),XR=Symbol.for("react.lazy"),dk=Symbol.iterator;function YR(e){return e===null||typeof e!="object"?null:(e=dk&&e[dk]||e["@@iterator"],typeof e=="function"?e:null)}var uI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cI=Object.assign,dI={};function Nh(e,t,n){this.props=e,this.context=t,this.refs=dI,this.updater=n||uI}Nh.prototype.isReactComponent={};Nh.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Nh.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function hI(){}hI.prototype=Nh.prototype;function Rw(e,t,n){this.props=e,this.context=t,this.refs=dI,this.updater=n||uI}var zw=Rw.prototype=new hI;zw.constructor=Rw;cI(zw,Nh.prototype);zw.isPureReactComponent=!0;var hk=Array.isArray,pI=Object.prototype.hasOwnProperty,Dw={current:null},fI={key:!0,ref:!0,__self:!0,__source:!0};function mI(e,t,n){var r,a={},c=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(c=""+t.key),t)pI.call(t,r)&&!fI.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];a.children=b}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)a[r]===void 0&&(a[r]=l[r]);return{$$typeof:Nm,type:e,key:c,ref:h,props:a,_owner:Dw.current}}function JR(e,t){return{$$typeof:Nm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $w(e){return typeof e=="object"&&e!==null&&e.$$typeof===Nm}function QR(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pk=/\/+/g;function Y_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?QR(""+e.key):t.toString(36)}function qy(e,t,n,r,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Nm:case jR:h=!0}}if(h)return h=e,a=a(h),e=r===""?"."+Y_(h,0):r,hk(a)?(n="",e!=null&&(n=e.replace(pk,"$&/")+"/"),qy(a,t,n,"",function(w){return w})):a!=null&&($w(a)&&(a=JR(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(pk,"$&/")+"/")+e)),t.push(a)),1;if(h=0,r=r===""?".":r+":",hk(e))for(var l=0;l<e.length;l++){c=e[l];var b=r+Y_(c,l);h+=qy(c,t,n,b,a)}else if(b=YR(e),typeof b=="function")for(e=b.call(e),l=0;!(c=e.next()).done;)c=c.value,b=r+Y_(c,l++),h+=qy(c,t,n,b,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function sy(e,t,n){if(e==null)return e;var r=[],a=0;return qy(e,r,"","",function(c){return t.call(n,c,a++)}),r}function ez(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var go={current:null},Hy={transition:null},tz={ReactCurrentDispatcher:go,ReactCurrentBatchConfig:Hy,ReactCurrentOwner:Dw};function gI(){throw Error("act(...) is not supported in production builds of React.")}xn.Children={map:sy,forEach:function(e,t,n){sy(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return sy(e,function(){t++}),t},toArray:function(e){return sy(e,function(t){return t})||[]},only:function(e){if(!$w(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xn.Component=Nh;xn.Fragment=UR;xn.Profiler=WR;xn.PureComponent=Rw;xn.StrictMode=VR;xn.Suspense=ZR;xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tz;xn.act=gI;xn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=cI({},e.props),a=e.key,c=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,h=Dw.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)pI.call(t,b)&&!fI.hasOwnProperty(b)&&(r[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)r.children=n;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];r.children=l}return{$$typeof:Nm,type:e.type,key:a,ref:c,props:r,_owner:h}};xn.createContext=function(e){return e={$$typeof:HR,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qR,_context:e},e.Consumer=e};xn.createElement=mI;xn.createFactory=function(e){var t=mI.bind(null,e);return t.type=e,t};xn.createRef=function(){return{current:null}};xn.forwardRef=function(e){return{$$typeof:GR,render:e}};xn.isValidElement=$w;xn.lazy=function(e){return{$$typeof:XR,_payload:{_status:-1,_result:e},_init:ez}};xn.memo=function(e,t){return{$$typeof:KR,type:e,compare:t===void 0?null:t}};xn.startTransition=function(e){var t=Hy.transition;Hy.transition={};try{e()}finally{Hy.transition=t}};xn.unstable_act=gI;xn.useCallback=function(e,t){return go.current.useCallback(e,t)};xn.useContext=function(e){return go.current.useContext(e)};xn.useDebugValue=function(){};xn.useDeferredValue=function(e){return go.current.useDeferredValue(e)};xn.useEffect=function(e,t){return go.current.useEffect(e,t)};xn.useId=function(){return go.current.useId()};xn.useImperativeHandle=function(e,t,n){return go.current.useImperativeHandle(e,t,n)};xn.useInsertionEffect=function(e,t){return go.current.useInsertionEffect(e,t)};xn.useLayoutEffect=function(e,t){return go.current.useLayoutEffect(e,t)};xn.useMemo=function(e,t){return go.current.useMemo(e,t)};xn.useReducer=function(e,t,n){return go.current.useReducer(e,t,n)};xn.useRef=function(e){return go.current.useRef(e)};xn.useState=function(e){return go.current.useState(e)};xn.useSyncExternalStore=function(e,t,n){return go.current.useSyncExternalStore(e,t,n)};xn.useTransition=function(){return go.current.useTransition()};xn.version="18.3.1";lI.exports=xn;var ne=lI.exports;const _i=Fm(ne),_0=aI({__proto__:null,default:_i},[ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nz=ne,rz=Symbol.for("react.element"),iz=Symbol.for("react.fragment"),oz=Object.prototype.hasOwnProperty,az=nz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sz={key:!0,ref:!0,__self:!0,__source:!0};function yI(e,t,n){var r,a={},c=null,h=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)oz.call(t,r)&&!sz.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:rz,type:e,key:c,ref:h,props:a,_owner:az.current}}vv.Fragment=iz;vv.jsx=yI;vv.jsxs=yI;sI.exports=vv;var se=sI.exports,Zx={},vI={exports:{}},aa={},_I={exports:{}},xI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($e,Ue){var ct=$e.length;$e.push(Ue);e:for(;0<ct;){var St=ct-1>>>1,At=$e[St];if(0<a(At,Ue))$e[St]=Ue,$e[ct]=At,ct=St;else break e}}function n($e){return $e.length===0?null:$e[0]}function r($e){if($e.length===0)return null;var Ue=$e[0],ct=$e.pop();if(ct!==Ue){$e[0]=ct;e:for(var St=0,At=$e.length,jt=At>>>1;St<jt;){var zt=2*(St+1)-1,Xt=$e[zt],yn=zt+1,on=$e[yn];if(0>a(Xt,ct))yn<At&&0>a(on,Xt)?($e[St]=on,$e[yn]=ct,St=yn):($e[St]=Xt,$e[zt]=ct,St=zt);else if(yn<At&&0>a(on,ct))$e[St]=on,$e[yn]=ct,St=yn;else break e}}return Ue}function a($e,Ue){var ct=$e.sortIndex-Ue.sortIndex;return ct!==0?ct:$e.id-Ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var h=Date,l=h.now();e.unstable_now=function(){return h.now()-l}}var b=[],w=[],I=1,k=null,P=3,R=!1,$=!1,U=!1,Z=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F($e){for(var Ue=n(w);Ue!==null;){if(Ue.callback===null)r(w);else if(Ue.startTime<=$e)r(w),Ue.sortIndex=Ue.expirationTime,t(b,Ue);else break;Ue=n(w)}}function G($e){if(U=!1,F($e),!$)if(n(b)!==null)$=!0,Ve(te);else{var Ue=n(w);Ue!==null&&et(G,Ue.startTime-$e)}}function te($e,Ue){$=!1,U&&(U=!1,D(le),le=-1),R=!0;var ct=P;try{for(F(Ue),k=n(b);k!==null&&(!(k.expirationTime>Ue)||$e&&!Ce());){var St=k.callback;if(typeof St=="function"){k.callback=null,P=k.priorityLevel;var At=St(k.expirationTime<=Ue);Ue=e.unstable_now(),typeof At=="function"?k.callback=At:k===n(b)&&r(b),F(Ue)}else r(b);k=n(b)}if(k!==null)var jt=!0;else{var zt=n(w);zt!==null&&et(G,zt.startTime-Ue),jt=!1}return jt}finally{k=null,P=ct,R=!1}}var oe=!1,ae=null,le=-1,Ie=5,K=-1;function Ce(){return!(e.unstable_now()-K<Ie)}function Fe(){if(ae!==null){var $e=e.unstable_now();K=$e;var Ue=!0;try{Ue=ae(!0,$e)}finally{Ue?De():(oe=!1,ae=null)}}else oe=!1}var De;if(typeof O=="function")De=function(){O(Fe)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,Re=Ae.port2;Ae.port1.onmessage=Fe,De=function(){Re.postMessage(null)}}else De=function(){Z(Fe,0)};function Ve($e){ae=$e,oe||(oe=!0,De())}function et($e,Ue){le=Z(function(){$e(e.unstable_now())},Ue)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($e){$e.callback=null},e.unstable_continueExecution=function(){$||R||($=!0,Ve(te))},e.unstable_forceFrameRate=function($e){0>$e||125<$e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ie=0<$e?Math.floor(1e3/$e):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function($e){switch(P){case 1:case 2:case 3:var Ue=3;break;default:Ue=P}var ct=P;P=Ue;try{return $e()}finally{P=ct}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($e,Ue){switch($e){case 1:case 2:case 3:case 4:case 5:break;default:$e=3}var ct=P;P=$e;try{return Ue()}finally{P=ct}},e.unstable_scheduleCallback=function($e,Ue,ct){var St=e.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?St+ct:St):ct=St,$e){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=ct+At,$e={id:I++,callback:Ue,priorityLevel:$e,startTime:ct,expirationTime:At,sortIndex:-1},ct>St?($e.sortIndex=ct,t(w,$e),n(b)===null&&$e===n(w)&&(U?(D(le),le=-1):U=!0,et(G,ct-St))):($e.sortIndex=At,t(b,$e),$||R||($=!0,Ve(te))),$e},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function($e){var Ue=P;return function(){var ct=P;P=Ue;try{return $e.apply(this,arguments)}finally{P=ct}}}})(xI);_I.exports=xI;var lz=_I.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uz=ne,oa=lz;function Ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bI=new Set,rm={};function Bc(e,t){Th(e,t),Th(e+"Capture",t)}function Th(e,t){for(rm[e]=t,e=0;e<t.length;e++)bI.add(t[e])}var nl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kx=Object.prototype.hasOwnProperty,cz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fk={},mk={};function dz(e){return Kx.call(mk,e)?!0:Kx.call(fk,e)?!1:cz.test(e)?mk[e]=!0:(fk[e]=!0,!1)}function hz(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function pz(e,t,n,r){if(t===null||typeof t>"u"||hz(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yo(e,t,n,r,a,c,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=h}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zi[e]=new yo(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zi[t]=new yo(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zi[e]=new yo(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zi[e]=new yo(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zi[e]=new yo(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zi[e]=new yo(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zi[e]=new yo(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zi[e]=new yo(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zi[e]=new yo(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ow=/[\-:]([a-z])/g;function Bw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ow,Bw);zi[t]=new yo(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ow,Bw);zi[t]=new yo(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ow,Bw);zi[t]=new yo(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zi[e]=new yo(e,1,!1,e.toLowerCase(),null,!1,!1)});zi.xlinkHref=new yo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zi[e]=new yo(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fw(e,t,n,r){var a=zi.hasOwnProperty(t)?zi[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(pz(t,n,a,r)&&(n=null),r||a===null?dz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var hl=uz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ly=Symbol.for("react.element"),Yd=Symbol.for("react.portal"),Jd=Symbol.for("react.fragment"),Nw=Symbol.for("react.strict_mode"),Xx=Symbol.for("react.profiler"),wI=Symbol.for("react.provider"),SI=Symbol.for("react.context"),jw=Symbol.for("react.forward_ref"),Yx=Symbol.for("react.suspense"),Jx=Symbol.for("react.suspense_list"),Uw=Symbol.for("react.memo"),Xl=Symbol.for("react.lazy"),CI=Symbol.for("react.offscreen"),gk=Symbol.iterator;function uf(e){return e===null||typeof e!="object"?null:(e=gk&&e[gk]||e["@@iterator"],typeof e=="function"?e:null)}var Lr=Object.assign,J_;function Pf(e){if(J_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);J_=t&&t[1]||""}return`
`+J_+e}var Q_=!1;function ex(e,t){if(!e||Q_)return"";Q_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var r=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){r=w}e.call(t.prototype)}else{try{throw Error()}catch(w){r=w}e()}}catch(w){if(w&&r&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),c=r.stack.split(`
`),h=a.length-1,l=c.length-1;1<=h&&0<=l&&a[h]!==c[l];)l--;for(;1<=h&&0<=l;h--,l--)if(a[h]!==c[l]){if(h!==1||l!==1)do if(h--,l--,0>l||a[h]!==c[l]){var b=`
`+a[h].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=h&&0<=l);break}}}finally{Q_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Pf(e):""}function fz(e){switch(e.tag){case 5:return Pf(e.type);case 16:return Pf("Lazy");case 13:return Pf("Suspense");case 19:return Pf("SuspenseList");case 0:case 2:case 15:return e=ex(e.type,!1),e;case 11:return e=ex(e.type.render,!1),e;case 1:return e=ex(e.type,!0),e;default:return""}}function Qx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Jd:return"Fragment";case Yd:return"Portal";case Xx:return"Profiler";case Nw:return"StrictMode";case Yx:return"Suspense";case Jx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case SI:return(e.displayName||"Context")+".Consumer";case wI:return(e._context.displayName||"Context")+".Provider";case jw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Uw:return t=e.displayName||null,t!==null?t:Qx(e.type)||"Memo";case Xl:t=e._payload,e=e._init;try{return Qx(e(t))}catch{}}return null}function mz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qx(t);case 8:return t===Nw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function gz(e){var t=kI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){r=""+h,c.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function uy(e){e._valueTracker||(e._valueTracker=gz(e))}function EI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=kI(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function x0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function eb(e,t){var n=t.checked;return Lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function yk(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=gu(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TI(e,t){t=t.checked,t!=null&&Fw(e,"checked",t,!1)}function tb(e,t){TI(e,t);var n=gu(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?nb(e,t.type,n):t.hasOwnProperty("defaultValue")&&nb(e,t.type,gu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function vk(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function nb(e,t,n){(t!=="number"||x0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Mf=Array.isArray;function ch(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+gu(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function rb(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _k(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ye(92));if(Mf(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:gu(n)}}function II(e,t){var n=gu(t.value),r=gu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function PI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ib(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?PI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var cy,MI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(cy=cy||document.createElement("div"),cy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=cy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function im(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ff={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yz=["Webkit","ms","Moz","O"];Object.keys(Ff).forEach(function(e){yz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ff[t]=Ff[e]})});function AI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ff.hasOwnProperty(e)&&Ff[e]?(""+t).trim():t+"px"}function LI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=AI(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var vz=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ob(e,t){if(t){if(vz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ye(62))}}function ab(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sb=null;function Vw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var lb=null,dh=null,hh=null;function bk(e){if(e=Vm(e)){if(typeof lb!="function")throw Error(Ye(280));var t=e.stateNode;t&&(t=Sv(t),lb(e.stateNode,e.type,t))}}function RI(e){dh?hh?hh.push(e):hh=[e]:dh=e}function zI(){if(dh){var e=dh,t=hh;if(hh=dh=null,bk(e),t)for(e=0;e<t.length;e++)bk(t[e])}}function DI(e,t){return e(t)}function $I(){}var tx=!1;function OI(e,t,n){if(tx)return e(t,n);tx=!0;try{return DI(e,t,n)}finally{tx=!1,(dh!==null||hh!==null)&&($I(),zI())}}function om(e,t){var n=e.stateNode;if(n===null)return null;var r=Sv(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ye(231,t,typeof n));return n}var ub=!1;if(nl)try{var cf={};Object.defineProperty(cf,"passive",{get:function(){ub=!0}}),window.addEventListener("test",cf,cf),window.removeEventListener("test",cf,cf)}catch{ub=!1}function _z(e,t,n,r,a,c,h,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(I){this.onError(I)}}var Nf=!1,b0=null,w0=!1,cb=null,xz={onError:function(e){Nf=!0,b0=e}};function bz(e,t,n,r,a,c,h,l,b){Nf=!1,b0=null,_z.apply(xz,arguments)}function wz(e,t,n,r,a,c,h,l,b){if(bz.apply(this,arguments),Nf){if(Nf){var w=b0;Nf=!1,b0=null}else throw Error(Ye(198));w0||(w0=!0,cb=w)}}function Fc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function BI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wk(e){if(Fc(e)!==e)throw Error(Ye(188))}function Sz(e){var t=e.alternate;if(!t){if(t=Fc(e),t===null)throw Error(Ye(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return wk(a),e;if(c===r)return wk(a),t;c=c.sibling}throw Error(Ye(188))}if(n.return!==r.return)n=a,r=c;else{for(var h=!1,l=a.child;l;){if(l===n){h=!0,n=a,r=c;break}if(l===r){h=!0,r=a,n=c;break}l=l.sibling}if(!h){for(l=c.child;l;){if(l===n){h=!0,n=c,r=a;break}if(l===r){h=!0,r=c,n=a;break}l=l.sibling}if(!h)throw Error(Ye(189))}}if(n.alternate!==r)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?e:t}function FI(e){return e=Sz(e),e!==null?NI(e):null}function NI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=NI(e);if(t!==null)return t;e=e.sibling}return null}var jI=oa.unstable_scheduleCallback,Sk=oa.unstable_cancelCallback,Cz=oa.unstable_shouldYield,kz=oa.unstable_requestPaint,Wr=oa.unstable_now,Ez=oa.unstable_getCurrentPriorityLevel,Ww=oa.unstable_ImmediatePriority,UI=oa.unstable_UserBlockingPriority,S0=oa.unstable_NormalPriority,Tz=oa.unstable_LowPriority,VI=oa.unstable_IdlePriority,_v=null,xs=null;function Iz(e){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(_v,e,void 0,(e.current.flags&128)===128)}catch{}}var Xa=Math.clz32?Math.clz32:Az,Pz=Math.log,Mz=Math.LN2;function Az(e){return e>>>=0,e===0?32:31-(Pz(e)/Mz|0)|0}var dy=64,hy=4194304;function Af(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function C0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes,h=n&268435455;if(h!==0){var l=h&~a;l!==0?r=Af(l):(c&=h,c!==0&&(r=Af(c)))}else h=n&~a,h!==0?r=Af(h):c!==0&&(r=Af(c));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Xa(t),a=1<<n,r|=e[n],t&=~a;return r}function Lz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rz(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var h=31-Xa(c),l=1<<h,b=a[h];b===-1?(!(l&n)||l&r)&&(a[h]=Lz(l,t)):b<=t&&(e.expiredLanes|=l),c&=~l}}function db(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function WI(){var e=dy;return dy<<=1,!(dy&4194240)&&(dy=64),e}function nx(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function jm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Xa(t),e[t]=n}function zz(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Xa(n),c=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~c}}function qw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Xa(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Gn=0;function qI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var HI,Hw,GI,ZI,KI,hb=!1,py=[],au=null,su=null,lu=null,am=new Map,sm=new Map,Jl=[],Dz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ck(e,t){switch(e){case"focusin":case"focusout":au=null;break;case"dragenter":case"dragleave":su=null;break;case"mouseover":case"mouseout":lu=null;break;case"pointerover":case"pointerout":am.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sm.delete(t.pointerId)}}function df(e,t,n,r,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Vm(t),t!==null&&Hw(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function $z(e,t,n,r,a){switch(t){case"focusin":return au=df(au,e,t,n,r,a),!0;case"dragenter":return su=df(su,e,t,n,r,a),!0;case"mouseover":return lu=df(lu,e,t,n,r,a),!0;case"pointerover":var c=a.pointerId;return am.set(c,df(am.get(c)||null,e,t,n,r,a)),!0;case"gotpointercapture":return c=a.pointerId,sm.set(c,df(sm.get(c)||null,e,t,n,r,a)),!0}return!1}function XI(e){var t=pc(e.target);if(t!==null){var n=Fc(t);if(n!==null){if(t=n.tag,t===13){if(t=BI(n),t!==null){e.blockedOn=t,KI(e.priority,function(){GI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=pb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);sb=r,n.target.dispatchEvent(r),sb=null}else return t=Vm(n),t!==null&&Hw(t),e.blockedOn=n,!1;t.shift()}return!0}function kk(e,t,n){Gy(e)&&n.delete(t)}function Oz(){hb=!1,au!==null&&Gy(au)&&(au=null),su!==null&&Gy(su)&&(su=null),lu!==null&&Gy(lu)&&(lu=null),am.forEach(kk),sm.forEach(kk)}function hf(e,t){e.blockedOn===t&&(e.blockedOn=null,hb||(hb=!0,oa.unstable_scheduleCallback(oa.unstable_NormalPriority,Oz)))}function lm(e){function t(a){return hf(a,e)}if(0<py.length){hf(py[0],e);for(var n=1;n<py.length;n++){var r=py[n];r.blockedOn===e&&(r.blockedOn=null)}}for(au!==null&&hf(au,e),su!==null&&hf(su,e),lu!==null&&hf(lu,e),am.forEach(t),sm.forEach(t),n=0;n<Jl.length;n++)r=Jl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jl.length&&(n=Jl[0],n.blockedOn===null);)XI(n),n.blockedOn===null&&Jl.shift()}var ph=hl.ReactCurrentBatchConfig,k0=!0;function Bz(e,t,n,r){var a=Gn,c=ph.transition;ph.transition=null;try{Gn=1,Gw(e,t,n,r)}finally{Gn=a,ph.transition=c}}function Fz(e,t,n,r){var a=Gn,c=ph.transition;ph.transition=null;try{Gn=4,Gw(e,t,n,r)}finally{Gn=a,ph.transition=c}}function Gw(e,t,n,r){if(k0){var a=pb(e,t,n,r);if(a===null)hx(e,t,r,E0,n),Ck(e,r);else if($z(a,e,t,n,r))r.stopPropagation();else if(Ck(e,r),t&4&&-1<Dz.indexOf(e)){for(;a!==null;){var c=Vm(a);if(c!==null&&HI(c),c=pb(e,t,n,r),c===null&&hx(e,t,r,E0,n),c===a)break;a=c}a!==null&&r.stopPropagation()}else hx(e,t,r,null,n)}}var E0=null;function pb(e,t,n,r){if(E0=null,e=Vw(r),e=pc(e),e!==null)if(t=Fc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=BI(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return E0=e,null}function YI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ez()){case Ww:return 1;case UI:return 4;case S0:case Tz:return 16;case VI:return 536870912;default:return 16}default:return 16}}var tu=null,Zw=null,Zy=null;function JI(){if(Zy)return Zy;var e,t=Zw,n=t.length,r,a="value"in tu?tu.value:tu.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===a[c-r];r++);return Zy=a.slice(e,1<r?1-r:void 0)}function Ky(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fy(){return!0}function Ek(){return!1}function sa(e){function t(n,r,a,c,h){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(c):c[l]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?fy:Ek,this.isPropagationStopped=Ek,this}return Lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fy)},persist:function(){},isPersistent:fy}),t}var jh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kw=sa(jh),Um=Lr({},jh,{view:0,detail:0}),Nz=sa(Um),rx,ix,pf,xv=Lr({},Um,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pf&&(pf&&e.type==="mousemove"?(rx=e.screenX-pf.screenX,ix=e.screenY-pf.screenY):ix=rx=0,pf=e),rx)},movementY:function(e){return"movementY"in e?e.movementY:ix}}),Tk=sa(xv),jz=Lr({},xv,{dataTransfer:0}),Uz=sa(jz),Vz=Lr({},Um,{relatedTarget:0}),ox=sa(Vz),Wz=Lr({},jh,{animationName:0,elapsedTime:0,pseudoElement:0}),qz=sa(Wz),Hz=Lr({},jh,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gz=sa(Hz),Zz=Lr({},jh,{data:0}),Ik=sa(Zz),Kz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yz[e])?!!t[e]:!1}function Xw(){return Jz}var Qz=Lr({},Um,{key:function(e){if(e.key){var t=Kz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ky(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xw,charCode:function(e){return e.type==="keypress"?Ky(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ky(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e6=sa(Qz),t6=Lr({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pk=sa(t6),n6=Lr({},Um,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xw}),r6=sa(n6),i6=Lr({},jh,{propertyName:0,elapsedTime:0,pseudoElement:0}),o6=sa(i6),a6=Lr({},xv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),s6=sa(a6),l6=[9,13,27,32],Yw=nl&&"CompositionEvent"in window,jf=null;nl&&"documentMode"in document&&(jf=document.documentMode);var u6=nl&&"TextEvent"in window&&!jf,QI=nl&&(!Yw||jf&&8<jf&&11>=jf),Mk=" ",Ak=!1;function eP(e,t){switch(e){case"keyup":return l6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Qd=!1;function c6(e,t){switch(e){case"compositionend":return tP(t);case"keypress":return t.which!==32?null:(Ak=!0,Mk);case"textInput":return e=t.data,e===Mk&&Ak?null:e;default:return null}}function d6(e,t){if(Qd)return e==="compositionend"||!Yw&&eP(e,t)?(e=JI(),Zy=Zw=tu=null,Qd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QI&&t.locale!=="ko"?null:t.data;default:return null}}var h6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!h6[e.type]:t==="textarea"}function nP(e,t,n,r){RI(r),t=T0(t,"onChange"),0<t.length&&(n=new Kw("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Uf=null,um=null;function p6(e){pP(e,0)}function bv(e){var t=nh(e);if(EI(t))return e}function f6(e,t){if(e==="change")return t}var rP=!1;if(nl){var ax;if(nl){var sx="oninput"in document;if(!sx){var Rk=document.createElement("div");Rk.setAttribute("oninput","return;"),sx=typeof Rk.oninput=="function"}ax=sx}else ax=!1;rP=ax&&(!document.documentMode||9<document.documentMode)}function zk(){Uf&&(Uf.detachEvent("onpropertychange",iP),um=Uf=null)}function iP(e){if(e.propertyName==="value"&&bv(um)){var t=[];nP(t,um,e,Vw(e)),OI(p6,t)}}function m6(e,t,n){e==="focusin"?(zk(),Uf=t,um=n,Uf.attachEvent("onpropertychange",iP)):e==="focusout"&&zk()}function g6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bv(um)}function y6(e,t){if(e==="click")return bv(t)}function v6(e,t){if(e==="input"||e==="change")return bv(t)}function _6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qa=typeof Object.is=="function"?Object.is:_6;function cm(e,t){if(Qa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Kx.call(t,a)||!Qa(e[a],t[a]))return!1}return!0}function Dk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $k(e,t){var n=Dk(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Dk(n)}}function oP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function aP(){for(var e=window,t=x0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=x0(e.document)}return t}function Jw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function x6(e){var t=aP(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&oP(n.ownerDocument.documentElement,n)){if(r!==null&&Jw(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(r.start,a);r=r.end===void 0?c:Math.min(r.end,a),!e.extend&&c>r&&(a=r,r=c,c=a),a=$k(n,c);var h=$k(n,r);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var b6=nl&&"documentMode"in document&&11>=document.documentMode,eh=null,fb=null,Vf=null,mb=!1;function Ok(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;mb||eh==null||eh!==x0(r)||(r=eh,"selectionStart"in r&&Jw(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vf&&cm(Vf,r)||(Vf=r,r=T0(fb,"onSelect"),0<r.length&&(t=new Kw("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=eh)))}function my(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var th={animationend:my("Animation","AnimationEnd"),animationiteration:my("Animation","AnimationIteration"),animationstart:my("Animation","AnimationStart"),transitionend:my("Transition","TransitionEnd")},lx={},sP={};nl&&(sP=document.createElement("div").style,"AnimationEvent"in window||(delete th.animationend.animation,delete th.animationiteration.animation,delete th.animationstart.animation),"TransitionEvent"in window||delete th.transitionend.transition);function wv(e){if(lx[e])return lx[e];if(!th[e])return e;var t=th[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sP)return lx[e]=t[n];return e}var lP=wv("animationend"),uP=wv("animationiteration"),cP=wv("animationstart"),dP=wv("transitionend"),hP=new Map,Bk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wu(e,t){hP.set(e,t),Bc(t,[e])}for(var ux=0;ux<Bk.length;ux++){var cx=Bk[ux],w6=cx.toLowerCase(),S6=cx[0].toUpperCase()+cx.slice(1);wu(w6,"on"+S6)}wu(lP,"onAnimationEnd");wu(uP,"onAnimationIteration");wu(cP,"onAnimationStart");wu("dblclick","onDoubleClick");wu("focusin","onFocus");wu("focusout","onBlur");wu(dP,"onTransitionEnd");Th("onMouseEnter",["mouseout","mouseover"]);Th("onMouseLeave",["mouseout","mouseover"]);Th("onPointerEnter",["pointerout","pointerover"]);Th("onPointerLeave",["pointerout","pointerover"]);Bc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lf));function Fk(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,wz(r,t,void 0,e),e.currentTarget=null}function pP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var c=void 0;if(t)for(var h=r.length-1;0<=h;h--){var l=r[h],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==c&&a.isPropagationStopped())break e;Fk(a,l,w),c=b}else for(h=0;h<r.length;h++){if(l=r[h],b=l.instance,w=l.currentTarget,l=l.listener,b!==c&&a.isPropagationStopped())break e;Fk(a,l,w),c=b}}}if(w0)throw e=cb,w0=!1,cb=null,e}function pr(e,t){var n=t[xb];n===void 0&&(n=t[xb]=new Set);var r=e+"__bubble";n.has(r)||(fP(t,e,2,!1),n.add(r))}function dx(e,t,n){var r=0;t&&(r|=4),fP(n,e,r,t)}var gy="_reactListening"+Math.random().toString(36).slice(2);function dm(e){if(!e[gy]){e[gy]=!0,bI.forEach(function(n){n!=="selectionchange"&&(C6.has(n)||dx(n,!1,e),dx(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gy]||(t[gy]=!0,dx("selectionchange",!1,t))}}function fP(e,t,n,r){switch(YI(t)){case 1:var a=Bz;break;case 4:a=Fz;break;default:a=Gw}n=a.bind(null,t,n,e),a=void 0,!ub||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function hx(e,t,n,r,a){var c=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var l=r.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(h===4)for(h=r.return;h!==null;){var b=h.tag;if((b===3||b===4)&&(b=h.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;h=h.return}for(;l!==null;){if(h=pc(l),h===null)return;if(b=h.tag,b===5||b===6){r=c=h;continue e}l=l.parentNode}}r=r.return}OI(function(){var w=c,I=Vw(n),k=[];e:{var P=hP.get(e);if(P!==void 0){var R=Kw,$=e;switch(e){case"keypress":if(Ky(n)===0)break e;case"keydown":case"keyup":R=e6;break;case"focusin":$="focus",R=ox;break;case"focusout":$="blur",R=ox;break;case"beforeblur":case"afterblur":R=ox;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Tk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Uz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=r6;break;case lP:case uP:case cP:R=qz;break;case dP:R=o6;break;case"scroll":R=Nz;break;case"wheel":R=s6;break;case"copy":case"cut":case"paste":R=Gz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Pk}var U=(t&4)!==0,Z=!U&&e==="scroll",D=U?P!==null?P+"Capture":null:P;U=[];for(var O=w,F;O!==null;){F=O;var G=F.stateNode;if(F.tag===5&&G!==null&&(F=G,D!==null&&(G=om(O,D),G!=null&&U.push(hm(O,G,F)))),Z)break;O=O.return}0<U.length&&(P=new R(P,$,null,n,I),k.push({event:P,listeners:U}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",P&&n!==sb&&($=n.relatedTarget||n.fromElement)&&(pc($)||$[rl]))break e;if((R||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,R?($=n.relatedTarget||n.toElement,R=w,$=$?pc($):null,$!==null&&(Z=Fc($),$!==Z||$.tag!==5&&$.tag!==6)&&($=null)):(R=null,$=w),R!==$)){if(U=Tk,G="onMouseLeave",D="onMouseEnter",O="mouse",(e==="pointerout"||e==="pointerover")&&(U=Pk,G="onPointerLeave",D="onPointerEnter",O="pointer"),Z=R==null?P:nh(R),F=$==null?P:nh($),P=new U(G,O+"leave",R,n,I),P.target=Z,P.relatedTarget=F,G=null,pc(I)===w&&(U=new U(D,O+"enter",$,n,I),U.target=F,U.relatedTarget=Z,G=U),Z=G,R&&$)t:{for(U=R,D=$,O=0,F=U;F;F=Dd(F))O++;for(F=0,G=D;G;G=Dd(G))F++;for(;0<O-F;)U=Dd(U),O--;for(;0<F-O;)D=Dd(D),F--;for(;O--;){if(U===D||D!==null&&U===D.alternate)break t;U=Dd(U),D=Dd(D)}U=null}else U=null;R!==null&&Nk(k,P,R,U,!1),$!==null&&Z!==null&&Nk(k,Z,$,U,!0)}}e:{if(P=w?nh(w):window,R=P.nodeName&&P.nodeName.toLowerCase(),R==="select"||R==="input"&&P.type==="file")var te=f6;else if(Lk(P))if(rP)te=v6;else{te=g6;var oe=m6}else(R=P.nodeName)&&R.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(te=y6);if(te&&(te=te(e,w))){nP(k,te,n,I);break e}oe&&oe(e,P,w),e==="focusout"&&(oe=P._wrapperState)&&oe.controlled&&P.type==="number"&&nb(P,"number",P.value)}switch(oe=w?nh(w):window,e){case"focusin":(Lk(oe)||oe.contentEditable==="true")&&(eh=oe,fb=w,Vf=null);break;case"focusout":Vf=fb=eh=null;break;case"mousedown":mb=!0;break;case"contextmenu":case"mouseup":case"dragend":mb=!1,Ok(k,n,I);break;case"selectionchange":if(b6)break;case"keydown":case"keyup":Ok(k,n,I)}var ae;if(Yw)e:{switch(e){case"compositionstart":var le="onCompositionStart";break e;case"compositionend":le="onCompositionEnd";break e;case"compositionupdate":le="onCompositionUpdate";break e}le=void 0}else Qd?eP(e,n)&&(le="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(le="onCompositionStart");le&&(QI&&n.locale!=="ko"&&(Qd||le!=="onCompositionStart"?le==="onCompositionEnd"&&Qd&&(ae=JI()):(tu=I,Zw="value"in tu?tu.value:tu.textContent,Qd=!0)),oe=T0(w,le),0<oe.length&&(le=new Ik(le,e,null,n,I),k.push({event:le,listeners:oe}),ae?le.data=ae:(ae=tP(n),ae!==null&&(le.data=ae)))),(ae=u6?c6(e,n):d6(e,n))&&(w=T0(w,"onBeforeInput"),0<w.length&&(I=new Ik("onBeforeInput","beforeinput",null,n,I),k.push({event:I,listeners:w}),I.data=ae))}pP(k,t)})}function hm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function T0(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=om(e,n),c!=null&&r.unshift(hm(e,c,a)),c=om(e,t),c!=null&&r.push(hm(e,c,a))),e=e.return}return r}function Dd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nk(e,t,n,r,a){for(var c=t._reactName,h=[];n!==null&&n!==r;){var l=n,b=l.alternate,w=l.stateNode;if(b!==null&&b===r)break;l.tag===5&&w!==null&&(l=w,a?(b=om(n,c),b!=null&&h.unshift(hm(n,b,l))):a||(b=om(n,c),b!=null&&h.push(hm(n,b,l)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var k6=/\r\n?/g,E6=/\u0000|\uFFFD/g;function jk(e){return(typeof e=="string"?e:""+e).replace(k6,`
`).replace(E6,"")}function yy(e,t,n){if(t=jk(t),jk(e)!==t&&n)throw Error(Ye(425))}function I0(){}var gb=null,yb=null;function vb(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _b=typeof setTimeout=="function"?setTimeout:void 0,T6=typeof clearTimeout=="function"?clearTimeout:void 0,Uk=typeof Promise=="function"?Promise:void 0,I6=typeof queueMicrotask=="function"?queueMicrotask:typeof Uk<"u"?function(e){return Uk.resolve(null).then(e).catch(P6)}:_b;function P6(e){setTimeout(function(){throw e})}function px(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),lm(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);lm(t)}function uu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Uh=Math.random().toString(36).slice(2),ms="__reactFiber$"+Uh,pm="__reactProps$"+Uh,rl="__reactContainer$"+Uh,xb="__reactEvents$"+Uh,M6="__reactListeners$"+Uh,A6="__reactHandles$"+Uh;function pc(e){var t=e[ms];if(t)return t;for(var n=e.parentNode;n;){if(t=n[rl]||n[ms]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Vk(e);e!==null;){if(n=e[ms])return n;e=Vk(e)}return t}e=n,n=e.parentNode}return null}function Vm(e){return e=e[ms]||e[rl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function nh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function Sv(e){return e[pm]||null}var bb=[],rh=-1;function Su(e){return{current:e}}function fr(e){0>rh||(e.current=bb[rh],bb[rh]=null,rh--)}function lr(e,t){rh++,bb[rh]=e.current,e.current=t}var yu={},Xi=Su(yu),Ao=Su(!1),Ic=yu;function Ih(e,t){var n=e.type.contextTypes;if(!n)return yu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Lo(e){return e=e.childContextTypes,e!=null}function P0(){fr(Ao),fr(Xi)}function Wk(e,t,n){if(Xi.current!==yu)throw Error(Ye(168));lr(Xi,t),lr(Ao,n)}function mP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Ye(108,mz(e)||"Unknown",a));return Lr({},n,r)}function M0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||yu,Ic=Xi.current,lr(Xi,e),lr(Ao,Ao.current),!0}function qk(e,t,n){var r=e.stateNode;if(!r)throw Error(Ye(169));n?(e=mP(e,t,Ic),r.__reactInternalMemoizedMergedChildContext=e,fr(Ao),fr(Xi),lr(Xi,e)):fr(Ao),lr(Ao,n)}var Ks=null,Cv=!1,fx=!1;function gP(e){Ks===null?Ks=[e]:Ks.push(e)}function L6(e){Cv=!0,gP(e)}function Cu(){if(!fx&&Ks!==null){fx=!0;var e=0,t=Gn;try{var n=Ks;for(Gn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ks=null,Cv=!1}catch(a){throw Ks!==null&&(Ks=Ks.slice(e+1)),jI(Ww,Cu),a}finally{Gn=t,fx=!1}}return null}var ih=[],oh=0,A0=null,L0=0,wa=[],Sa=0,Pc=null,Ys=1,Js="";function oc(e,t){ih[oh++]=L0,ih[oh++]=A0,A0=e,L0=t}function yP(e,t,n){wa[Sa++]=Ys,wa[Sa++]=Js,wa[Sa++]=Pc,Pc=e;var r=Ys;e=Js;var a=32-Xa(r)-1;r&=~(1<<a),n+=1;var c=32-Xa(t)+a;if(30<c){var h=a-a%5;c=(r&(1<<h)-1).toString(32),r>>=h,a-=h,Ys=1<<32-Xa(t)+a|n<<a|r,Js=c+e}else Ys=1<<c|n<<a|r,Js=e}function Qw(e){e.return!==null&&(oc(e,1),yP(e,1,0))}function e2(e){for(;e===A0;)A0=ih[--oh],ih[oh]=null,L0=ih[--oh],ih[oh]=null;for(;e===Pc;)Pc=wa[--Sa],wa[Sa]=null,Js=wa[--Sa],wa[Sa]=null,Ys=wa[--Sa],wa[Sa]=null}var ra=null,na=null,Sr=!1,Ha=null;function vP(e,t){var n=ka(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Hk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ra=e,na=uu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ra=e,na=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Pc!==null?{id:Ys,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ka(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,ra=e,na=null,!0):!1;default:return!1}}function wb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sb(e){if(Sr){var t=na;if(t){var n=t;if(!Hk(e,t)){if(wb(e))throw Error(Ye(418));t=uu(n.nextSibling);var r=ra;t&&Hk(e,t)?vP(r,n):(e.flags=e.flags&-4097|2,Sr=!1,ra=e)}}else{if(wb(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Sr=!1,ra=e}}}function Gk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ra=e}function vy(e){if(e!==ra)return!1;if(!Sr)return Gk(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vb(e.type,e.memoizedProps)),t&&(t=na)){if(wb(e))throw _P(),Error(Ye(418));for(;t;)vP(e,t),t=uu(t.nextSibling)}if(Gk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){na=uu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}na=null}}else na=ra?uu(e.stateNode.nextSibling):null;return!0}function _P(){for(var e=na;e;)e=uu(e.nextSibling)}function Ph(){na=ra=null,Sr=!1}function t2(e){Ha===null?Ha=[e]:Ha.push(e)}var R6=hl.ReactCurrentBatchConfig;function ff(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var r=n.stateNode}if(!r)throw Error(Ye(147,e));var a=r,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(h){var l=a.refs;h===null?delete l[c]:l[c]=h},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,e))}return e}function _y(e,t){throw e=Object.prototype.toString.call(t),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zk(e){var t=e._init;return t(e._payload)}function xP(e){function t(D,O){if(e){var F=D.deletions;F===null?(D.deletions=[O],D.flags|=16):F.push(O)}}function n(D,O){if(!e)return null;for(;O!==null;)t(D,O),O=O.sibling;return null}function r(D,O){for(D=new Map;O!==null;)O.key!==null?D.set(O.key,O):D.set(O.index,O),O=O.sibling;return D}function a(D,O){return D=pu(D,O),D.index=0,D.sibling=null,D}function c(D,O,F){return D.index=F,e?(F=D.alternate,F!==null?(F=F.index,F<O?(D.flags|=2,O):F):(D.flags|=2,O)):(D.flags|=1048576,O)}function h(D){return e&&D.alternate===null&&(D.flags|=2),D}function l(D,O,F,G){return O===null||O.tag!==6?(O=bx(F,D.mode,G),O.return=D,O):(O=a(O,F),O.return=D,O)}function b(D,O,F,G){var te=F.type;return te===Jd?I(D,O,F.props.children,G,F.key):O!==null&&(O.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Xl&&Zk(te)===O.type)?(G=a(O,F.props),G.ref=ff(D,O,F),G.return=D,G):(G=n0(F.type,F.key,F.props,null,D.mode,G),G.ref=ff(D,O,F),G.return=D,G)}function w(D,O,F,G){return O===null||O.tag!==4||O.stateNode.containerInfo!==F.containerInfo||O.stateNode.implementation!==F.implementation?(O=wx(F,D.mode,G),O.return=D,O):(O=a(O,F.children||[]),O.return=D,O)}function I(D,O,F,G,te){return O===null||O.tag!==7?(O=bc(F,D.mode,G,te),O.return=D,O):(O=a(O,F),O.return=D,O)}function k(D,O,F){if(typeof O=="string"&&O!==""||typeof O=="number")return O=bx(""+O,D.mode,F),O.return=D,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case ly:return F=n0(O.type,O.key,O.props,null,D.mode,F),F.ref=ff(D,null,O),F.return=D,F;case Yd:return O=wx(O,D.mode,F),O.return=D,O;case Xl:var G=O._init;return k(D,G(O._payload),F)}if(Mf(O)||uf(O))return O=bc(O,D.mode,F,null),O.return=D,O;_y(D,O)}return null}function P(D,O,F,G){var te=O!==null?O.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return te!==null?null:l(D,O,""+F,G);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ly:return F.key===te?b(D,O,F,G):null;case Yd:return F.key===te?w(D,O,F,G):null;case Xl:return te=F._init,P(D,O,te(F._payload),G)}if(Mf(F)||uf(F))return te!==null?null:I(D,O,F,G,null);_y(D,F)}return null}function R(D,O,F,G,te){if(typeof G=="string"&&G!==""||typeof G=="number")return D=D.get(F)||null,l(O,D,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case ly:return D=D.get(G.key===null?F:G.key)||null,b(O,D,G,te);case Yd:return D=D.get(G.key===null?F:G.key)||null,w(O,D,G,te);case Xl:var oe=G._init;return R(D,O,F,oe(G._payload),te)}if(Mf(G)||uf(G))return D=D.get(F)||null,I(O,D,G,te,null);_y(O,G)}return null}function $(D,O,F,G){for(var te=null,oe=null,ae=O,le=O=0,Ie=null;ae!==null&&le<F.length;le++){ae.index>le?(Ie=ae,ae=null):Ie=ae.sibling;var K=P(D,ae,F[le],G);if(K===null){ae===null&&(ae=Ie);break}e&&ae&&K.alternate===null&&t(D,ae),O=c(K,O,le),oe===null?te=K:oe.sibling=K,oe=K,ae=Ie}if(le===F.length)return n(D,ae),Sr&&oc(D,le),te;if(ae===null){for(;le<F.length;le++)ae=k(D,F[le],G),ae!==null&&(O=c(ae,O,le),oe===null?te=ae:oe.sibling=ae,oe=ae);return Sr&&oc(D,le),te}for(ae=r(D,ae);le<F.length;le++)Ie=R(ae,D,le,F[le],G),Ie!==null&&(e&&Ie.alternate!==null&&ae.delete(Ie.key===null?le:Ie.key),O=c(Ie,O,le),oe===null?te=Ie:oe.sibling=Ie,oe=Ie);return e&&ae.forEach(function(Ce){return t(D,Ce)}),Sr&&oc(D,le),te}function U(D,O,F,G){var te=uf(F);if(typeof te!="function")throw Error(Ye(150));if(F=te.call(F),F==null)throw Error(Ye(151));for(var oe=te=null,ae=O,le=O=0,Ie=null,K=F.next();ae!==null&&!K.done;le++,K=F.next()){ae.index>le?(Ie=ae,ae=null):Ie=ae.sibling;var Ce=P(D,ae,K.value,G);if(Ce===null){ae===null&&(ae=Ie);break}e&&ae&&Ce.alternate===null&&t(D,ae),O=c(Ce,O,le),oe===null?te=Ce:oe.sibling=Ce,oe=Ce,ae=Ie}if(K.done)return n(D,ae),Sr&&oc(D,le),te;if(ae===null){for(;!K.done;le++,K=F.next())K=k(D,K.value,G),K!==null&&(O=c(K,O,le),oe===null?te=K:oe.sibling=K,oe=K);return Sr&&oc(D,le),te}for(ae=r(D,ae);!K.done;le++,K=F.next())K=R(ae,D,le,K.value,G),K!==null&&(e&&K.alternate!==null&&ae.delete(K.key===null?le:K.key),O=c(K,O,le),oe===null?te=K:oe.sibling=K,oe=K);return e&&ae.forEach(function(Fe){return t(D,Fe)}),Sr&&oc(D,le),te}function Z(D,O,F,G){if(typeof F=="object"&&F!==null&&F.type===Jd&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case ly:e:{for(var te=F.key,oe=O;oe!==null;){if(oe.key===te){if(te=F.type,te===Jd){if(oe.tag===7){n(D,oe.sibling),O=a(oe,F.props.children),O.return=D,D=O;break e}}else if(oe.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Xl&&Zk(te)===oe.type){n(D,oe.sibling),O=a(oe,F.props),O.ref=ff(D,oe,F),O.return=D,D=O;break e}n(D,oe);break}else t(D,oe);oe=oe.sibling}F.type===Jd?(O=bc(F.props.children,D.mode,G,F.key),O.return=D,D=O):(G=n0(F.type,F.key,F.props,null,D.mode,G),G.ref=ff(D,O,F),G.return=D,D=G)}return h(D);case Yd:e:{for(oe=F.key;O!==null;){if(O.key===oe)if(O.tag===4&&O.stateNode.containerInfo===F.containerInfo&&O.stateNode.implementation===F.implementation){n(D,O.sibling),O=a(O,F.children||[]),O.return=D,D=O;break e}else{n(D,O);break}else t(D,O);O=O.sibling}O=wx(F,D.mode,G),O.return=D,D=O}return h(D);case Xl:return oe=F._init,Z(D,O,oe(F._payload),G)}if(Mf(F))return $(D,O,F,G);if(uf(F))return U(D,O,F,G);_y(D,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,O!==null&&O.tag===6?(n(D,O.sibling),O=a(O,F),O.return=D,D=O):(n(D,O),O=bx(F,D.mode,G),O.return=D,D=O),h(D)):n(D,O)}return Z}var Mh=xP(!0),bP=xP(!1),R0=Su(null),z0=null,ah=null,n2=null;function r2(){n2=ah=z0=null}function i2(e){var t=R0.current;fr(R0),e._currentValue=t}function Cb(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function fh(e,t){z0=e,n2=ah=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Mo=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(n2!==e)if(e={context:e,memoizedValue:t,next:null},ah===null){if(z0===null)throw Error(Ye(308));ah=e,z0.dependencies={lanes:0,firstContext:e}}else ah=ah.next=e;return t}var fc=null;function o2(e){fc===null?fc=[e]:fc.push(e)}function wP(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,o2(t)):(n.next=a.next,a.next=n),t.interleaved=n,il(e,r)}function il(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Yl=!1;function a2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function el(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function cu(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,An&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,il(e,n)}return a=r.interleaved,a===null?(t.next=t,o2(r)):(t.next=a.next,a.next=t),r.interleaved=t,il(e,n)}function Xy(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qw(e,n)}}function Kk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=h:c=c.next=h,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function D0(e,t,n,r){var a=e.updateQueue;Yl=!1;var c=a.firstBaseUpdate,h=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var b=l,w=b.next;b.next=null,h===null?c=w:h.next=w,h=b;var I=e.alternate;I!==null&&(I=I.updateQueue,l=I.lastBaseUpdate,l!==h&&(l===null?I.firstBaseUpdate=w:l.next=w,I.lastBaseUpdate=b))}if(c!==null){var k=a.baseState;h=0,I=w=b=null,l=c;do{var P=l.lane,R=l.eventTime;if((r&P)===P){I!==null&&(I=I.next={eventTime:R,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var $=e,U=l;switch(P=t,R=n,U.tag){case 1:if($=U.payload,typeof $=="function"){k=$.call(R,k,P);break e}k=$;break e;case 3:$.flags=$.flags&-65537|128;case 0:if($=U.payload,P=typeof $=="function"?$.call(R,k,P):$,P==null)break e;k=Lr({},k,P);break e;case 2:Yl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,P=a.effects,P===null?a.effects=[l]:P.push(l))}else R={eventTime:R,lane:P,tag:l.tag,payload:l.payload,callback:l.callback,next:null},I===null?(w=I=R,b=k):I=I.next=R,h|=P;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;P=l,l=P.next,P.next=null,a.lastBaseUpdate=P,a.shared.pending=null}}while(!0);if(I===null&&(b=k),a.baseState=b,a.firstBaseUpdate=w,a.lastBaseUpdate=I,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Ac|=h,e.lanes=h,e.memoizedState=k}}function Xk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Ye(191,a));a.call(r)}}}var Wm={},bs=Su(Wm),fm=Su(Wm),mm=Su(Wm);function mc(e){if(e===Wm)throw Error(Ye(174));return e}function s2(e,t){switch(lr(mm,t),lr(fm,e),lr(bs,Wm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ib(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ib(t,e)}fr(bs),lr(bs,t)}function Ah(){fr(bs),fr(fm),fr(mm)}function CP(e){mc(mm.current);var t=mc(bs.current),n=ib(t,e.type);t!==n&&(lr(fm,e),lr(bs,n))}function l2(e){fm.current===e&&(fr(bs),fr(fm))}var Mr=Su(0);function $0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mx=[];function u2(){for(var e=0;e<mx.length;e++)mx[e]._workInProgressVersionPrimary=null;mx.length=0}var Yy=hl.ReactCurrentDispatcher,gx=hl.ReactCurrentBatchConfig,Mc=0,Ar=null,ii=null,vi=null,O0=!1,Wf=!1,gm=0,z6=0;function Vi(){throw Error(Ye(321))}function c2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qa(e[n],t[n]))return!1;return!0}function d2(e,t,n,r,a,c){if(Mc=c,Ar=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Yy.current=e===null||e.memoizedState===null?B6:F6,e=n(r,a),Wf){c=0;do{if(Wf=!1,gm=0,25<=c)throw Error(Ye(301));c+=1,vi=ii=null,t.updateQueue=null,Yy.current=N6,e=n(r,a)}while(Wf)}if(Yy.current=B0,t=ii!==null&&ii.next!==null,Mc=0,vi=ii=Ar=null,O0=!1,t)throw Error(Ye(300));return e}function h2(){var e=gm!==0;return gm=0,e}function ds(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vi===null?Ar.memoizedState=vi=e:vi=vi.next=e,vi}function Ma(){if(ii===null){var e=Ar.alternate;e=e!==null?e.memoizedState:null}else e=ii.next;var t=vi===null?Ar.memoizedState:vi.next;if(t!==null)vi=t,ii=e;else{if(e===null)throw Error(Ye(310));ii=e,e={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},vi===null?Ar.memoizedState=vi=e:vi=vi.next=e}return vi}function ym(e,t){return typeof t=="function"?t(e):t}function yx(e){var t=Ma(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var r=ii,a=r.baseQueue,c=n.pending;if(c!==null){if(a!==null){var h=a.next;a.next=c.next,c.next=h}r.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,r=r.baseState;var l=h=null,b=null,w=c;do{var I=w.lane;if((Mc&I)===I)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),r=w.hasEagerState?w.eagerState:e(r,w.action);else{var k={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=k,h=r):b=b.next=k,Ar.lanes|=I,Ac|=I}w=w.next}while(w!==null&&w!==c);b===null?h=r:b.next=l,Qa(r,t.memoizedState)||(Mo=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=b,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do c=a.lane,Ar.lanes|=c,Ac|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function vx(e){var t=Ma(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do c=e(c,h.action),h=h.next;while(h!==a);Qa(c,t.memoizedState)||(Mo=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,r]}function kP(){}function EP(e,t){var n=Ar,r=Ma(),a=t(),c=!Qa(r.memoizedState,a);if(c&&(r.memoizedState=a,Mo=!0),r=r.queue,p2(PP.bind(null,n,r,e),[e]),r.getSnapshot!==t||c||vi!==null&&vi.memoizedState.tag&1){if(n.flags|=2048,vm(9,IP.bind(null,n,r,a,t),void 0,null),xi===null)throw Error(Ye(349));Mc&30||TP(n,t,a)}return a}function TP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function IP(e,t,n,r){t.value=n,t.getSnapshot=r,MP(t)&&AP(e)}function PP(e,t,n){return n(function(){MP(t)&&AP(e)})}function MP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qa(e,n)}catch{return!0}}function AP(e){var t=il(e,1);t!==null&&Ya(t,e,1,-1)}function Yk(e){var t=ds();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ym,lastRenderedState:e},t.queue=e,e=e.dispatch=O6.bind(null,Ar,e),[t.memoizedState,e]}function vm(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ar.updateQueue,t===null?(t={lastEffect:null,stores:null},Ar.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function LP(){return Ma().memoizedState}function Jy(e,t,n,r){var a=ds();Ar.flags|=e,a.memoizedState=vm(1|t,n,void 0,r===void 0?null:r)}function kv(e,t,n,r){var a=Ma();r=r===void 0?null:r;var c=void 0;if(ii!==null){var h=ii.memoizedState;if(c=h.destroy,r!==null&&c2(r,h.deps)){a.memoizedState=vm(t,n,c,r);return}}Ar.flags|=e,a.memoizedState=vm(1|t,n,c,r)}function Jk(e,t){return Jy(8390656,8,e,t)}function p2(e,t){return kv(2048,8,e,t)}function RP(e,t){return kv(4,2,e,t)}function zP(e,t){return kv(4,4,e,t)}function DP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function $P(e,t,n){return n=n!=null?n.concat([e]):null,kv(4,4,DP.bind(null,t,e),n)}function f2(){}function OP(e,t){var n=Ma();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&c2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function BP(e,t){var n=Ma();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&c2(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function FP(e,t,n){return Mc&21?(Qa(n,t)||(n=WI(),Ar.lanes|=n,Ac|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Mo=!0),e.memoizedState=n)}function D6(e,t){var n=Gn;Gn=n!==0&&4>n?n:4,e(!0);var r=gx.transition;gx.transition={};try{e(!1),t()}finally{Gn=n,gx.transition=r}}function NP(){return Ma().memoizedState}function $6(e,t,n){var r=hu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jP(e))UP(t,n);else if(n=wP(e,t,n,r),n!==null){var a=mo();Ya(n,e,r,a),VP(n,t,r)}}function O6(e,t,n){var r=hu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jP(e))UP(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var h=t.lastRenderedState,l=c(h,n);if(a.hasEagerState=!0,a.eagerState=l,Qa(l,h)){var b=t.interleaved;b===null?(a.next=a,o2(t)):(a.next=b.next,b.next=a),t.interleaved=a;return}}catch{}finally{}n=wP(e,t,a,r),n!==null&&(a=mo(),Ya(n,e,r,a),VP(n,t,r))}}function jP(e){var t=e.alternate;return e===Ar||t!==null&&t===Ar}function UP(e,t){Wf=O0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function VP(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,qw(e,n)}}var B0={readContext:Pa,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},B6={readContext:Pa,useCallback:function(e,t){return ds().memoizedState=[e,t===void 0?null:t],e},useContext:Pa,useEffect:Jk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Jy(4194308,4,DP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Jy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jy(4,2,e,t)},useMemo:function(e,t){var n=ds();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ds();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$6.bind(null,Ar,e),[r.memoizedState,e]},useRef:function(e){var t=ds();return e={current:e},t.memoizedState=e},useState:Yk,useDebugValue:f2,useDeferredValue:function(e){return ds().memoizedState=e},useTransition:function(){var e=Yk(!1),t=e[0];return e=D6.bind(null,e[1]),ds().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ar,a=ds();if(Sr){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=t(),xi===null)throw Error(Ye(349));Mc&30||TP(r,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,Jk(PP.bind(null,r,c,e),[e]),r.flags|=2048,vm(9,IP.bind(null,r,c,n,t),void 0,null),n},useId:function(){var e=ds(),t=xi.identifierPrefix;if(Sr){var n=Js,r=Ys;n=(r&~(1<<32-Xa(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=z6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},F6={readContext:Pa,useCallback:OP,useContext:Pa,useEffect:p2,useImperativeHandle:$P,useInsertionEffect:RP,useLayoutEffect:zP,useMemo:BP,useReducer:yx,useRef:LP,useState:function(){return yx(ym)},useDebugValue:f2,useDeferredValue:function(e){var t=Ma();return FP(t,ii.memoizedState,e)},useTransition:function(){var e=yx(ym)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:kP,useSyncExternalStore:EP,useId:NP,unstable_isNewReconciler:!1},N6={readContext:Pa,useCallback:OP,useContext:Pa,useEffect:p2,useImperativeHandle:$P,useInsertionEffect:RP,useLayoutEffect:zP,useMemo:BP,useReducer:vx,useRef:LP,useState:function(){return vx(ym)},useDebugValue:f2,useDeferredValue:function(e){var t=Ma();return ii===null?t.memoizedState=e:FP(t,ii.memoizedState,e)},useTransition:function(){var e=vx(ym)[0],t=Ma().memoizedState;return[e,t]},useMutableSource:kP,useSyncExternalStore:EP,useId:NP,unstable_isNewReconciler:!1};function Wa(e,t){if(e&&e.defaultProps){t=Lr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function kb(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Lr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ev={isMounted:function(e){return(e=e._reactInternals)?Fc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mo(),a=hu(e),c=el(r,a);c.payload=t,n!=null&&(c.callback=n),t=cu(e,c,a),t!==null&&(Ya(t,e,a,r),Xy(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mo(),a=hu(e),c=el(r,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=cu(e,c,a),t!==null&&(Ya(t,e,a,r),Xy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mo(),r=hu(e),a=el(n,r);a.tag=2,t!=null&&(a.callback=t),t=cu(e,a,r),t!==null&&(Ya(t,e,r,n),Xy(t,e,r))}};function Qk(e,t,n,r,a,c,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,c,h):t.prototype&&t.prototype.isPureReactComponent?!cm(n,r)||!cm(a,c):!0}function WP(e,t,n){var r=!1,a=yu,c=t.contextType;return typeof c=="object"&&c!==null?c=Pa(c):(a=Lo(t)?Ic:Xi.current,r=t.contextTypes,c=(r=r!=null)?Ih(e,a):yu),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ev,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function eE(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ev.enqueueReplaceState(t,t.state,null)}function Eb(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},a2(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=Pa(c):(c=Lo(t)?Ic:Xi.current,a.context=Ih(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(kb(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Ev.enqueueReplaceState(a,a.state,null),D0(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Lh(e,t){try{var n="",r=t;do n+=fz(r),r=r.return;while(r);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function _x(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Tb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var j6=typeof WeakMap=="function"?WeakMap:Map;function qP(e,t,n){n=el(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){N0||(N0=!0,Ob=r),Tb(e,t)},n}function HP(e,t,n){n=el(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){Tb(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){Tb(e,t),typeof r!="function"&&(du===null?du=new Set([this]):du.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function tE(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new j6;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=tD.bind(null,e,t,n),t.then(e,e))}function nE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function rE(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=el(-1,1),t.tag=2,cu(n,t,1))),n.lanes|=1),e)}var U6=hl.ReactCurrentOwner,Mo=!1;function ho(e,t,n,r){t.child=e===null?bP(t,null,n,r):Mh(t,e.child,n,r)}function iE(e,t,n,r,a){n=n.render;var c=t.ref;return fh(t,a),r=d2(e,t,n,r,c,a),n=h2(),e!==null&&!Mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ol(e,t,a)):(Sr&&n&&Qw(t),t.flags|=1,ho(e,t,r,a),t.child)}function oE(e,t,n,r,a){if(e===null){var c=n.type;return typeof c=="function"&&!w2(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,GP(e,t,c,r,a)):(e=n0(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var h=c.memoizedProps;if(n=n.compare,n=n!==null?n:cm,n(h,r)&&e.ref===t.ref)return ol(e,t,a)}return t.flags|=1,e=pu(c,r),e.ref=t.ref,e.return=t,t.child=e}function GP(e,t,n,r,a){if(e!==null){var c=e.memoizedProps;if(cm(c,r)&&e.ref===t.ref)if(Mo=!1,t.pendingProps=r=c,(e.lanes&a)!==0)e.flags&131072&&(Mo=!0);else return t.lanes=e.lanes,ol(e,t,a)}return Ib(e,t,n,r,a)}function ZP(e,t,n){var r=t.pendingProps,a=r.children,c=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(lh,Yo),Yo|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lr(lh,Yo),Yo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=c!==null?c.baseLanes:n,lr(lh,Yo),Yo|=r}else c!==null?(r=c.baseLanes|n,t.memoizedState=null):r=n,lr(lh,Yo),Yo|=r;return ho(e,t,a,n),t.child}function KP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ib(e,t,n,r,a){var c=Lo(n)?Ic:Xi.current;return c=Ih(t,c),fh(t,a),n=d2(e,t,n,r,c,a),r=h2(),e!==null&&!Mo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,ol(e,t,a)):(Sr&&r&&Qw(t),t.flags|=1,ho(e,t,n,a),t.child)}function aE(e,t,n,r,a){if(Lo(n)){var c=!0;M0(t)}else c=!1;if(fh(t,a),t.stateNode===null)Qy(e,t),WP(t,n,r),Eb(t,n,r,a),r=!0;else if(e===null){var h=t.stateNode,l=t.memoizedProps;h.props=l;var b=h.context,w=n.contextType;typeof w=="object"&&w!==null?w=Pa(w):(w=Lo(n)?Ic:Xi.current,w=Ih(t,w));var I=n.getDerivedStateFromProps,k=typeof I=="function"||typeof h.getSnapshotBeforeUpdate=="function";k||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==r||b!==w)&&eE(t,h,r,w),Yl=!1;var P=t.memoizedState;h.state=P,D0(t,r,h,a),b=t.memoizedState,l!==r||P!==b||Ao.current||Yl?(typeof I=="function"&&(kb(t,n,I,r),b=t.memoizedState),(l=Yl||Qk(t,n,l,r,P,b,w))?(k||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=b),h.props=r,h.state=b,h.context=w,r=l):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,SP(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Wa(t.type,l),h.props=w,k=t.pendingProps,P=h.context,b=n.contextType,typeof b=="object"&&b!==null?b=Pa(b):(b=Lo(n)?Ic:Xi.current,b=Ih(t,b));var R=n.getDerivedStateFromProps;(I=typeof R=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(l!==k||P!==b)&&eE(t,h,r,b),Yl=!1,P=t.memoizedState,h.state=P,D0(t,r,h,a);var $=t.memoizedState;l!==k||P!==$||Ao.current||Yl?(typeof R=="function"&&(kb(t,n,R,r),$=t.memoizedState),(w=Yl||Qk(t,n,w,r,P,$,b)||!1)?(I||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,$,b),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,$,b)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=$),h.props=r,h.state=$,h.context=b,r=w):(typeof h.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),r=!1)}return Pb(e,t,n,r,c,a)}function Pb(e,t,n,r,a,c){KP(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return a&&qk(t,n,!1),ol(e,t,c);r=t.stateNode,U6.current=t;var l=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=Mh(t,e.child,null,c),t.child=Mh(t,null,l,c)):ho(e,t,l,c),t.memoizedState=r.state,a&&qk(t,n,!0),t.child}function XP(e){var t=e.stateNode;t.pendingContext?Wk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Wk(e,t.context,!1),s2(e,t.containerInfo)}function sE(e,t,n,r,a){return Ph(),t2(a),t.flags|=256,ho(e,t,n,r),t.child}var Mb={dehydrated:null,treeContext:null,retryLane:0};function Ab(e){return{baseLanes:e,cachePool:null,transitions:null}}function YP(e,t,n){var r=t.pendingProps,a=Mr.current,c=!1,h=(t.flags&128)!==0,l;if((l=h)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),lr(Mr,a&1),e===null)return Sb(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,c?(r=t.mode,c=t.child,h={mode:"hidden",children:h},!(r&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=Pv(h,r,0,null),e=bc(e,r,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=Ab(n),t.memoizedState=Mb,e):m2(t,h));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return V6(e,t,h,r,l,a,n);if(c){c=r.fallback,h=t.mode,a=e.child,l=a.sibling;var b={mode:"hidden",children:r.children};return!(h&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=b,t.deletions=null):(r=pu(a,b),r.subtreeFlags=a.subtreeFlags&14680064),l!==null?c=pu(l,c):(c=bc(c,h,n,null),c.flags|=2),c.return=t,r.return=t,r.sibling=c,t.child=r,r=c,c=t.child,h=e.child.memoizedState,h=h===null?Ab(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=e.childLanes&~n,t.memoizedState=Mb,r}return c=e.child,e=c.sibling,r=pu(c,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function m2(e,t){return t=Pv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xy(e,t,n,r){return r!==null&&t2(r),Mh(t,e.child,null,n),e=m2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function V6(e,t,n,r,a,c,h){if(n)return t.flags&256?(t.flags&=-257,r=_x(Error(Ye(422))),xy(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=r.fallback,a=t.mode,r=Pv({mode:"visible",children:r.children},a,0,null),c=bc(c,a,h,null),c.flags|=2,r.return=t,c.return=t,r.sibling=c,t.child=r,t.mode&1&&Mh(t,e.child,null,h),t.child.memoizedState=Ab(h),t.memoizedState=Mb,c);if(!(t.mode&1))return xy(e,t,h,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var l=r.dgst;return r=l,c=Error(Ye(419)),r=_x(c,r,void 0),xy(e,t,h,r)}if(l=(h&e.childLanes)!==0,Mo||l){if(r=xi,r!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|h)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,il(e,a),Ya(r,e,a,-1))}return b2(),r=_x(Error(Ye(421))),xy(e,t,h,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=nD.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,na=uu(a.nextSibling),ra=t,Sr=!0,Ha=null,e!==null&&(wa[Sa++]=Ys,wa[Sa++]=Js,wa[Sa++]=Pc,Ys=e.id,Js=e.overflow,Pc=t),t=m2(t,r.children),t.flags|=4096,t)}function lE(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Cb(e.return,t,n)}function xx(e,t,n,r,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=r,c.tail=n,c.tailMode=a)}function JP(e,t,n){var r=t.pendingProps,a=r.revealOrder,c=r.tail;if(ho(e,t,r.children,n),r=Mr.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lE(e,n,t);else if(e.tag===19)lE(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lr(Mr,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&$0(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),xx(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&$0(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}xx(t,!0,n,null,c);break;case"together":xx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ol(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ac|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ye(153));if(t.child!==null){for(e=t.child,n=pu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=pu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function W6(e,t,n){switch(t.tag){case 3:XP(t),Ph();break;case 5:CP(t);break;case 1:Lo(t.type)&&M0(t);break;case 4:s2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;lr(R0,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(lr(Mr,Mr.current&1),t.flags|=128,null):n&t.child.childLanes?YP(e,t,n):(lr(Mr,Mr.current&1),e=ol(e,t,n),e!==null?e.sibling:null);lr(Mr,Mr.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return JP(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),lr(Mr,Mr.current),r)break;return null;case 22:case 23:return t.lanes=0,ZP(e,t,n)}return ol(e,t,n)}var QP,Lb,eM,tM;QP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lb=function(){};eM=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,mc(bs.current);var c=null;switch(n){case"input":a=eb(e,a),r=eb(e,r),c=[];break;case"select":a=Lr({},a,{value:void 0}),r=Lr({},r,{value:void 0}),c=[];break;case"textarea":a=rb(e,a),r=rb(e,r),c=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=I0)}ob(n,r);var h;n=null;for(w in a)if(!r.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var l=a[w];for(h in l)l.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(rm.hasOwnProperty(w)?c||(c=[]):(c=c||[]).push(w,null));for(w in r){var b=r[w];if(l=a!=null?a[w]:void 0,r.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(h in l)!l.hasOwnProperty(h)||b&&b.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in b)b.hasOwnProperty(h)&&l[h]!==b[h]&&(n||(n={}),n[h]=b[h])}else n||(c||(c=[]),c.push(w,n)),n=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(c=c||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(rm.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&pr("scroll",e),c||l===b||(c=[])):(c=c||[]).push(w,b))}n&&(c=c||[]).push("style",n);var w=c;(t.updateQueue=w)&&(t.flags|=4)}};tM=function(e,t,n,r){n!==r&&(t.flags|=4)};function mf(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wi(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function q6(e,t,n){var r=t.pendingProps;switch(e2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wi(t),null;case 1:return Lo(t.type)&&P0(),Wi(t),null;case 3:return r=t.stateNode,Ah(),fr(Ao),fr(Xi),u2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(vy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ha!==null&&(Nb(Ha),Ha=null))),Lb(e,t),Wi(t),null;case 5:l2(t);var a=mc(mm.current);if(n=t.type,e!==null&&t.stateNode!=null)eM(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ye(166));return Wi(t),null}if(e=mc(bs.current),vy(t)){r=t.stateNode,n=t.type;var c=t.memoizedProps;switch(r[ms]=t,r[pm]=c,e=(t.mode&1)!==0,n){case"dialog":pr("cancel",r),pr("close",r);break;case"iframe":case"object":case"embed":pr("load",r);break;case"video":case"audio":for(a=0;a<Lf.length;a++)pr(Lf[a],r);break;case"source":pr("error",r);break;case"img":case"image":case"link":pr("error",r),pr("load",r);break;case"details":pr("toggle",r);break;case"input":yk(r,c),pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!c.multiple},pr("invalid",r);break;case"textarea":_k(r,c),pr("invalid",r)}ob(n,c),a=null;for(var h in c)if(c.hasOwnProperty(h)){var l=c[h];h==="children"?typeof l=="string"?r.textContent!==l&&(c.suppressHydrationWarning!==!0&&yy(r.textContent,l,e),a=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(c.suppressHydrationWarning!==!0&&yy(r.textContent,l,e),a=["children",""+l]):rm.hasOwnProperty(h)&&l!=null&&h==="onScroll"&&pr("scroll",r)}switch(n){case"input":uy(r),vk(r,c,!0);break;case"textarea":uy(r),xk(r);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(r.onclick=I0)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=PI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[ms]=t,e[pm]=r,QP(e,t,!1,!1),t.stateNode=e;e:{switch(h=ab(n,r),n){case"dialog":pr("cancel",e),pr("close",e),a=r;break;case"iframe":case"object":case"embed":pr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lf.length;a++)pr(Lf[a],e);a=r;break;case"source":pr("error",e),a=r;break;case"img":case"image":case"link":pr("error",e),pr("load",e),a=r;break;case"details":pr("toggle",e),a=r;break;case"input":yk(e,r),a=eb(e,r),pr("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Lr({},r,{value:void 0}),pr("invalid",e);break;case"textarea":_k(e,r),a=rb(e,r),pr("invalid",e);break;default:a=r}ob(n,a),l=a;for(c in l)if(l.hasOwnProperty(c)){var b=l[c];c==="style"?LI(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&MI(e,b)):c==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&im(e,b):typeof b=="number"&&im(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rm.hasOwnProperty(c)?b!=null&&c==="onScroll"&&pr("scroll",e):b!=null&&Fw(e,c,b,h))}switch(n){case"input":uy(e),vk(e,r,!1);break;case"textarea":uy(e),xk(e);break;case"option":r.value!=null&&e.setAttribute("value",""+gu(r.value));break;case"select":e.multiple=!!r.multiple,c=r.value,c!=null?ch(e,!!r.multiple,c,!1):r.defaultValue!=null&&ch(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=I0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Wi(t),null;case 6:if(e&&t.stateNode!=null)tM(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ye(166));if(n=mc(mm.current),mc(bs.current),vy(t)){if(r=t.stateNode,n=t.memoizedProps,r[ms]=t,(c=r.nodeValue!==n)&&(e=ra,e!==null))switch(e.tag){case 3:yy(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&yy(r.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ms]=t,t.stateNode=r}return Wi(t),null;case 13:if(fr(Mr),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&na!==null&&t.mode&1&&!(t.flags&128))_P(),Ph(),t.flags|=98560,c=!1;else if(c=vy(t),r!==null&&r.dehydrated!==null){if(e===null){if(!c)throw Error(Ye(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ye(317));c[ms]=t}else Ph(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Wi(t),c=!1}else Ha!==null&&(Nb(Ha),Ha=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Mr.current&1?oi===0&&(oi=3):b2())),t.updateQueue!==null&&(t.flags|=4),Wi(t),null);case 4:return Ah(),Lb(e,t),e===null&&dm(t.stateNode.containerInfo),Wi(t),null;case 10:return i2(t.type._context),Wi(t),null;case 17:return Lo(t.type)&&P0(),Wi(t),null;case 19:if(fr(Mr),c=t.memoizedState,c===null)return Wi(t),null;if(r=(t.flags&128)!==0,h=c.rendering,h===null)if(r)mf(c,!1);else{if(oi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=$0(e),h!==null){for(t.flags|=128,mf(c,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)c=n,e=r,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,e=h.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lr(Mr,Mr.current&1|2),t.child}e=e.sibling}c.tail!==null&&Wr()>Rh&&(t.flags|=128,r=!0,mf(c,!1),t.lanes=4194304)}else{if(!r)if(e=$0(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mf(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!Sr)return Wi(t),null}else 2*Wr()-c.renderingStartTime>Rh&&n!==1073741824&&(t.flags|=128,r=!0,mf(c,!1),t.lanes=4194304);c.isBackwards?(h.sibling=t.child,t.child=h):(n=c.last,n!==null?n.sibling=h:t.child=h,c.last=h)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Wr(),t.sibling=null,n=Mr.current,lr(Mr,r?n&1|2:n&1),t):(Wi(t),null);case 22:case 23:return x2(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Yo&1073741824&&(Wi(t),t.subtreeFlags&6&&(t.flags|=8192)):Wi(t),null;case 24:return null;case 25:return null}throw Error(Ye(156,t.tag))}function H6(e,t){switch(e2(t),t.tag){case 1:return Lo(t.type)&&P0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ah(),fr(Ao),fr(Xi),u2(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return l2(t),null;case 13:if(fr(Mr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ye(340));Ph()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(Mr),null;case 4:return Ah(),null;case 10:return i2(t.type._context),null;case 22:case 23:return x2(),null;case 24:return null;default:return null}}var by=!1,Zi=!1,G6=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function sh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nr(e,t,r)}else n.current=null}function Rb(e,t,n){try{n()}catch(r){Nr(e,t,r)}}var uE=!1;function Z6(e,t){if(gb=k0,e=aP(),Jw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,c=r.focusNode;r=r.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var h=0,l=-1,b=-1,w=0,I=0,k=e,P=null;t:for(;;){for(var R;k!==n||a!==0&&k.nodeType!==3||(l=h+a),k!==c||r!==0&&k.nodeType!==3||(b=h+r),k.nodeType===3&&(h+=k.nodeValue.length),(R=k.firstChild)!==null;)P=k,k=R;for(;;){if(k===e)break t;if(P===n&&++w===a&&(l=h),P===c&&++I===r&&(b=h),(R=k.nextSibling)!==null)break;k=P,P=k.parentNode}k=R}n=l===-1||b===-1?null:{start:l,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(yb={focusedElem:e,selectionRange:n},k0=!1,Tt=t;Tt!==null;)if(t=Tt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Tt=e;else for(;Tt!==null;){t=Tt;try{var $=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if($!==null){var U=$.memoizedProps,Z=$.memoizedState,D=t.stateNode,O=D.getSnapshotBeforeUpdate(t.elementType===t.type?U:Wa(t.type,U),Z);D.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var F=t.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(G){Nr(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,Tt=e;break}Tt=t.return}return $=uE,uE=!1,$}function qf(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&Rb(t,n,c)}a=a.next}while(a!==r)}}function Tv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function zb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function nM(e){var t=e.alternate;t!==null&&(e.alternate=null,nM(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ms],delete t[pm],delete t[xb],delete t[M6],delete t[A6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rM(e){return e.tag===5||e.tag===3||e.tag===4}function cE(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||rM(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Db(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=I0));else if(r!==4&&(e=e.child,e!==null))for(Db(e,t,n),e=e.sibling;e!==null;)Db(e,t,n),e=e.sibling}function $b(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($b(e,t,n),e=e.sibling;e!==null;)$b(e,t,n),e=e.sibling}var Pi=null,qa=!1;function Zl(e,t,n){for(n=n.child;n!==null;)iM(e,t,n),n=n.sibling}function iM(e,t,n){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(_v,n)}catch{}switch(n.tag){case 5:Zi||sh(n,t);case 6:var r=Pi,a=qa;Pi=null,Zl(e,t,n),Pi=r,qa=a,Pi!==null&&(qa?(e=Pi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Pi.removeChild(n.stateNode));break;case 18:Pi!==null&&(qa?(e=Pi,n=n.stateNode,e.nodeType===8?px(e.parentNode,n):e.nodeType===1&&px(e,n),lm(e)):px(Pi,n.stateNode));break;case 4:r=Pi,a=qa,Pi=n.stateNode.containerInfo,qa=!0,Zl(e,t,n),Pi=r,qa=a;break;case 0:case 11:case 14:case 15:if(!Zi&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var c=a,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&Rb(n,t,h),a=a.next}while(a!==r)}Zl(e,t,n);break;case 1:if(!Zi&&(sh(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Nr(n,t,l)}Zl(e,t,n);break;case 21:Zl(e,t,n);break;case 22:n.mode&1?(Zi=(r=Zi)||n.memoizedState!==null,Zl(e,t,n),Zi=r):Zl(e,t,n);break;default:Zl(e,t,n)}}function dE(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new G6),t.forEach(function(r){var a=rD.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function Na(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var c=e,h=t,l=h;e:for(;l!==null;){switch(l.tag){case 5:Pi=l.stateNode,qa=!1;break e;case 3:Pi=l.stateNode.containerInfo,qa=!0;break e;case 4:Pi=l.stateNode.containerInfo,qa=!0;break e}l=l.return}if(Pi===null)throw Error(Ye(160));iM(c,h,a),Pi=null,qa=!1;var b=a.alternate;b!==null&&(b.return=null),a.return=null}catch(w){Nr(a,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)oM(t,e),t=t.sibling}function oM(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Na(t,e),ls(e),r&4){try{qf(3,e,e.return),Tv(3,e)}catch(U){Nr(e,e.return,U)}try{qf(5,e,e.return)}catch(U){Nr(e,e.return,U)}}break;case 1:Na(t,e),ls(e),r&512&&n!==null&&sh(n,n.return);break;case 5:if(Na(t,e),ls(e),r&512&&n!==null&&sh(n,n.return),e.flags&32){var a=e.stateNode;try{im(a,"")}catch(U){Nr(e,e.return,U)}}if(r&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,h=n!==null?n.memoizedProps:c,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&c.type==="radio"&&c.name!=null&&TI(a,c),ab(l,h);var w=ab(l,c);for(h=0;h<b.length;h+=2){var I=b[h],k=b[h+1];I==="style"?LI(a,k):I==="dangerouslySetInnerHTML"?MI(a,k):I==="children"?im(a,k):Fw(a,I,k,w)}switch(l){case"input":tb(a,c);break;case"textarea":II(a,c);break;case"select":var P=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var R=c.value;R!=null?ch(a,!!c.multiple,R,!1):P!==!!c.multiple&&(c.defaultValue!=null?ch(a,!!c.multiple,c.defaultValue,!0):ch(a,!!c.multiple,c.multiple?[]:"",!1))}a[pm]=c}catch(U){Nr(e,e.return,U)}}break;case 6:if(Na(t,e),ls(e),r&4){if(e.stateNode===null)throw Error(Ye(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(U){Nr(e,e.return,U)}}break;case 3:if(Na(t,e),ls(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{lm(t.containerInfo)}catch(U){Nr(e,e.return,U)}break;case 4:Na(t,e),ls(e);break;case 13:Na(t,e),ls(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(v2=Wr())),r&4&&dE(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(Zi=(w=Zi)||I,Na(t,e),Zi=w):Na(t,e),ls(e),r&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!I&&e.mode&1)for(Tt=e,I=e.child;I!==null;){for(k=Tt=I;Tt!==null;){switch(P=Tt,R=P.child,P.tag){case 0:case 11:case 14:case 15:qf(4,P,P.return);break;case 1:sh(P,P.return);var $=P.stateNode;if(typeof $.componentWillUnmount=="function"){r=P,n=P.return;try{t=r,$.props=t.memoizedProps,$.state=t.memoizedState,$.componentWillUnmount()}catch(U){Nr(r,n,U)}}break;case 5:sh(P,P.return);break;case 22:if(P.memoizedState!==null){pE(k);continue}}R!==null?(R.return=P,Tt=R):pE(k)}I=I.sibling}e:for(I=null,k=e;;){if(k.tag===5){if(I===null){I=k;try{a=k.stateNode,w?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(l=k.stateNode,b=k.memoizedProps.style,h=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=AI("display",h))}catch(U){Nr(e,e.return,U)}}}else if(k.tag===6){if(I===null)try{k.stateNode.nodeValue=w?"":k.memoizedProps}catch(U){Nr(e,e.return,U)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;I===k&&(I=null),k=k.return}I===k&&(I=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Na(t,e),ls(e),r&4&&dE(e);break;case 21:break;default:Na(t,e),ls(e)}}function ls(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(rM(n)){var r=n;break e}n=n.return}throw Error(Ye(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(im(a,""),r.flags&=-33);var c=cE(e);$b(e,c,a);break;case 3:case 4:var h=r.stateNode.containerInfo,l=cE(e);Db(e,l,h);break;default:throw Error(Ye(161))}}catch(b){Nr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K6(e,t,n){Tt=e,aM(e)}function aM(e,t,n){for(var r=(e.mode&1)!==0;Tt!==null;){var a=Tt,c=a.child;if(a.tag===22&&r){var h=a.memoizedState!==null||by;if(!h){var l=a.alternate,b=l!==null&&l.memoizedState!==null||Zi;l=by;var w=Zi;if(by=h,(Zi=b)&&!w)for(Tt=a;Tt!==null;)h=Tt,b=h.child,h.tag===22&&h.memoizedState!==null?fE(a):b!==null?(b.return=h,Tt=b):fE(a);for(;c!==null;)Tt=c,aM(c),c=c.sibling;Tt=a,by=l,Zi=w}hE(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Tt=c):hE(e)}}function hE(e){for(;Tt!==null;){var t=Tt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zi||Tv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Zi)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Wa(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Xk(t,c,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Xk(t,h,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var k=I.dehydrated;k!==null&&lm(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}Zi||t.flags&512&&zb(t)}catch(P){Nr(t,t.return,P)}}if(t===e){Tt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function pE(e){for(;Tt!==null;){var t=Tt;if(t===e){Tt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Tt=n;break}Tt=t.return}}function fE(e){for(;Tt!==null;){var t=Tt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tv(4,t)}catch(b){Nr(t,n,b)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(b){Nr(t,a,b)}}var c=t.return;try{zb(t)}catch(b){Nr(t,c,b)}break;case 5:var h=t.return;try{zb(t)}catch(b){Nr(t,h,b)}}}catch(b){Nr(t,t.return,b)}if(t===e){Tt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Tt=l;break}Tt=t.return}}var X6=Math.ceil,F0=hl.ReactCurrentDispatcher,g2=hl.ReactCurrentOwner,Ia=hl.ReactCurrentBatchConfig,An=0,xi=null,Qr=null,Ri=0,Yo=0,lh=Su(0),oi=0,_m=null,Ac=0,Iv=0,y2=0,Hf=null,Po=null,v2=0,Rh=1/0,Zs=null,N0=!1,Ob=null,du=null,wy=!1,nu=null,j0=0,Gf=0,Bb=null,e0=-1,t0=0;function mo(){return An&6?Wr():e0!==-1?e0:e0=Wr()}function hu(e){return e.mode&1?An&2&&Ri!==0?Ri&-Ri:R6.transition!==null?(t0===0&&(t0=WI()),t0):(e=Gn,e!==0||(e=window.event,e=e===void 0?16:YI(e.type)),e):1}function Ya(e,t,n,r){if(50<Gf)throw Gf=0,Bb=null,Error(Ye(185));jm(e,n,r),(!(An&2)||e!==xi)&&(e===xi&&(!(An&2)&&(Iv|=n),oi===4&&Ql(e,Ri)),Ro(e,r),n===1&&An===0&&!(t.mode&1)&&(Rh=Wr()+500,Cv&&Cu()))}function Ro(e,t){var n=e.callbackNode;Rz(e,t);var r=C0(e,e===xi?Ri:0);if(r===0)n!==null&&Sk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Sk(n),t===1)e.tag===0?L6(mE.bind(null,e)):gP(mE.bind(null,e)),I6(function(){!(An&6)&&Cu()}),n=null;else{switch(qI(r)){case 1:n=Ww;break;case 4:n=UI;break;case 16:n=S0;break;case 536870912:n=VI;break;default:n=S0}n=fM(n,sM.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sM(e,t){if(e0=-1,t0=0,An&6)throw Error(Ye(327));var n=e.callbackNode;if(mh()&&e.callbackNode!==n)return null;var r=C0(e,e===xi?Ri:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=U0(e,r);else{t=r;var a=An;An|=2;var c=uM();(xi!==e||Ri!==t)&&(Zs=null,Rh=Wr()+500,xc(e,t));do try{Q6();break}catch(l){lM(e,l)}while(!0);r2(),F0.current=c,An=a,Qr!==null?t=0:(xi=null,Ri=0,t=oi)}if(t!==0){if(t===2&&(a=db(e),a!==0&&(r=a,t=Fb(e,a))),t===1)throw n=_m,xc(e,0),Ql(e,r),Ro(e,Wr()),n;if(t===6)Ql(e,r);else{if(a=e.current.alternate,!(r&30)&&!Y6(a)&&(t=U0(e,r),t===2&&(c=db(e),c!==0&&(r=c,t=Fb(e,c))),t===1))throw n=_m,xc(e,0),Ql(e,r),Ro(e,Wr()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Ye(345));case 2:ac(e,Po,Zs);break;case 3:if(Ql(e,r),(r&130023424)===r&&(t=v2+500-Wr(),10<t)){if(C0(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){mo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=_b(ac.bind(null,e,Po,Zs),t);break}ac(e,Po,Zs);break;case 4:if(Ql(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var h=31-Xa(r);c=1<<h,h=t[h],h>a&&(a=h),r&=~c}if(r=a,r=Wr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X6(r/1960))-r,10<r){e.timeoutHandle=_b(ac.bind(null,e,Po,Zs),r);break}ac(e,Po,Zs);break;case 5:ac(e,Po,Zs);break;default:throw Error(Ye(329))}}}return Ro(e,Wr()),e.callbackNode===n?sM.bind(null,e):null}function Fb(e,t){var n=Hf;return e.current.memoizedState.isDehydrated&&(xc(e,t).flags|=256),e=U0(e,t),e!==2&&(t=Po,Po=n,t!==null&&Nb(t)),e}function Nb(e){Po===null?Po=e:Po.push.apply(Po,e)}function Y6(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],c=a.getSnapshot;a=a.value;try{if(!Qa(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ql(e,t){for(t&=~y2,t&=~Iv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Xa(t),r=1<<n;e[n]=-1,t&=~r}}function mE(e){if(An&6)throw Error(Ye(327));mh();var t=C0(e,0);if(!(t&1))return Ro(e,Wr()),null;var n=U0(e,t);if(e.tag!==0&&n===2){var r=db(e);r!==0&&(t=r,n=Fb(e,r))}if(n===1)throw n=_m,xc(e,0),Ql(e,t),Ro(e,Wr()),n;if(n===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ac(e,Po,Zs),Ro(e,Wr()),null}function _2(e,t){var n=An;An|=1;try{return e(t)}finally{An=n,An===0&&(Rh=Wr()+500,Cv&&Cu())}}function Lc(e){nu!==null&&nu.tag===0&&!(An&6)&&mh();var t=An;An|=1;var n=Ia.transition,r=Gn;try{if(Ia.transition=null,Gn=1,e)return e()}finally{Gn=r,Ia.transition=n,An=t,!(An&6)&&Cu()}}function x2(){Yo=lh.current,fr(lh)}function xc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,T6(n)),Qr!==null)for(n=Qr.return;n!==null;){var r=n;switch(e2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&P0();break;case 3:Ah(),fr(Ao),fr(Xi),u2();break;case 5:l2(r);break;case 4:Ah();break;case 13:fr(Mr);break;case 19:fr(Mr);break;case 10:i2(r.type._context);break;case 22:case 23:x2()}n=n.return}if(xi=e,Qr=e=pu(e.current,null),Ri=Yo=t,oi=0,_m=null,y2=Iv=Ac=0,Po=Hf=null,fc!==null){for(t=0;t<fc.length;t++)if(n=fc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,c=n.pending;if(c!==null){var h=c.next;c.next=a,r.next=h}n.pending=r}fc=null}return e}function lM(e,t){do{var n=Qr;try{if(r2(),Yy.current=B0,O0){for(var r=Ar.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}O0=!1}if(Mc=0,vi=ii=Ar=null,Wf=!1,gm=0,g2.current=null,n===null||n.return===null){oi=1,_m=t,Qr=null;break}e:{var c=e,h=n.return,l=n,b=t;if(t=Ri,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,I=l,k=I.tag;if(!(I.mode&1)&&(k===0||k===11||k===15)){var P=I.alternate;P?(I.updateQueue=P.updateQueue,I.memoizedState=P.memoizedState,I.lanes=P.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=nE(h);if(R!==null){R.flags&=-257,rE(R,h,l,c,t),R.mode&1&&tE(c,w,t),t=R,b=w;var $=t.updateQueue;if($===null){var U=new Set;U.add(b),t.updateQueue=U}else $.add(b);break e}else{if(!(t&1)){tE(c,w,t),b2();break e}b=Error(Ye(426))}}else if(Sr&&l.mode&1){var Z=nE(h);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),rE(Z,h,l,c,t),t2(Lh(b,l));break e}}c=b=Lh(b,l),oi!==4&&(oi=2),Hf===null?Hf=[c]:Hf.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var D=qP(c,b,t);Kk(c,D);break e;case 1:l=b;var O=c.type,F=c.stateNode;if(!(c.flags&128)&&(typeof O.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(du===null||!du.has(F)))){c.flags|=65536,t&=-t,c.lanes|=t;var G=HP(c,l,t);Kk(c,G);break e}}c=c.return}while(c!==null)}dM(n)}catch(te){t=te,Qr===n&&n!==null&&(Qr=n=n.return);continue}break}while(!0)}function uM(){var e=F0.current;return F0.current=B0,e===null?B0:e}function b2(){(oi===0||oi===3||oi===2)&&(oi=4),xi===null||!(Ac&268435455)&&!(Iv&268435455)||Ql(xi,Ri)}function U0(e,t){var n=An;An|=2;var r=uM();(xi!==e||Ri!==t)&&(Zs=null,xc(e,t));do try{J6();break}catch(a){lM(e,a)}while(!0);if(r2(),An=n,F0.current=r,Qr!==null)throw Error(Ye(261));return xi=null,Ri=0,oi}function J6(){for(;Qr!==null;)cM(Qr)}function Q6(){for(;Qr!==null&&!Cz();)cM(Qr)}function cM(e){var t=pM(e.alternate,e,Yo);e.memoizedProps=e.pendingProps,t===null?dM(e):Qr=t,g2.current=null}function dM(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=H6(n,t),n!==null){n.flags&=32767,Qr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{oi=6,Qr=null;return}}else if(n=q6(n,t,Yo),n!==null){Qr=n;return}if(t=t.sibling,t!==null){Qr=t;return}Qr=t=e}while(t!==null);oi===0&&(oi=5)}function ac(e,t,n){var r=Gn,a=Ia.transition;try{Ia.transition=null,Gn=1,eD(e,t,n,r)}finally{Ia.transition=a,Gn=r}return null}function eD(e,t,n,r){do mh();while(nu!==null);if(An&6)throw Error(Ye(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(zz(e,c),e===xi&&(Qr=xi=null,Ri=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wy||(wy=!0,fM(S0,function(){return mh(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Ia.transition,Ia.transition=null;var h=Gn;Gn=1;var l=An;An|=4,g2.current=null,Z6(e,n),oM(n,e),x6(yb),k0=!!gb,yb=gb=null,e.current=n,K6(n),kz(),An=l,Gn=h,Ia.transition=c}else e.current=n;if(wy&&(wy=!1,nu=e,j0=a),c=e.pendingLanes,c===0&&(du=null),Iz(n.stateNode),Ro(e,Wr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(N0)throw N0=!1,e=Ob,Ob=null,e;return j0&1&&e.tag!==0&&mh(),c=e.pendingLanes,c&1?e===Bb?Gf++:(Gf=0,Bb=e):Gf=0,Cu(),null}function mh(){if(nu!==null){var e=qI(j0),t=Ia.transition,n=Gn;try{if(Ia.transition=null,Gn=16>e?16:e,nu===null)var r=!1;else{if(e=nu,nu=null,j0=0,An&6)throw Error(Ye(331));var a=An;for(An|=4,Tt=e.current;Tt!==null;){var c=Tt,h=c.child;if(Tt.flags&16){var l=c.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(Tt=w;Tt!==null;){var I=Tt;switch(I.tag){case 0:case 11:case 15:qf(8,I,c)}var k=I.child;if(k!==null)k.return=I,Tt=k;else for(;Tt!==null;){I=Tt;var P=I.sibling,R=I.return;if(nM(I),I===w){Tt=null;break}if(P!==null){P.return=R,Tt=P;break}Tt=R}}}var $=c.alternate;if($!==null){var U=$.child;if(U!==null){$.child=null;do{var Z=U.sibling;U.sibling=null,U=Z}while(U!==null)}}Tt=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,Tt=h;else e:for(;Tt!==null;){if(c=Tt,c.flags&2048)switch(c.tag){case 0:case 11:case 15:qf(9,c,c.return)}var D=c.sibling;if(D!==null){D.return=c.return,Tt=D;break e}Tt=c.return}}var O=e.current;for(Tt=O;Tt!==null;){h=Tt;var F=h.child;if(h.subtreeFlags&2064&&F!==null)F.return=h,Tt=F;else e:for(h=O;Tt!==null;){if(l=Tt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Tv(9,l)}}catch(te){Nr(l,l.return,te)}if(l===h){Tt=null;break e}var G=l.sibling;if(G!==null){G.return=l.return,Tt=G;break e}Tt=l.return}}if(An=a,Cu(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(_v,e)}catch{}r=!0}return r}finally{Gn=n,Ia.transition=t}}return!1}function gE(e,t,n){t=Lh(n,t),t=qP(e,t,1),e=cu(e,t,1),t=mo(),e!==null&&(jm(e,1,t),Ro(e,t))}function Nr(e,t,n){if(e.tag===3)gE(e,e,n);else for(;t!==null;){if(t.tag===3){gE(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(du===null||!du.has(r))){e=Lh(n,e),e=HP(t,e,1),t=cu(t,e,1),e=mo(),t!==null&&(jm(t,1,e),Ro(t,e));break}}t=t.return}}function tD(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mo(),e.pingedLanes|=e.suspendedLanes&n,xi===e&&(Ri&n)===n&&(oi===4||oi===3&&(Ri&130023424)===Ri&&500>Wr()-v2?xc(e,0):y2|=n),Ro(e,t)}function hM(e,t){t===0&&(e.mode&1?(t=hy,hy<<=1,!(hy&130023424)&&(hy=4194304)):t=1);var n=mo();e=il(e,t),e!==null&&(jm(e,t,n),Ro(e,n))}function nD(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),hM(e,n)}function rD(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ye(314))}r!==null&&r.delete(t),hM(e,n)}var pM;pM=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ao.current)Mo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Mo=!1,W6(e,t,n);Mo=!!(e.flags&131072)}else Mo=!1,Sr&&t.flags&1048576&&yP(t,L0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qy(e,t),e=t.pendingProps;var a=Ih(t,Xi.current);fh(t,n),a=d2(null,t,r,e,a,n);var c=h2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Lo(r)?(c=!0,M0(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a2(t),a.updater=Ev,t.stateNode=a,a._reactInternals=t,Eb(t,r,e,n),t=Pb(null,t,r,!0,c,n)):(t.tag=0,Sr&&c&&Qw(t),ho(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qy(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=oD(r),e=Wa(r,e),a){case 0:t=Ib(null,t,r,e,n);break e;case 1:t=aE(null,t,r,e,n);break e;case 11:t=iE(null,t,r,e,n);break e;case 14:t=oE(null,t,r,Wa(r.type,e),n);break e}throw Error(Ye(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Wa(r,a),Ib(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Wa(r,a),aE(e,t,r,a,n);case 3:e:{if(XP(t),e===null)throw Error(Ye(387));r=t.pendingProps,c=t.memoizedState,a=c.element,SP(e,t),D0(t,r,null,n);var h=t.memoizedState;if(r=h.element,c.isDehydrated)if(c={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Lh(Error(Ye(423)),t),t=sE(e,t,r,n,a);break e}else if(r!==a){a=Lh(Error(Ye(424)),t),t=sE(e,t,r,n,a);break e}else for(na=uu(t.stateNode.containerInfo.firstChild),ra=t,Sr=!0,Ha=null,n=bP(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ph(),r===a){t=ol(e,t,n);break e}ho(e,t,r,n)}t=t.child}return t;case 5:return CP(t),e===null&&Sb(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,h=a.children,vb(r,a)?h=null:c!==null&&vb(r,c)&&(t.flags|=32),KP(e,t),ho(e,t,h,n),t.child;case 6:return e===null&&Sb(t),null;case 13:return YP(e,t,n);case 4:return s2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Mh(t,null,r,n):ho(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Wa(r,a),iE(e,t,r,a,n);case 7:return ho(e,t,t.pendingProps,n),t.child;case 8:return ho(e,t,t.pendingProps.children,n),t.child;case 12:return ho(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,c=t.memoizedProps,h=a.value,lr(R0,r._currentValue),r._currentValue=h,c!==null)if(Qa(c.value,h)){if(c.children===a.children&&!Ao.current){t=ol(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var l=c.dependencies;if(l!==null){h=c.child;for(var b=l.firstContext;b!==null;){if(b.context===r){if(c.tag===1){b=el(-1,n&-n),b.tag=2;var w=c.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?b.next=b:(b.next=I.next,I.next=b),w.pending=b}}c.lanes|=n,b=c.alternate,b!==null&&(b.lanes|=n),Cb(c.return,n,t),l.lanes|=n;break}b=b.next}}else if(c.tag===10)h=c.type===t.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(Ye(341));h.lanes|=n,l=h.alternate,l!==null&&(l.lanes|=n),Cb(h,n,t),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===t){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}ho(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,fh(t,n),a=Pa(a),r=r(a),t.flags|=1,ho(e,t,r,n),t.child;case 14:return r=t.type,a=Wa(r,t.pendingProps),a=Wa(r.type,a),oE(e,t,r,a,n);case 15:return GP(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Wa(r,a),Qy(e,t),t.tag=1,Lo(r)?(e=!0,M0(t)):e=!1,fh(t,n),WP(t,r,a),Eb(t,r,a,n),Pb(null,t,r,!0,e,n);case 19:return JP(e,t,n);case 22:return ZP(e,t,n)}throw Error(Ye(156,t.tag))};function fM(e,t){return jI(e,t)}function iD(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(e,t,n,r){return new iD(e,t,n,r)}function w2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oD(e){if(typeof e=="function")return w2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jw)return 11;if(e===Uw)return 14}return 2}function pu(e,t){var n=e.alternate;return n===null?(n=ka(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function n0(e,t,n,r,a,c){var h=2;if(r=e,typeof e=="function")w2(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case Jd:return bc(n.children,a,c,t);case Nw:h=8,a|=8;break;case Xx:return e=ka(12,n,t,a|2),e.elementType=Xx,e.lanes=c,e;case Yx:return e=ka(13,n,t,a),e.elementType=Yx,e.lanes=c,e;case Jx:return e=ka(19,n,t,a),e.elementType=Jx,e.lanes=c,e;case CI:return Pv(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wI:h=10;break e;case SI:h=9;break e;case jw:h=11;break e;case Uw:h=14;break e;case Xl:h=16,r=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return t=ka(h,n,t,a),t.elementType=e,t.type=r,t.lanes=c,t}function bc(e,t,n,r){return e=ka(7,e,r,t),e.lanes=n,e}function Pv(e,t,n,r){return e=ka(22,e,r,t),e.elementType=CI,e.lanes=n,e.stateNode={isHidden:!1},e}function bx(e,t,n){return e=ka(6,e,null,t),e.lanes=n,e}function wx(e,t,n){return t=ka(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function aD(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nx(0),this.expirationTimes=nx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nx(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function S2(e,t,n,r,a,c,h,l,b){return e=new aD(e,t,n,l,b),t===1?(t=1,c===!0&&(t|=8)):t=0,c=ka(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},a2(c),e}function sD(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yd,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function mM(e){if(!e)return yu;e=e._reactInternals;e:{if(Fc(e)!==e||e.tag!==1)throw Error(Ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Lo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ye(171))}if(e.tag===1){var n=e.type;if(Lo(n))return mP(e,n,t)}return t}function gM(e,t,n,r,a,c,h,l,b){return e=S2(n,r,!0,e,a,c,h,l,b),e.context=mM(null),n=e.current,r=mo(),a=hu(n),c=el(r,a),c.callback=t??null,cu(n,c,a),e.current.lanes=a,jm(e,a,r),Ro(e,r),e}function Mv(e,t,n,r){var a=t.current,c=mo(),h=hu(a);return n=mM(n),t.context===null?t.context=n:t.pendingContext=n,t=el(c,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=cu(a,t,h),e!==null&&(Ya(e,a,h,c),Xy(e,a,h)),h}function V0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function yE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function C2(e,t){yE(e,t),(e=e.alternate)&&yE(e,t)}function lD(){return null}var yM=typeof reportError=="function"?reportError:function(e){console.error(e)};function k2(e){this._internalRoot=e}Av.prototype.render=k2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ye(409));Mv(e,t,null,null)};Av.prototype.unmount=k2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lc(function(){Mv(null,e,null,null)}),t[rl]=null}};function Av(e){this._internalRoot=e}Av.prototype.unstable_scheduleHydration=function(e){if(e){var t=ZI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jl.length&&t!==0&&t<Jl[n].priority;n++);Jl.splice(n,0,e),n===0&&XI(e)}};function E2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Lv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function vE(){}function uD(e,t,n,r,a){if(a){if(typeof r=="function"){var c=r;r=function(){var w=V0(h);c.call(w)}}var h=gM(t,r,e,0,null,!1,!1,"",vE);return e._reactRootContainer=h,e[rl]=h.current,dm(e.nodeType===8?e.parentNode:e),Lc(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var l=r;r=function(){var w=V0(b);l.call(w)}}var b=S2(e,0,!1,null,null,!1,!1,"",vE);return e._reactRootContainer=b,e[rl]=b.current,dm(e.nodeType===8?e.parentNode:e),Lc(function(){Mv(t,b,n,r)}),b}function Rv(e,t,n,r,a){var c=n._reactRootContainer;if(c){var h=c;if(typeof a=="function"){var l=a;a=function(){var b=V0(h);l.call(b)}}Mv(t,h,e,a)}else h=uD(n,t,e,a,r);return V0(h)}HI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Af(t.pendingLanes);n!==0&&(qw(t,n|1),Ro(t,Wr()),!(An&6)&&(Rh=Wr()+500,Cu()))}break;case 13:Lc(function(){var r=il(e,1);if(r!==null){var a=mo();Ya(r,e,1,a)}}),C2(e,1)}};Hw=function(e){if(e.tag===13){var t=il(e,134217728);if(t!==null){var n=mo();Ya(t,e,134217728,n)}C2(e,134217728)}};GI=function(e){if(e.tag===13){var t=hu(e),n=il(e,t);if(n!==null){var r=mo();Ya(n,e,t,r)}C2(e,t)}};ZI=function(){return Gn};KI=function(e,t){var n=Gn;try{return Gn=e,t()}finally{Gn=n}};lb=function(e,t,n){switch(t){case"input":if(tb(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Sv(r);if(!a)throw Error(Ye(90));EI(r),tb(r,a)}}}break;case"textarea":II(e,n);break;case"select":t=n.value,t!=null&&ch(e,!!n.multiple,t,!1)}};DI=_2;$I=Lc;var cD={usingClientEntryPoint:!1,Events:[Vm,nh,Sv,RI,zI,_2]},gf={findFiberByHostInstance:pc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dD={bundleType:gf.bundleType,version:gf.version,rendererPackageName:gf.rendererPackageName,rendererConfig:gf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=FI(e),e===null?null:e.stateNode},findFiberByHostInstance:gf.findFiberByHostInstance||lD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sy.isDisabled&&Sy.supportsFiber)try{_v=Sy.inject(dD),xs=Sy}catch{}}aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cD;aa.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E2(t))throw Error(Ye(200));return sD(e,t,null,n)};aa.createRoot=function(e,t){if(!E2(e))throw Error(Ye(299));var n=!1,r="",a=yM;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=S2(e,1,!1,null,null,n,!1,r,a),e[rl]=t.current,dm(e.nodeType===8?e.parentNode:e),new k2(t)};aa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=FI(t),e=e===null?null:e.stateNode,e};aa.flushSync=function(e){return Lc(e)};aa.hydrate=function(e,t,n){if(!Lv(t))throw Error(Ye(200));return Rv(null,e,t,!0,n)};aa.hydrateRoot=function(e,t,n){if(!E2(e))throw Error(Ye(405));var r=n!=null&&n.hydratedSources||null,a=!1,c="",h=yM;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=gM(t,null,e,1,n??null,a,!1,c,h),e[rl]=t.current,dm(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Av(t)};aa.render=function(e,t,n){if(!Lv(t))throw Error(Ye(200));return Rv(null,e,t,!1,n)};aa.unmountComponentAtNode=function(e){if(!Lv(e))throw Error(Ye(40));return e._reactRootContainer?(Lc(function(){Rv(null,null,e,!1,function(){e._reactRootContainer=null,e[rl]=null})}),!0):!1};aa.unstable_batchedUpdates=_2;aa.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Lv(n))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return Rv(e,t,n,!1,r)};aa.version="18.3.1-next-f1338f8080-20240426";function vM(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vM)}catch(e){console.error(e)}}vM(),vI.exports=aa;var T2=vI.exports;const Cy=Fm(T2);var _E=T2;Zx.createRoot=_E.createRoot,Zx.hydrateRoot=_E.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xm.apply(this,arguments)}var ru;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ru||(ru={}));const xE="popstate";function hD(e){e===void 0&&(e={});function t(r,a){let{pathname:c,search:h,hash:l}=r.location;return jb("",{pathname:c,search:h,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:xM(a)}return fD(t,n,null,e)}function si(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function _M(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pD(){return Math.random().toString(36).substr(2,8)}function bE(e,t){return{usr:e.state,key:e.key,idx:t}}function jb(e,t,n,r){return n===void 0&&(n=null),xm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Vh(t):t,{state:n,key:t&&t.key||r||pD()})}function xM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Vh(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function fD(e,t,n,r){r===void 0&&(r={});let{window:a=document.defaultView,v5Compat:c=!1}=r,h=a.history,l=ru.Pop,b=null,w=I();w==null&&(w=0,h.replaceState(xm({},h.state,{idx:w}),""));function I(){return(h.state||{idx:null}).idx}function k(){l=ru.Pop;let Z=I(),D=Z==null?null:Z-w;w=Z,b&&b({action:l,location:U.location,delta:D})}function P(Z,D){l=ru.Push;let O=jb(U.location,Z,D);w=I()+1;let F=bE(O,w),G=U.createHref(O);try{h.pushState(F,"",G)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(G)}c&&b&&b({action:l,location:U.location,delta:1})}function R(Z,D){l=ru.Replace;let O=jb(U.location,Z,D);w=I();let F=bE(O,w),G=U.createHref(O);h.replaceState(F,"",G),c&&b&&b({action:l,location:U.location,delta:0})}function $(Z){let D=a.location.origin!=="null"?a.location.origin:a.location.href,O=typeof Z=="string"?Z:xM(Z);return O=O.replace(/ $/,"%20"),si(D,"No window.location.(origin|href) available to create URL for href: "+O),new URL(O,D)}let U={get action(){return l},get location(){return e(a,h)},listen(Z){if(b)throw new Error("A history only accepts one active listener");return a.addEventListener(xE,k),b=Z,()=>{a.removeEventListener(xE,k),b=null}},createHref(Z){return t(a,Z)},createURL:$,encodeLocation(Z){let D=$(Z);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:P,replace:R,go(Z){return h.go(Z)}};return U}var wE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(wE||(wE={}));function mD(e,t,n){return n===void 0&&(n="/"),gD(e,t,n,!1)}function gD(e,t,n,r){let a=typeof t=="string"?Vh(t):t,c=SM(a.pathname||"/",n);if(c==null)return null;let h=bM(e);yD(h);let l=null;for(let b=0;l==null&&b<h.length;++b){let w=ID(c);l=ED(h[b],w,r)}return l}function bM(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let a=(c,h,l)=>{let b={relativePath:l===void 0?c.path||"":l,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};b.relativePath.startsWith("/")&&(si(b.relativePath.startsWith(r),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(r.length));let w=wc([r,b.relativePath]),I=n.concat(b);c.children&&c.children.length>0&&(si(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),bM(c.children,t,I,w)),!(c.path==null&&!c.index)&&t.push({path:w,score:CD(w,c.index),routesMeta:I})};return e.forEach((c,h)=>{var l;if(c.path===""||!((l=c.path)!=null&&l.includes("?")))a(c,h);else for(let b of wM(c.path))a(c,h,b)}),t}function wM(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(r.length===0)return a?[c,""]:[c];let h=wM(r.join("/")),l=[];return l.push(...h.map(b=>b===""?c:[c,b].join("/"))),a&&l.push(...h),l.map(b=>e.startsWith("/")&&b===""?"/":b)}function yD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kD(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vD=/^:[\w-]+$/,_D=3,xD=2,bD=1,wD=10,SD=-2,SE=e=>e==="*";function CD(e,t){let n=e.split("/"),r=n.length;return n.some(SE)&&(r+=SD),t&&(r+=xD),n.filter(a=>!SE(a)).reduce((a,c)=>a+(vD.test(c)?_D:c===""?bD:wD),r)}function kD(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function ED(e,t,n){let{routesMeta:r}=e,a={},c="/",h=[];for(let l=0;l<r.length;++l){let b=r[l],w=l===r.length-1,I=c==="/"?t:t.slice(c.length)||"/",k=CE({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},I),P=b.route;if(!k&&w&&n&&!r[r.length-1].route.index&&(k=CE({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},I)),!k)return null;Object.assign(a,k.params),h.push({params:a,pathname:wc([c,k.pathname]),pathnameBase:zD(wc([c,k.pathnameBase])),route:P}),k.pathnameBase!=="/"&&(c=wc([c,k.pathnameBase]))}return h}function CE(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=TD(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],h=c.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((w,I,k)=>{let{paramName:P,isOptional:R}=I;if(P==="*"){let U=l[k]||"";h=c.slice(0,c.length-U.length).replace(/(.)\/+$/,"$1")}const $=l[k];return R&&!$?w[P]=void 0:w[P]=($||"").replace(/%2F/g,"/"),w},{}),pathname:c,pathnameBase:h,pattern:e}}function TD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),_M(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,l,b)=>(r.push({paramName:l,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function ID(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return _M(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function SM(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function PD(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?Vh(e):e;return{pathname:n?n.startsWith("/")?n:MD(n,t):t,search:DD(r),hash:$D(a)}}function MD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Sx(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function LD(e,t){let n=AD(e);return t?n.map((r,a)=>a===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function RD(e,t,n,r){r===void 0&&(r=!1);let a;typeof e=="string"?a=Vh(e):(a=xm({},e),si(!a.pathname||!a.pathname.includes("?"),Sx("?","pathname","search",a)),si(!a.pathname||!a.pathname.includes("#"),Sx("#","pathname","hash",a)),si(!a.search||!a.search.includes("#"),Sx("#","search","hash",a)));let c=e===""||a.pathname==="",h=c?"/":a.pathname,l;if(h==null)l=n;else{let k=t.length-1;if(!r&&h.startsWith("..")){let P=h.split("/");for(;P[0]==="..";)P.shift(),k-=1;a.pathname=P.join("/")}l=k>=0?t[k]:"/"}let b=PD(a,l),w=h&&h!=="/"&&h.endsWith("/"),I=(c||h===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(w||I)&&(b.pathname+="/"),b}const wc=e=>e.join("/").replace(/\/\/+/g,"/"),zD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),DD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,$D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function OD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const CM=["post","put","patch","delete"];new Set(CM);const BD=["get",...CM];new Set(BD);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}const I2=ne.createContext(null),FD=ne.createContext(null),zv=ne.createContext(null),Dv=ne.createContext(null),Wh=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),kM=ne.createContext(null);function $v(){return ne.useContext(Dv)!=null}function P2(){return $v()||si(!1),ne.useContext(Dv).location}function EM(e){ne.useContext(zv).static||ne.useLayoutEffect(e)}function M2(){let{isDataRoute:e}=ne.useContext(Wh);return e?JD():ND()}function ND(){$v()||si(!1);let e=ne.useContext(I2),{basename:t,future:n,navigator:r}=ne.useContext(zv),{matches:a}=ne.useContext(Wh),{pathname:c}=P2(),h=JSON.stringify(LD(a,n.v7_relativeSplatPath)),l=ne.useRef(!1);return EM(()=>{l.current=!0}),ne.useCallback(function(w,I){if(I===void 0&&(I={}),!l.current)return;if(typeof w=="number"){r.go(w);return}let k=RD(w,JSON.parse(h),c,I.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:wc([t,k.pathname])),(I.replace?r.replace:r.push)(k,I.state,I)},[t,r,h,c,e])}function jD(e,t){return UD(e,t)}function UD(e,t,n,r){$v()||si(!1);let{navigator:a}=ne.useContext(zv),{matches:c}=ne.useContext(Wh),h=c[c.length-1],l=h?h.params:{};h&&h.pathname;let b=h?h.pathnameBase:"/";h&&h.route;let w=P2(),I;if(t){var k;let Z=typeof t=="string"?Vh(t):t;b==="/"||(k=Z.pathname)!=null&&k.startsWith(b)||si(!1),I=Z}else I=w;let P=I.pathname||"/",R=P;if(b!=="/"){let Z=b.replace(/^\//,"").split("/");R="/"+P.replace(/^\//,"").split("/").slice(Z.length).join("/")}let $=mD(e,{pathname:R}),U=GD($&&$.map(Z=>Object.assign({},Z,{params:Object.assign({},l,Z.params),pathname:wc([b,a.encodeLocation?a.encodeLocation(Z.pathname).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?b:wc([b,a.encodeLocation?a.encodeLocation(Z.pathnameBase).pathname:Z.pathnameBase])})),c,n,r);return t&&U?ne.createElement(Dv.Provider,{value:{location:bm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:ru.Pop}},U):U}function VD(){let e=YD(),t=OD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},t),n?ne.createElement("pre",{style:a},n):null,null)}const WD=ne.createElement(VD,null);class qD extends ne.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ne.createElement(Wh.Provider,{value:this.props.routeContext},ne.createElement(kM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function HD(e){let{routeContext:t,match:n,children:r}=e,a=ne.useContext(I2);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),ne.createElement(Wh.Provider,{value:t},r)}function GD(e,t,n,r){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=r)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let h=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let I=h.findIndex(k=>k.route.id&&(l==null?void 0:l[k.route.id])!==void 0);I>=0||si(!1),h=h.slice(0,Math.min(h.length,I+1))}let b=!1,w=-1;if(n&&r&&r.v7_partialHydration)for(let I=0;I<h.length;I++){let k=h[I];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(w=I),k.route.id){let{loaderData:P,errors:R}=n,$=k.route.loader&&P[k.route.id]===void 0&&(!R||R[k.route.id]===void 0);if(k.route.lazy||$){b=!0,w>=0?h=h.slice(0,w+1):h=[h[0]];break}}}return h.reduceRight((I,k,P)=>{let R,$=!1,U=null,Z=null;n&&(R=l&&k.route.id?l[k.route.id]:void 0,U=k.route.errorElement||WD,b&&(w<0&&P===0?($=!0,Z=null):w===P&&($=!0,Z=k.route.hydrateFallbackElement||null)));let D=t.concat(h.slice(0,P+1)),O=()=>{let F;return R?F=U:$?F=Z:k.route.Component?F=ne.createElement(k.route.Component,null):k.route.element?F=k.route.element:F=I,ne.createElement(HD,{match:k,routeContext:{outlet:I,matches:D,isDataRoute:n!=null},children:F})};return n&&(k.route.ErrorBoundary||k.route.errorElement||P===0)?ne.createElement(qD,{location:n.location,revalidation:n.revalidation,component:U,error:R,children:O(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):O()},null)}var TM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(TM||{}),W0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(W0||{});function ZD(e){let t=ne.useContext(I2);return t||si(!1),t}function KD(e){let t=ne.useContext(FD);return t||si(!1),t}function XD(e){let t=ne.useContext(Wh);return t||si(!1),t}function IM(e){let t=XD(),n=t.matches[t.matches.length-1];return n.route.id||si(!1),n.route.id}function YD(){var e;let t=ne.useContext(kM),n=KD(W0.UseRouteError),r=IM(W0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function JD(){let{router:e}=ZD(TM.UseNavigateStable),t=IM(W0.UseNavigateStable),n=ne.useRef(!1);return EM(()=>{n.current=!0}),ne.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,bm({fromRouteId:t},c)))},[e,t])}const kE={};function QD(e,t){kE[t]||(kE[t]=!0,console.warn(t))}const EE=(e,t,n)=>QD(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function e$(e,t){e!=null&&e.v7_startTransition||EE("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&EE("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function sc(e){si(!1)}function t$(e){let{basename:t="/",children:n=null,location:r,navigationType:a=ru.Pop,navigator:c,static:h=!1,future:l}=e;$v()&&si(!1);let b=t.replace(/^\/*/,"/"),w=ne.useMemo(()=>({basename:b,navigator:c,static:h,future:bm({v7_relativeSplatPath:!1},l)}),[b,l,c,h]);typeof r=="string"&&(r=Vh(r));let{pathname:I="/",search:k="",hash:P="",state:R=null,key:$="default"}=r,U=ne.useMemo(()=>{let Z=SM(I,b);return Z==null?null:{location:{pathname:Z,search:k,hash:P,state:R,key:$},navigationType:a}},[b,I,k,P,R,$,a]);return U==null?null:ne.createElement(zv.Provider,{value:w},ne.createElement(Dv.Provider,{children:n,value:U}))}function n$(e){let{children:t,location:n}=e;return jD(Ub(t),n)}new Promise(()=>{});function Ub(e,t){t===void 0&&(t=[]);let n=[];return ne.Children.forEach(e,(r,a)=>{if(!ne.isValidElement(r))return;let c=[...t,a];if(r.type===ne.Fragment){n.push.apply(n,Ub(r.props.children,c));return}r.type!==sc&&si(!1),!r.props.index||!r.props.children||si(!1);let h={id:r.props.id||c.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=Ub(r.props.children,c)),n.push(h)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const r$="6";try{window.__reactRouterVersion=r$}catch{}const i$="startTransition",TE=_0[i$];function o$(e){let{basename:t,children:n,future:r,window:a}=e,c=ne.useRef();c.current==null&&(c.current=hD({window:a,v5Compat:!0}));let h=c.current,[l,b]=ne.useState({action:h.action,location:h.location}),{v7_startTransition:w}=r||{},I=ne.useCallback(k=>{w&&TE?TE(()=>b(k)):b(k)},[b,w]);return ne.useLayoutEffect(()=>h.listen(I),[h,I]),ne.useEffect(()=>e$(r),[r]),ne.createElement(t$,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:h,future:r})}var IE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(IE||(IE={}));var PE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(PE||(PE={}));var PM={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(n,r){e.exports=r()})(Lw,function(){var n={},r={};function a(h,l,b){if(r[h]=b,h==="index"){var w="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",I={};return r.shared(I),r.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),n}}a("shared",["exports"],function(h){function l(s,o,u,p){return new(u||(u=Promise))(function(g,_){function x(A){try{E(p.next(A))}catch(L){_(L)}}function S(A){try{E(p.throw(A))}catch(L){_(L)}}function E(A){var L;A.done?g(A.value):(L=A.value,L instanceof u?L:new u(function(B){B(L)})).then(x,S)}E((p=p.apply(s,o||[])).next())})}function b(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var w=I;function I(s,o){this.x=s,this.y=o}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,o){return this.clone()._rotateAround(s,o)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var o=s.x-this.x,u=s.y-this.y;return o*o+u*u},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult:function(s){var o=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=o,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var o=Math.cos(s),u=Math.sin(s),p=u*this.x+o*this.y;return this.x=o*this.x-u*this.y,this.y=p,this},_rotateAround:function(s,o){var u=Math.cos(s),p=Math.sin(s),g=o.y+p*(this.x-o.x)+u*(this.y-o.y);return this.x=o.x+u*(this.x-o.x)-p*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(s){return s instanceof I?s:Array.isArray(s)?new I(s[0],s[1]):s};var k=b(w),P=R;function R(s,o,u,p){this.cx=3*s,this.bx=3*(u-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=u,this.p2y=p}R.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var u=s,p=0;p<8;p++){var g=this.sampleCurveX(u)-s;if(Math.abs(g)<o)return u;var _=this.sampleCurveDerivativeX(u);if(Math.abs(_)<1e-6)break;u-=g/_}var x=0,S=1;for(u=s,p=0;p<20&&(g=this.sampleCurveX(u),!(Math.abs(g-s)<o));p++)s>g?x=u:S=u,u=.5*(S-x)+x;return u},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var $=b(P);let U,Z;function D(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function O(){if(Z==null&&(Z=!1,D())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let p=0;p<5*5;p++){const g=4*p;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(p%5,Math.floor(p/5),1,1)}const u=o.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&u[p]!==p){Z=!0;break}}}return Z||!1}function F(s,o,u,p){const g=new $(s,o,u,p);return _=>g.solve(_)}const G=F(.25,.1,.25,1);function te(s,o,u){return Math.min(u,Math.max(o,s))}function oe(s,o,u){const p=u-o,g=((s-o)%p+p)%p+o;return g===o?u:g}function ae(s,...o){for(const u of o)for(const p in u)s[p]=u[p];return s}let le=1;function Ie(s,o,u){const p={};for(const g in s)p[g]=o.call(this,s[g],g,s);return p}function K(s,o,u){const p={};for(const g in s)o.call(this,s[g],g,s)&&(p[g]=s[g]);return p}function Ce(s){return Array.isArray(s)?s.map(Ce):typeof s=="object"&&s?Ie(s,Ce):s}const Fe={};function De(s){Fe[s]||(typeof console<"u"&&console.warn(s),Fe[s]=!0)}function Ae(s,o,u){return(u.y-s.y)*(o.x-s.x)>(o.y-s.y)*(u.x-s.x)}function Re(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Ve=null;function et(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const $e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(s,o,u,p,g){return l(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(s,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),E=new Uint8ClampedArray(p*g*4);if(yield _.copyTo(E,function(A,L,B,V,H){const Y=4*Math.max(-L,0),J=(Math.max(0,B)-B)*V*4+Y,de=4*V,me=Math.max(0,L),Pe=Math.max(0,B);return{rect:{x:me,y:Pe,width:Math.min(A.width,L+V)-me,height:Math.min(A.height,B+H)-Pe},layout:[{offset:J,stride:de}]}}(s,o,u,p,g)),S)for(let A=0;A<E.length;A+=4){const L=E[A];E[A]=E[A+2],E[A+2]=L}return E}finally{_.close()}})}let ct,St;const At="AbortError";function jt(){return new Error(At)}const zt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Xt(s){return zt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const yn="global-dispatcher";class on extends Error{constructor(o,u,p,g){super(`AJAXError: ${u} (${o}): ${p}`),this.status=o,this.statusText=u,this.url=p,this.body=g}}const Un=()=>Re(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Mn=function(s,o){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const p=Xt(s.url);if(p)return p(s,o);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:yn},o)}if(!(/^file:/.test(u=s.url)||/^file:/.test(Un())&&!/^\w+:/.test(u))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,g){return l(this,void 0,void 0,function*(){const _=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Un(),signal:g.signal});p.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const A=yield x.blob();throw new on(x.status,x.statusText,p.url,A)}let S;S=p.type==="arrayBuffer"||p.type==="image"?x.arrayBuffer():p.type==="json"?x.json():x.text();const E=yield S;if(g.signal.aborted)throw jt();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,o);if(Re(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:yn},o)}var u;return function(p,g){return new Promise((_,x)=>{var S;const E=new XMLHttpRequest;E.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(E.responseType="arraybuffer");for(const A in p.headers)E.setRequestHeader(A,p.headers[A]);p.type==="json"&&(E.responseType="text",!((S=p.headers)===null||S===void 0)&&S.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=p.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let A=E.response;if(p.type==="json")try{A=JSON.parse(E.response)}catch(L){return void x(L)}_({data:A,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const A=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new on(E.status,E.statusText,p.url,A))}},g.signal.addEventListener("abort",()=>{E.abort(),x(jt())}),E.send(p.body)})}(s,o)};function Vt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const o=new URL(s),u=window.location;return o.protocol===u.protocol&&o.host===u.host}function an(s,o,u){u[s]&&u[s].indexOf(o)!==-1||(u[s]=u[s]||[],u[s].push(o))}function Wt(s,o,u){if(u&&u[s]){const p=u[s].indexOf(o);p!==-1&&u[s].splice(p,1)}}class Cn{constructor(o,u={}){ae(this,u),this.type=o}}class _t extends Cn{constructor(o,u={}){super("error",ae({error:o},u))}}class Dt{on(o,u){return this._listeners=this._listeners||{},an(o,u,this._listeners),this}off(o,u){return Wt(o,u,this._listeners),Wt(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},an(o,u,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,u){typeof o=="string"&&(o=new Cn(o,u||{}));const p=o.type;if(this.listens(p)){o.target=this;const g=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const S of g)S.call(this,o);const _=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const S of _)Wt(p,S,this._oneTimeListeners),S.call(this,o);const x=this._eventedParent;x&&(ae(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof _t&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function bn(s,o){const u={};for(const p in s)p!=="ref"&&(u[p]=s[p]);return ur.forEach(p=>{p in o&&(u[p]=o[p])}),u}function ft(s,o){if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(let u=0;u<s.length;u++)if(!ft(s[u],o[u]))return!1;return!0}if(typeof s=="object"&&s!==null&&o!==null){if(typeof o!="object"||Object.keys(s).length!==Object.keys(o).length)return!1;for(const u in s)if(!ft(s[u],o[u]))return!1;return!0}return s===o}function qt(s,o){s.push(o)}function fn(s,o,u){qt(u,{command:"addSource",args:[s,o[s]]})}function ir(s,o,u){qt(o,{command:"removeSource",args:[s]}),u[s]=!0}function Ct(s,o,u,p){ir(s,u,p),fn(s,o,u)}function zn(s,o,u){let p;for(p in s[u])if(Object.prototype.hasOwnProperty.call(s[u],p)&&p!=="data"&&!ft(s[u][p],o[u][p]))return!1;for(p in o[u])if(Object.prototype.hasOwnProperty.call(o[u],p)&&p!=="data"&&!ft(s[u][p],o[u][p]))return!1;return!0}function yr(s,o,u,p,g,_){s=s||{},o=o||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(ft(s[x],o[x])||u.push({command:_,args:[p,x,o[x],g]}));for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(ft(s[x],o[x])||u.push({command:_,args:[p,x,o[x],g]}))}function ei(s){return s.id}function vr(s,o){return s[o.id]=o,s}class Ge{constructor(o,u,p,g){this.message=(o?`${o}: `:"")+p,g&&(this.identifier=g),u!=null&&u.__line__&&(this.line=u.__line__)}}function cr(s,...o){for(const u of o)for(const p in u)s[p]=u[p];return s}class Kn extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class dn{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[p,g]of u)this.bindings[p]=g}concat(o){return new dn(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Rr={kind:"null"},Ke={kind:"number"},Xe={kind:"string"},at={kind:"boolean"},mn={kind:"color"},zr={kind:"object"},$t={kind:"value"},vo={kind:"collator"},$o={kind:"formatted"},ca={kind:"padding"},_o={kind:"resolvedImage"},fe={kind:"variableAnchorOffsetCollection"};function q(s,o){return{kind:"array",itemType:s,N:o}}function W(s){if(s.kind==="array"){const o=W(s.itemType);return typeof s.N=="number"?`array<${o}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${o}>`}return s.kind}const Q=[Rr,Ke,Xe,at,mn,$o,zr,q($t),ca,_o,fe];function ce(s,o){if(o.kind==="error")return null;if(s.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!ce(s.itemType,o.itemType))&&(typeof s.N!="number"||s.N===o.N))return null}else{if(s.kind===o.kind)return null;if(s.kind==="value"){for(const u of Q)if(!ce(u,o))return null}}return`Expected ${W(s)} but found ${W(o)} instead.`}function _e(s,o){return o.some(u=>u.kind===s.kind)}function we(s,o){return o.some(u=>u==="null"?s===null:u==="array"?Array.isArray(s):u==="object"?s&&!Array.isArray(s)&&typeof s=="object":u===typeof s)}function re(s,o){return s.kind==="array"&&o.kind==="array"?s.itemType.kind===o.itemType.kind&&typeof s.N=="number":s.kind===o.kind}const pe=.96422,Le=.82521,Oe=4/29,ke=6/29,We=3*ke*ke,gt=ke*ke*ke,It=Math.PI/180,en=180/Math.PI;function Bt(s){return(s%=360)<0&&(s+=360),s}function vn([s,o,u,p]){let g,_;const x=Dr((.2225045*(s=tn(s))+.7168786*(o=tn(o))+.0606169*(u=tn(u)))/1);s===o&&o===u?g=_=x:(g=Dr((.4360747*s+.3850649*o+.1430804*u)/pe),_=Dr((.0139322*s+.0971045*o+.7141733*u)/Le));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),p]}function tn(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Dr(s){return s>gt?Math.pow(s,1/3):s/We+Oe}function dr([s,o,u,p]){let g=(s+16)/116,_=isNaN(o)?g:g+o/500,x=isNaN(u)?g:g-u/200;return g=1*Ln(g),_=pe*Ln(_),x=Le*Ln(x),[Gt(3.1338561*_-1.6168667*g-.4906146*x),Gt(-.9787684*_+1.9161415*g+.033454*x),Gt(.0719453*_-.2289914*g+1.4052427*x),p]}function Gt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Ln(s){return s>ke?s*s*s:We*(s-Oe)}function or(s){return parseInt(s.padEnd(2,s),16)/255}function Zr(s,o){return ti(o?s/100:s,0,1)}function ti(s,o,u){return Math.min(Math.max(o,s),u)}function Si(s){return!s.some(Number.isNaN)}const fl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Rn{constructor(o,u,p,g=1,_=!0){this.r=o,this.g=u,this.b=p,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,u,p,g]))}static parse(o){if(o instanceof Rn)return o;if(typeof o!="string")return;const u=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=fl[p];if(g){const[x,S,E]=g;return[x/255,S/255,E/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const x=p.length<6?1:2;let S=1;return[or(p.slice(S,S+=x)),or(p.slice(S,S+=x)),or(p.slice(S,S+=x)),or(p.slice(S,S+x)||"ff")]}if(p.startsWith("rgb")){const x=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,E,A,L,B,V,H,Y,J,de,me,Pe]=x,xe=[L||" ",H||" ",de].join("");if(xe==="  "||xe==="  /"||xe===",,"||xe===",,,"){const Te=[A,V,J].join(""),ze=Te==="%%%"?100:Te===""?255:0;if(ze){const He=[ti(+E/ze,0,1),ti(+B/ze,0,1),ti(+Y/ze,0,1),me?Zr(+me,Pe):1];if(Si(He))return He}}return}}const _=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,E,A,L,B,V,H,Y]=_,J=[E||" ",L||" ",V].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const de=[+S,ti(+A,0,100),ti(+B,0,100),H?Zr(+H,Y):1];if(Si(de))return function([me,Pe,xe,Te]){function ze(He){const dt=(He+me/30)%12,Lt=Pe*Math.min(xe,1-xe);return xe-Lt*Math.max(-1,Math.min(dt-3,9-dt,1))}return me=Bt(me),Pe/=100,xe/=100,[ze(0),ze(8),ze(4),Te]}(de)}}}(o);return u?new Rn(...u,!1):void 0}get rgb(){const{r:o,g:u,b:p,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[o/_,u/_,p/_,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[u,p,g,_]=vn(o),x=Math.sqrt(p*p+g*g);return[Math.round(1e4*x)?Bt(Math.atan2(g,p)*en):NaN,x,u,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",vn(this.rgb))}overwriteGetter(o,u){return Object.defineProperty(this,o,{value:u}),u}toString(){const[o,u,p,g]=this.rgb;return`rgba(${[o,u,p].map(_=>Math.round(255*_)).join(",")},${g})`}}Rn.black=new Rn(0,0,0,1),Rn.white=new Rn(1,1,1,1),Rn.transparent=new Rn(0,0,0,0),Rn.red=new Rn(1,0,0,1);class Qh{constructor(o,u,p){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ep{constructor(o,u,p,g,_){this.text=o,this.image=u,this.scale=p,this.fontStack=g,this.textColor=_}}class Ji{constructor(o){this.sections=o}static fromString(o){return new Ji([new ep(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Ji?o:Ji.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class Qi{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Qi)return o;if(typeof o=="number")return new Qi([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const u of o)if(typeof u!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Qi(o)}}toString(){return JSON.stringify(this.values)}}const $1=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xo{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof xo)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let u=0;u<o.length;u+=2){const p=o[u],g=o[u+1];if(typeof p!="string"||!$1.has(p)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new xo(o)}}toString(){return JSON.stringify(this.values)}}class eo{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new eo({name:o,available:!1}):null}}function ml(s,o,u,p){return typeof s=="number"&&s>=0&&s<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,o,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,o,u,p]:[s,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ps(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Rn||s instanceof Qh||s instanceof Ji||s instanceof Qi||s instanceof xo||s instanceof eo)return!0;if(Array.isArray(s)){for(const o of s)if(!Ps(o))return!1;return!0}if(typeof s=="object"){for(const o in s)if(!Ps(s[o]))return!1;return!0}return!1}function $r(s){if(s===null)return Rr;if(typeof s=="string")return Xe;if(typeof s=="boolean")return at;if(typeof s=="number")return Ke;if(s instanceof Rn)return mn;if(s instanceof Qh)return vo;if(s instanceof Ji)return $o;if(s instanceof Qi)return ca;if(s instanceof xo)return fe;if(s instanceof eo)return _o;if(Array.isArray(s)){const o=s.length;let u;for(const p of s){const g=$r(p);if(u){if(u===g)continue;u=$t;break}u=g}return q(u||$t,o)}return zr}function Pu(s){const o=typeof s;return s===null?"":o==="string"||o==="number"||o==="boolean"?String(s):s instanceof Rn||s instanceof Ji||s instanceof Qi||s instanceof xo||s instanceof eo?s.toString():JSON.stringify(s)}class Oo{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Ps(o[1]))return u.error("invalid value");const p=o[1];let g=$r(p);const _=u.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Oo(g,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Tr{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const jc={string:Xe,number:Ke,boolean:at,object:zr};class Bo{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let p,g=1;const _=o[0];if(_==="array"){let S,E;if(o.length>2){const A=o[1];if(typeof A!="string"||!(A in jc)||A==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);S=jc[A],g++}else S=$t;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);E=o[2],g++}p=q(S,E)}else{if(!jc[_])throw new Error(`Types doesn't contain name = ${_}`);p=jc[_]}const x=[];for(;g<o.length;g++){const S=u.parse(o[g],g,$t);if(!S)return null;x.push(S)}return new Bo(p,x)}evaluate(o){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(o);if(!ce(this.type,$r(p)))return p;if(u===this.args.length-1)throw new Tr(`Expected value to be of type ${W(this.type)}, but found ${W($r(p))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const tp={"to-boolean":at,"to-color":mn,"to-number":Ke,"to-string":Xe};class Fo{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[0];if(!tp[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&o.length!==2)return u.error("Expected one argument.");const g=tp[p],_=[];for(let x=1;x<o.length;x++){const S=u.parse(o[x],x,$t);if(!S)return null;_.push(S)}return new Fo(g,_)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let u,p;for(const g of this.args){if(u=g.evaluate(o),p=null,u instanceof Rn)return u;if(typeof u=="string"){const _=o.parseColor(u);if(_)return _}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:ml(u[0],u[1],u[2],u[3]),!p))return new Rn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Tr(p||`Could not parse color from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"padding":{let u;for(const p of this.args){u=p.evaluate(o);const g=Qi.parse(u);if(g)return g}throw new Tr(`Could not parse padding from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"variableAnchorOffsetCollection":{let u;for(const p of this.args){u=p.evaluate(o);const g=xo.parse(u);if(g)return g}throw new Tr(`Could not parse variableAnchorOffsetCollection from value '${typeof u=="string"?u:JSON.stringify(u)}'`)}case"number":{let u=null;for(const p of this.args){if(u=p.evaluate(o),u===null)return 0;const g=Number(u);if(!isNaN(g))return g}throw new Tr(`Could not convert ${JSON.stringify(u)} to number.`)}case"formatted":return Ji.fromString(Pu(this.args[0].evaluate(o)));case"resolvedImage":return eo.fromString(Pu(this.args[0].evaluate(o)));default:return Pu(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const O1=["Unknown","Point","LineString","Polygon"];class Uc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?O1[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=Rn.parse(o)),u}}class Ms{constructor(o,u,p=[],g,_=new dn,x=[]){this.registry=o,this.path=p,this.key=p.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=u}parse(o,u,p,g,_={}){return u?this.concat(u,p,g)._parse(o,_):this._parse(o,_)}_parse(o,u){function p(g,_,x){return x==="assert"?new Bo(_,[g]):x==="coerce"?new Fo(_,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(o,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,E=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(S.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(S,E))return null}else x=p(x,S,u.typeAnnotation||"coerce");else x=p(x,S,u.typeAnnotation||"coerce");else x=p(x,S,u.typeAnnotation||"coerce");else x=p(x,S,u.typeAnnotation||"assert")}if(!(x instanceof Oo)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new Uc;try{x=new Oo(x.type,x.evaluate(S))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,p){const g=typeof o=="number"?this.path.concat(o):this.path,_=p?this.scope.concat(p):this.scope;return new Ms(this.registry,this._isConstant,g,u||null,_,this.errors)}error(o,...u){const p=`${this.key}${u.map(g=>`[${g}]`).join("")}`;this.errors.push(new Kn(p,o))}checkSubtype(o,u){const p=ce(o,u);return p&&this.error(p),p}}class es{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let _=1;_<o.length-1;_+=2){const x=o[_];if(typeof x!="string")return u.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return u.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=u.parse(o[_+1],_+1);if(!S)return null;p.push([x,S])}const g=u.parse(o[o.length-1],o.length-1,u.expectedType,p);return g?new es(p,g):null}outputDefined(){return this.result.outputDefined()}}class kn{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=o[1];return u.scope.has(p)?new kn(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class np{constructor(o,u,p){this.type=o,this.index=u,this.input=p}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,Ke),g=u.parse(o[2],2,q(u.expectedType||$t));return p&&g?new np(g.type.itemType,p,g):null}evaluate(o){const u=this.index.evaluate(o),p=this.input.evaluate(o);if(u<0)throw new Tr(`Array index out of bounds: ${u} < 0.`);if(u>=p.length)throw new Tr(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u!==Math.floor(u))throw new Tr(`Array index must be an integer, but found ${u} instead.`);return p[u]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class rp{constructor(o,u){this.type=at,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,$t),g=u.parse(o[2],2,$t);return p&&g?_e(p.type,[at,Xe,Ke,Rr,$t])?new rp(p,g):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!we(u,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${W($r(u))} instead.`);if(!we(p,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${W($r(p))} instead.`);return p.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class gl{constructor(o,u,p){this.type=Ke,this.needle=o,this.haystack=u,this.fromIndex=p}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,$t),g=u.parse(o[2],2,$t);if(!p||!g)return null;if(!_e(p.type,[at,Xe,Ke,Rr,$t]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`);if(o.length===4){const _=u.parse(o[3],3,Ke);return _?new gl(p,g,_):null}return new gl(p,g)}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!we(u,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${W($r(u))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(o)),we(p,["string"])){const _=p.indexOf(u,g);return _===-1?-1:[...p.slice(0,_)].length}if(we(p,["array"]))return p.indexOf(u,g);throw new Tr(`Expected second argument to be of type array or string, but found ${W($r(p))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class ip{constructor(o,u,p,g,_,x){this.inputType=o,this.type=u,this.input=p,this.cases=g,this.outputs=_,this.otherwise=x}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let p,g;u.expectedType&&u.expectedType.kind!=="value"&&(g=u.expectedType);const _={},x=[];for(let A=2;A<o.length-1;A+=2){let L=o[A];const B=o[A+1];Array.isArray(L)||(L=[L]);const V=u.concat(A);if(L.length===0)return V.error("Expected at least one branch label.");for(const Y of L){if(typeof Y!="number"&&typeof Y!="string")return V.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return V.error("Numeric branch labels must be integer values.");if(p){if(V.checkSubtype(p,$r(Y)))return null}else p=$r(Y);if(_[String(Y)]!==void 0)return V.error("Branch labels must be unique.");_[String(Y)]=x.length}const H=u.parse(B,A,g);if(!H)return null;g=g||H.type,x.push(H)}const S=u.parse(o[1],1,$t);if(!S)return null;const E=u.parse(o[o.length-1],o.length-1,g);return E?S.type.kind!=="value"&&u.concat(1).checkSubtype(p,S.type)?null:new ip(p,g,S,_,x,E):null}evaluate(o){const u=this.input.evaluate(o);return($r(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Vc{constructor(o,u,p){this.type=o,this.branches=u,this.otherwise=p}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const g=[];for(let x=1;x<o.length-1;x+=2){const S=u.parse(o[x],x,at);if(!S)return null;const E=u.parse(o[x+1],x+1,p);if(!E)return null;g.push([S,E]),p=p||E.type}const _=u.parse(o[o.length-1],o.length-1,p);if(!_)return null;if(!p)throw new Error("Can't infer output type");return new Vc(p,g,_)}evaluate(o){for(const[u,p]of this.branches)if(u.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,p]of this.branches)o(u),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}}class Mu{constructor(o,u,p,g){this.type=o,this.input=u,this.beginIndex=p,this.endIndex=g}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,$t),g=u.parse(o[2],2,Ke);if(!p||!g)return null;if(!_e(p.type,[q($t),Xe,$t]))return u.error(`Expected first argument to be of type array or string, but found ${W(p.type)} instead`);if(o.length===4){const _=u.parse(o[3],3,Ke);return _?new Mu(p.type,p,g,_):null}return new Mu(p.type,p,g)}evaluate(o){const u=this.input.evaluate(o),p=this.beginIndex.evaluate(o);let g;if(this.endIndex&&(g=this.endIndex.evaluate(o)),we(u,["string"]))return[...u].slice(p,g).join("");if(we(u,["array"]))return u.slice(p,g);throw new Tr(`Expected first argument to be of type array or string, but found ${W($r(u))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Wc(s,o){const u=s.length-1;let p,g,_=0,x=u,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),p=s[S],g=s[S+1],p<=o){if(S===u||o<g)return S;_=S+1}else{if(!(p>o))throw new Tr("Input is not a number.");x=S-1}return 0}class yl{constructor(o,u,p){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[g,_]of p)this.labels.push(g),this.outputs.push(_)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(o[1],1,Ke);if(!p)return null;const g=[];let _=null;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);for(let x=1;x<o.length;x+=2){const S=x===1?-1/0:o[x],E=o[x+1],A=x,L=x+1;if(typeof S!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=S)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const B=u.parse(E,L,_);if(!B)return null;_=_||B.type,g.push([S,B])}return new yl(_,p,g)}evaluate(o){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return p[0].evaluate(o);const _=u.length;return g>=u[_-1]?p[_-1].evaluate(o):p[Wc(u,g)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function og(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var B1=ag;function ag(s,o,u,p){this.cx=3*s,this.bx=3*(u-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=u,this.p2y=p}ag.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var u=s,p=0;p<8;p++){var g=this.sampleCurveX(u)-s;if(Math.abs(g)<o)return u;var _=this.sampleCurveDerivativeX(u);if(Math.abs(_)<1e-6)break;u-=g/_}var x=0,S=1;for(u=s,p=0;p<20&&(g=this.sampleCurveX(u),!(Math.abs(g-s)<o));p++)s>g?x=u:S=u,u=.5*(S-x)+x;return u},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var F1=og(B1);function As(s,o,u){return s+u*(o-s)}function Au(s,o,u){return s.map((p,g)=>As(p,o[g],u))}const Di={number:As,color:function(s,o,u,p="rgb"){switch(p){case"rgb":{const[g,_,x,S]=Au(s.rgb,o.rgb,u);return new Rn(g,_,x,S,!1)}case"hcl":{const[g,_,x,S]=s.hcl,[E,A,L,B]=o.hcl;let V,H;if(isNaN(g)||isNaN(E))isNaN(g)?isNaN(E)?V=NaN:(V=E,x!==1&&x!==0||(H=A)):(V=g,L!==1&&L!==0||(H=_));else{let Pe=E-g;E>g&&Pe>180?Pe-=360:E<g&&g-E>180&&(Pe+=360),V=g+u*Pe}const[Y,J,de,me]=function([Pe,xe,Te,ze]){return Pe=isNaN(Pe)?0:Pe*It,dr([Te,Math.cos(Pe)*xe,Math.sin(Pe)*xe,ze])}([V,H??As(_,A,u),As(x,L,u),As(S,B,u)]);return new Rn(Y,J,de,me,!1)}case"lab":{const[g,_,x,S]=dr(Au(s.lab,o.lab,u));return new Rn(g,_,x,S,!1)}}},array:Au,padding:function(s,o,u){return new Qi(Au(s.values,o.values,u))},variableAnchorOffsetCollection:function(s,o,u){const p=s.values,g=o.values;if(p.length!==g.length)throw new Tr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${o.toString()}`);const _=[];for(let x=0;x<p.length;x+=2){if(p[x]!==g[x])throw new Tr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${p[x]}, to[${x}]: ${g[x]}`);_.push(p[x]);const[S,E]=p[x+1],[A,L]=g[x+1];_.push([As(S,A,u),As(E,L,u)])}return new xo(_)}};class $i{constructor(o,u,p,g,_){this.type=o,this.operator=u,this.interpolation=p,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(o,u,p,g){let _=0;if(o.name==="exponential")_=qc(u,o.base,p,g);else if(o.name==="linear")_=qc(u,1,p,g);else if(o.name==="cubic-bezier"){const x=o.controlPoints;_=new F1(x[0],x[1],x[2],x[3]).solve(qc(u,1,p,g))}return _}static parse(o,u){let[p,g,_,...x]=o;if(!Array.isArray(g)||g.length===0)return u.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(_=u.parse(_,2,Ke),!_)return null;const S=[];let E=null;p==="interpolate-hcl"||p==="interpolate-lab"?E=mn:u.expectedType&&u.expectedType.kind!=="value"&&(E=u.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],B=x[A+1],V=A+3,H=A+4;if(typeof L!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(S.length&&S[S.length-1][0]>=L)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const Y=u.parse(B,H,E);if(!Y)return null;E=E||Y.type,S.push([L,Y])}return re(E,Ke)||re(E,mn)||re(E,ca)||re(E,fe)||re(E,q(Ke))?new $i(E,p,g,_,S):u.error(`Type ${W(E)} is not interpolatable.`)}evaluate(o){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);const g=this.input.evaluate(o);if(g<=u[0])return p[0].evaluate(o);const _=u.length;if(g>=u[_-1])return p[_-1].evaluate(o);const x=Wc(u,g),S=$i.interpolationFactor(this.interpolation,g,u[x],u[x+1]),E=p[x].evaluate(o),A=p[x+1].evaluate(o);switch(this.operator){case"interpolate":return Di[this.type.kind](E,A,S);case"interpolate-hcl":return Di.color(E,A,S,"hcl");case"interpolate-lab":return Di.color(E,A,S,"lab")}}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function qc(s,o,u,p){const g=p-u,_=s-u;return g===0?0:o===1?_/g:(Math.pow(o,_)-1)/(Math.pow(o,g)-1)}class Hc{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let p=null;const g=u.expectedType;g&&g.kind!=="value"&&(p=g);const _=[];for(const S of o.slice(1)){const E=u.parse(S,1+_.length,p,void 0,{typeAnnotation:"omit"});if(!E)return null;p=p||E.type,_.push(E)}if(!p)throw new Error("No output type");const x=g&&_.some(S=>ce(g,S.type));return new Hc(x?$t:p,_)}evaluate(o){let u,p=null,g=0;for(const _ of this.args)if(g++,p=_.evaluate(o),p&&p instanceof eo&&!p.available&&(u||(u=p.name),p=null,g===this.args.length&&(p=u)),p!==null)break;return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function Gc(s,o){return s==="=="||s==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function sg(s,o,u,p){return p.compare(o,u)===0}function vl(s,o,u){const p=s!=="=="&&s!=="!=";return class MM{constructor(_,x,S){this.type=at,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let E=x.parse(_[1],1,$t);if(!E)return null;if(!Gc(S,E.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${W(E.type)}'.`);let A=x.parse(_[2],2,$t);if(!A)return null;if(!Gc(S,A.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${W(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${W(E.type)}' and '${W(A.type)}'.`);p&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new Bo(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new Bo(E.type,[A])));let L=null;if(_.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(_[3],3,vo),!L)return null}return new MM(E,A,L)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(p&&this.hasUntypedArgument){const E=$r(x),A=$r(S);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new Tr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const E=$r(x),A=$r(S);if(E.kind!=="string"||A.kind!=="string")return o(_,x,S)}return this.collator?u(_,x,S,this.collator.evaluate(_)):o(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const N1=vl("==",function(s,o,u){return o===u},sg),lg=vl("!=",function(s,o,u){return o!==u},function(s,o,u,p){return!sg(0,o,u,p)}),ug=vl("<",function(s,o,u){return o<u},function(s,o,u,p){return p.compare(o,u)<0}),j1=vl(">",function(s,o,u){return o>u},function(s,o,u,p){return p.compare(o,u)>0}),U1=vl("<=",function(s,o,u){return o<=u},function(s,o,u,p){return p.compare(o,u)<=0}),cg=vl(">=",function(s,o,u){return o>=u},function(s,o,u,p){return p.compare(o,u)>=0});class Lu{constructor(o,u,p){this.type=vo,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const g=u.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,at);if(!g)return null;const _=u.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,at);if(!_)return null;let x=null;return p.locale&&(x=u.parse(p.locale,1,Xe),!x)?null:new Lu(g,_,x)}evaluate(o){return new Qh(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class op{constructor(o,u,p,g,_){this.type=Xe,this.number=o,this.locale=u,this.currency=p,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const p=u.parse(o[1],1,Ke);if(!p)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return u.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=u.parse(g.locale,1,Xe),!_))return null;let x=null;if(g.currency&&(x=u.parse(g.currency,1,Xe),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=u.parse(g["min-fraction-digits"],1,Ke),!S))return null;let E=null;return g["max-fraction-digits"]&&(E=u.parse(g["max-fraction-digits"],1,Ke),!E)?null:new op(p,_,x,S,E)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Zc{constructor(o){this.type=$o,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=o.length-1;++x){const S=o[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let E=null;if(S["font-scale"]&&(E=u.parse(S["font-scale"],1,Ke),!E))return null;let A=null;if(S["text-font"]&&(A=u.parse(S["text-font"],1,q(Xe)),!A))return null;let L=null;if(S["text-color"]&&(L=u.parse(S["text-color"],1,mn),!L))return null;const B=g[g.length-1];B.scale=E,B.font=A,B.textColor=L}else{const E=u.parse(o[x],1,$t);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null})}}return new Zc(g)}evaluate(o){return new Ji(this.sections.map(u=>{const p=u.content.evaluate(o);return $r(p)===_o?new ep("",p,null,null,null):new ep(Pu(p),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}}class ap{constructor(o){this.type=_o,this.input=o}static parse(o,u){if(o.length!==2)return u.error("Expected two arguments.");const p=u.parse(o[1],1,Xe);return p?new ap(p):u.error("No image name provided.")}evaluate(o){const u=this.input.evaluate(o),p=eo.fromString(u);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(u)>-1),p}eachChild(o){o(this.input)}outputDefined(){return!1}}class sp{constructor(o){this.type=Ke,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=u.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${W(p.type)} instead.`):new sp(p):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string")return[...u].length;if(Array.isArray(u))return u.length;throw new Tr(`Expected value to be of type string or array, but found ${W($r(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const da=8192;function V1(s,o){const u=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(u*g*da),Math.round(p*g*da)]}function lp(s,o){const u=Math.pow(2,o.z);return[(g=(s[0]/da+o.x)/u,360*g-180),(p=(s[1]/da+o.y)/u,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,g}function Ls(s,o){s[0]=Math.min(s[0],o[0]),s[1]=Math.min(s[1],o[1]),s[2]=Math.max(s[2],o[0]),s[3]=Math.max(s[3],o[1])}function ts(s,o){return!(s[0]<=o[0]||s[2]>=o[2]||s[1]<=o[1]||s[3]>=o[3])}function In(s,o,u){const p=s[0]-o[0],g=s[1]-o[1],_=s[0]-u[0],x=s[1]-u[1];return p*x-_*g==0&&p*_<=0&&g*x<=0}function Kc(s,o,u,p){return(g=[p[0]-u[0],p[1]-u[1]])[0]*(_=[o[0]-s[0],o[1]-s[1]])[1]-g[1]*_[0]!=0&&!(!hg(s,o,u,p)||!hg(u,p,s,o));var g,_}function W1(s,o,u){for(const p of u)for(let g=0;g<p.length-1;++g)if(Kc(s,o,p[g],p[g+1]))return!0;return!1}function _l(s,o,u=!1){let p=!1;for(const S of o)for(let E=0;E<S.length-1;E++){if(In(s,S[E],S[E+1]))return u;(_=S[E])[1]>(g=s)[1]!=(x=S[E+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(p=!p)}var g,_,x;return p}function q1(s,o){for(const u of o)if(_l(s,u))return!0;return!1}function dg(s,o){for(const u of s)if(!_l(u,o))return!1;for(let u=0;u<s.length-1;++u)if(W1(s[u],s[u+1],o))return!1;return!0}function H1(s,o){for(const u of o)if(dg(s,u))return!0;return!1}function hg(s,o,u,p){const g=p[0]-u[0],_=p[1]-u[1],x=(s[0]-u[0])*_-g*(s[1]-u[1]),S=(o[0]-u[0])*_-g*(o[1]-u[1]);return x>0&&S<0||x<0&&S>0}function up(s,o,u){const p=[];for(let g=0;g<s.length;g++){const _=[];for(let x=0;x<s[g].length;x++){const S=V1(s[g][x],u);Ls(o,S),_.push(S)}p.push(_)}return p}function pg(s,o,u){const p=[];for(let g=0;g<s.length;g++){const _=up(s[g],o,u);p.push(_)}return p}function fg(s,o,u,p){if(s[0]<u[0]||s[0]>u[2]){const g=.5*p;let _=s[0]-u[0]>g?-p:u[0]-s[0]>g?p:0;_===0&&(_=s[0]-u[2]>g?-p:u[2]-s[0]>g?p:0),s[0]+=_}Ls(o,s)}function mg(s,o,u,p){const g=Math.pow(2,p.z)*da,_=[p.x*da,p.y*da],x=[];for(const S of s)for(const E of S){const A=[E.x+_[0],E.y+_[1]];fg(A,o,u,g),x.push(A)}return x}function gg(s,o,u,p){const g=Math.pow(2,p.z)*da,_=[p.x*da,p.y*da],x=[];for(const E of s){const A=[];for(const L of E){const B=[L.x+_[0],L.y+_[1]];Ls(o,B),A.push(B)}x.push(A)}if(o[2]-o[0]<=g/2){(S=o)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const E of x)for(const A of E)fg(A,o,u,g)}var S;return x}class Rs{constructor(o,u){this.type=at,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ps(o[1])){const p=o[1];if(p.type==="FeatureCollection"){const g=[];for(const _ of p.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new Rs(p,{type:"MultiPolygon",coordinates:g})}else if(p.type==="Feature"){const g=p.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Rs(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Rs(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=u.canonicalID();if(p.type==="Polygon"){const S=up(p.coordinates,_,x),E=mg(u.geometry(),g,_,x);if(!ts(g,_))return!1;for(const A of E)if(!_l(A,S))return!1}if(p.type==="MultiPolygon"){const S=pg(p.coordinates,_,x),E=mg(u.geometry(),g,_,x);if(!ts(g,_))return!1;for(const A of E)if(!q1(A,S))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=u.canonicalID();if(p.type==="Polygon"){const S=up(p.coordinates,_,x),E=gg(u.geometry(),g,_,x);if(!ts(g,_))return!1;for(const A of E)if(!dg(A,S))return!1}if(p.type==="MultiPolygon"){const S=pg(p.coordinates,_,x),E=gg(u.geometry(),g,_,x);if(!ts(g,_))return!1;for(const A of E)if(!H1(A,S))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let yg=class{constructor(s=[],o=(u,p)=>u<p?-1:u>p?1:0){if(this.data=s,this.length=this.data.length,this.compare=o,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:o,compare:u}=this,p=o[s];for(;s>0;){const g=s-1>>1,_=o[g];if(u(p,_)>=0)break;o[s]=_,s=g}o[s]=p}_down(s){const{data:o,compare:u}=this,p=this.length>>1,g=o[s];for(;s<p;){let _=1+(s<<1);const x=_+1;if(x<this.length&&u(o[x],o[_])<0&&(_=x),u(o[_],g)>=0)break;o[s]=o[_],s=_}o[s]=g}};function G1(s,o,u,p,g){vg(s,o,u,p||s.length-1,g||Z1)}function vg(s,o,u,p,g){for(;p>u;){if(p-u>600){var _=p-u+1,x=o-u+1,S=Math.log(_),E=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*E*(_-E)/_)*(x-_/2<0?-1:1);vg(s,o,Math.max(u,Math.floor(o-x*E/_+A)),Math.min(p,Math.floor(o+(_-x)*E/_+A)),g)}var L=s[o],B=u,V=p;for(Ru(s,u,o),g(s[p],L)>0&&Ru(s,u,p);B<V;){for(Ru(s,B,V),B++,V--;g(s[B],L)<0;)B++;for(;g(s[V],L)>0;)V--}g(s[u],L)===0?Ru(s,u,V):Ru(s,++V,p),V<=o&&(u=V+1),o<=V&&(p=V-1)}}function Ru(s,o,u){var p=s[o];s[o]=s[u],s[u]=p}function Z1(s,o){return s<o?-1:s>o?1:0}function Xc(s,o){if(s.length<=1)return[s];const u=[];let p,g;for(const _ of s){const x=X1(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(p&&u.push(p),p=[_]):p.push(_))}if(p&&u.push(p),o>1)for(let _=0;_<u.length;_++)u[_].length<=o||(G1(u[_],o,1,u[_].length-1,K1),u[_]=u[_].slice(0,o));return u}function K1(s,o){return o.area-s.area}function X1(s){let o=0;for(let u,p,g=0,_=s.length,x=_-1;g<_;x=g++)u=s[g],p=s[x],o+=(p.x-u.x)*(u.y+p.y);return o}const _g=1/298.257223563,xg=_g*(2-_g),bg=Math.PI/180;class cp{constructor(o){const u=6378.137*bg*1e3,p=Math.cos(o*bg),g=1/(1-xg*(1-p*p)),_=Math.sqrt(g);this.kx=u*_*p,this.ky=u*_*g*(1-xg)}distance(o,u){const p=this.wrap(o[0]-u[0])*this.kx,g=(o[1]-u[1])*this.ky;return Math.sqrt(p*p+g*g)}pointOnLine(o,u){let p,g,_,x,S=1/0;for(let E=0;E<o.length-1;E++){let A=o[E][0],L=o[E][1],B=this.wrap(o[E+1][0]-A)*this.kx,V=(o[E+1][1]-L)*this.ky,H=0;B===0&&V===0||(H=(this.wrap(u[0]-A)*this.kx*B+(u[1]-L)*this.ky*V)/(B*B+V*V),H>1?(A=o[E+1][0],L=o[E+1][1]):H>0&&(A+=B/this.kx*H,L+=V/this.ky*H)),B=this.wrap(u[0]-A)*this.kx,V=(u[1]-L)*this.ky;const Y=B*B+V*V;Y<S&&(S=Y,p=A,g=L,_=E,x=H)}return{point:[p,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function wg(s,o){return o[0]-s[0]}function Yc(s){return s[1]-s[0]+1}function Da(s,o){return s[1]>=s[0]&&s[1]<o}function dp(s,o){if(s[0]>s[1])return[null,null];const u=Yc(s);if(o){if(u===2)return[s,null];const g=Math.floor(u/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(u===1)return[s,null];const p=Math.floor(u/2)-1;return[[s[0],s[0]+p],[s[0]+p+1,s[1]]]}function hp(s,o){if(!Da(o,s.length))return[1/0,1/0,-1/0,-1/0];const u=[1/0,1/0,-1/0,-1/0];for(let p=o[0];p<=o[1];++p)Ls(u,s[p]);return u}function pp(s){const o=[1/0,1/0,-1/0,-1/0];for(const u of s)for(const p of u)Ls(o,p);return o}function Jc(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function fp(s,o,u){if(!Jc(s)||!Jc(o))return NaN;let p=0,g=0;return s[2]<o[0]&&(p=o[0]-s[2]),s[0]>o[2]&&(p=s[0]-o[2]),s[1]>o[3]&&(g=s[1]-o[3]),s[3]<o[1]&&(g=o[1]-s[3]),u.distance([0,0],[p,g])}function zs(s,o,u){const p=u.pointOnLine(o,s);return u.distance(s,p.point)}function mp(s,o,u,p,g){const _=Math.min(zs(s,[u,p],g),zs(o,[u,p],g)),x=Math.min(zs(u,[s,o],g),zs(p,[s,o],g));return Math.min(_,x)}function Y1(s,o,u,p,g){if(!Da(o,s.length)||!Da(p,u.length))return 1/0;let _=1/0;for(let x=o[0];x<o[1];++x){const S=s[x],E=s[x+1];for(let A=p[0];A<p[1];++A){const L=u[A],B=u[A+1];if(Kc(S,E,L,B))return 0;_=Math.min(_,mp(S,E,L,B,g))}}return _}function _r(s,o,u,p,g){if(!Da(o,s.length)||!Da(p,u.length))return NaN;let _=1/0;for(let x=o[0];x<=o[1];++x)for(let S=p[0];S<=p[1];++S)if(_=Math.min(_,g.distance(s[x],u[S])),_===0)return _;return _}function J1(s,o,u){if(_l(s,o,!0))return 0;let p=1/0;for(const g of o){const _=g[0],x=g[g.length-1];if(_!==x&&(p=Math.min(p,zs(s,[x,_],u)),p===0))return p;const S=u.pointOnLine(g,s);if(p=Math.min(p,u.distance(s,S.point)),p===0)return p}return p}function Zt(s,o,u,p){if(!Da(o,s.length))return NaN;for(let _=o[0];_<=o[1];++_)if(_l(s[_],u,!0))return 0;let g=1/0;for(let _=o[0];_<o[1];++_){const x=s[_],S=s[_+1];for(const E of u)for(let A=0,L=E.length,B=L-1;A<L;B=A++){const V=E[B],H=E[A];if(Kc(x,S,V,H))return 0;g=Math.min(g,mp(x,S,V,H,p))}}return g}function Qc(s,o){for(const u of s)for(const p of u)if(_l(p,o,!0))return!0;return!1}function Wn(s,o,u,p=1/0){const g=pp(s),_=pp(o);if(p!==1/0&&fp(g,_,u)>=p)return p;if(ts(g,_)){if(Qc(s,o))return 0}else if(Qc(o,s))return 0;let x=1/0;for(const S of s)for(let E=0,A=S.length,L=A-1;E<A;L=E++){const B=S[L],V=S[E];for(const H of o)for(let Y=0,J=H.length,de=J-1;Y<J;de=Y++){const me=H[de],Pe=H[Y];if(Kc(B,V,me,Pe))return 0;x=Math.min(x,mp(B,V,me,Pe,u))}}return x}function Dn(s,o,u,p,g,_){if(!_)return;const x=fp(hp(p,_),g,u);x<o&&s.push([x,_,[0,0]])}function Ds(s,o,u,p,g,_,x){if(!_||!x)return;const S=fp(hp(p,_),hp(g,x),u);S<o&&s.push([S,_,x])}function zu(s,o,u,p,g=1/0){let _=Math.min(p.distance(s[0],u[0][0]),g);if(_===0)return _;const x=new yg([[0,[0,s.length-1],[0,0]]],wg),S=pp(u);for(;x.length>0;){const E=x.pop();if(E[0]>=_)continue;const A=E[1],L=o?50:100;if(Yc(A)<=L){if(!Da(A,s.length))return NaN;if(o){const B=Zt(s,A,u,p);if(isNaN(B)||B===0)return B;_=Math.min(_,B)}else for(let B=A[0];B<=A[1];++B){const V=J1(s[B],u,p);if(_=Math.min(_,V),_===0)return 0}}else{const B=dp(A,o);Dn(x,_,p,s,S,B[0]),Dn(x,_,p,s,S,B[1])}}return _}function Du(s,o,u,p,g,_=1/0){let x=Math.min(_,g.distance(s[0],u[0]));if(x===0)return x;const S=new yg([[0,[0,s.length-1],[0,u.length-1]]],wg);for(;S.length>0;){const E=S.pop();if(E[0]>=x)continue;const A=E[1],L=E[2],B=o?50:100,V=p?50:100;if(Yc(A)<=B&&Yc(L)<=V){if(!Da(A,s.length)&&Da(L,u.length))return NaN;let H;if(o&&p)H=Y1(s,A,u,L,g),x=Math.min(x,H);else if(o&&!p){const Y=s.slice(A[0],A[1]+1);for(let J=L[0];J<=L[1];++J)if(H=zs(u[J],Y,g),x=Math.min(x,H),x===0)return x}else if(!o&&p){const Y=u.slice(L[0],L[1]+1);for(let J=A[0];J<=A[1];++J)if(H=zs(s[J],Y,g),x=Math.min(x,H),x===0)return x}else H=_r(s,A,u,L,g),x=Math.min(x,H)}else{const H=dp(A,o),Y=dp(L,p);Ds(S,x,g,s,u,H[0],Y[0]),Ds(S,x,g,s,u,H[0],Y[1]),Ds(S,x,g,s,u,H[1],Y[0]),Ds(S,x,g,s,u,H[1],Y[1])}}return x}function gp(s){return s.type==="MultiPolygon"?s.coordinates.map(o=>({type:"Polygon",coordinates:o})):s.type==="MultiLineString"?s.coordinates.map(o=>({type:"LineString",coordinates:o})):s.type==="MultiPoint"?s.coordinates.map(o=>({type:"Point",coordinates:o})):[s]}class $s{constructor(o,u){this.type=Ke,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Ps(o[1])){const p=o[1];if(p.type==="FeatureCollection")return new $s(p,p.features.map(g=>gp(g.geometry)).flat());if(p.type==="Feature")return new $s(p,gp(p.geometry));if("type"in p&&"coordinates"in p)return new $s(p,gp(p))}return u.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,p){const g=u.geometry(),_=g.flat().map(E=>lp([E.x,E.y],u.canonical));if(g.length===0)return NaN;const x=new cp(_[0][1]);let S=1/0;for(const E of p){switch(E.type){case"Point":S=Math.min(S,Du(_,!1,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Du(_,!1,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,zu(_,!1,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,p){const g=u.geometry(),_=g.flat().map(E=>lp([E.x,E.y],u.canonical));if(g.length===0)return NaN;const x=new cp(_[0][1]);let S=1/0;for(const E of p){switch(E.type){case"Point":S=Math.min(S,Du(_,!0,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Du(_,!0,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,zu(_,!0,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="Polygon")return function(u,p){const g=u.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Xc(g,0).map(E=>E.map(A=>A.map(L=>lp([L.x,L.y],u.canonical)))),x=new cp(_[0][0][0][1]);let S=1/0;for(const E of p)for(const A of _){switch(E.type){case"Point":S=Math.min(S,zu([E.coordinates],!1,A,x,S));break;case"LineString":S=Math.min(S,zu(E.coordinates,!0,A,x,S));break;case"Polygon":S=Math.min(S,Wn(A,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const xl={"==":N1,"!=":lg,">":j1,"<":ug,">=":cg,"<=":U1,array:Bo,at:np,boolean:Bo,case:Vc,coalesce:Hc,collator:Lu,format:Zc,image:ap,in:rp,"index-of":gl,interpolate:$i,"interpolate-hcl":$i,"interpolate-lab":$i,length:sp,let:es,literal:Oo,match:ip,number:Bo,"number-format":op,object:Bo,slice:Mu,step:yl,string:Bo,"to-boolean":Fo,"to-color":Fo,"to-number":Fo,"to-string":Fo,var:kn,within:Rs,distance:$s};class bo{constructor(o,u,p,g){this.name=o,this.type=u,this._evaluate=p,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,u){const p=o[0],g=bo.definitions[p];if(!g)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([A])=>!Array.isArray(A)||A.length===o.length-1);let E=null;for(const[A,L]of S){E=new Ms(u.registry,$u,u.path,null,u.scope);const B=[];let V=!1;for(let H=1;H<o.length;H++){const Y=o[H],J=Array.isArray(A)?A[H-1]:A.type,de=E.parse(Y,1+B.length,J);if(!de){V=!0;break}B.push(de)}if(!V)if(Array.isArray(A)&&A.length!==B.length)E.error(`Expected ${A.length} arguments, but found ${B.length} instead.`);else{for(let H=0;H<B.length;H++){const Y=Array.isArray(A)?A[H]:A.type,J=B[H];E.concat(H+1).checkSubtype(Y,J.type)}if(E.errors.length===0)return new bo(p,_,L,B)}}if(S.length===1)u.errors.push(...E.errors);else{const A=(S.length?S:x).map(([B])=>{return V=B,Array.isArray(V)?`(${V.map(W).join(", ")})`:`(${W(V.type)}...)`;var V}).join(" | "),L=[];for(let B=1;B<o.length;B++){const V=u.parse(o[B],1+L.length);if(!V)return null;L.push(W(V.type))}u.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(o,u){bo.definitions=u;for(const p in u)o[p]=bo}}function yp(s,[o,u,p,g]){o=o.evaluate(s),u=u.evaluate(s),p=p.evaluate(s);const _=g?g.evaluate(s):1,x=ml(o,u,p,_);if(x)throw new Tr(x);return new Rn(o/255,u/255,p/255,_,!1)}function vp(s,o){return s in o}function _p(s,o){const u=o[s];return u===void 0?null:u}function Os(s){return{type:s}}function $u(s){if(s instanceof kn)return $u(s.boundExpression);if(s instanceof bo&&s.name==="error"||s instanceof Lu||s instanceof Rs||s instanceof $s)return!1;const o=s instanceof Fo||s instanceof Bo;let u=!0;return s.eachChild(p=>{u=o?u&&$u(p):u&&p instanceof Oo}),!!u&&Ou(s)&&Bu(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ou(s){if(s instanceof bo&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Rs||s instanceof $s)return!1;let o=!0;return s.eachChild(u=>{o&&!Ou(u)&&(o=!1)}),o}function bl(s){if(s instanceof bo&&s.name==="feature-state")return!1;let o=!0;return s.eachChild(u=>{o&&!bl(u)&&(o=!1)}),o}function Bu(s,o){if(s instanceof bo&&o.indexOf(s.name)>=0)return!1;let u=!0;return s.eachChild(p=>{u&&!Bu(p,o)&&(u=!1)}),u}function ed(s){return{result:"success",value:s}}function wl(s){return{result:"error",value:s}}function Sl(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Sg(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function xp(s){return!!s.expression&&s.expression.interpolated}function wn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function td(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Q1(s){return s}function Cg(s,o){const u=o.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",g=p||!(p||s.property!==void 0),_=s.type||(xp(o)?"exponential":"interval");if(u||o.type==="padding"){const L=u?Rn.parse:Qi.parse;(s=cr({},s)).stops&&(s.stops=s.stops.map(B=>[B[0],L(B[1])])),s.default=L(s.default?s.default:o.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let S,E,A;if(_==="exponential")S=Eg;else if(_==="interval")S=nd;else if(_==="categorical"){S=kg,E=Object.create(null);for(const L of s.stops)E[L[0]]=L[1];A=typeof s.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=Tg}if(p){const L={},B=[];for(let Y=0;Y<s.stops.length;Y++){const J=s.stops[Y],de=J[0].zoom;L[de]===void 0&&(L[de]={zoom:de,type:s.type,property:s.property,default:s.default,stops:[]},B.push(de)),L[de].stops.push([J[0].value,J[1]])}const V=[];for(const Y of B)V.push([L[Y].zoom,Cg(L[Y],o)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:$i.interpolationFactor.bind(void 0,H),zoomStops:V.map(Y=>Y[0]),evaluate:({zoom:Y},J)=>Eg({stops:V,base:s.base},o,Y).evaluate(Y,J)}}if(g){const L=_==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:$i.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map(B=>B[0]),evaluate:({zoom:B})=>S(s,o,B,E,A)}}return{kind:"source",evaluate(L,B){const V=B&&B.properties?B.properties[s.property]:void 0;return V===void 0?Cl(s.default,o.default):S(s,o,V,E,A)}}}function Cl(s,o,u){return s!==void 0?s:o!==void 0?o:u!==void 0?u:void 0}function kg(s,o,u,p,g){return Cl(typeof u===g?p[u]:void 0,s.default,o.default)}function nd(s,o,u){if(wn(u)!=="number")return Cl(s.default,o.default);const p=s.stops.length;if(p===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[p-1][0])return s.stops[p-1][1];const g=Wc(s.stops.map(_=>_[0]),u);return s.stops[g][1]}function Eg(s,o,u){const p=s.base!==void 0?s.base:1;if(wn(u)!=="number")return Cl(s.default,o.default);const g=s.stops.length;if(g===1||u<=s.stops[0][0])return s.stops[0][1];if(u>=s.stops[g-1][0])return s.stops[g-1][1];const _=Wc(s.stops.map(L=>L[0]),u),x=function(L,B,V,H){const Y=H-V,J=L-V;return Y===0?0:B===1?J/Y:(Math.pow(B,J)-1)/(Math.pow(B,Y)-1)}(u,p,s.stops[_][0],s.stops[_+1][0]),S=s.stops[_][1],E=s.stops[_+1][1],A=Di[o.type]||Q1;return typeof S.evaluate=="function"?{evaluate(...L){const B=S.evaluate.apply(void 0,L),V=E.evaluate.apply(void 0,L);if(B!==void 0&&V!==void 0)return A(B,V,x,s.colorSpace)}}:A(S,E,x,s.colorSpace)}function Tg(s,o,u){switch(o.type){case"color":u=Rn.parse(u);break;case"formatted":u=Ji.fromString(u.toString());break;case"resolvedImage":u=eo.fromString(u.toString());break;case"padding":u=Qi.parse(u);break;default:wn(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0)}return Cl(u,s.default,o.default)}bo.register(xl,{error:[{kind:"error"},[Xe],(s,[o])=>{throw new Tr(o.evaluate(s))}],typeof:[Xe,[$t],(s,[o])=>W($r(o.evaluate(s)))],"to-rgba":[q(Ke,4),[mn],(s,[o])=>{const[u,p,g,_]=o.evaluate(s).rgb;return[255*u,255*p,255*g,_]}],rgb:[mn,[Ke,Ke,Ke],yp],rgba:[mn,[Ke,Ke,Ke,Ke],yp],has:{type:at,overloads:[[[Xe],(s,[o])=>vp(o.evaluate(s),s.properties())],[[Xe,zr],(s,[o,u])=>vp(o.evaluate(s),u.evaluate(s))]]},get:{type:$t,overloads:[[[Xe],(s,[o])=>_p(o.evaluate(s),s.properties())],[[Xe,zr],(s,[o,u])=>_p(o.evaluate(s),u.evaluate(s))]]},"feature-state":[$t,[Xe],(s,[o])=>_p(o.evaluate(s),s.featureState||{})],properties:[zr,[],s=>s.properties()],"geometry-type":[Xe,[],s=>s.geometryType()],id:[$t,[],s=>s.id()],zoom:[Ke,[],s=>s.globals.zoom],"heatmap-density":[Ke,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ke,[],s=>s.globals.lineProgress||0],accumulated:[$t,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ke,Os(Ke),(s,o)=>{let u=0;for(const p of o)u+=p.evaluate(s);return u}],"*":[Ke,Os(Ke),(s,o)=>{let u=1;for(const p of o)u*=p.evaluate(s);return u}],"-":{type:Ke,overloads:[[[Ke,Ke],(s,[o,u])=>o.evaluate(s)-u.evaluate(s)],[[Ke],(s,[o])=>-o.evaluate(s)]]},"/":[Ke,[Ke,Ke],(s,[o,u])=>o.evaluate(s)/u.evaluate(s)],"%":[Ke,[Ke,Ke],(s,[o,u])=>o.evaluate(s)%u.evaluate(s)],ln2:[Ke,[],()=>Math.LN2],pi:[Ke,[],()=>Math.PI],e:[Ke,[],()=>Math.E],"^":[Ke,[Ke,Ke],(s,[o,u])=>Math.pow(o.evaluate(s),u.evaluate(s))],sqrt:[Ke,[Ke],(s,[o])=>Math.sqrt(o.evaluate(s))],log10:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))/Math.LN10],ln:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))],log2:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))/Math.LN2],sin:[Ke,[Ke],(s,[o])=>Math.sin(o.evaluate(s))],cos:[Ke,[Ke],(s,[o])=>Math.cos(o.evaluate(s))],tan:[Ke,[Ke],(s,[o])=>Math.tan(o.evaluate(s))],asin:[Ke,[Ke],(s,[o])=>Math.asin(o.evaluate(s))],acos:[Ke,[Ke],(s,[o])=>Math.acos(o.evaluate(s))],atan:[Ke,[Ke],(s,[o])=>Math.atan(o.evaluate(s))],min:[Ke,Os(Ke),(s,o)=>Math.min(...o.map(u=>u.evaluate(s)))],max:[Ke,Os(Ke),(s,o)=>Math.max(...o.map(u=>u.evaluate(s)))],abs:[Ke,[Ke],(s,[o])=>Math.abs(o.evaluate(s))],round:[Ke,[Ke],(s,[o])=>{const u=o.evaluate(s);return u<0?-Math.round(-u):Math.round(u)}],floor:[Ke,[Ke],(s,[o])=>Math.floor(o.evaluate(s))],ceil:[Ke,[Ke],(s,[o])=>Math.ceil(o.evaluate(s))],"filter-==":[at,[Xe,$t],(s,[o,u])=>s.properties()[o.value]===u.value],"filter-id-==":[at,[$t],(s,[o])=>s.id()===o.value],"filter-type-==":[at,[Xe],(s,[o])=>s.geometryType()===o.value],"filter-<":[at,[Xe,$t],(s,[o,u])=>{const p=s.properties()[o.value],g=u.value;return typeof p==typeof g&&p<g}],"filter-id-<":[at,[$t],(s,[o])=>{const u=s.id(),p=o.value;return typeof u==typeof p&&u<p}],"filter->":[at,[Xe,$t],(s,[o,u])=>{const p=s.properties()[o.value],g=u.value;return typeof p==typeof g&&p>g}],"filter-id->":[at,[$t],(s,[o])=>{const u=s.id(),p=o.value;return typeof u==typeof p&&u>p}],"filter-<=":[at,[Xe,$t],(s,[o,u])=>{const p=s.properties()[o.value],g=u.value;return typeof p==typeof g&&p<=g}],"filter-id-<=":[at,[$t],(s,[o])=>{const u=s.id(),p=o.value;return typeof u==typeof p&&u<=p}],"filter->=":[at,[Xe,$t],(s,[o,u])=>{const p=s.properties()[o.value],g=u.value;return typeof p==typeof g&&p>=g}],"filter-id->=":[at,[$t],(s,[o])=>{const u=s.id(),p=o.value;return typeof u==typeof p&&u>=p}],"filter-has":[at,[$t],(s,[o])=>o.value in s.properties()],"filter-has-id":[at,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[at,[q(Xe)],(s,[o])=>o.value.indexOf(s.geometryType())>=0],"filter-id-in":[at,[q($t)],(s,[o])=>o.value.indexOf(s.id())>=0],"filter-in-small":[at,[Xe,q($t)],(s,[o,u])=>u.value.indexOf(s.properties()[o.value])>=0],"filter-in-large":[at,[Xe,q($t)],(s,[o,u])=>function(p,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===p)return!0;g[S]>p?x=S-1:_=S+1}return!1}(s.properties()[o.value],u.value,0,u.value.length-1)],all:{type:at,overloads:[[[at,at],(s,[o,u])=>o.evaluate(s)&&u.evaluate(s)],[Os(at),(s,o)=>{for(const u of o)if(!u.evaluate(s))return!1;return!0}]]},any:{type:at,overloads:[[[at,at],(s,[o,u])=>o.evaluate(s)||u.evaluate(s)],[Os(at),(s,o)=>{for(const u of o)if(u.evaluate(s))return!0;return!1}]]},"!":[at,[at],(s,[o])=>!o.evaluate(s)],"is-supported-script":[at,[Xe],(s,[o])=>{const u=s.globals&&s.globals.isSupportedScript;return!u||u(o.evaluate(s))}],upcase:[Xe,[Xe],(s,[o])=>o.evaluate(s).toUpperCase()],downcase:[Xe,[Xe],(s,[o])=>o.evaluate(s).toLowerCase()],concat:[Xe,Os($t),(s,o)=>o.map(u=>Pu(u.evaluate(s))).join("")],"resolved-locale":[Xe,[vo],(s,[o])=>o.evaluate(s).resolvedLocale()]});class rd{constructor(o,u){var p;this.expression=o,this._warningHistory={},this._evaluator=new Uc,this._defaultValue=u?(p=u).type==="color"&&td(p.default)?new Rn(0,0,0,0):p.type==="color"?Rn.parse(p.default)||null:p.type==="padding"?Qi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?xo.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=u&&u.type==="enum"?u.values:null}evaluateWithoutErrorHandling(o,u,p,g,_,x){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,u,p,g,_,x){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Tr(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function id(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in xl}function kl(s,o){const u=new Ms(xl,$u,[],o?function(g){const _={color:mn,string:Xe,number:Ke,enum:Xe,boolean:at,formatted:$o,padding:ca,resolvedImage:_o,variableAnchorOffsetCollection:fe};return g.type==="array"?q(_[g.value]||$t,g.length):_[g.type]}(o):void 0),p=u.parse(s,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?ed(new rd(p,o)):wl(u.errors)}class El{constructor(o,u){this.kind=o,this._styleExpression=u,this.isStateDependent=o!=="constant"&&!bl(u.expression)}evaluateWithoutErrorHandling(o,u,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,g,_,x)}evaluate(o,u,p,g,_,x){return this._styleExpression.evaluate(o,u,p,g,_,x)}}class Tl{constructor(o,u,p,g){this.kind=o,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!bl(u.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,u,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,g,_,x)}evaluate(o,u,p,g,_,x){return this._styleExpression.evaluate(o,u,p,g,_,x)}interpolationFactor(o,u,p){return this.interpolationType?$i.interpolationFactor(this.interpolationType,o,u,p):0}}function bp(s,o){const u=kl(s,o);if(u.result==="error")return u;const p=u.value.expression,g=Ou(p);if(!g&&!Sl(o))return wl([new Kn("","data expressions not supported")]);const _=Bu(p,["zoom"]);if(!_&&!Sg(o))return wl([new Kn("","zoom expressions not supported")]);const x=Fu(p);return x||_?x instanceof Kn?wl([x]):x instanceof $i&&!xp(o)?wl([new Kn("",'"interpolate" expressions cannot be used with this property')]):ed(x?new Tl(g?"camera":"composite",u.value,x.labels,x instanceof $i?x.interpolation:void 0):new El(g?"constant":"source",u.value)):wl([new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Il{constructor(o,u){this._parameters=o,this._specification=u,cr(this,Cg(this._parameters,this._specification))}static deserialize(o){return new Il(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Fu(s){let o=null;if(s instanceof es)o=Fu(s.result);else if(s instanceof Hc){for(const u of s.args)if(o=Fu(u),o)break}else(s instanceof yl||s instanceof $i)&&s.input instanceof bo&&s.input.name==="zoom"&&(o=s);return o instanceof Kn||s.eachChild(u=>{const p=Fu(u);p instanceof Kn?o=p:!o&&p?o=new Kn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&p&&o!==p&&(o=new Kn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function od(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const o of s.slice(1))if(!od(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const ad={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function wp(s){if(s==null)return{filter:()=>!0,needGeometry:!1};od(s)||(s=sd(s));const o=kl(s,ad);if(o.result==="error")throw new Error(o.value.map(u=>`${u.key}: ${u.message}`).join(", "));return{filter:(u,p,g)=>o.value.evaluate(u,p,{},g),needGeometry:Ig(s)}}function e_(s,o){return s<o?-1:s>o?1:0}function Ig(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let o=1;o<s.length;o++)if(Ig(s[o]))return!0;return!1}function sd(s){if(!s)return!0;const o=s[0];return s.length<=1?o!=="any":o==="=="?Sp(s[1],s[2],"=="):o==="!="?ui(Sp(s[1],s[2],"==")):o==="<"||o===">"||o==="<="||o===">="?Sp(s[1],s[2],o):o==="any"?(u=s.slice(1),["any"].concat(u.map(sd))):o==="all"?["all"].concat(s.slice(1).map(sd)):o==="none"?["all"].concat(s.slice(1).map(sd).map(ui)):o==="in"?Nu(s[1],s.slice(2)):o==="!in"?ui(Nu(s[1],s.slice(2))):o==="has"?ju(s[1]):o!=="!has"||ui(ju(s[1]));var u}function Sp(s,o,u){switch(s){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,s,o]}}function Nu(s,o){if(o.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",s,["literal",o.sort(e_)]]:["filter-in-small",s,["literal",o]]}}function ju(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function ui(s){return["!",s]}function Bs(s){const o=typeof s;if(o==="number"||o==="boolean"||o==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const _ of s)g+=`${Bs(_)},`;return`${g}]`}const u=Object.keys(s).sort();let p="{";for(let g=0;g<u.length;g++)p+=`${JSON.stringify(u[g])}:${Bs(s[u[g]])},`;return`${p}}`}function Pg(s){let o="";for(const u of ur)o+=`/${Bs(s[u])}`;return o}function Mg(s){const o=s.value;return o?[new Ge(s.key,o,"constants have been deprecated as of v8")]:[]}function xr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function No(s){if(Array.isArray(s))return s.map(No);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const o={};for(const u in s)o[u]=No(s[u]);return o}return xr(s)}function to(s){const o=s.key,u=s.value,p=s.valueSpec||{},g=s.objectElementValidators||{},_=s.style,x=s.styleSpec,S=s.validateSpec;let E=[];const A=wn(u);if(A!=="object")return[new Ge(o,u,`object expected, ${A} found`)];for(const L in u){const B=L.split(".")[0],V=p[B]||p["*"];let H;if(g[B])H=g[B];else if(p[B])H=S;else if(g["*"])H=g["*"];else{if(!p["*"]){E.push(new Ge(o,u[L],`unknown property "${L}"`));continue}H=S}E=E.concat(H({key:(o&&`${o}.`)+L,value:u[L],valueSpec:V,style:_,styleSpec:x,object:u,objectKey:L,validateSpec:S},u))}for(const L in p)g[L]||p[L].required&&p[L].default===void 0&&u[L]===void 0&&E.push(new Ge(o,u,`missing required property "${L}"`));return E}function Uu(s){const o=s.value,u=s.valueSpec,p=s.style,g=s.styleSpec,_=s.key,x=s.arrayElementValidator||s.validateSpec;if(wn(o)!=="array")return[new Ge(_,o,`array expected, ${wn(o)} found`)];if(u.length&&o.length!==u.length)return[new Ge(_,o,`array length ${u.length} expected, length ${o.length} found`)];if(u["min-length"]&&o.length<u["min-length"])return[new Ge(_,o,`array length at least ${u["min-length"]} expected, length ${o.length} found`)];let S={type:u.value,values:u.values};g.$version<7&&(S.function=u.function),wn(u.value)==="object"&&(S=u.value);let E=[];for(let A=0;A<o.length;A++)E=E.concat(x({array:o,arrayIndex:A,value:o[A],valueSpec:S,validateSpec:s.validateSpec,style:p,styleSpec:g,key:`${_}[${A}]`}));return E}function Cp(s){const o=s.key,u=s.value,p=s.valueSpec;let g=wn(u);return g==="number"&&u!=u&&(g="NaN"),g!=="number"?[new Ge(o,u,`number expected, ${g} found`)]:"minimum"in p&&u<p.minimum?[new Ge(o,u,`${u} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&u>p.maximum?[new Ge(o,u,`${u} is greater than the maximum value ${p.maximum}`)]:[]}function ld(s){const o=s.valueSpec,u=xr(s.value.type);let p,g,_,x={};const S=u!=="categorical"&&s.value.property===void 0,E=!S,A=wn(s.value.stops)==="array"&&wn(s.value.stops[0])==="array"&&wn(s.value.stops[0][0])==="object",L=to({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if(u==="identity")return[new Ge(H.key,H.value,'identity function may not have a "stops" property')];let Y=[];const J=H.value;return Y=Y.concat(Uu({key:H.key,value:J,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:B})),wn(J)==="array"&&J.length===0&&Y.push(new Ge(H.key,J,"array must have at least one stop")),Y},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:o,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return u==="identity"&&S&&L.push(new Ge(s.key,s.value,'missing required property "property"')),u==="identity"||s.value.stops||L.push(new Ge(s.key,s.value,'missing required property "stops"')),u==="exponential"&&s.valueSpec.expression&&!xp(s.valueSpec)&&L.push(new Ge(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!Sl(s.valueSpec)?L.push(new Ge(s.key,s.value,"property functions not supported")):S&&!Sg(s.valueSpec)&&L.push(new Ge(s.key,s.value,"zoom functions not supported"))),u!=="categorical"&&!A||s.value.property!==void 0||L.push(new Ge(s.key,s.value,'"property" property is required')),L;function B(H){let Y=[];const J=H.value,de=H.key;if(wn(J)!=="array")return[new Ge(de,J,`array expected, ${wn(J)} found`)];if(J.length!==2)return[new Ge(de,J,`array length 2 expected, length ${J.length} found`)];if(A){if(wn(J[0])!=="object")return[new Ge(de,J,`object expected, ${wn(J[0])} found`)];if(J[0].zoom===void 0)return[new Ge(de,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new Ge(de,J,"object stop key must have value")];if(_&&_>xr(J[0].zoom))return[new Ge(de,J[0].zoom,"stop zoom values must appear in ascending order")];xr(J[0].zoom)!==_&&(_=xr(J[0].zoom),g=void 0,x={}),Y=Y.concat(to({key:`${de}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:Cp,value:V}}))}else Y=Y.concat(V({key:`${de}[0]`,value:J[0],valueSpec:{},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},J));return id(No(J[1]))?Y.concat([new Ge(`${de}[1]`,J[1],"expressions are not allowed in function stops.")]):Y.concat(H.validateSpec({key:`${de}[1]`,value:J[1],valueSpec:o,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function V(H,Y){const J=wn(H.value),de=xr(H.value),me=H.value!==null?H.value:Y;if(p){if(J!==p)return[new Ge(H.key,me,`${J} stop domain type must match previous stop domain type ${p}`)]}else p=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new Ge(H.key,me,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&u!=="categorical"){let Pe=`number expected, ${J} found`;return Sl(o)&&u===void 0&&(Pe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(H.key,me,Pe)]}return u!=="categorical"||J!=="number"||isFinite(de)&&Math.floor(de)===de?u!=="categorical"&&J==="number"&&g!==void 0&&de<g?[new Ge(H.key,me,"stop domain values must appear in ascending order")]:(g=de,u==="categorical"&&de in x?[new Ge(H.key,me,"stop domain values must be unique")]:(x[de]=!0,[])):[new Ge(H.key,me,`integer expected, found ${de}`)]}}function Pl(s){const o=(s.expressionContext==="property"?bp:kl)(No(s.value),s.valueSpec);if(o.result==="error")return o.value.map(p=>new Ge(`${s.key}${p.key}`,s.value,p.message));const u=o.value.expression||o.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!u.outputDefined())return[new Ge(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!bl(u))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!bl(u))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Bu(u,["zoom","feature-state"]))return[new Ge(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Ou(u))return[new Ge(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $a(s){const o=s.key,u=s.value,p=s.valueSpec,g=[];return Array.isArray(p.values)?p.values.indexOf(xr(u))===-1&&g.push(new Ge(o,u,`expected one of [${p.values.join(", ")}], ${JSON.stringify(u)} found`)):Object.keys(p.values).indexOf(xr(u))===-1&&g.push(new Ge(o,u,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(u)} found`)),g}function kp(s){return od(No(s.value))?Pl(cr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ud(s)}function ud(s){const o=s.value,u=s.key;if(wn(o)!=="array")return[new Ge(u,o,`array expected, ${wn(o)} found`)];const p=s.styleSpec;let g,_=[];if(o.length<1)return[new Ge(u,o,"filter array must have at least 1 element")];switch(_=_.concat($a({key:`${u}[0]`,value:o[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),xr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&xr(o[1])==="$type"&&_.push(new Ge(u,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&_.push(new Ge(u,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=wn(o[1]),g!=="string"&&_.push(new Ge(`${u}[1]`,o[1],`string expected, ${g} found`)));for(let x=2;x<o.length;x++)g=wn(o[x]),xr(o[1])==="$type"?_=_.concat($a({key:`${u}[${x}]`,value:o[x],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ge(`${u}[${x}]`,o[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)_=_.concat(ud({key:`${u}[${x}]`,value:o[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=wn(o[1]),o.length!==2?_.push(new Ge(u,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ge(`${u}[1]`,o[1],`string expected, ${g} found`))}return _}function Ep(s,o){const u=s.key,p=s.validateSpec,g=s.style,_=s.styleSpec,x=s.value,S=s.objectKey,E=_[`${o}_${s.layerType}`];if(!E)return[];const A=S.match(/^(.*)-transition$/);if(o==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return p({key:u,value:x,valueSpec:_.transition,style:g,styleSpec:_});const L=s.valueSpec||E[S];if(!L)return[new Ge(u,x,`unknown property "${S}"`)];let B;if(wn(x)==="string"&&Sl(L)&&!L.tokens&&(B=/^{([^}]+)}$/.exec(x)))return[new Ge(u,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const V=[];return s.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&V.push(new Ge(u,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&td(No(x))&&xr(x.type)==="identity"&&V.push(new Ge(u,x,'"text-font" does not support identity functions'))),V.concat(p({key:s.key,value:x,valueSpec:L,style:g,styleSpec:_,expressionContext:"property",propertyType:o,propertyKey:S}))}function cd(s){return Ep(s,"paint")}function Tp(s){return Ep(s,"layout")}function Ip(s){let o=[];const u=s.value,p=s.key,g=s.style,_=s.styleSpec;u.type||u.ref||o.push(new Ge(p,u,'either "type" or "ref" is required'));let x=xr(u.type);const S=xr(u.ref);if(u.id){const E=xr(u.id);for(let A=0;A<s.arrayIndex;A++){const L=g.layers[A];xr(L.id)===E&&o.push(new Ge(p,u.id,`duplicate layer id "${u.id}", previously used at line ${L.id.__line__}`))}}if("ref"in u){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in u&&o.push(new Ge(p,u[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{xr(A.id)===S&&(E=A)}),E?E.ref?o.push(new Ge(p,u.ref,"ref cannot reference another ref layer")):x=xr(E.type):o.push(new Ge(p,u.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(u.source){const E=g.sources&&g.sources[u.source],A=E&&xr(E.type);E?A==="vector"&&x==="raster"?o.push(new Ge(p,u.source,`layer "${u.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?o.push(new Ge(p,u.source,`layer "${u.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?o.push(new Ge(p,u.source,`layer "${u.id}" requires a vector source`)):A!=="vector"||u["source-layer"]?A==="raster-dem"&&x!=="hillshade"?o.push(new Ge(p,u.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!u.paint||!u.paint["line-gradient"]||A==="geojson"&&E.lineMetrics||o.push(new Ge(p,u,`layer "${u.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Ge(p,u,`layer "${u.id}" must specify a "source-layer"`)):o.push(new Ge(p,u.source,`source "${u.source}" not found`))}else o.push(new Ge(p,u,'missing required property "source"'));return o=o.concat(to({key:p,value:u,valueSpec:_.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:u.type,valueSpec:_.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:u,objectKey:"type"}),filter:kp,layout:E=>to({layer:u,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>Tp(cr({layerType:x},A))}}),paint:E=>to({layer:u,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>cd(cr({layerType:x},A))}})}})),o}function Fs(s){const o=s.value,u=s.key,p=wn(o);return p!=="string"?[new Ge(u,o,`string expected, ${p} found`)]:[]}const dd={promoteId:function({key:s,value:o}){if(wn(o)==="string")return Fs({key:s,value:o});{const u=[];for(const p in o)u.push(...Fs({key:`${s}.${p}`,value:o[p]}));return u}}};function Vu(s){const o=s.value,u=s.key,p=s.styleSpec,g=s.style,_=s.validateSpec;if(!o.type)return[new Ge(u,o,'"type" is required')];const x=xr(o.type);let S;switch(x){case"vector":case"raster":return S=to({key:u,value:o,valueSpec:p[`source_${x.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:dd,validateSpec:_}),S;case"raster-dem":return S=function(E){var A;const L=(A=E.sourceName)!==null&&A!==void 0?A:"",B=E.value,V=E.styleSpec,H=V.source_raster_dem,Y=E.style;let J=[];const de=wn(B);if(B===void 0)return J;if(de!=="object")return J.push(new Ge("source_raster_dem",B,`object expected, ${de} found`)),J;const me=xr(B.encoding)==="custom",Pe=["redFactor","greenFactor","blueFactor","baseShift"],xe=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const Te in B)!me&&Pe.includes(Te)?J.push(new Ge(Te,B[Te],`In "${L}": "${Te}" is only valid when "encoding" is set to "custom". ${xe} encoding found`)):H[Te]?J=J.concat(E.validateSpec({key:Te,value:B[Te],valueSpec:H[Te],validateSpec:E.validateSpec,style:Y,styleSpec:V})):J.push(new Ge(Te,B[Te],`unknown property "${Te}"`));return J}({sourceName:u,value:o,style:s.style,styleSpec:p,validateSpec:_}),S;case"geojson":if(S=to({key:u,value:o,valueSpec:p.source_geojson,style:g,styleSpec:p,validateSpec:_,objectElementValidators:dd}),o.cluster)for(const E in o.clusterProperties){const[A,L]=o.clusterProperties[E],B=typeof A=="string"?[A,["accumulated"],["get",E]]:A;S.push(...Pl({key:`${u}.${E}.map`,value:L,validateSpec:_,expressionContext:"cluster-map"})),S.push(...Pl({key:`${u}.${E}.reduce`,value:B,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return to({key:u,value:o,valueSpec:p.source_video,style:g,validateSpec:_,styleSpec:p});case"image":return to({key:u,value:o,valueSpec:p.source_image,style:g,validateSpec:_,styleSpec:p});case"canvas":return[new Ge(u,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return $a({key:`${u}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:p})}}function Pp(s){const o=s.value,u=s.styleSpec,p=u.light,g=s.style;let _=[];const x=wn(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Ge("light",o,`object expected, ${x} found`)]),_;for(const S in o){const E=S.match(/^(.*)-transition$/);_=_.concat(E&&p[E[1]]&&p[E[1]].transition?s.validateSpec({key:S,value:o[S],valueSpec:u.transition,validateSpec:s.validateSpec,style:g,styleSpec:u}):p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new Ge(S,o[S],`unknown property "${S}"`)])}return _}function Mp(s){const o=s.value,u=s.styleSpec,p=u.sky,g=s.style,_=wn(o);if(o===void 0)return[];if(_!=="object")return[new Ge("sky",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],style:g,styleSpec:u}):[new Ge(S,o[S],`unknown property "${S}"`)]);return x}function Ap(s){const o=s.value,u=s.styleSpec,p=u.terrain,g=s.style;let _=[];const x=wn(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Ge("terrain",o,`object expected, ${x} found`)]),_;for(const S in o)_=_.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:u}):[new Ge(S,o[S],`unknown property "${S}"`)]);return _}function Lp(s){let o=[];const u=s.value,p=s.key;if(Array.isArray(u)){const g=[],_=[];for(const x in u)u[x].id&&g.includes(u[x].id)&&o.push(new Ge(p,u,`all the sprites' ids must be unique, but ${u[x].id} is duplicated`)),g.push(u[x].id),u[x].url&&_.includes(u[x].url)&&o.push(new Ge(p,u,`all the sprites' URLs must be unique, but ${u[x].url} is duplicated`)),_.push(u[x].url),o=o.concat(to({key:`${p}[${x}]`,value:u[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return o}return Fs({key:p,value:u})}const hd={"*":()=>[],array:Uu,boolean:function(s){const o=s.value,u=s.key,p=wn(o);return p!=="boolean"?[new Ge(u,o,`boolean expected, ${p} found`)]:[]},number:Cp,color:function(s){const o=s.key,u=s.value,p=wn(u);return p!=="string"?[new Ge(o,u,`color expected, ${p} found`)]:Rn.parse(String(u))?[]:[new Ge(o,u,`color expected, "${u}" found`)]},constants:Mg,enum:$a,filter:kp,function:ld,layer:Ip,object:to,source:Vu,light:Pp,sky:Mp,terrain:Ap,projection:function(s){const o=s.value,u=s.styleSpec,p=u.projection,g=s.style,_=wn(o);if(o===void 0)return[];if(_!=="object")return[new Ge("projection",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],style:g,styleSpec:u}):[new Ge(S,o[S],`unknown property "${S}"`)]);return x},string:Fs,formatted:function(s){return Fs(s).length===0?[]:Pl(s)},resolvedImage:function(s){return Fs(s).length===0?[]:Pl(s)},padding:function(s){const o=s.key,u=s.value;if(wn(u)==="array"){if(u.length<1||u.length>4)return[new Ge(o,u,`padding requires 1 to 4 values; ${u.length} values found`)];const p={type:"number"};let g=[];for(let _=0;_<u.length;_++)g=g.concat(s.validateSpec({key:`${o}[${_}]`,value:u[_],validateSpec:s.validateSpec,valueSpec:p}));return g}return Cp({key:o,value:u,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const o=s.key,u=s.value,p=wn(u),g=s.styleSpec;if(p!=="array"||u.length<1||u.length%2!=0)return[new Ge(o,u,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<u.length;x+=2)_=_.concat($a({key:`${o}[${x}]`,value:u[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Uu({key:`${o}[${x+1}]`,value:u[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return _},sprite:Lp};function Ml(s){const o=s.value,u=s.valueSpec,p=s.styleSpec;return s.validateSpec=Ml,u.expression&&td(xr(o))?ld(s):u.expression&&id(No(o))?Pl(s):u.type&&hd[u.type]?hd[u.type](s):to(cr({},s,{valueSpec:u.type?p[u.type]:u}))}function Ag(s){const o=s.value,u=s.key,p=Fs(s);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Ge(u,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Ge(u,o,'"glyphs" url must include a "{range}" token'))),p}function wo(s,o=Se){let u=[];return u=u.concat(Ml({key:"",value:s,valueSpec:o.$root,styleSpec:o,style:s,validateSpec:Ml,objectElementValidators:{glyphs:Ag,"*":()=>[]}})),s.constants&&(u=u.concat(Mg({key:"constants",value:s.constants,style:s,styleSpec:o,validateSpec:Ml}))),Rp(u)}function ha(s){return function(o){return s({...o,validateSpec:Ml})}}function Rp(s){return[].concat(s).sort((o,u)=>o.line-u.line)}function jo(s){return function(...o){return Rp(s.apply(this,o))}}wo.source=jo(ha(Vu)),wo.sprite=jo(ha(Lp)),wo.glyphs=jo(ha(Ag)),wo.light=jo(ha(Pp)),wo.sky=jo(ha(Mp)),wo.terrain=jo(ha(Ap)),wo.layer=jo(ha(Ip)),wo.filter=jo(ha(kp)),wo.paintProperty=jo(ha(cd)),wo.layoutProperty=jo(ha(Tp));const Ns=wo,t_=Ns.light,n_=Ns.sky,Lg=Ns.paintProperty,Rg=Ns.layoutProperty;function zp(s,o){let u=!1;if(o&&o.length)for(const p of o)s.fire(new _t(new Error(p.message))),u=!0;return u}class Al{constructor(o,u,p){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(u=x[1])+2*(p=x[2]);for(let E=0;E<this.d*this.d;E++){const A=x[3+E],L=x[3+E+1];g.push(A===L?null:x.subarray(A,L))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=u+2*p;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=o,this.padding=p,this.scale=u/o,this.uid=0;const _=p/u*o;this.min=-_,this.max=o+_}insert(o,u,p,g,_){this._forEachCell(u,p,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,u,p,g,_,x){this.cells[_].push(x)}query(o,u,p,g,_){const x=this.min,S=this.max;if(o<=x&&u<=x&&S<=p&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(o,u,p,g,this._queryCell,E,{},_),E}}_queryCell(o,u,p,g,_,x,S,E){const A=this.cells[_];if(A!==null){const L=this.keys,B=this.bboxes;for(let V=0;V<A.length;V++){const H=A[V];if(S[H]===void 0){const Y=4*H;(E?E(B[Y+0],B[Y+1],B[Y+2],B[Y+3]):o<=B[Y+2]&&u<=B[Y+3]&&p>=B[Y+0]&&g>=B[Y+1])?(S[H]=!0,x.push(L[H])):S[H]=!1}}}}_forEachCell(o,u,p,g,_,x,S,E){const A=this._convertToCellCoord(o),L=this._convertToCellCoord(u),B=this._convertToCellCoord(p),V=this._convertToCellCoord(g);for(let H=A;H<=B;H++)for(let Y=L;Y<=V;Y++){const J=this.d*Y+H;if((!E||E(this._convertFromCellCoord(H),this._convertFromCellCoord(Y),this._convertFromCellCoord(H+1),this._convertFromCellCoord(Y+1)))&&_.call(this,o,u,p,g,J,x,S,E))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,u=3+this.cells.length+1+1;let p=0;for(let x=0;x<this.cells.length;x++)p+=this.cells[x].length;const g=new Int32Array(u+p+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=u;for(let x=0;x<o.length;x++){const S=o[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+o.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+o.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(o,u){const p=o.toArrayBuffer();return u&&u.push(p),{buffer:p}}static deserialize(o){return new Al(o.buffer)}}const So={};function yt(s,o,u={}){if(So[s])throw new Error(`${s} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:s,writeable:!1}),So[s]={klass:o,omit:u.omit||[],shallow:u.shallow||[]}}yt("Object",Object),yt("TransferableGridIndex",Al),yt("Color",Rn),yt("Error",Error),yt("AJAXError",on),yt("ResolvedImage",eo),yt("StylePropertyFunction",Il),yt("StyleExpression",rd,{omit:["_evaluator"]}),yt("ZoomDependentExpression",Tl),yt("ZoomConstantExpression",El),yt("CompoundExpression",bo,{omit:["_evaluate"]});for(const s in xl)xl[s]._classRegistryKey||yt(`Expression_${s}`,xl[s]);function pd(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Dp(s){return s.$name||s.constructor._classRegistryKey}function zg(s){return!function(o){if(o===null||typeof o!="object")return!1;const u=Dp(o);return!(!u||u==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||pd(s)||et(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Ll(s,o){if(zg(s))return(pd(s)||et(s))&&o&&o.push(s),ArrayBuffer.isView(s)&&o&&o.push(s.buffer),s instanceof ImageData&&o&&o.push(s.data.buffer),s;if(Array.isArray(s)){const _=[];for(const x of s)_.push(Ll(x,o));return _}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const u=Dp(s);if(!u)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!So[u])throw new Error(`${u} is not registered.`);const{klass:p}=So[u],g=p.serialize?p.serialize(s,o):{};if(p.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in s){if(!s.hasOwnProperty(_)||So[u].omit.indexOf(_)>=0)continue;const x=s[_];g[_]=So[u].shallow.indexOf(_)>=0?x:Ll(x,o)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return u!=="Object"&&(g.$name=u),g}function Rl(s){if(zg(s))return s;if(Array.isArray(s))return s.map(Rl);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const o=Dp(s)||"Object";if(!So[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:u}=So[o];if(!u)throw new Error(`can't deserialize unregistered class ${o}`);if(u.deserialize)return u.deserialize(s);const p=Object.create(u.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const _=s[g];p[g]=So[o].shallow.indexOf(g)>=0?_:Rl(_)}return p}class $p{constructor(){this.first=!0}update(o,u){const p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=u),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=p,!0))}}const sn={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Op(s){for(const o of s)if(Fp(o.charCodeAt(0)))return!0;return!1}function r_(s){for(const o of s)if(!zl(o.charCodeAt(0)))return!1;return!0}function Bp(s){const o=s.map(u=>{try{return new RegExp(`\\p{sc=${u}}`,"u").source}catch{return null}}).filter(u=>u);return new RegExp(o.join("|"),"u")}const i_=Bp(["Arab","Dupl","Mong","Ougr","Syrc"]);function zl(s){return!i_.test(String.fromCodePoint(s))}const Dg=Bp(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Fp(s){return!(s!==746&&s!==747&&(s<4352||!(sn["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||sn["CJK Compatibility"](s)||sn["CJK Strokes"](s)||!(!sn["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||sn["Enclosed CJK Letters and Months"](s)||sn["Ideographic Description Characters"](s)||sn.Kanbun(s)||sn.Katakana(s)&&s!==12540||!(!sn["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!sn["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||sn["Vertical Forms"](s)||sn["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Dg.test(String.fromCodePoint(s)))))}function $g(s){return!(Fp(s)||function(o){return!!(sn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||sn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||sn["Letterlike Symbols"](o)||sn["Number Forms"](o)||sn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||sn["Control Pictures"](o)&&o!==9251||sn["Optical Character Recognition"](o)||sn["Enclosed Alphanumerics"](o)||sn["Geometric Shapes"](o)||sn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||sn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||sn["CJK Symbols and Punctuation"](o)||sn.Katakana(o)||sn["Private Use Area"](o)||sn["CJK Compatibility Forms"](o)||sn["Small Form Variants"](o)||sn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(s))}const o_=Bp(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Np(s){return o_.test(String.fromCodePoint(s))}function a_(s,o){return!(!o&&Np(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||sn.Khmer(s))}function s_(s){for(const o of s)if(Np(o.charCodeAt(0)))return!0;return!1}const no=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Xn{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new $p,this.transition={})}isSupportedScript(o){return function(u,p){for(const g of u)if(!a_(g.charCodeAt(0),p))return!1;return!0}(o,no.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,u=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*u}}}class Dl{constructor(o,u){this.property=o,this.value=u,this.expression=function(p,g){if(td(p))return new Il(p,g);if(id(p)){const _=bp(p,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=p;return g.type==="color"&&typeof p=="string"?_=Rn.parse(p):g.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(_=xo.parse(p)):_=Qi.parse(p),{kind:"constant",evaluate:()=>_}}}(u===void 0?o.specification.default:u,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,p){return this.property.possiblyEvaluate(this,o,u,p)}}class fd{constructor(o){this.property=o,this.value=new Dl(o,void 0)}transitioned(o,u){return new Og(this.property,this.value,u,ae({},o.transition,this.transition),o.now)}untransitioned(){return new Og(this.property,this.value,null,{},0)}}class md{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ce(this._values[o].value.value)}setValue(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new fd(this._values[o].property)),this._values[o].value=new Dl(this._values[o].property,u===null?void 0:Ce(u))}getTransition(o){return Ce(this._values[o].transition)}setTransition(o,u){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new fd(this._values[o].property)),this._values[o].transition=Ce(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p);const g=this.getTransition(u);g!==void 0&&(o[`${u}-transition`]=g)}return o}transitioned(o,u){const p=new Wu(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].transitioned(o,u._values[g]);return p}untransitioned(){const o=new Wu(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class Og{constructor(o,u,p,g,_){this.property=o,this.value=u,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=p)}possiblyEvaluate(o,u,p){const g=o.now||0,_=this.value.possiblyEvaluate(o,u,p),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(o,u,p);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,u,p),_,function(E){if(E<=0)return 0;if(E>=1)return 1;const A=E*E,L=A*E;return 4*(E<.5?L:3*(E-A)+L-.75)}(S))}}return _}}class Wu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,p){const g=new Hu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,u,p);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class qu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Ce(this._values[o].value)}setValue(o,u){this._values[o]=new Dl(this._values[o].property,u===null?void 0:Ce(u))}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p)}return o}possiblyEvaluate(o,u,p){const g=new Hu(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,u,p);return g}}class pa{constructor(o,u,p){this.property=o,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,p,g){return this.property.evaluate(this.value,this.parameters,o,u,p,g)}}class Hu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class xt{constructor(o){this.specification=o}possiblyEvaluate(o,u){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(u)}interpolate(o,u,p){const g=Di[this.specification.type];return g?g(o,u,p):o}}class Rt{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,p,g){return new pa(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},p,g)}:o.expression,u)}interpolate(o,u,p){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new pa(this,{kind:"constant",value:void 0},o.parameters);const g=Di[this.specification.type];if(g){const _=g(o.value.value,u.value.value,p);return new pa(this,{kind:"constant",value:_},o.parameters)}return o}evaluate(o,u,p,g,_,x){return o.kind==="constant"?o.value:o.evaluate(u,p,g,_,x)}}class gd extends Rt{possiblyEvaluate(o,u,p,g){if(o.value===void 0)return new pa(this,{kind:"constant",value:void 0},u);if(o.expression.kind==="constant"){const _=o.expression.evaluate(u,null,{},p,g),x=o.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,u);return new pa(this,{kind:"constant",value:S},u)}if(o.expression.kind==="camera"){const _=this._calculate(o.expression.evaluate({zoom:u.zoom-1}),o.expression.evaluate({zoom:u.zoom}),o.expression.evaluate({zoom:u.zoom+1}),u);return new pa(this,{kind:"constant",value:_},u)}return new pa(this,o.expression,u)}evaluate(o,u,p,g,_,x){if(o.kind==="source"){const S=o.evaluate(u,p,g,_,x);return this._calculate(S,S,S,u)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(u.zoom)-1},p,g),o.evaluate({zoom:Math.floor(u.zoom)},p,g),o.evaluate({zoom:Math.floor(u.zoom)+1},p,g),u):o.value}_calculate(o,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}}interpolate(o){return o}}class yd{constructor(o){this.specification=o}possiblyEvaluate(o,u,p,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const _=o.expression.evaluate(u,null,{},p,g);return this._calculate(_,_,_,u)}return this._calculate(o.expression.evaluate(new Xn(Math.floor(u.zoom-1),u)),o.expression.evaluate(new Xn(Math.floor(u.zoom),u)),o.expression.evaluate(new Xn(Math.floor(u.zoom+1),u)),u)}}_calculate(o,u,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:u}:{from:p,to:u}}interpolate(o){return o}}class jp{constructor(o){this.specification=o}possiblyEvaluate(o,u,p,g){return!!o.expression.evaluate(u,null,{},p,g)}interpolate(){return!1}}class v{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const u in o){const p=o[u];p.specification.overridable&&this.overridableProperties.push(u);const g=this.defaultPropertyValues[u]=new Dl(p,void 0),_=this.defaultTransitionablePropertyValues[u]=new fd(p);this.defaultTransitioningPropertyValues[u]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=g.possiblyEvaluate({})}}}yt("DataDrivenProperty",Rt),yt("DataConstantProperty",xt),yt("CrossFadedDataDrivenProperty",gd),yt("CrossFadedProperty",yd),yt("ColorRampProperty",jp);const i="-transition";class d extends Dt{constructor(o,u){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),u.layout&&(this._unevaluatedLayout=new qu(u.layout)),u.paint)){this._transitionablePaint=new md(u.paint);for(const p in o.paint)this.setPaintProperty(p,o.paint[p],{validate:!1});for(const p in o.layout)this.setLayoutProperty(p,o.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hu(u.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u,p={}){u!=null&&this._validate(Rg,`layers.${this.id}.layout.${o}`,o,u,p)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,u):this.visibility=u)}getPaintProperty(o){return o.endsWith(i)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u,p={}){if(u!=null&&this._validate(Lg,`layers.${this.id}.paint.${o}`,o,u,p))return!1;if(o.endsWith(i))return this._transitionablePaint.setTransition(o.slice(0,-11),u||void 0),!1;{const g=this._transitionablePaint._values[o],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(o,u),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(o,S,E)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,u,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),K(o,(u,p)=>!(u===void 0||p==="layout"&&!Object.keys(u).length||p==="paint"&&!Object.keys(u).length))}_validate(o,u,p,g,_={}){return(!_||_.validate!==!1)&&zp(this,o.call(Ns,{key:u,layerType:this.type,objectKey:p,value:g,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof pa&&Sl(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}}const f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(s,o=1){let u=0,p=0;return{members:s.map(g=>{const _=f[g.type].BYTES_PER_ELEMENT,x=u=T(u,Math.max(o,_)),S=g.components||1;return p=Math.max(p,_),u+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:T(u,Math.max(p,o)),alignment:o}}function T(s,o){return Math.ceil(s/o)*o}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const g=2*o;return this.int16[g+0]=u,this.int16[g+1]=p,o}}M.prototype.bytesPerElement=4,yt("StructArrayLayout2i4",M);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,p)}emplace(o,u,p,g){const _=3*o;return this.int16[_+0]=u,this.int16[_+1]=p,this.int16[_+2]=g,o}}z.prototype.bytesPerElement=6,yt("StructArrayLayout3i6",z);class N extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,u,p,g)}emplace(o,u,p,g,_){const x=4*o;return this.int16[x+0]=u,this.int16[x+1]=p,this.int16[x+2]=g,this.int16[x+3]=_,o}}N.prototype.bytesPerElement=8,yt("StructArrayLayout4i8",N);class j extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,u,p,g,_,x)}emplace(o,u,p,g,_,x,S){const E=6*o;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,o}}j.prototype.bytesPerElement=12,yt("StructArrayLayout2i4i12",j);class X extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,u,p,g,_,x)}emplace(o,u,p,g,_,x,S){const E=4*o,A=8*o;return this.int16[E+0]=u,this.int16[E+1]=p,this.uint8[A+4]=g,this.uint8[A+5]=_,this.uint8[A+6]=x,this.uint8[A+7]=S,o}}X.prototype.bytesPerElement=8,yt("StructArrayLayout2i4ub8",X);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const g=2*o;return this.float32[g+0]=u,this.float32[g+1]=p,o}}ee.prototype.bytesPerElement=8,yt("StructArrayLayout2f8",ee);class ie extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x,S,E,A,L){const B=this.length;return this.resize(B+1),this.emplace(B,o,u,p,g,_,x,S,E,A,L)}emplace(o,u,p,g,_,x,S,E,A,L,B){const V=10*o;return this.uint16[V+0]=u,this.uint16[V+1]=p,this.uint16[V+2]=g,this.uint16[V+3]=_,this.uint16[V+4]=x,this.uint16[V+5]=S,this.uint16[V+6]=E,this.uint16[V+7]=A,this.uint16[V+8]=L,this.uint16[V+9]=B,o}}ie.prototype.bytesPerElement=20,yt("StructArrayLayout10ui20",ie);class he extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x,S,E,A,L,B,V){const H=this.length;return this.resize(H+1),this.emplace(H,o,u,p,g,_,x,S,E,A,L,B,V)}emplace(o,u,p,g,_,x,S,E,A,L,B,V,H){const Y=12*o;return this.int16[Y+0]=u,this.int16[Y+1]=p,this.int16[Y+2]=g,this.int16[Y+3]=_,this.uint16[Y+4]=x,this.uint16[Y+5]=S,this.uint16[Y+6]=E,this.uint16[Y+7]=A,this.int16[Y+8]=L,this.int16[Y+9]=B,this.int16[Y+10]=V,this.int16[Y+11]=H,o}}he.prototype.bytesPerElement=24,yt("StructArrayLayout4i4ui4i24",he);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,p)}emplace(o,u,p,g){const _=3*o;return this.float32[_+0]=u,this.float32[_+1]=p,this.float32[_+2]=g,o}}ge.prototype.bytesPerElement=12,yt("StructArrayLayout3f12",ge);class ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}ye.prototype.bytesPerElement=4,yt("StructArrayLayout1ul4",ye);class ve extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x,S,E,A){const L=this.length;return this.resize(L+1),this.emplace(L,o,u,p,g,_,x,S,E,A)}emplace(o,u,p,g,_,x,S,E,A,L){const B=10*o,V=5*o;return this.int16[B+0]=u,this.int16[B+1]=p,this.int16[B+2]=g,this.int16[B+3]=_,this.int16[B+4]=x,this.int16[B+5]=S,this.uint32[V+3]=E,this.uint16[B+8]=A,this.uint16[B+9]=L,o}}ve.prototype.bytesPerElement=20,yt("StructArrayLayout6i1ul2ui20",ve);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,u,p,g,_,x)}emplace(o,u,p,g,_,x,S){const E=6*o;return this.int16[E+0]=u,this.int16[E+1]=p,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,o}}ue.prototype.bytesPerElement=12,yt("StructArrayLayout2i2i2i12",ue);class be extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,o,u,p,g,_)}emplace(o,u,p,g,_,x){const S=4*o,E=8*o;return this.float32[S+0]=u,this.float32[S+1]=p,this.float32[S+2]=g,this.int16[E+6]=_,this.int16[E+7]=x,o}}be.prototype.bytesPerElement=16,yt("StructArrayLayout2f1f2i16",be);class Ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,u,p,g,_,x)}emplace(o,u,p,g,_,x,S){const E=16*o,A=4*o,L=8*o;return this.uint8[E+0]=u,this.uint8[E+1]=p,this.float32[A+1]=g,this.float32[A+2]=_,this.int16[L+6]=x,this.int16[L+7]=S,o}}Ee.prototype.bytesPerElement=16,yt("StructArrayLayout2ub2f2i16",Ee);class Me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,p)}emplace(o,u,p,g){const _=3*o;return this.uint16[_+0]=u,this.uint16[_+1]=p,this.uint16[_+2]=g,o}}Me.prototype.bytesPerElement=6,yt("StructArrayLayout3ui6",Me);class je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me){const Pe=this.length;return this.resize(Pe+1),this.emplace(Pe,o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me)}emplace(o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me,Pe){const xe=24*o,Te=12*o,ze=48*o;return this.int16[xe+0]=u,this.int16[xe+1]=p,this.uint16[xe+2]=g,this.uint16[xe+3]=_,this.uint32[Te+2]=x,this.uint32[Te+3]=S,this.uint32[Te+4]=E,this.uint16[xe+10]=A,this.uint16[xe+11]=L,this.uint16[xe+12]=B,this.float32[Te+7]=V,this.float32[Te+8]=H,this.uint8[ze+36]=Y,this.uint8[ze+37]=J,this.uint8[ze+38]=de,this.uint32[Te+10]=me,this.int16[xe+22]=Pe,o}}je.prototype.bytesPerElement=48,yt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",je);class Ze extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me,Pe,xe,Te,ze,He,dt,Lt,lt,rt,kt,vt){const mt=this.length;return this.resize(mt+1),this.emplace(mt,o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me,Pe,xe,Te,ze,He,dt,Lt,lt,rt,kt,vt)}emplace(o,u,p,g,_,x,S,E,A,L,B,V,H,Y,J,de,me,Pe,xe,Te,ze,He,dt,Lt,lt,rt,kt,vt,mt){const Be=32*o,Et=16*o;return this.int16[Be+0]=u,this.int16[Be+1]=p,this.int16[Be+2]=g,this.int16[Be+3]=_,this.int16[Be+4]=x,this.int16[Be+5]=S,this.int16[Be+6]=E,this.int16[Be+7]=A,this.uint16[Be+8]=L,this.uint16[Be+9]=B,this.uint16[Be+10]=V,this.uint16[Be+11]=H,this.uint16[Be+12]=Y,this.uint16[Be+13]=J,this.uint16[Be+14]=de,this.uint16[Be+15]=me,this.uint16[Be+16]=Pe,this.uint16[Be+17]=xe,this.uint16[Be+18]=Te,this.uint16[Be+19]=ze,this.uint16[Be+20]=He,this.uint16[Be+21]=dt,this.uint16[Be+22]=Lt,this.uint32[Et+12]=lt,this.float32[Et+13]=rt,this.float32[Et+14]=kt,this.uint16[Be+30]=vt,this.uint16[Be+31]=mt,o}}Ze.prototype.bytesPerElement=64,yt("StructArrayLayout8i15ui1ul2f2ui64",Ze);class it extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}it.prototype.bytesPerElement=4,yt("StructArrayLayout1f4",it);class pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,p)}emplace(o,u,p,g){const _=3*o;return this.uint16[6*o+0]=u,this.float32[_+1]=p,this.float32[_+2]=g,o}}pt.prototype.bytesPerElement=12,yt("StructArrayLayout1ui2f12",pt);class Qe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,u,p)}emplace(o,u,p,g){const _=4*o;return this.uint32[2*o+0]=u,this.uint16[_+2]=p,this.uint16[_+3]=g,o}}Qe.prototype.bytesPerElement=8,yt("StructArrayLayout1ul2ui8",Qe);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const g=2*o;return this.uint16[g+0]=u,this.uint16[g+1]=p,o}}Je.prototype.bytesPerElement=4,yt("StructArrayLayout2ui4",Je);class bt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}bt.prototype.bytesPerElement=2,yt("StructArrayLayout1ui2",bt);class Ut extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,u,p,g)}emplace(o,u,p,g,_){const x=4*o;return this.float32[x+0]=u,this.float32[x+1]=p,this.float32[x+2]=g,this.float32[x+3]=_,o}}Ut.prototype.bytesPerElement=16,yt("StructArrayLayout4f16",Ut);class nt extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}nt.prototype.size=20;class ut extends ve{get(o){return new nt(this,o)}}yt("CollisionBoxArray",ut);class Ft extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ft.prototype.size=48;class Yn extends je{get(o){return new Ft(this,o)}}yt("PlacedSymbolArray",Yn);class Ht extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ht.prototype.size=64;class nn extends Ze{get(o){return new Ht(this,o)}}yt("SymbolInstanceArray",nn);class Jn extends it{getoffsetX(o){return this.float32[1*o+0]}}yt("GlyphOffsetArray",Jn);class ci extends z{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}yt("SymbolLineVertexArray",ci);class Uo extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Uo.prototype.size=12;class Qn extends pt{get(o){return new Uo(this,o)}}yt("TextAnchorOffsetArray",Qn);class Oi extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Oi.prototype.size=8;class Ci extends Qe{get(o){return new Oi(this,o)}}yt("FeatureIndexArray",Ci);class di extends M{}class ki extends M{}class fa extends M{}class $l extends j{}class vd extends X{}class Ol extends ee{}class Co extends ie{}class _d extends he{}class Up extends ge{}class ko extends ye{}class Eo extends ue{}class ns extends Ee{}class Vo extends Me{}class ni extends Je{}const hi=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:ro}=hi;class ln{constructor(o=[]){this.segments=o}prepareSegment(o,u,p,g){let _=this.segments[this.segments.length-1];return o>ln.MAX_VERTEX_ARRAY_LENGTH&&De(`Max vertices per segment is ${ln.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!_||_.vertexLength+o>ln.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:u.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,p,g){return new ln([{vertexOffset:o,primitiveOffset:u,vertexLength:p,primitiveLength:g,vaos:{},sortKey:0}])}}function js(s,o){return 256*(s=te(Math.floor(s),0,255))+te(Math.floor(o),0,255)}ln.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,yt("SegmentVector",ln);const Bl=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Fl={exports:{}},Bg={exports:{}};Bg.exports=function(s,o){var u,p,g,_,x,S,E,A;for(p=s.length-(u=3&s.length),g=o,x=3432918353,S=461845907,A=0;A<p;)E=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,g=27492+(65535&(_=5*(65535&(g=(g^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(E=0,u){case 3:E^=(255&s.charCodeAt(A+2))<<16;case 2:E^=(255&s.charCodeAt(A+1))<<8;case 1:g^=E=(65535&(E=(E=(65535&(E^=255&s.charCodeAt(A)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var l_=Bg.exports,Fg={exports:{}};Fg.exports=function(s,o){for(var u,p=s.length,g=o^p,_=0;p>=4;)u=1540483477*(65535&(u=255&s.charCodeAt(_)|(255&s.charCodeAt(++_))<<8|(255&s.charCodeAt(++_))<<16|(255&s.charCodeAt(++_))<<24))+((1540483477*(u>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(u=1540483477*(65535&(u^=u>>>24))+((1540483477*(u>>>16)&65535)<<16)),p-=4,++_;switch(p){case 3:g^=(255&s.charCodeAt(_+2))<<16;case 2:g^=(255&s.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var rs=l_,Ng=Fg.exports;Fl.exports=rs,Fl.exports.murmur3=rs,Fl.exports.murmur2=Ng;var xd=b(Fl.exports);class Gu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,u,p,g){this.ids.push(bd(o)),this.positions.push(u,p,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const u=bd(o);let p=0,g=this.ids.length-1;for(;p<g;){const x=p+g>>1;this.ids[x]>=u?g=x:p=x+1}const _=[];for(;this.ids[p]===u;)_.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return _}static serialize(o,u){const p=new Float64Array(o.ids),g=new Uint32Array(o.positions);return wd(p,g,0,p.length-1),u&&u.push(p.buffer,g.buffer),{ids:p,positions:g}}static deserialize(o){const u=new Gu;return u.ids=o.ids,u.positions=o.positions,u.indexed=!0,u}}function bd(s){const o=+s;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:xd(String(s))}function wd(s,o,u,p){for(;u<p;){const g=s[u+p>>1];let _=u-1,x=p+1;for(;;){do _++;while(s[_]<g);do x--;while(s[x]>g);if(_>=x)break;Nl(s,_,x),Nl(o,3*_,3*x),Nl(o,3*_+1,3*x+1),Nl(o,3*_+2,3*x+2)}x-u<p-x?(wd(s,o,u,x),u=x+1):(wd(s,o,x+1,p),p=x)}}function Nl(s,o,u){const p=s[o];s[o]=s[u],s[u]=p}yt("FeaturePositionMap",Gu);class Zu{constructor(o,u){this.gl=o.gl,this.location=u}}class jg extends Zu{constructor(o,u){super(o,u),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class IS extends Zu{constructor(o,u){super(o,u),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class PS extends Zu{constructor(o,u){super(o,u),this.current=Rn.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const G4=new Float32Array(16);function u_(s){return[js(255*s.r,255*s.g),js(255*s.b,255*s.a)]}class Vp{constructor(o,u,p){this.value=o,this.uniformNames=u.map(g=>`u_${g}`),this.type=p}setUniform(o,u,p){o.set(p.constantOr(this.value))}getBinding(o,u,p){return this.type==="color"?new PS(o,u):new jg(o,u)}}class Sd{constructor(o,u){this.uniformNames=u.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=o.tlbr}setUniform(o,u,p,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&o.set(_)}getBinding(o,u,p){return p.substr(0,9)==="u_pattern"?new IS(o,u):new jg(o,u)}}class Us{constructor(o,u,p,g){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(_=>({name:`a_${_}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,u,p,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Xn(0),u,{},g,[],_);this.paintVertexArray.resize(o),this._setPaintValue(x,o,S)}updatePaintArray(o,u,p,g){const _=this.expression.evaluate({zoom:0},p,g);this._setPaintValue(o,u,_)}_setPaintValue(o,u,p){if(this.type==="color"){const g=u_(p);for(let _=o;_<u;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=o;g<u;g++)this.paintVertexArray.emplace(g,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Oa{constructor(o,u,p,g,_,x){this.expression=o,this.uniformNames=u.map(S=>`u_${S}_t`),this.type=p,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=u.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,u,p,g,_){const x=this.expression.evaluate(new Xn(this.zoom),u,{},g,[],_),S=this.expression.evaluate(new Xn(this.zoom+1),u,{},g,[],_),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,x,S)}updatePaintArray(o,u,p,g){const _=this.expression.evaluate({zoom:this.zoom},p,g),x=this.expression.evaluate({zoom:this.zoom+1},p,g);this._setPaintValue(o,u,_,x)}_setPaintValue(o,u,p,g){if(this.type==="color"){const _=u_(p),x=u_(g);for(let S=o;S<u;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=o;_<u;_++)this.paintVertexArray.emplace(_,p,g);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u){const p=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,g=te(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,u,p){return new jg(o,u)}}class jl{constructor(o,u,p,g,_,x){this.expression=o,this.type=u,this.useIntegerZoom=p,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(o,u,p){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(o,u,p,g,_){this._setPaintValues(o,u,p.patterns&&p.patterns[this.layerId],_)}_setPaintValues(o,u,p,g){if(!g||!p)return;const{min:_,mid:x,max:S}=p,E=g[_],A=g[x],L=g[S];if(E&&A&&L)for(let B=o;B<u;B++)this.zoomInPaintVertexArray.emplace(B,A.tl[0],A.tl[1],A.br[0],A.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],A.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,Bl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,Bl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class MS{constructor(o,u,p){this.binders={},this._buffers=[];const g=[];for(const _ in o.paint._values){if(!p(_))continue;const x=o.paint.get(_);if(!(x instanceof pa&&Sl(x.property.specification)))continue;const S=Z4(_,o.type),E=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,B=x.property.specification["property-type"],V=B==="cross-faded"||B==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=V?new Sd(E.value,S):new Vp(E.value,S,A),g.push(`/u_${_}`);else if(E.kind==="source"||V){const H=AS(_,A,"source");this.binders[_]=V?new jl(E,A,L,u,H,o.id):new Us(E,S,A,H),g.push(`/a_${_}`)}else{const H=AS(_,A,"composite");this.binders[_]=new Oa(E,S,A,L,u,H),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof Us||u instanceof Oa?u.maxValue:0}populatePaintArrays(o,u,p,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof Us||S instanceof Oa||S instanceof jl)&&S.populatePaintArray(o,u,p,g,_)}}setConstantPatternPositions(o,u){for(const p in this.binders){const g=this.binders[p];g instanceof Sd&&g.setConstantPatternPositions(o,u)}}updatePaintArrays(o,u,p,g,_){let x=!1;for(const S in o){const E=u.getPositions(S);for(const A of E){const L=p.feature(A.index);for(const B in this.binders){const V=this.binders[B];if((V instanceof Us||V instanceof Oa||V instanceof jl)&&V.expression.isStateDependent===!0){const H=g.paint.get(B);V.expression=H.value,V.updatePaintArray(A.start,A.end,L,o[S],_),x=!0}}}}return x}defines(){const o=[];for(const u in this.binders){const p=this.binders[u];(p instanceof Vp||p instanceof Sd)&&o.push(...p.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Us||p instanceof Oa)for(let g=0;g<p.paintVertexAttributes.length;g++)o.push(p.paintVertexAttributes[g].name);else if(p instanceof jl)for(let g=0;g<Bl.members.length;g++)o.push(Bl.members[g].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof Vp||p instanceof Sd||p instanceof Oa)for(const g of p.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,u){const p=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Vp||_ instanceof Sd||_ instanceof Oa){for(const x of _.uniformNames)if(u[x]){const S=_.getBinding(o,u[x],x);p.push({name:x,property:g,binding:S})}}}return p}setUniforms(o,u,p,g){for(const{name:_,property:x,binding:S}of u)this.binders[x].setUniform(S,g,p.get(x),_)}updatePaintBuffers(o){this._buffers=[];for(const u in this.binders){const p=this.binders[u];if(o&&p instanceof jl){const g=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(p instanceof Us||p instanceof Oa)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(o){for(const u in this.binders){const p=this.binders[u];(p instanceof Us||p instanceof Oa||p instanceof jl)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof Us||u instanceof Oa||u instanceof jl)&&u.destroy()}}}class Ku{constructor(o,u,p=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new MS(g,u,p);this.needsUpload=!1,this._featureMap=new Gu,this._bufferOffset=0}populatePaintArrays(o,u,p,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,u,g,_,x);u.id!==void 0&&this._featureMap.add(u.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,p,g){for(const _ of p)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(o,this._featureMap,u,_,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function Z4(s,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${o}-`,"").replace(/-/g,"_")]}function AS(s,o,u){const p={color:{source:ee,composite:Ut},number:{source:it,composite:ee}},g=function(_){return{"line-pattern":{source:Co,composite:Co},"fill-pattern":{source:Co,composite:Co},"fill-extrusion-pattern":{source:Co,composite:Co}}[_]}(s);return g&&g[u]||p[o][u]}yt("ConstantBinder",Vp),yt("CrossFadedConstantBinder",Sd),yt("SourceExpressionBinder",Us),yt("CrossFadedCompositeBinder",jl),yt("CompositeExpressionBinder",Oa),yt("ProgramConfiguration",MS,{omit:["_buffers"]}),yt("ProgramConfigurationSet",Ku);const Or=8192,c_=Math.pow(2,14)-1,LS=-c_-1;function Xu(s){const o=Or/s.extent,u=s.loadGeometry();for(let p=0;p<u.length;p++){const g=u[p];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*o),E=Math.round(x.y*o);x.x=te(S,LS,c_),x.y=te(E,LS,c_),(S<x.x||S>x.x+1||E<x.y||E>x.y+1)&&De("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return u}function Yu(s,o){return{type:s.type,id:s.id,properties:s.properties,geometry:o?Xu(s):[]}}function Ug(s,o,u,p,g){s.emplaceBack(2*o+(p+1)/2,2*u+(g+1)/2)}class d_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new ki,this.indexArray=new Vo,this.segments=new ln,this.programConfigurations=new Ku(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){const g=this.layers[0],_=[];let x=null,S=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:E,id:A,index:L,sourceLayerIndex:B}of o){const V=this.layers[0]._featureFilter.needGeometry,H=Yu(E,V);if(!this.layers[0]._featureFilter.filter(new Xn(this.zoom),H,p))continue;const Y=S?x.evaluate(H,{},p):void 0,J={id:A,properties:E.properties,type:E.type,sourceLayerIndex:B,index:L,geometry:V?H.geometry:Xu(E),patterns:{},sortKey:Y};_.push(J)}S&&_.sort((E,A)=>E.sortKey-A.sortKey);for(const E of _){const{geometry:A,index:L,sourceLayerIndex:B}=E,V=o[L].feature;this.addFeature(E,A,L,p),u.featureIndex.insert(V,A,L,B,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,ro),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,p,g){for(const _ of u)for(const x of _){const S=x.x,E=x.y;if(S<0||S>=Or||E<0||E>=Or)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),L=A.vertexLength;Ug(this.layoutVertexArray,S,E,-1,-1),Ug(this.layoutVertexArray,S,E,1,-1),Ug(this.layoutVertexArray,S,E,1,1),Ug(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},g)}}function RS(s,o){for(let u=0;u<s.length;u++)if(Cd(o,s[u]))return!0;for(let u=0;u<o.length;u++)if(Cd(s,o[u]))return!0;return!!h_(s,o)}function K4(s,o,u){return!!Cd(s,o)||!!p_(o,s,u)}function zS(s,o){if(s.length===1)return $S(o,s[0]);for(let u=0;u<o.length;u++){const p=o[u];for(let g=0;g<p.length;g++)if(Cd(s,p[g]))return!0}for(let u=0;u<s.length;u++)if($S(o,s[u]))return!0;for(let u=0;u<o.length;u++)if(h_(s,o[u]))return!0;return!1}function X4(s,o,u){if(s.length>1){if(h_(s,o))return!0;for(let p=0;p<o.length;p++)if(p_(o[p],s,u))return!0}for(let p=0;p<s.length;p++)if(p_(s[p],o,u))return!0;return!1}function h_(s,o){if(s.length===0||o.length===0)return!1;for(let u=0;u<s.length-1;u++){const p=s[u],g=s[u+1];for(let _=0;_<o.length-1;_++)if(Y4(p,g,o[_],o[_+1]))return!0}return!1}function Y4(s,o,u,p){return Ae(s,u,p)!==Ae(o,u,p)&&Ae(s,o,u)!==Ae(s,o,p)}function p_(s,o,u){const p=u*u;if(o.length===1)return s.distSqr(o[0])<p;for(let g=1;g<o.length;g++)if(DS(s,o[g-1],o[g])<p)return!0;return!1}function DS(s,o,u){const p=o.distSqr(u);if(p===0)return s.distSqr(o);const g=((s.x-o.x)*(u.x-o.x)+(s.y-o.y)*(u.y-o.y))/p;return s.distSqr(g<0?o:g>1?u:u.sub(o)._mult(g)._add(o))}function $S(s,o){let u,p,g,_=!1;for(let x=0;x<s.length;x++){u=s[x];for(let S=0,E=u.length-1;S<u.length;E=S++)p=u[S],g=u[E],p.y>o.y!=g.y>o.y&&o.x<(g.x-p.x)*(o.y-p.y)/(g.y-p.y)+p.x&&(_=!_)}return _}function Cd(s,o){let u=!1;for(let p=0,g=s.length-1;p<s.length;g=p++){const _=s[p],x=s[g];_.y>o.y!=x.y>o.y&&o.x<(x.x-_.x)*(o.y-_.y)/(x.y-_.y)+_.x&&(u=!u)}return u}function J4(s,o,u){const p=u[0],g=u[2];if(s.x<p.x&&o.x<p.x||s.x>g.x&&o.x>g.x||s.y<p.y&&o.y<p.y||s.y>g.y&&o.y>g.y)return!1;const _=Ae(s,o,u[0]);return _!==Ae(s,o,u[1])||_!==Ae(s,o,u[2])||_!==Ae(s,o,u[3])}function Wp(s,o,u){const p=o.paint.get(s).value;return p.kind==="constant"?p.value:u.programConfigurations.get(o.id).getMaxValue(s)}function Vg(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Wg(s,o,u,p,g){if(!o[0]&&!o[1])return s;const _=k.convert(o)._mult(g);u==="viewport"&&_._rotate(-p);const x=[];for(let S=0;S<s.length;S++)x.push(s[S].sub(_));return x}let OS,BS;yt("CircleBucket",d_,{omit:["layers"]});var Q4={get paint(){return BS=BS||new v({"circle-radius":new Rt(Se.paint_circle["circle-radius"]),"circle-color":new Rt(Se.paint_circle["circle-color"]),"circle-blur":new Rt(Se.paint_circle["circle-blur"]),"circle-opacity":new Rt(Se.paint_circle["circle-opacity"]),"circle-translate":new xt(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new xt(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new xt(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new xt(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Rt(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Rt(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Rt(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return OS=OS||new v({"circle-sort-key":new Rt(Se.layout_circle["circle-sort-key"])})}},Bi=1e-6,kd=typeof Float32Array<"u"?Float32Array:Array;function f_(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function FS(s,o,u){var p=o[0],g=o[1],_=o[2],x=o[3],S=o[4],E=o[5],A=o[6],L=o[7],B=o[8],V=o[9],H=o[10],Y=o[11],J=o[12],de=o[13],me=o[14],Pe=o[15],xe=u[0],Te=u[1],ze=u[2],He=u[3];return s[0]=xe*p+Te*S+ze*B+He*J,s[1]=xe*g+Te*E+ze*V+He*de,s[2]=xe*_+Te*A+ze*H+He*me,s[3]=xe*x+Te*L+ze*Y+He*Pe,s[4]=(xe=u[4])*p+(Te=u[5])*S+(ze=u[6])*B+(He=u[7])*J,s[5]=xe*g+Te*E+ze*V+He*de,s[6]=xe*_+Te*A+ze*H+He*me,s[7]=xe*x+Te*L+ze*Y+He*Pe,s[8]=(xe=u[8])*p+(Te=u[9])*S+(ze=u[10])*B+(He=u[11])*J,s[9]=xe*g+Te*E+ze*V+He*de,s[10]=xe*_+Te*A+ze*H+He*me,s[11]=xe*x+Te*L+ze*Y+He*Pe,s[12]=(xe=u[12])*p+(Te=u[13])*S+(ze=u[14])*B+(He=u[15])*J,s[13]=xe*g+Te*E+ze*V+He*de,s[14]=xe*_+Te*A+ze*H+He*me,s[15]=xe*x+Te*L+ze*Y+He*Pe,s}Math.hypot||(Math.hypot=function(){for(var s=0,o=arguments.length;o--;)s+=arguments[o]*arguments[o];return Math.sqrt(s)});var qp,eL=FS;function qg(s,o,u){var p=o[0],g=o[1],_=o[2],x=o[3];return s[0]=u[0]*p+u[4]*g+u[8]*_+u[12]*x,s[1]=u[1]*p+u[5]*g+u[9]*_+u[13]*x,s[2]=u[2]*p+u[6]*g+u[10]*_+u[14]*x,s[3]=u[3]*p+u[7]*g+u[11]*_+u[15]*x,s}qp=new kd(4),kd!=Float32Array&&(qp[0]=0,qp[1]=0,qp[2]=0,qp[3]=0);class tL extends d{constructor(o){super(o,Q4)}createBucket(o){return new d_(o)}queryRadius(o){const u=o;return Wp("circle-radius",this,u)+Wp("circle-stroke-width",this,u)+Vg(this.paint.get("circle-translate"))}queryIntersectsFeature(o,u,p,g,_,x,S,E){const A=Wg(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),L=this.paint.get("circle-radius").evaluate(u,p)+this.paint.get("circle-stroke-width").evaluate(u,p),B=this.paint.get("circle-pitch-alignment")==="map",V=B?A:function(Y,J){return Y.map(de=>NS(de,J))}(A,E),H=B?L*S:L;for(const Y of g)for(const J of Y){const de=B?J:NS(J,E);let me=H;const Pe=qg([],[J.x,J.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?me*=Pe[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(me*=x.cameraToCenterDistance/Pe[3]),K4(V,de,me))return!0}return!1}}function NS(s,o){const u=qg([],[s.x,s.y,0,1],o);return new k(u[0]/u[3],u[1]/u[3])}class jS extends d_{}let US;yt("HeatmapBucket",jS,{omit:["layers"]});var nL={get paint(){return US=US||new v({"heatmap-radius":new Rt(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Rt(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new xt(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new jp(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new xt(Se.paint_heatmap["heatmap-opacity"])})}};function m_(s,{width:o,height:u},p,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*u*p)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*u*p}`)}else g=new Uint8Array(o*u*p);return s.width=o,s.height=u,s.data=g,s}function VS(s,{width:o,height:u},p){if(o===s.width&&u===s.height)return;const g=m_({},{width:o,height:u},p);g_(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,o),height:Math.min(s.height,u)},p),s.width=o,s.height=u,s.data=g.data}function g_(s,o,u,p,g,_){if(g.width===0||g.height===0)return o;if(g.width>s.width||g.height>s.height||u.x>s.width-g.width||u.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||p.x>o.width-g.width||p.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,S=o.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const A=((u.y+E)*s.width+u.x)*_,L=((p.y+E)*o.width+p.x)*_;for(let B=0;B<g.width*_;B++)S[L+B]=x[A+B]}return o}class Hp{constructor(o,u){m_(this,o,1,u)}resize(o){VS(this,o,1)}clone(){return new Hp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,g,_){g_(o,u,p,g,_,1)}}class Wo{constructor(o,u){m_(this,o,4,u)}resize(o){VS(this,o,4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Wo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,g,_){g_(o,u,p,g,_,4)}}function WS(s){const o={},u=s.resolution||256,p=s.clips?s.clips.length:1,g=s.image||new Wo({width:u,height:p});if(Math.log(u)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${u}`);const _=(x,S,E)=>{o[s.evaluationKey]=E;const A=s.expression.evaluate(o);g.data[x+S+0]=Math.floor(255*A.r/A.a),g.data[x+S+1]=Math.floor(255*A.g/A.a),g.data[x+S+2]=Math.floor(255*A.b/A.a),g.data[x+S+3]=Math.floor(255*A.a)};if(s.clips)for(let x=0,S=0;x<p;++x,S+=4*u)for(let E=0,A=0;E<u;E++,A+=4){const L=E/(u-1),{start:B,end:V}=s.clips[x];_(S,A,B*(1-L)+V*L)}else for(let x=0,S=0;x<u;x++,S+=4)_(0,S,x/(u-1));return g}yt("AlphaImage",Hp),yt("RGBAImage",Wo);const y_="big-fb";class rL extends d{createBucket(o){return new jS(o)}constructor(o){super(o,nL),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=WS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(y_)&&this.heatmapFbos.delete(y_)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let qS;var iL={get paint(){return qS=qS||new v({"hillshade-illumination-direction":new xt(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new xt(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new xt(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new xt(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new xt(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new xt(Se.paint_hillshade["hillshade-accent-color"])})}};class oL extends d{constructor(o){super(o,iL)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const aL=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:sL}=aL;function HS(s,o,u=2){const p=o&&o.length,g=p?o[0]*u:s.length;let _=GS(s,0,g,u,!0);const x=[];if(!_||_.next===_.prev)return x;let S,E,A;if(p&&(_=function(L,B,V,H){const Y=[];for(let J=0,de=B.length;J<de;J++){const me=GS(L,B[J]*H,J<de-1?B[J+1]*H:L.length,H,!1);me===me.next&&(me.steiner=!0),Y.push(mL(me))}Y.sort(hL);for(let J=0;J<Y.length;J++)V=pL(Y[J],V);return V}(s,o,_,u)),s.length>80*u){S=1/0,E=1/0;let L=-1/0,B=-1/0;for(let V=u;V<g;V+=u){const H=s[V],Y=s[V+1];H<S&&(S=H),Y<E&&(E=Y),H>L&&(L=H),Y>B&&(B=Y)}A=Math.max(L-S,B-E),A=A!==0?32767/A:0}return Gp(_,x,u,S,E,A,0),x}function GS(s,o,u,p,g){let _;if(g===function(x,S,E,A){let L=0;for(let B=S,V=E-A;B<E;B+=A)L+=(x[V]-x[B])*(x[B+1]+x[V+1]),V=B;return L}(s,o,u,p)>0)for(let x=o;x<u;x+=p)_=XS(x/p|0,s[x],s[x+1],_);else for(let x=u-p;x>=o;x-=p)_=XS(x/p|0,s[x],s[x+1],_);return _&&Hg(_,_.next)&&(Kp(_),_=_.next),_}function Ju(s,o){if(!s)return s;o||(o=s);let u,p=s;do if(u=!1,p.steiner||!Hg(p,p.next)&&Ir(p.prev,p,p.next)!==0)p=p.next;else{if(Kp(p),p=o=p.prev,p===p.next)break;u=!0}while(u||p!==o);return o}function Gp(s,o,u,p,g,_,x){if(!s)return;!x&&_&&function(E,A,L,B){let V=E;do V.z===0&&(V.z=v_(V.x,V.y,A,L,B)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next;while(V!==E);V.prevZ.nextZ=null,V.prevZ=null,function(H){let Y,J=1;do{let de,me=H;H=null;let Pe=null;for(Y=0;me;){Y++;let xe=me,Te=0;for(let He=0;He<J&&(Te++,xe=xe.nextZ,xe);He++);let ze=J;for(;Te>0||ze>0&&xe;)Te!==0&&(ze===0||!xe||me.z<=xe.z)?(de=me,me=me.nextZ,Te--):(de=xe,xe=xe.nextZ,ze--),Pe?Pe.nextZ=de:H=de,de.prevZ=Pe,Pe=de;me=xe}Pe.nextZ=null,J*=2}while(Y>1)}(V)}(s,p,g,_);let S=s;for(;s.prev!==s.next;){const E=s.prev,A=s.next;if(_?uL(s,p,g,_):lL(s))o.push(E.i,s.i,A.i),Kp(s),s=A.next,S=A.next;else if((s=A)===S){x?x===1?Gp(s=cL(Ju(s),o),o,u,p,g,_,2):x===2&&dL(s,o,u,p,g,_):Gp(Ju(s),o,u,p,g,_,1);break}}}function lL(s){const o=s.prev,u=s,p=s.next;if(Ir(o,u,p)>=0)return!1;const g=o.x,_=u.x,x=p.x,S=o.y,E=u.y,A=p.y,L=g<_?g<x?g:x:_<x?_:x,B=S<E?S<A?S:A:E<A?E:A,V=g>_?g>x?g:x:_>x?_:x,H=S>E?S>A?S:A:E>A?E:A;let Y=p.next;for(;Y!==o;){if(Y.x>=L&&Y.x<=V&&Y.y>=B&&Y.y<=H&&Ed(g,S,_,E,x,A,Y.x,Y.y)&&Ir(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function uL(s,o,u,p){const g=s.prev,_=s,x=s.next;if(Ir(g,_,x)>=0)return!1;const S=g.x,E=_.x,A=x.x,L=g.y,B=_.y,V=x.y,H=S<E?S<A?S:A:E<A?E:A,Y=L<B?L<V?L:V:B<V?B:V,J=S>E?S>A?S:A:E>A?E:A,de=L>B?L>V?L:V:B>V?B:V,me=v_(H,Y,o,u,p),Pe=v_(J,de,o,u,p);let xe=s.prevZ,Te=s.nextZ;for(;xe&&xe.z>=me&&Te&&Te.z<=Pe;){if(xe.x>=H&&xe.x<=J&&xe.y>=Y&&xe.y<=de&&xe!==g&&xe!==x&&Ed(S,L,E,B,A,V,xe.x,xe.y)&&Ir(xe.prev,xe,xe.next)>=0||(xe=xe.prevZ,Te.x>=H&&Te.x<=J&&Te.y>=Y&&Te.y<=de&&Te!==g&&Te!==x&&Ed(S,L,E,B,A,V,Te.x,Te.y)&&Ir(Te.prev,Te,Te.next)>=0))return!1;Te=Te.nextZ}for(;xe&&xe.z>=me;){if(xe.x>=H&&xe.x<=J&&xe.y>=Y&&xe.y<=de&&xe!==g&&xe!==x&&Ed(S,L,E,B,A,V,xe.x,xe.y)&&Ir(xe.prev,xe,xe.next)>=0)return!1;xe=xe.prevZ}for(;Te&&Te.z<=Pe;){if(Te.x>=H&&Te.x<=J&&Te.y>=Y&&Te.y<=de&&Te!==g&&Te!==x&&Ed(S,L,E,B,A,V,Te.x,Te.y)&&Ir(Te.prev,Te,Te.next)>=0)return!1;Te=Te.nextZ}return!0}function cL(s,o){let u=s;do{const p=u.prev,g=u.next.next;!Hg(p,g)&&ZS(p,u,u.next,g)&&Zp(p,g)&&Zp(g,p)&&(o.push(p.i,u.i,g.i),Kp(u),Kp(u.next),u=s=g),u=u.next}while(u!==s);return Ju(u)}function dL(s,o,u,p,g,_){let x=s;do{let S=x.next.next;for(;S!==x.prev;){if(x.i!==S.i&&gL(x,S)){let E=KS(x,S);return x=Ju(x,x.next),E=Ju(E,E.next),Gp(x,o,u,p,g,_,0),void Gp(E,o,u,p,g,_,0)}S=S.next}x=x.next}while(x!==s)}function hL(s,o){return s.x-o.x}function pL(s,o){const u=function(g,_){let x=_;const S=g.x,E=g.y;let A,L=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const J=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(J<=S&&J>L&&(L=J,A=x.x<x.next.x?x:x.next,J===S))return A}x=x.next}while(x!==_);if(!A)return null;const B=A,V=A.x,H=A.y;let Y=1/0;x=A;do{if(S>=x.x&&x.x>=V&&S!==x.x&&Ed(E<H?S:L,E,V,H,E<H?L:S,E,x.x,x.y)){const J=Math.abs(E-x.y)/(S-x.x);Zp(x,g)&&(J<Y||J===Y&&(x.x>A.x||x.x===A.x&&fL(A,x)))&&(A=x,Y=J)}x=x.next}while(x!==B);return A}(s,o);if(!u)return o;const p=KS(u,s);return Ju(p,p.next),Ju(u,u.next)}function fL(s,o){return Ir(s.prev,s,o.prev)<0&&Ir(o.next,s,s.next)<0}function v_(s,o,u,p,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-u)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function mL(s){let o=s,u=s;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==s);return u}function Ed(s,o,u,p,g,_,x,S){return(g-x)*(o-S)>=(s-x)*(_-S)&&(s-x)*(p-S)>=(u-x)*(o-S)&&(u-x)*(_-S)>=(g-x)*(p-S)}function gL(s,o){return s.next.i!==o.i&&s.prev.i!==o.i&&!function(u,p){let g=u;do{if(g.i!==u.i&&g.next.i!==u.i&&g.i!==p.i&&g.next.i!==p.i&&ZS(g,g.next,u,p))return!0;g=g.next}while(g!==u);return!1}(s,o)&&(Zp(s,o)&&Zp(o,s)&&function(u,p){let g=u,_=!1;const x=(u.x+p.x)/2,S=(u.y+p.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==u);return _}(s,o)&&(Ir(s.prev,s,o.prev)||Ir(s,o.prev,o))||Hg(s,o)&&Ir(s.prev,s,s.next)>0&&Ir(o.prev,o,o.next)>0)}function Ir(s,o,u){return(o.y-s.y)*(u.x-o.x)-(o.x-s.x)*(u.y-o.y)}function Hg(s,o){return s.x===o.x&&s.y===o.y}function ZS(s,o,u,p){const g=Zg(Ir(s,o,u)),_=Zg(Ir(s,o,p)),x=Zg(Ir(u,p,s)),S=Zg(Ir(u,p,o));return g!==_&&x!==S||!(g!==0||!Gg(s,u,o))||!(_!==0||!Gg(s,p,o))||!(x!==0||!Gg(u,s,p))||!(S!==0||!Gg(u,o,p))}function Gg(s,o,u){return o.x<=Math.max(s.x,u.x)&&o.x>=Math.min(s.x,u.x)&&o.y<=Math.max(s.y,u.y)&&o.y>=Math.min(s.y,u.y)}function Zg(s){return s>0?1:s<0?-1:0}function Zp(s,o){return Ir(s.prev,s,s.next)<0?Ir(s,o,s.next)>=0&&Ir(s,s.prev,o)>=0:Ir(s,o,s.prev)<0||Ir(s,s.next,o)<0}function KS(s,o){const u=__(s.i,s.x,s.y),p=__(o.i,o.x,o.y),g=s.next,_=o.prev;return s.next=o,o.prev=s,u.next=g,g.prev=u,p.next=u,u.prev=p,_.next=p,p.prev=_,p}function XS(s,o,u,p){const g=__(s,o,u);return p?(g.next=p.next,g.prev=p,p.next.prev=g,p.next=g):(g.prev=g,g.next=g),g}function Kp(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function __(s,o,u){return{i:s,x:o,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function x_(s,o,u){const p=u.patternDependencies;let g=!1;for(const _ of o){const x=_.paint.get(`${s}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,p[S.to]=!0,p[S.from]=!0)}return g}function b_(s,o,u,p,g){const _=g.patternDependencies;for(const x of o){const S=x.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let E=S.evaluate({zoom:p-1},u,{},g.availableImages),A=S.evaluate({zoom:p},u,{},g.availableImages),L=S.evaluate({zoom:p+1},u,{},g.availableImages);E=E&&E.name?E.name:E,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,_[E]=!0,_[A]=!0,_[L]=!0,u.patterns[x.id]={min:E,mid:A,max:L}}}return u}class w_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fa,this.indexArray=new Vo,this.indexArray2=new ni,this.programConfigurations=new Ku(o.layers,o.zoom),this.segments=new ln,this.segments2=new ln,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.hasPattern=x_("fill",this.layers,u);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:E,index:A,sourceLayerIndex:L}of o){const B=this.layers[0]._featureFilter.needGeometry,V=Yu(S,B);if(!this.layers[0]._featureFilter.filter(new Xn(this.zoom),V,p))continue;const H=_?g.evaluate(V,{},p,u.availableImages):void 0,Y={id:E,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:B?V.geometry:Xu(S),patterns:{},sortKey:H};x.push(Y)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const B=b_("fill",this.layers,S,this.zoom,u);this.patternFeatures.push(B)}else this.addFeature(S,E,A,p,{});u.featureIndex.insert(o[A].feature,E,A,L,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}addFeatures(o,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,sL),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,p,g,_){for(const x of Xc(u,500)){let S=0;for(const H of x)S+=H.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=E.vertexLength,L=[],B=[];for(const H of x){if(H.length===0)continue;H!==x[0]&&B.push(L.length/2);const Y=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),J=Y.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(J+H.length-1,J),L.push(H[0].x),L.push(H[0].y);for(let de=1;de<H.length;de++)this.layoutVertexArray.emplaceBack(H[de].x,H[de].y),this.indexArray2.emplaceBack(J+de-1,J+de),L.push(H[de].x),L.push(H[de].y);Y.vertexLength+=H.length,Y.primitiveLength+=H.length}const V=HS(L,B);for(let H=0;H<V.length;H+=3)this.indexArray.emplaceBack(A+V[H],A+V[H+1],A+V[H+2]);E.vertexLength+=S,E.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}}let YS,JS;yt("FillBucket",w_,{omit:["layers","patternFeatures"]});var yL={get paint(){return JS=JS||new v({"fill-antialias":new xt(Se.paint_fill["fill-antialias"]),"fill-opacity":new Rt(Se.paint_fill["fill-opacity"]),"fill-color":new Rt(Se.paint_fill["fill-color"]),"fill-outline-color":new Rt(Se.paint_fill["fill-outline-color"]),"fill-translate":new xt(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new xt(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new gd(Se.paint_fill["fill-pattern"])})},get layout(){return YS=YS||new v({"fill-sort-key":new Rt(Se.layout_fill["fill-sort-key"])})}};class vL extends d{constructor(o){super(o,yL)}recalculate(o,u){super.recalculate(o,u);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new w_(o)}queryRadius(){return Vg(this.paint.get("fill-translate"))}queryIntersectsFeature(o,u,p,g,_,x,S){return zS(Wg(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),g)}isTileClipped(){return!0}}const _L=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xL=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:bL}=_L;var Ul={},wL=w,QS=Td;function Td(s,o,u,p,g){this.properties={},this.extent=u,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=g,s.readFields(SL,this,o)}function SL(s,o,u){s==1?o.id=u.readVarint():s==2?function(p,g){for(var _=p.readVarint()+p.pos;p.pos<_;){var x=g._keys[p.readVarint()],S=g._values[p.readVarint()];g.properties[x]=S}}(u,o):s==3?o.type=u.readVarint():s==4&&(o._geometry=u.pos)}function CL(s){for(var o,u,p=0,g=0,_=s.length,x=_-1;g<_;x=g++)p+=((u=s[x]).x-(o=s[g]).x)*(o.y+u.y);return p}Td.types=["Unknown","Point","LineString","Polygon"],Td.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var o,u=s.readVarint()+s.pos,p=1,g=0,_=0,x=0,S=[];s.pos<u;){if(g<=0){var E=s.readVarint();p=7&E,g=E>>3}if(g--,p===1||p===2)_+=s.readSVarint(),x+=s.readSVarint(),p===1&&(o&&S.push(o),o=[]),o.push(new wL(_,x));else{if(p!==7)throw new Error("unknown command "+p);o&&o.push(o[0].clone())}}return o&&S.push(o),S},Td.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var o=s.readVarint()+s.pos,u=1,p=0,g=0,_=0,x=1/0,S=-1/0,E=1/0,A=-1/0;s.pos<o;){if(p<=0){var L=s.readVarint();u=7&L,p=L>>3}if(p--,u===1||u===2)(g+=s.readSVarint())<x&&(x=g),g>S&&(S=g),(_+=s.readSVarint())<E&&(E=_),_>A&&(A=_);else if(u!==7)throw new Error("unknown command "+u)}return[x,E,S,A]},Td.prototype.toGeoJSON=function(s,o,u){var p,g,_=this.extent*Math.pow(2,u),x=this.extent*s,S=this.extent*o,E=this.loadGeometry(),A=Td.types[this.type];function L(H){for(var Y=0;Y<H.length;Y++){var J=H[Y];H[Y]=[360*(J.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(p=0;p<E.length;p++)B[p]=E[p][0];L(E=B);break;case 2:for(p=0;p<E.length;p++)L(E[p]);break;case 3:for(E=function(H){var Y=H.length;if(Y<=1)return[H];for(var J,de,me=[],Pe=0;Pe<Y;Pe++){var xe=CL(H[Pe]);xe!==0&&(de===void 0&&(de=xe<0),de===xe<0?(J&&me.push(J),J=[H[Pe]]):J.push(H[Pe]))}return J&&me.push(J),me}(E),p=0;p<E.length;p++)for(g=0;g<E[p].length;g++)L(E[p][g])}E.length===1?E=E[0]:A="Multi"+A;var V={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(V.id=this.id),V};var kL=QS,eC=tC;function tC(s,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(EL,this,o),this.length=this._features.length}function EL(s,o,u){s===15?o.version=u.readVarint():s===1?o.name=u.readString():s===5?o.extent=u.readVarint():s===2?o._features.push(u.pos):s===3?o._keys.push(u.readString()):s===4&&o._values.push(function(p){for(var g=null,_=p.readVarint()+p.pos;p.pos<_;){var x=p.readVarint()>>3;g=x===1?p.readString():x===2?p.readFloat():x===3?p.readDouble():x===4?p.readVarint64():x===5?p.readVarint():x===6?p.readSVarint():x===7?p.readBoolean():null}return g}(u))}tC.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var o=this._pbf.readVarint()+this._pbf.pos;return new kL(this._pbf,o,this.extent,this._keys,this._values)};var TL=eC;function IL(s,o,u){if(s===3){var p=new TL(u,u.readVarint()+u.pos);p.length&&(o[p.name]=p)}}Ul.VectorTile=function(s,o){this.layers=s.readFields(IL,{},o)},Ul.VectorTileFeature=QS,Ul.VectorTileLayer=eC;const PL=Ul.VectorTileFeature.types,S_=Math.pow(2,13);function Xp(s,o,u,p,g,_,x,S){s.emplaceBack(o,u,2*Math.floor(p*S_)+x,g*S_*2,_*S_*2,Math.round(S))}class C_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new $l,this.centroidVertexArray=new di,this.indexArray=new Vo,this.programConfigurations=new Ku(o.layers,o.zoom),this.segments=new ln,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.features=[],this.hasPattern=x_("fill-extrusion",this.layers,u);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of o){const E=this.layers[0]._featureFilter.needGeometry,A=Yu(g,E);if(!this.layers[0]._featureFilter.filter(new Xn(this.zoom),A,p))continue;const L={id:_,sourceLayerIndex:S,index:x,geometry:E?A.geometry:Xu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(b_("fill-extrusion",this.layers,L,this.zoom,u)):this.addFeature(L,L.geometry,x,p,{}),u.featureIndex.insert(g,L.geometry,x,S,this.index,!0)}}addFeatures(o,u,p){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,u,p)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,bL),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,xL.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,u,p,g,_){for(const x of Xc(u,500)){const S={x:0,y:0,vertexCount:0};let E=0;for(const Y of x)E+=Y.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of x){if(Y.length===0||AL(Y))continue;let J=0;for(let de=0;de<Y.length;de++){const me=Y[de];if(de>=1){const Pe=Y[de-1];if(!ML(me,Pe)){A.vertexLength+4>ln.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xe=me.sub(Pe)._perp()._unit(),Te=Pe.dist(me);J+Te>32768&&(J=0),Xp(this.layoutVertexArray,me.x,me.y,xe.x,xe.y,0,0,J),Xp(this.layoutVertexArray,me.x,me.y,xe.x,xe.y,0,1,J),S.x+=2*me.x,S.y+=2*me.y,S.vertexCount+=2,J+=Te,Xp(this.layoutVertexArray,Pe.x,Pe.y,xe.x,xe.y,0,0,J),Xp(this.layoutVertexArray,Pe.x,Pe.y,xe.x,xe.y,0,1,J),S.x+=2*Pe.x,S.y+=2*Pe.y,S.vertexCount+=2;const ze=A.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+E>ln.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),PL[o.type]!=="Polygon")continue;const L=[],B=[],V=A.vertexLength;for(const Y of x)if(Y.length!==0){Y!==x[0]&&B.push(L.length/2);for(let J=0;J<Y.length;J++){const de=Y[J];Xp(this.layoutVertexArray,de.x,de.y,0,0,1,1,0),S.x+=de.x,S.y+=de.y,S.vertexCount+=1,L.push(de.x),L.push(de.y)}}const H=HS(L,B);for(let Y=0;Y<H.length;Y+=3)this.indexArray.emplaceBack(V+H[Y],V+H[Y+2],V+H[Y+1]);A.primitiveLength+=H.length/3,A.vertexLength+=E;for(let Y=0;Y<S.vertexCount;Y++){const J=Math.floor(S.x/S.vertexCount),de=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(J,de)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}}function ML(s,o){return s.x===o.x&&(s.x<0||s.x>Or)||s.y===o.y&&(s.y<0||s.y>Or)}function AL(s){return s.every(o=>o.x<0)||s.every(o=>o.x>Or)||s.every(o=>o.y<0)||s.every(o=>o.y>Or)}let nC;yt("FillExtrusionBucket",C_,{omit:["layers","features"]});var LL={get paint(){return nC=nC||new v({"fill-extrusion-opacity":new xt(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Rt(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new xt(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new xt(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new gd(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Rt(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Rt(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new xt(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class RL extends d{constructor(o){super(o,LL)}createBucket(o){return new C_(o)}queryRadius(){return Vg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,u,p,g,_,x,S,E){const A=Wg(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),L=this.paint.get("fill-extrusion-height").evaluate(u,p),B=this.paint.get("fill-extrusion-base").evaluate(u,p),V=function(Y,J,de,me){const Pe=[];for(const xe of Y){const Te=[xe.x,xe.y,0,1];qg(Te,Te,J),Pe.push(new k(Te[0]/Te[3],Te[1]/Te[3]))}return Pe}(A,E),H=function(Y,J,de,me){const Pe=[],xe=[],Te=me[8]*J,ze=me[9]*J,He=me[10]*J,dt=me[11]*J,Lt=me[8]*de,lt=me[9]*de,rt=me[10]*de,kt=me[11]*de;for(const vt of Y){const mt=[],Be=[];for(const Et of vt){const wt=Et.x,Nt=Et.y,Vn=me[0]*wt+me[4]*Nt+me[12],On=me[1]*wt+me[5]*Nt+me[13],Kr=me[2]*wt+me[6]*Nt+me[14],ma=me[3]*wt+me[7]*Nt+me[15],fi=Kr+He,Xr=ma+dt,Fi=Vn+Lt,Ni=On+lt,ji=Kr+rt,br=ma+kt,Yr=new k((Vn+Te)/Xr,(On+ze)/Xr);Yr.z=fi/Xr,mt.push(Yr);const Ei=new k(Fi/br,Ni/br);Ei.z=ji/br,Be.push(Ei)}Pe.push(mt),xe.push(Be)}return[Pe,xe]}(g,B,L,E);return function(Y,J,de){let me=1/0;zS(de,J)&&(me=rC(de,J[0]));for(let Pe=0;Pe<J.length;Pe++){const xe=J[Pe],Te=Y[Pe];for(let ze=0;ze<xe.length-1;ze++){const He=xe[ze],dt=[He,xe[ze+1],Te[ze+1],Te[ze],He];RS(de,dt)&&(me=Math.min(me,rC(de,dt)))}}return me!==1/0&&me}(H[0],H[1],V)}}function Yp(s,o){return s.x*o.x+s.y*o.y}function rC(s,o){if(s.length===1){let u=0;const p=o[u++];let g;for(;!g||p.equals(g);)if(g=o[u++],!g)return 1/0;for(;u<o.length;u++){const _=o[u],x=s[0],S=g.sub(p),E=_.sub(p),A=x.sub(p),L=Yp(S,S),B=Yp(S,E),V=Yp(E,E),H=Yp(A,S),Y=Yp(A,E),J=L*V-B*B,de=(V*H-B*Y)/J,me=(L*Y-B*H)/J,Pe=p.z*(1-de-me)+g.z*de+_.z*me;if(isFinite(Pe))return Pe}return 1/0}{let u=1/0;for(const p of o)u=Math.min(u,p.z);return u}}const zL=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:DL}=zL,$L=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:OL}=$L,BL=Ul.VectorTileFeature.types,FL=Math.cos(Math.PI/180*37.5),iC=Math.pow(2,14)/.5;class k_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new vd,this.layoutVertexArray2=new Ol,this.indexArray=new Vo,this.programConfigurations=new Ku(o.layers,o.zoom),this.segments=new ln,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}populate(o,u,p){this.hasPattern=x_("line",this.layers,u);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:E,index:A,sourceLayerIndex:L}of o){const B=this.layers[0]._featureFilter.needGeometry,V=Yu(S,B);if(!this.layers[0]._featureFilter.filter(new Xn(this.zoom),V,p))continue;const H=_?g.evaluate(V,{},p):void 0,Y={id:E,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:B?V.geometry:Xu(S),patterns:{},sortKey:H};x.push(Y)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const B=b_("line",this.layers,S,this.zoom,u);this.patternFeatures.push(B)}else this.addFeature(S,E,A,p,{});u.featureIndex.insert(o[A].feature,E,A,L,this.index)}}update(o,u,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,u,this.stateDependentLayers,p)}addFeatures(o,u,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,u,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,OL)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,DL),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,p,g,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(o,{}),E=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const B of u)this.addLine(B,o,S,E,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}addLine(o,u,p,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let me=0;me<o.length-1;me++)this.totalDistance+=o[me].dist(o[me+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=BL[u.type]==="Polygon";let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let A=0;for(;A<E-1&&o[A].equals(o[A+1]);)A++;if(E<(S?3:2))return;p==="bevel"&&(_=1.05);const L=this.overscaling<=16?15*Or/(512*this.overscaling):0,B=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let V,H,Y,J,de;this.e1=this.e2=-1,S&&(V=o[E-2],de=o[A].sub(V)._unit()._perp());for(let me=A;me<E;me++){if(Y=me===E-1?S?o[A+1]:void 0:o[me+1],Y&&o[me].equals(Y))continue;de&&(J=de),V&&(H=V),V=o[me],de=Y?Y.sub(V)._unit()._perp():J,J=J||de;let Pe=J.add(de);Pe.x===0&&Pe.y===0||Pe._unit();const xe=J.x*de.x+J.y*de.y,Te=Pe.x*de.x+Pe.y*de.y,ze=Te!==0?1/Te:1/0,He=2*Math.sqrt(2-2*Te),dt=Te<FL&&H&&Y,Lt=J.x*de.y-J.y*de.x>0;if(dt&&me>A){const kt=V.dist(H);if(kt>2*L){const vt=V.sub(V.sub(H)._mult(L/kt)._round());this.updateDistance(H,vt),this.addCurrentVertex(vt,J,0,0,B),H=vt}}const lt=H&&Y;let rt=lt?p:S?"butt":g;if(lt&&rt==="round"&&(ze<x?rt="miter":ze<=2&&(rt="fakeround")),rt==="miter"&&ze>_&&(rt="bevel"),rt==="bevel"&&(ze>2&&(rt="flipbevel"),ze<_&&(rt="miter")),H&&this.updateDistance(H,V),rt==="miter")Pe._mult(ze),this.addCurrentVertex(V,Pe,0,0,B);else if(rt==="flipbevel"){if(ze>100)Pe=de.mult(-1);else{const kt=ze*J.add(de).mag()/J.sub(de).mag();Pe._perp()._mult(kt*(Lt?-1:1))}this.addCurrentVertex(V,Pe,0,0,B),this.addCurrentVertex(V,Pe.mult(-1),0,0,B)}else if(rt==="bevel"||rt==="fakeround"){const kt=-Math.sqrt(ze*ze-1),vt=Lt?kt:0,mt=Lt?0:kt;if(H&&this.addCurrentVertex(V,J,vt,mt,B),rt==="fakeround"){const Be=Math.round(180*He/Math.PI/20);for(let Et=1;Et<Be;Et++){let wt=Et/Be;if(wt!==.5){const Vn=wt-.5;wt+=wt*Vn*(wt-1)*((1.0904+xe*(xe*(3.55645-1.43519*xe)-3.2452))*Vn*Vn+(.848013+xe*(.215638*xe-1.06021)))}const Nt=de.sub(J)._mult(wt)._add(J)._unit()._mult(Lt?-1:1);this.addHalfVertex(V,Nt.x,Nt.y,!1,Lt,0,B)}}Y&&this.addCurrentVertex(V,de,-vt,-mt,B)}else if(rt==="butt")this.addCurrentVertex(V,Pe,0,0,B);else if(rt==="square"){const kt=H?1:-1;this.addCurrentVertex(V,Pe,kt,kt,B)}else rt==="round"&&(H&&(this.addCurrentVertex(V,J,0,0,B),this.addCurrentVertex(V,J,1,1,B,!0)),Y&&(this.addCurrentVertex(V,de,-1,-1,B,!0),this.addCurrentVertex(V,de,0,0,B)));if(dt&&me<E-1){const kt=V.dist(Y);if(kt>2*L){const vt=V.add(Y.sub(V)._mult(L/kt)._round());this.updateDistance(V,vt),this.addCurrentVertex(vt,de,0,0,B),V=vt}}}}addCurrentVertex(o,u,p,g,_,x=!1){const S=u.y*g-u.x,E=-u.y-u.x*g;this.addHalfVertex(o,u.x+u.y*p,u.y-u.x*p,x,!1,p,_),this.addHalfVertex(o,S,E,x,!0,-g,_),this.distance>iC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,u,p,g,_,x))}addHalfVertex({x:o,y:u},p,g,_,x,S,E){const A=.5*(this.lineClips?this.scaledDistance*(iC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(_?1:0),(u<<1)+(x?1:0),Math.round(63*p)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),E.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,u){this.distance+=o.dist(u),this.updateScaledDistance()}}let oC,aC;yt("LineBucket",k_,{omit:["layers","patternFeatures"]});var sC={get paint(){return aC=aC||new v({"line-opacity":new Rt(Se.paint_line["line-opacity"]),"line-color":new Rt(Se.paint_line["line-color"]),"line-translate":new xt(Se.paint_line["line-translate"]),"line-translate-anchor":new xt(Se.paint_line["line-translate-anchor"]),"line-width":new Rt(Se.paint_line["line-width"]),"line-gap-width":new Rt(Se.paint_line["line-gap-width"]),"line-offset":new Rt(Se.paint_line["line-offset"]),"line-blur":new Rt(Se.paint_line["line-blur"]),"line-dasharray":new yd(Se.paint_line["line-dasharray"]),"line-pattern":new gd(Se.paint_line["line-pattern"]),"line-gradient":new jp(Se.paint_line["line-gradient"])})},get layout(){return oC=oC||new v({"line-cap":new xt(Se.layout_line["line-cap"]),"line-join":new Rt(Se.layout_line["line-join"]),"line-miter-limit":new xt(Se.layout_line["line-miter-limit"]),"line-round-limit":new xt(Se.layout_line["line-round-limit"]),"line-sort-key":new Rt(Se.layout_line["line-sort-key"])})}};class NL extends Rt{possiblyEvaluate(o,u){return u=new Xn(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,zoomHistory:u.zoomHistory,transition:u.transition}),super.possiblyEvaluate(o,u)}evaluate(o,u,p,g){return u=ae({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,p,g)}}let Kg;class jL extends d{constructor(o){super(o,sC),this.gradientVersion=0,Kg||(Kg=new NL(sC.paint.properties["line-width"].specification),Kg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const u=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(u)&&u._styleExpression.expression instanceof yl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,u){super.recalculate(o,u),this.paint._values["line-floorwidth"]=Kg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new k_(o)}queryRadius(o){const u=o,p=lC(Wp("line-width",this,u),Wp("line-gap-width",this,u)),g=Wp("line-offset",this,u);return p/2+Math.abs(g)+Vg(this.paint.get("line-translate"))}queryIntersectsFeature(o,u,p,g,_,x,S){const E=Wg(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),A=S/2*lC(this.paint.get("line-width").evaluate(u,p),this.paint.get("line-gap-width").evaluate(u,p)),L=this.paint.get("line-offset").evaluate(u,p);return L&&(g=function(B,V){const H=[];for(let Y=0;Y<B.length;Y++){const J=B[Y],de=[];for(let me=0;me<J.length;me++){const Pe=J[me-1],xe=J[me],Te=J[me+1],ze=me===0?new k(0,0):xe.sub(Pe)._unit()._perp(),He=me===J.length-1?new k(0,0):Te.sub(xe)._unit()._perp(),dt=ze._add(He)._unit(),Lt=dt.x*He.x+dt.y*He.y;Lt!==0&&dt._mult(1/Lt),de.push(dt._mult(V)._add(xe))}H.push(de)}return H}(g,L*S)),function(B,V,H){for(let Y=0;Y<V.length;Y++){const J=V[Y];if(B.length>=3){for(let de=0;de<J.length;de++)if(Cd(B,J[de]))return!0}if(X4(B,J,H))return!0}return!1}(E,g,A)}isTileClipped(){return!0}}function lC(s,o){return o>0?o+2*s:s}const UL=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),VL=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const WL=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const uC=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),qL=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function HL(s,o,u){return s.sections.forEach(p=>{p.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),no.applyArabicShaping&&(g=no.applyArabicShaping(g)),g}(p.text,o,u)}),s}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Jp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Ur=24,cC=$n,dC=function(s,o,u,p,g){var _,x,S=8*g-p-1,E=(1<<S)-1,A=E>>1,L=-7,B=g-1,V=-1,H=s[o+B];for(B+=V,_=H&(1<<-L)-1,H>>=-L,L+=S;L>0;_=256*_+s[o+B],B+=V,L-=8);for(x=_&(1<<-L)-1,_>>=-L,L+=p;L>0;x=256*x+s[o+B],B+=V,L-=8);if(_===0)_=1-A;else{if(_===E)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,p),_-=A}return(H?-1:1)*x*Math.pow(2,_-p)},hC=function(s,o,u,p,g,_){var x,S,E,A=8*_-g-1,L=(1<<A)-1,B=L>>1,V=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=0,Y=1,J=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(S=isNaN(o)?1:0,x=L):(x=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-x))<1&&(x--,E*=2),(o+=x+B>=1?V/E:V*Math.pow(2,1-B))*E>=2&&(x++,E/=2),x+B>=L?(S=0,x=L):x+B>=1?(S=(o*E-1)*Math.pow(2,g),x+=B):(S=o*Math.pow(2,B-1)*Math.pow(2,g),x=0));g>=8;s[u+H]=255&S,H+=Y,S/=256,g-=8);for(x=x<<g|S,A+=g;A>0;s[u+H]=255&x,H+=Y,x/=256,A-=8);s[u+H-Y]|=128*J};function $n(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}$n.Varint=0,$n.Fixed64=1,$n.Bytes=2,$n.Fixed32=5;var E_=4294967296,pC=1/E_,fC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Vs(s){return s.type===$n.Bytes?s.readVarint()+s.pos:s.pos+1}function Id(s,o,u){return u?4294967296*o+(s>>>0):4294967296*(o>>>0)+(s>>>0)}function mC(s,o,u){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));u.realloc(p);for(var g=u.pos-1;g>=s;g--)u.buf[g+p]=u.buf[g]}function GL(s,o){for(var u=0;u<s.length;u++)o.writeVarint(s[u])}function ZL(s,o){for(var u=0;u<s.length;u++)o.writeSVarint(s[u])}function KL(s,o){for(var u=0;u<s.length;u++)o.writeFloat(s[u])}function XL(s,o){for(var u=0;u<s.length;u++)o.writeDouble(s[u])}function YL(s,o){for(var u=0;u<s.length;u++)o.writeBoolean(s[u])}function JL(s,o){for(var u=0;u<s.length;u++)o.writeFixed32(s[u])}function QL(s,o){for(var u=0;u<s.length;u++)o.writeSFixed32(s[u])}function eR(s,o){for(var u=0;u<s.length;u++)o.writeFixed64(s[u])}function tR(s,o){for(var u=0;u<s.length;u++)o.writeSFixed64(s[u])}function Xg(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+16777216*s[o+3]}function Pd(s,o,u){s[u]=o,s[u+1]=o>>>8,s[u+2]=o>>>16,s[u+3]=o>>>24}function gC(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}$n.prototype={destroy:function(){this.buf=null},readFields:function(s,o,u){for(u=u||this.length;this.pos<u;){var p=this.readVarint(),g=p>>3,_=this.pos;this.type=7&p,s(g,o,this),this.pos===_&&this.skip(p)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=Xg(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=gC(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Xg(this.buf,this.pos)+Xg(this.buf,this.pos+4)*E_;return this.pos+=8,s},readSFixed64:function(){var s=Xg(this.buf,this.pos)+gC(this.buf,this.pos+4)*E_;return this.pos+=8,s},readFloat:function(){var s=dC(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=dC(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o,u,p=this.buf;return o=127&(u=p[this.pos++]),u<128?o:(o|=(127&(u=p[this.pos++]))<<7,u<128?o:(o|=(127&(u=p[this.pos++]))<<14,u<128?o:(o|=(127&(u=p[this.pos++]))<<21,u<128?o:function(g,_,x){var S,E,A=x.buf;if(S=(112&(E=A[x.pos++]))>>4,E<128||(S|=(127&(E=A[x.pos++]))<<3,E<128)||(S|=(127&(E=A[x.pos++]))<<10,E<128)||(S|=(127&(E=A[x.pos++]))<<17,E<128)||(S|=(127&(E=A[x.pos++]))<<24,E<128)||(S|=(1&(E=A[x.pos++]))<<31,E<128))return Id(g,S,_);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(u=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=this.pos;return this.pos=s,s-o>=12&&fC?function(u,p,g){return fC.decode(u.subarray(p,g))}(this.buf,o,s):function(u,p,g){for(var _="",x=p;x<g;){var S,E,A,L=u[x],B=null,V=L>239?4:L>223?3:L>191?2:1;if(x+V>g)break;V===1?L<128&&(B=L):V===2?(192&(S=u[x+1]))==128&&(B=(31&L)<<6|63&S)<=127&&(B=null):V===3?(E=u[x+2],(192&(S=u[x+1]))==128&&(192&E)==128&&((B=(15&L)<<12|(63&S)<<6|63&E)<=2047||B>=55296&&B<=57343)&&(B=null)):V===4&&(E=u[x+2],A=u[x+3],(192&(S=u[x+1]))==128&&(192&E)==128&&(192&A)==128&&((B=(15&L)<<18|(63&S)<<12|(63&E)<<6|63&A)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,V=1):B>65535&&(B-=65536,_+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),_+=String.fromCharCode(B),x+=V}return _}(this.buf,o,s)},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){if(this.type!==$n.Bytes)return s.push(this.readVarint(o));var u=Vs(this);for(s=s||[];this.pos<u;)s.push(this.readVarint(o));return s},readPackedSVarint:function(s){if(this.type!==$n.Bytes)return s.push(this.readSVarint());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==$n.Bytes)return s.push(this.readBoolean());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==$n.Bytes)return s.push(this.readFloat());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==$n.Bytes)return s.push(this.readDouble());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==$n.Bytes)return s.push(this.readFixed32());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==$n.Bytes)return s.push(this.readSFixed32());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==$n.Bytes)return s.push(this.readFixed64());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==$n.Bytes)return s.push(this.readSFixed64());var o=Vs(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed64());return s},skip:function(s){var o=7&s;if(o===$n.Varint)for(;this.buf[this.pos++]>127;);else if(o===$n.Bytes)this.pos=this.readVarint()+this.pos;else if(o===$n.Fixed32)this.pos+=4;else{if(o!==$n.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var u=new Uint8Array(o);u.set(this.buf),this.buf=u,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Pd(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Pd(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Pd(this.buf,-1&s,this.pos),Pd(this.buf,Math.floor(s*pC),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Pd(this.buf,-1&s,this.pos),Pd(this.buf,Math.floor(s*pC),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(o,u){var p,g;if(o>=0?(p=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(p=~(-o%4294967296))?p=p+1|0:(p=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");u.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(p,0,u),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,u)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var o=this.pos;this.pos=function(p,g,_){for(var x,S,E=0;E<g.length;E++){if((x=g.charCodeAt(E))>55295&&x<57344){if(!S){x>56319||E+1===g.length?(p[_++]=239,p[_++]=191,p[_++]=189):S=x;continue}if(x<56320){p[_++]=239,p[_++]=191,p[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(p[_++]=239,p[_++]=191,p[_++]=189,S=null);x<128?p[_++]=x:(x<2048?p[_++]=x>>6|192:(x<65536?p[_++]=x>>12|224:(p[_++]=x>>18|240,p[_++]=x>>12&63|128),p[_++]=x>>6&63|128),p[_++]=63&x|128)}return _}(this.buf,s,this.pos);var u=this.pos-o;u>=128&&mC(o,u,this),this.pos=o-1,this.writeVarint(u),this.pos+=u},writeFloat:function(s){this.realloc(4),hC(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),hC(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=s.length;this.writeVarint(o),this.realloc(o);for(var u=0;u<o;u++)this.buf[this.pos++]=s[u]},writeRawMessage:function(s,o){this.pos++;var u=this.pos;s(o,this);var p=this.pos-u;p>=128&&mC(u,p,this),this.pos=u-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,o,u){this.writeTag(s,$n.Bytes),this.writeRawMessage(o,u)},writePackedVarint:function(s,o){o.length&&this.writeMessage(s,GL,o)},writePackedSVarint:function(s,o){o.length&&this.writeMessage(s,ZL,o)},writePackedBoolean:function(s,o){o.length&&this.writeMessage(s,YL,o)},writePackedFloat:function(s,o){o.length&&this.writeMessage(s,KL,o)},writePackedDouble:function(s,o){o.length&&this.writeMessage(s,XL,o)},writePackedFixed32:function(s,o){o.length&&this.writeMessage(s,JL,o)},writePackedSFixed32:function(s,o){o.length&&this.writeMessage(s,QL,o)},writePackedFixed64:function(s,o){o.length&&this.writeMessage(s,eR,o)},writePackedSFixed64:function(s,o){o.length&&this.writeMessage(s,tR,o)},writeBytesField:function(s,o){this.writeTag(s,$n.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,$n.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,$n.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,$n.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,$n.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,$n.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,$n.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,$n.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,$n.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,$n.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};var T_=b(cC);const I_=3;function nR(s,o,u){s===1&&u.readMessage(rR,o)}function rR(s,o,u){if(s===3){const{id:p,bitmap:g,width:_,height:x,left:S,top:E,advance:A}=u.readMessage(iR,{});o.push({id:p,bitmap:new Hp({width:_+2*I_,height:x+2*I_},g),metrics:{width:_,height:x,left:S,top:E,advance:A}})}}function iR(s,o,u){s===1?o.id=u.readVarint():s===2?o.bitmap=u.readBytes():s===3?o.width=u.readVarint():s===4?o.height=u.readVarint():s===5?o.left=u.readSVarint():s===6?o.top=u.readSVarint():s===7&&(o.advance=u.readVarint())}const yC=I_;function vC(s){let o=0,u=0;for(const x of s)o+=x.w*x.h,u=Math.max(u,x.w);s.sort((x,S)=>S.h-x.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let g=0,_=0;for(const x of s)for(let S=p.length-1;S>=0;S--){const E=p[S];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const A=p.pop();S<p.length&&(p[S]=A)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(p.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:_,fill:o/(g*_)||0}}const io=1;class P_{constructor(o,{pixelRatio:u,version:p,stretchX:g,stretchY:_,content:x,textFitWidth:S,textFitHeight:E}){this.paddedRect=o,this.pixelRatio=u,this.stretchX=g,this.stretchY=_,this.content=x,this.version=p,this.textFitWidth=S,this.textFitHeight=E}get tl(){return[this.paddedRect.x+io,this.paddedRect.y+io]}get br(){return[this.paddedRect.x+this.paddedRect.w-io,this.paddedRect.y+this.paddedRect.h-io]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*io)/this.pixelRatio,(this.paddedRect.h-2*io)/this.pixelRatio]}}class _C{constructor(o,u){const p={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(o,p,_),this.addImages(u,g,_);const{w:x,h:S}=vC(_),E=new Wo({width:x||1,height:S||1});for(const A in o){const L=o[A],B=p[A].paddedRect;Wo.copy(L.data,E,{x:0,y:0},{x:B.x+io,y:B.y+io},L.data)}for(const A in u){const L=u[A],B=g[A].paddedRect,V=B.x+io,H=B.y+io,Y=L.data.width,J=L.data.height;Wo.copy(L.data,E,{x:0,y:0},{x:V,y:H},L.data),Wo.copy(L.data,E,{x:0,y:J-1},{x:V,y:H-1},{width:Y,height:1}),Wo.copy(L.data,E,{x:0,y:0},{x:V,y:H+J},{width:Y,height:1}),Wo.copy(L.data,E,{x:Y-1,y:0},{x:V-1,y:H},{width:1,height:J}),Wo.copy(L.data,E,{x:0,y:0},{x:V+Y,y:H},{width:1,height:J})}this.image=E,this.iconPositions=p,this.patternPositions=g}addImages(o,u,p){for(const g in o){const _=o[g],x={x:0,y:0,w:_.data.width+2*io,h:_.data.height+2*io};p.push(x),u[g]=new P_(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,u){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),u),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),u)}patchUpdatedImage(o,u,p){if(!o||!u||o.version===u.version)return;o.version=u.version;const[g,_]=o.tl;p.update(u.data,void 0,{x:g,y:_})}}var Vl;yt("ImagePosition",P_),yt("ImageAtlas",_C),h.ah=void 0,(Vl=h.ah||(h.ah={}))[Vl.none=0]="none",Vl[Vl.horizontal=1]="horizontal",Vl[Vl.vertical=2]="vertical",Vl[Vl.horizontalOnly=3]="horizontalOnly";const Qp=-17;class ef{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,u){const p=new ef;return p.scale=o||1,p.fontStack=u,p}static forImage(o){const u=new ef;return u.imageName=o,u}}class Md{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const p=new Md;for(let g=0;g<o.sections.length;g++){const _=o.sections[g];_.image?p.addImageSection(_):p.addTextSection(_,u)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let u="";for(let p=0;p<o.length;p++){const g=o.charCodeAt(p+1)||null,_=o.charCodeAt(p-1)||null;u+=g&&$g(g)&&!Jp[o[p+1]]||_&&$g(_)&&!Jp[o[p-1]]||!Jp[o[p]]?o[p]:Jp[o[p]]}return u}(this.text)}trim(){let o=0;for(let p=0;p<this.text.length&&Jg[this.text.charCodeAt(p)];p++)o++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&Jg[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const p=new Md;return p.text=this.text.substring(o,u),p.sectionIndex=this.sectionIndex.slice(o,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(ef.forText(o.scale,o.fontStack||u));const p=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(p)}addImageSection(o){const u=o.image?o.image.name:"";if(u.length===0)return void De("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(ef.forImage(u)),this.sectionIndex.push(this.sections.length-1)):De("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Yg(s,o,u,p,g,_,x,S,E,A,L,B,V,H,Y){const J=Md.fromFeature(s,g);let de;B===h.ah.vertical&&J.verticalizePunctuation();const{processBidirectionalText:me,processStyledBidirectionalText:Pe}=no;if(me&&J.sections.length===1){de=[];const ze=me(J.toString(),M_(J,A,_,o,p,H));for(const He of ze){const dt=new Md;dt.text=He,dt.sections=J.sections;for(let Lt=0;Lt<He.length;Lt++)dt.sectionIndex.push(0);de.push(dt)}}else if(Pe){de=[];const ze=Pe(J.text,J.sectionIndex,M_(J,A,_,o,p,H));for(const He of ze){const dt=new Md;dt.text=He[0],dt.sectionIndex=He[1],dt.sections=J.sections,de.push(dt)}}else de=function(ze,He){const dt=[],Lt=ze.text;let lt=0;for(const rt of He)dt.push(ze.substring(lt,rt)),lt=rt;return lt<Lt.length&&dt.push(ze.substring(lt,Lt.length)),dt}(J,M_(J,A,_,o,p,H));const xe=[],Te={positionedLines:xe,text:J.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(ze,He,dt,Lt,lt,rt,kt,vt,mt,Be,Et,wt){let Nt=0,Vn=Qp,On=0,Kr=0;const ma=vt==="right"?1:vt==="left"?0:.5;let fi=0;for(const br of lt){br.trim();const Yr=br.getMaxScale(),Ei=(Yr-1)*Ur,mi={positionedGlyphs:[],lineOffset:0};ze.positionedLines[fi]=mi;const Ui=mi.positionedGlyphs;let gi=0;if(!br.length()){Vn+=rt,++fi;continue}for(let oo=0;oo<br.length();oo++){const Sn=br.getSection(oo),qn=br.getSectionIndex(oo),er=br.getCharCode(oo);let To=0,hr=null,zd=null,os=null,as=Ur;const ga=!(mt===h.ah.horizontal||!Et&&!Fp(er)||Et&&(Jg[er]||(Xr=er,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Xr)))));if(Sn.imageName){const Go=Lt[Sn.imageName];if(!Go)continue;os=Sn.imageName,ze.iconsInText=ze.iconsInText||!0,zd=Go.paddedRect;const ri=Go.displaySize;Sn.scale=Sn.scale*Ur/wt,hr={width:ri[0],height:ri[1],left:io,top:-yC,advance:ga?ri[1]:ri[0]},To=Ei+(Ur-ri[1]*Sn.scale),as=hr.advance;const Ws=ga?ri[0]*Sn.scale-Ur*Yr:ri[1]*Sn.scale-Ur*Yr;Ws>0&&Ws>gi&&(gi=Ws)}else{const Go=dt[Sn.fontStack],ri=Go&&Go[er];if(ri&&ri.rect)zd=ri.rect,hr=ri.metrics;else{const Ws=He[Sn.fontStack],sf=Ws&&Ws[er];if(!sf)continue;hr=sf.metrics}To=(Yr-Sn.scale)*Ur}ga?(ze.verticalizable=!0,Ui.push({glyph:er,imageName:os,x:Nt,y:Vn+To,vertical:ga,scale:Sn.scale,fontStack:Sn.fontStack,sectionIndex:qn,metrics:hr,rect:zd}),Nt+=as*Sn.scale+Be):(Ui.push({glyph:er,imageName:os,x:Nt,y:Vn+To,vertical:ga,scale:Sn.scale,fontStack:Sn.fontStack,sectionIndex:qn,metrics:hr,rect:zd}),Nt+=hr.advance*Sn.scale+Be)}Ui.length!==0&&(On=Math.max(Nt-Be,On),lR(Ui,0,Ui.length-1,ma,gi)),Nt=0;const Ho=rt*Yr+gi;mi.lineOffset=Math.max(gi,Ei),Vn+=Ho,Kr=Math.max(Ho,Kr),++fi}var Xr;const Fi=Vn-Qp,{horizontalAlign:Ni,verticalAlign:ji}=A_(kt);(function(br,Yr,Ei,mi,Ui,gi,Ho,oo,Sn){const qn=(Yr-Ei)*Ui;let er=0;er=gi!==Ho?-oo*mi-Qp:(-mi*Sn+.5)*Ho;for(const To of br)for(const hr of To.positionedGlyphs)hr.x+=qn,hr.y+=er})(ze.positionedLines,ma,Ni,ji,On,Kr,rt,Fi,lt.length),ze.top+=-ji*Fi,ze.bottom=ze.top+Fi,ze.left+=-Ni*On,ze.right=ze.left+On}(Te,o,u,p,de,x,S,E,B,A,V,Y),!function(ze){for(const He of ze)if(He.positionedGlyphs.length!==0)return!1;return!0}(xe)&&Te}const Jg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},oR={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},aR={40:!0};function xC(s,o,u,p,g,_){if(o.imageName){const x=p[o.imageName];return x?x.displaySize[0]*o.scale*Ur/_+g:0}{const x=u[o.fontStack],S=x&&x[s];return S?S.metrics.advance*o.scale+g:0}}function bC(s,o,u,p){const g=Math.pow(s-o,2);return p?s<o?g/2:2*g:g+Math.abs(u)*u}function sR(s,o,u){let p=0;return s===10&&(p-=1e4),u&&(p+=150),s!==40&&s!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function wC(s,o,u,p,g,_){let x=null,S=bC(o,u,g,_);for(const E of p){const A=bC(o-E.x,u,g,_)+E.badness;A<=S&&(x=E,S=A)}return{index:s,x:o,priorBreak:x,badness:S}}function SC(s){return s?SC(s.priorBreak).concat(s.index):[]}function M_(s,o,u,p,g,_){if(!s)return[];const x=[],S=function(B,V,H,Y,J,de){let me=0;for(let Pe=0;Pe<B.length();Pe++){const xe=B.getSection(Pe);me+=xC(B.getCharCode(Pe),xe,Y,J,V,de)}return me/Math.max(1,Math.ceil(me/H))}(s,o,u,p,g,_),E=s.text.indexOf("")>=0;let A=0;for(let B=0;B<s.length();B++){const V=s.getSection(B),H=s.getCharCode(B);if(Jg[H]||(A+=xC(H,V,p,g,o,_)),B<s.length()-1){const Y=!((L=H)<11904)&&(!!sn["CJK Compatibility Forms"](L)||!!sn["CJK Compatibility"](L)||!!sn["CJK Strokes"](L)||!!sn["CJK Symbols and Punctuation"](L)||!!sn["Enclosed CJK Letters and Months"](L)||!!sn["Halfwidth and Fullwidth Forms"](L)||!!sn["Ideographic Description Characters"](L)||!!sn["Vertical Forms"](L)||Dg.test(String.fromCodePoint(L)));(oR[H]||Y||V.imageName||B!==s.length()-2&&aR[s.getCharCode(B+1)])&&x.push(wC(B+1,A,S,x,sR(H,s.getCharCode(B+1),Y&&E),!1))}}var L;return SC(wC(s.length(),A,S,x,0,!0))}function A_(s){let o=.5,u=.5;switch(s){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function lR(s,o,u,p,g){if(!p&&!g)return;const _=s[u],x=(s[u].x+_.metrics.advance*_.scale)*p;for(let S=o;S<=u;S++)s[S].x-=x,s[S].y+=g}function uR(s,o,u){const{horizontalAlign:p,verticalAlign:g}=A_(u),_=o[0]-s.displaySize[0]*p,x=o[1]-s.displaySize[1]*g;return{image:s,top:x,bottom:x+s.displaySize[1],left:_,right:_+s.displaySize[0]}}function CC(s){var o,u;let p=s.left,g=s.top,_=s.right-p,x=s.bottom-g;const S=(o=s.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",E=(u=s.image.textFitHeight)!==null&&u!==void 0?u:"stretchOrShrink",A=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(E==="proportional"){if(S==="stretchOnly"&&_/x<A||S==="proportional"){const L=Math.ceil(x*A);p*=L/_,_=L}}else if(S==="proportional"&&E==="stretchOnly"&&A!==0&&_/x>A){const L=Math.ceil(_/A);g*=L/x,x=L}return{x1:p,y1:g,x2:p+_,y2:g+x}}function kC(s,o,u,p,g,_){const x=s.image;let S;if(x.content){const de=x.content,me=x.pixelRatio||1;S=[de[0]/me,de[1]/me,x.displaySize[0]-de[2]/me,x.displaySize[1]-de[3]/me]}const E=o.left*_,A=o.right*_;let L,B,V,H;u==="width"||u==="both"?(H=g[0]+E-p[3],B=g[0]+A+p[1]):(H=g[0]+(E+A-x.displaySize[0])/2,B=H+x.displaySize[0]);const Y=o.top*_,J=o.bottom*_;return u==="height"||u==="both"?(L=g[1]+Y-p[0],V=g[1]+J+p[2]):(L=g[1]+(Y+J-x.displaySize[1])/2,V=L+x.displaySize[1]),{image:x,top:L,right:B,bottom:V,left:H,collisionPadding:S}}const tf=255,is=128,Wl=tf*is;function EC(s,o){const{expression:u}=o;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new Xn(s+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:g}=u;let _=0;for(;_<p.length&&p[_]<=s;)_++;_=Math.max(0,_-1);let x=_;for(;x<p.length&&p[x]<s+1;)x++;x=Math.min(p.length-1,x);const S=p[_],E=p[x];return u.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:E,minSize:u.evaluate(new Xn(S)),maxSize:u.evaluate(new Xn(E)),interpolationType:g}}}function L_(s,o,u){let p="never";const g=s.get(o);return g?p=g:s.get(u)&&(p="always"),p}const cR=Ul.VectorTileFeature.types,dR=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qg(s,o,u,p,g,_,x,S,E,A,L,B,V){const H=S?Math.min(Wl,Math.round(S[0])):0,Y=S?Math.min(Wl,Math.round(S[1])):0;s.emplaceBack(o,u,Math.round(32*p),Math.round(32*g),_,x,(H<<1)+(E?1:0),Y,16*A,16*L,256*B,256*V)}function R_(s,o,u){s.emplaceBack(o.x,o.y,u),s.emplaceBack(o.x,o.y,u),s.emplaceBack(o.x,o.y,u),s.emplaceBack(o.x,o.y,u)}function hR(s){for(const o of s.sections)if(s_(o.text))return!0;return!1}class z_{constructor(o){this.layoutVertexArray=new _d,this.indexArray=new Vo,this.programConfigurations=o,this.segments=new ln,this.dynamicLayoutVertexArray=new Up,this.opacityVertexArray=new ko,this.hasVisibleVertices=!1,this.placedSymbolArray=new Yn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,u,p,g){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,UL.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,VL.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,dR,!0),this.opacityVertexBuffer.itemSize=1),(p||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}yt("SymbolBuffers",z_);class D_{constructor(o,u,p){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new p,this.segments=new ln,this.collisionVertexArray=new ns}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,WL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}yt("CollisionBuffers",D_);class Ad{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=f_([]),this.placementViewportMatrix=f_([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=EC(this.zoom,u["text-size"]),this.iconSizeData=EC(this.zoom,u["icon-size"]);const p=this.layers[0].layout,g=p.get("symbol-sort-key"),_=p.get("symbol-z-order");this.canOverlap=L_(p,"text-overlap","text-allow-overlap")!=="never"||L_(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(x=>h.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new z_(new Ku(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new z_(new Ku(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new Jn,this.lineVertexArray=new ci,this.symbolInstances=new nn,this.textAnchorOffsets=new Qn}calculateGlyphDependencies(o,u,p,g,_){for(let x=0;x<o.length;x++)if(u[o.charCodeAt(x)]=!0,(p||g)&&_){const S=Jp[o.charAt(x)];S&&(u[S.charCodeAt(0)]=!0)}}populate(o,u,p){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),E=_.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof Ji&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,B=_.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const V=u.iconDependencies,H=u.glyphDependencies,Y=u.availableImages,J=new Xn(this.zoom);for(const{feature:de,id:me,index:Pe,sourceLayerIndex:xe}of o){const Te=g._featureFilter.needGeometry,ze=Yu(de,Te);if(!g._featureFilter.filter(J,ze,p))continue;let He,dt;if(Te||(ze.geometry=Xu(de)),A){const lt=g.getValueAndResolveTokens("text-field",ze,p,Y),rt=Ji.factory(lt),kt=this.hasRTLText=this.hasRTLText||hR(rt);(!kt||no.getRTLTextPluginStatus()==="unavailable"||kt&&no.isParsed())&&(He=HL(rt,g,ze))}if(L){const lt=g.getValueAndResolveTokens("icon-image",ze,p,Y);dt=lt instanceof eo?lt:eo.fromString(lt)}if(!He&&!dt)continue;const Lt=this.sortFeaturesByKey?B.evaluate(ze,{},p):void 0;if(this.features.push({id:me,text:He,icon:dt,index:Pe,sourceLayerIndex:xe,geometry:ze.geometry,properties:de.properties,type:cR[de.type],sortKey:Lt}),dt&&(V[dt.name]=!0),He){const lt=x.evaluate(ze,{},p).join(","),rt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.ah.vertical)>=0;for(const kt of He.sections)if(kt.image)V[kt.image.name]=!0;else{const vt=Op(He.toString()),mt=kt.fontStack||lt,Be=H[mt]=H[mt]||{};this.calculateGlyphDependencies(kt.text,Be,rt,this.allowVerticalPlacement,vt)}}}_.get("symbol-placement")==="line"&&(this.features=function(de){const me={},Pe={},xe=[];let Te=0;function ze(lt){xe.push(de[lt]),Te++}function He(lt,rt,kt){const vt=Pe[lt];return delete Pe[lt],Pe[rt]=vt,xe[vt].geometry[0].pop(),xe[vt].geometry[0]=xe[vt].geometry[0].concat(kt[0]),vt}function dt(lt,rt,kt){const vt=me[rt];return delete me[rt],me[lt]=vt,xe[vt].geometry[0].shift(),xe[vt].geometry[0]=kt[0].concat(xe[vt].geometry[0]),vt}function Lt(lt,rt,kt){const vt=kt?rt[0][rt[0].length-1]:rt[0][0];return`${lt}:${vt.x}:${vt.y}`}for(let lt=0;lt<de.length;lt++){const rt=de[lt],kt=rt.geometry,vt=rt.text?rt.text.toString():null;if(!vt){ze(lt);continue}const mt=Lt(vt,kt),Be=Lt(vt,kt,!0);if(mt in Pe&&Be in me&&Pe[mt]!==me[Be]){const Et=dt(mt,Be,kt),wt=He(mt,Be,xe[Et].geometry);delete me[mt],delete Pe[Be],Pe[Lt(vt,xe[wt].geometry,!0)]=wt,xe[Et].geometry=null}else mt in Pe?He(mt,Be,kt):Be in me?dt(mt,Be,kt):(ze(lt),me[mt]=Te-1,Pe[Be]=Te-1)}return xe.filter(lt=>lt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((de,me)=>de.sortKey-me.sortKey)}update(o,u,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,u,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,u,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const p=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(u[o.segment+1]),_=o.dist(u[o.segment]);const x={};for(let S=o.segment+1;S<u.length;S++)x[S]={x:u[S].x,y:u[S].y,tileUnitDistanceFromAnchor:g},S<u.length-1&&(g+=u[S+1].dist(u[S]));for(let S=o.segment||0;S>=0;S--)x[S]={x:u[S].x,y:u[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=u[S-1].dist(u[S]));for(let S=0;S<u.length;S++){const E=x[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,u,p,g,_,x,S,E,A,L,B,V){const H=o.indexArray,Y=o.layoutVertexArray,J=o.segments.prepareSegment(4*u.length,Y,H,this.canOverlap?x.sortKey:void 0),de=this.glyphOffsetArray.length,me=J.vertexLength,Pe=this.allowVerticalPlacement&&S===h.ah.vertical?Math.PI/2:0,xe=x.text&&x.text.sections;for(let Te=0;Te<u.length;Te++){const{tl:ze,tr:He,bl:dt,br:Lt,tex:lt,pixelOffsetTL:rt,pixelOffsetBR:kt,minFontScaleX:vt,minFontScaleY:mt,glyphOffset:Be,isSDF:Et,sectionIndex:wt}=u[Te],Nt=J.vertexLength,Vn=Be[1];Qg(Y,E.x,E.y,ze.x,Vn+ze.y,lt.x,lt.y,p,Et,rt.x,rt.y,vt,mt),Qg(Y,E.x,E.y,He.x,Vn+He.y,lt.x+lt.w,lt.y,p,Et,kt.x,rt.y,vt,mt),Qg(Y,E.x,E.y,dt.x,Vn+dt.y,lt.x,lt.y+lt.h,p,Et,rt.x,kt.y,vt,mt),Qg(Y,E.x,E.y,Lt.x,Vn+Lt.y,lt.x+lt.w,lt.y+lt.h,p,Et,kt.x,kt.y,vt,mt),R_(o.dynamicLayoutVertexArray,E,Pe),H.emplaceBack(Nt,Nt+1,Nt+2),H.emplaceBack(Nt+1,Nt+2,Nt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Be[0]),Te!==u.length-1&&wt===u[Te+1].sectionIndex||o.programConfigurations.populatePaintArrays(Y.length,x,x.index,{},V,xe&&xe[wt])}o.placedSymbolArray.emplaceBack(E.x,E.y,de,this.glyphOffsetArray.length-de,me,A,L,E.segment,p?p[0]:0,p?p[1]:0,g[0],g[1],S,0,!1,0,B)}_addCollisionDebugVertex(o,u,p,g,_,x){return u.emplaceBack(0,0),o.emplaceBack(p.x,p.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,u,p,g,_,x,S){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),A=E.vertexLength,L=_.layoutVertexArray,B=_.collisionVertexArray,V=S.anchorX,H=S.anchorY;this._addCollisionDebugVertex(L,B,x,V,H,new k(o,u)),this._addCollisionDebugVertex(L,B,x,V,H,new k(p,u)),this._addCollisionDebugVertex(L,B,x,V,H,new k(p,g)),this._addCollisionDebugVertex(L,B,x,V,H,new k(o,g)),E.vertexLength+=4;const Y=_.indexArray;Y.emplaceBack(A,A+1),Y.emplaceBack(A+1,A+2),Y.emplaceBack(A+2,A+3),Y.emplaceBack(A+3,A),E.primitiveLength+=4}addDebugCollisionBoxes(o,u,p,g){for(let _=o;_<u;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new D_(Eo,uC.members,ni),this.iconCollisionBox=new D_(Eo,uC.members,ni);for(let o=0;o<this.symbolInstances.length;o++){const u=this.symbolInstances.get(o);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}}_deserializeCollisionBoxesForSymbol(o,u,p,g,_,x,S,E,A){const L={};for(let B=u;B<p;B++){const V=o.get(B);L.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.textFeatureIndex=V.featureIndex;break}for(let B=g;B<_;B++){const V=o.get(B);L.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.verticalTextFeatureIndex=V.featureIndex;break}for(let B=x;B<S;B++){const V=o.get(B);L.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.iconFeatureIndex=V.featureIndex;break}for(let B=E;B<A;B++){const V=o.get(B);L.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},L.verticalIconFeatureIndex=V.featureIndex;break}return L}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,u){const p=o.placedSymbolArray.get(u),g=p.vertexStartIndex+4*p.numGlyphs;for(let _=p.vertexStartIndex;_<g;_+=4)o.indexArray.emplaceBack(_,_+1,_+2),o.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),p=Math.cos(o),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const E=this.symbolInstances.get(S);g.push(0|Math.round(u*E.anchorX+p*E.anchorY)),_.push(E.featureIndex)}return x.sort((S,E)=>g[S]-g[E]||_[E]-_[S]),x}addToSortKeyRanges(o,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let TC,IC;yt("SymbolBucket",Ad,{omit:["layers","collisionBoxArray","features","compareText"]}),Ad.MAX_GLYPHS=65535,Ad.addDynamicAttributes=R_;var $_={get paint(){return IC=IC||new v({"icon-opacity":new Rt(Se.paint_symbol["icon-opacity"]),"icon-color":new Rt(Se.paint_symbol["icon-color"]),"icon-halo-color":new Rt(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new Rt(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Rt(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new xt(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new xt(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new Rt(Se.paint_symbol["text-opacity"]),"text-color":new Rt(Se.paint_symbol["text-color"],{runtimeType:mn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Rt(Se.paint_symbol["text-halo-color"]),"text-halo-width":new Rt(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new Rt(Se.paint_symbol["text-halo-blur"]),"text-translate":new xt(Se.paint_symbol["text-translate"]),"text-translate-anchor":new xt(Se.paint_symbol["text-translate-anchor"])})},get layout(){return TC=TC||new v({"symbol-placement":new xt(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new xt(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new xt(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Rt(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new xt(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new xt(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new xt(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new xt(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new xt(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new xt(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new Rt(Se.layout_symbol["icon-size"]),"icon-text-fit":new xt(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new xt(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new Rt(Se.layout_symbol["icon-image"]),"icon-rotate":new Rt(Se.layout_symbol["icon-rotate"]),"icon-padding":new Rt(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new xt(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new Rt(Se.layout_symbol["icon-offset"]),"icon-anchor":new Rt(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new xt(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new xt(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new xt(Se.layout_symbol["text-rotation-alignment"]),"text-field":new Rt(Se.layout_symbol["text-field"]),"text-font":new Rt(Se.layout_symbol["text-font"]),"text-size":new Rt(Se.layout_symbol["text-size"]),"text-max-width":new Rt(Se.layout_symbol["text-max-width"]),"text-line-height":new xt(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new Rt(Se.layout_symbol["text-letter-spacing"]),"text-justify":new Rt(Se.layout_symbol["text-justify"]),"text-radial-offset":new Rt(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new xt(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Rt(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Rt(Se.layout_symbol["text-anchor"]),"text-max-angle":new xt(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new xt(Se.layout_symbol["text-writing-mode"]),"text-rotate":new Rt(Se.layout_symbol["text-rotate"]),"text-padding":new xt(Se.layout_symbol["text-padding"]),"text-keep-upright":new xt(Se.layout_symbol["text-keep-upright"]),"text-transform":new Rt(Se.layout_symbol["text-transform"]),"text-offset":new Rt(Se.layout_symbol["text-offset"]),"text-allow-overlap":new xt(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new xt(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new xt(Se.layout_symbol["text-ignore-placement"]),"text-optional":new xt(Se.layout_symbol["text-optional"])})}};class PC{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Rr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}yt("FormatSectionOverride",PC,{omit:["defaultValue"]});class ey extends d{constructor(o){super(o,$_)}recalculate(o,u){if(super.recalculate(o,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const g=[];for(const _ of p)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,u,p,g){const _=this.layout.get(o).evaluate(u,{},p,g),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||id(x.value)||!_?_:function(S,E){return E.replace(/{([^{}]+)}/g,(A,L)=>S&&L in S?String(S[L]):"")}(u.properties,_)}createBucket(o){return new Ad(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of $_.paint.overridableProperties){if(!ey.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),p=new PC(u),g=new rd(p,u.property.specification);let _=null;_=u.value.kind==="constant"||u.value.kind==="source"?new El("source",g):new Tl("composite",g,u.value.zoomStops),this.paint._values[o]=new pa(u.property,_,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&ey.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const p=o.get("text-field"),g=$_.paint.properties[u];let _=!1;const x=S=>{for(const E of S)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ji)x(p.value.value.sections);else if(p.value.kind==="source"){const S=A=>{_||(A instanceof Oo&&$r(A.value)===$o?x(A.value.sections):A instanceof Zc?x(A.sections):A.eachChild(S))},E=p.value;E._styleExpression&&S(E._styleExpression.expression)}return _}}let MC;var pR={get paint(){return MC=MC||new v({"background-color":new xt(Se.paint_background["background-color"]),"background-pattern":new yd(Se.paint_background["background-pattern"]),"background-opacity":new xt(Se.paint_background["background-opacity"])})}};class fR extends d{constructor(o){super(o,pR)}}let AC;var mR={get paint(){return AC=AC||new v({"raster-opacity":new xt(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new xt(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new xt(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new xt(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new xt(Se.paint_raster["raster-saturation"]),"raster-contrast":new xt(Se.paint_raster["raster-contrast"]),"raster-resampling":new xt(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new xt(Se.paint_raster["raster-fade-duration"])})}};class gR extends d{constructor(o){super(o,mR)}}class yR extends d{constructor(o){super(o,{}),this.onAdd=u=>{this.implementation.onAdd&&this.implementation.onAdd(u,u.painter.context.gl)},this.onRemove=u=>{this.implementation.onRemove&&this.implementation.onRemove(u,u.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class vR{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const O_=63710088e-1;class ql{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ql(oe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,p=this.lat*u,g=o.lat*u,_=Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos((o.lng-this.lng)*u);return O_*Math.acos(Math.min(_,1))}static convert(o){if(o instanceof ql)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new ql(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new ql(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const LC=2*Math.PI*O_;function RC(s){return LC*Math.cos(s*Math.PI/180)}function zC(s){return(180+s)/360}function DC(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function $C(s,o){return s/RC(o)}function B_(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class nf{constructor(o,u,p=0){this.x=+o,this.y=+u,this.z=+p}static fromLngLat(o,u=0){const p=ql.convert(o);return new nf(zC(p.lng),DC(p.lat),$C(u,p.lat))}toLngLat(){return new ql(360*this.x-180,B_(this.y))}toAltitude(){return this.z*RC(B_(this.y))}meterInMercatorCoordinateUnits(){return 1/LC*(o=B_(this.y),1/Math.cos(o*Math.PI/180));var o}}function OC(s,o,u){var p=2*Math.PI*6378137/256/Math.pow(2,u);return[s*p-2*Math.PI*6378137/2,o*p-2*Math.PI*6378137/2]}class F_{constructor(o,u,p){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(o,u,p))throw new Error(`x=${u}, y=${p}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=u,this.y=p,this.key=rf(0,o,o,u,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u,p){const g=(x=this.y,S=this.z,E=OC(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),A=OC(256*(_+1),256*(x+1),S),E[0]+","+E[1]+","+A[0]+","+A[1]);var _,x,S,E,A;const L=function(B,V,H){let Y,J="";for(let de=B;de>0;de--)Y=1<<de-1,J+=(V&Y?1:0)+(H&Y?2:0);return J}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,u>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const u=this.z-o.z;return u>0&&o.x===this.x>>u&&o.y===this.y>>u}getTilePoint(o){const u=Math.pow(2,this.z);return new k((o.x*u-this.x)*Or,(o.y*u-this.y)*Or)}toString(){return`${this.z}/${this.x}/${this.y}`}}class BC{constructor(o,u){this.wrap=o,this.canonical=u,this.key=rf(o,u.z,u.z,u.x,u.y)}}class qo{constructor(o,u,p,g,_){if(o<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${p}`);this.overscaledZ=o,this.wrap=u,this.canonical=new F_(p,+g,+_),this.key=rf(u,o,p,g,_)}clone(){return new qo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-o;return o>this.canonical.z?new qo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qo(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-o;return o>this.canonical.z?rf(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y):rf(this.wrap*+u,o,o,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new qo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,g=2*this.canonical.y;return[new qo(u,this.wrap,u,p,g),new qo(u,this.wrap,u,p+1,g),new qo(u,this.wrap,u,p,g+1),new qo(u,this.wrap,u,p+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new qo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new qo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new BC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new nf(o.x-this.wrap,o.y))}}function rf(s,o,u,p,g){(s*=2)<0&&(s=-1*s-1);const _=1<<u;return(_*_*s+_*g+p).toString(36)+u.toString(36)+o.toString(36)}yt("CanonicalTileID",F_),yt("OverscaledTileID",qo,{omit:["posMatrix"]});class FC{constructor(o,u,p,g=1,_=1,x=1,S=0){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void De(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=u.height;const E=this.dim=u.height-2;switch(this.data=new Uint32Array(u.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<E;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(E,A)]=this.data[this._idx(E-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,E)]=this.data[this._idx(A,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<E;A++)for(let L=0;L<E;L++){const B=this.get(A,L);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(o,u){const p=new Uint8Array(this.data.buffer),g=4*this._idx(o,u);return this.unpack(p[g],p[g+1],p[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}unpack(o,u,p){return o*this.redFactor+u*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,u,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=u*this.dim,_=u*this.dim+this.dim,x=p*this.dim,S=p*this.dim+this.dim;switch(u){case-1:g=_-1;break;case 1:_=g+1}switch(p){case-1:x=S-1;break;case 1:S=x+1}const E=-u*this.dim,A=-p*this.dim;for(let L=x;L<S;L++)for(let B=g;B<_;B++)this.data[this._idx(B,L)]=o.data[this._idx(B+E,L+A)]}}yt("DEMData",FC);class NC{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const p=o[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class jC{constructor(o,u,p,g,_){this.type="Feature",this._vectorTileFeature=o,o._z=u,o._x=p,o._y=g,this.properties=o.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(o[u]=this[u]);return o}}class UC{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Al(Or,16,0),this.grid3D=new Al(Or,16,0),this.featureIndexArray=new Ci,this.promoteId=u}insert(o,u,p,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,g,_);const E=x?this.grid3D:this.grid;for(let A=0;A<u.length;A++){const L=u[A],B=[1/0,1/0,-1/0,-1/0];for(let V=0;V<L.length;V++){const H=L[V];B[0]=Math.min(B[0],H.x),B[1]=Math.min(B[1],H.y),B[2]=Math.max(B[2],H.x),B[3]=Math.max(B[3],H.y)}B[0]<Or&&B[1]<Or&&B[2]>=0&&B[3]>=0&&E.insert(S,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ul.VectorTile(new T_(this.rawTileData)).layers,this.sourceLayerCoder=new NC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,u,p,g){this.loadVTLayers();const _=o.params||{},x=Or/o.tileSize/o.scale,S=wp(_.filter),E=o.queryGeometry,A=o.queryPadding*x,L=WC(E),B=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),V=WC(o.cameraQueryGeometry),H=this.grid3D.query(V.minX-A,V.minY-A,V.maxX+A,V.maxY+A,(de,me,Pe,xe)=>function(Te,ze,He,dt,Lt){for(const rt of Te)if(ze<=rt.x&&He<=rt.y&&dt>=rt.x&&Lt>=rt.y)return!0;const lt=[new k(ze,He),new k(ze,Lt),new k(dt,Lt),new k(dt,He)];if(Te.length>2){for(const rt of lt)if(Cd(Te,rt))return!0}for(let rt=0;rt<Te.length-1;rt++)if(J4(Te[rt],Te[rt+1],lt))return!0;return!1}(o.cameraQueryGeometry,de-A,me-A,Pe+A,xe+A));for(const de of H)B.push(de);B.sort(_R);const Y={};let J;for(let de=0;de<B.length;de++){const me=B[de];if(me===J)continue;J=me;const Pe=this.featureIndexArray.get(me);let xe=null;this.loadMatchingFeature(Y,Pe.bucketIndex,Pe.sourceLayerIndex,Pe.featureIndex,S,_.layers,_.availableImages,u,p,g,(Te,ze,He)=>(xe||(xe=Xu(Te)),ze.queryIntersectsFeature(E,Te,He,xe,this.z,o.transform,x,o.pixelPosMatrix)))}return Y}loadMatchingFeature(o,u,p,g,_,x,S,E,A,L,B){const V=this.bucketLayerIDs[u];if(x&&!function(de,me){for(let Pe=0;Pe<de.length;Pe++)if(me.indexOf(de[Pe])>=0)return!0;return!1}(x,V))return;const H=this.sourceLayerCoder.decode(p),Y=this.vtLayers[H].feature(g);if(_.needGeometry){const de=Yu(Y,!0);if(!_.filter(new Xn(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!_.filter(new Xn(this.tileID.overscaledZ),Y))return;const J=this.getId(Y,H);for(let de=0;de<V.length;de++){const me=V[de];if(x&&x.indexOf(me)<0)continue;const Pe=E[me];if(!Pe)continue;let xe={};J&&L&&(xe=L.getState(Pe.sourceLayer||"_geojsonTileLayer",J));const Te=ae({},A[me]);Te.paint=VC(Te.paint,Pe.paint,Y,xe,S),Te.layout=VC(Te.layout,Pe.layout,Y,xe,S);const ze=!B||B(Y,Pe,xe);if(!ze)continue;const He=new jC(Y,this.z,this.x,this.y,J);He.layer=Te;let dt=o[me];dt===void 0&&(dt=o[me]=[]),dt.push({featureIndex:g,feature:He,intersectionZ:ze})}}lookupSymbolFeatures(o,u,p,g,_,x,S,E){const A={};this.loadVTLayers();const L=wp(_);for(const B of o)this.loadMatchingFeature(A,p,g,B,L,x,S,E,u);return A}hasLayer(o){for(const u of this.bucketLayerIDs)for(const p of u)if(o===p)return!0;return!1}getId(o,u){let p=o.id;return this.promoteId&&(p=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]],typeof p=="boolean"&&(p=Number(p))),p}}function VC(s,o,u,p,g){return Ie(s,(_,x)=>{const S=o instanceof Hu?o.get(x):null;return S&&S.evaluate?S.evaluate(u,p,g):S})}function WC(s){let o=1/0,u=1/0,p=-1/0,g=-1/0;for(const _ of s)o=Math.min(o,_.x),u=Math.min(u,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return{minX:o,minY:u,maxX:p,maxY:g}}function _R(s,o){return o-s}function qC(s,o,u,p,g){const _=[];for(let x=0;x<s.length;x++){const S=s[x];let E;for(let A=0;A<S.length-1;A++){let L=S[A],B=S[A+1];L.x<o&&B.x<o||(L.x<o?L=new k(o,L.y+(o-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x<o&&(B=new k(o,L.y+(o-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y<u&&B.y<u||(L.y<u?L=new k(L.x+(u-L.y)/(B.y-L.y)*(B.x-L.x),u)._round():B.y<u&&(B=new k(L.x+(u-L.y)/(B.y-L.y)*(B.x-L.x),u)._round()),L.x>=p&&B.x>=p||(L.x>=p?L=new k(p,L.y+(p-L.x)/(B.x-L.x)*(B.y-L.y))._round():B.x>=p&&(B=new k(p,L.y+(p-L.x)/(B.x-L.x)*(B.y-L.y))._round()),L.y>=g&&B.y>=g||(L.y>=g?L=new k(L.x+(g-L.y)/(B.y-L.y)*(B.x-L.x),g)._round():B.y>=g&&(B=new k(L.x+(g-L.y)/(B.y-L.y)*(B.x-L.x),g)._round()),E&&L.equals(E[E.length-1])||(E=[L],_.push(E)),E.push(B)))))}}return _}yt("FeatureIndex",UC,{omit:["rawTileData","sourceLayerCoder"]});class Hl extends k{constructor(o,u,p,g){super(o,u),this.angle=p,g!==void 0&&(this.segment=g)}clone(){return new Hl(this.x,this.y,this.angle,this.segment)}}function HC(s,o,u,p,g){if(o.segment===void 0||u===0)return!0;let _=o,x=o.segment+1,S=0;for(;S>-u/2;){if(x--,x<0)return!1;S-=s[x].dist(_),_=s[x]}S+=s[x].dist(s[x+1]),x++;const E=[];let A=0;for(;S<u/2;){const L=s[x],B=s[x+1];if(!B)return!1;let V=s[x-1].angleTo(L)-L.angleTo(B);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:V}),A+=V;S-E[0].distance>p;)A-=E.shift().angleDelta;if(A>g)return!1;x++,S+=L.dist(B)}return!0}function GC(s){let o=0;for(let u=0;u<s.length-1;u++)o+=s[u].dist(s[u+1]);return o}function ZC(s,o,u){return s?.6*o*u:0}function KC(s,o){return Math.max(s?s.right-s.left:0,o?o.right-o.left:0)}function xR(s,o,u,p,g,_){const x=ZC(u,g,_),S=KC(u,p)*_;let E=0;const A=GC(s)/2;for(let L=0;L<s.length-1;L++){const B=s[L],V=s[L+1],H=B.dist(V);if(E+H>A){const Y=(A-E)/H,J=Di.number(B.x,V.x,Y),de=Di.number(B.y,V.y,Y),me=new Hl(J,de,V.angleTo(B),L);return me._round(),!x||HC(s,me,S,x,o)?me:void 0}E+=H}}function bR(s,o,u,p,g,_,x,S,E){const A=ZC(p,_,x),L=KC(p,g),B=L*x,V=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return o-B<o/4&&(o=B+o/4),XC(s,V?o/2*S%o:(L/2+2*_)*x*S%o,o,A,u,B,V,!1,E)}function XC(s,o,u,p,g,_,x,S,E){const A=_/2,L=GC(s);let B=0,V=o-u,H=[];for(let Y=0;Y<s.length-1;Y++){const J=s[Y],de=s[Y+1],me=J.dist(de),Pe=de.angleTo(J);for(;V+u<B+me;){V+=u;const xe=(V-B)/me,Te=Di.number(J.x,de.x,xe),ze=Di.number(J.y,de.y,xe);if(Te>=0&&Te<E&&ze>=0&&ze<E&&V-A>=0&&V+A<=L){const He=new Hl(Te,ze,Pe,Y);He._round(),p&&!HC(s,He,_,p,g)||H.push(He)}}B+=me}return S||H.length||x||(H=XC(s,B/2,u,p,g,_,x,!0,E)),H}yt("Anchor",Hl);const Ld=io;function YC(s,o,u,p){const g=[],_=s.image,x=_.pixelRatio,S=_.paddedRect.w-2*Ld,E=_.paddedRect.h-2*Ld;let A={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const L=_.stretchX||[[0,S]],B=_.stretchY||[[0,E]],V=(Be,Et)=>Be+Et[1]-Et[0],H=L.reduce(V,0),Y=B.reduce(V,0),J=S-H,de=E-Y;let me=0,Pe=H,xe=0,Te=Y,ze=0,He=J,dt=0,Lt=de;if(_.content&&p){const Be=_.content,Et=Be[2]-Be[0],wt=Be[3]-Be[1];(_.textFitWidth||_.textFitHeight)&&(A=CC(s)),me=ty(L,0,Be[0]),xe=ty(B,0,Be[1]),Pe=ty(L,Be[0],Be[2]),Te=ty(B,Be[1],Be[3]),ze=Be[0]-me,dt=Be[1]-xe,He=Et-Pe,Lt=wt-Te}const lt=A.x1,rt=A.y1,kt=A.x2-lt,vt=A.y2-rt,mt=(Be,Et,wt,Nt)=>{const Vn=ny(Be.stretch-me,Pe,kt,lt),On=ry(Be.fixed-ze,He,Be.stretch,H),Kr=ny(Et.stretch-xe,Te,vt,rt),ma=ry(Et.fixed-dt,Lt,Et.stretch,Y),fi=ny(wt.stretch-me,Pe,kt,lt),Xr=ry(wt.fixed-ze,He,wt.stretch,H),Fi=ny(Nt.stretch-xe,Te,vt,rt),Ni=ry(Nt.fixed-dt,Lt,Nt.stretch,Y),ji=new k(Vn,Kr),br=new k(fi,Kr),Yr=new k(fi,Fi),Ei=new k(Vn,Fi),mi=new k(On/x,ma/x),Ui=new k(Xr/x,Ni/x),gi=o*Math.PI/180;if(gi){const Sn=Math.sin(gi),qn=Math.cos(gi),er=[qn,-Sn,Sn,qn];ji._matMult(er),br._matMult(er),Ei._matMult(er),Yr._matMult(er)}const Ho=Be.stretch+Be.fixed,oo=Et.stretch+Et.fixed;return{tl:ji,tr:br,bl:Ei,br:Yr,tex:{x:_.paddedRect.x+Ld+Ho,y:_.paddedRect.y+Ld+oo,w:wt.stretch+wt.fixed-Ho,h:Nt.stretch+Nt.fixed-oo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mi,pixelOffsetBR:Ui,minFontScaleX:He/x/kt,minFontScaleY:Lt/x/vt,isSDF:u}};if(p&&(_.stretchX||_.stretchY)){const Be=JC(L,J,H),Et=JC(B,de,Y);for(let wt=0;wt<Be.length-1;wt++){const Nt=Be[wt],Vn=Be[wt+1];for(let On=0;On<Et.length-1;On++)g.push(mt(Nt,Et[On],Vn,Et[On+1]))}}else g.push(mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return g}function ty(s,o,u){let p=0;for(const g of s)p+=Math.max(o,Math.min(u,g[1]))-Math.max(o,Math.min(u,g[0]));return p}function JC(s,o,u){const p=[{fixed:-Ld,stretch:0}];for(const[g,_]of s){const x=p[p.length-1];p.push({fixed:g-x.stretch,stretch:x.stretch}),p.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return p.push({fixed:o+Ld,stretch:u}),p}function ny(s,o,u,p){return s/o*u+p}function ry(s,o,u,p){return s-o*u/p}class iy{constructor(o,u,p,g,_,x,S,E,A,L){var B;if(this.boxStartIndex=o.length,A){let V=x.top,H=x.bottom;const Y=x.collisionPadding;Y&&(V-=Y[1],H+=Y[3]);let J=H-V;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const V=!((B=x.image)===null||B===void 0)&&B.content&&(x.image.textFitWidth||x.image.textFitHeight)?CC(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};V.y1=V.y1*S-E[0],V.y2=V.y2*S+E[2],V.x1=V.x1*S-E[3],V.x2=V.x2*S+E[1];const H=x.collisionPadding;if(H&&(V.x1-=H[0]*S,V.y1-=H[1]*S,V.x2+=H[2]*S,V.y2+=H[3]*S),L){const Y=new k(V.x1,V.y1),J=new k(V.x2,V.y1),de=new k(V.x1,V.y2),me=new k(V.x2,V.y2),Pe=L*Math.PI/180;Y._rotate(Pe),J._rotate(Pe),de._rotate(Pe),me._rotate(Pe),V.x1=Math.min(Y.x,J.x,de.x,me.x),V.x2=Math.max(Y.x,J.x,de.x,me.x),V.y1=Math.min(Y.y,J.y,de.y,me.y),V.y2=Math.max(Y.y,J.y,de.y,me.y)}o.emplaceBack(u.x,u.y,V.x1,V.y1,V.x2,V.y2,p,g,_)}this.boxEndIndex=o.length}}class wR{constructor(o=[],u=(p,g)=>p<g?-1:p>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:p}=this,g=u[o];for(;o>0;){const _=o-1>>1,x=u[_];if(p(g,x)>=0)break;u[o]=x,o=_}u[o]=g}_down(o){const{data:u,compare:p}=this,g=this.length>>1,_=u[o];for(;o<g;){let x=1+(o<<1);const S=x+1;if(S<this.length&&p(u[S],u[x])<0&&(x=S),p(u[x],_)>=0)break;u[o]=u[x],o=x}u[o]=_}}function SR(s,o=1,u=!1){let p=1/0,g=1/0,_=-1/0,x=-1/0;const S=s[0];for(let H=0;H<S.length;H++){const Y=S[H];(!H||Y.x<p)&&(p=Y.x),(!H||Y.y<g)&&(g=Y.y),(!H||Y.x>_)&&(_=Y.x),(!H||Y.y>x)&&(x=Y.y)}const E=Math.min(_-p,x-g);let A=E/2;const L=new wR([],CR);if(E===0)return new k(p,g);for(let H=p;H<_;H+=E)for(let Y=g;Y<x;Y+=E)L.push(new Rd(H+A,Y+A,A,s));let B=function(H){let Y=0,J=0,de=0;const me=H[0];for(let Pe=0,xe=me.length,Te=xe-1;Pe<xe;Te=Pe++){const ze=me[Pe],He=me[Te],dt=ze.x*He.y-He.x*ze.y;J+=(ze.x+He.x)*dt,de+=(ze.y+He.y)*dt,Y+=3*dt}return new Rd(J/Y,de/Y,0,H)}(s),V=L.length;for(;L.length;){const H=L.pop();(H.d>B.d||!B.d)&&(B=H,u&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,V)),H.max-B.d<=o||(A=H.h/2,L.push(new Rd(H.p.x-A,H.p.y-A,A,s)),L.push(new Rd(H.p.x+A,H.p.y-A,A,s)),L.push(new Rd(H.p.x-A,H.p.y+A,A,s)),L.push(new Rd(H.p.x+A,H.p.y+A,A,s)),V+=4)}return u&&(console.log(`num probes: ${V}`),console.log(`best distance: ${B.d}`)),B.p}function CR(s,o){return o.max-s.max}function Rd(s,o,u,p){this.p=new k(s,o),this.h=u,this.d=function(g,_){let x=!1,S=1/0;for(let E=0;E<_.length;E++){const A=_[E];for(let L=0,B=A.length,V=B-1;L<B;V=L++){const H=A[L],Y=A[V];H.y>g.y!=Y.y>g.y&&g.x<(Y.x-H.x)*(g.y-H.y)/(Y.y-H.y)+H.x&&(x=!x),S=Math.min(S,DS(g,H,Y))}}return(x?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var pi;h.aq=void 0,(pi=h.aq||(h.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";const Gl=7,N_=Number.POSITIVE_INFINITY;function QC(s,o){return o[1]!==N_?function(u,p,g){let _=0,x=0;switch(p=Math.abs(p),g=Math.abs(g),u){case"top-right":case"top-left":case"top":x=g-Gl;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Gl}switch(u){case"top-right":case"bottom-right":case"right":_=-p;break;case"top-left":case"bottom-left":case"left":_=p}return[_,x]}(s,o[0],o[1]):function(u,p){let g=0,_=0;p<0&&(p=0);const x=p/Math.SQRT2;switch(u){case"top-right":case"top-left":_=x-Gl;break;case"bottom-right":case"bottom-left":_=-x+Gl;break;case"bottom":_=-p+Gl;break;case"top":_=p-Gl}switch(u){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=p;break;case"right":g=-p}return[g,_]}(s,o[0])}function ek(s,o,u){var p;const g=s.layout,_=(p=g.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(o,{},u);if(_){const S=_.values,E=[];for(let A=0;A<S.length;A+=2){const L=E[A]=S[A],B=S[A+1].map(V=>V*Ur);L.startsWith("top")?B[1]-=Gl:L.startsWith("bottom")&&(B[1]+=Gl),E[A+1]=B}return new xo(E)}const x=g.get("text-variable-anchor");if(x){let S;S=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},u)*Ur,N_]:g.get("text-offset").evaluate(o,{},u).map(A=>A*Ur);const E=[];for(const A of x)E.push(A,QC(A,S));return new xo(E)}return null}function j_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kR(s,o,u,p,g,_,x,S,E,A,L){let B=_.textMaxSize.evaluate(o,{});B===void 0&&(B=x);const V=s.layers[0].layout,H=V.get("icon-offset").evaluate(o,{},L),Y=nk(u.horizontal),J=x/24,de=s.tilePixelRatio*J,me=s.tilePixelRatio*B/24,Pe=s.tilePixelRatio*S,xe=s.tilePixelRatio*V.get("symbol-spacing"),Te=V.get("text-padding")*s.tilePixelRatio,ze=function(Be,Et,wt,Nt=1){const Vn=Be.get("icon-padding").evaluate(Et,{},wt),On=Vn&&Vn.values;return[On[0]*Nt,On[1]*Nt,On[2]*Nt,On[3]*Nt]}(V,o,L,s.tilePixelRatio),He=V.get("text-max-angle")/180*Math.PI,dt=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",Lt=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",lt=V.get("symbol-placement"),rt=xe/2,kt=V.get("icon-text-fit");let vt;p&&kt!=="none"&&(s.allowVerticalPlacement&&u.vertical&&(vt=kC(p,u.vertical,kt,V.get("icon-text-fit-padding"),H,J)),Y&&(p=kC(p,Y,kt,V.get("icon-text-fit-padding"),H,J)));const mt=(Be,Et)=>{Et.x<0||Et.x>=Or||Et.y<0||Et.y>=Or||function(wt,Nt,Vn,On,Kr,ma,fi,Xr,Fi,Ni,ji,br,Yr,Ei,mi,Ui,gi,Ho,oo,Sn,qn,er,To,hr,zd){const os=wt.addToLineVertexArray(Nt,Vn);let as,ga,Go,ri,Ws=0,sf=0,ak=0,sk=0,K_=-1,X_=-1;const qs={};let lk=xd("");if(wt.allowVerticalPlacement&&On.vertical){const Ti=Xr.layout.get("text-rotate").evaluate(qn,{},hr)+90;Go=new iy(Fi,Nt,Ni,ji,br,On.vertical,Yr,Ei,mi,Ti),fi&&(ri=new iy(Fi,Nt,Ni,ji,br,fi,gi,Ho,mi,Ti))}if(Kr){const Ti=Xr.layout.get("icon-rotate").evaluate(qn,{}),Zo=Xr.layout.get("icon-text-fit")!=="none",Qu=YC(Kr,Ti,To,Zo),Fa=fi?YC(fi,Ti,To,Zo):void 0;ga=new iy(Fi,Nt,Ni,ji,br,Kr,gi,Ho,!1,Ti),Ws=4*Qu.length;const ec=wt.iconSizeData;let ss=null;ec.kind==="source"?(ss=[is*Xr.layout.get("icon-size").evaluate(qn,{})],ss[0]>Wl&&De(`${wt.layerIds[0]}: Value for "icon-size" is >= ${tf}. Reduce your "icon-size".`)):ec.kind==="composite"&&(ss=[is*er.compositeIconSizes[0].evaluate(qn,{},hr),is*er.compositeIconSizes[1].evaluate(qn,{},hr)],(ss[0]>Wl||ss[1]>Wl)&&De(`${wt.layerIds[0]}: Value for "icon-size" is >= ${tf}. Reduce your "icon-size".`)),wt.addSymbols(wt.icon,Qu,ss,Sn,oo,qn,h.ah.none,Nt,os.lineStartIndex,os.lineLength,-1,hr),K_=wt.icon.placedSymbolArray.length-1,Fa&&(sf=4*Fa.length,wt.addSymbols(wt.icon,Fa,ss,Sn,oo,qn,h.ah.vertical,Nt,os.lineStartIndex,os.lineLength,-1,hr),X_=wt.icon.placedSymbolArray.length-1)}const uk=Object.keys(On.horizontal);for(const Ti of uk){const Zo=On.horizontal[Ti];if(!as){lk=xd(Zo.text);const Fa=Xr.layout.get("text-rotate").evaluate(qn,{},hr);as=new iy(Fi,Nt,Ni,ji,br,Zo,Yr,Ei,mi,Fa)}const Qu=Zo.positionedLines.length===1;if(ak+=tk(wt,Nt,Zo,ma,Xr,mi,qn,Ui,os,On.vertical?h.ah.horizontal:h.ah.horizontalOnly,Qu?uk:[Ti],qs,K_,er,hr),Qu)break}On.vertical&&(sk+=tk(wt,Nt,On.vertical,ma,Xr,mi,qn,Ui,os,h.ah.vertical,["vertical"],qs,X_,er,hr));const IR=as?as.boxStartIndex:wt.collisionBoxArray.length,PR=as?as.boxEndIndex:wt.collisionBoxArray.length,MR=Go?Go.boxStartIndex:wt.collisionBoxArray.length,AR=Go?Go.boxEndIndex:wt.collisionBoxArray.length,LR=ga?ga.boxStartIndex:wt.collisionBoxArray.length,RR=ga?ga.boxEndIndex:wt.collisionBoxArray.length,zR=ri?ri.boxStartIndex:wt.collisionBoxArray.length,DR=ri?ri.boxEndIndex:wt.collisionBoxArray.length;let Ba=-1;const ay=(Ti,Zo)=>Ti&&Ti.circleDiameter?Math.max(Ti.circleDiameter,Zo):Zo;Ba=ay(as,Ba),Ba=ay(Go,Ba),Ba=ay(ga,Ba),Ba=ay(ri,Ba);const ck=Ba>-1?1:0;ck&&(Ba*=zd/Ur),wt.glyphOffsetArray.length>=Ad.MAX_GLYPHS&&De("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),qn.sortKey!==void 0&&wt.addToSortKeyRanges(wt.symbolInstances.length,qn.sortKey);const $R=ek(Xr,qn,hr),[OR,BR]=function(Ti,Zo){const Qu=Ti.length,Fa=Zo==null?void 0:Zo.values;if((Fa==null?void 0:Fa.length)>0)for(let ec=0;ec<Fa.length;ec+=2){const ss=Fa[ec+1];Ti.emplaceBack(h.aq[Fa[ec]],ss[0],ss[1])}return[Qu,Ti.length]}(wt.textAnchorOffsets,$R);wt.symbolInstances.emplaceBack(Nt.x,Nt.y,qs.right>=0?qs.right:-1,qs.center>=0?qs.center:-1,qs.left>=0?qs.left:-1,qs.vertical||-1,K_,X_,lk,IR,PR,MR,AR,LR,RR,zR,DR,Ni,ak,sk,Ws,sf,ck,0,Yr,Ba,OR,BR)}(s,Et,Be,u,p,g,vt,s.layers[0],s.collisionBoxArray,o.index,o.sourceLayerIndex,s.index,de,[Te,Te,Te,Te],dt,E,Pe,ze,Lt,H,o,_,A,L,x)};if(lt==="line")for(const Be of qC(o.geometry,0,0,Or,Or)){const Et=bR(Be,xe,He,u.vertical||Y,p,24,me,s.overscaling,Or);for(const wt of Et)Y&&ER(s,Y.text,rt,wt)||mt(Be,wt)}else if(lt==="line-center"){for(const Be of o.geometry)if(Be.length>1){const Et=xR(Be,He,u.vertical||Y,p,24,me);Et&&mt(Be,Et)}}else if(o.type==="Polygon")for(const Be of Xc(o.geometry,0)){const Et=SR(Be,16);mt(Be[0],new Hl(Et.x,Et.y,0))}else if(o.type==="LineString")for(const Be of o.geometry)mt(Be,new Hl(Be[0].x,Be[0].y,0));else if(o.type==="Point")for(const Be of o.geometry)for(const Et of Be)mt([Et],new Hl(Et.x,Et.y,0))}function tk(s,o,u,p,g,_,x,S,E,A,L,B,V,H,Y){const J=function(Pe,xe,Te,ze,He,dt,Lt,lt){const rt=ze.layout.get("text-rotate").evaluate(dt,{})*Math.PI/180,kt=[];for(const vt of xe.positionedLines)for(const mt of vt.positionedGlyphs){if(!mt.rect)continue;const Be=mt.rect||{};let Et=yC+1,wt=!0,Nt=1,Vn=0;const On=(He||lt)&&mt.vertical,Kr=mt.metrics.advance*mt.scale/2;if(lt&&xe.verticalizable&&(Vn=vt.lineOffset/2-(mt.imageName?-(Ur-mt.metrics.width*mt.scale)/2:(mt.scale-1)*Ur)),mt.imageName){const Sn=Lt[mt.imageName];wt=Sn.sdf,Nt=Sn.pixelRatio,Et=io/Nt}const ma=He?[mt.x+Kr,mt.y]:[0,0];let fi=He?[0,0]:[mt.x+Kr+Te[0],mt.y+Te[1]-Vn],Xr=[0,0];On&&(Xr=fi,fi=[0,0]);const Fi=mt.metrics.isDoubleResolution?2:1,Ni=(mt.metrics.left-Et)*mt.scale-Kr+fi[0],ji=(-mt.metrics.top-Et)*mt.scale+fi[1],br=Ni+Be.w/Fi*mt.scale/Nt,Yr=ji+Be.h/Fi*mt.scale/Nt,Ei=new k(Ni,ji),mi=new k(br,ji),Ui=new k(Ni,Yr),gi=new k(br,Yr);if(On){const Sn=new k(-Kr,Kr-Qp),qn=-Math.PI/2,er=Ur/2-Kr,To=new k(5-Qp-er,-(mt.imageName?er:0)),hr=new k(...Xr);Ei._rotateAround(qn,Sn)._add(To)._add(hr),mi._rotateAround(qn,Sn)._add(To)._add(hr),Ui._rotateAround(qn,Sn)._add(To)._add(hr),gi._rotateAround(qn,Sn)._add(To)._add(hr)}if(rt){const Sn=Math.sin(rt),qn=Math.cos(rt),er=[qn,-Sn,Sn,qn];Ei._matMult(er),mi._matMult(er),Ui._matMult(er),gi._matMult(er)}const Ho=new k(0,0),oo=new k(0,0);kt.push({tl:Ei,tr:mi,bl:Ui,br:gi,tex:Be,writingMode:xe.writingMode,glyphOffset:ma,sectionIndex:mt.sectionIndex,isSDF:wt,pixelOffsetTL:Ho,pixelOffsetBR:oo,minFontScaleX:0,minFontScaleY:0})}return kt}(0,u,S,g,_,x,p,s.allowVerticalPlacement),de=s.textSizeData;let me=null;de.kind==="source"?(me=[is*g.layout.get("text-size").evaluate(x,{})],me[0]>Wl&&De(`${s.layerIds[0]}: Value for "text-size" is >= ${tf}. Reduce your "text-size".`)):de.kind==="composite"&&(me=[is*H.compositeTextSizes[0].evaluate(x,{},Y),is*H.compositeTextSizes[1].evaluate(x,{},Y)],(me[0]>Wl||me[1]>Wl)&&De(`${s.layerIds[0]}: Value for "text-size" is >= ${tf}. Reduce your "text-size".`)),s.addSymbols(s.text,J,me,S,_,x,A,o,E.lineStartIndex,E.lineLength,V,Y);for(const Pe of L)B[Pe]=s.text.placedSymbolArray.length-1;return 4*J.length}function nk(s){for(const o in s)return s[o];return null}function ER(s,o,u,p){const g=s.compareText;if(o in g){const _=g[o];for(let x=_.length-1;x>=0;x--)if(p.dist(_[x])<u)return!0}else g[o]=[];return g[o].push(p),!1}const rk=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class U_{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=p>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=rk[15&p];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(o,2,1),[S]=new Uint32Array(o,4,1);return new U_(S,x,_,o)}constructor(o,u=64,p=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const _=rk.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,S=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${p}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=u,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return V_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,E=[0,_.length-1,0],A=[];for(;E.length;){const L=E.pop()||0,B=E.pop()||0,V=E.pop()||0;if(B-V<=S){for(let de=V;de<=B;de++){const me=x[2*de],Pe=x[2*de+1];me>=o&&me<=p&&Pe>=u&&Pe<=g&&A.push(_[de])}continue}const H=V+B>>1,Y=x[2*H],J=x[2*H+1];Y>=o&&Y<=p&&J>=u&&J<=g&&A.push(_[H]),(L===0?o<=Y:u<=J)&&(E.push(V),E.push(H-1),E.push(1-L)),(L===0?p>=Y:g>=J)&&(E.push(H+1),E.push(B),E.push(1-L))}return A}within(o,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],E=[],A=p*p;for(;S.length;){const L=S.pop()||0,B=S.pop()||0,V=S.pop()||0;if(B-V<=x){for(let de=V;de<=B;de++)ok(_[2*de],_[2*de+1],o,u)<=A&&E.push(g[de]);continue}const H=V+B>>1,Y=_[2*H],J=_[2*H+1];ok(Y,J,o,u)<=A&&E.push(g[H]),(L===0?o-p<=Y:u-p<=J)&&(S.push(V),S.push(H-1),S.push(1-L)),(L===0?o+p>=Y:u+p>=J)&&(S.push(H+1),S.push(B),S.push(1-L))}return E}}function V_(s,o,u,p,g,_){if(g-p<=u)return;const x=p+g>>1;ik(s,o,x,p,g,_),V_(s,o,u,p,x-1,1-_),V_(s,o,u,x+1,g,1-_)}function ik(s,o,u,p,g,_){for(;g>p;){if(g-p>600){const A=g-p+1,L=u-p+1,B=Math.log(A),V=.5*Math.exp(2*B/3),H=.5*Math.sqrt(B*V*(A-V)/A)*(L-A/2<0?-1:1);ik(s,o,u,Math.max(p,Math.floor(u-L*V/A+H)),Math.min(g,Math.floor(u+(A-L)*V/A+H)),_)}const x=o[2*u+_];let S=p,E=g;for(of(s,o,p,u),o[2*g+_]>x&&of(s,o,p,g);S<E;){for(of(s,o,S,E),S++,E--;o[2*S+_]<x;)S++;for(;o[2*E+_]>x;)E--}o[2*p+_]===x?of(s,o,p,E):(E++,of(s,o,E,g)),E<=u&&(p=E+1),u<=E&&(g=E-1)}}function of(s,o,u,p){W_(s,u,p),W_(o,2*u,2*p),W_(o,2*u+1,2*p+1)}function W_(s,o,u){const p=s[o];s[o]=s[u],s[u]=p}function ok(s,o,u,p){const g=s-u,_=o-p;return g*g+_*_}var q_;h.bg=void 0,(q_=h.bg||(h.bg={})).create="create",q_.load="load",q_.fullLoad="fullLoad";let oy=null,af=[];const H_=1e3/60,G_="loadTime",Z_="fullLoadTime",TR={mark(s){performance.mark(s)},frame(s){const o=s;oy!=null&&af.push(o-oy),oy=o},clearMetrics(){oy=null,af=[],performance.clearMeasures(G_),performance.clearMeasures(Z_);for(const s in h.bg)performance.clearMarks(h.bg[s])},getPerformanceMetrics(){performance.measure(G_,h.bg.create,h.bg.load),performance.measure(Z_,h.bg.create,h.bg.fullLoad);const s=performance.getEntriesByName(G_)[0].duration,o=performance.getEntriesByName(Z_)[0].duration,u=af.length,p=1/(af.reduce((_,x)=>_+x,0)/u/1e3),g=af.filter(_=>_>H_).reduce((_,x)=>_+(x-H_)/H_,0);return{loadTime:s,fullLoadTime:o,fps:p,percentDroppedFrames:g/(u+g)*100,totalFrames:u}}};h.$=class extends N{},h.A=kd,h.B=n_,h.C=function(s){if(Ve==null){const o=s.navigator?s.navigator.userAgent:null;Ve=!!s.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return Ve},h.D=xt,h.E=Dt,h.F=class{constructor(s,o){this.target=s,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new vR(()=>this.process()),this.subscription=function(u,p,g,_){return u.addEventListener(p,g,!1),{unsubscribe:()=>{u.removeEventListener(p,g,!1)}}}(this.target,"message",u=>this.receive(u)),this.globalScope=Re(self)?s:window}registerMessageHandler(s,o){this.messageHandlers[s]=o}sendAsync(s,o){return new Promise((u,p)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:u,reject:p},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Ll(s.data,_)});this.target.postMessage(x,{transfer:_})})}receive(s){const o=s.data,u=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[u];const p=this.abortControllers[u];return delete this.abortControllers[u],void(p&&p.abort())}if(Re(self)||o.mustQueue)return this.tasks[u]=o,this.taskQueue.push(u),void this.invoker.trigger();this.processTask(u,o)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),o=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(s,o)}processTask(s,o){return l(this,void 0,void 0,function*(){if(o.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(o.error?g.reject(Rl(o.error)):g.resolve(Rl(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const u=Rl(o.data),p=new AbortController;this.abortControllers[s]=p;try{const g=yield this.messageHandlers[o.type](o.sourceMapId,u,p);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,o,u){const p=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Ll(o):null,data:Ll(u,p)};this.target.postMessage(g,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.G=yn,h.H=function(){var s=new kd(16);return kd!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},h.I=P_,h.J=function(s,o,u){var p,g,_,x,S,E,A,L,B,V,H,Y,J=u[0],de=u[1],me=u[2];return o===s?(s[12]=o[0]*J+o[4]*de+o[8]*me+o[12],s[13]=o[1]*J+o[5]*de+o[9]*me+o[13],s[14]=o[2]*J+o[6]*de+o[10]*me+o[14],s[15]=o[3]*J+o[7]*de+o[11]*me+o[15]):(g=o[1],_=o[2],x=o[3],S=o[4],E=o[5],A=o[6],L=o[7],B=o[8],V=o[9],H=o[10],Y=o[11],s[0]=p=o[0],s[1]=g,s[2]=_,s[3]=x,s[4]=S,s[5]=E,s[6]=A,s[7]=L,s[8]=B,s[9]=V,s[10]=H,s[11]=Y,s[12]=p*J+S*de+B*me+o[12],s[13]=g*J+E*de+V*me+o[13],s[14]=_*J+A*de+H*me+o[14],s[15]=x*J+L*de+Y*me+o[15]),s},h.K=function(s,o,u){var p=u[0],g=u[1],_=u[2];return s[0]=o[0]*p,s[1]=o[1]*p,s[2]=o[2]*p,s[3]=o[3]*p,s[4]=o[4]*g,s[5]=o[5]*g,s[6]=o[6]*g,s[7]=o[7]*g,s[8]=o[8]*_,s[9]=o[9]*_,s[10]=o[10]*_,s[11]=o[11]*_,s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},h.L=FS,h.M=function(s,o){const u={};for(let p=0;p<o.length;p++){const g=o[p];g in s&&(u[g]=s[g])}return u},h.N=ql,h.O=zC,h.P=k,h.Q=DC,h.R=Wo,h.S=qo,h.T=md,h.U=D,h.V=O,h.W=Ue,h.X=Or,h.Y=C,h.Z=nf,h._=l,h.a=zt,h.a$=function(s,o){var u=s[0],p=s[1],g=s[2],_=s[3],x=s[4],S=s[5],E=s[6],A=s[7],L=s[8],B=s[9],V=s[10],H=s[11],Y=s[12],J=s[13],de=s[14],me=s[15],Pe=o[0],xe=o[1],Te=o[2],ze=o[3],He=o[4],dt=o[5],Lt=o[6],lt=o[7],rt=o[8],kt=o[9],vt=o[10],mt=o[11],Be=o[12],Et=o[13],wt=o[14],Nt=o[15];return Math.abs(u-Pe)<=Bi*Math.max(1,Math.abs(u),Math.abs(Pe))&&Math.abs(p-xe)<=Bi*Math.max(1,Math.abs(p),Math.abs(xe))&&Math.abs(g-Te)<=Bi*Math.max(1,Math.abs(g),Math.abs(Te))&&Math.abs(_-ze)<=Bi*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(x-He)<=Bi*Math.max(1,Math.abs(x),Math.abs(He))&&Math.abs(S-dt)<=Bi*Math.max(1,Math.abs(S),Math.abs(dt))&&Math.abs(E-Lt)<=Bi*Math.max(1,Math.abs(E),Math.abs(Lt))&&Math.abs(A-lt)<=Bi*Math.max(1,Math.abs(A),Math.abs(lt))&&Math.abs(L-rt)<=Bi*Math.max(1,Math.abs(L),Math.abs(rt))&&Math.abs(B-kt)<=Bi*Math.max(1,Math.abs(B),Math.abs(kt))&&Math.abs(V-vt)<=Bi*Math.max(1,Math.abs(V),Math.abs(vt))&&Math.abs(H-mt)<=Bi*Math.max(1,Math.abs(H),Math.abs(mt))&&Math.abs(Y-Be)<=Bi*Math.max(1,Math.abs(Y),Math.abs(Be))&&Math.abs(J-Et)<=Bi*Math.max(1,Math.abs(J),Math.abs(Et))&&Math.abs(de-wt)<=Bi*Math.max(1,Math.abs(de),Math.abs(wt))&&Math.abs(me-Nt)<=Bi*Math.max(1,Math.abs(me),Math.abs(Nt))},h.a0=ln,h.a1=F_,h.a2=Ge,h.a3=s=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(u=>{o.onloadstart=()=>{u(o)};for(const p of s){const g=window.document.createElement("source");Vt(p)||(o.crossOrigin="Anonymous"),g.src=p,o.appendChild(g)}})},h.a4=function(){return le++},h.a5=ut,h.a6=Ad,h.a7=wp,h.a8=Yu,h.a9=jC,h.aA=function(s){if(s.type==="custom")return new yR(s);switch(s.type){case"background":return new fR(s);case"circle":return new tL(s);case"fill":return new vL(s);case"fill-extrusion":return new RL(s);case"heatmap":return new rL(s);case"hillshade":return new oL(s);case"line":return new jL(s);case"raster":return new gR(s);case"symbol":return new ey(s)}},h.aB=Ce,h.aC=function(s,o){if(!s)return[{command:"setStyle",args:[o]}];let u=[];try{if(!ft(s.version,o.version))return[{command:"setStyle",args:[o]}];ft(s.center,o.center)||u.push({command:"setCenter",args:[o.center]}),ft(s.zoom,o.zoom)||u.push({command:"setZoom",args:[o.zoom]}),ft(s.bearing,o.bearing)||u.push({command:"setBearing",args:[o.bearing]}),ft(s.pitch,o.pitch)||u.push({command:"setPitch",args:[o.pitch]}),ft(s.sprite,o.sprite)||u.push({command:"setSprite",args:[o.sprite]}),ft(s.glyphs,o.glyphs)||u.push({command:"setGlyphs",args:[o.glyphs]}),ft(s.transition,o.transition)||u.push({command:"setTransition",args:[o.transition]}),ft(s.light,o.light)||u.push({command:"setLight",args:[o.light]}),ft(s.terrain,o.terrain)||u.push({command:"setTerrain",args:[o.terrain]}),ft(s.sky,o.sky)||u.push({command:"setSky",args:[o.sky]}),ft(s.projection,o.projection)||u.push({command:"setProjection",args:[o.projection]});const p={},g=[];(function(x,S,E,A){let L;for(L in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(S,L)||ir(L,E,A));for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&(Object.prototype.hasOwnProperty.call(x,L)?ft(x[L],S[L])||(x[L].type==="geojson"&&S[L].type==="geojson"&&zn(x,S,L)?qt(E,{command:"setGeoJSONSourceData",args:[L,S[L].data]}):Ct(L,S,E,A)):fn(L,S,E))})(s.sources,o.sources,g,p);const _=[];s.layers&&s.layers.forEach(x=>{"source"in x&&p[x.source]?u.push({command:"removeLayer",args:[x.id]}):_.push(x)}),u=u.concat(g),function(x,S,E){S=S||[];const A=(x=x||[]).map(ei),L=S.map(ei),B=x.reduce(vr,{}),V=S.reduce(vr,{}),H=A.slice(),Y=Object.create(null);let J,de,me,Pe,xe;for(let Te=0,ze=0;Te<A.length;Te++)J=A[Te],Object.prototype.hasOwnProperty.call(V,J)?ze++:(qt(E,{command:"removeLayer",args:[J]}),H.splice(H.indexOf(J,ze),1));for(let Te=0,ze=0;Te<L.length;Te++)J=L[L.length-1-Te],H[H.length-1-Te]!==J&&(Object.prototype.hasOwnProperty.call(B,J)?(qt(E,{command:"removeLayer",args:[J]}),H.splice(H.lastIndexOf(J,H.length-ze),1)):ze++,Pe=H[H.length-Te],qt(E,{command:"addLayer",args:[V[J],Pe]}),H.splice(H.length-Te,0,J),Y[J]=!0);for(let Te=0;Te<L.length;Te++)if(J=L[Te],de=B[J],me=V[J],!Y[J]&&!ft(de,me))if(ft(de.source,me.source)&&ft(de["source-layer"],me["source-layer"])&&ft(de.type,me.type)){for(xe in yr(de.layout,me.layout,E,J,null,"setLayoutProperty"),yr(de.paint,me.paint,E,J,null,"setPaintProperty"),ft(de.filter,me.filter)||qt(E,{command:"setFilter",args:[J,me.filter]}),ft(de.minzoom,me.minzoom)&&ft(de.maxzoom,me.maxzoom)||qt(E,{command:"setLayerZoomRange",args:[J,me.minzoom,me.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?yr(de[xe],me[xe],E,J,xe.slice(6),"setPaintProperty"):ft(de[xe],me[xe])||qt(E,{command:"setLayerProperty",args:[J,xe,me[xe]]}));for(xe in me)Object.prototype.hasOwnProperty.call(me,xe)&&!Object.prototype.hasOwnProperty.call(de,xe)&&xe!=="layout"&&xe!=="paint"&&xe!=="filter"&&xe!=="metadata"&&xe!=="minzoom"&&xe!=="maxzoom"&&(xe.indexOf("paint.")===0?yr(de[xe],me[xe],E,J,xe.slice(6),"setPaintProperty"):ft(de[xe],me[xe])||qt(E,{command:"setLayerProperty",args:[J,xe,me[xe]]}))}else qt(E,{command:"removeLayer",args:[J]}),Pe=H[H.lastIndexOf(J)+1],qt(E,{command:"addLayer",args:[me,Pe]})}(_,o.layers,u)}catch(p){console.warn("Unable to compute style diff:",p),u=[{command:"setStyle",args:[o]}]}return u},h.aD=function(s){const o=[],u=s.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),s.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},h.aE=function s(o,u){if(Array.isArray(o)){if(!Array.isArray(u)||o.length!==u.length)return!1;for(let p=0;p<o.length;p++)if(!s(o[p],u[p]))return!1;return!0}if(typeof o=="object"&&o!==null&&u!==null){if(typeof u!="object"||Object.keys(o).length!==Object.keys(u).length)return!1;for(const p in o)if(!s(o[p],u[p]))return!1;return!0}return o===u},h.aF=Ie,h.aG=K,h.aH=class extends Zu{constructor(s,o){super(s,o),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},h.aI=jg,h.aJ=class extends Zu{constructor(s,o){super(s,o),this.current=G4}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let o=1;o<16;o++)if(s[o]!==this.current[o]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},h.aK=IS,h.aL=PS,h.aM=Rn,h.aN=class extends Zu{constructor(s,o){super(s,o),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},h.aO=class extends Zu{constructor(s,o){super(s,o),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},h.aP=function(s,o,u,p,g,_,x){var S=1/(o-u),E=1/(p-g),A=1/(_-x);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(o+u)*S,s[13]=(g+p)*E,s[14]=(x+_)*A,s[15]=1,s},h.aQ=eL,h.aR=class extends be{},h.aS=qL,h.aT=class extends Me{},h.aU=y_,h.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},h.aW=WS,h.aX=di,h.aY=Vo,h.aZ=class extends bt{},h.a_=function(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]&&s[3]===o[3]&&s[4]===o[4]&&s[5]===o[5]&&s[6]===o[6]&&s[7]===o[7]&&s[8]===o[8]&&s[9]===o[9]&&s[10]===o[10]&&s[11]===o[11]&&s[12]===o[12]&&s[13]===o[13]&&s[14]===o[14]&&s[15]===o[15]},h.aa=function(s){const o={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,g,_)=>{const x=g||_;return o[p]=!x||x.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o},h.ab=function(s,o){const u=[];for(const p in s)p in o||u.push(p);return u},h.ac=te,h.ad=function(s,o,u){var p=Math.sin(u),g=Math.cos(u),_=o[0],x=o[1],S=o[2],E=o[3],A=o[4],L=o[5],B=o[6],V=o[7];return o!==s&&(s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[0]=_*g+A*p,s[1]=x*g+L*p,s[2]=S*g+B*p,s[3]=E*g+V*p,s[4]=A*g-_*p,s[5]=L*g-x*p,s[6]=B*g-S*p,s[7]=V*g-E*p,s},h.ae=function(s){var o=new kd(16);return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o},h.af=qg,h.ag=function(s,o){let u=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=s,S=g?te($i.interpolationFactor(g,o,_,x),0,1):0;s.kind==="camera"?p=Di.number(s.minSize,s.maxSize,S):u=S}return{uSizeT:u,uSize:p}},h.ai=function(s,{uSize:o,uSizeT:u},{lowerSize:p,upperSize:g}){return s.kind==="source"?p/is:s.kind==="composite"?Di.number(p/is,g/is,u):o},h.aj=R_,h.ak=function(s,o,u,p){const g=o.y-s.y,_=o.x-s.x,x=p.y-u.y,S=p.x-u.x,E=x*_-S*g;if(E===0)return null;const A=(S*(s.y-u.y)-x*(s.x-u.x))/E;return new k(s.x+A*_,s.y+A*g)},h.al=qC,h.am=RS,h.an=f_,h.ao=function(s){let o=1/0,u=1/0,p=-1/0,g=-1/0;for(const _ of s)o=Math.min(o,_.x),u=Math.min(u,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return[o,u,p,g]},h.ap=Ur,h.ar=L_,h.as=function(s,o){var u=o[0],p=o[1],g=o[2],_=o[3],x=o[4],S=o[5],E=o[6],A=o[7],L=o[8],B=o[9],V=o[10],H=o[11],Y=o[12],J=o[13],de=o[14],me=o[15],Pe=u*S-p*x,xe=u*E-g*x,Te=u*A-_*x,ze=p*E-g*S,He=p*A-_*S,dt=g*A-_*E,Lt=L*J-B*Y,lt=L*de-V*Y,rt=L*me-H*Y,kt=B*de-V*J,vt=B*me-H*J,mt=V*me-H*de,Be=Pe*mt-xe*vt+Te*kt+ze*rt-He*lt+dt*Lt;return Be?(s[0]=(S*mt-E*vt+A*kt)*(Be=1/Be),s[1]=(g*vt-p*mt-_*kt)*Be,s[2]=(J*dt-de*He+me*ze)*Be,s[3]=(V*He-B*dt-H*ze)*Be,s[4]=(E*rt-x*mt-A*lt)*Be,s[5]=(u*mt-g*rt+_*lt)*Be,s[6]=(de*Te-Y*dt-me*xe)*Be,s[7]=(L*dt-V*Te+H*xe)*Be,s[8]=(x*vt-S*rt+A*Lt)*Be,s[9]=(p*rt-u*vt-_*Lt)*Be,s[10]=(Y*He-J*Te+me*Pe)*Be,s[11]=(B*Te-L*He-H*Pe)*Be,s[12]=(S*lt-x*kt-E*Lt)*Be,s[13]=(u*kt-p*lt+g*Lt)*Be,s[14]=(J*xe-Y*ze-de*Pe)*Be,s[15]=(L*ze-B*xe+V*Pe)*Be,s):null},h.at=j_,h.au=A_,h.av=U_,h.aw=function(){const s={},o=Se.$version;for(const u in Se.$root){const p=Se.$root[u];if(p.required){let g=null;g=u==="version"?o:p.type==="array"?[]:{},g!=null&&(s[u]=g)}}return s},h.ax=$p,h.ay=Un,h.az=function(s){s=s.slice();const o=Object.create(null);for(let u=0;u<s.length;u++)o[s[u].id]=s[u];for(let u=0;u<s.length;u++)"ref"in s[u]&&(s[u]=bn(s[u],o[s[u].ref]));return s},h.b=et,h.b0=function(s,o){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},h.b1=function(s,o,u){return s[0]=o[0]*u[0],s[1]=o[1]*u[1],s[2]=o[2]*u[2],s[3]=o[3]*u[3],s},h.b2=function(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]},h.b3=oe,h.b4=BC,h.b5=$C,h.b6=function(s,o,u,p,g){var _,x=1/Math.tan(o/2);return s[0]=x/u,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+p)*(_=1/(p-g)),s[14]=2*g*p*_):(s[10]=-1,s[14]=-2*p),s},h.b7=function(s,o,u){var p=Math.sin(u),g=Math.cos(u),_=o[4],x=o[5],S=o[6],E=o[7],A=o[8],L=o[9],B=o[10],V=o[11];return o!==s&&(s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[4]=_*g+A*p,s[5]=x*g+L*p,s[6]=S*g+B*p,s[7]=E*g+V*p,s[8]=A*g-_*p,s[9]=L*g-x*p,s[10]=B*g-S*p,s[11]=V*g-E*p,s},h.b8=F,h.b9=G,h.bA=cC,h.bB=function(s){return s.message===At},h.bC=kl,h.bD=no,h.ba=function(s){return s*Math.PI/180},h.bb=function(s,o){const{x:u,y:p}=nf.fromLngLat(o);return!(s<0||s>25||p<0||p>=1||u<0||u>=1)},h.bc=function(s,o){return s[0]=o[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=o[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},h.bd=class extends z{},h.be=O_,h.bf=TR,h.bh=on,h.bi=function(s,o){zt.REGISTERED_PROTOCOLS[s]=o},h.bj=function(s){delete zt.REGISTERED_PROTOCOLS[s]},h.bk=function(s,o){const u={};for(let g=0;g<s.length;g++){const _=o&&o[s[g].id]||Pg(s[g]);o&&(o[s[g].id]=_);let x=u[_];x||(x=u[_]=[]),x.push(s[g])}const p=[];for(const g in u)p.push(u[g]);return p},h.bl=yt,h.bm=NC,h.bn=UC,h.bo=_C,h.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Or/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const o=s.bucket.layers[0],u=o.layout,p=o._unevaluatedLayout._values,g={layoutIconSize:p["icon-size"].possiblyEvaluate(new Xn(s.bucket.zoom+1),s.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Xn(s.bucket.zoom+1),s.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Xn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.textSizeData;g.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Xn(A),s.canonical),p["text-size"].possiblyEvaluate(new Xn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.iconSizeData;g.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Xn(A),s.canonical),p["icon-size"].possiblyEvaluate(new Xn(L),s.canonical)]}const _=u.get("text-line-height")*Ur,x=u.get("text-rotation-alignment")!=="viewport"&&u.get("symbol-placement")!=="point",S=u.get("text-keep-upright"),E=u.get("text-size");for(const A of s.bucket.features){const L=u.get("text-font").evaluate(A,{},s.canonical).join(","),B=E.evaluate(A,{},s.canonical),V=g.layoutTextSize.evaluate(A,{},s.canonical),H=g.layoutIconSize.evaluate(A,{},s.canonical),Y={horizontal:{},vertical:void 0},J=A.text;let de,me=[0,0];if(J){const Te=J.toString(),ze=u.get("text-letter-spacing").evaluate(A,{},s.canonical)*Ur,He=r_(Te)?ze:0,dt=u.get("text-anchor").evaluate(A,{},s.canonical),Lt=ek(o,A,s.canonical);if(!Lt){const vt=u.get("text-radial-offset").evaluate(A,{},s.canonical);me=vt?QC(dt,[vt*Ur,N_]):u.get("text-offset").evaluate(A,{},s.canonical).map(mt=>mt*Ur)}let lt=x?"center":u.get("text-justify").evaluate(A,{},s.canonical);const rt=u.get("symbol-placement")==="point"?u.get("text-max-width").evaluate(A,{},s.canonical)*Ur:1/0,kt=()=>{s.bucket.allowVerticalPlacement&&Op(Te)&&(Y.vertical=Yg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,rt,_,dt,"left",He,me,h.ah.vertical,!0,V,B))};if(!x&&Lt){const vt=new Set;if(lt==="auto")for(let Be=0;Be<Lt.values.length;Be+=2)vt.add(j_(Lt.values[Be]));else vt.add(lt);let mt=!1;for(const Be of vt)if(!Y.horizontal[Be])if(mt)Y.horizontal[Be]=Y.horizontal[0];else{const Et=Yg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,rt,_,"center",Be,He,me,h.ah.horizontal,!1,V,B);Et&&(Y.horizontal[Be]=Et,mt=Et.positionedLines.length===1)}kt()}else{lt==="auto"&&(lt=j_(dt));const vt=Yg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,rt,_,dt,lt,He,me,h.ah.horizontal,!1,V,B);vt&&(Y.horizontal[lt]=vt),kt(),Op(Te)&&x&&S&&(Y.vertical=Yg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,rt,_,dt,lt,He,me,h.ah.vertical,!1,V,B))}}let Pe=!1;if(A.icon&&A.icon.name){const Te=s.imageMap[A.icon.name];Te&&(de=uR(s.imagePositions[A.icon.name],u.get("icon-offset").evaluate(A,{},s.canonical),u.get("icon-anchor").evaluate(A,{},s.canonical)),Pe=!!Te.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Pe:s.bucket.sdfIcons!==Pe&&De("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Te.pixelRatio!==s.bucket.pixelRatio||u.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const xe=nk(Y.horizontal)||Y.vertical;s.bucket.iconsInText=!!xe&&xe.iconsInText,(xe||de)&&kR(s.bucket,A,Y,de,s.imageMap,g,V,H,me,Pe,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},h.bq=k_,h.br=w_,h.bs=C_,h.bt=Ul,h.bu=T_,h.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},h.bw=function(s,o,u,p,g){return l(this,void 0,void 0,function*(){if(O())try{return yield Ue(s,o,u,p,g)}catch{}return function(_,x,S,E,A){const L=_.width,B=_.height;ct&&St||(ct=new OffscreenCanvas(L,B),St=ct.getContext("2d",{willReadFrequently:!0})),ct.width=L,ct.height=B,St.drawImage(_,0,0,L,B);const V=St.getImageData(x,S,E,A);return St.clearRect(0,0,L,B),V.data}(s,o,u,p,g)})},h.bx=FC,h.by=b,h.bz=w,h.c=jt,h.d=s=>l(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(o)}catch(u){throw new Error(`Could not load image because of ${u.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.e=ae,h.f=s=>new Promise((o,u)=>{const p=new Image;p.onload=()=>{o(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=$e})},p.onerror=()=>u(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});p.src=s.byteLength?URL.createObjectURL(g):$e}),h.g=Xt,h.h=(s,o)=>Mn(ae(s,{type:"json"}),o),h.i=Re,h.j=_t,h.k=Cn,h.l=(s,o)=>Mn(ae(s,{type:"arrayBuffer"}),o),h.m=Mn,h.n=function(s){return new T_(s).readFields(nR,[])},h.o=Hp,h.p=vC,h.q=v,h.r=t_,h.s=Vt,h.t=zp,h.u=Ns,h.v=Se,h.w=De,h.x=function([s,o,u]){return o+=90,o*=Math.PI/180,u*=Math.PI/180,{x:s*Math.cos(o)*Math.sin(u),y:s*Math.sin(o)*Math.sin(u),z:s*Math.cos(u)}},h.y=Di,h.z=Xn}),a("worker",["./shared"],function(h){class l{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,W){for(const ce of q){this._layerConfigs[ce.id]=ce;const _e=this._layers[ce.id]=h.aA(ce);_e._featureFilter=h.a7(_e.filter),this.keyCache[ce.id]&&delete this.keyCache[ce.id]}for(const ce of W)delete this.keyCache[ce],delete this._layerConfigs[ce],delete this._layers[ce];this.familiesBySource={};const Q=h.bk(Object.values(this._layerConfigs),this.keyCache);for(const ce of Q){const _e=ce.map(ke=>this._layers[ke.id]),we=_e[0];if(we.visibility==="none")continue;const re=we.source||"";let pe=this.familiesBySource[re];pe||(pe=this.familiesBySource[re]={});const Le=we.sourceLayer||"_geojsonTileLayer";let Oe=pe[Le];Oe||(Oe=pe[Le]=[]),Oe.push(_e)}}}class b{constructor(q){const W={},Q=[];for(const re in q){const pe=q[re],Le=W[re]={};for(const Oe in pe){const ke=pe[+Oe];if(!ke||ke.bitmap.width===0||ke.bitmap.height===0)continue;const We={x:0,y:0,w:ke.bitmap.width+2,h:ke.bitmap.height+2};Q.push(We),Le[Oe]={rect:We,metrics:ke.metrics}}}const{w:ce,h:_e}=h.p(Q),we=new h.o({width:ce||1,height:_e||1});for(const re in q){const pe=q[re];for(const Le in pe){const Oe=pe[+Le];if(!Oe||Oe.bitmap.width===0||Oe.bitmap.height===0)continue;const ke=W[re][Le].rect;h.o.copy(Oe.bitmap,we,{x:0,y:0},{x:ke.x+1,y:ke.y+1},Oe.bitmap)}}this.image=we,this.positions=W}}h.bl("GlyphAtlas",b);class w{constructor(q){this.tileID=new h.S(q.tileID.overscaledZ,q.tileID.wrap,q.tileID.canonical.z,q.tileID.canonical.x,q.tileID.canonical.y),this.uid=q.uid,this.zoom=q.zoom,this.pixelRatio=q.pixelRatio,this.tileSize=q.tileSize,this.source=q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=q.showCollisionBoxes,this.collectResourceTiming=!!q.collectResourceTiming,this.returnDependencies=!!q.returnDependencies,this.promoteId=q.promoteId,this.inFlightDependencies=[]}parse(q,W,Q,ce){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=q,this.collisionBoxArray=new h.a5;const _e=new h.bm(Object.keys(q.layers).sort()),we=new h.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const re={},pe={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},Le=W.familiesBySource[this.source];for(const Gt in Le){const Ln=q.layers[Gt];if(!Ln)continue;Ln.version===1&&h.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const or=_e.encode(Gt),Zr=[];for(let ti=0;ti<Ln.length;ti++){const Si=Ln.feature(ti),fl=we.getId(Si,Gt);Zr.push({feature:Si,id:fl,index:ti,sourceLayerIndex:or})}for(const ti of Le[Gt]){const Si=ti[0];Si.source!==this.source&&h.w(`layer.source = ${Si.source} does not equal this.source = ${this.source}`),Si.minzoom&&this.zoom<Math.floor(Si.minzoom)||Si.maxzoom&&this.zoom>=Si.maxzoom||Si.visibility!=="none"&&(I(ti,this.zoom,Q),(re[Si.id]=Si.createBucket({index:we.bucketLayerIDs.length,layers:ti,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:or,sourceID:this.source})).populate(Zr,pe,this.tileID.canonical),we.bucketLayerIDs.push(ti.map(fl=>fl.id)))}}const Oe=h.aF(pe.glyphDependencies,Gt=>Object.keys(Gt).map(Number));this.inFlightDependencies.forEach(Gt=>Gt==null?void 0:Gt.abort()),this.inFlightDependencies=[];let ke=Promise.resolve({});if(Object.keys(Oe).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),ke=ce.sendAsync({type:"GG",data:{stacks:Oe,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const We=Object.keys(pe.iconDependencies);let gt=Promise.resolve({});if(We.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),gt=ce.sendAsync({type:"GI",data:{icons:We,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const It=Object.keys(pe.patternDependencies);let en=Promise.resolve({});if(It.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),en=ce.sendAsync({type:"GI",data:{icons:It,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const[Bt,vn,tn]=yield Promise.all([ke,gt,en]),Dr=new b(Bt),dr=new h.bo(vn,tn);for(const Gt in re){const Ln=re[Gt];Ln instanceof h.a6?(I(Ln.layers,this.zoom,Q),h.bp({bucket:Ln,glyphMap:Bt,glyphPositions:Dr.positions,imageMap:vn,imagePositions:dr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ln.hasPattern&&(Ln instanceof h.bq||Ln instanceof h.br||Ln instanceof h.bs)&&(I(Ln.layers,this.zoom,Q),Ln.addFeatures(pe,this.tileID.canonical,dr.patternPositions))}return this.status="done",{buckets:Object.values(re).filter(Gt=>!Gt.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Dr.image,imageAtlas:dr,glyphMap:this.returnDependencies?Bt:null,iconMap:this.returnDependencies?vn:null,glyphPositions:this.returnDependencies?Dr.positions:null}})}}function I(fe,q,W){const Q=new h.z(q);for(const ce of fe)ce.recalculate(Q,W)}class k{constructor(q,W,Q){this.actor=q,this.layerIndex=W,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(q,W){return h._(this,void 0,void 0,function*(){const Q=yield h.l(q.request,W);try{return{vectorTile:new h.bt.VectorTile(new h.bu(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(ce){const _e=new Uint8Array(Q.data);let we=`Unable to parse the tile at ${q.request.url}, `;throw we+=_e[0]===31&&_e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ce.message}`,new Error(we)}})}loadTile(q){return h._(this,void 0,void 0,function*(){const W=q.uid,Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new h.bv(q.request),ce=new w(q);this.loading[W]=ce;const _e=new AbortController;ce.abort=_e;try{const we=yield this.loadVectorTile(q,_e);if(delete this.loading[W],!we)return null;const re=we.rawData,pe={};we.expires&&(pe.expires=we.expires),we.cacheControl&&(pe.cacheControl=we.cacheControl);const Le={};if(Q){const ke=Q.finish();ke&&(Le.resourceTiming=JSON.parse(JSON.stringify(ke)))}ce.vectorTile=we.vectorTile;const Oe=ce.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=ce,this.fetching[W]={rawTileData:re,cacheControl:pe,resourceTiming:Le};try{const ke=yield Oe;return h.e({rawTileData:re.slice(0)},ke,pe,Le)}finally{delete this.fetching[W]}}catch(we){throw delete this.loading[W],ce.status="done",this.loaded[W]=ce,we}})}reloadTile(q){return h._(this,void 0,void 0,function*(){const W=q.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[W];if(Q.showCollisionBoxes=q.showCollisionBoxes,Q.status==="parsing"){const ce=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor);let _e;if(this.fetching[W]){const{rawTileData:we,cacheControl:re,resourceTiming:pe}=this.fetching[W];delete this.fetching[W],_e=h.e({rawTileData:we.slice(0)},ce,re,pe)}else _e=ce;return _e}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(q){return h._(this,void 0,void 0,function*(){const W=this.loading,Q=q.uid;W&&W[Q]&&W[Q].abort&&(W[Q].abort.abort(),delete W[Q])})}removeTile(q){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[q.uid]&&delete this.loaded[q.uid]})}}class P{constructor(){this.loaded={}}loadTile(q){return h._(this,void 0,void 0,function*(){const{uid:W,encoding:Q,rawImageData:ce,redFactor:_e,greenFactor:we,blueFactor:re,baseShift:pe}=q,Le=ce.width+2,Oe=ce.height+2,ke=h.b(ce)?new h.R({width:Le,height:Oe},yield h.bw(ce,-1,-1,Le,Oe)):ce,We=new h.bx(W,ke,Q,_e,we,re,pe);return this.loaded=this.loaded||{},this.loaded[W]=We,We})}removeTile(q){const W=this.loaded,Q=q.uid;W&&W[Q]&&delete W[Q]}}function R(fe,q){if(fe.length!==0){$(fe[0],q);for(var W=1;W<fe.length;W++)$(fe[W],!q)}}function $(fe,q){for(var W=0,Q=0,ce=0,_e=fe.length,we=_e-1;ce<_e;we=ce++){var re=(fe[ce][0]-fe[we][0])*(fe[we][1]+fe[ce][1]),pe=W+re;Q+=Math.abs(W)>=Math.abs(re)?W-pe+re:re-pe+W,W=pe}W+Q>=0!=!!q&&fe.reverse()}var U=h.by(function fe(q,W){var Q,ce=q&&q.type;if(ce==="FeatureCollection")for(Q=0;Q<q.features.length;Q++)fe(q.features[Q],W);else if(ce==="GeometryCollection")for(Q=0;Q<q.geometries.length;Q++)fe(q.geometries[Q],W);else if(ce==="Feature")fe(q.geometry,W);else if(ce==="Polygon")R(q.coordinates,W);else if(ce==="MultiPolygon")for(Q=0;Q<q.coordinates.length;Q++)R(q.coordinates[Q],W);return q});const Z=h.bt.VectorTileFeature.prototype.toGeoJSON;var D={exports:{}},O=h.bz,F=h.bt.VectorTileFeature,G=te;function te(fe,q){this.options=q||{},this.features=fe,this.length=fe.length}function oe(fe,q){this.id=typeof fe.id=="number"?fe.id:void 0,this.type=fe.type,this.rawGeometry=fe.type===1?[fe.geometry]:fe.geometry,this.properties=fe.tags,this.extent=q||4096}te.prototype.feature=function(fe){return new oe(this.features[fe],this.options.extent)},oe.prototype.loadGeometry=function(){var fe=this.rawGeometry;this.geometry=[];for(var q=0;q<fe.length;q++){for(var W=fe[q],Q=[],ce=0;ce<W.length;ce++)Q.push(new O(W[ce][0],W[ce][1]));this.geometry.push(Q)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var fe=this.geometry,q=1/0,W=-1/0,Q=1/0,ce=-1/0,_e=0;_e<fe.length;_e++)for(var we=fe[_e],re=0;re<we.length;re++){var pe=we[re];q=Math.min(q,pe.x),W=Math.max(W,pe.x),Q=Math.min(Q,pe.y),ce=Math.max(ce,pe.y)}return[q,Q,W,ce]},oe.prototype.toGeoJSON=F.prototype.toGeoJSON;var ae=h.bA,le=G;function Ie(fe){var q=new ae;return function(W,Q){for(var ce in W.layers)Q.writeMessage(3,K,W.layers[ce])}(fe,q),q.finish()}function K(fe,q){var W;q.writeVarintField(15,fe.version||1),q.writeStringField(1,fe.name||""),q.writeVarintField(5,fe.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<fe.length;W++)Q.feature=fe.feature(W),q.writeMessage(2,Ce,Q);var ce=Q.keys;for(W=0;W<ce.length;W++)q.writeStringField(3,ce[W]);var _e=Q.values;for(W=0;W<_e.length;W++)q.writeMessage(4,Ve,_e[W])}function Ce(fe,q){var W=fe.feature;W.id!==void 0&&q.writeVarintField(1,W.id),q.writeMessage(2,Fe,fe),q.writeVarintField(3,W.type),q.writeMessage(4,Re,W)}function Fe(fe,q){var W=fe.feature,Q=fe.keys,ce=fe.values,_e=fe.keycache,we=fe.valuecache;for(var re in W.properties){var pe=W.properties[re],Le=_e[re];if(pe!==null){Le===void 0&&(Q.push(re),_e[re]=Le=Q.length-1),q.writeVarint(Le);var Oe=typeof pe;Oe!=="string"&&Oe!=="boolean"&&Oe!=="number"&&(pe=JSON.stringify(pe));var ke=Oe+":"+pe,We=we[ke];We===void 0&&(ce.push(pe),we[ke]=We=ce.length-1),q.writeVarint(We)}}}function De(fe,q){return(q<<3)+(7&fe)}function Ae(fe){return fe<<1^fe>>31}function Re(fe,q){for(var W=fe.loadGeometry(),Q=fe.type,ce=0,_e=0,we=W.length,re=0;re<we;re++){var pe=W[re],Le=1;Q===1&&(Le=pe.length),q.writeVarint(De(1,Le));for(var Oe=Q===3?pe.length-1:pe.length,ke=0;ke<Oe;ke++){ke===1&&Q!==1&&q.writeVarint(De(2,Oe-1));var We=pe[ke].x-ce,gt=pe[ke].y-_e;q.writeVarint(Ae(We)),q.writeVarint(Ae(gt)),ce+=We,_e+=gt}Q===3&&q.writeVarint(De(7,1))}}function Ve(fe,q){var W=typeof fe;W==="string"?q.writeStringField(1,fe):W==="boolean"?q.writeBooleanField(7,fe):W==="number"&&(fe%1!=0?q.writeDoubleField(3,fe):fe<0?q.writeSVarintField(6,fe):q.writeVarintField(5,fe))}D.exports=Ie,D.exports.fromVectorTileJs=Ie,D.exports.fromGeojsonVt=function(fe,q){q=q||{};var W={};for(var Q in fe)W[Q]=new le(fe[Q].features,q),W[Q].name=Q,W[Q].version=q.version,W[Q].extent=q.extent;return Ie({layers:W})},D.exports.GeoJSONWrapper=le;var et=h.by(D.exports);const $e={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:fe=>fe},Ue=Math.fround||(ct=new Float32Array(1),fe=>(ct[0]=+fe,ct[0]));var ct;const St=3,At=5,jt=6;class zt{constructor(q){this.options=Object.assign(Object.create($e),q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(q){const{log:W,minZoom:Q,maxZoom:ce}=this.options;W&&console.time("total time");const _e=`prepare ${q.length} points`;W&&console.time(_e),this.points=q;const we=[];for(let pe=0;pe<q.length;pe++){const Le=q[pe];if(!Le.geometry)continue;const[Oe,ke]=Le.geometry.coordinates,We=Ue(on(Oe)),gt=Ue(Un(ke));we.push(We,gt,1/0,pe,-1,1),this.options.reduce&&we.push(0)}let re=this.trees[ce+1]=this._createTree(we);W&&console.timeEnd(_e);for(let pe=ce;pe>=Q;pe--){const Le=+Date.now();re=this.trees[pe]=this._createTree(this._cluster(re,pe)),W&&console.log("z%d: %d clusters in %dms",pe,re.numItems,+Date.now()-Le)}return W&&console.timeEnd("total time"),this}getClusters(q,W){let Q=((q[0]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,q[1]));let _e=q[2]===180?180:((q[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)Q=-180,_e=180;else if(Q>_e){const ke=this.getClusters([Q,ce,180,we],W),We=this.getClusters([-180,ce,_e,we],W);return ke.concat(We)}const re=this.trees[this._limitZoom(W)],pe=re.range(on(Q),Un(we),on(_e),Un(ce)),Le=re.data,Oe=[];for(const ke of pe){const We=this.stride*ke;Oe.push(Le[We+At]>1?Xt(Le,We,this.clusterProps):this.points[Le[We+St]])}return Oe}getChildren(q){const W=this._getOriginId(q),Q=this._getOriginZoom(q),ce="No cluster with the specified id.",_e=this.trees[Q];if(!_e)throw new Error(ce);const we=_e.data;if(W*this.stride>=we.length)throw new Error(ce);const re=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),pe=_e.within(we[W*this.stride],we[W*this.stride+1],re),Le=[];for(const Oe of pe){const ke=Oe*this.stride;we[ke+4]===q&&Le.push(we[ke+At]>1?Xt(we,ke,this.clusterProps):this.points[we[ke+St]])}if(Le.length===0)throw new Error(ce);return Le}getLeaves(q,W,Q){const ce=[];return this._appendLeaves(ce,q,W=W||10,Q=Q||0,0),ce}getTile(q,W,Q){const ce=this.trees[this._limitZoom(q)],_e=Math.pow(2,q),{extent:we,radius:re}=this.options,pe=re/we,Le=(Q-pe)/_e,Oe=(Q+1+pe)/_e,ke={features:[]};return this._addTileFeatures(ce.range((W-pe)/_e,Le,(W+1+pe)/_e,Oe),ce.data,W,Q,_e,ke),W===0&&this._addTileFeatures(ce.range(1-pe/_e,Le,1,Oe),ce.data,_e,Q,_e,ke),W===_e-1&&this._addTileFeatures(ce.range(0,Le,pe/_e,Oe),ce.data,-1,Q,_e,ke),ke.features.length?ke:null}getClusterExpansionZoom(q){let W=this._getOriginZoom(q)-1;for(;W<=this.options.maxZoom;){const Q=this.getChildren(q);if(W++,Q.length!==1)break;q=Q[0].properties.cluster_id}return W}_appendLeaves(q,W,Q,ce,_e){const we=this.getChildren(W);for(const re of we){const pe=re.properties;if(pe&&pe.cluster?_e+pe.point_count<=ce?_e+=pe.point_count:_e=this._appendLeaves(q,pe.cluster_id,Q,ce,_e):_e<ce?_e++:q.push(re),q.length===Q)break}return _e}_createTree(q){const W=new h.av(q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<q.length;Q+=this.stride)W.add(q[Q],q[Q+1]);return W.finish(),W.data=q,W}_addTileFeatures(q,W,Q,ce,_e,we){for(const re of q){const pe=re*this.stride,Le=W[pe+At]>1;let Oe,ke,We;if(Le)Oe=yn(W,pe,this.clusterProps),ke=W[pe],We=W[pe+1];else{const en=this.points[W[pe+St]];Oe=en.properties;const[Bt,vn]=en.geometry.coordinates;ke=on(Bt),We=Un(vn)}const gt={type:1,geometry:[[Math.round(this.options.extent*(ke*_e-Q)),Math.round(this.options.extent*(We*_e-ce))]],tags:Oe};let It;It=Le||this.options.generateId?W[pe+St]:this.points[W[pe+St]].id,It!==void 0&&(gt.id=It),we.features.push(gt)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,W){const{radius:Q,extent:ce,reduce:_e,minPoints:we}=this.options,re=Q/(ce*Math.pow(2,W)),pe=q.data,Le=[],Oe=this.stride;for(let ke=0;ke<pe.length;ke+=Oe){if(pe[ke+2]<=W)continue;pe[ke+2]=W;const We=pe[ke],gt=pe[ke+1],It=q.within(pe[ke],pe[ke+1],re),en=pe[ke+At];let Bt=en;for(const vn of It){const tn=vn*Oe;pe[tn+2]>W&&(Bt+=pe[tn+At])}if(Bt>en&&Bt>=we){let vn,tn=We*en,Dr=gt*en,dr=-1;const Gt=((ke/Oe|0)<<5)+(W+1)+this.points.length;for(const Ln of It){const or=Ln*Oe;if(pe[or+2]<=W)continue;pe[or+2]=W;const Zr=pe[or+At];tn+=pe[or]*Zr,Dr+=pe[or+1]*Zr,pe[or+4]=Gt,_e&&(vn||(vn=this._map(pe,ke,!0),dr=this.clusterProps.length,this.clusterProps.push(vn)),_e(vn,this._map(pe,or)))}pe[ke+4]=Gt,Le.push(tn/Bt,Dr/Bt,1/0,Gt,-1,Bt),_e&&Le.push(dr)}else{for(let vn=0;vn<Oe;vn++)Le.push(pe[ke+vn]);if(Bt>1)for(const vn of It){const tn=vn*Oe;if(!(pe[tn+2]<=W)){pe[tn+2]=W;for(let Dr=0;Dr<Oe;Dr++)Le.push(pe[tn+Dr])}}}}return Le}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,W,Q){if(q[W+At]>1){const we=this.clusterProps[q[W+jt]];return Q?Object.assign({},we):we}const ce=this.points[q[W+St]].properties,_e=this.options.map(ce);return Q&&_e===ce?Object.assign({},_e):_e}}function Xt(fe,q,W){return{type:"Feature",id:fe[q+St],properties:yn(fe,q,W),geometry:{type:"Point",coordinates:[(Q=fe[q],360*(Q-.5)),Mn(fe[q+1])]}};var Q}function yn(fe,q,W){const Q=fe[q+At],ce=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,_e=fe[q+jt],we=_e===-1?{}:Object.assign({},W[_e]);return Object.assign(we,{cluster:!0,cluster_id:fe[q+St],point_count:Q,point_count_abbreviated:ce})}function on(fe){return fe/360+.5}function Un(fe){const q=Math.sin(fe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function Mn(fe){const q=(180-360*fe)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function Vt(fe,q,W,Q){let ce=Q;const _e=q+(W-q>>1);let we,re=W-q;const pe=fe[q],Le=fe[q+1],Oe=fe[W],ke=fe[W+1];for(let We=q+3;We<W;We+=3){const gt=an(fe[We],fe[We+1],pe,Le,Oe,ke);if(gt>ce)we=We,ce=gt;else if(gt===ce){const It=Math.abs(We-_e);It<re&&(we=We,re=It)}}ce>Q&&(we-q>3&&Vt(fe,q,we,Q),fe[we+2]=ce,W-we>3&&Vt(fe,we,W,Q))}function an(fe,q,W,Q,ce,_e){let we=ce-W,re=_e-Q;if(we!==0||re!==0){const pe=((fe-W)*we+(q-Q)*re)/(we*we+re*re);pe>1?(W=ce,Q=_e):pe>0&&(W+=we*pe,Q+=re*pe)}return we=fe-W,re=q-Q,we*we+re*re}function Wt(fe,q,W,Q){const ce={id:fe??null,type:q,geometry:W,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(q==="Point"||q==="MultiPoint"||q==="LineString")Cn(ce,W);else if(q==="Polygon")Cn(ce,W[0]);else if(q==="MultiLineString")for(const _e of W)Cn(ce,_e);else if(q==="MultiPolygon")for(const _e of W)Cn(ce,_e[0]);return ce}function Cn(fe,q){for(let W=0;W<q.length;W+=3)fe.minX=Math.min(fe.minX,q[W]),fe.minY=Math.min(fe.minY,q[W+1]),fe.maxX=Math.max(fe.maxX,q[W]),fe.maxY=Math.max(fe.maxY,q[W+1])}function _t(fe,q,W,Q){if(!q.geometry)return;const ce=q.geometry.coordinates;if(ce&&ce.length===0)return;const _e=q.geometry.type,we=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2);let re=[],pe=q.id;if(W.promoteId?pe=q.properties[W.promoteId]:W.generateId&&(pe=Q||0),_e==="Point")Dt(ce,re);else if(_e==="MultiPoint")for(const Le of ce)Dt(Le,re);else if(_e==="LineString")Se(ce,re,we,!1);else if(_e==="MultiLineString"){if(W.lineMetrics){for(const Le of ce)re=[],Se(Le,re,we,!1),fe.push(Wt(pe,"LineString",re,q.properties));return}ur(ce,re,we,!1)}else if(_e==="Polygon")ur(ce,re,we,!0);else{if(_e!=="MultiPolygon"){if(_e==="GeometryCollection"){for(const Le of q.geometry.geometries)_t(fe,{id:pe,geometry:Le,properties:q.properties},W,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Le of ce){const Oe=[];ur(Le,Oe,we,!0),re.push(Oe)}}fe.push(Wt(pe,_e,re,q.properties))}function Dt(fe,q){q.push(bn(fe[0]),ft(fe[1]),0)}function Se(fe,q,W,Q){let ce,_e,we=0;for(let pe=0;pe<fe.length;pe++){const Le=bn(fe[pe][0]),Oe=ft(fe[pe][1]);q.push(Le,Oe,0),pe>0&&(we+=Q?(ce*Oe-Le*_e)/2:Math.sqrt(Math.pow(Le-ce,2)+Math.pow(Oe-_e,2))),ce=Le,_e=Oe}const re=q.length-3;q[2]=1,Vt(q,0,re,W),q[re+2]=1,q.size=Math.abs(we),q.start=0,q.end=q.size}function ur(fe,q,W,Q){for(let ce=0;ce<fe.length;ce++){const _e=[];Se(fe[ce],_e,W,Q),q.push(_e)}}function bn(fe){return fe/360+.5}function ft(fe){const q=Math.sin(fe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function qt(fe,q,W,Q,ce,_e,we,re){if(Q/=q,_e>=(W/=q)&&we<Q)return fe;if(we<W||_e>=Q)return null;const pe=[];for(const Le of fe){const Oe=Le.geometry;let ke=Le.type;const We=ce===0?Le.minX:Le.minY,gt=ce===0?Le.maxX:Le.maxY;if(We>=W&&gt<Q){pe.push(Le);continue}if(gt<W||We>=Q)continue;let It=[];if(ke==="Point"||ke==="MultiPoint")fn(Oe,It,W,Q,ce);else if(ke==="LineString")ir(Oe,It,W,Q,ce,!1,re.lineMetrics);else if(ke==="MultiLineString")zn(Oe,It,W,Q,ce,!1);else if(ke==="Polygon")zn(Oe,It,W,Q,ce,!0);else if(ke==="MultiPolygon")for(const en of Oe){const Bt=[];zn(en,Bt,W,Q,ce,!0),Bt.length&&It.push(Bt)}if(It.length){if(re.lineMetrics&&ke==="LineString"){for(const en of It)pe.push(Wt(Le.id,ke,en,Le.tags));continue}ke!=="LineString"&&ke!=="MultiLineString"||(It.length===1?(ke="LineString",It=It[0]):ke="MultiLineString"),ke!=="Point"&&ke!=="MultiPoint"||(ke=It.length===3?"Point":"MultiPoint"),pe.push(Wt(Le.id,ke,It,Le.tags))}}return pe.length?pe:null}function fn(fe,q,W,Q,ce){for(let _e=0;_e<fe.length;_e+=3){const we=fe[_e+ce];we>=W&&we<=Q&&yr(q,fe[_e],fe[_e+1],fe[_e+2])}}function ir(fe,q,W,Q,ce,_e,we){let re=Ct(fe);const pe=ce===0?ei:vr;let Le,Oe,ke=fe.start;for(let Bt=0;Bt<fe.length-3;Bt+=3){const vn=fe[Bt],tn=fe[Bt+1],Dr=fe[Bt+2],dr=fe[Bt+3],Gt=fe[Bt+4],Ln=ce===0?vn:tn,or=ce===0?dr:Gt;let Zr=!1;we&&(Le=Math.sqrt(Math.pow(vn-dr,2)+Math.pow(tn-Gt,2))),Ln<W?or>W&&(Oe=pe(re,vn,tn,dr,Gt,W),we&&(re.start=ke+Le*Oe)):Ln>Q?or<Q&&(Oe=pe(re,vn,tn,dr,Gt,Q),we&&(re.start=ke+Le*Oe)):yr(re,vn,tn,Dr),or<W&&Ln>=W&&(Oe=pe(re,vn,tn,dr,Gt,W),Zr=!0),or>Q&&Ln<=Q&&(Oe=pe(re,vn,tn,dr,Gt,Q),Zr=!0),!_e&&Zr&&(we&&(re.end=ke+Le*Oe),q.push(re),re=Ct(fe)),we&&(ke+=Le)}let We=fe.length-3;const gt=fe[We],It=fe[We+1],en=ce===0?gt:It;en>=W&&en<=Q&&yr(re,gt,It,fe[We+2]),We=re.length-3,_e&&We>=3&&(re[We]!==re[0]||re[We+1]!==re[1])&&yr(re,re[0],re[1],re[2]),re.length&&q.push(re)}function Ct(fe){const q=[];return q.size=fe.size,q.start=fe.start,q.end=fe.end,q}function zn(fe,q,W,Q,ce,_e){for(const we of fe)ir(we,q,W,Q,ce,_e,!1)}function yr(fe,q,W,Q){fe.push(q,W,Q)}function ei(fe,q,W,Q,ce,_e){const we=(_e-q)/(Q-q);return yr(fe,_e,W+(ce-W)*we,1),we}function vr(fe,q,W,Q,ce,_e){const we=(_e-W)/(ce-W);return yr(fe,q+(Q-q)*we,_e,1),we}function Ge(fe,q){const W=[];for(let Q=0;Q<fe.length;Q++){const ce=fe[Q],_e=ce.type;let we;if(_e==="Point"||_e==="MultiPoint"||_e==="LineString")we=cr(ce.geometry,q);else if(_e==="MultiLineString"||_e==="Polygon"){we=[];for(const re of ce.geometry)we.push(cr(re,q))}else if(_e==="MultiPolygon"){we=[];for(const re of ce.geometry){const pe=[];for(const Le of re)pe.push(cr(Le,q));we.push(pe)}}W.push(Wt(ce.id,_e,we,ce.tags))}return W}function cr(fe,q){const W=[];W.size=fe.size,fe.start!==void 0&&(W.start=fe.start,W.end=fe.end);for(let Q=0;Q<fe.length;Q+=3)W.push(fe[Q]+q,fe[Q+1],fe[Q+2]);return W}function Kn(fe,q){if(fe.transformed)return fe;const W=1<<fe.z,Q=fe.x,ce=fe.y;for(const _e of fe.features){const we=_e.geometry,re=_e.type;if(_e.geometry=[],re===1)for(let pe=0;pe<we.length;pe+=2)_e.geometry.push(dn(we[pe],we[pe+1],q,W,Q,ce));else for(let pe=0;pe<we.length;pe++){const Le=[];for(let Oe=0;Oe<we[pe].length;Oe+=2)Le.push(dn(we[pe][Oe],we[pe][Oe+1],q,W,Q,ce));_e.geometry.push(Le)}}return fe.transformed=!0,fe}function dn(fe,q,W,Q,ce,_e){return[Math.round(W*(fe*Q-ce)),Math.round(W*(q*Q-_e))]}function Rr(fe,q,W,Q,ce){const _e=q===ce.maxZoom?0:ce.tolerance/((1<<q)*ce.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:fe.length,source:null,x:W,y:Q,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const re of fe)Ke(we,re,_e,ce);return we}function Ke(fe,q,W,Q){const ce=q.geometry,_e=q.type,we=[];if(fe.minX=Math.min(fe.minX,q.minX),fe.minY=Math.min(fe.minY,q.minY),fe.maxX=Math.max(fe.maxX,q.maxX),fe.maxY=Math.max(fe.maxY,q.maxY),_e==="Point"||_e==="MultiPoint")for(let re=0;re<ce.length;re+=3)we.push(ce[re],ce[re+1]),fe.numPoints++,fe.numSimplified++;else if(_e==="LineString")Xe(we,ce,fe,W,!1,!1);else if(_e==="MultiLineString"||_e==="Polygon")for(let re=0;re<ce.length;re++)Xe(we,ce[re],fe,W,_e==="Polygon",re===0);else if(_e==="MultiPolygon")for(let re=0;re<ce.length;re++){const pe=ce[re];for(let Le=0;Le<pe.length;Le++)Xe(we,pe[Le],fe,W,!0,Le===0)}if(we.length){let re=q.tags||null;if(_e==="LineString"&&Q.lineMetrics){re={};for(const Le in q.tags)re[Le]=q.tags[Le];re.mapbox_clip_start=ce.start/ce.size,re.mapbox_clip_end=ce.end/ce.size}const pe={geometry:we,type:_e==="Polygon"||_e==="MultiPolygon"?3:_e==="LineString"||_e==="MultiLineString"?2:1,tags:re};q.id!==null&&(pe.id=q.id),fe.features.push(pe)}}function Xe(fe,q,W,Q,ce,_e){const we=Q*Q;if(Q>0&&q.size<(ce?we:Q))return void(W.numPoints+=q.length/3);const re=[];for(let pe=0;pe<q.length;pe+=3)(Q===0||q[pe+2]>we)&&(W.numSimplified++,re.push(q[pe],q[pe+1])),W.numPoints++;ce&&function(pe,Le){let Oe=0;for(let ke=0,We=pe.length,gt=We-2;ke<We;gt=ke,ke+=2)Oe+=(pe[ke]-pe[gt])*(pe[ke+1]+pe[gt+1]);if(Oe>0===Le)for(let ke=0,We=pe.length;ke<We/2;ke+=2){const gt=pe[ke],It=pe[ke+1];pe[ke]=pe[We-2-ke],pe[ke+1]=pe[We-1-ke],pe[We-2-ke]=gt,pe[We-1-ke]=It}}(re,_e),fe.push(re)}const at={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class mn{constructor(q,W){const Q=(W=this.options=function(_e,we){for(const re in we)_e[re]=we[re];return _e}(Object.create(at),W)).debug;if(Q&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let ce=function(_e,we){const re=[];if(_e.type==="FeatureCollection")for(let pe=0;pe<_e.features.length;pe++)_t(re,_e.features[pe],we,pe);else _t(re,_e.type==="Feature"?_e:{geometry:_e},we);return re}(q,W);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=function(_e,we){const re=we.buffer/we.extent;let pe=_e;const Le=qt(_e,1,-1-re,re,0,-1,2,we),Oe=qt(_e,1,1-re,2+re,0,-1,2,we);return(Le||Oe)&&(pe=qt(_e,1,-re,1+re,0,-1,2,we)||[],Le&&(pe=Ge(Le,1).concat(pe)),Oe&&(pe=pe.concat(Ge(Oe,-1)))),pe}(ce,W),ce.length&&this.splitTile(ce,0,0,0),Q&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(q,W,Q,ce,_e,we,re){const pe=[q,W,Q,ce],Le=this.options,Oe=Le.debug;for(;pe.length;){ce=pe.pop(),Q=pe.pop(),W=pe.pop(),q=pe.pop();const ke=1<<W,We=zr(W,Q,ce);let gt=this.tiles[We];if(!gt&&(Oe>1&&console.time("creation"),gt=this.tiles[We]=Rr(q,W,Q,ce,Le),this.tileCoords.push({z:W,x:Q,y:ce}),Oe)){Oe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Q,ce,gt.numFeatures,gt.numPoints,gt.numSimplified),console.timeEnd("creation"));const Zr=`z${W}`;this.stats[Zr]=(this.stats[Zr]||0)+1,this.total++}if(gt.source=q,_e==null){if(W===Le.indexMaxZoom||gt.numPoints<=Le.indexMaxPoints)continue}else{if(W===Le.maxZoom||W===_e)continue;if(_e!=null){const Zr=_e-W;if(Q!==we>>Zr||ce!==re>>Zr)continue}}if(gt.source=null,q.length===0)continue;Oe>1&&console.time("clipping");const It=.5*Le.buffer/Le.extent,en=.5-It,Bt=.5+It,vn=1+It;let tn=null,Dr=null,dr=null,Gt=null,Ln=qt(q,ke,Q-It,Q+Bt,0,gt.minX,gt.maxX,Le),or=qt(q,ke,Q+en,Q+vn,0,gt.minX,gt.maxX,Le);q=null,Ln&&(tn=qt(Ln,ke,ce-It,ce+Bt,1,gt.minY,gt.maxY,Le),Dr=qt(Ln,ke,ce+en,ce+vn,1,gt.minY,gt.maxY,Le),Ln=null),or&&(dr=qt(or,ke,ce-It,ce+Bt,1,gt.minY,gt.maxY,Le),Gt=qt(or,ke,ce+en,ce+vn,1,gt.minY,gt.maxY,Le),or=null),Oe>1&&console.timeEnd("clipping"),pe.push(tn||[],W+1,2*Q,2*ce),pe.push(Dr||[],W+1,2*Q,2*ce+1),pe.push(dr||[],W+1,2*Q+1,2*ce),pe.push(Gt||[],W+1,2*Q+1,2*ce+1)}}getTile(q,W,Q){q=+q,W=+W,Q=+Q;const ce=this.options,{extent:_e,debug:we}=ce;if(q<0||q>24)return null;const re=1<<q,pe=zr(q,W=W+re&re-1,Q);if(this.tiles[pe])return Kn(this.tiles[pe],_e);we>1&&console.log("drilling down to z%d-%d-%d",q,W,Q);let Le,Oe=q,ke=W,We=Q;for(;!Le&&Oe>0;)Oe--,ke>>=1,We>>=1,Le=this.tiles[zr(Oe,ke,We)];return Le&&Le.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Oe,ke,We),console.time("drilling down")),this.splitTile(Le.source,Oe,ke,We,q,W,Q),we>1&&console.timeEnd("drilling down"),this.tiles[pe]?Kn(this.tiles[pe],_e):null):null}}function zr(fe,q,W){return 32*((1<<fe)*W+q)+fe}function $t(fe,q){return q?fe.properties[q]:fe.id}function vo(fe,q){if(fe==null)return!0;if(fe.type==="Feature")return $t(fe,q)!=null;if(fe.type==="FeatureCollection"){const W=new Set;for(const Q of fe.features){const ce=$t(Q,q);if(ce==null||W.has(ce))return!1;W.add(ce)}return!0}return!1}function $o(fe,q){const W=new Map;if(fe!=null)if(fe.type==="Feature")W.set($t(fe,q),fe);else for(const Q of fe.features)W.set($t(Q,q),Q);return W}class ca extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(q,W){return h._(this,void 0,void 0,function*(){const Q=q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ce=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!ce)return null;const _e=new class{constructor(re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.X,this.length=re.length,this._features=re}feature(re){return new class{constructor(pe){this._feature=pe,this.extent=h.X,this.type=pe.type,this.properties=pe.tags,"id"in pe&&!isNaN(pe.id)&&(this.id=parseInt(pe.id,10))}loadGeometry(){if(this._feature.type===1){const pe=[];for(const Le of this._feature.geometry)pe.push([new h.P(Le[0],Le[1])]);return pe}{const pe=[];for(const Le of this._feature.geometry){const Oe=[];for(const ke of Le)Oe.push(new h.P(ke[0],ke[1]));pe.push(Oe)}return pe}}toGeoJSON(pe,Le,Oe){return Z.call(this,pe,Le,Oe)}}(this._features[re])}}(ce.features);let we=et(_e);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:_e,rawData:we.buffer}})}loadData(q){return h._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();const Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new h.bv(q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(q,this._pendingRequest),this._geoJSONIndex=q.cluster?new zt(function({superclusterOptions:we,clusterProperties:re}){if(!re||!we)return we;const pe={},Le={},Oe={accumulated:null,zoom:0},ke={properties:null},We=Object.keys(re);for(const gt of We){const[It,en]=re[gt],Bt=h.bC(en),vn=h.bC(typeof It=="string"?[It,["accumulated"],["get",gt]]:It);pe[gt]=Bt.value,Le[gt]=vn.value}return we.map=gt=>{ke.properties=gt;const It={};for(const en of We)It[en]=pe[en].evaluate(Oe,ke);return It},we.reduce=(gt,It)=>{ke.properties=It;for(const en of We)Oe.accumulated=gt[en],gt[en]=Le[en].evaluate(Oe,ke)},we}(q)).load((yield this._pendingData).features):(ce=yield this._pendingData,new mn(ce,q.geojsonVtOptions)),this.loaded={};const _e={};if(Q){const we=Q.finish();we&&(_e.resourceTiming={},_e.resourceTiming[q.source]=JSON.parse(JSON.stringify(we)))}return _e}catch(_e){if(delete this._pendingRequest,h.bB(_e))return{abandoned:!0};throw _e}var ce})}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(q){const W=this.loaded;return W&&W[q.uid]?super.reloadTile(q):this.loadTile(q)}loadAndProcessGeoJSON(q,W){return h._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON(q,W);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(U(Q,!0),q.filter){const ce=h.bC(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ce.result==="error")throw new Error(ce.value.map(we=>`${we.key}: ${we.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(we=>ce.value.evaluate({zoom:0},we))}}return Q})}loadGeoJSON(q,W){return h._(this,void 0,void 0,function*(){const{promoteId:Q}=q;if(q.request){const ce=yield h.h(q.request,W);return this._dataUpdateable=vo(ce.data,Q)?$o(ce.data,Q):void 0,ce.data}if(typeof q.data=="string")try{const ce=JSON.parse(q.data);return this._dataUpdateable=vo(ce,Q)?$o(ce,Q):void 0,ce}catch{throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`)}if(!q.dataDiff)throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${q.source}`);return function(ce,_e,we){var re,pe,Le,Oe;if(_e.removeAll&&ce.clear(),_e.remove)for(const ke of _e.remove)ce.delete(ke);if(_e.add)for(const ke of _e.add){const We=$t(ke,we);We!=null&&ce.set(We,ke)}if(_e.update)for(const ke of _e.update){let We=ce.get(ke.id);if(We==null)continue;const gt=!ke.removeAllProperties&&(((re=ke.removeProperties)===null||re===void 0?void 0:re.length)>0||((pe=ke.addOrUpdateProperties)===null||pe===void 0?void 0:pe.length)>0);if((ke.newGeometry||ke.removeAllProperties||gt)&&(We=Object.assign({},We),ce.set(ke.id,We),gt&&(We.properties=Object.assign({},We.properties))),ke.newGeometry&&(We.geometry=ke.newGeometry),ke.removeAllProperties)We.properties={};else if(((Le=ke.removeProperties)===null||Le===void 0?void 0:Le.length)>0)for(const It of ke.removeProperties)Object.prototype.hasOwnProperty.call(We.properties,It)&&delete We.properties[It];if(((Oe=ke.addOrUpdateProperties)===null||Oe===void 0?void 0:Oe.length)>0)for(const{key:It,value:en}of ke.addOrUpdateProperties)We.properties[It]=en}}(this._dataUpdateable,q.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(q){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(q){return this._geoJSONIndex.getClusterExpansionZoom(q.clusterId)}getClusterChildren(q){return this._geoJSONIndex.getChildren(q.clusterId)}getClusterLeaves(q){return this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset)}}class _o{constructor(q){this.self=q,this.actor=new h.F(q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,Q)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=Q},this.self.addProtocol=h.bi,this.self.removeProtocol=h.bj,this.self.registerRTLTextPlugin=W=>{if(h.bD.isParsed())throw new Error("RTL text plugin already registered.");h.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,Q)=>this._getDEMWorkerSource(W,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(W,Q)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(W,Q)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(W,Q)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(W,Q)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(W,Q)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][Q.type]||!this.workerSources[W][Q.type][Q.source])return;const ce=this.workerSources[W][Q.type][Q.source];delete this.workerSources[W][Q.type][Q.source],ce.removeSource!==void 0&&ce.removeSource(Q)})),this.actor.registerMessageHandler("RM",W=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,Q)=>h._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(W,Q)=>this._syncRTLPluginState(W,Q)),this.actor.registerMessageHandler("IS",(W,Q)=>h._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(W,Q)=>this._setImages(W,Q)),this.actor.registerMessageHandler("UL",(W,Q)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(W,Q)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(Q)}))}_setImages(q,W){return h._(this,void 0,void 0,function*(){this.availableImages[q]=W;for(const Q in this.workerSources[q]){const ce=this.workerSources[q][Q];for(const _e in ce)ce[_e].availableImages=W}})}_syncRTLPluginState(q,W){return h._(this,void 0,void 0,function*(){if(h.bD.isParsed())return h.bD.getState();if(W.pluginStatus!=="loading")return h.bD.setState(W),W;const Q=W.pluginURL;if(this.self.importScripts(Q),h.bD.isParsed()){const ce={pluginStatus:"loaded",pluginURL:Q};return h.bD.setState(ce),ce}throw h.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Q}`)})}_getAvailableImages(q){let W=this.availableImages[q];return W||(W=[]),W}_getLayerIndex(q){let W=this.layerIndexes[q];return W||(W=this.layerIndexes[q]=new l),W}_getWorkerSource(q,W,Q){if(this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][W]||(this.workerSources[q][W]={}),!this.workerSources[q][W][Q]){const ce={sendAsync:(_e,we)=>(_e.targetMapId=q,this.actor.sendAsync(_e,we))};switch(W){case"vector":this.workerSources[q][W][Q]=new k(ce,this._getLayerIndex(q),this._getAvailableImages(q));break;case"geojson":this.workerSources[q][W][Q]=new ca(ce,this._getLayerIndex(q),this._getAvailableImages(q));break;default:this.workerSources[q][W][Q]=new this.externalWorkerSourceTypes[W](ce,this._getLayerIndex(q),this._getAvailableImages(q))}}return this.workerSources[q][W][Q]}_getDEMWorkerSource(q,W){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][W]||(this.demWorkerSources[q][W]=new P),this.demWorkerSources[q][W]}}return h.i(self)&&(self.worker=new _o(self)),_o}),a("index",["exports","./shared"],function(h,l){var b="4.7.1";let w,I;const k={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((i,d)=>{const f=requestAnimationFrame(i);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),d(l.c())})}),getImageData(v,i=0){return this.getImageCanvasContext(v).getImageData(-i,-i,v.width+2*i,v.height+2*i)},getImageCanvasContext(v){const i=window.document.createElement("canvas"),d=i.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return i.width=v.width,i.height=v.height,d.drawImage(v,0,0,v.width,v.height),d},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class P{static testProp(i){if(!P.docStyle)return i[0];for(let d=0;d<i.length;d++)if(i[d]in P.docStyle)return i[d];return i[0]}static create(i,d,f){const m=window.document.createElement(i);return d!==void 0&&(m.className=d),f&&f.appendChild(m),m}static createNS(i,d){return window.document.createElementNS(i,d)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(i,d){i.style[P.transformProp]=d}static addEventListener(i,d,f,m={}){i.addEventListener(d,f,"passive"in m?m:m.capture)}static removeEventListener(i,d,f,m={}){i.removeEventListener(d,f,"passive"in m?m:m.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(i){const d=i.getBoundingClientRect();return{x:d.width/i.offsetWidth||1,y:d.height/i.offsetHeight||1,boundingClientRect:d}}static getPoint(i,d,f){const m=d.boundingClientRect;return new l.P((f.clientX-m.left)/d.x-i.clientLeft,(f.clientY-m.top)/d.y-i.clientTop)}static mousePos(i,d){const f=P.getScale(i);return P.getPoint(i,f,d)}static touchPos(i,d){const f=[],m=P.getScale(i);for(let y=0;y<d.length;y++)f.push(P.getPoint(i,m,d[y]));return f}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!Z&&U&&(D?O(v):$=v)}};let $,U,Z=!1,D=!1;function O(v){const i=v.createTexture();v.bindTexture(v.TEXTURE_2D,i);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,U),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(i),Z=!0}var F;typeof document<"u"&&(U=document.createElement("img"),U.onload=()=>{$&&O($),$=null,D=!0},U.onerror=()=>{Z=!0,$=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let i,d,f,m;v.resetRequestQueue=()=>{i=[],d=0,f=0,m={}},v.addThrottleControl=M=>{const z=f++;return m[z]=M,z},v.removeThrottleControl=M=>{delete m[M],C()},v.getImage=(M,z,N=!0)=>new Promise((j,X)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),l.e(M,{type:"image"}),i.push({abortController:z,requestParameters:M,supportImageRefresh:N,state:"queued",onError:ee=>{X(ee)},onSuccess:ee=>{j(ee)}}),C()});const y=M=>l._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:N,onError:j,onSuccess:X,abortController:ee}=M,ie=N===!1&&!l.i(self)&&!l.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ye,ve)=>ye&&ve==="accept",!0));d++;const he=ie?T(z,ee):l.m(z,ee);try{const ye=yield he;delete M.abortController,M.state="completed",ye.data instanceof HTMLImageElement||l.b(ye.data)?X(ye):ye.data&&X({data:yield(ge=ye.data,typeof createImageBitmap=="function"?l.d(ge):l.f(ge)),cacheControl:ye.cacheControl,expires:ye.expires})}catch(ye){delete M.abortController,j(ye)}finally{d--,C()}var ge}),C=()=>{const M=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?l.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:l.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=d;z<M&&i.length>0;z++){const N=i.shift();N.abortController.signal.aborted?z--:y(N)}},T=(M,z)=>new Promise((N,j)=>{const X=new Image,ee=M.url,ie=M.credentials;ie&&ie==="include"?X.crossOrigin="use-credentials":(ie&&ie==="same-origin"||!l.s(ee))&&(X.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{X.src="",j(l.c())}),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,N({data:X})},X.onerror=()=>{X.onerror=X.onload=null,z.signal.aborted||j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=ee})}(F||(F={})),F.resetRequestQueue();class G{constructor(i){this._transformRequestFn=i}transformRequest(i,d){return this._transformRequestFn&&this._transformRequestFn(i,d)||{url:i}}setTransformRequest(i){this._transformRequestFn=i}}function te(v){var i=new l.A(3);return i[0]=v[0],i[1]=v[1],i[2]=v[2],i}var oe,ae=function(v,i,d){return v[0]=i[0]-d[0],v[1]=i[1]-d[1],v[2]=i[2]-d[2],v};oe=new l.A(3),l.A!=Float32Array&&(oe[0]=0,oe[1]=0,oe[2]=0);var le=function(v){var i=v[0],d=v[1];return i*i+d*d};function Ie(v){const i=[];if(typeof v=="string")i.push({id:"default",url:v});else if(v&&v.length>0){const d=[];for(const{id:f,url:m}of v){const y=`${f}${m}`;d.indexOf(y)===-1&&(d.push(y),i.push({id:f,url:m}))}}return i}function K(v,i,d){const f=v.split("?");return f[0]+=`${i}${d}`,f.join("?")}(function(){var v=new l.A(2);l.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Ce{constructor(i,d,f,m){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(d,m)}update(i,d,f){const{width:m,height:y}=i,C=!(this.size&&this.size[0]===m&&this.size[1]===y||f),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(d&&d.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!d||d.premultiply!==!1)),C)this.size=[m,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,i):M.texImage2D(M.TEXTURE_2D,0,this.format,m,y,0,this.format,M.UNSIGNED_BYTE,i.data);else{const{x:z,y:N}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.b(i)?M.texSubImage2D(M.TEXTURE_2D,0,z,N,M.RGBA,M.UNSIGNED_BYTE,i):M.texSubImage2D(M.TEXTURE_2D,0,z,N,m,y,M.RGBA,M.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(i,d,f){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),f!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,f||i),this.filter=i),d!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,d),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function Fe(v){const{userImage:i}=v;return!!(i&&i.render&&i.render())&&(v.data.replace(new Uint8Array(i.data.buffer)),!0)}class De extends l.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:d,promiseResolve:f}of this.requestors)f(this._getImagesForIds(d));this.requestors=[]}}getImage(i){const d=this.images[i];if(d&&!d.data&&d.spriteData){const f=d.spriteData;d.data=new l.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),d.spriteData=null}return d}addImage(i,d){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,d)&&(this.images[i]=d)}_validate(i,d){let f=!0;const m=d.data||d.spriteData;return this._validateStretch(d.stretchX,m&&m.width)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(d.stretchY,m&&m.height)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(d.content,d)||(this.fire(new l.j(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,d){if(!i)return!0;let f=0;for(const m of i){if(m[0]<f||m[1]<m[0]||d<m[1])return!1;f=m[1]}return!0}_validateContent(i,d){if(!i)return!0;if(i.length!==4)return!1;const f=d.spriteData,m=f&&f.width||d.data.width,y=f&&f.height||d.data.height;return!(i[0]<0||m<i[0]||i[1]<0||y<i[1]||i[2]<0||m<i[2]||i[3]<0||y<i[3]||i[2]<i[0]||i[3]<i[1])}updateImage(i,d,f=!0){const m=this.getImage(i);if(f&&(m.data.width!==d.data.width||m.data.height!==d.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=m.version+1,this.images[i]=d,this.updatedImages[i]=!0}removeImage(i){const d=this.images[i];delete this.images[i],delete this.patterns[i],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i){return new Promise((d,f)=>{let m=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(m=!1);this.isLoaded()||m?d(this._getImagesForIds(i)):this.requestors.push({ids:i,promiseResolve:d})})}_getImagesForIds(i){const d={};for(const f of i){let m=this.getImage(f);m||(this.fire(new l.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?d[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:l.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){const{width:i,height:d}=this.atlasImage;return{width:i,height:d}}getPattern(i){const d=this.patterns[i],f=this.getImage(i);if(!f)return null;if(d&&d.position.version===f.version)return d.position;if(d)d.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},y=new l.I(m,f);this.patterns[i]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const d=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ce(i,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const y in this.patterns)i.push(this.patterns[y].bin);const{w:d,h:f}=l.p(i),m=this.atlasImage;m.resize({width:d||1,height:f||1});for(const y in this.patterns){const{bin:C}=this.patterns[y],T=C.x+1,M=C.y+1,z=this.getImage(y).data,N=z.width,j=z.height;l.R.copy(z,m,{x:0,y:0},{x:T,y:M},{width:N,height:j}),l.R.copy(z,m,{x:0,y:j-1},{x:T,y:M-1},{width:N,height:1}),l.R.copy(z,m,{x:0,y:0},{x:T,y:M+j},{width:N,height:1}),l.R.copy(z,m,{x:N-1,y:0},{x:T-1,y:M},{width:1,height:j}),l.R.copy(z,m,{x:0,y:0},{x:T+N,y:M},{width:1,height:j})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const d of i){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const f=this.getImage(d);f||l.w(`Image with ID: "${d}" was not found`),Fe(f)&&this.updateImage(d,f)}}}const Ae=1e20;function Re(v,i,d,f,m,y,C,T,M){for(let z=i;z<i+f;z++)Ve(v,d*y+z,y,m,C,T,M);for(let z=d;z<d+m;z++)Ve(v,z*y+i,1,f,C,T,M)}function Ve(v,i,d,f,m,y,C){y[0]=0,C[0]=-Ae,C[1]=Ae,m[0]=v[i];for(let T=1,M=0,z=0;T<f;T++){m[T]=v[i+T*d];const N=T*T;do{const j=y[M];z=(m[T]-m[j]+N-j*j)/(T-j)/2}while(z<=C[M]&&--M>-1);M++,y[M]=T,C[M]=z,C[M+1]=Ae}for(let T=0,M=0;T<f;T++){for(;C[M+1]<T;)M++;const z=y[M],N=T-z;v[i+T*d]=m[z]+N*N}}class et{constructor(i,d){this.requestManager=i,this.localIdeographFontFamily=d,this.entries={}}setURL(i){this.url=i}getGlyphs(i){return l._(this,void 0,void 0,function*(){const d=[];for(const y in i)for(const C of i[y])d.push(this._getAndCacheGlyphsPromise(y,C));const f=yield Promise.all(d),m={};for(const{stack:y,id:C,glyph:T}of f)m[y]||(m[y]={}),m[y][C]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return m})}_getAndCacheGlyphsPromise(i,d){return l._(this,void 0,void 0,function*(){let f=this.entries[i];f||(f=this.entries[i]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[d];if(m!==void 0)return{stack:i,id:d,glyph:m};if(m=this._tinySDF(f,i,d),m)return f.glyphs[d]=m,{stack:i,id:d,glyph:m};const y=Math.floor(d/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[y])return{stack:i,id:d,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[y]){const T=et.loadGlyphRange(i,y,this.url,this.requestManager);f.requests[y]=T}const C=yield f.requests[y];for(const T in C)this._doesCharSupportLocalGlyph(+T)||(f.glyphs[+T]=C[+T]);return f.ranges[y]=!0,{stack:i,id:d,glyph:C[d]||null}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(i))}_tinySDF(i,d,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let y=i.tinySDF;if(!y){let T="400";/bold/i.test(d)?T="900":/medium/i.test(d)?T="500":/light/i.test(d)&&(T="200"),y=i.tinySDF=new et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:T})}const C=y.draw(String.fromCharCode(f));return{id:f,bitmap:new l.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}et.loadGlyphRange=function(v,i,d,f){return l._(this,void 0,void 0,function*(){const m=256*i,y=m+255,C=f.transformRequest(d.replace("{fontstack}",v).replace("{range}",`${m}-${y}`),"Glyphs"),T=yield l.l(C,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${i}, ${m}-${y}`);const M={};for(const z of l.n(T.data))M[z.id]=z;return M})},et.TinySDF=class{constructor({fontSize:v=24,buffer:i=3,radius:d=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:C="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=d;const T=this.size=v+4*i,M=this._createCanvas(T),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${C} ${y} ${v}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(v){const i=document.createElement("canvas");return i.width=i.height=v,i}draw(v){const{width:i,actualBoundingBoxAscent:d,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(v),C=Math.ceil(d),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),M=Math.min(this.size-this.buffer,C+Math.ceil(f)),z=T+2*this.buffer,N=M+2*this.buffer,j=Math.max(z*N,0),X=new Uint8ClampedArray(j),ee={data:X,width:z,height:N,glyphWidth:T,glyphHeight:M,glyphTop:C,glyphLeft:0,glyphAdvance:i};if(T===0||M===0)return ee;const{ctx:ie,buffer:he,gridInner:ge,gridOuter:ye}=this;ie.clearRect(he,he,T,M),ie.fillText(v,he,he+C);const ve=ie.getImageData(he,he,T,M);ye.fill(Ae,0,j),ge.fill(0,0,j);for(let ue=0;ue<M;ue++)for(let be=0;be<T;be++){const Ee=ve.data[4*(ue*T+be)+3]/255;if(Ee===0)continue;const Me=(ue+he)*z+be+he;if(Ee===1)ye[Me]=0,ge[Me]=Ae;else{const je=.5-Ee;ye[Me]=je>0?je*je:0,ge[Me]=je<0?je*je:0}}Re(ye,0,0,z,N,z,this.f,this.v,this.z),Re(ge,he,he,T,M,z,this.f,this.v,this.z);for(let ue=0;ue<j;ue++){const be=Math.sqrt(ye[ue])-Math.sqrt(ge[ue]);X[ue]=Math.round(255-255*(be/this.radius+this.cutoff))}return ee}};class $e{constructor(){this.specification=l.v.light.position}possiblyEvaluate(i,d){return l.x(i.expression.evaluate(d))}interpolate(i,d,f){return{x:l.y.number(i.x,d.x,f),y:l.y.number(i.y,d.y,f),z:l.y.number(i.z,d.z,f)}}}let Ue;class ct extends l.E{constructor(i){super(),Ue=Ue||new l.q({anchor:new l.D(l.v.light.anchor),position:new $e,color:new l.D(l.v.light.color),intensity:new l.D(l.v.light.intensity)}),this._transitionable=new l.T(Ue),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,d={}){if(!this._validate(l.r,i,d))for(const f in i){const m=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,f){return(!f||f.validate!==!1)&&l.t(this,i.call(l.u,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.v}))}}const St=new l.q({"sky-color":new l.D(l.v.sky["sky-color"]),"horizon-color":new l.D(l.v.sky["horizon-color"]),"fog-color":new l.D(l.v.sky["fog-color"]),"fog-ground-blend":new l.D(l.v.sky["fog-ground-blend"]),"horizon-fog-blend":new l.D(l.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new l.D(l.v.sky["sky-horizon-blend"]),"atmosphere-blend":new l.D(l.v.sky["atmosphere-blend"])});class At extends l.E{constructor(i){super(),this._transitionable=new l.T(St),this.setSky(i),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new l.z(0))}setSky(i,d={}){if(!this._validate(l.B,i,d)){i||(i={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in i){const m=i[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,d,f={}){return(f==null?void 0:f.validate)!==!1&&l.t(this,i.call(l.u,l.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:l.v})))}calculateFogBlendOpacity(i){return i<60?0:i<70?(i-60)/10:1}}class jt{constructor(i,d){this.width=i,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,d){const f=i.join(",")+String(d);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,d)),this.dashEntry[f]}getDashRanges(i,d,f){const m=[];let y=i.length%2==1?-i[i.length-1]*f:0,C=i[0]*f,T=!0;m.push({left:y,right:C,isDash:T,zeroLength:i[0]===0});let M=i[0];for(let z=1;z<i.length;z++){T=!T;const N=i[z];y=M*f,M+=N,C=M*f,m.push({left:y,right:C,isDash:T,zeroLength:N===0})}return m}addRoundDash(i,d,f){const m=d/2;for(let y=-f;y<=f;y++){const C=this.width*(this.nextRow+f+y);let T=0,M=i[T];for(let z=0;z<this.width;z++){z/M.right>1&&(M=i[++T]);const N=Math.abs(z-M.left),j=Math.abs(z-M.right),X=Math.min(N,j);let ee;const ie=y/f*(m+1);if(M.isDash){const he=m-Math.abs(ie);ee=Math.sqrt(X*X+he*he)}else ee=m-Math.sqrt(X*X+ie*ie);this.data[C+z]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(i){for(let T=i.length-1;T>=0;--T){const M=i[T],z=i[T+1];M.zeroLength?i.splice(T,1):z&&z.isDash===M.isDash&&(z.left=M.left,i.splice(T,1))}const d=i[0],f=i[i.length-1];d.isDash===f.isDash&&(d.left=f.left-this.width,f.right=d.right+this.width);const m=this.width*this.nextRow;let y=0,C=i[y];for(let T=0;T<this.width;T++){T/C.right>1&&(C=i[++y]);const M=Math.abs(T-C.left),z=Math.abs(T-C.right),N=Math.min(M,z);this.data[m+T]=Math.max(0,Math.min(255,(C.isDash?N:-N)+128))}}addDash(i,d){const f=d?7:0,m=2*f+1;if(this.nextRow+m>this.height)return l.w("LineAtlas out of space"),null;let y=0;for(let T=0;T<i.length;T++)y+=i[T];if(y!==0){const T=this.width/y,M=this.getDashRanges(i,this.width,T);d?this.addRoundDash(M,T,f):this.addRegularDash(M)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:y};return this.nextRow+=m,this.dirty=!0,C}bind(i){const d=i.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class Xt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Xt.workerCount;)this.workers.push(new Worker(l.a.WORKER_URL));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const yn=Math.floor(k.hardwareConcurrency/2);let on,Un;function Mn(){return on||(on=new Xt),on}Xt.workerCount=l.C(globalThis)?Math.max(Math.min(yn,3),1):1;class Vt{constructor(i,d){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=d;const f=this.workerPool.acquire(d);for(let m=0;m<f.length;m++){const y=new l.F(f[m],d);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,d){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:i,data:d}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(i=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],i&&this.workerPool.release(this.id)}registerMessageHandler(i,d){for(const f of this.actors)f.registerMessageHandler(i,d)}}function an(){return Un||(Un=new Vt(Mn(),l.G),Un.registerMessageHandler("GR",(v,i,d)=>l.m(i,d))),Un}function Wt(v,i){const d=l.H();return l.J(d,d,[1,1,0]),l.K(d,d,[.5*v.width,.5*v.height,1]),l.L(d,d,v.calculatePosMatrix(i.toUnwrapped()))}function Cn(v,i,d,f,m,y){const C=function(j,X,ee){if(j)for(const ie of j){const he=X[ie];if(he&&he.source===ee&&he.type==="fill-extrusion")return!0}else for(const ie in X){const he=X[ie];if(he.source===ee&&he.type==="fill-extrusion")return!0}return!1}(m&&m.layers,i,v.id),T=y.maxPitchScaleFactor(),M=v.tilesIn(f,T,C);M.sort(_t);const z=[];for(const j of M)z.push({wrappedTileID:j.tileID.wrapped().key,queryResults:j.tile.queryRenderedFeatures(i,d,v._state,j.queryGeometry,j.cameraQueryGeometry,j.scale,m,y,T,Wt(v.transform,j.tileID))});const N=function(j){const X={},ee={};for(const ie of j){const he=ie.queryResults,ge=ie.wrappedTileID,ye=ee[ge]=ee[ge]||{};for(const ve in he){const ue=he[ve],be=ye[ve]=ye[ve]||{},Ee=X[ve]=X[ve]||[];for(const Me of ue)be[Me.featureIndex]||(be[Me.featureIndex]=!0,Ee.push(Me))}}return X}(z);for(const j in N)N[j].forEach(X=>{const ee=X.feature,ie=v.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=ie});return N}function _t(v,i){const d=v.tileID,f=i.tileID;return d.overscaledZ-f.overscaledZ||d.canonical.y-f.canonical.y||d.wrap-f.wrap||d.canonical.x-f.canonical.x}function Dt(v,i,d){return l._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield l.h(i.transformRequest(v.url,"Source"),d)).data:yield k.frameAsync(d),!f)return null;const m=l.M(l.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(y=>y.id)),m})}class Se{constructor(i,d){i&&(d?this.setSouthWest(i).setNorthEast(d):Array.isArray(i)&&(i.length===4?this.setSouthWest([i[0],i[1]]).setNorthEast([i[2],i[3]]):this.setSouthWest(i[0]).setNorthEast(i[1])))}setNorthEast(i){return this._ne=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}setSouthWest(i){return this._sw=i instanceof l.N?new l.N(i.lng,i.lat):l.N.convert(i),this}extend(i){const d=this._sw,f=this._ne;let m,y;if(i instanceof l.N)m=i,y=i;else{if(!(i instanceof Se))return Array.isArray(i)?i.length===4||i.every(Array.isArray)?this.extend(Se.convert(i)):this.extend(l.N.convert(i)):i&&("lng"in i||"lon"in i)&&"lat"in i?this.extend(l.N.convert(i)):this;if(m=i._sw,y=i._ne,!m||!y)return this}return d||f?(d.lng=Math.min(m.lng,d.lng),d.lat=Math.min(m.lat,d.lat),f.lng=Math.max(y.lng,f.lng),f.lat=Math.max(y.lat,f.lat)):(this._sw=new l.N(m.lng,m.lat),this._ne=new l.N(y.lng,y.lat)),this}getCenter(){return new l.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new l.N(this.getWest(),this.getNorth())}getSouthEast(){return new l.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(i){const{lng:d,lat:f}=l.N.convert(i);let m=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(i){return i instanceof Se?i:i&&new Se(i)}static fromLngLat(i,d=0){const f=360*d/40075017,m=f/Math.cos(Math.PI/180*i.lat);return new Se(new l.N(i.lng-m,i.lat-f),new l.N(i.lng+m,i.lat+f))}adjustAntiMeridian(){const i=new l.N(this._sw.lng,this._sw.lat),d=new l.N(this._ne.lng,this._ne.lat);return new Se(i,i.lng>d.lng?new l.N(d.lng+360,d.lat):d)}}class ur{constructor(i,d,f){this.bounds=Se.convert(this.validateBounds(i)),this.minzoom=d||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const d=Math.pow(2,i.z),f=Math.floor(l.O(this.bounds.getWest())*d),m=Math.floor(l.Q(this.bounds.getNorth())*d),y=Math.ceil(l.O(this.bounds.getEast())*d),C=Math.ceil(l.Q(this.bounds.getSouth())*d);return i.x>=f&&i.x<y&&i.y>=m&&i.y<C}}class bn extends l.E{constructor(i,d,f,m){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.e(this,l.M(d,["url","scheme","tileSize","promoteId"])),this._options=l.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i&&(l.e(this,i),i.bounds&&(this.tileBounds=new ur(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.abort(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return l.e({},this._options)}loadTile(i){return l._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(d,"Tile"),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(i.actor&&i.state!=="expired"){if(i.state==="loading")return new Promise((y,C)=>{i.reloadPromise={resolve:y,reject:C}})}else i.actor=this.dispatcher.getActor(),m="LT";i.abortController=new AbortController;try{const y=yield i.actor.sendAsync({type:m,data:f},i.abortController);if(delete i.abortController,i.aborted)return;this._afterTileLoadWorkerResponse(i,y)}catch(y){if(delete i.abortController,i.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(i,null)}})}_afterTileLoadWorkerResponse(i,d){if(d&&d.resourceTiming&&(i.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&i.setExpiryData(d),i.loadVectorData(d,this.map.painter),i.reloadPromise){const f=i.reloadPromise;i.reloadPromise=null,this.loadTile(i).then(f.resolve).catch(f.reject)}}abortTile(i){return l._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.actor&&(yield i.actor.sendAsync({type:"AT",data:{uid:i.uid,type:this.type,source:this.id}}))})}unloadTile(i){return l._(this,void 0,void 0,function*(){i.unloadVectorData(),i.actor&&(yield i.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ft extends l.E{constructor(i,d,f,m){super(),this.id=i,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.e({type:"raster"},d),l.e(this,l.M(d,["url","scheme","tileSize"]))}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const i=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,i&&(l.e(this,i),i.bounds&&(this.tileBounds=new ur(i.bounds,this.minzoom,this.maxzoom)),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})))}catch(i){this._tileJSONRequest=null,this.fire(new l.j(i))}})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(i){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}serialize(){return l.e({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i){return l._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.abortController=new AbortController;try{const f=yield F.getImage(this.map._requestManager.transformRequest(d,"Tile"),i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&i.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,y=m.gl,C=f.data;i.texture=this.map.painter.getTileTexture(C.width),i.texture?i.texture.update(C,{useMipmap:!0}):(i.texture=new Ce(m,C,y.RGBA,{useMipmap:!0}),i.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),i.state="loaded"}}catch(f){if(delete i.abortController,i.aborted)i.state="unloaded";else if(f)throw i.state="errored",f}})}abortTile(i){return l._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController)})}unloadTile(i){return l._(this,void 0,void 0,function*(){i.texture&&this.map.painter.saveTileTexture(i.texture)})}hasTransition(){return!1}}class qt extends ft{constructor(i,d,f,m){super(i,d,f,m),this.type="raster-dem",this.maxzoom=22,this._options=l.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(i){return l._(this,void 0,void 0,function*(){const d=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(d,"Tile");i.neighboringTiles=this._getNeighboringTiles(i.tileID),i.abortController=new AbortController;try{const m=yield F.getImage(f,i.abortController,this.map._refreshExpiredTiles);if(delete i.abortController,i.aborted)return void(i.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&i.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const C=l.b(y)&&l.U()?y:yield this.readImageNow(y),T={type:this.type,uid:i.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!i.actor||i.state==="expired"){i.actor=this.dispatcher.getActor();const M=yield i.actor.sendAsync({type:"LDT",data:T});i.dem=M,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded"}}}catch(m){if(delete i.abortController,i.aborted)i.state="unloaded";else if(m)throw i.state="errored",m}})}readImageNow(i){return l._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&l.V()){const d=i.width+2,f=i.height+2;try{return new l.R({width:d,height:f},yield l.W(i,-1,-1,d,f))}catch{}}return k.getImageData(i,1)})}_getNeighboringTiles(i){const d=i.canonical,f=Math.pow(2,d.z),m=(d.x-1+f)%f,y=d.x===0?i.wrap-1:i.wrap,C=(d.x+1+f)%f,T=d.x+1===f?i.wrap+1:i.wrap,M={};return M[new l.S(i.overscaledZ,y,d.z,m,d.y).key]={backfilled:!1},M[new l.S(i.overscaledZ,T,d.z,C,d.y).key]={backfilled:!1},d.y>0&&(M[new l.S(i.overscaledZ,y,d.z,m,d.y-1).key]={backfilled:!1},M[new l.S(i.overscaledZ,i.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},M[new l.S(i.overscaledZ,T,d.z,C,d.y-1).key]={backfilled:!1}),d.y+1<f&&(M[new l.S(i.overscaledZ,y,d.z,m,d.y+1).key]={backfilled:!1},M[new l.S(i.overscaledZ,i.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},M[new l.S(i.overscaledZ,T,d.z,C,d.y+1).key]={backfilled:!1}),M}unloadTile(i){return l._(this,void 0,void 0,function*(){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&(yield i.actor.sendAsync({type:"RDT",data:{type:this.type,uid:i.uid,source:this.id}}))})}}class fn extends l.E{constructor(i,d,f,m){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=d.data,this._options=l.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const y=l.X/this.tileSize;d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&l.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=l.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*y,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*y,extent:l.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:l.X,radius:(d.clusterRadius||50)*y,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return l._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData(),this}updateData(i){return this._updateWorkerData(i),this}getData(){return l._(this,void 0,void 0,function*(){const i=l.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:i})})}setClusterOptions(i){return this.workerOptions.cluster=i.cluster,i&&(i.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=i.clusterRadius),i.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=i.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(i){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:i,source:this.id}})}getClusterChildren(i){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:i,source:this.id}})}getClusterLeaves(i,d,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:i,limit:d,offset:f}})}_updateWorkerData(i){return l._(this,void 0,void 0,function*(){const d=l.e({type:this.type},this.workerOptions);i?d.dataDiff=i:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new l.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new l.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&l.e(y,{resourceTiming:m}),this.fire(new l.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new l.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new l.k("dataabort",{dataType:"source"}));this.fire(new l.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(i){return l._(this,void 0,void 0,function*(){const d=i.actor?"RT":"LT";i.actor=this.actor;const f={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.abortController=new AbortController;const m=yield this.actor.sendAsync({type:d,data:f},i.abortController);delete i.abortController,i.unloadVectorData(),i.aborted||i.loadVectorData(m,this.map.painter,d==="RT")})}abortTile(i){return l._(this,void 0,void 0,function*(){i.abortController&&(i.abortController.abort(),delete i.abortController),i.aborted=!0})}unloadTile(i){return l._(this,void 0,void 0,function*(){i.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:i.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return l.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ir=l.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends l.E{constructor(i,d,f,m){super(),this.id=i,this.dispatcher=f,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=d}load(i){return l._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new l.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const d=yield F.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,i&&(this.coordinates=i),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new l.j(d))}})}loaded(){return this._loaded}updateImage(i){return i.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=i.url,this.load(i.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(i){this.coordinates=i;const d=i.map(l.Z.fromLngLat);this.tileID=function(m){let y=1/0,C=1/0,T=-1/0,M=-1/0;for(const X of m)y=Math.min(y,X.x),C=Math.min(C,X.y),T=Math.max(T,X.x),M=Math.max(M,X.y);const z=Math.max(T-y,M-C),N=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),j=Math.pow(2,N);return new l.a1(N,Math.floor((y+T)/2*j),Math.floor((C+M)/2*j))}(d),this.minzoom=this.maxzoom=this.tileID.z;const f=d.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new l.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.X,l.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,d=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ce(i,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(i){return l._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={}):i.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class zn extends Ct{constructor(i,d,f,m){super(i,d,f,m),this.roundZoom=!0,this.type="video",this.options=d}load(){return l._(this,void 0,void 0,function*(){this._loaded=!1;const i=this.options;this.urls=[];for(const d of i.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{const d=yield l.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new l.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const d=this.video.seekable;i<d.start(0)||i>d.end(0)?this.fire(new l.j(new l.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,d=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new Ce(i,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class yr extends Ct{constructor(i,d,f,m){super(i,d,f,m),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(C=>typeof C!="number"))||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new l.j(new l.a2(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new l.j(new l.a2(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.j(new l.a2(`sources.${i}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return l._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,f=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=l.a0.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ce(d,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,m=!0)}m&&this.fire(new l.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ei={},vr=v=>{switch(v){case"geojson":return fn;case"image":return Ct;case"raster":return ft;case"raster-dem":return qt;case"vector":return bn;case"video":return zn;case"canvas":return yr}return ei[v]},Ge="RTLPluginLoaded";class cr extends l.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=an()}_syncState(i){return this.status=i,this.dispatcher.broadcast("SRPS",{pluginStatus:i,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(i){return l._(this,arguments,void 0,function*(d,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return l._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new l.k(Ge))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Kn=null;function dn(){return Kn||(Kn=new cr),Kn}class Rr{constructor(i,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=i,this.uid=l.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const d=i+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(i,d,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(m,y){const C={};if(!y)return C;for(const T of m){const M=T.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(z=>M.filter(N=>N.id===z)[0]));for(const z of M)C[z.id]=T}}return C}(i.buckets,d.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof l.a6){if(this.hasSymbolBuckets=!0,!f)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof l.a6&&y.hasRTLText){this.hasRTLText=!0,dn().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(m).queryRadius(y))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.a5}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(i)}const d=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ce(i,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ce(i,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,d,f,m,y,C,T,M,z,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:C,tileSize:this.tileSize,pixelPosMatrix:N,transform:M,params:T,queryPadding:this.queryPadding*z},i,d,f):{}}querySourceFeatures(i,d){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),y=d&&d.sourceLayer?d.sourceLayer:"",C=m._geojsonTileLayer||m[y];if(!C)return;const T=l.a7(d&&d.filter),{z:M,x:z,y:N}=this.tileID.canonical,j={z:M,x:z,y:N};for(let X=0;X<C.length;X++){const ee=C.feature(X);if(T.needGeometry){const ge=l.a8(ee,!0);if(!T.filter(new l.z(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!T.filter(new l.z(this.tileID.overscaledZ),ee))continue;const ie=f.getId(ee,y),he=new l.a9(ee,M,z,N,ie);he.tile=j,i.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const d=this.expirationTime;if(i.cacheControl){const f=l.aa(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(d)if(this.expirationTime<d)m=!0;else{const y=this.expirationTime-d;y?this.expirationTime=f+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!d.style.hasLayer(m))continue;const y=this.buckets[m],C=y.layers[0].sourceLayer||"_geojsonTileLayer",T=f[C],M=i[C];if(!T||!M||Object.keys(M).length===0)continue;y.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=d&&d.style&&d.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=k.now()+i}setDependencies(i,d){const f={};for(const m of d)f[m]=!0;this.dependencies[i]=f}hasDependency(i,d){for(const f of i){const m=this.dependencies[f];if(m){for(const y of d)if(m[y])return!0}}return!1}}class Ke{constructor(i,d){this.max=i,this.onRemove=d,this.reset()}reset(){for(const i in this.data)for(const d of this.data[i])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(i,d,f){const m=i.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:d,timeout:void 0};if(f!==void 0&&(y.timeout=setTimeout(()=>{this.remove(i,y)},f)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const d=this.data[i].shift();return d.timeout&&clearTimeout(d.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),d.value}getByKey(i){const d=this.data[i];return d?d[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,d){if(!this.has(i))return this;const f=i.wrapped().key,m=d===void 0?0:this.data[f].indexOf(d),y=this.data[f][m];return this.data[f].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(y.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(i){const d=[];for(const f in this.data)for(const m of this.data[f])i(m.value)||d.push(m);for(const f of d)this.remove(f.value.tileID,f)}}class Xe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,d,f){const m=String(d);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][m]=this.stateChanges[i][m]||{},l.e(this.stateChanges[i][m],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const y in this.state[i])y!==m&&(this.deletedStates[i][y]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][m]===null){this.deletedStates[i][m]={};for(const y in this.state[i][m])f[y]||(this.deletedStates[i][m][y]=null)}else for(const y in f)this.deletedStates[i]&&this.deletedStates[i][m]&&this.deletedStates[i][m][y]===null&&delete this.deletedStates[i][m][y]}removeFeatureState(i,d,f){if(this.deletedStates[i]===null)return;const m=String(d);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&d!==void 0)this.deletedStates[i][m]!==null&&(this.deletedStates[i][m]=this.deletedStates[i][m]||{},this.deletedStates[i][m][f]=null);else if(d!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][m])for(f in this.deletedStates[i][m]={},this.stateChanges[i][m])this.deletedStates[i][m][f]=null;else this.deletedStates[i][m]=null;else this.deletedStates[i]=null}getState(i,d){const f=String(d),m=l.e({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const y=this.deletedStates[i][d];if(y===null)return{};for(const C in y)delete m[C]}return m}initializeTileState(i,d){i.setFeatureState(this.state,d)}coalesceChanges(i,d){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),l.e(this.state[m][C],this.stateChanges[m][C]),y[C]=this.state[m][C];f[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const C in this.state[m])y[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const T of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][T];y[C]=this.state[m][C]}f[m]=f[m]||{},l.e(f[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in i)i[m].setFeatureState(f,d)}}class at extends l.E{constructor(i,d,f){super(),this.id=i,this.dispatcher=f,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,C,T)=>{const M=new(vr(y.type))(m,y,C,T);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(i,d,f,this),this._tiles={},this._cache=new Ke(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Xe,this._didEmitContent=!1,this._updated=!1}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._maxTileCacheZoomLevels=i?i._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const i in this._tiles){const d=this._tiles[i];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,d,f){return l._(this,void 0,void 0,function*(){try{yield this._source.loadTile(i),this._tileLoaded(i,d,f)}catch(m){i.state="errored",m.status!==404?this._source.fire(new l.j(m,{tile:i})):this.update(this.transform,this.terrain)}})}_unloadTile(i){this._source.unloadTile&&this._source.unloadTile(i)}_abortTile(i){this._source.abortTile&&this._source.abortTile(i),this._source.fire(new l.k("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const f=this._tiles[d];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(mn).map(i=>i.key)}getRenderableIds(i){const d=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&d.push(this._tiles[f]);return i?d.sort((f,m)=>{const y=f.tileID,C=m.tileID,T=new l.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new l.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-C.overscaledZ||M.y-T.y||M.x-T.x}).map(f=>f.tileID.key):d.map(f=>f.tileID).sort(mn).map(f=>f.key)}hasRenderableParent(i){const d=this.findLoadedParent(i,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(i,d){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(d||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,d){return l._(this,void 0,void 0,function*(){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=d),yield this._loadTile(f,i,d))})}_tileLoaded(i,d,f){i.timeAdded=k.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(d,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.k("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const d=this.getRenderableIds();for(let m=0;m<d.length;m++){const y=d[m];if(i.neighboringTiles&&i.neighboringTiles[y]){const C=this.getTileByID(y);f(i,C),f(C,i)}}function f(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=y.tileID.canonical.x-m.tileID.canonical.x;const T=y.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),z=y.tileID.key;C===0&&T===0||Math.abs(T)>1||(Math.abs(C)>1&&(Math.abs(C+M)===1?C+=M:Math.abs(C-M)===1&&(C-=M)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,C,T),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,d,f,m){for(const y in this._tiles){let C=this._tiles[y];if(m[y]||!C.hasData()||C.tileID.overscaledZ<=d||C.tileID.overscaledZ>f)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>d+1;){const z=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[z.key],C&&C.hasData()&&(T=z)}let M=T;for(;M.overscaledZ>d;)if(M=M.scaledTo(M.overscaledZ-1),i[M.key]){m[T.key]=T;break}}}findLoadedParent(i,d){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=d?f:null}for(let f=i.overscaledZ-1;f>=d;f--){const m=i.scaledTo(f),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(i){return this._getLoadedTile(i)}_getLoadedTile(i){const d=this._tiles[i.key];return d&&d.hasData()?d:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const d=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,m=Math.floor(d*f*(this._maxTileCacheZoomLevels===null?l.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(i){const d=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,d){const f={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+d),f[y.tileID.key]=y}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(i,d,f,m,y,C){const T={},M={},z=Object.keys(i),N=k.now();for(const j of z){const X=i[j],ee=this._tiles[j];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=N)continue;const ie=this.findLoadedParent(X,d),he=this.findLoadedSibling(X),ge=ie||he||null;ge&&(this._addTile(ge.tileID),T[ge.tileID.key]=ge.tileID),M[j]=X}this._retainLoadedChildren(M,m,f,i);for(const j in T)i[j]||(this._coveredTiles[j]=!0,i[j]=T[j]);if(C){const j={},X={};for(const ee of y)this._tiles[ee.key].hasData()?j[ee.key]=ee:X[ee.key]=ee;for(const ee in X){const ie=X[ee].children(this._source.maxzoom);this._tiles[ie[0].key]&&this._tiles[ie[1].key]&&this._tiles[ie[2].key]&&this._tiles[ie[3].key]&&(j[ie[0].key]=i[ie[0].key]=ie[0],j[ie[1].key]=i[ie[1].key]=ie[1],j[ie[2].key]=i[ie[2].key]=ie[2],j[ie[3].key]=i[ie[3].key]=ie[3],delete X[ee])}for(const ee in X){const ie=X[ee],he=this.findLoadedParent(ie,this._source.minzoom),ge=this.findLoadedSibling(ie),ye=he||ge||null;if(ye){j[ye.tileID.key]=i[ye.tileID.key]=ye.tileID;for(const ve in j)j[ve].isChildOf(ye.tileID)&&delete j[ve]}}for(const ee in this._tiles)j[ee]||(this._coveredTiles[ee]=!0)}}update(i,d){if(!this._sourceLoaded||this._paused)return;let f;this.transform=i,this.terrain=d,this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(N=>new l.S(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(f=f.filter(N=>this._source.hasTile(N)))):f=[];const m=i.coveringZoomLevel(this._source),y=Math.max(m-at.maxOverzooming,this._source.minzoom),C=Math.max(m+at.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const N={};for(const j of f)if(j.canonical.z>this._source.minzoom){const X=j.scaledTo(j.canonical.z-1);N[X.key]=X;const ee=j.scaledTo(Math.max(this._source.minzoom,Math.min(j.canonical.z,5)));N[ee.key]=ee}f=f.concat(Object.values(N))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new l.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);zr(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,C,m,f,d);for(const N in M)this._tiles[N].clearFadeHold();const z=l.ab(this._tiles,M);for(const N of z){const j=this._tiles[N];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(N)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,d){var f;const m={},y={},C=Math.max(d-at.maxOverzooming,this._source.minzoom),T=Math.max(d+at.maxUnderzooming,this._source.minzoom),M={};for(const z of i){const N=this._addTile(z);m[z.key]=z,N.hasData()||d<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,d,T,m);for(const z of i){let N=this._tiles[z.key];if(N.hasData())continue;if(d+1>this._source.maxzoom){const X=z.children(this._source.maxzoom)[0],ee=this.getTile(X);if(ee&&ee.hasData()){m[X.key]=X;continue}}else{const X=z.children(this._source.maxzoom);if(m[X[0].key]&&m[X[1].key]&&m[X[2].key]&&m[X[3].key])continue}let j=N.wasRequested();for(let X=z.overscaledZ-1;X>=C;--X){const ee=z.scaledTo(X);if(y[ee.key])break;if(y[ee.key]=!0,N=this.getTile(ee),!N&&j&&(N=this._addTile(ee)),N){const ie=N.hasData();if((ie||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||j)&&(m[ee.key]=ee),j=N.wasRequested(),ie)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const d=[];let f,m=this._tiles[i].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}d.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(y),f)break;m=y}for(const y of d)this._loadedParentTiles[y]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const i in this._tiles){const d=this._tiles[i].tileID,f=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=f}}_addTile(i){let d=this._tiles[i.key];if(d)return d;d=this._cache.getAndRemove(i),d&&(this._setTileReloadTimer(i.key,d),d.tileID=i,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,d)));const f=d;return d||(d=new Rr(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(d,i.key,d.state)),d.uses++,this._tiles[i.key]=d,f||this._source.fire(new l.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(i,d){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=d.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const d=this._tiles[i];d&&(d.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(i){const d=i.sourceDataType;i.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&i.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,d,f){const m=[],y=this.transform;if(!y)return m;const C=f?y.getCameraQueryGeometry(i):i,T=i.map(ie=>y.pointCoordinate(ie,this.terrain)),M=C.map(ie=>y.pointCoordinate(ie,this.terrain)),z=this.getIds();let N=1/0,j=1/0,X=-1/0,ee=-1/0;for(const ie of M)N=Math.min(N,ie.x),j=Math.min(j,ie.y),X=Math.max(X,ie.x),ee=Math.max(ee,ie.y);for(let ie=0;ie<z.length;ie++){const he=this._tiles[z[ie]];if(he.holdingForFade())continue;const ge=he.tileID,ye=Math.pow(2,y.zoom-he.tileID.overscaledZ),ve=d*he.queryPadding*l.X/he.tileSize/ye,ue=[ge.getTilePoint(new l.Z(N,j)),ge.getTilePoint(new l.Z(X,ee))];if(ue[0].x-ve<l.X&&ue[0].y-ve<l.X&&ue[1].x+ve>=0&&ue[1].y+ve>=0){const be=T.map(Me=>ge.getTilePoint(Me)),Ee=M.map(Me=>ge.getTilePoint(Me));m.push({tile:he,tileID:ge,queryGeometry:be,cameraQueryGeometry:Ee,scale:ye})}}return m}getVisibleCoordinates(i){const d=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of d)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(zr(this._source.type)){const i=k.now();for(const d in this._tiles)if(this._tiles[d].fadeEndTime>=i)return!0}return!1}setFeatureState(i,d,f){this._state.updateState(i=i||"_geojsonTileLayer",d,f)}removeFeatureState(i,d,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",d,f)}getFeatureState(i,d){return this._state.getState(i=i||"_geojsonTileLayer",d)}setDependencies(i,d,f){const m=this._tiles[i];m&&m.setDependencies(d,f)}reloadTilesForDependencies(i,d){for(const f in this._tiles)this._tiles[f].hasDependency(i,d)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,d))}}function mn(v,i){const d=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return v.overscaledZ-i.overscaledZ||f-d||i.canonical.y-v.canonical.y||i.canonical.x-v.canonical.x}function zr(v){return v==="raster"||v==="image"||v==="video"}at.maxOverzooming=10,at.maxUnderzooming=3;class $t{constructor(i,d){this.reset(i,d)}reset(i,d){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.ac(i,0,1);let d=1,f=this._distances[d];const m=i*this.paddedLength+this.padding;for(;f<m&&d<this._distances.length;)f=this._distances[++d];const y=d-1,C=this._distances[y],T=f-C,M=T>0?(m-C)/T:0;return this.points[y].mult(1-M).add(this.points[d].mult(M))}}function vo(v,i){let d=!0;return v==="always"||v!=="never"&&i!=="never"||(d=!1),d}class $o{constructor(i,d,f){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(d/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=d,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,d,f,m,y){this._forEachCell(d,f,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(d),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(i,d,f,m){this._forEachCell(d-m,f-m,d+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(d),this.circles.push(f),this.circles.push(m)}_insertBoxCell(i,d,f,m,y,C){this.boxCells[y].push(C)}_insertCircleCell(i,d,f,m,y,C){this.circleCells[y].push(C)}_query(i,d,f,m,y,C,T){if(f<0||i>this.width||m<0||d>this.height)return[];const M=[];if(i<=0&&d<=0&&this.width<=f&&this.height<=m){if(y)return[{key:null,x1:i,y1:d,x2:f,y2:m}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const N=this.circles[3*z],j=this.circles[3*z+1],X=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:N-X,y1:j-X,x2:N+X,y2:j+X})}}else this._forEachCell(i,d,f,m,this._queryCell,M,{hitTest:y,overlapMode:C,seenUids:{box:{},circle:{}}},T);return M}query(i,d,f,m){return this._query(i,d,f,m,!1,null)}hitTest(i,d,f,m,y,C){return this._query(i,d,f,m,!0,y,C).length>0}hitTestCircle(i,d,f,m,y){const C=i-f,T=i+f,M=d-f,z=d+f;if(T<0||C>this.width||z<0||M>this.height)return!1;const N=[];return this._forEachCell(C,M,T,z,this._queryCellCircle,N,{hitTest:!0,overlapMode:m,circle:{x:i,y:d,radius:f},seenUids:{box:{},circle:{}}},y),N.length>0}_queryCell(i,d,f,m,y,C,T,M){const{seenUids:z,hitTest:N,overlapMode:j}=T,X=this.boxCells[y];if(X!==null){const ie=this.bboxes;for(const he of X)if(!z.box[he]){z.box[he]=!0;const ge=4*he,ye=this.boxKeys[he];if(i<=ie[ge+2]&&d<=ie[ge+3]&&f>=ie[ge+0]&&m>=ie[ge+1]&&(!M||M(ye))&&(!N||!vo(j,ye.overlapMode))&&(C.push({key:ye,x1:ie[ge],y1:ie[ge+1],x2:ie[ge+2],y2:ie[ge+3]}),N))return!0}}const ee=this.circleCells[y];if(ee!==null){const ie=this.circles;for(const he of ee)if(!z.circle[he]){z.circle[he]=!0;const ge=3*he,ye=this.circleKeys[he];if(this._circleAndRectCollide(ie[ge],ie[ge+1],ie[ge+2],i,d,f,m)&&(!M||M(ye))&&(!N||!vo(j,ye.overlapMode))){const ve=ie[ge],ue=ie[ge+1],be=ie[ge+2];if(C.push({key:ye,x1:ve-be,y1:ue-be,x2:ve+be,y2:ue+be}),N)return!0}}}return!1}_queryCellCircle(i,d,f,m,y,C,T,M){const{circle:z,seenUids:N,overlapMode:j}=T,X=this.boxCells[y];if(X!==null){const ie=this.bboxes;for(const he of X)if(!N.box[he]){N.box[he]=!0;const ge=4*he,ye=this.boxKeys[he];if(this._circleAndRectCollide(z.x,z.y,z.radius,ie[ge+0],ie[ge+1],ie[ge+2],ie[ge+3])&&(!M||M(ye))&&!vo(j,ye.overlapMode))return C.push(!0),!0}}const ee=this.circleCells[y];if(ee!==null){const ie=this.circles;for(const he of ee)if(!N.circle[he]){N.circle[he]=!0;const ge=3*he,ye=this.circleKeys[he];if(this._circlesCollide(ie[ge],ie[ge+1],ie[ge+2],z.x,z.y,z.radius)&&(!M||M(ye))&&!vo(j,ye.overlapMode))return C.push(!0),!0}}}_forEachCell(i,d,f,m,y,C,T,M){const z=this._convertToXCellCoord(i),N=this._convertToYCellCoord(d),j=this._convertToXCellCoord(f),X=this._convertToYCellCoord(m);for(let ee=z;ee<=j;ee++)for(let ie=N;ie<=X;ie++)if(y.call(this,i,d,f,m,this.xCellCount*ie+ee,C,T,M))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,d,f,m,y,C){const T=m-i,M=y-d,z=f+C;return z*z>T*T+M*M}_circleAndRectCollide(i,d,f,m,y,C,T){const M=(C-m)/2,z=Math.abs(i-(m+M));if(z>M+f)return!1;const N=(T-y)/2,j=Math.abs(d-(y+N));if(j>N+f)return!1;if(z<=M||j<=N)return!0;const X=z-M,ee=j-N;return X*X+ee*ee<=f*f}}function ca(v,i,d,f,m){const y=l.H();return i?(l.K(y,y,[1/m,1/m,1]),d||l.ad(y,y,f.angle)):l.L(y,f.labelPlaneMatrix,v),y}function _o(v,i,d,f,m){if(i){const y=l.ae(v);return l.K(y,y,[m,m,1]),d||l.ad(y,y,-f.angle),y}return f.glCoordMatrix}function fe(v,i,d,f){let m;f?(m=[v,i,f(v,i),1],l.af(m,m,d)):(m=[v,i,0,1],en(m,m,d));const y=m[3];return{point:new l.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function q(v,i){return .5+v/i*.5}function W(v,i){return v.x>=-i[0]&&v.x<=i[0]&&v.y>=-i[1]&&v.y<=i[1]}function Q(v,i,d,f,m,y,C,T,M,z,N,j,X,ee,ie){const he=f?v.textSizeData:v.iconSizeData,ge=l.ag(he,d.transform.zoom),ye=[256/d.width*2+1,256/d.height*2+1],ve=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ve.clear();const ue=v.lineVertexArray,be=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ee=d.transform.width/d.transform.height;let Me=!1;for(let je=0;je<be.length;je++){const Ze=be.get(je);if(Ze.hidden||Ze.writingMode===l.ah.vertical&&!Me){It(Ze.numGlyphs,ve);continue}Me=!1;const it=fe(Ze.anchorX,Ze.anchorY,i,ie);if(!W(it.point,ye)){It(Ze.numGlyphs,ve);continue}const pt=q(d.transform.cameraToCenterDistance,it.signedDistanceFromCamera),Qe=l.ai(he,ge,Ze),Je=C?Qe/pt:Qe*pt,bt={getElevation:ie,labelPlaneMatrix:m,lineVertexArray:ue,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new l.P(Ze.anchorX,Ze.anchorY),unwrappedTileID:N,width:j,height:X,translation:ee},Ut=we(bt,Ze,Je,!1,T,i,y,v.glyphOffsetArray,ve,Ee,M);Me=Ut.useVertical,(Ut.notEnoughRoom||Me||Ut.needsFlipping&&we(bt,Ze,Je,!0,T,i,y,v.glyphOffsetArray,ve,Ee,M).notEnoughRoom)&&It(Ze.numGlyphs,ve)}f?v.text.dynamicLayoutVertexBuffer.updateData(ve):v.icon.dynamicLayoutVertexBuffer.updateData(ve)}function ce(v,i,d,f,m,y,C,T){const M=y.glyphStartIndex+y.numGlyphs,z=y.lineStartIndex,N=y.lineStartIndex+y.lineLength,j=i.getoffsetX(y.glyphStartIndex),X=i.getoffsetX(M-1),ee=We(v*j,d,f,m,y.segment,z,N,T,C);if(!ee)return null;const ie=We(v*X,d,f,m,y.segment,z,N,T,C);return ie?T.projectionCache.anyProjectionOccluded?null:{first:ee,last:ie}:null}function _e(v,i,d,f){return v===l.ah.horizontal&&Math.abs(d.y-i.y)>Math.abs(d.x-i.x)*f?{useVertical:!0}:(v===l.ah.vertical?i.y<d.y:i.x>d.x)?{needsFlipping:!0}:null}function we(v,i,d,f,m,y,C,T,M,z,N){const j=d/24,X=i.lineOffsetX*j,ee=i.lineOffsetY*j;let ie;if(i.numGlyphs>1){const he=i.glyphStartIndex+i.numGlyphs,ge=i.lineStartIndex,ye=i.lineStartIndex+i.lineLength,ve=ce(j,T,X,ee,f,i,N,v);if(!ve)return{notEnoughRoom:!0};const ue=fe(ve.first.point.x,ve.first.point.y,C,v.getElevation).point,be=fe(ve.last.point.x,ve.last.point.y,C,v.getElevation).point;if(m&&!f){const Ee=_e(i.writingMode,ue,be,z);if(Ee)return Ee}ie=[ve.first];for(let Ee=i.glyphStartIndex+1;Ee<he-1;Ee++)ie.push(We(j*T.getoffsetX(Ee),X,ee,f,i.segment,ge,ye,v,N));ie.push(ve.last)}else{if(m&&!f){const ge=fe(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,ye=i.lineStartIndex+i.segment+1,ve=new l.P(v.lineVertexArray.getx(ye),v.lineVertexArray.gety(ye)),ue=fe(ve.x,ve.y,y,v.getElevation),be=ue.signedDistanceFromCamera>0?ue.point:function(Me,je,Ze,it,pt,Qe){return re(Me,je,Ze,1,pt,Qe)}(v.tileAnchorPoint,ve,ge,0,y,v),Ee=_e(i.writingMode,ge,be,z);if(Ee)return Ee}const he=We(j*T.getoffsetX(i.glyphStartIndex),X,ee,f,i.segment,i.lineStartIndex,i.lineStartIndex+i.lineLength,v,N);if(!he||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ie=[he]}for(const he of ie)l.aj(M,he.point,he.angle);return{}}function re(v,i,d,f,m,y){const C=v.add(v.sub(i)._unit()),T=m!==void 0?fe(C.x,C.y,m,y.getElevation).point:Le(C.x,C.y,y).point,M=d.sub(T);return d.add(M._mult(f/M.mag()))}function pe(v,i,d){const f=i.projectionCache;if(f.projections[v])return f.projections[v];const m=new l.P(i.lineVertexArray.getx(v),i.lineVertexArray.gety(v)),y=Le(m.x,m.y,i);if(y.signedDistanceFromCamera>0)return f.projections[v]=y.point,f.anyProjectionOccluded=f.anyProjectionOccluded||y.isOccluded,y.point;const C=v-d.direction;return function(T,M,z,N,j){return re(T,M,z,N,void 0,j)}(d.distanceFromAnchor===0?i.tileAnchorPoint:new l.P(i.lineVertexArray.getx(C),i.lineVertexArray.gety(C)),m,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,i)}function Le(v,i,d){const f=v+d.translation[0],m=i+d.translation[1];let y;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(y=d.projection.projectTileCoordinates(f,m,d.unwrappedTileID,d.getElevation),y.point.x=(.5*y.point.x+.5)*d.width,y.point.y=(.5*-y.point.y+.5)*d.height):(y=fe(f,m,d.labelPlaneMatrix,d.getElevation),y.isOccluded=!1),y}function Oe(v,i,d){return v._unit()._perp()._mult(i*d)}function ke(v,i,d,f,m,y,C,T,M){if(T.projectionCache.offsets[v])return T.projectionCache.offsets[v];const z=d.add(i);if(v+M.direction<f||v+M.direction>=m)return T.projectionCache.offsets[v]=z,z;const N=pe(v+M.direction,T,M),j=Oe(N.sub(d),C,M.direction),X=d.add(j),ee=N.add(j);return T.projectionCache.offsets[v]=l.ak(y,z,X,ee)||z,T.projectionCache.offsets[v]}function We(v,i,d,f,m,y,C,T,M){const z=f?v-i:v+i;let N=z>0?1:-1,j=0;f&&(N*=-1,j=Math.PI),N<0&&(j+=Math.PI);let X,ee=N>0?y+m:y+m+1;T.projectionCache.cachedAnchorPoint?X=T.projectionCache.cachedAnchorPoint:(X=Le(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=X);let ie,he,ge=X,ye=X,ve=0,ue=0;const be=Math.abs(z),Ee=[];let Me;for(;ve+ue<=be;){if(ee+=N,ee<y||ee>=C)return null;ve+=ue,ye=ge,he=ie;const it={absOffsetX:be,direction:N,distanceFromAnchor:ve,previousVertex:ye};if(ge=pe(ee,T,it),d===0)Ee.push(ye),Me=ge.sub(ye);else{let pt;const Qe=ge.sub(ye);pt=Qe.mag()===0?Oe(pe(ee+N,T,it).sub(ge),d,N):Oe(Qe,d,N),he||(he=ye.add(pt)),ie=ke(ee,pt,ge,y,C,he,d,T,it),Ee.push(he),Me=ie.sub(he)}ue=Me.mag()}const je=Me._mult((be-ve)/ue)._add(he||ye),Ze=j+Math.atan2(ge.y-ye.y,ge.x-ye.x);return Ee.push(je),{point:je,angle:M?Ze:0,path:Ee}}const gt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function It(v,i){for(let d=0;d<v;d++){const f=i.length;i.resize(f+4),i.float32.set(gt,3*f)}}function en(v,i,d){const f=i[0],m=i[1];return v[0]=d[0]*f+d[4]*m+d[12],v[1]=d[1]*f+d[5]*m+d[13],v[3]=d[3]*f+d[7]*m+d[15],v}const Bt=100;class vn{constructor(i,d,f=new $o(i.width+200,i.height+200,25),m=new $o(i.width+200,i.height+200,25)){this.transform=i,this.mapProjection=d,this.grid=f,this.ignoredGrid=m,this.pitchFactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+Bt,this.screenBottomBoundary=i.height+Bt,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,d,f,m,y,C,T,M,z,N,j){const X=i.anchorPointX+M[0],ee=i.anchorPointY+M[1],ie=this.projectAndGetPerspectiveRatio(m,X,ee,y,N),he=f*ie.perspectiveRatio;let ge;if(C||T)ge=this._projectCollisionBox(i,he,m,y,C,T,M,ie,N,j);else{const Ee=ie.point.x+(j?j.x*he:0),Me=ie.point.y+(j?j.y*he:0);ge={allPointsOccluded:!1,box:[Ee+i.x1*he,Me+i.y1*he,Ee+i.x2*he,Me+i.y2*he]}}const[ye,ve,ue,be]=ge.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?ge.allPointsOccluded:this.mapProjection.isOccluded(X,ee,y))||ie.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ye,ve,ue,be)||d!=="always"&&this.grid.hitTest(ye,ve,ue,be,d,z)?{box:[ye,ve,ue,be],placeable:!1,offscreen:!1}:{box:[ye,ve,ue,be],placeable:!0,offscreen:this.isOffscreen(ye,ve,ue,be)}}placeCollisionCircles(i,d,f,m,y,C,T,M,z,N,j,X,ee,ie,he,ge){const ye=[],ve=new l.P(d.anchorX,d.anchorY),ue=this.getPerspectiveRatio(C,ve.x,ve.y,T,ge),be=(j?y/ue:y*ue)/l.ap,Ee={getElevation:ge,labelPlaneMatrix:M,lineVertexArray:f,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ve,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:he},Me=ce(be,m,d.lineOffsetX*be,d.lineOffsetY*be,!1,d,!1,Ee);let je=!1,Ze=!1,it=!0;if(Me){const pt=.5*ee*ue+ie,Qe=new l.P(-100,-100),Je=new l.P(this.screenRightBoundary,this.screenBottomBoundary),bt=new $t,Ut=Me.first,nt=Me.last;let ut=[];for(let Ht=Ut.path.length-1;Ht>=1;Ht--)ut.push(Ut.path[Ht]);for(let Ht=1;Ht<nt.path.length;Ht++)ut.push(nt.path[Ht]);const Ft=2.5*pt;if(z){const Ht=this.projectPathToScreenSpace(ut,Ee,z);ut=Ht.some(nn=>nn.signedDistanceFromCamera<=0)?[]:Ht.map(nn=>nn.point)}let Yn=[];if(ut.length>0){const Ht=ut[0].clone(),nn=ut[0].clone();for(let Jn=1;Jn<ut.length;Jn++)Ht.x=Math.min(Ht.x,ut[Jn].x),Ht.y=Math.min(Ht.y,ut[Jn].y),nn.x=Math.max(nn.x,ut[Jn].x),nn.y=Math.max(nn.y,ut[Jn].y);Yn=Ht.x>=Qe.x&&nn.x<=Je.x&&Ht.y>=Qe.y&&nn.y<=Je.y?[ut]:nn.x<Qe.x||Ht.x>Je.x||nn.y<Qe.y||Ht.y>Je.y?[]:l.al([ut],Qe.x,Qe.y,Je.x,Je.y)}for(const Ht of Yn){bt.reset(Ht,.25*pt);let nn=0;nn=bt.length<=.5*pt?1:Math.ceil(bt.paddedLength/Ft)+1;for(let Jn=0;Jn<nn;Jn++){const ci=Jn/Math.max(nn-1,1),Uo=bt.lerp(ci),Qn=Uo.x+Bt,Oi=Uo.y+Bt;ye.push(Qn,Oi,pt,0);const Ci=Qn-pt,di=Oi-pt,ki=Qn+pt,fa=Oi+pt;if(it=it&&this.isOffscreen(Ci,di,ki,fa),Ze=Ze||this.isInsideGrid(Ci,di,ki,fa),i!=="always"&&this.grid.hitTestCircle(Qn,Oi,pt,i,X)&&(je=!0,!N))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!N&&je||!Ze||ue<this.perspectiveRatioCutoff?[]:ye,offscreen:it,collisionDetected:je}}projectPathToScreenSpace(i,d,f){return i.map(m=>fe(m.x,m.y,f,d.getElevation))}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let f=1/0,m=1/0,y=-1/0,C=-1/0;for(const N of i){const j=new l.P(N.x+Bt,N.y+Bt);f=Math.min(f,j.x),m=Math.min(m,j.y),y=Math.max(y,j.x),C=Math.max(C,j.y),d.push(j)}const T=this.grid.query(f,m,y,C).concat(this.ignoredGrid.query(f,m,y,C)),M={},z={};for(const N of T){const j=N.key;if(M[j.bucketInstanceId]===void 0&&(M[j.bucketInstanceId]={}),M[j.bucketInstanceId][j.featureIndex])continue;const X=[new l.P(N.x1,N.y1),new l.P(N.x2,N.y1),new l.P(N.x2,N.y2),new l.P(N.x1,N.y2)];l.am(d,X)&&(M[j.bucketInstanceId][j.featureIndex]=!0,z[j.bucketInstanceId]===void 0&&(z[j.bucketInstanceId]=[]),z[j.bucketInstanceId].push(j.featureIndex))}return z}insertCollisionBox(i,d,f,m,y,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:d},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,d,f,m,y,C){const T=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:d};for(let z=0;z<i.length;z+=4)T.insertCircle(M,i[z],i[z+1],i[z+2])}projectAndGetPerspectiveRatio(i,d,f,m,y){let C;y?(C=[d,f,y(d,f),1],l.af(C,C,i)):(C=[d,f,0,1],en(C,C,i));const T=C[3];return{point:new l.P((C[0]/T+1)/2*this.transform.width+Bt,(-C[1]/T+1)/2*this.transform.height+Bt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}getPerspectiveRatio(i,d,f,m,y){const C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,f,m,y):fe(d,f,i,y);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(i,d,f,m){return f<Bt||i>=this.screenRightBoundary||m<Bt||d>this.screenBottomBoundary}isInsideGrid(i,d,f,m){return f>=0&&i<this.gridRightBoundary&&m>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const i=l.an([]);return l.J(i,i,[-100,-100,0]),i}_projectCollisionBox(i,d,f,m,y,C,T,M,z,N){let j=new l.P(1,0),X=new l.P(0,1);const ee=new l.P(i.anchorPointX+T[0],i.anchorPointY+T[1]);if(C&&!y){const it=this.projectAndGetPerspectiveRatio(f,ee.x+1,ee.y,m,z).point.sub(M.point).unit(),pt=Math.atan(it.y/it.x)+(it.x<0?Math.PI:0),Qe=Math.sin(pt),Je=Math.cos(pt);j=new l.P(Je,Qe),X=new l.P(-Qe,Je)}else if(!C&&y){const it=-this.transform.angle,pt=Math.sin(it),Qe=Math.cos(it);j=new l.P(Qe,pt),X=new l.P(-pt,Qe)}let ie=M.point,he=d;if(y){ie=ee;const it=this.transform.zoom-Math.floor(this.transform.zoom);he=Math.pow(2,-it),he*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,m),N||(he*=l.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}N&&(ie=ie.add(j.mult(N.x*he)).add(X.mult(N.y*he)));const ge=i.x1*he,ye=i.x2*he,ve=(ge+ye)/2,ue=i.y1*he,be=i.y2*he,Ee=(ue+be)/2,Me=[{offsetX:ge,offsetY:ue},{offsetX:ve,offsetY:ue},{offsetX:ye,offsetY:ue},{offsetX:ye,offsetY:Ee},{offsetX:ye,offsetY:be},{offsetX:ve,offsetY:be},{offsetX:ge,offsetY:be},{offsetX:ge,offsetY:Ee}];let je=[];for(const{offsetX:it,offsetY:pt}of Me)je.push(new l.P(ie.x+j.x*it+X.x*pt,ie.y+j.y*it+X.y*pt));let Ze=!1;if(y){const it=je.map(pt=>this.projectAndGetPerspectiveRatio(f,pt.x,pt.y,m,z));Ze=it.some(pt=>!pt.isOccluded),je=it.map(pt=>pt.point)}else Ze=!0;return{box:l.ao(je),allPointsOccluded:!Ze}}}function tn(v,i,d){return i*(l.X/(v.tileSize*Math.pow(2,d-v.tileID.overscaledZ)))}class Dr{constructor(i,d,f,m){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?d:-d))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class dr{constructor(i,d,f,m,y){this.text=new Dr(i?i.text:null,d,f,y),this.icon=new Dr(i?i.icon:null,d,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gt{constructor(i,d,f){this.text=i,this.icon=d,this.skipFade=f}}class Ln{constructor(){this.invProjMatrix=l.H(),this.viewportMatrix=l.H(),this.circles=[]}}class or{constructor(i,d,f,m,y){this.bucketInstanceId=i,this.featureIndex=d,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=y}}class Zr{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const d=++this.maxGroupID;this.collisionGroups[i]={ID:d,predicate:f=>f.collisionGroupID===d}}return this.collisionGroups[i]}}function ti(v,i,d,f,m){const{horizontalAlign:y,verticalAlign:C}=l.au(v);return new l.P(-(y-.5)*i+f[0]*m,-(C-.5)*d+f[1]*m)}class Si{constructor(i,d,f,m,y,C){this.transform=i.clone(),this.terrain=f,this.collisionIndex=new vn(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Zr(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(i){const d=this.terrain;return d?(f,m)=>d.getElevation(i,f,m):null}getBucketParts(i,d,f,m){const y=f.getBucket(d),C=f.latestFeatureIndex;if(!y||!C||d.id!==y.layerIds[0])return;const T=f.collisionBoxArray,M=y.layers[0].layout,z=y.layers[0].paint,N=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),j=f.tileSize/l.X,X=f.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(X),ie=M.get("text-pitch-alignment")==="map",he=M.get("text-rotation-alignment")==="map",ge=tn(f,1,this.transform.zoom),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),ve=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),ue=ca(ee,ie,he,this.transform,ge);let be=null;if(ie){const Me=_o(ee,ie,he,this.transform,ge);be=l.L([],this.transform.labelPlaneMatrix,Me)}this.retainedQueryData[y.bucketInstanceId]=new or(y.bucketInstanceId,C,y.sourceLayerIndex,y.index,f.tileID);const Ee={bucket:y,layout:M,translationText:ye,translationIcon:ve,posMatrix:ee,unwrappedTileID:X,textLabelPlaneMatrix:ue,labelToScreenMatrix:be,scale:N,textPixelRatio:j,holdingForFade:f.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:l.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const Me of y.sortKeyRanges){const{sortKey:je,symbolInstanceStart:Ze,symbolInstanceEnd:it}=Me;i.push({sortKey:je,symbolInstanceStart:Ze,symbolInstanceEnd:it,parameters:Ee})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(i,d,f,m,y,C,T,M,z,N,j,X,ee,ie,he,ge,ye,ve,ue){const be=l.aq[i.textAnchor],Ee=[i.textOffset0,i.textOffset1],Me=ti(be,f,m,Ee,y),je=this.collisionIndex.placeCollisionBox(d,X,M,z,N,T,C,ge,j.predicate,ue,Me);if((!ve||this.collisionIndex.placeCollisionBox(ve,X,M,z,N,T,C,ye,j.predicate,ue,Me).placeable)&&je.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Ee,width:f,height:m,anchor:be,textBoxScale:y,prevAnchor:Ze},this.markUsedJustification(ie,be,ee,he),ie.allowVerticalPlacement&&(this.markUsedOrientation(ie,he,ee),this.placedOrientations[ee.crossTileID]=he),{shift:Me,placedGlyphBoxes:je}}}placeLayerBucketPart(i,d,f){const{bucket:m,layout:y,translationText:C,translationIcon:T,posMatrix:M,unwrappedTileID:z,textLabelPlaneMatrix:N,labelToScreenMatrix:j,textPixelRatio:X,holdingForFade:ee,collisionBoxArray:ie,partiallyEvaluatedTextSize:he,collisionGroup:ge}=i.parameters,ye=y.get("text-optional"),ve=y.get("icon-optional"),ue=l.ar(y,"text-overlap","text-allow-overlap"),be=ue==="always",Ee=l.ar(y,"icon-overlap","icon-allow-overlap"),Me=Ee==="always",je=y.get("text-rotation-alignment")==="map",Ze=y.get("text-pitch-alignment")==="map",it=y.get("icon-text-fit")!=="none",pt=y.get("symbol-z-order")==="viewport-y",Qe=be&&(Me||!m.hasIconData()||ve),Je=Me&&(be||!m.hasTextData()||ye);!m.collisionArrays&&ie&&m.deserializeCollisionBoxes(ie);const bt=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Ut=(nt,ut,Ft)=>{var Yn,Ht;if(d[nt.crossTileID])return;if(ee)return void(this.placements[nt.crossTileID]=new Gt(!1,!1,!1));let nn=!1,Jn=!1,ci=!0,Uo=null,Qn={box:null,placeable:!1,offscreen:null},Oi={box:null,placeable:!1,offscreen:null},Ci=null,di=null,ki=null,fa=0,$l=0,vd=0;ut.textFeatureIndex?fa=ut.textFeatureIndex:nt.useRuntimeCollisionCircles&&(fa=nt.featureIndex),ut.verticalTextFeatureIndex&&($l=ut.verticalTextFeatureIndex);const Ol=ut.textBox;if(Ol){const ko=ni=>{let hi=l.ah.horizontal;if(m.allowVerticalPlacement&&!ni&&this.prevPlacement){const ro=this.prevPlacement.placedOrientations[nt.crossTileID];ro&&(this.placedOrientations[nt.crossTileID]=ro,hi=ro,this.markUsedOrientation(m,hi,nt))}return hi},Eo=(ni,hi)=>{if(m.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&ut.verticalTextBox){for(const ro of m.writingModes)if(ro===l.ah.vertical?(Qn=hi(),Oi=Qn):Qn=ni(),Qn&&Qn.placeable)break}else Qn=ni()},ns=nt.textAnchorOffsetStartIndex,Vo=nt.textAnchorOffsetEndIndex;if(Vo===ns){const ni=(hi,ro)=>{const ln=this.collisionIndex.placeCollisionBox(hi,ue,X,M,z,Ze,je,C,ge.predicate,bt);return ln&&ln.placeable&&(this.markUsedOrientation(m,ro,nt),this.placedOrientations[nt.crossTileID]=ro),ln};Eo(()=>ni(Ol,l.ah.horizontal),()=>{const hi=ut.verticalTextBox;return m.allowVerticalPlacement&&nt.numVerticalGlyphVertices>0&&hi?ni(hi,l.ah.vertical):{box:null,offscreen:null}}),ko(Qn&&Qn.placeable)}else{let ni=l.aq[(Ht=(Yn=this.prevPlacement)===null||Yn===void 0?void 0:Yn.variableOffsets[nt.crossTileID])===null||Ht===void 0?void 0:Ht.anchor];const hi=(ln,js,Bl)=>{const Fl=ln.x2-ln.x1,Bg=ln.y2-ln.y1,l_=nt.textBoxScale,Fg=it&&Ee==="never"?js:null;let rs=null,Ng=ue==="never"?1:2,xd="never";ni&&Ng++;for(let Gu=0;Gu<Ng;Gu++){for(let bd=ns;bd<Vo;bd++){const wd=m.textAnchorOffsets.get(bd);if(ni&&wd.textAnchor!==ni)continue;const Nl=this.attemptAnchorPlacement(wd,ln,Fl,Bg,l_,je,Ze,X,M,z,ge,xd,nt,m,Bl,C,T,Fg,bt);if(Nl&&(rs=Nl.placedGlyphBoxes,rs&&rs.placeable))return nn=!0,Uo=Nl.shift,rs}ni?ni=null:xd=ue}return f&&!rs&&(rs={box:this.collisionIndex.placeCollisionBox(Ol,"always",X,M,z,Ze,je,C,ge.predicate,bt,new l.P(0,0)).box,offscreen:!1,placeable:!1}),rs};Eo(()=>hi(Ol,ut.iconBox,l.ah.horizontal),()=>{const ln=ut.verticalTextBox;return m.allowVerticalPlacement&&(!Qn||!Qn.placeable)&&nt.numVerticalGlyphVertices>0&&ln?hi(ln,ut.verticalIconBox,l.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Qn&&(nn=Qn.placeable,ci=Qn.offscreen);const ro=ko(Qn&&Qn.placeable);if(!nn&&this.prevPlacement){const ln=this.prevPlacement.variableOffsets[nt.crossTileID];ln&&(this.variableOffsets[nt.crossTileID]=ln,this.markUsedJustification(m,ln.anchor,nt,ro))}}}if(Ci=Qn,nn=Ci&&Ci.placeable,ci=Ci&&Ci.offscreen,nt.useRuntimeCollisionCircles){const ko=m.text.placedSymbolArray.get(nt.centerJustifiedTextSymbolIndex),Eo=l.ai(m.textSizeData,he,ko),ns=y.get("text-padding");di=this.collisionIndex.placeCollisionCircles(ue,ko,m.lineVertexArray,m.glyphOffsetArray,Eo,M,z,N,j,f,Ze,ge.predicate,nt.collisionCircleDiameter,ns,C,bt),di.circles.length&&di.collisionDetected&&!f&&l.w("Collisions detected, but collision boxes are not shown"),nn=be||di.circles.length>0&&!di.collisionDetected,ci=ci&&di.offscreen}if(ut.iconFeatureIndex&&(vd=ut.iconFeatureIndex),ut.iconBox){const ko=Eo=>this.collisionIndex.placeCollisionBox(Eo,Ee,X,M,z,Ze,je,T,ge.predicate,bt,it&&Uo?Uo:void 0);Oi&&Oi.placeable&&ut.verticalIconBox?(ki=ko(ut.verticalIconBox),Jn=ki.placeable):(ki=ko(ut.iconBox),Jn=ki.placeable),ci=ci&&ki.offscreen}const Co=ye||nt.numHorizontalGlyphVertices===0&&nt.numVerticalGlyphVertices===0,_d=ve||nt.numIconVertices===0;Co||_d?_d?Co||(Jn=Jn&&nn):nn=Jn&&nn:Jn=nn=Jn&&nn;const Up=Jn&&ki.placeable;if(nn&&Ci.placeable&&this.collisionIndex.insertCollisionBox(Ci.box,ue,y.get("text-ignore-placement"),m.bucketInstanceId,Oi&&Oi.placeable&&$l?$l:fa,ge.ID),Up&&this.collisionIndex.insertCollisionBox(ki.box,Ee,y.get("icon-ignore-placement"),m.bucketInstanceId,vd,ge.ID),di&&nn&&this.collisionIndex.insertCollisionCircles(di.circles,ue,y.get("text-ignore-placement"),m.bucketInstanceId,fa,ge.ID),f&&this.storeCollisionData(m.bucketInstanceId,Ft,ut,Ci,ki,di),nt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[nt.crossTileID]=new Gt(nn||Qe,Jn||Je,ci||m.justReloaded),d[nt.crossTileID]=!0};if(pt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const nt=m.getSortedSymbolIndexes(this.transform.angle);for(let ut=nt.length-1;ut>=0;--ut){const Ft=nt[ut];Ut(m.symbolInstances.get(Ft),m.collisionArrays[Ft],Ft)}}else for(let nt=i.symbolInstanceStart;nt<i.symbolInstanceEnd;nt++)Ut(m.symbolInstances.get(nt),m.collisionArrays[nt],nt);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const nt=this.collisionCircleArrays[m.bucketInstanceId];l.as(nt.invProjMatrix,M),nt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(i,d,f,m,y,C){if(f.textBox||f.iconBox){let T,M;this.collisionBoxArrays.has(i)?T=this.collisionBoxArrays.get(i):(T=new Map,this.collisionBoxArrays.set(i,T)),T.has(d)?M=T.get(d):(M={text:null,icon:null},T.set(d,M)),f.textBox&&(M.text=m.box),f.iconBox&&(M.icon=y.box)}if(C){let T=this.collisionCircleArrays[i];T===void 0&&(T=this.collisionCircleArrays[i]=new Ln);for(let M=0;M<C.circles.length;M+=4)T.circles.push(C.circles[M+0]),T.circles.push(C.circles[M+1]),T.circles.push(C.circles[M+2]),T.circles.push(C.collisionDetected?1:0)}}markUsedJustification(i,d,f,m){let y;y=m===l.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.at(d)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(i.text.placedSymbolArray.get(T).crossTileID=y>=0&&T!==y?0:f.crossTileID)}markUsedOrientation(i,d,f){const m=d===l.ah.horizontal||d===l.ah.horizontalOnly?d:0,y=d===l.ah.vertical?d:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const T of C)i.text.placedSymbolArray.get(T).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let f=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const m=d?d.symbolFadeChange(i):1,y=d?d.opacities:{},C=d?d.variableOffsets:{},T=d?d.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],N=y[M];N?(this.opacities[M]=new dr(N,m,z.text,z.icon),f=f||z.text!==N.text.placed||z.icon!==N.icon.placed):(this.opacities[M]=new dr(null,m,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const M in y){const z=y[M];if(!this.opacities[M]){const N=new dr(z,m,!1,!1);N.isHidden()||(this.opacities[M]=N,f=f||z.text.placed||z.icon.placed)}}for(const M in C)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=C[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:i)}updateLayerOpacities(i,d){const f={};for(const m of d){const y=m.getBucket(i);y&&m.latestFeatureIndex&&i.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,f,m.collisionBoxArray)}}updateBucketOpacities(i,d,f,m){i.hasTextData()&&(i.text.opacityVertexArray.clear(),i.text.hasVisibleVertices=!1),i.hasIconData()&&(i.icon.opacityVertexArray.clear(),i.icon.hasVisibleVertices=!1),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0],C=y.layout,T=new dr(null,0,!1,!1,!0),M=C.get("text-allow-overlap"),z=C.get("icon-allow-overlap"),N=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),j=C.get("text-rotation-alignment")==="map",X=C.get("text-pitch-alignment")==="map",ee=C.get("icon-text-fit")!=="none",ie=new dr(null,0,M&&(z||!i.hasIconData()||C.get("icon-optional")),z&&(M||!i.hasTextData()||C.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const he=(ye,ve,ue)=>{for(let be=0;be<ve/4;be++)ye.opacityVertexArray.emplaceBack(ue);ye.hasVisibleVertices=ye.hasVisibleVertices||ue!==ml},ge=this.collisionBoxArrays.get(i.bucketInstanceId);for(let ye=0;ye<i.symbolInstances.length;ye++){const ve=i.symbolInstances.get(ye),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:be,crossTileID:Ee}=ve;let Me=this.opacities[Ee];f[Ee]?Me=T:Me||(Me=ie,this.opacities[Ee]=Me),f[Ee]=!0;const je=ve.numIconVertices>0,Ze=this.placedOrientations[ve.crossTileID],it=Ze===l.ah.vertical,pt=Ze===l.ah.horizontal||Ze===l.ah.horizontalOnly;if(ue>0||be>0){const Je=eo(Me.text);he(i.text,ue,it?ml:Je),he(i.text,be,pt?ml:Je);const bt=Me.text.isHidden();[ve.rightJustifiedTextSymbolIndex,ve.centerJustifiedTextSymbolIndex,ve.leftJustifiedTextSymbolIndex].forEach(ut=>{ut>=0&&(i.text.placedSymbolArray.get(ut).hidden=bt||it?1:0)}),ve.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(ve.verticalPlacedTextSymbolIndex).hidden=bt||pt?1:0);const Ut=this.variableOffsets[ve.crossTileID];Ut&&this.markUsedJustification(i,Ut.anchor,ve,Ze);const nt=this.placedOrientations[ve.crossTileID];nt&&(this.markUsedJustification(i,"left",ve,nt),this.markUsedOrientation(i,nt,ve))}if(je){const Je=eo(Me.icon),bt=!(ee&&ve.verticalPlacedIconSymbolIndex&&it);ve.placedIconSymbolIndex>=0&&(he(i.icon,ve.numIconVertices,bt?Je:ml),i.icon.placedSymbolArray.get(ve.placedIconSymbolIndex).hidden=Me.icon.isHidden()),ve.verticalPlacedIconSymbolIndex>=0&&(he(i.icon,ve.numVerticalIconVertices,bt?ml:Je),i.icon.placedSymbolArray.get(ve.verticalPlacedIconSymbolIndex).hidden=Me.icon.isHidden())}const Qe=ge&&ge.has(ye)?ge.get(ye):{text:null,icon:null};if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Je=i.collisionArrays[ye];if(Je){let bt=new l.P(0,0);if(Je.textBox||Je.verticalTextBox){let Ut=!0;if(N){const nt=this.variableOffsets[Ee];nt?(bt=ti(nt.anchor,nt.width,nt.height,nt.textOffset,nt.textBoxScale),j&&bt._rotate(X?this.transform.angle:-this.transform.angle)):Ut=!1}if(Je.textBox||Je.verticalTextBox){let nt;Je.textBox&&(nt=it),Je.verticalTextBox&&(nt=pt),fl(i.textCollisionBox.collisionVertexArray,Me.text.placed,!Ut||nt,Qe.text,bt.x,bt.y)}}if(Je.iconBox||Je.verticalIconBox){const Ut=!!(!pt&&Je.verticalIconBox);let nt;Je.iconBox&&(nt=Ut),Je.verticalIconBox&&(nt=!Ut),fl(i.iconCollisionBox.collisionVertexArray,Me.icon.placed,nt,Qe.icon,ee?bt.x:0,ee?bt.y:0)}}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const ye=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=ye.invProjMatrix,i.placementViewportMatrix=ye.viewportMatrix,i.collisionCircleArray=ye.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,d){const f=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function fl(v,i,d,f,m,y){f&&f.length!==0||(f=[0,0,0,0]);const C=f[0]-Bt,T=f[1]-Bt,M=f[2]-Bt,z=f[3]-Bt;v.emplaceBack(i?1:0,d?1:0,m||0,y||0,C,T),v.emplaceBack(i?1:0,d?1:0,m||0,y||0,M,T),v.emplaceBack(i?1:0,d?1:0,m||0,y||0,M,z),v.emplaceBack(i?1:0,d?1:0,m||0,y||0,C,z)}const Rn=Math.pow(2,25),Qh=Math.pow(2,24),ep=Math.pow(2,17),Ji=Math.pow(2,16),Qi=Math.pow(2,9),$1=Math.pow(2,8),xo=Math.pow(2,1);function eo(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const i=v.placed?1:0,d=Math.floor(127*v.opacity);return d*Rn+i*Qh+d*ep+i*Ji+d*Qi+i*$1+d*xo+i}const ml=0;function Ps(){return{isOccluded:(v,i,d)=>!1,getPitchedTextCorrection:(v,i,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,i,d,f){throw new Error("Not implemented.")},translatePosition:(v,i,d,f)=>function(m,y,C,T,M=!1){if(!C[0]&&!C[1])return[0,0];const z=M?T==="map"?m.angle:0:T==="viewport"?-m.angle:0;if(z){const N=Math.sin(z),j=Math.cos(z);C=[C[0]*j-C[1]*N,C[0]*N+C[1]*j]}return[M?C[0]:tn(y,C[0],m.zoom),M?C[1]:tn(y,C[1],m.zoom)]}(v,i,d,f),getCircleRadiusCorrection:v=>1}}class $r{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,d,f,m,y){const C=this._bucketParts;for(;this._currentTileIndex<i.length;)if(d.getBucketParts(C,m,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<C.length;)if(d.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,y())return!0;return!1}}class Pu{constructor(i,d,f,m,y,C,T,M){this.placement=new Si(i,Ps(),d,C,T,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(i,d,f){const m=k.now(),y=()=>!this._forceFullPlacement&&k.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=d[i[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new $r(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const Oo=512/l.X/2;class Tr{constructor(i,d,f){this.tileID=i,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let y=0;y<d.length;y++){const C=d.get(y),T=C.key,M=m.get(T);M?M.push(C):m.set(T,[C])}for(const[y,C]of m){const T={positions:C.map(M=>({x:Math.floor(M.anchorX*Oo),y:Math.floor(M.anchorY*Oo)})),crossTileIDs:C.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new l.av(T.positions.length,16,Uint16Array);for(const{x:z,y:N}of T.positions)M.add(z,N);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[y]=T}}getScaledCoordinates(i,d){const{x:f,y:m,z:y}=this.tileID.canonical,{x:C,y:T,z:M}=d.canonical,z=Oo/Math.pow(2,M-y),N=(T*l.X+i.anchorY)*z,j=m*l.X*Oo;return{x:Math.floor((C*l.X+i.anchorX)*z-f*l.X*Oo),y:Math.floor(N-j)}}findMatches(i,d,f){const m=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let y=0;y<i.length;y++){const C=i.get(y);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const M=this.getScaledCoordinates(C,d);if(T.index){const z=T.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const N of z){const j=T.crossTileIDs[N];if(!f[j]){f[j]=!0,C.crossTileID=j;break}}}else if(T.positions)for(let z=0;z<T.positions.length;z++){const N=T.positions[z],j=T.crossTileIDs[z];if(Math.abs(N.x-M.x)<=m&&Math.abs(N.y-M.y)<=m&&!f[j]){f[j]=!0,C.crossTileID=j;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:i})=>i)}}class jc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const d=Math.round((i-this.lng)/360);if(d!==0)for(const f in this.indexes){const m=this.indexes[f],y={};for(const C in m){const T=m[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+d),y[T.tileID.key]=T}this.indexes[f]=y}this.lng=i}addBucket(i,d,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let y=0;y<d.symbolInstances.length;y++)d.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const m=this.usedCrossTileIDs[i.overscaledZ];for(const y in this.indexes){const C=this.indexes[y];if(Number(y)>i.overscaledZ)for(const T in C){const M=C[T];M.tileID.isChildOf(i)&&M.findMatches(d.symbolInstances,i,m)}else{const T=C[i.scaledTo(Number(y)).key];T&&T.findMatches(d.symbolInstances,i,m)}}for(let y=0;y<d.symbolInstances.length;y++){const C=d.symbolInstances.get(y);C.crossTileID||(C.crossTileID=f.generate(),m[C.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Tr(i,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(i,d){for(const f of d.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[i][m]}removeStaleBuckets(i){let d=!1;for(const f in this.indexes){const m=this.indexes[f];for(const y in m)i[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[y]),delete m[y],d=!0)}return d}}class tp{constructor(){this.layerIndexes={},this.crossTileIDs=new jc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,d,f){let m=this.layerIndexes[i.id];m===void 0&&(m=this.layerIndexes[i.id]=new Bo);let y=!1;const C={};m.handleWrapJump(f);for(const T of d){const M=T.getBucket(i);M&&i.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(T.tileID,M,this.crossTileIDs)&&(y=!0),C[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(y=!0),y}pruneUnusedLayers(i){const d={};i.forEach(f=>{d[f]=!0});for(const f in this.layerIndexes)d[f]||delete this.layerIndexes[f]}}const Fo=(v,i)=>l.t(v,i&&i.filter(d=>d.identifier!=="source.canvas")),O1=l.aw();class Uc extends l.E{constructor(i,d={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=i,this.dispatcher=new Vt(Mn(),i._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("GI",(f,m)=>this.getImages(f,m)),this.imageManager=new De,this.imageManager.setEventedParent(this),this.glyphManager=new et(i._requestManager,d.localIdeographFontFamily),this.lineAtlas=new jt(256,512),this.crossTileSymbolIndex=new tp,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",l.ay()),dn().on(Ge,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const C in this._layers){const T=this._layers[C];T.source===y.id&&this._validateLayer(T)}})}loadURL(i,d={},f){this.fire(new l.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;const m=this.map._requestManager.transformRequest(i,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;l.h(m,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,d,f)}).catch(C=>{this._loadStyleRequest=null,C&&!y.signal.aborted&&this.fire(new l.j(C))})}loadJSON(i,d={},f){this.fire(new l.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(i,d,f)}).catch(()=>{})}loadEmpty(){this.fire(new l.k("dataloading",{dataType:"style"})),this._load(O1,{validate:!1})}_load(i,d,f){var m;const y=d.transformStyle?d.transformStyle(f,i):i;if(!d.validate||!Fo(this,l.u(y))){this._loaded=!0,this.stylesheet=y;for(const C in y.sources)this.addSource(C,y.sources[C],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new ct(this.stylesheet.light),this.sky=new At(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new l.k("data",{dataType:"style"})),this.fire(new l.k("style.load"))}}_createLayers(){const i=l.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",i),this._order=i.map(d=>d.id),this._layers={},this._serializedLayers=null;for(const d of i){const f=l.aA(d);f.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=f}}_loadSprite(i,d=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,C,T,M){return l._(this,void 0,void 0,function*(){const z=Ie(y),N=T>1?"@2x":"",j={},X={};for(const{id:ee,url:ie}of z){const he=C.transformRequest(K(ie,N,".json"),"SpriteJSON");j[ee]=l.h(he,M);const ge=C.transformRequest(K(ie,N,".png"),"SpriteImage");X[ee]=F.getImage(ge,M)}return yield Promise.all([...Object.values(j),...Object.values(X)]),function(ee,ie){return l._(this,void 0,void 0,function*(){const he={};for(const ge in ee){he[ge]={};const ye=k.getImageCanvasContext((yield ie[ge]).data),ve=(yield ee[ge]).data;for(const ue in ve){const{width:be,height:Ee,x:Me,y:je,sdf:Ze,pixelRatio:it,stretchX:pt,stretchY:Qe,content:Je,textFitWidth:bt,textFitHeight:Ut}=ve[ue];he[ge][ue]={data:null,pixelRatio:it,sdf:Ze,stretchX:pt,stretchY:Qe,content:Je,textFitWidth:bt,textFitHeight:Ut,spriteData:{width:be,height:Ee,x:Me,y:je,context:ye}}}}return he})}(j,X)})}(i,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const C in y){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(M=>!(M in y)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[C]){const z=C==="default"?M:`${C}:${M}`;this._spritesImagesIds[C].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,y[C][M],!1):this.imageManager.addImage(z,y[C][M]),d&&(this._changedImages[z]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new l.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const i of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(i),this._changedImages[i]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}_validateLayer(i){const d=this.sourceCaches[i.source];if(!d)return;const f=i.sourceLayer;if(!f)return;const m=d.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(i,d=!1){const f=this._serializedAllLayers();if(!i||i.length===0)return Object.values(d?l.aB(f):f);const m=[];for(const y of i)if(f[y]){const C=d?l.aB(f[y]):f[y];m.push(C)}return m}_serializedAllLayers(){let i=this._serializedLayers;if(i)return i;i=this._serializedLayers={};const d=Object.keys(this._layers);for(const f of d){const m=this._layers[f];m.type!=="custom"&&(i[f]=m.serialize())}return i}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const d=this._changed;if(d){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const C in this._updatedSources){const T=this._updatedSources[C];if(T==="reload")this._reloadSource(C);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(i);this.light.updateTransitions(i),this.sky.updateTransitions(i),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];f[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(i,this._availableImages),!y.isHidden(i.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in f){const y=this.sourceCaches[m];!!f[m]!=!!y.used&&y.fire(new l.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(i),this.sky.recalculate(i),this.z=i.zoom,d&&this.fire(new l.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const i in this.sourceCaches)this.sourceCaches[i].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(i,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(i,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(i,d={}){var f;this._checkLoaded();const m=this.serialize();if(i=d.transformStyle?d.transformStyle(m,i):i,((f=d.validate)===null||f===void 0||f)&&Fo(this,l.u(i)))return!1;(i=l.aB(i)).layers=l.az(i.layers);const y=l.aC(m,i),C=this._getOperationsToPerform(y);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const T of C.operations)T();return this.stylesheet=i,this._serializedLayers=null,!0}_getOperationsToPerform(i){const d=[],f=[];for(const m of i)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":d.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":d.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":d.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":d.push(()=>{});break;default:f.push(m.command)}return{operations:d,unimplemented:f}}addImage(i,d){if(this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,d),this._afterImageUpdated(i)}updateImage(i,d){this.imageManager.updateImage(i,d)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.j(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,d,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(l.u.source,`sources.${i}`,d,null,f))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const m=this.sourceCaches[i]=new at(i,d,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:i})),m.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new l.j(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const d=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],d.fire(new l.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,d){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(d),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,d,f={}){this._checkLoaded();const m=i.id;if(this.getLayer(m))return void this.fire(new l.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(i.type==="custom"){if(Fo(this,l.aD(i)))return;y=l.aA(i)}else{if("source"in i&&typeof i.source=="object"&&(this.addSource(m,i.source),i=l.aB(i),i=l.e(i,{source:m})),this._validate(l.u.layer,`layers.${m}`,i,{arrayIndex:-1},f))return;y=l.aA(i),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const C=d?this._order.indexOf(d):this._order.length;if(d&&C===-1)this.fire(new l.j(new Error(`Cannot add layer "${m}" before non-existing layer "${d}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const T=this._removedLayers[m];delete this._removedLayers[m],T.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(i,d){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.j(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===d)return;const f=this._order.indexOf(i);this._order.splice(f,1);const m=d?this._order.indexOf(d):this._order.length;d&&m===-1?this.fire(new l.j(new Error(`Cannot move layer "${i}" before non-existing layer "${d}".`))):(this._order.splice(m,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const d=this._layers[i];if(!d)return void this.fire(new l.j(new Error(`Cannot remove non-existing layer "${i}".`)));d.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=d,delete this._layers[i],this._serializedLayers&&delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],d.onRemove&&d.onRemove(this.map)}getLayer(i){return this._layers[i]}getLayersOrder(){return[...this._order]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,d,f){this._checkLoaded();const m=this.getLayer(i);m?m.minzoom===d&&m.maxzoom===f||(d!=null&&(m.minzoom=d),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new l.j(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,d,f={}){this._checkLoaded();const m=this.getLayer(i);if(m){if(!l.aE(m.filter,d))return d==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(l.u.filter,`layers.${m.id}.filter`,d,null,f)||(m.filter=l.aB(d),this._updateLayer(m)))}else this.fire(new l.j(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.aB(this.getLayer(i).filter)}setLayoutProperty(i,d,f,m={}){this._checkLoaded();const y=this.getLayer(i);y?l.aE(y.getLayoutProperty(d),f)||(y.setLayoutProperty(d,f,m),this._updateLayer(y)):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,d){const f=this.getLayer(i);if(f)return f.getLayoutProperty(d);this.fire(new l.j(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,d,f,m={}){this._checkLoaded();const y=this.getLayer(i);y?l.aE(y.getPaintProperty(d),f)||(y.setPaintProperty(d,f,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[i]=!0,this._serializedLayers=null):this.fire(new l.j(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,d){return this.getLayer(i).getPaintProperty(d)}setFeatureState(i,d){this._checkLoaded();const f=i.source,m=i.sourceLayer,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=y.getSource().type;C==="geojson"&&m?this.fire(new l.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,i.id,d)):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,d){this._checkLoaded();const f=i.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new l.j(new Error(`The source '${f}' does not exist in the map's style.`)));const y=m.getSource().type,C=y==="vector"?i.sourceLayer:void 0;y!=="vector"||C?d&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,i.id,d):this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const d=i.source,f=i.sourceLayer,m=this.sourceCaches[d];if(m!==void 0)return m.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new l.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,i.id)):void this.fire(new l.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return l.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const i=l.aF(this.sourceCaches,y=>y.serialize()),d=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,m=this.stylesheet;return l.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:i,layers:d,terrain:f},y=>y!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(i){const d=C=>this._layers[C].type==="fill-extrusion",f={},m=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(d(T)){f[T]=C;for(const M of i){const z=M[T];if(z)for(const N of z)m.push(N)}}}m.sort((C,T)=>T.intersectionZ-C.intersectionZ);const y=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(d(T))for(let M=m.length-1;M>=0;M--){const z=m[M].feature;if(f[z.layer.id]<C)break;y.push(z),m.pop()}else for(const M of i){const z=M[T];if(z)for(const N of z)y.push(N.feature)}}return y}queryRenderedFeatures(i,d,f){d&&d.filter&&this._validate(l.u.filter,"queryRenderedFeatures.filter",d.filter,null,d);const m={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new l.j(new Error("parameters.layers must be an Array."))),[];for(const T of d.layers){const M=this._layers[T];if(!M)return this.fire(new l.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const y=[];d.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)d.layers&&!m[T]||y.push(Cn(this.sourceCaches[T],this._layers,C,i,d,f));return this.placement&&y.push(function(T,M,z,N,j,X,ee){const ie={},he=X.queryRenderedSymbols(N),ge=[];for(const ye of Object.keys(he).map(Number))ge.push(ee[ye]);ge.sort(_t);for(const ye of ge){const ve=ye.featureIndex.lookupSymbolFeatures(he[ye.bucketInstanceId],M,ye.bucketIndex,ye.sourceLayerIndex,j.filter,j.layers,j.availableImages,T);for(const ue in ve){const be=ie[ue]=ie[ue]||[],Ee=ve[ue];Ee.sort((Me,je)=>{const Ze=ye.featureSortOrder;if(Ze){const it=Ze.indexOf(Me.featureIndex);return Ze.indexOf(je.featureIndex)-it}return je.featureIndex-Me.featureIndex});for(const Me of Ee)be.push(Me)}}for(const ye in ie)ie[ye].forEach(ve=>{const ue=ve.feature,be=z[T[ye].source].getFeatureState(ue.layer["source-layer"],ue.id);ue.source=ue.layer.source,ue.layer["source-layer"]&&(ue.sourceLayer=ue.layer["source-layer"]),ue.state=be});return ie}(this._layers,C,this.sourceCaches,i,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(i,d){d&&d.filter&&this._validate(l.u.filter,"querySourceFeatures.filter",d.filter,null,d);const f=this.sourceCaches[i];return f?function(m,y){const C=m.getRenderableIds().map(z=>m.getTileByID(z)),T=[],M={};for(let z=0;z<C.length;z++){const N=C[z],j=N.tileID.canonical.key;M[j]||(M[j]=!0,N.querySourceFeatures(T,y))}return T}(f,d):[]}getLight(){return this.light.getLight()}setLight(i,d={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const C in i)if(!l.aE(i[C],f[C])){m=!0;break}if(!m)return;const y={now:k.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,d),this.light.updateTransitions(y)}getSky(){var i;return(i=this.stylesheet)===null||i===void 0?void 0:i.sky}setSky(i,d={}){const f=this.getSky();let m=!1;if(!i&&!f)return;if(i&&!f)m=!0;else if(!i&&f)m=!0;else for(const C in i)if(!l.aE(i[C],f[C])){m=!0;break}if(!m)return;const y={now:k.now(),transition:l.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=i,this.sky.setSky(i,d),this.sky.updateTransitions(y)}_validate(i,d,f,m,y={}){return(!y||y.validate!==!1)&&Fo(this,i.call(l.u,l.e({key:d,style:this.serialize(),value:f,styleSpec:l.v},m)))}_remove(i=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),dn().off(Ge,this._rtlPluginLoaded);for(const d in this._layers)this._layers[d].setEventedParent(null);for(const d in this.sourceCaches){const f=this.sourceCaches[d];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),i&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(i)}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const d in this.sourceCaches)this.sourceCaches[d].update(i,this.map.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,d,f,m,y=!1){let C=!1,T=!1;const M={};for(const z of this._order){const N=this._layers[z];if(N.type!=="symbol")continue;if(!M[N.source]){const X=this.sourceCaches[N.source];M[N.source]=X.getRenderableIds(!0).map(ee=>X.getTileByID(ee)).sort((ee,ie)=>ie.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ie.tileID)?-1:1))}const j=this.crossTileSymbolIndex.addLayer(N,M[N.source],i.center.lng);C=C||j}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),i.zoom))&&(this.pauseablePlacement=new Pu(i,this.map.terrain,this._order,y,d,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const z of this._order){const N=this._layers[z];N.type==="symbol"&&this.placement.updateLayerOpacities(N,M[N.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,d){return l._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[d.source];return m&&m.setDependencies(d.tileID.key,d.type,d.icons),f})}getGlyphs(i,d){return l._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(d.stacks),m=this.sourceCaches[d.source];return m&&m.setDependencies(d.tileID.key,d.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(i,d={}){this._checkLoaded(),i&&this._validate(l.u.glyphs,"glyphs",i,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=i,this.glyphManager.entries={},this.glyphManager.setURL(i))}addSprite(i,d,f={},m){this._checkLoaded();const y=[{id:i,url:d}],C=[...Ie(this.stylesheet.sprite),...y];this._validate(l.u.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(y,!0,m))}removeSprite(i){this._checkLoaded();const d=Ie(this.stylesheet.sprite);if(d.find(f=>f.id===i)){if(this._spritesImagesIds[i])for(const f of this._spritesImagesIds[i])this.imageManager.removeImage(f),this._changedImages[f]=!0;d.splice(d.findIndex(f=>f.id===i),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[i],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new l.k("data",{dataType:"style"}))}else this.fire(new l.j(new Error(`Sprite "${i}" doesn't exists on this map.`)))}getSprite(){return Ie(this.stylesheet.sprite)}setSprite(i,d={},f){this._checkLoaded(),i&&this._validate(l.u.sprite,"sprite",i,null,d)||(this.stylesheet.sprite=i,i?this._loadSprite(i,!0,f):(this._unloadSprite(),f&&f(null)))}}var Ms=l.Y([{name:"a_pos",type:"Int16",components:2}]);const es={prelude:kn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:kn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:kn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:kn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:kn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:kn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:kn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:kn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:kn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:kn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:kn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:kn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:kn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:kn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:kn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:kn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:kn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:kn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:kn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:kn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:kn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:kn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:kn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:kn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:kn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:kn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:kn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function kn(v,i){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=y?y.concat(m):m,T={};return{fragmentSource:v=v.replace(d,(M,z,N,j,X)=>(T[X]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${N} ${j} ${X};
#else
uniform ${N} ${j} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${N} ${j} ${X} = u_${X};
#endif
`)),vertexSource:i=i.replace(d,(M,z,N,j,X)=>{const ee=j==="float"?"vec2":"vec4",ie=X.match(/color/)?"color":ee;return T[X]?z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${N} ${ee} a_${X};
varying ${N} ${j} ${X};
#else
uniform ${N} ${j} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${N} ${j} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${N} ${j} ${X} = u_${X};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${N} ${ee} a_${X};
#else
uniform ${N} ${j} u_${X};
#endif
`:ie==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${N} ${j} ${X} = a_${X};
#else
    ${N} ${j} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${N} ${j} ${X} = unpack_mix_${ie}(a_${X}, u_${X}_t);
#else
    ${N} ${j} ${X} = u_${X};
#endif
`}),staticAttributes:f,staticUniforms:C}}class np{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,d,f,m,y,C,T,M,z){this.context=i;let N=this.boundPaintVertexBuffers.length!==m.length;for(let j=0;!N&&j<m.length;j++)this.boundPaintVertexBuffers[j]!==m[j]&&(N=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==f||N||this.boundIndexBuffer!==y||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(d,f,m,y,C,T,M,z):(i.bindVertexArray.set(this.vao),T&&T.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),z&&z.bind())}freshBind(i,d,f,m,y,C,T,M){const z=i.numAttributes,N=this.context,j=N.gl;this.vao&&this.destroy(),this.vao=N.createVertexArray(),N.bindVertexArray.set(this.vao),this.boundProgram=i,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,d.enableAttributes(j,i);for(const X of f)X.enableAttributes(j,i);C&&C.enableAttributes(j,i),T&&T.enableAttributes(j,i),M&&M.enableAttributes(j,i),d.bind(),d.setVertexAttribPointers(j,i,y);for(const X of f)X.bind(),X.setVertexAttribPointers(j,i,y);C&&(C.bind(),C.setVertexAttribPointers(j,i,y)),m&&m.bind(),T&&(T.bind(),T.setVertexAttribPointers(j,i,y)),M&&(M.bind(),M.setVertexAttribPointers(j,i,y)),N.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const rp=(v,i,d,f,m)=>({u_matrix:v,u_texture:0,u_ele_delta:i,u_fog_matrix:d,u_fog_color:f?f.properties.get("fog-color"):l.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(m):0,u_horizon_color:f?f.properties.get("horizon-color"):l.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function gl(v){const i=[];for(let d=0;d<v.length;d++){if(v[d]===null)continue;const f=v[d].split(" ");i.push(f.pop())}return i}class ip{constructor(i,d,f,m,y,C){const T=i.gl;this.program=T.createProgram();const M=gl(d.staticAttributes),z=f?f.getBinderAttributes():[],N=M.concat(z),j=es.prelude.staticUniforms?gl(es.prelude.staticUniforms):[],X=d.staticUniforms?gl(d.staticUniforms):[],ee=f?f.getBinderUniforms():[],ie=j.concat(X).concat(ee),he=[];for(const Me of ie)he.indexOf(Me)<0&&he.push(Me);const ge=f?f.defines():[];y&&ge.push("#define OVERDRAW_INSPECTOR;"),C&&ge.push("#define TERRAIN3D;");const ye=ge.concat(es.prelude.fragmentSource,d.fragmentSource).join(`
`),ve=ge.concat(es.prelude.vertexSource,d.vertexSource).join(`
`),ue=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ue,ye),T.compileShader(ue),!T.getShaderParameter(ue,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ue)}`);T.attachShader(this.program,ue);const be=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(be,ve),T.compileShader(be),!T.getShaderParameter(be,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(be)}`);T.attachShader(this.program,be),this.attributes={};const Ee={};this.numAttributes=N.length;for(let Me=0;Me<this.numAttributes;Me++)N[Me]&&(T.bindAttribLocation(this.program,Me,N[Me]),this.attributes[N[Me]]=Me);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(be),T.deleteShader(ue);for(let Me=0;Me<he.length;Me++){const je=he[Me];if(je&&!Ee[je]){const Ze=T.getUniformLocation(this.program,je);Ze&&(Ee[je]=Ze)}}this.fixedUniforms=m(i,Ee),this.terrainUniforms=((Me,je)=>({u_depth:new l.aH(Me,je.u_depth),u_terrain:new l.aH(Me,je.u_terrain),u_terrain_dim:new l.aI(Me,je.u_terrain_dim),u_terrain_matrix:new l.aJ(Me,je.u_terrain_matrix),u_terrain_unpack:new l.aK(Me,je.u_terrain_unpack),u_terrain_exaggeration:new l.aI(Me,je.u_terrain_exaggeration)}))(i,Ee),this.binderUniforms=f?f.getUniforms(i,Ee):[]}draw(i,d,f,m,y,C,T,M,z,N,j,X,ee,ie,he,ge,ye,ve){const ue=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(m),i.setColorMode(y),i.setCullFace(C),M){i.activeTexture.set(ue.TEXTURE2),ue.bindTexture(ue.TEXTURE_2D,M.depthTexture),i.activeTexture.set(ue.TEXTURE3),ue.bindTexture(ue.TEXTURE_2D,M.texture);for(const Ee in this.terrainUniforms)this.terrainUniforms[Ee].set(M[Ee])}for(const Ee in this.fixedUniforms)this.fixedUniforms[Ee].set(T[Ee]);he&&he.setUniforms(i,this.binderUniforms,ee,{zoom:ie});let be=0;switch(d){case ue.LINES:be=2;break;case ue.TRIANGLES:be=3;break;case ue.LINE_STRIP:be=1}for(const Ee of X.get()){const Me=Ee.vaos||(Ee.vaos={});(Me[z]||(Me[z]=new np)).bind(i,this,N,he?he.getPaintVertexBuffers():[],j,Ee.vertexOffset,ge,ye,ve),ue.drawElements(d,Ee.primitiveLength*be,ue.UNSIGNED_SHORT,Ee.primitiveOffset*be*2)}}}function Vc(v,i,d){const f=1/tn(d,1,i.transform.tileZoom),m=Math.pow(2,d.tileID.overscaledZ),y=d.tileSize*Math.pow(2,i.transform.tileZoom)/m,C=y*(d.tileID.canonical.x+d.tileID.wrap*m),T=y*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const Mu=(v,i,d,f)=>{const m=i.style.light,y=m.properties.get("position"),C=[y.x,y.y,y.z],T=function(){var z=new l.A(9);return l.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,N){var j=Math.sin(N),X=Math.cos(N);z[0]=X,z[1]=j,z[2]=0,z[3]=-j,z[4]=X,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(T,-i.transform.angle),function(z,N,j){var X=N[0],ee=N[1],ie=N[2];z[0]=X*j[0]+ee*j[3]+ie*j[6],z[1]=X*j[1]+ee*j[4]+ie*j[7],z[2]=X*j[2]+ee*j[5]+ie*j[8]}(C,C,T);const M=m.properties.get("color");return{u_matrix:v,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+d,u_opacity:f}},Wc=(v,i,d,f,m,y,C)=>l.e(Mu(v,i,d,f),Vc(y,i,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),yl=v=>({u_matrix:v}),og=(v,i,d,f)=>l.e(yl(v),Vc(d,i,f)),B1=(v,i)=>({u_matrix:v,u_world:i}),ag=(v,i,d,f,m)=>l.e(og(v,i,d,f),{u_world:m}),F1=(v,i,d,f)=>{const m=v.transform;let y,C;if(f.paint.get("circle-pitch-alignment")==="map"){const T=tn(d,1,m.zoom);y=!0,C=[T,T]}else y=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(i.posMatrix,d,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:C}},As=(v,i,d)=>({u_matrix:v,u_inv_matrix:i,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),Au=(v,i,d=1)=>({u_matrix:v,u_color:i,u_overlay:0,u_overlay_scale:d}),Di=v=>({u_matrix:v}),$i=(v,i,d,f)=>({u_matrix:v,u_extrude_scale:tn(i,1,d),u_intensity:f}),qc=(v,i,d,f)=>{const m=l.H();l.aP(m,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:d,u_color_ramp:f,u_opacity:i.paint.get("heatmap-opacity")}};function Hc(v,i){const d=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new l.Z(0,f/d).toLngLat().lat,new l.Z(0,(f+1)/d).toLngLat().lat]}const Gc=(v,i,d,f)=>{const m=v.transform;return{u_matrix:ug(v,i,d,f),u_ratio:1/tn(i,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},sg=(v,i,d,f,m)=>l.e(Gc(v,i,d,m),{u_image:0,u_image_height:f}),vl=(v,i,d,f,m)=>{const y=v.transform,C=lg(i,y);return{u_matrix:ug(v,i,d,m),u_texsize:i.imageAtlasTexture.size,u_ratio:1/tn(i,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},N1=(v,i,d,f,m,y)=>{const C=v.lineAtlas,T=lg(i,v.transform),M=d.layout.get("line-cap")==="round",z=C.getDash(f.from,M),N=C.getDash(f.to,M),j=z.width*m.fromScale,X=N.width*m.toScale;return l.e(Gc(v,i,d,y),{u_patternscale_a:[T/j,-z.height/2],u_patternscale_b:[T/X,-N.height/2],u_sdfgamma:C.width/(256*Math.min(j,X)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:N.y,u_mix:m.t})};function lg(v,i){return 1/tn(v,1,i.tileZoom)}function ug(v,i,d,f){return v.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const j1=(v,i,d,f,m)=>{return{u_matrix:v,u_tl_parent:i,u_scale_parent:d,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:U1(m.paint.get("raster-hue-rotate"))};var y,C};function U1(v){v*=Math.PI/180;const i=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*i-d+1)/3,(Math.sqrt(3)*i-d+1)/3]}const cg=(v,i,d,f,m,y,C,T,M,z,N,j,X,ee)=>{const ie=C.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:ie.width/ie.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:M,u_coord_matrix:z,u_is_text:+j,u_pitch_with_map:+f,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:X,u_texture:0,u_translation:N,u_pitched_scale:ee}},Lu=(v,i,d,f,m,y,C,T,M,z,N,j,X,ee,ie)=>{const he=C.transform;return l.e(cg(v,i,d,f,m,y,C,T,M,z,N,j,X,ie),{u_gamma_scale:f?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+ee})},op=(v,i,d,f,m,y,C,T,M,z,N,j,X,ee)=>l.e(Lu(v,i,d,f,m,y,C,T,M,z,N,!0,j,!0,ee),{u_texsize_icon:X,u_texture_icon:1}),Zc=(v,i,d)=>({u_matrix:v,u_opacity:i,u_color:d}),ap=(v,i,d,f,m,y)=>l.e(function(C,T,M,z){const N=M.imageManager.getPattern(C.from.toString()),j=M.imageManager.getPattern(C.to.toString()),{width:X,height:ee}=M.imageManager.getPixelSize(),ie=Math.pow(2,z.tileID.overscaledZ),he=z.tileSize*Math.pow(2,M.transform.tileZoom)/ie,ge=he*(z.tileID.canonical.x+z.tileID.wrap*ie),ye=he*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:N.tl,u_pattern_br_a:N.br,u_pattern_tl_b:j.tl,u_pattern_br_b:j.br,u_texsize:[X,ee],u_mix:T.t,u_pattern_size_a:N.displaySize,u_pattern_size_b:j.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/tn(z,1,M.transform.tileZoom),u_pixel_coord_upper:[ge>>16,ye>>16],u_pixel_coord_lower:[65535&ge,65535&ye]}}(f,y,d,m),{u_matrix:v,u_opacity:i}),sp={fillExtrusion:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_lightpos:new l.aN(v,i.u_lightpos),u_lightintensity:new l.aI(v,i.u_lightintensity),u_lightcolor:new l.aN(v,i.u_lightcolor),u_vertical_gradient:new l.aI(v,i.u_vertical_gradient),u_opacity:new l.aI(v,i.u_opacity)}),fillExtrusionPattern:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_lightpos:new l.aN(v,i.u_lightpos),u_lightintensity:new l.aI(v,i.u_lightintensity),u_lightcolor:new l.aN(v,i.u_lightcolor),u_vertical_gradient:new l.aI(v,i.u_vertical_gradient),u_height_factor:new l.aI(v,i.u_height_factor),u_image:new l.aH(v,i.u_image),u_texsize:new l.aO(v,i.u_texsize),u_pixel_coord_upper:new l.aO(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,i.u_pixel_coord_lower),u_scale:new l.aN(v,i.u_scale),u_fade:new l.aI(v,i.u_fade),u_opacity:new l.aI(v,i.u_opacity)}),fill:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix)}),fillPattern:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_image:new l.aH(v,i.u_image),u_texsize:new l.aO(v,i.u_texsize),u_pixel_coord_upper:new l.aO(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,i.u_pixel_coord_lower),u_scale:new l.aN(v,i.u_scale),u_fade:new l.aI(v,i.u_fade)}),fillOutline:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_world:new l.aO(v,i.u_world)}),fillOutlinePattern:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_world:new l.aO(v,i.u_world),u_image:new l.aH(v,i.u_image),u_texsize:new l.aO(v,i.u_texsize),u_pixel_coord_upper:new l.aO(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,i.u_pixel_coord_lower),u_scale:new l.aN(v,i.u_scale),u_fade:new l.aI(v,i.u_fade)}),circle:(v,i)=>({u_camera_to_center_distance:new l.aI(v,i.u_camera_to_center_distance),u_scale_with_map:new l.aH(v,i.u_scale_with_map),u_pitch_with_map:new l.aH(v,i.u_pitch_with_map),u_extrude_scale:new l.aO(v,i.u_extrude_scale),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_matrix:new l.aJ(v,i.u_matrix)}),collisionBox:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_pixel_extrude_scale:new l.aO(v,i.u_pixel_extrude_scale)}),collisionCircle:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_inv_matrix:new l.aJ(v,i.u_inv_matrix),u_camera_to_center_distance:new l.aI(v,i.u_camera_to_center_distance),u_viewport_size:new l.aO(v,i.u_viewport_size)}),debug:(v,i)=>({u_color:new l.aL(v,i.u_color),u_matrix:new l.aJ(v,i.u_matrix),u_overlay:new l.aH(v,i.u_overlay),u_overlay_scale:new l.aI(v,i.u_overlay_scale)}),clippingMask:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix)}),heatmap:(v,i)=>({u_extrude_scale:new l.aI(v,i.u_extrude_scale),u_intensity:new l.aI(v,i.u_intensity),u_matrix:new l.aJ(v,i.u_matrix)}),heatmapTexture:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_world:new l.aO(v,i.u_world),u_image:new l.aH(v,i.u_image),u_color_ramp:new l.aH(v,i.u_color_ramp),u_opacity:new l.aI(v,i.u_opacity)}),hillshade:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_image:new l.aH(v,i.u_image),u_latrange:new l.aO(v,i.u_latrange),u_light:new l.aO(v,i.u_light),u_shadow:new l.aL(v,i.u_shadow),u_highlight:new l.aL(v,i.u_highlight),u_accent:new l.aL(v,i.u_accent)}),hillshadePrepare:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_image:new l.aH(v,i.u_image),u_dimension:new l.aO(v,i.u_dimension),u_zoom:new l.aI(v,i.u_zoom),u_unpack:new l.aK(v,i.u_unpack)}),line:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_ratio:new l.aI(v,i.u_ratio),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,i.u_units_to_pixels)}),lineGradient:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_ratio:new l.aI(v,i.u_ratio),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,i.u_units_to_pixels),u_image:new l.aH(v,i.u_image),u_image_height:new l.aI(v,i.u_image_height)}),linePattern:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_texsize:new l.aO(v,i.u_texsize),u_ratio:new l.aI(v,i.u_ratio),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_image:new l.aH(v,i.u_image),u_units_to_pixels:new l.aO(v,i.u_units_to_pixels),u_scale:new l.aN(v,i.u_scale),u_fade:new l.aI(v,i.u_fade)}),lineSDF:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_ratio:new l.aI(v,i.u_ratio),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_units_to_pixels:new l.aO(v,i.u_units_to_pixels),u_patternscale_a:new l.aO(v,i.u_patternscale_a),u_patternscale_b:new l.aO(v,i.u_patternscale_b),u_sdfgamma:new l.aI(v,i.u_sdfgamma),u_image:new l.aH(v,i.u_image),u_tex_y_a:new l.aI(v,i.u_tex_y_a),u_tex_y_b:new l.aI(v,i.u_tex_y_b),u_mix:new l.aI(v,i.u_mix)}),raster:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_tl_parent:new l.aO(v,i.u_tl_parent),u_scale_parent:new l.aI(v,i.u_scale_parent),u_buffer_scale:new l.aI(v,i.u_buffer_scale),u_fade_t:new l.aI(v,i.u_fade_t),u_opacity:new l.aI(v,i.u_opacity),u_image0:new l.aH(v,i.u_image0),u_image1:new l.aH(v,i.u_image1),u_brightness_low:new l.aI(v,i.u_brightness_low),u_brightness_high:new l.aI(v,i.u_brightness_high),u_saturation_factor:new l.aI(v,i.u_saturation_factor),u_contrast_factor:new l.aI(v,i.u_contrast_factor),u_spin_weights:new l.aN(v,i.u_spin_weights)}),symbolIcon:(v,i)=>({u_is_size_zoom_constant:new l.aH(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,i.u_is_size_feature_constant),u_size_t:new l.aI(v,i.u_size_t),u_size:new l.aI(v,i.u_size),u_camera_to_center_distance:new l.aI(v,i.u_camera_to_center_distance),u_pitch:new l.aI(v,i.u_pitch),u_rotate_symbol:new l.aH(v,i.u_rotate_symbol),u_aspect_ratio:new l.aI(v,i.u_aspect_ratio),u_fade_change:new l.aI(v,i.u_fade_change),u_matrix:new l.aJ(v,i.u_matrix),u_label_plane_matrix:new l.aJ(v,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,i.u_coord_matrix),u_is_text:new l.aH(v,i.u_is_text),u_pitch_with_map:new l.aH(v,i.u_pitch_with_map),u_is_along_line:new l.aH(v,i.u_is_along_line),u_is_variable_anchor:new l.aH(v,i.u_is_variable_anchor),u_texsize:new l.aO(v,i.u_texsize),u_texture:new l.aH(v,i.u_texture),u_translation:new l.aO(v,i.u_translation),u_pitched_scale:new l.aI(v,i.u_pitched_scale)}),symbolSDF:(v,i)=>({u_is_size_zoom_constant:new l.aH(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,i.u_is_size_feature_constant),u_size_t:new l.aI(v,i.u_size_t),u_size:new l.aI(v,i.u_size),u_camera_to_center_distance:new l.aI(v,i.u_camera_to_center_distance),u_pitch:new l.aI(v,i.u_pitch),u_rotate_symbol:new l.aH(v,i.u_rotate_symbol),u_aspect_ratio:new l.aI(v,i.u_aspect_ratio),u_fade_change:new l.aI(v,i.u_fade_change),u_matrix:new l.aJ(v,i.u_matrix),u_label_plane_matrix:new l.aJ(v,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,i.u_coord_matrix),u_is_text:new l.aH(v,i.u_is_text),u_pitch_with_map:new l.aH(v,i.u_pitch_with_map),u_is_along_line:new l.aH(v,i.u_is_along_line),u_is_variable_anchor:new l.aH(v,i.u_is_variable_anchor),u_texsize:new l.aO(v,i.u_texsize),u_texture:new l.aH(v,i.u_texture),u_gamma_scale:new l.aI(v,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_is_halo:new l.aH(v,i.u_is_halo),u_translation:new l.aO(v,i.u_translation),u_pitched_scale:new l.aI(v,i.u_pitched_scale)}),symbolTextAndIcon:(v,i)=>({u_is_size_zoom_constant:new l.aH(v,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.aH(v,i.u_is_size_feature_constant),u_size_t:new l.aI(v,i.u_size_t),u_size:new l.aI(v,i.u_size),u_camera_to_center_distance:new l.aI(v,i.u_camera_to_center_distance),u_pitch:new l.aI(v,i.u_pitch),u_rotate_symbol:new l.aH(v,i.u_rotate_symbol),u_aspect_ratio:new l.aI(v,i.u_aspect_ratio),u_fade_change:new l.aI(v,i.u_fade_change),u_matrix:new l.aJ(v,i.u_matrix),u_label_plane_matrix:new l.aJ(v,i.u_label_plane_matrix),u_coord_matrix:new l.aJ(v,i.u_coord_matrix),u_is_text:new l.aH(v,i.u_is_text),u_pitch_with_map:new l.aH(v,i.u_pitch_with_map),u_is_along_line:new l.aH(v,i.u_is_along_line),u_is_variable_anchor:new l.aH(v,i.u_is_variable_anchor),u_texsize:new l.aO(v,i.u_texsize),u_texsize_icon:new l.aO(v,i.u_texsize_icon),u_texture:new l.aH(v,i.u_texture),u_texture_icon:new l.aH(v,i.u_texture_icon),u_gamma_scale:new l.aI(v,i.u_gamma_scale),u_device_pixel_ratio:new l.aI(v,i.u_device_pixel_ratio),u_is_halo:new l.aH(v,i.u_is_halo),u_translation:new l.aO(v,i.u_translation),u_pitched_scale:new l.aI(v,i.u_pitched_scale)}),background:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_opacity:new l.aI(v,i.u_opacity),u_color:new l.aL(v,i.u_color)}),backgroundPattern:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_opacity:new l.aI(v,i.u_opacity),u_image:new l.aH(v,i.u_image),u_pattern_tl_a:new l.aO(v,i.u_pattern_tl_a),u_pattern_br_a:new l.aO(v,i.u_pattern_br_a),u_pattern_tl_b:new l.aO(v,i.u_pattern_tl_b),u_pattern_br_b:new l.aO(v,i.u_pattern_br_b),u_texsize:new l.aO(v,i.u_texsize),u_mix:new l.aI(v,i.u_mix),u_pattern_size_a:new l.aO(v,i.u_pattern_size_a),u_pattern_size_b:new l.aO(v,i.u_pattern_size_b),u_scale_a:new l.aI(v,i.u_scale_a),u_scale_b:new l.aI(v,i.u_scale_b),u_pixel_coord_upper:new l.aO(v,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.aO(v,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.aI(v,i.u_tile_units_to_pixels)}),terrain:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_texture:new l.aH(v,i.u_texture),u_ele_delta:new l.aI(v,i.u_ele_delta),u_fog_matrix:new l.aJ(v,i.u_fog_matrix),u_fog_color:new l.aL(v,i.u_fog_color),u_fog_ground_blend:new l.aI(v,i.u_fog_ground_blend),u_fog_ground_blend_opacity:new l.aI(v,i.u_fog_ground_blend_opacity),u_horizon_color:new l.aL(v,i.u_horizon_color),u_horizon_fog_blend:new l.aI(v,i.u_horizon_fog_blend)}),terrainDepth:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_ele_delta:new l.aI(v,i.u_ele_delta)}),terrainCoords:(v,i)=>({u_matrix:new l.aJ(v,i.u_matrix),u_texture:new l.aH(v,i.u_texture),u_terrain_coords_id:new l.aI(v,i.u_terrain_coords_id),u_ele_delta:new l.aI(v,i.u_ele_delta)}),sky:(v,i)=>({u_sky_color:new l.aL(v,i.u_sky_color),u_horizon_color:new l.aL(v,i.u_horizon_color),u_horizon:new l.aI(v,i.u_horizon),u_sky_horizon_blend:new l.aI(v,i.u_sky_horizon_blend)})};class da{constructor(i,d,f){this.context=i;const m=i.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const V1={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class lp{constructor(i,d,f,m){this.length=d.length,this.attributes=f,this.itemSize=d.bytesPerElement,this.dynamicDraw=m,this.context=i;const y=i.gl;this.buffer=y.createBuffer(),i.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,d){for(let f=0;f<this.attributes.length;f++){const m=d.attributes[this.attributes[f].name];m!==void 0&&i.enableVertexAttribArray(m)}}setVertexAttribPointers(i,d,f){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],C=d.attributes[y.name];C!==void 0&&i.vertexAttribPointer(C,y.components,i[V1[y.type]],!1,this.itemSize,y.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ls=new WeakMap;function ts(v){var i;if(Ls.has(v))return Ls.get(v);{const d=(i=v.getParameter(v.VERSION))===null||i===void 0?void 0:i.startsWith("WebGL 2.0");return Ls.set(v,d),d}}class In{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Kc extends In{getDefault(){return l.aM.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class W1 extends In{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class _l extends In{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class q1 extends In{getDefault(){return[!0,!0,!0,!0]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class dg extends In{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class H1 extends In{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class hg extends In{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const d=this.current;(i.func!==d.func||i.ref!==d.ref||i.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class up extends In{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class pg extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=i,this.dirty=!1}}class fg extends In{getDefault(){return[0,1]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class mg extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=i,this.dirty=!1}}class gg extends In{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Rs extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.BLEND):d.disable(d.BLEND),this.current=i,this.dirty=!1}}class yg extends In{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class G1 extends In{getDefault(){return l.aM.transparent}set(i){const d=this.current;(i.r!==d.r||i.g!==d.g||i.b!==d.b||i.a!==d.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class vg extends In{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Ru extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;i?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=i,this.dirty=!1}}class Z1 extends In{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Xc extends In{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class K1 extends In{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class X1 extends In{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _g extends In{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const d=this.current;(i[0]!==d[0]||i[1]!==d[1]||i[2]!==d[2]||i[3]!==d[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class xg extends In{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class bg extends In{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class cp extends In{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class wg extends In{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Yc extends In{getDefault(){return null}set(i){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Da extends In{getDefault(){return null}set(i){var d;if(i===this.current&&!this.dirty)return;const f=this.gl;ts(f)?f.bindVertexArray(i):(d=f.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(i),this.current=i,this.dirty=!1}}class dp extends In{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class hp extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class pp extends In{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Jc extends In{constructor(i,d){super(i),this.context=i,this.parent=d}getDefault(){return null}}class fp extends Jc{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class zs extends Jc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class mp extends Jc{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Y1{constructor(i,d,f,m,y){this.context=i,this.width=d,this.height=f;const C=i.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new fp(i,T),m)this.depthAttachment=y?new mp(i,T):new zs(i,T);else if(y)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,d=this.colorAttachment.get();if(d&&i.deleteTexture(d),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class _r{constructor(i,d,f){this.blendFunction=i,this.blendColor=d,this.mask=f}}_r.Replace=[1,0],_r.disabled=new _r(_r.Replace,l.aM.transparent,[!1,!1,!1,!1]),_r.unblended=new _r(_r.Replace,l.aM.transparent,[!0,!0,!0,!0]),_r.alphaBlended=new _r([1,771],l.aM.transparent,[!0,!0,!0,!0]);class J1{constructor(i){var d,f;if(this.gl=i,this.clearColor=new Kc(this),this.clearDepth=new W1(this),this.clearStencil=new _l(this),this.colorMask=new q1(this),this.depthMask=new dg(this),this.stencilMask=new H1(this),this.stencilFunc=new hg(this),this.stencilOp=new up(this),this.stencilTest=new pg(this),this.depthRange=new fg(this),this.depthTest=new mg(this),this.depthFunc=new gg(this),this.blend=new Rs(this),this.blendFunc=new yg(this),this.blendColor=new G1(this),this.blendEquation=new vg(this),this.cullFace=new Ru(this),this.cullFaceSide=new Z1(this),this.frontFace=new Xc(this),this.program=new K1(this),this.activeTexture=new X1(this),this.viewport=new _g(this),this.bindFramebuffer=new xg(this),this.bindRenderbuffer=new bg(this),this.bindTexture=new cp(this),this.bindVertexBuffer=new wg(this),this.bindElementBuffer=new Yc(this),this.bindVertexArray=new Da(this),this.pixelStoreUnpack=new dp(this),this.pixelStoreUnpackPremultiplyAlpha=new hp(this),this.pixelStoreUnpackFlipY=new pp(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),ts(i)){this.HALF_FLOAT=i.HALF_FLOAT;const m=i.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=i.RGBA16F)!==null&&d!==void 0?d:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=i.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,i.getExtension("EXT_color_buffer_float")}else{i.getExtension("EXT_color_buffer_half_float"),i.getExtension("OES_texture_half_float_linear");const m=i.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,d){return new da(this,i,d)}createVertexBuffer(i,d,f){return new lp(this,i,d,f)}createRenderbuffer(i,d,f){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,i,d,f),this.bindRenderbuffer.set(null),y}createFramebuffer(i,d,f,m){return new Y1(this,i,d,f,m)}clear({color:i,depth:d,stencil:f}){const m=this.gl;let y=0;i&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),f!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){l.aE(i.blendFunction,_r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}createVertexArray(){var i;return ts(this.gl)?this.gl.createVertexArray():(i=this.gl.getExtension("OES_vertex_array_object"))===null||i===void 0?void 0:i.createVertexArrayOES()}deleteVertexArray(i){var d;return ts(this.gl)?this.gl.deleteVertexArray(i):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(i)}unbindVAO(){this.bindVertexArray.set(null)}}class Zt{constructor(i,d,f){this.func=i,this.mask=d,this.range=f}}Zt.ReadOnly=!1,Zt.ReadWrite=!0,Zt.disabled=new Zt(519,Zt.ReadOnly,[0,1]);const Qc=7680;class Wn{constructor(i,d,f,m,y,C){this.test=i,this.ref=d,this.mask=f,this.fail=m,this.depthFail=y,this.pass=C}}Wn.disabled=new Wn({func:519,mask:0},0,0,Qc,Qc,Qc);class Dn{constructor(i,d,f){this.enable=i,this.mode=d,this.frontFace=f}}let Ds;function zu(v,i,d,f,m){const y=v.context,C=y.gl,T=v.useProgram("collisionBox"),M=[];let z=0,N=0;for(let ye=0;ye<f.length;ye++){const ve=f[ye],ue=i.getTile(ve).getBucket(d);if(!ue)continue;const be=m?ue.textCollisionBox:ue.iconCollisionBox,Ee=ue.collisionCircleArray;if(Ee.length>0){const Me=l.H();l.aQ(Me,ue.placementInvProjMatrix,v.transform.glCoordMatrix),l.aQ(Me,Me,ue.placementViewportMatrix),M.push({circleArray:Ee,circleOffset:N,transform:ve.posMatrix,invTransform:Me,coord:ve}),z+=Ee.length/4,N=z}be&&T.draw(y,C.LINES,Zt.disabled,Wn.disabled,v.colorModeForRenderPass(),Dn.disabled,{u_matrix:ve.posMatrix,u_pixel_extrude_scale:[1/(j=v.transform).width,1/j.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve),d.id,be.layoutVertexBuffer,be.indexBuffer,be.segments,null,v.transform.zoom,null,null,be.collisionVertexBuffer)}var j;if(!m||!M.length)return;const X=v.useProgram("collisionCircle"),ee=new l.aR;ee.resize(4*z),ee._trim();let ie=0;for(const ye of M)for(let ve=0;ve<ye.circleArray.length/4;ve++){const ue=4*ve,be=ye.circleArray[ue+0],Ee=ye.circleArray[ue+1],Me=ye.circleArray[ue+2],je=ye.circleArray[ue+3];ee.emplace(ie++,be,Ee,Me,je,0),ee.emplace(ie++,be,Ee,Me,je,1),ee.emplace(ie++,be,Ee,Me,je,2),ee.emplace(ie++,be,Ee,Me,je,3)}(!Ds||Ds.length<2*z)&&(Ds=function(ye){const ve=2*ye,ue=new l.aT;ue.resize(ve),ue._trim();for(let be=0;be<ve;be++){const Ee=6*be;ue.uint16[Ee+0]=4*be+0,ue.uint16[Ee+1]=4*be+1,ue.uint16[Ee+2]=4*be+2,ue.uint16[Ee+3]=4*be+2,ue.uint16[Ee+4]=4*be+3,ue.uint16[Ee+5]=4*be+0}return ue}(z));const he=y.createIndexBuffer(Ds,!0),ge=y.createVertexBuffer(ee,l.aS.members,!0);for(const ye of M){const ve=As(ye.transform,ye.invTransform,v.transform);X.draw(y,C.TRIANGLES,Zt.disabled,Wn.disabled,v.colorModeForRenderPass(),Dn.disabled,ve,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye.coord),d.id,ge,he,l.a0.simpleSegment(0,2*ye.circleOffset,ye.circleArray.length,ye.circleArray.length/2),null,v.transform.zoom,null,null,null)}ge.destroy(),he.destroy()}Dn.disabled=new Dn(!1,1029,2305),Dn.backCCW=new Dn(!0,1029,2305);const Du=l.an(new Float32Array(16));function gp(v,i,d,f,m,y){const{horizontalAlign:C,verticalAlign:T}=l.au(v);return new l.P((-(C-.5)*i/m+f[0])*y,(-(T-.5)*d/m+f[1])*y)}function $s(v,i,d,f,m,y){const C=i.tileAnchorPoint.add(new l.P(i.translation[0],i.translation[1]));if(i.pitchWithMap){let T=f.mult(y);d||(T=T.rotate(-m));const M=C.add(T);return fe(M.x,M.y,i.labelPlaneMatrix,i.getElevation).point}if(d){const T=Le(i.tileAnchorPoint.x+1,i.tileAnchorPoint.y,i).point.sub(v),M=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return v.add(f.rotate(M))}return v.add(f)}function xl(v,i,d,f,m,y,C,T,M,z,N,j,X,ee){const ie=v.text.placedSymbolArray,he=v.text.dynamicLayoutVertexArray,ge=v.icon.dynamicLayoutVertexArray,ye={};he.clear();for(let ve=0;ve<ie.length;ve++){const ue=ie.get(ve),be=ue.hidden||!ue.crossTileID||v.allowVerticalPlacement&&!ue.placedOrientation?null:f[ue.crossTileID];if(be){const Ee=new l.P(ue.anchorX,ue.anchorY),Me={getElevation:ee,width:m.width,height:m.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:d,projection:N,projectionCache:null,tileAnchorPoint:Ee,translation:j,unwrappedTileID:X},je=d?fe(Ee.x,Ee.y,C,ee):Le(Ee.x,Ee.y,Me),Ze=q(m.cameraToCenterDistance,je.signedDistanceFromCamera);let it=l.ai(v.textSizeData,M,ue)*Ze/l.ap;d&&(it*=v.tilePixelRatio/T);const{width:pt,height:Qe,anchor:Je,textOffset:bt,textBoxScale:Ut}=be,nt=gp(Je,pt,Qe,bt,Ut,it),ut=N.getPitchedTextCorrection(m,Ee.add(new l.P(j[0],j[1])),X),Ft=$s(je.point,Me,i,nt,m.angle,ut),Yn=v.allowVerticalPlacement&&ue.placedOrientation===l.ah.vertical?Math.PI/2:0;for(let Ht=0;Ht<ue.numGlyphs;Ht++)l.aj(he,Ft,Yn);z&&ue.associatedIconIndex>=0&&(ye[ue.associatedIconIndex]={shiftedAnchor:Ft,angle:Yn})}else It(ue.numGlyphs,he)}if(z){ge.clear();const ve=v.icon.placedSymbolArray;for(let ue=0;ue<ve.length;ue++){const be=ve.get(ue);if(be.hidden)It(be.numGlyphs,ge);else{const Ee=ye[ue];if(Ee)for(let Me=0;Me<be.numGlyphs;Me++)l.aj(ge,Ee.shiftedAnchor,Ee.angle);else It(be.numGlyphs,ge)}}v.icon.dynamicLayoutVertexBuffer.updateData(ge)}v.text.dynamicLayoutVertexBuffer.updateData(he)}function bo(v,i,d){return d.iconsInText&&i?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function yp(v,i,d,f,m,y,C,T,M,z,N,j){const X=v.context,ee=X.gl,ie=v.transform,he=Ps(),ge=T==="map",ye=M==="map",ve=T!=="viewport"&&d.layout.get("symbol-placement")!=="point",ue=ge&&!ye&&!ve,be=!ye&&ve,Ee=!d.layout.get("symbol-sort-key").isConstant();let Me=!1;const je=v.depthModeForSublayer(0,Zt.ReadOnly),Ze=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],pt=he.getCircleRadiusCorrection(ie);for(const Qe of f){const Je=i.getTile(Qe),bt=Je.getBucket(d);if(!bt)continue;const Ut=m?bt.text:bt.icon;if(!Ut||!Ut.segments.get().length||!Ut.hasVisibleVertices)continue;const nt=Ut.programConfigurations.get(d.id),ut=m||bt.sdfIcons,Ft=m?bt.textSizeData:bt.iconSizeData,Yn=ye||ie.pitch!==0,Ht=v.useProgram(bo(ut,m,bt),nt),nn=l.ag(Ft,ie.zoom),Jn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Qe);let ci,Uo,Qn,Oi,Ci=[0,0],di=null;if(m)Uo=Je.glyphAtlasTexture,Qn=ee.LINEAR,ci=Je.glyphAtlasTexture.size,bt.iconsInText&&(Ci=Je.imageAtlasTexture.size,di=Je.imageAtlasTexture,Oi=Yn||v.options.rotating||v.options.zooming||Ft.kind==="composite"||Ft.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const ln=d.layout.get("icon-size").constantOr(0)!==1||bt.iconsNeedLinear;Uo=Je.imageAtlasTexture,Qn=ut||v.options.rotating||v.options.zooming||ln||Yn?ee.LINEAR:ee.NEAREST,ci=Je.imageAtlasTexture.size}const ki=tn(Je,1,v.transform.zoom),fa=be?Qe.posMatrix:Du,$l=ca(fa,ye,ge,v.transform,ki),vd=_o(fa,ye,ge,v.transform,ki),Ol=_o(Qe.posMatrix,ye,ge,v.transform,ki),Co=he.translatePosition(v.transform,Je,y,C),_d=Ze&&bt.hasTextData(),Up=d.layout.get("icon-text-fit")!=="none"&&_d&&bt.hasIconData();if(ve){const ln=v.style.map.terrain?(Bl,Fl)=>v.style.map.terrain.getElevation(Qe,Bl,Fl):null,js=d.layout.get("text-rotation-alignment")==="map";Q(bt,Qe.posMatrix,v,m,$l,Ol,ye,z,js,he,Qe.toUnwrapped(),ie.width,ie.height,Co,ln)}const ko=Qe.posMatrix,Eo=m&&Ze||Up,ns=ve||Eo?Du:$l,Vo=vd,ni=ut&&d.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let hi;hi=ut?bt.iconsInText?op(Ft.kind,nn,ue,ye,ve,Eo,v,ko,ns,Vo,Co,ci,Ci,pt):Lu(Ft.kind,nn,ue,ye,ve,Eo,v,ko,ns,Vo,Co,m,ci,!0,pt):cg(Ft.kind,nn,ue,ye,ve,Eo,v,ko,ns,Vo,Co,m,ci,pt);const ro={program:Ht,buffers:Ut,uniformValues:hi,atlasTexture:Uo,atlasTextureIcon:di,atlasInterpolation:Qn,atlasInterpolationIcon:Oi,isSDF:ut,hasHalo:ni};if(Ee&&bt.canOverlap){Me=!0;const ln=Ut.segments.get();for(const js of ln)it.push({segments:new l.a0([js]),sortKey:js.sortKey,state:ro,terrainData:Jn})}else it.push({segments:Ut.segments,sortKey:0,state:ro,terrainData:Jn})}Me&&it.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of it){const Je=Qe.state;if(X.activeTexture.set(ee.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ee.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(X.activeTexture.set(ee.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Je.isSDF){const bt=Je.uniformValues;Je.hasHalo&&(bt.u_is_halo=1,vp(Je.buffers,Qe.segments,d,v,Je.program,je,N,j,bt,Qe.terrainData)),bt.u_is_halo=0}vp(Je.buffers,Qe.segments,d,v,Je.program,je,N,j,Je.uniformValues,Qe.terrainData)}}function vp(v,i,d,f,m,y,C,T,M,z){const N=f.context;m.draw(N,N.gl.TRIANGLES,y,C,T,Dn.disabled,M,z,d.id,v.layoutVertexBuffer,v.indexBuffer,i,d.paint,f.transform.zoom,v.programConfigurations.get(d.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function _p(v,i,d,f){const m=v.context,y=m.gl,C=Wn.disabled,T=new _r([y.ONE,y.ONE],l.aM.transparent,[!0,!0,!0,!0]),M=i.getBucket(d);if(!M)return;const z=f.key;let N=d.heatmapFbos.get(z);N||(N=$u(m,i.tileSize,i.tileSize),d.heatmapFbos.set(z,N)),m.bindFramebuffer.set(N.framebuffer),m.viewport.set([0,0,i.tileSize,i.tileSize]),m.clear({color:l.aM.transparent});const j=M.programConfigurations.get(d.id),X=v.useProgram("heatmap",j),ee=v.style.map.terrain.getTerrainData(f);X.draw(m,y.TRIANGLES,Zt.disabled,C,T,Dn.disabled,$i(f.posMatrix,i,v.transform.zoom,d.paint.get("heatmap-intensity")),ee,d.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,d.paint,v.transform.zoom,j)}function Os(v,i,d){const f=v.context,m=f.gl;f.setColorMode(v.colorModeForRenderPass());const y=Ou(f,i),C=d.key,T=i.heatmapFbos.get(C);T&&(f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,T.colorAttachment.get()),f.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,m.TRIANGLES,Zt.disabled,Wn.disabled,v.colorModeForRenderPass(),Dn.disabled,qc(v,i,0,1),null,i.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,i.paint,v.transform.zoom),T.destroy(),i.heatmapFbos.delete(C))}function $u(v,i,d){var f,m;const y=v.gl,C=y.createTexture();y.bindTexture(y.TEXTURE_2D,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const T=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:y.UNSIGNED_BYTE,M=(m=v.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,i,d,0,y.RGBA,T,null);const z=v.createFramebuffer(i,d,!1,!1);return z.colorAttachment.set(C),z}function Ou(v,i){return i.colorRampTexture||(i.colorRampTexture=new Ce(v,i.colorRamp,v.gl.RGBA)),i.colorRampTexture}function bl(v,i,d,f,m){if(!d||!f||!f.imageAtlas)return;const y=f.imageAtlas.patternPositions;let C=y[d.to.toString()],T=y[d.from.toString()];if(!C&&T&&(C=T),!T&&C&&(T=C),!C||!T){const M=m.getPaintProperty(i);C=y[M],T=y[M]}C&&T&&v.setConstantPatternPositions(C,T)}function Bu(v,i,d,f,m,y,C){const T=v.context.gl,M="fill-pattern",z=d.paint.get(M),N=z&&z.constantOr(1),j=d.getCrossfadeParameters();let X,ee,ie,he,ge;C?(ee=N&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=T.LINES):(ee=N?"fillPattern":"fill",X=T.TRIANGLES);const ye=z.constantOr(null);for(const ve of f){const ue=i.getTile(ve);if(N&&!ue.patternsLoaded())continue;const be=ue.getBucket(d);if(!be)continue;const Ee=be.programConfigurations.get(d.id),Me=v.useProgram(ee,Ee),je=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ve);N&&(v.context.activeTexture.set(T.TEXTURE0),ue.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ee.updatePaintBuffers(j)),bl(Ee,M,ye,ue,d);const Ze=je?ve:null,it=v.translatePosMatrix(Ze?Ze.posMatrix:ve.posMatrix,ue,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(C){he=be.indexBuffer2,ge=be.segments2;const pt=[T.drawingBufferWidth,T.drawingBufferHeight];ie=ee==="fillOutlinePattern"&&N?ag(it,v,j,ue,pt):B1(it,pt)}else he=be.indexBuffer,ge=be.segments,ie=N?og(it,v,j,ue):yl(it);Me.draw(v.context,X,m,v.stencilModeForClipping(ve),y,Dn.disabled,ie,je,d.id,be.layoutVertexBuffer,he,ge,d.paint,v.transform.zoom,Ee)}}function ed(v,i,d,f,m,y,C){const T=v.context,M=T.gl,z="fill-extrusion-pattern",N=d.paint.get(z),j=N.constantOr(1),X=d.getCrossfadeParameters(),ee=d.paint.get("fill-extrusion-opacity"),ie=N.constantOr(null);for(const he of f){const ge=i.getTile(he),ye=ge.getBucket(d);if(!ye)continue;const ve=v.style.map.terrain&&v.style.map.terrain.getTerrainData(he),ue=ye.programConfigurations.get(d.id),be=v.useProgram(j?"fillExtrusionPattern":"fillExtrusion",ue);j&&(v.context.activeTexture.set(M.TEXTURE0),ge.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ue.updatePaintBuffers(X)),bl(ue,z,ie,ge,d);const Ee=v.translatePosMatrix(he.posMatrix,ge,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Me=d.paint.get("fill-extrusion-vertical-gradient"),je=j?Wc(Ee,v,Me,ee,he,X,ge):Mu(Ee,v,Me,ee);be.draw(T,T.gl.TRIANGLES,m,y,C,Dn.backCCW,je,ve,d.id,ye.layoutVertexBuffer,ye.indexBuffer,ye.segments,d.paint,v.transform.zoom,ue,v.style.map.terrain&&ye.centroidVertexBuffer)}}function wl(v,i,d,f,m,y,C){const T=v.context,M=T.gl,z=d.fbo;if(!z)return;const N=v.useProgram("hillshade"),j=v.style.map.terrain&&v.style.map.terrain.getTerrainData(i);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,z.colorAttachment.get()),N.draw(T,M.TRIANGLES,m,y,C,Dn.disabled,((X,ee,ie,he)=>{const ge=ie.paint.get("hillshade-shadow-color"),ye=ie.paint.get("hillshade-highlight-color"),ve=ie.paint.get("hillshade-accent-color");let ue=ie.paint.get("hillshade-illumination-direction")*(Math.PI/180);ie.paint.get("hillshade-illumination-anchor")==="viewport"&&(ue-=X.transform.angle);const be=!X.options.moving;return{u_matrix:he?he.posMatrix:X.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),be),u_image:0,u_latrange:Hc(0,ee.tileID),u_light:[ie.paint.get("hillshade-exaggeration"),ue],u_shadow:ge,u_highlight:ye,u_accent:ve}})(v,d,f,j?i:null),j,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function Sl(v,i,d,f,m,y){const C=v.context,T=C.gl,M=i.dem;if(M&&M.data){const z=M.dim,N=M.stride,j=M.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||v.getTileTexture(N),i.demTexture){const ee=i.demTexture;ee.update(j,{premultiply:!1}),ee.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else i.demTexture=new Ce(C,j,T.RGBA,{premultiply:!1}),i.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let X=i.fbo;if(!X){const ee=new Ce(C,{width:z,height:z,data:null},T.RGBA);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),X=i.fbo=C.createFramebuffer(z,z,!0,!1),X.colorAttachment.set(ee.texture)}C.bindFramebuffer.set(X.framebuffer),C.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,f,m,y,Dn.disabled,((ee,ie)=>{const he=ie.stride,ge=l.H();return l.aP(ge,0,l.X,-l.X,0,0,1),l.J(ge,ge,[0,-l.X,0]),{u_matrix:ge,u_image:1,u_dimension:[he,he],u_zoom:ee.overscaledZ,u_unpack:ie.getUnpackVector()}})(i.tileID,M),null,d.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Sg(v,i,d,f,m,y){const C=f.paint.get("raster-fade-duration");if(!y&&C>0){const T=k.now(),M=(T-v.timeAdded)/C,z=i?(T-i.timeAdded)/C:-1,N=d.getSource(),j=m.coveringZoomLevel({tileSize:N.tileSize,roundZoom:N.roundZoom}),X=!i||Math.abs(i.tileID.overscaledZ-j)>Math.abs(v.tileID.overscaledZ-j),ee=X&&v.refreshedUponExpiration?1:l.ac(X?M:1-z,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),i?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const xp=new l.aM(1,0,0,1),wn=new l.aM(0,1,0,1),td=new l.aM(0,0,1,1),Q1=new l.aM(1,0,1,1),Cg=new l.aM(0,1,1,1);function Cl(v,i,d,f){nd(v,0,i+d/2,v.transform.width,d,f)}function kg(v,i,d,f){nd(v,i-d/2,0,d,v.transform.height,f)}function nd(v,i,d,f,m,y){const C=v.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(i*v.pixelRatio,d*v.pixelRatio,f*v.pixelRatio,m*v.pixelRatio),C.clear({color:y}),T.disable(T.SCISSOR_TEST)}function Eg(v,i,d){const f=v.context,m=f.gl,y=d.posMatrix,C=v.useProgram("debug"),T=Zt.disabled,M=Wn.disabled,z=v.colorModeForRenderPass(),N="$debug",j=v.style.map.terrain&&v.style.map.terrain.getTerrainData(d);f.activeTexture.set(m.TEXTURE0);const X=i.getTileByID(d.key).latestRawTileData,ee=Math.floor((X&&X.byteLength||0)/1024),ie=i.getTile(d).tileSize,he=512/Math.min(ie,512)*(d.overscaledZ/v.transform.zoom)*.5;let ge=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ge+=` => ${d.overscaledZ}`),function(ye,ve){ye.initDebugOverlayCanvas();const ue=ye.debugOverlayCanvas,be=ye.context.gl,Ee=ye.debugOverlayCanvas.getContext("2d");Ee.clearRect(0,0,ue.width,ue.height),Ee.shadowColor="white",Ee.shadowBlur=2,Ee.lineWidth=1.5,Ee.strokeStyle="white",Ee.textBaseline="top",Ee.font="bold 36px Open Sans, sans-serif",Ee.fillText(ve,5,5),Ee.strokeText(ve,5,5),ye.debugOverlayTexture.update(ue),ye.debugOverlayTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE)}(v,`${ge} ${ee}kB`),C.draw(f,m.TRIANGLES,T,M,_r.alphaBlended,Dn.disabled,Au(y,l.aM.transparent,he),null,N,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),C.draw(f,m.LINE_STRIP,T,M,z,Dn.disabled,Au(y,l.aM.red),j,N,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Tg(v,i,d){const f=v.context,m=f.gl,y=v.colorModeForRenderPass(),C=new Zt(m.LEQUAL,Zt.ReadWrite,v.depthRangeFor3D),T=v.useProgram("terrain"),M=i.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(const z of d){const N=v.renderToTexture.getTexture(z),j=i.getTerrainData(z.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,N.texture);const X=v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),ee=i.getMeshFrameDelta(v.transform.zoom),ie=v.transform.calculateFogMatrix(z.tileID.toUnwrapped()),he=rp(X,ee,ie,v.style.sky,v.transform.pitch);T.draw(f,m.TRIANGLES,C,Wn.disabled,y,Dn.backCCW,he,j,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class rd{constructor(i,d,f){this.vertexBuffer=i,this.indexBuffer=d,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class id{constructor(i,d){this.context=new J1(i),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new tp}resize(i,d,f){if(this.width=Math.floor(i*f),this.height=Math.floor(d*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const i=this.context,d=new l.aX;d.emplaceBack(0,0),d.emplaceBack(l.X,0),d.emplaceBack(0,l.X),d.emplaceBack(l.X,l.X),this.tileExtentBuffer=i.createVertexBuffer(d,Ms.members),this.tileExtentSegments=l.a0.simpleSegment(0,0,4,2);const f=new l.aX;f.emplaceBack(0,0),f.emplaceBack(l.X,0),f.emplaceBack(0,l.X),f.emplaceBack(l.X,l.X),this.debugBuffer=i.createVertexBuffer(f,Ms.members),this.debugSegments=l.a0.simpleSegment(0,0,4,5);const m=new l.$;m.emplaceBack(0,0,0,0),m.emplaceBack(l.X,0,l.X,0),m.emplaceBack(0,l.X,0,l.X),m.emplaceBack(l.X,l.X,l.X,l.X),this.rasterBoundsBuffer=i.createVertexBuffer(m,ir.members),this.rasterBoundsSegments=l.a0.simpleSegment(0,0,4,2);const y=new l.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(y,Ms.members),this.viewportSegments=l.a0.simpleSegment(0,0,4,2);const C=new l.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(C);const T=new l.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new Wn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const i=this.context,d=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.H();l.aP(f,0,this.width,this.height,0,0,1),l.K(f,f,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,d.TRIANGLES,Zt.disabled,this.stencilClearMode,_r.disabled,Dn.disabled,Di(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,d){if(this.currentStencilSource===i.source||!i.isTileClipped()||!d||!d.length)return;this.currentStencilSource=i.source;const f=this.context,m=f.gl;this.nextStencilID+d.length>256&&this.clearStencil(),f.setColorMode(_r.disabled),f.setDepthMode(Zt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of d){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);y.draw(f,m.TRIANGLES,Zt.disabled,new Wn({func:m.ALWAYS,mask:0},T,255,m.KEEP,m.KEEP,m.REPLACE),_r.disabled,Dn.disabled,Di(C.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,d=this.context.gl;return new Wn({func:d.NOTEQUAL,mask:255},i,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(i){const d=this.context.gl;return new Wn({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(i){const d=this.context.gl,f=i.sort((C,T)=>T.overscaledZ-C.overscaledZ),m=f[f.length-1].overscaledZ,y=f[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const C={};for(let T=0;T<y;T++)C[T+m]=new Wn({func:d.GEQUAL,mask:255},T+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=y,[C,f]}return[{[m]:Wn.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new _r([i.CONSTANT_COLOR,i.ONE],new l.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_r.unblended:_r.alphaBlended}depthModeForSublayer(i,d,f){if(!this.opaquePassEnabledForLayer())return Zt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new Zt(f||this.context.gl.LEQUAL,d,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,d){this.style=i,this.options=d,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,y={},C={},T={};for(const M in m){const z=m[M];z.used&&z.prepare(this.context),y[M]=z.getVisibleCoordinates(),C[M]=y[M].slice().reverse(),T[M]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of f){const z=this.style._layers[M];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const N=C[z.source];(z.type==="custom"||N.length)&&this.renderLayer(this,m[z.source],z,N)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?l.aM.black:l.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(M,z){const N=M.context,j=N.gl,X=((ye,ve,ue)=>({u_sky_color:ye.properties.get("sky-color"),u_horizon_color:ye.properties.get("horizon-color"),u_horizon:(ve.height/2+ve.getHorizon())*ue,u_sky_horizon_blend:ye.properties.get("sky-horizon-blend")*ve.height/2*ue}))(z,M.style.map.transform,M.pixelRatio),ee=new Zt(j.LEQUAL,Zt.ReadWrite,[0,1]),ie=Wn.disabled,he=M.colorModeForRenderPass(),ge=M.useProgram("sky");if(!z.mesh){const ye=new l.aX;ye.emplaceBack(-1,-1),ye.emplaceBack(1,-1),ye.emplaceBack(1,1),ye.emplaceBack(-1,1);const ve=new l.aY;ve.emplaceBack(0,1,2),ve.emplaceBack(0,2,3),z.mesh=new rd(N.createVertexBuffer(ye,Ms.members),N.createIndexBuffer(ve),l.a0.simpleSegment(0,0,ye.length,ve.length))}ge.draw(N,j.TRIANGLES,ee,ie,he,Dn.disabled,X,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],z=m[M.source],N=y[M.source];this._renderTileClippingMasks(M,N),this.renderLayer(this,z,M,N)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],z=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const N=(M.type==="symbol"?T:C)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,z,M,N)}if(this.options.showTileBoundaries){const M=function(z,N){let j=null;const X=Object.values(z._layers).flatMap(ge=>ge.source&&!ge.isHidden(N)?[z.sourceCaches[ge.source]]:[]),ee=X.filter(ge=>ge.getSource().type==="vector"),ie=X.filter(ge=>ge.getSource().type!=="vector"),he=ge=>{(!j||j.getSource().maxzoom<ge.getSource().maxzoom)&&(j=ge)};return ee.forEach(ge=>he(ge)),j||ie.forEach(ge=>he(ge)),j}(this.style,this.transform.zoom);M&&function(z,N,j){for(let X=0;X<j.length;X++)Eg(z,N,j[X])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const z=M.transform.padding;Cl(M,M.transform.height-(z.top||0),3,xp),Cl(M,z.bottom||0,3,wn),kg(M,z.left||0,3,td),kg(M,M.transform.width-(z.right||0),3,Q1);const N=M.transform.centerPoint;(function(j,X,ee,ie){nd(j,X-1,ee-10,2,20,ie),nd(j,X-10,ee-1,20,2,ie)})(M,N.x,M.transform.height-N.y,Cg)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(i){if(!this.style||!this.style.map||!this.style.map.terrain)return;const d=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=i?!l.a_(d,f):!l.a$(d,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(l.b0(d,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,C){const T=y.context,M=T.gl,z=_r.unblended,N=new Zt(M.LEQUAL,Zt.ReadWrite,[0,1]),j=C.getTerrainMesh(),X=C.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainDepth");T.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:l.aM.transparent,depth:1});for(const ie of X){const he=C.getTerrainData(ie.tileID),ge={u_matrix:y.transform.calculatePosMatrix(ie.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};ee.draw(T,M.TRIANGLES,N,Wn.disabled,z,Dn.backCCW,ge,he,"terrain",j.vertexBuffer,j.indexBuffer,j.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,C){const T=y.context,M=T.gl,z=_r.unblended,N=new Zt(M.LEQUAL,Zt.ReadWrite,[0,1]),j=C.getTerrainMesh(),X=C.getCoordsTexture(),ee=C.sourceCache.getRenderableTiles(),ie=y.useProgram("terrainCoords");T.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:l.aM.transparent,depth:1}),C.coordsIndex=[];for(const he of ee){const ge=C.getTerrainData(he.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,X.texture);const ye={u_matrix:y.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};ie.draw(T,M.TRIANGLES,N,Wn.disabled,z,Dn.backCCW,ye,ge,"terrain",j.vertexBuffer,j.indexBuffer,j.segments),C.coordsIndex.push(he.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(i,d,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(y,C,T,M,z){if(y.renderPass!=="translucent")return;const N=Wn.disabled,j=y.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(X,ee,ie,he,ge,ye,ve,ue,be){const Ee=ee.transform,Me=Ps(),je=ge==="map",Ze=ye==="map";for(const it of X){const pt=he.getTile(it),Qe=pt.getBucket(ie);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const Je=l.ag(Qe.textSizeData,Ee.zoom),bt=tn(pt,1,ee.transform.zoom),Ut=ca(it.posMatrix,Ze,je,ee.transform,bt),nt=ie.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(Je){const ut=Math.pow(2,Ee.zoom-pt.tileID.overscaledZ),Ft=ee.style.map.terrain?(Ht,nn)=>ee.style.map.terrain.getElevation(it,Ht,nn):null,Yn=Me.translatePosition(Ee,pt,ve,ue);xl(Qe,je,Ze,be,Ee,Ut,it.posMatrix,ut,Je,nt,Me,Yn,it.toUnwrapped(),Ft)}}}(M,y,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),z),T.paint.get("icon-opacity").constantOr(1)!==0&&yp(y,C,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),N,j),T.paint.get("text-opacity").constantOr(1)!==0&&yp(y,C,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),N,j),C.map.showCollisionBoxes&&(zu(y,C,T,M,!0),zu(y,C,T,M,!1))})(i,d,f,m,this.style.placement.variableOffsets);break;case"circle":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("circle-opacity"),N=T.paint.get("circle-stroke-width"),j=T.paint.get("circle-stroke-opacity"),X=!T.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(N.constantOr(1)===0||j.constantOr(1)===0))return;const ee=y.context,ie=ee.gl,he=y.depthModeForSublayer(0,Zt.ReadOnly),ge=Wn.disabled,ye=y.colorModeForRenderPass(),ve=[];for(let ue=0;ue<M.length;ue++){const be=M[ue],Ee=C.getTile(be),Me=Ee.getBucket(T);if(!Me)continue;const je=Me.programConfigurations.get(T.id),Ze=y.useProgram("circle",je),it=Me.layoutVertexBuffer,pt=Me.indexBuffer,Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(be),Je={programConfiguration:je,program:Ze,layoutVertexBuffer:it,indexBuffer:pt,uniformValues:F1(y,be,Ee,T),terrainData:Qe};if(X){const bt=Me.segments.get();for(const Ut of bt)ve.push({segments:new l.a0([Ut]),sortKey:Ut.sortKey,state:Je})}else ve.push({segments:Me.segments,sortKey:0,state:Je})}X&&ve.sort((ue,be)=>ue.sortKey-be.sortKey);for(const ue of ve){const{programConfiguration:be,program:Ee,layoutVertexBuffer:Me,indexBuffer:je,uniformValues:Ze,terrainData:it}=ue.state;Ee.draw(ee,ie.TRIANGLES,he,ge,ye,Dn.disabled,Ze,it,T.id,Me,je,ue.segments,T.paint,y.transform.zoom,be)}})(i,d,f,m);break;case"heatmap":(function(y,C,T,M){if(T.paint.get("heatmap-opacity")===0)return;const z=y.context;if(y.style.map.terrain){for(const N of M){const j=C.getTile(N);C.hasRenderableParent(N)||(y.renderPass==="offscreen"?_p(y,j,T,N):y.renderPass==="translucent"&&Os(y,T,N))}z.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(N,j,X,ee){const ie=N.context,he=ie.gl,ge=Wn.disabled,ye=new _r([he.ONE,he.ONE],l.aM.transparent,[!0,!0,!0,!0]);(function(ve,ue,be){const Ee=ve.gl;ve.activeTexture.set(Ee.TEXTURE1),ve.viewport.set([0,0,ue.width/4,ue.height/4]);let Me=be.heatmapFbos.get(l.aU);Me?(Ee.bindTexture(Ee.TEXTURE_2D,Me.colorAttachment.get()),ve.bindFramebuffer.set(Me.framebuffer)):(Me=$u(ve,ue.width/4,ue.height/4),be.heatmapFbos.set(l.aU,Me))})(ie,N,X),ie.clear({color:l.aM.transparent});for(let ve=0;ve<ee.length;ve++){const ue=ee[ve];if(j.hasRenderableParent(ue))continue;const be=j.getTile(ue),Ee=be.getBucket(X);if(!Ee)continue;const Me=Ee.programConfigurations.get(X.id),je=N.useProgram("heatmap",Me),{zoom:Ze}=N.transform;je.draw(ie,he.TRIANGLES,Zt.disabled,ge,ye,Dn.disabled,$i(ue.posMatrix,be,Ze,X.paint.get("heatmap-intensity")),null,X.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,X.paint,N.transform.zoom,Me)}ie.viewport.set([0,0,N.width,N.height])}(y,C,T,M):y.renderPass==="translucent"&&function(N,j){const X=N.context,ee=X.gl;X.setColorMode(N.colorModeForRenderPass());const ie=j.heatmapFbos.get(l.aU);ie&&(X.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ie.colorAttachment.get()),X.activeTexture.set(ee.TEXTURE1),Ou(X,j).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),N.useProgram("heatmapTexture").draw(X,ee.TRIANGLES,Zt.disabled,Wn.disabled,N.colorModeForRenderPass(),Dn.disabled,qc(N,j,0,1),null,j.id,N.viewportBuffer,N.quadTriangleIndexBuffer,N.viewportSegments,j.paint,N.transform.zoom))}(y,T)})(i,d,f,m);break;case"line":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("line-opacity"),N=T.paint.get("line-width");if(z.constantOr(1)===0||N.constantOr(1)===0)return;const j=y.depthModeForSublayer(0,Zt.ReadOnly),X=y.colorModeForRenderPass(),ee=T.paint.get("line-dasharray"),ie=T.paint.get("line-pattern"),he=ie.constantOr(1),ge=T.paint.get("line-gradient"),ye=T.getCrossfadeParameters(),ve=he?"linePattern":ee?"lineSDF":ge?"lineGradient":"line",ue=y.context,be=ue.gl;let Ee=!0;for(const Me of M){const je=C.getTile(Me);if(he&&!je.patternsLoaded())continue;const Ze=je.getBucket(T);if(!Ze)continue;const it=Ze.programConfigurations.get(T.id),pt=y.context.program.get(),Qe=y.useProgram(ve,it),Je=Ee||Qe.program!==pt,bt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Me),Ut=ie.constantOr(null);if(Ut&&je.imageAtlas){const Ft=je.imageAtlas,Yn=Ft.patternPositions[Ut.to.toString()],Ht=Ft.patternPositions[Ut.from.toString()];Yn&&Ht&&it.setConstantPatternPositions(Yn,Ht)}const nt=bt?Me:null,ut=he?vl(y,je,T,ye,nt):ee?N1(y,je,T,ee,ye,nt):ge?sg(y,je,T,Ze.lineClipsArray.length,nt):Gc(y,je,T,nt);if(he)ue.activeTexture.set(be.TEXTURE0),je.imageAtlasTexture.bind(be.LINEAR,be.CLAMP_TO_EDGE),it.updatePaintBuffers(ye);else if(ee&&(Je||y.lineAtlas.dirty))ue.activeTexture.set(be.TEXTURE0),y.lineAtlas.bind(ue);else if(ge){const Ft=Ze.gradients[T.id];let Yn=Ft.texture;if(T.gradientVersion!==Ft.version){let Ht=256;if(T.stepInterpolant){const nn=C.getSource().maxzoom,Jn=Me.canonical.z===nn?Math.ceil(1<<y.transform.maxZoom-Me.canonical.z):1;Ht=l.ac(l.aV(Ze.maxLineLength/l.X*1024*Jn),256,ue.maxTextureSize)}Ft.gradient=l.aW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:Ft.gradient||void 0,clips:Ze.lineClipsArray}),Ft.texture?Ft.texture.update(Ft.gradient):Ft.texture=new Ce(ue,Ft.gradient,be.RGBA),Ft.version=T.gradientVersion,Yn=Ft.texture}ue.activeTexture.set(be.TEXTURE0),Yn.bind(T.stepInterpolant?be.NEAREST:be.LINEAR,be.CLAMP_TO_EDGE)}Qe.draw(ue,be.TRIANGLES,j,y.stencilModeForClipping(Me),X,Dn.disabled,ut,bt,T.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,T.paint,y.transform.zoom,it,Ze.layoutVertexBuffer2),Ee=!1}})(i,d,f,m);break;case"fill":(function(y,C,T,M){const z=T.paint.get("fill-color"),N=T.paint.get("fill-opacity");if(N.constantOr(1)===0)return;const j=y.colorModeForRenderPass(),X=T.paint.get("fill-pattern"),ee=y.opaquePassEnabledForLayer()&&!X.constantOr(1)&&z.constantOr(l.aM.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ee){const ie=y.depthModeForSublayer(1,y.renderPass==="opaque"?Zt.ReadWrite:Zt.ReadOnly);Bu(y,C,T,M,ie,j,!1)}if(y.renderPass==="translucent"&&T.paint.get("fill-antialias")){const ie=y.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Zt.ReadOnly);Bu(y,C,T,M,ie,j,!0)}})(i,d,f,m);break;case"fill-extrusion":(function(y,C,T,M){const z=T.paint.get("fill-extrusion-opacity");if(z!==0&&y.renderPass==="translucent"){const N=new Zt(y.context.gl.LEQUAL,Zt.ReadWrite,y.depthRangeFor3D);if(z!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))ed(y,C,T,M,N,Wn.disabled,_r.disabled),ed(y,C,T,M,N,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const j=y.colorModeForRenderPass();ed(y,C,T,M,N,Wn.disabled,j)}}})(i,d,f,m);break;case"hillshade":(function(y,C,T,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const z=y.context,N=y.depthModeForSublayer(0,Zt.ReadOnly),j=y.colorModeForRenderPass(),[X,ee]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(const ie of ee){const he=C.getTile(ie);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&y.renderPass==="offscreen"?Sl(y,he,T,N,Wn.disabled,j):y.renderPass==="translucent"&&wl(y,ie,he,T,N,X[ie.overscaledZ],j)}z.viewport.set([0,0,y.width,y.height])})(i,d,f,m);break;case"raster":(function(y,C,T,M){if(y.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!M.length)return;const z=y.context,N=z.gl,j=C.getSource(),X=y.useProgram("raster"),ee=y.colorModeForRenderPass(),[ie,he]=j instanceof Ct?[{},M]:y.stencilConfigForOverlap(M),ge=he[he.length-1].overscaledZ,ye=!y.options.moving;for(const ve of he){const ue=y.depthModeForSublayer(ve.overscaledZ-ge,T.paint.get("raster-opacity")===1?Zt.ReadWrite:Zt.ReadOnly,N.LESS),be=C.getTile(ve);be.registerFadeDuration(T.paint.get("raster-fade-duration"));const Ee=C.findLoadedParent(ve,0),Me=C.findLoadedSibling(ve),je=Sg(be,Ee||Me||null,C,T,y.transform,y.style.map.terrain);let Ze,it;const pt=T.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;z.activeTexture.set(N.TEXTURE0),be.texture.bind(pt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(N.TEXTURE1),Ee?(Ee.texture.bind(pt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Ze=Math.pow(2,Ee.tileID.overscaledZ-be.tileID.overscaledZ),it=[be.tileID.canonical.x*Ze%1,be.tileID.canonical.y*Ze%1]):be.texture.bind(pt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),be.texture.useMipmap&&z.extTextureFilterAnisotropic&&y.transform.pitch>20&&N.texParameterf(N.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ve),Je=Qe?ve:null,bt=Je?Je.posMatrix:y.transform.calculatePosMatrix(ve.toUnwrapped(),ye),Ut=j1(bt,it||[0,0],Ze||1,je,T);j instanceof Ct?X.draw(z,N.TRIANGLES,ue,Wn.disabled,ee,Dn.disabled,Ut,Qe,T.id,j.boundsBuffer,y.quadTriangleIndexBuffer,j.boundsSegments):X.draw(z,N.TRIANGLES,ue,ie[ve.overscaledZ],ee,Dn.disabled,Ut,Qe,T.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(i,d,f,m);break;case"background":(function(y,C,T,M){const z=T.paint.get("background-color"),N=T.paint.get("background-opacity");if(N===0)return;const j=y.context,X=j.gl,ee=y.transform,ie=ee.tileSize,he=T.paint.get("background-pattern");if(y.isPatternMissing(he))return;const ge=!he&&z.a===1&&N===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ge)return;const ye=Wn.disabled,ve=y.depthModeForSublayer(0,ge==="opaque"?Zt.ReadWrite:Zt.ReadOnly),ue=y.colorModeForRenderPass(),be=y.useProgram(he?"backgroundPattern":"background"),Ee=M||ee.coveringTiles({tileSize:ie,terrain:y.style.map.terrain});he&&(j.activeTexture.set(X.TEXTURE0),y.imageManager.bind(y.context));const Me=T.getCrossfadeParameters();for(const je of Ee){const Ze=M?je.posMatrix:y.transform.calculatePosMatrix(je.toUnwrapped()),it=he?ap(Ze,N,y,he,{tileID:je,tileSize:ie},Me):Zc(Ze,N,z),pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(je);be.draw(j,X.TRIANGLES,ve,ye,ue,Dn.disabled,it,pt,T.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(i,0,f,m);break;case"custom":(function(y,C,T){const M=y.context,z=T.implementation;if(y.renderPass==="offscreen"){const N=z.prerender;N&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),N.call(z,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Wn.disabled);const N=z.renderingMode==="3d"?new Zt(y.context.gl.LEQUAL,Zt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Zt.ReadOnly);M.setDepthMode(N),z.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(i,0,f)}}translatePosMatrix(i,d,f,m,y){if(!f[0]&&!f[1])return i;const C=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),N=Math.cos(C);f=[f[0]*N-f[1]*z,f[0]*z+f[1]*N]}const T=[y?f[0]:tn(d,f[0],this.transform.zoom),y?f[1]:tn(d,f[1],this.transform.zoom),0],M=new Float32Array(16);return l.J(M,i,T),M}saveTileTexture(i){const d=this._tileTextures[i.size[0]];d?d.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const d=this._tileTextures[i];return d&&d.length>0?d.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const d=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!d||!f}useProgram(i,d){this.cache=this.cache||{};const f=i+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new ip(this.context,es[i],d,sp[i],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ce(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:i,drawingBufferHeight:d}=this.context.gl;return this.width!==i||this.height!==d}}class kl{constructor(i,d){this.points=i,this.planes=d}static fromInvProjectionMatrix(i,d,f){const m=Math.pow(2,f),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const M=1/(T=l.af([],T,i))[3]/d*m;return l.b1(T,T,[M,M,1/T[3],M])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const M=function(X,ee){var ie=ee[0],he=ee[1],ge=ee[2],ye=ie*ie+he*he+ge*ge;return ye>0&&(ye=1/Math.sqrt(ye)),X[0]=ee[0]*ye,X[1]=ee[1]*ye,X[2]=ee[2]*ye,X}([],function(X,ee,ie){var he=ee[0],ge=ee[1],ye=ee[2],ve=ie[0],ue=ie[1],be=ie[2];return X[0]=ge*be-ye*ue,X[1]=ye*ve-he*be,X[2]=he*ue-ge*ve,X}([],ae([],y[T[0]],y[T[1]]),ae([],y[T[2]],y[T[1]]))),z=-((N=M)[0]*(j=y[T[1]])[0]+N[1]*j[1]+N[2]*j[2]);var N,j;return M.concat(z)});return new kl(y,C)}}class El{constructor(i,d){this.min=i,this.max=d,this.center=function(f,m,y){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,y){return f[0]=m[0]+y[0],f[1]=m[1]+y[1],f[2]=m[2]+y[2],f}([],this.min,this.max))}quadrant(i){const d=[i%2==0,i<2],f=te(this.min),m=te(this.max);for(let y=0;y<d.length;y++)f[y]=d[y]?this.min[y]:this.center[y],m[y]=d[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new El(f,m)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<i.planes.length;m++){const y=i.planes[m];let C=0;for(let T=0;T<d.length;T++)l.b2(y,d[T])>=0&&C++;if(C===0)return 0;C!==d.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<i.points.length;T++){const M=i.points[T][m]-this.min[m];y=Math.min(y,M),C=Math.max(C,M)}if(C<0||y>this.max[m]-this.min[m])return 0}return 1}}class Tl{constructor(i=0,d=0,f=0,m=0){if(isNaN(i)||i<0||isNaN(d)||d<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=d,this.left=f,this.right=m}interpolate(i,d,f){return d.top!=null&&i.top!=null&&(this.top=l.y.number(i.top,d.top,f)),d.bottom!=null&&i.bottom!=null&&(this.bottom=l.y.number(i.bottom,d.bottom,f)),d.left!=null&&i.left!=null&&(this.left=l.y.number(i.left,d.left,f)),d.right!=null&&i.right!=null&&(this.right=l.y.number(i.right,d.right,f)),this}getCenter(i,d){const f=l.ac((this.left+i-this.right)/2,0,i),m=l.ac((this.top+d-this.bottom)/2,0,d);return new l.P(f,m)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new Tl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const bp=85.051129;class Il{constructor(i,d,f,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=i||0,this._maxZoom=d||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Tl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const i=new Il(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.apply(this),i}apply(i){this.tileSize=i.tileSize,this.latRange=i.latRange,this.lngRange=i.lngRange,this.width=i.width,this.height=i.height,this._center=i._center,this._elevation=i._elevation,this.minElevationForCurrentTile=i.minElevationForCurrentTile,this.zoom=i.zoom,this.angle=i.angle,this._fov=i._fov,this._pitch=i._pitch,this._unmodified=i._unmodified,this._edgeInsets=i._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const d=-l.b3(i,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var f=new l.A(4);return l.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,y){var C=m[0],T=m[1],M=m[2],z=m[3],N=Math.sin(y),j=Math.cos(y);f[0]=C*j+M*N,f[1]=T*j+z*N,f[2]=C*-N+M*j,f[3]=T*-N+z*j}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const d=l.ac(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const d=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,d,f){this._unmodified=!1,this._edgeInsets.interpolate(i,d,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const d=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(i){const d=[new l.b4(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.P(0,0)),m=this.pointCoordinate(new l.P(this.width,0)),y=this.pointCoordinate(new l.P(this.width,this.height)),C=this.pointCoordinate(new l.P(0,this.height)),T=Math.floor(Math.min(f.x,m.x,y.x,C.x)),M=Math.floor(Math.max(f.x,m.x,y.x,C.x)),z=1;for(let N=T-z;N<=M+z;N++)N!==0&&d.push(new l.b4(N,i))}return d}coveringTiles(i){var d,f;let m=this.coveringZoomLevel(i);const y=m;if(i.minzoom!==void 0&&m<i.minzoom)return[];i.maxzoom!==void 0&&m>i.maxzoom&&(m=i.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=l.Z.fromLngLat(this.center),M=Math.pow(2,m),z=[M*C.x,M*C.y,0],N=[M*T.x,M*T.y,0],j=kl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let X=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=m);const ee=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,ie=ue=>({aabb:new El([ue*M,0,0],[(ue+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ue,fullyVisible:!1}),he=[],ge=[],ye=m,ve=i.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let ue=1;ue<=3;ue++)he.push(ie(-ue)),he.push(ie(ue));for(he.push(ie(0));he.length>0;){const ue=he.pop(),be=ue.x,Ee=ue.y;let Me=ue.fullyVisible;if(!Me){const Qe=ue.aabb.intersects(j);if(Qe===0)continue;Me=Qe===2}const je=i.terrain?z:N,Ze=ue.aabb.distanceX(je),it=ue.aabb.distanceY(je),pt=Math.max(Math.abs(Ze),Math.abs(it));if(ue.zoom===ye||pt>ee+(1<<ye-ue.zoom)-2&&ue.zoom>=X){const Qe=ye-ue.zoom,Je=z[0]-.5-(be<<Qe),bt=z[1]-.5-(Ee<<Qe);ge.push({tileID:new l.S(ue.zoom===ye?ve:ue.zoom,ue.wrap,ue.zoom,be,Ee),distanceSq:le([N[0]-.5-be,N[1]-.5-Ee]),tileDistanceToCamera:Math.sqrt(Je*Je+bt*bt)})}else for(let Qe=0;Qe<4;Qe++){const Je=(be<<1)+Qe%2,bt=(Ee<<1)+(Qe>>1),Ut=ue.zoom+1;let nt=ue.aabb.quadrant(Qe);if(i.terrain){const ut=new l.S(Ut,ue.wrap,Ut,Je,bt),Ft=i.terrain.getMinMaxElevation(ut),Yn=(d=Ft.minElevation)!==null&&d!==void 0?d:this.elevation,Ht=(f=Ft.maxElevation)!==null&&f!==void 0?f:this.elevation;nt=new El([nt.min[0],nt.min[1],Yn],[nt.max[0],nt.max[1],Ht])}he.push({aabb:nt,zoom:Ut,x:Je,y:bt,wrap:ue.wrap,fullyVisible:Me})}}return ge.sort((ue,be)=>ue.distanceSq-be.distanceSq).map(ue=>ue.tileID)}resize(i,d){this.width=i,this.height=d,this.pixelsToGLUnits=[2/i,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const d=l.ac(i.lat,-85.051129,bp);return new l.P(l.O(i.lng)*this.worldSize,l.Q(d)*this.worldSize)}unproject(i){return new l.Z(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const d=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,i),y=i.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const C=f+d-y,T=Math.cos(this._pitch)*this.cameraToCenterDistance/C/l.b5(1,m.lat),M=this.scaleZoom(T/this.tileSize);this._elevation=y,this._center=m,this.zoom=M}setLocationAtPoint(i,d){const f=this.pointCoordinate(d),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(i),C=new l.Z(y.x-(f.x-m.x),y.y-(f.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,d){return d?this.coordinatePoint(this.locationCoordinate(i),d.getElevationForLngLatZoom(i,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,d){return this.coordinateLocation(this.pointCoordinate(i,d))}locationCoordinate(i){return l.Z.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,d){if(d){const X=d.pointCoordinate(i);if(X!=null)return X}const f=[i.x,i.y,0,1],m=[i.x,i.y,1,1];l.af(f,f,this.pixelMatrixInverse),l.af(m,m,this.pixelMatrixInverse);const y=f[3],C=m[3],T=f[1]/y,M=m[1]/C,z=f[2]/y,N=m[2]/C,j=z===N?0:(0-z)/(N-z);return new l.Z(l.y.number(f[0]/y,m[0]/C,j)/this.worldSize,l.y.number(T,M,j)/this.worldSize)}coordinatePoint(i,d=0,f=this.pixelMatrix){const m=[i.x*this.worldSize,i.y*this.worldSize,d,1];return l.af(m,m,f),new l.P(m[0]/m[3],m[1]/m[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new Se().extend(this.pointLocation(new l.P(0,i))).extend(this.pointLocation(new l.P(this.width,i))).extend(this.pointLocation(new l.P(this.width,this.height))).extend(this.pointLocation(new l.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Se([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,bp])}calculateTileMatrix(i){const d=i.canonical,f=this.worldSize/this.zoomScale(d.z),m=d.x+Math.pow(2,d.z)*i.wrap,y=l.an(new Float64Array(16));return l.J(y,y,[m*f,d.y*f,0]),l.K(y,y,[f/l.X,f/l.X,1]),y}calculatePosMatrix(i,d=!1){const f=i.key,m=d?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const y=this.calculateTileMatrix(i);return l.L(y,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[f]=new Float32Array(y),m[f]}calculateFogMatrix(i){const d=i.key,f=this._fogMatrixCache;if(f[d])return f[d];const m=this.calculateTileMatrix(i);return l.L(m,this.fogMatrix,m),f[d]=new Float32Array(m),f[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(i,d){d=l.ac(+d,this.minZoom,this.maxZoom);const f={center:new l.N(i.lng,i.lat),zoom:d};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const ue=179.9999999999;m=[-ue,ue]}const y=this.tileSize*this.zoomScale(f.zoom);let C=0,T=y,M=0,z=y,N=0,j=0;const{x:X,y:ee}=this.size;if(this.latRange){const ue=this.latRange;C=l.Q(ue[1])*y,T=l.Q(ue[0])*y,T-C<ee&&(N=ee/(T-C))}m&&(M=l.b3(l.O(m[0])*y,0,y),z=l.b3(l.O(m[1])*y,0,y),z<M&&(z+=y),z-M<X&&(j=X/(z-M)));const{x:ie,y:he}=this.project.call({worldSize:y},i);let ge,ye;const ve=Math.max(j||0,N||0);if(ve){const ue=new l.P(j?(z+M)/2:ie,N?(T+C)/2:he);return f.center=this.unproject.call({worldSize:y},ue).wrap(),f.zoom+=this.scaleZoom(ve),f}if(this.latRange){const ue=ee/2;he-ue<C&&(ye=C+ue),he+ue>T&&(ye=T-ue)}if(m){const ue=(M+z)/2;let be=ie;this._renderWorldCopies&&(be=l.b3(ie,ue-y/2,ue+y/2));const Ee=X/2;be-Ee<M&&(ge=M+Ee),be+Ee>z&&(ge=z-Ee)}if(ge!==void 0||ye!==void 0){const ue=new l.P(ge??ie,ye??he);f.center=this.unproject.call({worldSize:y},ue).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const i=this._unmodified,{center:d,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=f,this._unmodified=i,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,d=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.b5(1,this.center.lat)*this.worldSize;let m=l.an(new Float64Array(16));l.K(m,m,[this.width/2,-this.height/2,1]),l.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=l.an(new Float64Array(16)),l.K(m,m,[1,-1,1]),l.J(m,m,[-1,-1,0]),l.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),T=y-C*this._pixelPerMeter/Math.cos(this._pitch),M=C<0?T:y,z=Math.PI/2+this._pitch,N=this._fov*(.5+i.y/this.height),j=Math.sin(N)*M/Math.sin(l.ac(Math.PI-z-N,.01,Math.PI-.01)),X=this.getHorizon(),ee=2*Math.atan(X/this.cameraToCenterDistance)*(.5+i.y/(2*X)),ie=Math.sin(ee)*M/Math.sin(l.ac(Math.PI-z-ee,.01,Math.PI-.01)),he=Math.min(j,ie);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*he+M),this.nearZ=this.height/50,m=new Float64Array(16),l.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-i.x/this.width,m[9]=2*i.y/this.height,this.projectionMatrix=l.ae(m),l.K(m,m,[1,-1,1]),l.J(m,m,[0,0,-this.cameraToCenterDistance]),l.b7(m,m,this._pitch),l.ad(m,m,this.angle),l.J(m,m,[-d,-f,0]),this.mercatorMatrix=l.K([],m,[this.worldSize,this.worldSize,this.worldSize]),l.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.L(new Float64Array(16),this.labelPlaneMatrix,m),l.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=l.as([],m),this.fogMatrix=new Float64Array(16),l.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-i.x/this.width,this.fogMatrix[9]=2*i.y/this.height,l.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),l.b7(this.fogMatrix,this.fogMatrix,this._pitch),l.ad(this.fogMatrix,this.fogMatrix,this.angle),l.J(this.fogMatrix,this.fogMatrix,[-d,-f,0]),l.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),l.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=l.L(new Float64Array(16),this.labelPlaneMatrix,m);const ge=this.width%2/2,ye=this.height%2/2,ve=Math.cos(this.angle),ue=Math.sin(this.angle),be=d-Math.round(d)+ve*ge+ue*ye,Ee=f-Math.round(f)+ve*ye+ue*ge,Me=new Float64Array(m);if(l.J(Me,Me,[be>.5?be-1:be,Ee>.5?Ee-1:Ee,0]),this.alignedModelViewProjectionMatrix=Me,m=l.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.P(0,0)),d=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.P(0,i))}getCameraQueryGeometry(i){const d=this.getCameraPoint();if(i.length===1)return[i[0],d];{let f=d.x,m=d.y,y=d.x,C=d.y;for(const T of i)f=Math.min(f,T.x),m=Math.min(m,T.y),y=Math.max(y,T.x),C=Math.max(C,T.y);return[new l.P(f,m),new l.P(y,m),new l.P(y,C),new l.P(f,C),new l.P(f,m)]}}lngLatToCameraDepth(i,d){const f=this.locationCoordinate(i),m=[f.x*this.worldSize,f.y*this.worldSize,d,1];return l.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Fu(v,i){let d,f=!1,m=null,y=null;const C=()=>{m=null,f&&(v.apply(y,d),m=setTimeout(C,i),f=!1)};return(...T)=>(f=!0,y=this,d=T,m||C(),m)}class od{constructor(i){this._getCurrentHash=()=>{const d=window.location.hash.replace("#","");if(this._hashName){let f;return d.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{const d=this._getCurrentHash();if(d.length>=3&&!d.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:f,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{const d=this._getCurrentHash();if(d.length===0)return;const f=d.join("/");let m=f;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${f}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let C=window.location.href.replace(/(#.+)?$/,y);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Fu(this._updateHashUnthrottled,300),this._hashName=i&&encodeURIComponent(i)}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(i){const d=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),C=Math.round(d.lng*y)/y,T=Math.round(d.lat*y)/y,M=this._map.getBearing(),z=this._map.getPitch();let N="";if(N+=i?`/${C}/${T}/${f}`:`${f}/${T}/${C}`,(M||z)&&(N+="/"+Math.round(10*M)/10),z&&(N+=`/${Math.round(z)}`),this._hashName){const j=this._hashName;let X=!1;const ee=window.location.hash.slice(1).split("&").map(ie=>{const he=ie.split("=")[0];return he===j?(X=!0,`${he}=${N}`):ie}).filter(ie=>ie);return X||ee.push(`${j}=${N}`),`#${ee.join("&")}`}return`#${N}`}}const ad={linearity:.3,easing:l.b8(0,0,.3,1)},wp=l.e({deceleration:2500,maxSpeed:1400},ad),e_=l.e({deceleration:20,maxSpeed:1400},ad),Ig=l.e({deceleration:1e3,maxSpeed:360},ad),sd=l.e({deceleration:1e3,maxSpeed:90},ad);class Sp{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,d=k.now();for(;i.length>0&&d-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new l.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)d.zoom+=y.zoomDelta||0,d.bearing+=y.bearingDelta||0,d.pitch+=y.pitchDelta||0,y.panDelta&&d.pan._add(y.panDelta),y.around&&(d.around=y.around),y.pinchAround&&(d.pinchAround=y.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(d.pan.mag()){const y=ju(d.pan.mag(),f,l.e({},wp,i||{}));m.offset=d.pan.mult(y.amount/d.pan.mag()),m.center=this._map.transform.center,Nu(m,y)}if(d.zoom){const y=ju(d.zoom,f,e_);m.zoom=this._map.transform.zoom+y.amount,Nu(m,y)}if(d.bearing){const y=ju(d.bearing,f,Ig);m.bearing=this._map.transform.bearing+l.ac(y.amount,-179,179),Nu(m,y)}if(d.pitch){const y=ju(d.pitch,f,sd);m.pitch=this._map.transform.pitch+y.amount,Nu(m,y)}if(m.zoom||m.bearing){const y=d.pinchAround===void 0?d.around:d.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),l.e(m,{noMoveStart:!0})}}function Nu(v,i){(!v.duration||v.duration<i.duration)&&(v.duration=i.duration,v.easing=i.easing)}function ju(v,i,d){const{maxSpeed:f,linearity:m,deceleration:y}=d,C=l.ac(v*m/(i/1e3),-f,f),T=Math.abs(C)/(y*m);return{easing:d.easing,duration:1e3*T,amount:C*(T/2)}}class ui extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f,m={}){const y=P.mousePos(d.getCanvas(),f),C=d.unproject(y);super(i,l.e({point:y,lngLat:C,originalEvent:f},m)),this._defaultPrevented=!1,this.target=d}}class Bs extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f){const m=i==="touchend"?f.changedTouches:f.touches,y=P.touchPos(d.getCanvasContainer(),m),C=y.map(M=>d.unproject(M)),T=y.reduce((M,z,N,j)=>M.add(z.div(j.length)),new l.P(0,0));super(i,{points:y,point:T,lngLats:C,lngLat:d.unproject(T),originalEvent:f}),this._defaultPrevented=!1}}class Pg extends l.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(i,d,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}}class Mg{constructor(i,d){this._map=i,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Pg(i.type,this._map,i))}mousedown(i,d){return this._mousedownPos=d,this._firePreventable(new ui(i.type,this._map,i))}mouseup(i){this._map.fire(new ui(i.type,this._map,i))}click(i,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new ui(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ui(i.type,this._map,i))}mouseover(i){this._map.fire(new ui(i.type,this._map,i))}mouseout(i){this._map.fire(new ui(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Bs(i.type,this._map,i))}touchmove(i){this._map.fire(new Bs(i.type,this._map,i))}touchend(i){this._map.fire(new Bs(i.type,this._map,i))}touchcancel(i){this._map.fire(new Bs(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xr{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ui(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ui("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ui(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class No{constructor(i){this._map=i}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(i){return this.transform.pointLocation(l.P.convert(i),this._map.terrain)}}class to{constructor(i,d){this._map=i,this._tr=new No(i),this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,d){this.isEnabled()&&i.shiftKey&&i.button===0&&(P.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(i,d){if(!this._active)return;const f=d;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",i));const y=Math.min(m.x,f.x),C=Math.max(m.x,f.x),T=Math.min(m.y,f.y),M=Math.max(m.y,f.y);P.setTransform(this._box,`translate(${y}px,${T}px)`),this._box.style.width=C-y+"px",this._box.style.height=M-T+"px"}mouseupWindow(i,d){if(!this._active||i.button!==0)return;const f=this._startPos,m=d;if(this.reset(),P.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new l.k("boxzoomend",{originalEvent:i})),{cameraAnimation:y=>y.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,d){return this._map.fire(new l.k(i,{originalEvent:d}))}}function Uu(v,i){if(v.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${i.length}`);const d={};for(let f=0;f<v.length;f++)d[v[f].identifier]=i[f];return d}class Cp{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,d,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const y=new l.P(0,0);for(const C of m)y._add(C);return y.div(m.length)}(d),this.touches=Uu(f,d)))}touchmove(i,d,f){if(this.aborted||!this.centroid)return;const m=Uu(f,d);for(const y in this.touches){const C=m[y];(!C||C.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(i,d,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class ld{constructor(i){this.singleTap=new Cp(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,d,f){this.singleTap.touchstart(i,d,f)}touchmove(i,d,f){this.singleTap.touchmove(i,d,f)}touchend(i,d,f){const m=this.singleTap.touchend(i,d,f);if(m){const y=i.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(y&&C||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Pl{constructor(i){this._tr=new No(i),this._zoomIn=new ld({numTouches:1,numTaps:2}),this._zoomOut=new ld({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,d,f){this._zoomIn.touchstart(i,d,f),this._zoomOut.touchstart(i,d,f)}touchmove(i,d,f){this._zoomIn.touchmove(i,d,f),this._zoomOut.touchmove(i,d,f)}touchend(i,d,f){const m=this._zoomIn.touchend(i,d,f),y=this._zoomOut.touchend(i,d,f),C=this._tr;return m?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:i})}):y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(y)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $a{constructor(i){this._enabled=!!i.enable,this._moveStateManager=i.moveStateManager,this._clickTolerance=i.clickTolerance||1,this._moveFunction=i.move,this._activateOnStart=!!i.activateOnStart,i.assignEvents(this),this.reset()}reset(i){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(i)}_move(...i){const d=this._moveFunction(...i);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(i,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(i)&&(this._moveStateManager.startMove(i),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(i,d){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(i.preventDefault(),!this._moveStateManager.isValidMoveEvent(i))return void this.reset(i);const m=d.length?d[0]:d;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(i){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(i)&&(this._moved&&P.suppressClick(),this.reset(i))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const kp={0:1,2:2};class ud{constructor(i){this._correctEvent=i.checkCorrectEvent}startMove(i){const d=P.mouseButton(i);this._eventButton=d}endMove(i){delete this._eventButton}isValidStartEvent(i){return this._correctEvent(i)}isValidMoveEvent(i){return!function(d,f){const m=kp[f];return d.buttons===void 0||(d.buttons&m)!==m}(i,this._eventButton)}isValidEndEvent(i){return P.mouseButton(i)===this._eventButton}}class Ep{constructor(){this._firstTouch=void 0}_isOneFingerTouch(i){return i.targetTouches.length===1}_isSameTouchEvent(i){return i.targetTouches[0].identifier===this._firstTouch}startMove(i){this._firstTouch=i.targetTouches[0].identifier}endMove(i){delete this._firstTouch}isValidStartEvent(i){return this._isOneFingerTouch(i)}isValidMoveEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}isValidEndEvent(i){return this._isOneFingerTouch(i)&&this._isSameTouchEvent(i)}}const cd=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=i=>{i.preventDefault()}},Tp=({enable:v,clickTolerance:i,bearingDegreesPerPixelMoved:d=.8})=>{const f=new ud({checkCorrectEvent:m=>P.mouseButton(m)===0&&m.ctrlKey||P.mouseButton(m)===2});return new $a({clickTolerance:i,move:(m,y)=>({bearingDelta:(y.x-m.x)*d}),moveStateManager:f,enable:v,assignEvents:cd})},Ip=({enable:v,clickTolerance:i,pitchDegreesPerPixelMoved:d=-.5})=>{const f=new ud({checkCorrectEvent:m=>P.mouseButton(m)===0&&m.ctrlKey||P.mouseButton(m)===2});return new $a({clickTolerance:i,move:(m,y)=>({pitchDelta:(y.y-m.y)*d}),moveStateManager:f,enable:v,assignEvents:cd})};class Fs{constructor(i,d){this._clickTolerance=i.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.P(0,0)}_shouldBePrevented(i){return i<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(i,d,f){return this._calculateTransform(i,d,f)}touchmove(i,d,f){if(this._active){if(!this._shouldBePrevented(f.length))return i.preventDefault(),this._calculateTransform(i,d,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",i)}}touchend(i,d,f){this._calculateTransform(i,d,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,d,f){f.length>0&&(this._active=!0);const m=Uu(f,d),y=new l.P(0,0),C=new l.P(0,0);let T=0;for(const z in m){const N=m[z],j=this._touches[z];j&&(y._add(N),C._add(N.sub(j)),T++,m[z]=N)}if(this._touches=m,this._shouldBePrevented(T)||!C.mag())return;const M=C.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dd{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(i,d,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([d[0],d[1]]))}touchmove(i,d,f){if(!this._firstTwoTouches)return;i.preventDefault();const[m,y]=this._firstTwoTouches,C=Vu(f,d,m),T=Vu(f,d,y);if(!C||!T)return;const M=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],M,i)}touchend(i,d,f){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,C=Vu(f,d,m),T=Vu(f,d,y);C&&T||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Vu(v,i,d){for(let f=0;f<v.length;f++)if(v[f].identifier===d)return i[f]}function Pp(v,i){return Math.log(v/i)/Math.LN2}class Mp extends dd{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,d){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Pp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Pp(this._distance,f),pinchAround:d}}}function Ap(v,i){return 180*v.angleWith(i)/Math.PI}class Lp extends dd{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,d,f){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ap(this._vector,m),pinchAround:d}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const d=25/(Math.PI*this._minDiameter)*360,f=Ap(i,this._startVector);return Math.abs(f)<d}}function hd(v){return Math.abs(v.y)>Math.abs(v.x)}class Ml extends dd{constructor(i){super(),this._currentTouchCount=0,this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,d,f){super.touchstart(i,d,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,hd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,d,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=i[0].sub(this._lastPoints[0]),y=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(i,d,f){if(this._valid!==void 0)return this._valid;const m=i.mag()>=2,y=d.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=i.y>0==d.y>0;return hd(i)&&hd(d)&&C}}const Ag={panStep:100,bearingStep:15,pitchStep:10};class wo{constructor(i){this._tr=new No(i);const d=Ag;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let d=0,f=0,m=0,y=0,C=0;switch(i.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),y=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),y=1);break;case 38:i.shiftKey?m=1:(i.preventDefault(),C=-1);break;case 40:i.shiftKey?m=-1:(i.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:ha,zoom:d?Math.round(M.zoom)+d*(i.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-y*this._panStep,-C*this._panStep],center:M.center},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ha(v){return v*(2-v)}const Rp=4.000244140625;class jo{constructor(i,d){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=i,this._tr=new No(i),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(i){return!!this._map.cooperativeGestures.isEnabled()&&!(i.ctrlKey||this._map.cooperativeGestures.isBypassed(i))}wheel(i){if(!this.isEnabled())return;if(this._shouldBePrevented(i))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",i);let d=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=k.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,d!==0&&d%Rp==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(m*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),i.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=i,this._delta-=d,this._active||this._start(i)),i.preventDefault()}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=P.mousePos(this._map.getCanvas(),i),f=this._tr;this._around=d.y>f.transform.height/2-f.transform.getHorizon()?l.N.convert(this._aroundCenter?f.center:f.unproject(d)):l.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Rp?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&z!==0&&(z=1/z);const N=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(N*z))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,m=this._easing;let y,C=!1;const T=k.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&m&&T){const M=Math.min(T/200,1),z=m(M);y=l.y.number(f,d,z),M<1?this._frameId||(this._frameId=!0):C=!0}else y=d,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:y-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let d=l.b9;if(this._prevEase){const f=this._prevEase,m=(k.now()-f.start)/f.duration,y=f.easing(m+.01)-f.easing(m),C=.27/Math.sqrt(y*y+1e-4)*.01,T=Math.sqrt(.0729-C*C);d=l.b8(C,T,.25,1)}return this._prevEase={start:k.now(),duration:i,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Ns{constructor(i,d){this._clickZoom=i,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class t_{constructor(i){this._tr=new No(i),this.reset()}reset(){this._active=!1}dblclick(i,d){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(i.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class n_{constructor(){this._tap=new ld({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(i,d,f){if(!this._swipePoint)if(this._tapTime){const m=d[0],y=i.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;y&&C?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(i,d,f)}touchmove(i,d,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=d[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,i.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(i,d,f)}touchend(i,d,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(i,d,f);m&&(this._tapTime=i.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Lg{constructor(i,d,f){this._el=i,this._mousePan=d,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Rg{constructor(i,d,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=d,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class zp{constructor(i,d,f,m){this._el=i,this._touchZoom=d,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Al{constructor(i,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=i,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const i=this._map.getCanvasContainer();i.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",i);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=d,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=f,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(i){return i[this._bypassKey]}notifyGestureBlocked(i,d){this._enabled&&(this._map.fire(new l.k("cooperativegestureprevented",{gestureType:i,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const So=v=>v.zoom||v.drag||v.pitch||v.rotate;class yt extends l.k{}function pd(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Dp{constructor(i,d){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,T={needsRenderFrame:!1},M={},z={},N=m.touches,j=N?this._getMapTouches(N):void 0,X=j?P.touchPos(this._map.getCanvas(),j):P.mousePos(this._map.getCanvas(),m);for(const{handlerName:he,handler:ge,allowed:ye}of this._handlers){if(!ge.isEnabled())continue;let ve;this._blockedByActive(z,ye,he)?ge.reset():ge[y||m.type]&&(ve=ge[y||m.type](m,X,j),this.mergeHandlerResult(T,M,ve,he,C),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||ge.isActive())&&(z[he]=ge)}const ee={};for(const he in this._previousActiveHandlers)z[he]||(ee[he]=C);this._previousActiveHandlers=z,(Object.keys(ee).length||pd(T))&&(this._changes.push([T,M,ee]),this._triggerRenderFrame()),(Object.keys(z).length||pd(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ie}=T;ie&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ie(this._map))},this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sp(i),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,C]of this._listeners)P.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[i,d,f]of this._listeners)P.removeEventListener(i,d,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const d=this._map,f=d.getCanvasContainer();this._add("mapEvent",new Mg(d,i));const m=d.boxZoom=new to(d,i);this._add("boxZoom",m),i.interactive&&i.boxZoom&&m.enable();const y=d.cooperativeGestures=new Al(d,i.cooperativeGestures);this._add("cooperativeGestures",y),i.cooperativeGestures&&y.enable();const C=new Pl(d),T=new t_(d);d.doubleClickZoom=new Ns(T,C),this._add("tapZoom",C),this._add("clickZoom",T),i.interactive&&i.doubleClickZoom&&d.doubleClickZoom.enable();const M=new n_;this._add("tapDragZoom",M);const z=d.touchPitch=new Ml(d);this._add("touchPitch",z),i.interactive&&i.touchPitch&&d.touchPitch.enable(i.touchPitch);const N=Tp(i),j=Ip(i);d.dragRotate=new Rg(i,N,j),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",j,["mouseRotate"]),i.interactive&&i.dragRotate&&d.dragRotate.enable();const X=(({enable:ve,clickTolerance:ue})=>{const be=new ud({checkCorrectEvent:Ee=>P.mouseButton(Ee)===0&&!Ee.ctrlKey});return new $a({clickTolerance:ue,move:(Ee,Me)=>({around:Me,panDelta:Me.sub(Ee)}),activateOnStart:!0,moveStateManager:be,enable:ve,assignEvents:cd})})(i),ee=new Fs(i,d);d.dragPan=new Lg(f,X,ee),this._add("mousePan",X),this._add("touchPan",ee,["touchZoom","touchRotate"]),i.interactive&&i.dragPan&&d.dragPan.enable(i.dragPan);const ie=new Lp,he=new Mp;d.touchZoomRotate=new zp(f,he,ie,M),this._add("touchRotate",ie,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),i.interactive&&i.touchZoomRotate&&d.touchZoomRotate.enable(i.touchZoomRotate);const ge=d.scrollZoom=new jo(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ge,["mousePan"]),i.interactive&&i.scrollZoom&&d.scrollZoom.enable(i.scrollZoom);const ye=d.keyboard=new wo(d);this._add("keyboard",ye),i.interactive&&i.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new xr(d))}_add(i,d,f){this._handlers.push({handlerName:i,handler:d,allowed:f}),this._handlersById[i]=d}stop(i){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!So(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,d,f){for(const m in i)if(m!==f&&(!d||d.indexOf(m)<0))return!0;return!1}_getMapTouches(i){const d=[];for(const f of i)this._el.contains(f.target)&&d.push(f);return d}mergeHandlerResult(i,d,f,m,y){if(!f)return;l.e(i,f);const C={handlerName:m,originalEvent:f.originalEvent||y};f.zoomDelta!==void 0&&(d.zoom=C),f.panDelta!==void 0&&(d.drag=C),f.pitchDelta!==void 0&&(d.pitch=C),f.bearingDelta!==void 0&&(d.rotate=C)}_applyChanges(){const i={},d={},f={};for(const[m,y,C]of this._changes)m.panDelta&&(i.panDelta=(i.panDelta||new l.P(0,0))._add(m.panDelta)),m.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(i.around=m.around),m.pinchAround!==void 0&&(i.pinchAround=m.pinchAround),m.noInertia&&(i.noInertia=m.noInertia),l.e(d,y),l.e(f,C);this._updateMapTransform(i,d,f),this._changes=[]}_updateMapTransform(i,d,f){const m=this._map,y=m._getTransformForUpdate(),C=m.terrain;if(!(pd(i)||C&&this._terrainMovement))return this._fireEvents(d,f,!0);let{panDelta:T,zoomDelta:M,bearingDelta:z,pitchDelta:N,around:j,pinchAround:X}=i;X!==void 0&&(j=X),m._stop(!0),j=j||m.transform.centerPoint;const ee=y.pointLocation(T?j.sub(T):j);z&&(y.bearing+=z),N&&(y.pitch+=N),M&&(y.zoom+=M),C?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(T)):y.setLocationAtPoint(ee,j):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ee,j)):y.setLocationAtPoint(ee,j),m._applyUpdatedTransform(y),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(d,f,!0)}_fireEvents(i,d,f){const m=So(this._eventsInProgress),y=So(i),C={};for(const j in i){const{originalEvent:X}=i[j];this._eventsInProgress[j]||(C[`${j}start`]=X),this._eventsInProgress[j]=i[j]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const j in C)this._fireEvent(j,C[j]);y&&this._fireEvent("move",y.originalEvent);for(const j in i){const{originalEvent:X}=i[j];this._fireEvent(j,X)}const T={};let M;for(const j in this._eventsInProgress){const{handlerName:X,originalEvent:ee}=this._eventsInProgress[j];this._handlersById[X].isActive()||(delete this._eventsInProgress[j],M=d[X]||ee,T[`${j}end`]=M)}for(const j in T)this._fireEvent(j,T[j]);const z=So(this._eventsInProgress),N=(m||y)&&!z;if(N&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const j=this._map._getTransformForUpdate();j.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(j)}if(f&&N){this._updatingCamera=!0;const j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!j||!j.essential&&k.prefersReducedMotion?(this._map.fire(new l.k("moveend",{originalEvent:M})),X(this._map.getBearing())&&this._map.resetNorth()):(X(j.bearing||this._map.getBearing())&&(j.bearing=0),j.freezeElevation=!0,this._map.easeTo(j,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(i,d){this._map.fire(new l.k(i,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new yt("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class zg extends l.E{constructor(i,d){super(),this._renderFrameCallback=()=>{const f=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new l.N(this.transform.center.lng,this.transform.center.lat)}setCenter(i,d){return this.jumpTo({center:i},d)}panBy(i,d,f){return i=l.P.convert(i).mult(-1),this.panTo(this.transform.center,l.e({offset:i},d),f)}panTo(i,d,f){return this.easeTo(l.e({center:i},d),f)}getZoom(){return this.transform.zoom}setZoom(i,d){return this.jumpTo({zoom:i},d),this}zoomTo(i,d,f){return this.easeTo(l.e({zoom:i},d),f)}zoomIn(i,d){return this.zoomTo(this.getZoom()+1,i,d),this}zoomOut(i,d){return this.zoomTo(this.getZoom()-1,i,d),this}getBearing(){return this.transform.bearing}setBearing(i,d){return this.jumpTo({bearing:i},d),this}getPadding(){return this.transform.padding}setPadding(i,d){return this.jumpTo({padding:i},d),this}rotateTo(i,d,f){return this.easeTo(l.e({bearing:i},d),f)}resetNorth(i,d){return this.rotateTo(0,l.e({duration:1e3},i),d),this}resetNorthPitch(i,d){return this.easeTo(l.e({bearing:0,pitch:0,duration:1e3},i),d),this}snapToNorth(i,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,d):this}getPitch(){return this.transform.pitch}setPitch(i,d){return this.jumpTo({pitch:i},d),this}cameraForBounds(i,d){i=Se.convert(i).adjustAntiMeridian();const f=d&&d.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,d)}_cameraForBoxAndBearing(i,d,f,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=l.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Qe=m.padding;m.padding={top:Qe,bottom:Qe,right:Qe,left:Qe}}m.padding=l.e(y,m.padding);const C=this.transform,T=C.padding,M=new Se(i,d),z=C.project(M.getNorthWest()),N=C.project(M.getNorthEast()),j=C.project(M.getSouthEast()),X=C.project(M.getSouthWest()),ee=l.ba(-f),ie=z.rotate(ee),he=N.rotate(ee),ge=j.rotate(ee),ye=X.rotate(ee),ve=new l.P(Math.max(ie.x,he.x,ye.x,ge.x),Math.max(ie.y,he.y,ye.y,ge.y)),ue=new l.P(Math.min(ie.x,he.x,ye.x,ge.x),Math.min(ie.y,he.y,ye.y,ge.y)),be=ve.sub(ue),Ee=(C.width-(T.left+T.right+m.padding.left+m.padding.right))/be.x,Me=(C.height-(T.top+T.bottom+m.padding.top+m.padding.bottom))/be.y;if(Me<0||Ee<0)return void l.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const je=Math.min(C.scaleZoom(C.scale*Math.min(Ee,Me)),m.maxZoom),Ze=l.P.convert(m.offset),it=new l.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(l.ba(f)),pt=Ze.add(it).mult(C.scale/C.zoomScale(je));return{center:C.unproject(z.add(j).div(2).sub(pt)),zoom:je,bearing:f}}fitBounds(i,d,f){return this._fitInternal(this.cameraForBounds(i,d),d,f)}fitScreenCoordinates(i,d,f,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.P.convert(i)),this.transform.pointLocation(l.P.convert(d)),f,m),m,y)}_fitInternal(i,d,f){return i?(delete(d=l.e(i,d)).padding,d.linear?this.easeTo(d,f):this.flyTo(d,f)):this}jumpTo(i,d){this.stop();const f=this._getTransformForUpdate();let m=!1,y=!1,C=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(m=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=l.N.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(y=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(C=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this._applyUpdatedTransform(f),this.fire(new l.k("movestart",d)).fire(new l.k("move",d)),m&&this.fire(new l.k("zoomstart",d)).fire(new l.k("zoom",d)).fire(new l.k("zoomend",d)),y&&this.fire(new l.k("rotatestart",d)).fire(new l.k("rotate",d)).fire(new l.k("rotateend",d)),C&&this.fire(new l.k("pitchstart",d)).fire(new l.k("pitch",d)).fire(new l.k("pitchend",d)),this.fire(new l.k("moveend",d))}calculateCameraOptionsFromTo(i,d,f,m=0){const y=l.Z.fromLngLat(i,d),C=l.Z.fromLngLat(f,m),T=C.x-y.x,M=C.y-y.y,z=C.z-y.z,N=Math.hypot(T,M,z);if(N===0)throw new Error("Can't calculate camera options with same From and To");const j=Math.hypot(T,M),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/N/this.transform.tileSize),ee=180*Math.atan2(T,-M)/Math.PI;let ie=180*Math.acos(j/N)/Math.PI;return ie=z<0?90-ie:90+ie,{center:C.toLngLat(),zoom:X,pitch:ie,bearing:ee}}easeTo(i,d){var f;this._stop(!1,i.easeId),((i=l.e({offset:[0,0],duration:500,easing:l.b9},i)).animate===!1||!i.essential&&k.prefersReducedMotion)&&(i.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in i?this._normalizeBearing(i.bearing,C):C,N="pitch"in i?+i.pitch:T,j="padding"in i?i.padding:m.padding,X=l.P.convert(i.offset);let ee=m.centerPoint.add(X);const ie=m.pointLocation(ee),{center:he,zoom:ge}=m.getConstrained(l.N.convert(i.center||ie),(f=i.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(he,m);const ye=m.project(ie),ve=m.project(he).sub(ye),ue=m.zoomScale(ge-y);let be,Ee;i.around&&(be=l.N.convert(i.around),Ee=m.locationPoint(be));const Me={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ge!==y,this._rotating=this._rotating||C!==z,this._pitching=this._pitching||N!==T,this._padding=!m.isPaddingEqual(j),this._easeId=i.easeId,this._prepareEase(d,i.noMoveStart,Me),this.terrain&&this._prepareElevation(he),this._ease(je=>{if(this._zooming&&(m.zoom=l.y.number(y,ge,je)),this._rotating&&(m.bearing=l.y.number(C,z,je)),this._pitching&&(m.pitch=l.y.number(T,N,je)),this._padding&&(m.interpolatePadding(M,j,je),ee=m.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(je),be)m.setLocationAtPoint(be,Ee);else{const Ze=m.zoomScale(m.zoom-y),it=ge>y?Math.min(2,ue):Math.max(.5,ue),pt=Math.pow(it,1-je),Qe=m.unproject(ye.add(ve.mult(je*pt)).mult(Ze));m.setLocationAtPoint(m.renderWorldCopies?Qe.wrap():Qe,ee)}this._applyUpdatedTransform(m),this._fireMoveEvents(d)},je=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(d,je)},i),this}_prepareEase(i,d,f={}){this._moving=!0,d||f.moving||this.fire(new l.k("movestart",i)),this._zooming&&!f.zooming&&this.fire(new l.k("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new l.k("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new l.k("pitchstart",i))}_prepareElevation(i){this._elevationCenter=i,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(i,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(i){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(i<1&&d!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=i*(f-(d-(f*i+this._elevationStart))/(1-i)),this._elevationTarget=d}this.transform.elevation=l.y.number(this._elevationStart,this._elevationTarget,i)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(i){const d=i.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(d.lngLat,i.zoom);if(d.altitude<f){const m=this.calculateCameraOptionsFromTo(d.lngLat,f,i.center,i.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(i){const d=[];if(this.terrain&&d.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&d.push(m=>this.transformCameraUpdate(m)),!d.length)return;const f=i.clone();for(const m of d){const y=f.clone(),{center:C,zoom:T,pitch:M,bearing:z,elevation:N}=m(y);C&&(y.center=C),T!==void 0&&(y.zoom=T),M!==void 0&&(y.pitch=M),z!==void 0&&(y.bearing=z),N!==void 0&&(y.elevation=N),f.apply(y)}this.transform.apply(f)}_fireMoveEvents(i){this.fire(new l.k("move",i)),this._zooming&&this.fire(new l.k("zoom",i)),this._rotating&&this.fire(new l.k("rotate",i)),this._pitching&&this.fire(new l.k("pitch",i))}_afterEase(i,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;const f=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.k("zoomend",i)),m&&this.fire(new l.k("rotateend",i)),y&&this.fire(new l.k("pitchend",i)),this.fire(new l.k("moveend",i))}flyTo(i,d){var f;if(!i.essential&&k.prefersReducedMotion){const ut=l.M(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ut,d)}this.stop(),i=l.e({offset:[0,0],speed:1.2,curve:1.42,easing:l.b9},i);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in i?this._normalizeBearing(i.bearing,C):C,N="pitch"in i?+i.pitch:T,j="padding"in i?i.padding:m.padding,X=l.P.convert(i.offset);let ee=m.centerPoint.add(X);const ie=m.pointLocation(ee),{center:he,zoom:ge}=m.getConstrained(l.N.convert(i.center||ie),(f=i.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(he,m);const ye=m.zoomScale(ge-y),ve=m.project(ie),ue=m.project(he).sub(ve);let be=i.curve;const Ee=Math.max(m.width,m.height),Me=Ee/ye,je=ue.mag();if("minZoom"in i){const ut=l.ac(Math.min(i.minZoom,y,ge),m.minZoom,m.maxZoom),Ft=Ee/m.zoomScale(ut-y);be=Math.sqrt(Ft/je*2)}const Ze=be*be;function it(ut){const Ft=(Me*Me-Ee*Ee+(ut?-1:1)*Ze*Ze*je*je)/(2*(ut?Me:Ee)*Ze*je);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function pt(ut){return(Math.exp(ut)-Math.exp(-ut))/2}function Qe(ut){return(Math.exp(ut)+Math.exp(-ut))/2}const Je=it(!1);let bt=function(ut){return Qe(Je)/Qe(Je+be*ut)},Ut=function(ut){return Ee*((Qe(Je)*(pt(Ft=Je+be*ut)/Qe(Ft))-pt(Je))/Ze)/je;var Ft},nt=(it(!0)-Je)/be;if(Math.abs(je)<1e-6||!isFinite(nt)){if(Math.abs(Ee-Me)<1e-6)return this.easeTo(i,d);const ut=Me<Ee?-1:1;nt=Math.abs(Math.log(Me/Ee))/be,Ut=()=>0,bt=Ft=>Math.exp(ut*be*Ft)}return i.duration="duration"in i?+i.duration:1e3*nt/("screenSpeed"in i?+i.screenSpeed/be:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=C!==z,this._pitching=N!==T,this._padding=!m.isPaddingEqual(j),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(he),this._ease(ut=>{const Ft=ut*nt,Yn=1/bt(Ft);m.zoom=ut===1?ge:y+m.scaleZoom(Yn),this._rotating&&(m.bearing=l.y.number(C,z,ut)),this._pitching&&(m.pitch=l.y.number(T,N,ut)),this._padding&&(m.interpolatePadding(M,j,ut),ee=m.centerPoint.add(X)),this.terrain&&!i.freezeElevation&&this._updateElevation(ut);const Ht=ut===1?he:m.unproject(ve.add(ue.mult(Ut(Ft))).mult(Yn));m.setLocationAtPoint(m.renderWorldCopies?Ht.wrap():Ht,ee),this._applyUpdatedTransform(m),this._fireMoveEvents(d)},()=>{this.terrain&&i.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,d){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,d)}return i||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(i,d,f){f.animate===!1||f.duration===0?(i(1),d()):(this._easeStart=k.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(i,d){i=l.b3(i,-180,180);const f=Math.abs(i-d);return Math.abs(i-360-d)<f&&(i-=360),Math.abs(i+360-d)<f&&(i+=360),i}_normalizeCenter(i,d){if(!d.renderWorldCopies||d.lngRange)return;const f=i.lng-d.center.lng;i.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(i){return this.terrain?this.terrain.getElevationForLngLatZoom(l.N.convert(i),this.transform.tileZoom)-this.transform.elevation:null}}const Ll={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Rl{constructor(i=Ll){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=i}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,d){const f=this._map._getUIString(`AttributionControl.${d}`);i.title=f,i.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const d=this._map.style.sourceCaches;for(const m in d){const y=d[m];if(y.used||y.usedForTerrain){const C=y.getSource();C.attribution&&i.indexOf(C.attribution)<0&&i.push(C.attribution)}}i=i.filter(m=>String(m).trim()),i.sort((m,y)=>m.length-y.length),i=i.filter((m,y)=>{for(let C=y+1;C<i.length;C++)if(i[C].indexOf(m)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class $p{constructor(i={}){this._updateCompact=()=>{const d=this._container.children;if(d.length){const f=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=i}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const d=P.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class sn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const d=++this._id;return this._queue.push({callback:i,id:d,cancelled:!1}),d}remove(i){const d=this._currentlyRunning,f=d?this._queue.concat(d):this._queue;for(const m of f)if(m.id===i)return void(m.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const f of d)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Op=l.Y([{name:"a_pos3d",type:"Int16",components:3}]);class r_ extends l.E{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(i,d){this.sourceCache.update(i,d),this._renderableTilesKeys=[];const f={};for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),l.aP(m.posMatrix,0,l.X,0,l.X,0,1),this._tiles[m.key]=new Rr(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(i){for(const d in this._tiles){const f=this._tiles[d];(!i||f.tileID.equals(i)||f.tileID.isChildOf(i)||i.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const d={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16),l.aP(y.posMatrix,0,l.X,0,l.X,0,1),d[f]=y}else if(m.canonical.isChildOf(i.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const C=m.canonical.z-i.canonical.z,T=m.canonical.x-(m.canonical.x>>C<<C),M=m.canonical.y-(m.canonical.y>>C<<C),z=l.X>>C;l.aP(y.posMatrix,0,z,0,z,0,1),l.J(y.posMatrix,y.posMatrix,[-T*z,-M*z,0]),d[f]=y}else if(i.canonical.isChildOf(m.canonical)){const y=i.clone();y.posMatrix=new Float64Array(16);const C=i.canonical.z-m.canonical.z,T=i.canonical.x-(i.canonical.x>>C<<C),M=i.canonical.y-(i.canonical.y>>C<<C),z=l.X>>C;l.aP(y.posMatrix,0,l.X,0,l.X,0,1),l.J(y.posMatrix,y.posMatrix,[T*z,M*z,0]),l.K(y.posMatrix,y.posMatrix,[1/2**C,1/2**C,0]),d[f]=y}}return d}getSourceTile(i,d){const f=this.sourceCache._source;let m=i.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!y||!y.dem)&&d)for(;m>=f.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(i.scaledTo(m--).key);return y}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=i)}}class Bp{constructor(i,d,f){this.painter=i,this.sourceCache=new r_(d),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(i,d,f,m=l.X){var y;if(!(d>=0&&d<m&&f>=0&&f<m))return 0;const C=this.getTerrainData(i),T=(y=C.tile)===null||y===void 0?void 0:y.dem;if(!T)return 0;const M=function(ie,he,ge){var ye=he[0],ve=he[1];return ie[0]=ge[0]*ye+ge[4]*ve+ge[12],ie[1]=ge[1]*ye+ge[5]*ve+ge[13],ie}([],[d/m*l.X,f/m*l.X],C.u_terrain_matrix),z=[M[0]*T.dim,M[1]*T.dim],N=Math.floor(z[0]),j=Math.floor(z[1]),X=z[0]-N,ee=z[1]-j;return T.get(N,j)*(1-X)*(1-ee)+T.get(N+1,j)*X*(1-ee)+T.get(N,j+1)*(1-X)*ee+T.get(N+1,j+1)*X*ee}getElevationForLngLatZoom(i,d){if(!l.bb(d,i.wrap()))return 0;const{tileID:f,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(i,d);return this.getElevation(f,m%l.X,y%l.X,l.X)}getElevation(i,d,f,m=l.X){return this.getDEMElevation(i,d,f,m)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const m=this.painter.context,y=new l.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ce(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ce(m,new l.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.an([])}const d=this.sourceCache.getSourceTile(i,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const m=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new Ce(m,d.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),d.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const f=d&&d+d.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=i.canonical.z-d.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=m?y=i.canonical.z-m:l.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=i.canonical.x-(i.canonical.x>>y<<y),T=i.canonical.y-(i.canonical.y>>y<<y),M=l.bc(new Float64Array(16),[1/(l.X<<y),1/(l.X<<y),0]);l.J(M,M,[C*l.X,T*l.X,0]),this._demMatrixCache[i.key]={matrix:M,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(i){const d=this.painter,f=d.width/devicePixelRatio,m=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ce(d.context,{width:f,height:m,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ce(d.context,{width:f,height:m,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,C=0;y<this._coordsTextureSize;y++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)d[C+0]=255&T,d[C+1]=255&y,d[C+2]=T>>8<<4|y>>8,d[C+3]=0;const f=new l.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),m=new Ce(i,f,i.gl.RGBA,{premultiply:!1});return m.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(i){this.painter.maybeDrawDepthAndCoords(!0);const d=new Uint8Array(4),f=this.painter.context,m=f.gl,y=Math.round(i.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(i.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,T-C-1,1,1,m.RGBA,m.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null);const M=d[0]+(d[2]>>4<<8),z=d[1]+((15&d[2])<<8),N=this.coordsIndex[255-d[3]],j=N&&this.sourceCache.getTileByID(N);if(!j)return null;const X=this._coordsTextureSize,ee=(1<<j.tileID.canonical.z)*X;return new l.Z((j.tileID.canonical.x*X+M)/ee+j.tileID.wrap,(j.tileID.canonical.y*X+z)/ee,this.getElevation(j.tileID,M,z,X))}depthAtPoint(i){const d=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(i.x,this.painter.height/devicePixelRatio-i.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,d),f.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.painter.context,d=new l.bd,f=new l.aY,m=this.meshSize,y=l.X/m,C=m*m;for(let j=0;j<=m;j++)for(let X=0;X<=m;X++)d.emplaceBack(X*y,j*y,0);for(let j=0;j<C;j+=m+1)for(let X=0;X<m;X++)f.emplaceBack(X+j,m+X+j+1,m+X+j+2),f.emplaceBack(X+j,m+X+j+2,X+j+1);const T=d.length,M=T+2*(m+1);for(const j of[0,1])for(let X=0;X<=m;X++)for(const ee of[0,1])d.emplaceBack(X*y,j*l.X,ee);for(let j=0;j<2*m;j+=2)f.emplaceBack(M+j,M+j+1,M+j+3),f.emplaceBack(M+j,M+j+3,M+j+2),f.emplaceBack(T+j,T+j+3,T+j+1),f.emplaceBack(T+j,T+j+2,T+j+3);const z=d.length,N=z+2*(m+1);for(const j of[0,1])for(let X=0;X<=m;X++)for(const ee of[0,1])d.emplaceBack(j*l.X,X*y,ee);for(let j=0;j<2*m;j+=2)f.emplaceBack(z+j,z+j+1,z+j+3),f.emplaceBack(z+j,z+j+3,z+j+2),f.emplaceBack(N+j,N+j+3,N+j+1),f.emplaceBack(N+j,N+j+2,N+j+3);return this._mesh=new rd(i.createVertexBuffer(d,Op.members),i.createIndexBuffer(f),l.a0.simpleSegment(0,0,d.length,f.length)),this._mesh}getMeshFrameDelta(i){return 2*Math.PI*l.be/Math.pow(2,i)/5}getMinTileElevationForLngLatZoom(i,d){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(i,d);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(i){const d=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return d&&d.dem&&(f.minElevation=d.dem.min*this.exaggeration,f.maxElevation=d.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(i,d){const f=l.Z.fromLngLat(i.wrap()),m=(1<<d)*l.X,y=f.x*m,C=f.y*m,T=Math.floor(y/l.X),M=Math.floor(C/l.X);return{tileID:new l.S(d,0,d,T,M),mercatorX:y,mercatorY:C}}}class i_{constructor(i,d,f){this._context=i,this._size=d,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const i of this._objects)i.texture.destroy(),i.fbo.destroy()}_createObject(i){const d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ce(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(f.texture),{id:i,fbo:d,texture:f,stamp:-1,inUse:!1}}getObjectForId(i){return this._objects[i]}useObject(i){i.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>i.id!==d),this._recentlyUsed.push(i.id)}stampObject(i){i.stamp=++this._stamp}getOrCreateFreeObject(){for(const d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const i=this._createObject(this._objects.length);return this._objects.push(i),i}freeObject(i){i.inUse=!1}freeAllObjects(){for(const i of this._objects)this.freeObject(i)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(i=>!i.inUse)===!1}}const zl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Dg{constructor(i,d){this.painter=i,this.terrain=d,this.pool=new i_(i.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(i){return this.pool.getObjectForId(i.rtt[this._stacks.length-1].id).texture}prepareForRender(i,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=i._order.filter(f=>!i._layers[f].isHidden(d)),this._coordsDescendingInv={};for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const m=i.sourceCaches[f].getVisibleCoordinates();for(const y of m){const C=this.terrain.sourceCache.getTerrainCoords(y);for(const T in C)this._coordsDescendingInv[f][T]||(this._coordsDescendingInv[f][T]=[]),this._coordsDescendingInv[f][T].push(C[T])}}this._coordsDescendingInvStr={};for(const f of i._order){const m=i._layers[f],y=m.source;if(zl[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const C in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][C]=this._coordsDescendingInv[y][C].map(T=>T.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][f.tileID.key];y&&y!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(i){if(i.isHidden(this.painter.transform.zoom))return!1;const d=i.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===i.id;if(zl[d]&&(this._prevType&&zl[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(i.id),!m))return!0;if(zl[this._prevType]||zl[d]&&m){this._prevType=d;const y=this._stacks.length-1,C=this._stacks[y]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(Tg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[y]){const z=this.pool.getObjectForId(T.rtt[y].id);if(z.stamp===T.rtt[y].stamp){this.pool.useObject(z);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),T.rtt[y]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:l.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let z=0;z<C.length;z++){const N=f.style._layers[C[z]],j=N.source?this._coordsDescendingInv[N.source][T.tileID.key]:[T.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(N,j),f.renderLayer(f,f.style.sourceCaches[N.source],N,j),N.source&&(T.rttCoords[N.source]=this._coordsDescendingInvStr[N.source][T.tileID.key])}}return Tg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),zl[d]}return!1}}const Fp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},$g=b,o_={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ll,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:l.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Np=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},a_={showCompass:!0,showZoom:!0,visualizePitch:!1};class s_{constructor(i,d,f=!1){this.mousedown=C=>{this.startMouse(l.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),P.mousePos(this.element,C)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,P.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=i.dragRotate._mouseRotate.getClickTolerance(),y=i.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=Tp({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:M=.8})=>{const z=new Ep;return new $a({clickTolerance:T,move:(N,j)=>({bearingDelta:(j.x-N.x)*M}),moveStateManager:z,enable:C,assignEvents:Np})})({clickTolerance:m,enable:!0}),this.map=i,f&&(this.mousePitch=Ip({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:M=-.5})=>{const z=new Ep;return new $a({clickTolerance:T,move:(N,j)=>({pitchDelta:(j.y-N.y)*M}),moveStateManager:z,enable:C,assignEvents:Np})})({clickTolerance:y,enable:!0})),P.addEventListener(d,"mousedown",this.mousedown),P.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(d,"touchcancel",this.reset)}startMouse(i,d){this.mouseRotate.dragStart(i,d),this.mousePitch&&this.mousePitch.dragStart(i,d),P.disableDrag()}startTouch(i,d){this.touchRotate.dragStart(i,d),this.touchPitch&&this.touchPitch.dragStart(i,d),P.disableDrag()}moveMouse(i,d){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(i,d)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(i,d)||{};y&&f.setPitch(f.getPitch()+y)}}moveTouch(i,d){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(i,d)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(i,d)||{};y&&f.setPitch(f.getPitch()+y)}}off(){const i=this.element;P.removeEventListener(i,"mousedown",this.mousedown),P.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let no;function Xn(v,i,d){const f=new l.N(v.lng,v.lat);if(v=new l.N(v.lng,v.lat),i){const m=new l.N(v.lng-360,v.lat),y=new l.N(v.lng+360,v.lat),C=d.locationPoint(v).distSqr(i);d.locationPoint(m).distSqr(i)<C?v=m:d.locationPoint(y).distSqr(i)<C&&(v=y)}for(;Math.abs(v.lng-d.center.lng)>180;){const m=d.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=d.width&&m.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&d.locationPoint(v).y>d.height/2-d.getHorizon()?v:f}const Dl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function fd(v,i,d){const f=v.classList;for(const m in Dl)f.remove(`maplibregl-${d}-anchor-${m}`);f.add(`maplibregl-${d}-anchor-${i}`)}class md extends l.E{constructor(i){if(super(),this._onKeyPress=d=>{const f=d.code,m=d.charCode||d.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=d=>{const f=d.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=d=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Xn(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${Dl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${y}`),k.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.k("dragstart"))),this.fire(new l.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._subpixelPositioning=i&&i.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(i==null?void 0:i.opacity,i==null?void 0:i.opacityWhenCovered),i&&i.element)this._element=i.element,this._offset=l.P.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const d=P.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${f}px`),d.setAttributeNS(null,"width",`${m}px`),d.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const y=P.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const C=P.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=P.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ye of M){const ve=P.createNS("http://www.w3.org/2000/svg","ellipse");ve.setAttributeNS(null,"opacity","0.04"),ve.setAttributeNS(null,"cx","10.5"),ve.setAttributeNS(null,"cy","5.80029008"),ve.setAttributeNS(null,"rx",ye.rx),ve.setAttributeNS(null,"ry",ye.ry),T.appendChild(ve)}const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const N=P.createNS("http://www.w3.org/2000/svg","path");N.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(N);const j=P.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");const X=P.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(X);const ee=P.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ie=P.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(8.0, 8.0)");const he=P.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");const ge=P.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ie.appendChild(he),ie.appendChild(ge),C.appendChild(T),C.appendChild(z),C.appendChild(j),C.appendChild(ee),C.appendChild(ie),d.appendChild(C),d.setAttributeNS(null,"height",f*this._scale+"px"),d.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(d),this._offset=l.P.convert(i&&i.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),fd(this._element,this._anchor,"marker"),i&&i.className)for(const d of i.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(i){return this.remove(),this._map=i,this._element.setAttribute("aria-label",i._getUIString("Marker.Title")),i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),i.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.N.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const m=Math.abs(13.5)/Math.SQRT2;i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(i){return this._subpixelPositioning=i,this}getPopup(){return this._popup}togglePopup(){const i=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:i?(i.isOpen()?i.remove():(i.setLngLat(this._lngLat),i.addTo(this._map)),this):this}_updateOpacity(i=!1){var d,f;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(i)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),C=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,C)-y<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*T,z=m.terrain.depthAtPoint(new l.P(this._pos.x,this._pos.y-this._offset.y)),N=m.transform.lngLatToCameraDepth(this._lngLat,C+M)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&N&&this._popup.remove(),this._element.style.opacity=N?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(i){return this._offset=l.P.convert(i),this._update(),this}addClassName(i){this._element.classList.add(i)}removeClassName(i){this._element.classList.remove(i)}toggleClassName(i){return this._element.classList.toggle(i)}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(i,d){return i===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),i!==void 0&&(this._opacity=i),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}const Og={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Wu=0,qu=!1;const pa={maxWidth:100,unit:"metric"};function Hu(v,i,d){const f=d&&d.maxWidth||100,m=v._container.clientHeight/2,y=v.unproject([0,m]),C=v.unproject([f,m]),T=y.distanceTo(C);if(d&&d.unit==="imperial"){const M=3.2808*T;M>5280?xt(i,f,M/5280,v._getUIString("ScaleControl.Miles")):xt(i,f,M,v._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?xt(i,f,T/1852,v._getUIString("ScaleControl.NauticalMiles")):T>=1e3?xt(i,f,T/1e3,v._getUIString("ScaleControl.Kilometers")):xt(i,f,T,v._getUIString("ScaleControl.Meters"))}function xt(v,i,d,f){const m=function(y){const C=Math.pow(10,`${Math.floor(y)}`.length-1);let T=y/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(T),C*T}(d);v.style.width=i*(m/d)+"px",v.innerHTML=`${m}&nbsp;${f}`}const Rt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},gd=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function yd(v){if(v){if(typeof v=="number"){const i=Math.round(Math.abs(v)/Math.SQRT2);return{center:new l.P(0,0),top:new l.P(0,v),"top-left":new l.P(i,i),"top-right":new l.P(-i,i),bottom:new l.P(0,-v),"bottom-left":new l.P(i,-i),"bottom-right":new l.P(-i,-i),left:new l.P(v,0),right:new l.P(-v,0)}}if(v instanceof l.P||Array.isArray(v)){const i=l.P.convert(v);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.P.convert(v.center||[0,0]),top:l.P.convert(v.top||[0,0]),"top-left":l.P.convert(v["top-left"]||[0,0]),"top-right":l.P.convert(v["top-right"]||[0,0]),bottom:l.P.convert(v.bottom||[0,0]),"bottom-left":l.P.convert(v["bottom-left"]||[0,0]),"bottom-right":l.P.convert(v["bottom-right"]||[0,0]),left:l.P.convert(v.left||[0,0]),right:l.P.convert(v.right||[0,0])}}return yd(new l.P(0,0))}const jp=b;h.AJAXError=l.bh,h.Evented=l.E,h.LngLat=l.N,h.MercatorCoordinate=l.Z,h.Point=l.P,h.addProtocol=l.bi,h.config=l.a,h.removeProtocol=l.bj,h.AttributionControl=Rl,h.BoxZoomHandler=to,h.CanvasSource=yr,h.CooperativeGesturesHandler=Al,h.DoubleClickZoomHandler=Ns,h.DragPanHandler=Lg,h.DragRotateHandler=Rg,h.EdgeInsets=Tl,h.FullscreenControl=class extends l.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var i;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((i=d==null?void 0:d.shadowRoot)===null||i===void 0)&&i.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:l.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new l.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new l.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=fn,h.GeolocateControl=class extends l.E{constructor(v){super(),this._onSuccess=i=>{if(this._map){if(this._isOutOfMapMaxBounds(i))return this._setErrorState(),this.fire(new l.k("outofmaxbounds",i)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=i,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(i),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(i),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new l.k("geolocate",i)),this._finish()}},this._updateCamera=i=>{const d=new l.N(i.coords.longitude,i.coords.latitude),f=i.coords.accuracy,m=this._map.getBearing(),y=l.e({bearing:m},this.options.fitBoundsOptions),C=Se.fromLngLat(d,f);this._map.fitBounds(C,y,{geolocateSource:!0})},this._updateMarker=i=>{if(i){const d=new l.N(i.coords.longitude,i.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=i.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=i=>{if(this._map){if(this.options.trackUserLocation)if(i.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(i.code===3&&qu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new l.k("error",i)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=i=>{if(this._map){if(i===!1){l.w("Geolocation support is not available so the GeolocateControl will be disabled.");const d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{const d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new md({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new md({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new l.k("trackuserlocationend")),this.fire(new l.k("userlocationlostfocus")))})}},this.options=l.e({},Og,v)}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return l._(this,arguments,void 0,function*(i=!1){if(no!==void 0&&!i)return no;if(window.navigator.permissions===void 0)return no=!!window.navigator.geolocation,no;try{no=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{no=!!window.navigator.geolocation}return no})}().then(i=>this._finishSetupUI(i)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Wu=0,qu=!1}_isOutOfMapMaxBounds(v){const i=this._map.getMaxBounds(),d=v.coords;return i&&(d.longitude<i.getWest()||d.longitude>i.getEast()||d.latitude<i.getSouth()||d.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),i=v.getSouthEast(),d=v.getNorthEast(),f=i.distanceTo(d),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return l.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Wu--,qu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new l.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.k("trackuserlocationstart")),this.fire(new l.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Wu++,Wu>1?(v={maximumAge:6e5,timeout:0},qu=!0):(v=this.options.positionOptions,qu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.Hash=od,h.ImageSource=Ct,h.KeyboardHandler=wo,h.LngLatBounds=Se,h.LogoControl=$p,h.Map=class extends zg{constructor(v){l.bf.mark(l.bg.create);const i=Object.assign(Object.assign({},o_),v);if(i.minZoom!=null&&i.maxZoom!=null&&i.minZoom>i.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(i.minPitch!=null&&i.maxPitch!=null&&i.minPitch>i.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(i.minPitch!=null&&i.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(i.maxPitch!=null&&i.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Il(i.minZoom,i.maxZoom,i.minPitch,i.maxPitch,i.renderWorldCopies),{bearingSnap:i.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new sn,this._controls=[],this._mapId=l.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new l.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new l.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=i.interactive,this._maxTileCacheSize=i.maxTileCacheSize,this._maxTileCacheZoomLevels=i.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=i.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=i.preserveDrawingBuffer===!0,this._antialias=i.antialias===!0,this._trackResize=i.trackResize===!0,this._bearingSnap=i.bearingSnap,this._refreshExpiredTiles=i.refreshExpiredTiles===!0,this._fadeDuration=i.fadeDuration,this._crossSourceCollisions=i.crossSourceCollisions===!0,this._collectResourceTiming=i.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Fp),i.locale),this._clickTolerance=i.clickTolerance,this._overridePixelRatio=i.pixelRatio,this._maxCanvasSize=i.maxCanvasSize,this.transformCameraUpdate=i.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=i.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=F.addThrottleControl(()=>this.isMoving()),this._requestManager=new G(i.transformRequest),typeof i.container=="string"){if(this._container=document.getElementById(i.container),!this._container)throw new Error(`Container '${i.container}' not found.`)}else{if(!(i.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=i.container}if(i.maxBounds&&this.setMaxBounds(i.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let d=!1;const f=Fu(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{d?f(m):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Dp(this,i),this._hash=i.hash&&new od(typeof i.hash=="string"&&i.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:i.center,zoom:i.zoom,bearing:i.bearing,pitch:i.pitch}),i.bounds&&(this.resize(),this.fitBounds(i.bounds,l.e({},i.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=i.localIdeographFontFamily,this._validateStyle=i.validateStyle,i.style&&this.setStyle(i.style,{localIdeographFontFamily:i.localIdeographFontFamily}),i.attributionControl&&this.addControl(new Rl(typeof i.attributionControl=="boolean"?void 0:i.attributionControl)),i.maplibreLogo&&this.addControl(new $p,i.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new l.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new l.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new l.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(v,i){if(i===void 0&&(i=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new l.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(d,f.firstChild):f.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new l.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(v);return i>-1&&this._controls.splice(i,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,i,d,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,i,d,f)}resize(v){var i;const d=this._containerDimensions(),f=d[0],m=d[1],y=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,y),this.painter.resize(f,m,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(i=this._requestedCameraState)===null||i===void 0||i.resize(f,m);const C=!this._moving;return C&&(this.stop(),this.fire(new l.k("movestart",v)).fire(new l.k("move",v))),this.fire(new l.k("resize",v)),C&&this.fire(new l.k("moveend",v)),this}_getClampedPixelRatio(v,i){const{0:d,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),y=v*m,C=i*m;return Math.min(y>d?d/y:1,C>f?f/C:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Se.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(l.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(l.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,i,d){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:i,listener:d,delegates:{mousemove:y=>{const C=i.filter(M=>this.getLayer(M)),T=C.length!==0?this.queryRenderedFeatures(y.point,{layers:C}):[];T.length?f||(f=!0,d.call(this,new ui(v,this,y.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:i,listener:d,delegates:{mousemove:C=>{const T=i.filter(M=>this.getLayer(M));(T.length!==0?this.queryRenderedFeatures(C.point,{layers:T}):[]).length?f=!0:f&&(f=!1,d.call(this,new ui(v,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,d.call(this,new ui(v,this,C.originalEvent)))}}}}{const f=m=>{const y=i.filter(T=>this.getLayer(T)),C=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];C.length&&(m.features=C,d.call(this,m),delete m.features)};return{layers:i,listener:d,delegates:{[v]:f}}}}_saveDelegatedListener(v,i){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(i)}_removeDelegatedListener(v,i,d){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const f=this._delegatedListeners[v];for(let m=0;m<f.length;m++){const y=f[m];if(y.listener===d&&y.layers.length===i.length&&y.layers.every(C=>i.includes(C))){for(const C in y.delegates)this.off(C,y.delegates[C]);return void f.splice(m,1)}}}on(v,i,d){if(d===void 0)return super.on(v,i);const f=this._createDelegatedListener(v,typeof i=="string"?[i]:i,d);this._saveDelegatedListener(v,f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(v,i,d){if(d===void 0)return super.once(v,i);const f=typeof i=="string"?[i]:i,m=this._createDelegatedListener(v,f,d);for(const y in m.delegates){const C=m.delegates[y];m.delegates[y]=(...T)=>{this._removeDelegatedListener(v,f,d),C(...T)}}this._saveDelegatedListener(v,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(v,i,d){return d===void 0?super.off(v,i):(this._removeDelegatedListener(v,typeof i=="string"?[i]:i,d),this)}queryRenderedFeatures(v,i){if(!this.style)return[];let d;const f=v instanceof l.P||Array.isArray(v),m=f?v:[[0,0],[this.transform.width,this.transform.height]];if(i=i||(f?{}:v)||{},m instanceof l.P||typeof m[0]=="number")d=[l.P.convert(m)];else{const y=l.P.convert(m[0]),C=l.P.convert(m[1]);d=[y,new l.P(C.x,y.y),C,new l.P(y.x,C.y),y]}return this.style.queryRenderedFeatures(d,i,this.transform)}querySourceFeatures(v,i){return this.style.querySourceFeatures(v,i)}setStyle(v,i){return(i=l.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(v,i))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const i=this._locale[v];if(i==null)throw new Error(`Missing UI string '${v}'`);return i}_updateStyle(v,i){if(i.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,i));const d=this.style&&i.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Uc(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,i,d):this.style.loadJSON(v,i,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Uc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,i){if(typeof v=="string"){const d=this._requestManager.transformRequest(v,"Style");l.h(d,new AbortController).then(f=>{this._updateDiff(f.data,i)}).catch(f=>{f&&this.fire(new l.j(f))})}else typeof v=="object"&&this._updateDiff(v,i)}_updateDiff(v,i){try{this.style.setState(v,i)&&this._update(!0)}catch(d){l.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(v,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.w("There is no style added to the map.")}addSource(v,i){return this._lazyInitEmptyStyle(),this.style.addSource(v,i),this._update(!0)}isSourceLoaded(v){const i=this.style&&this.style.sourceCaches[v];if(i!==void 0)return i.loaded();this.fire(new l.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const i=this.style.sourceCaches[v.source];if(!i)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&i.reload();for(const d in this.style._layers){const f=this.style._layers[d];f.type==="hillshade"&&f.source===v.source&&l.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Bp(this.painter,i,v),this.painter.renderToTexture=new Dg(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new l.k("terrain",{terrain:v})),this}getTerrain(){var v,i;return(i=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&i!==void 0?i:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const i in v){const d=v[i]._tiles;for(const f in d){const m=d[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,i,d={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z}=d;if(this._lazyInitEmptyStyle(),!(i instanceof HTMLImageElement||l.b(i))){if(i.width===void 0||i.height===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:N,height:j,data:X}=i,ee=i;return this.style.addImage(v,{data:new l.R({width:N,height:j},new Uint8Array(X)),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,v),this}}{const{width:N,height:j,data:X}=k.getImageData(i);this.style.addImage(v,{data:new l.R({width:N,height:j},X),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0})}}updateImage(v,i){const d=this.style.getImage(v);if(!d)return this.fire(new l.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||l.b(i)?k.getImageData(i):i,{width:m,height:y,data:C}=f;if(m===void 0||y===void 0)return this.fire(new l.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==d.data.width||y!==d.data.height)return this.fire(new l.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(i instanceof HTMLImageElement||l.b(i));return d.data.replace(C,T),this.style.updateImage(v,d),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new l.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return F.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,i){return this._lazyInitEmptyStyle(),this.style.addLayer(v,i),this._update(!0)}moveLayer(v,i){return this.style.moveLayer(v,i),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,i,d){return this.style.setLayerZoomRange(v,i,d),this._update(!0)}setFilter(v,i,d={}){return this.style.setFilter(v,i,d),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,i,d,f={}){return this.style.setPaintProperty(v,i,d,f),this._update(!0)}getPaintProperty(v,i){return this.style.getPaintProperty(v,i)}setLayoutProperty(v,i,d,f={}){return this.style.setLayoutProperty(v,i,d,f),this._update(!0)}getLayoutProperty(v,i){return this.style.getLayoutProperty(v,i)}setGlyphs(v,i={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,i),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,i,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,i,d,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,i={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,i,d=>{d||this._update(!0)}),this}setLight(v,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,i),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,i){return this.style.setFeatureState(v,i),this._update()}removeFeatureState(v,i){return this.style.removeFeatureState(v,i),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,i=0;return this._container&&(v=this._container.clientWidth||400,i=this._container.clientHeight||300),[v,i]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const i=this._canvasContainer=P.create("div","maplibregl-canvas-container",v);this._interactive&&i.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const d=this._containerDimensions(),f=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],f);const m=this._controlContainer=P.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{y[C]=P.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,i,d){this._canvas.width=Math.floor(d*v),this._canvas.height=Math.floor(d*i),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let i=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{i={requestedAttributes:v},f&&(i.statusMessage=f.statusMessage,i.type=f.type)},{once:!0});const d=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!d){const f="Failed to initialize WebGL";throw i?(i.message=f,new Error(JSON.stringify(i))):new Error(f)}this.painter=new id(d,this.transform),R.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const i=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=k.now();this.style.zoomHistory.update(m,y);const C=new l.z(m,{now:y,fadeDuration:i,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();T===1&&T===this._crossFadingFactor||(d=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,i,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:i,showPadding:this.showPadding}),this.fire(new l.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.bf.mark(l.bg.load),this.fire(new l.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,l.bf.mark(l.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),F.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const i=this.painter.context.gl.getExtension("WEBGL_lose_context");i!=null&&i.loseContext&&i.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),l.bf.clearMetrics(),this._removed=!0,this.fire(new l.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(v=>{l.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return $g}getCameraTargetElevation(){return this.transform.elevation}},h.MapMouseEvent=ui,h.MapTouchEvent=Bs,h.MapWheelEvent=Pg,h.Marker=md,h.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const i=this._map.getZoom(),d=i===this._map.getMaxZoom(),f=i===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const i=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=i},this._setButtonTitle=(i,d)=>{const f=this._map._getUIString(`NavigationControl.${d}`);i.title=f,i.setAttribute("aria-label",f)},this.options=l.e({},a_,v),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new s_(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,i){const d=P.create("button",v,this._container);return d.type="button",d.addEventListener("click",i),d}},h.Popup=class extends l.E{constructor(v){super(),this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new l.k("close"))),this),this._onMouseUp=i=>{this._update(i.point)},this._onMouseMove=i=>{this._update(i.point)},this._onDrag=i=>{this._update(i.point)},this._update=i=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Xn(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!i)return;const f=this._flatPos=this._pos=this._trackPointer&&i?i:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&i?i:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=yd(this.options.offset);if(!m){const T=this._container.offsetWidth,M=this._container.offsetHeight;let z;z=f.y+y.bottom.y<M?["top"]:f.y>this._map.transform.height-M?["bottom"]:[],f.x<T/2?z.push("left"):f.x>this._map.transform.width-T/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let C=f.add(y[m]);this.options.subpixelPositioning||(C=C.round()),P.setTransform(this._container,`${Dl[m]} translate(${C.x}px,${C.y}px)`),fd(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=l.e(Object.create(Rt),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new l.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=l.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const i=document.createDocumentFragment(),d=document.createElement("body");let f;for(d.innerHTML=v;f=d.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(gd);v&&v.focus()}},h.RasterDEMTileSource=qt,h.RasterTileSource=ft,h.ScaleControl=class{constructor(v){this._onMove=()=>{Hu(this._map,this._container,this.options)},this.setUnit=i=>{this.options.unit=i,Hu(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},pa),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=jo,h.Style=Uc,h.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=Ml,h.TwoFingersTouchRotateHandler=Lp,h.TwoFingersTouchZoomHandler=Mp,h.TwoFingersTouchZoomRotateHandler=zp,h.VectorTileSource=bn,h.VideoSource=zn,h.addSourceType=(v,i)=>l._(void 0,void 0,void 0,function*(){if(vr(v))throw new Error(`A source type called "${v}" already exists.`);((d,f)=>{ei[d]=f})(v,i)}),h.clearPrewarmedResources=function(){const v=on;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(zt),on=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.getMaxParallelImageRequests=function(){return l.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return dn().getRTLTextPluginStatus()},h.getVersion=function(){return jp},h.getWorkerCount=function(){return Xt.workerCount},h.getWorkerUrl=function(){return l.a.WORKER_URL},h.importScriptInWorkers=function(v){return an().broadcast("IS",v)},h.prewarm=function(){Mn().acquire(zt)},h.setMaxParallelImageRequests=function(v){l.a.MAX_PARALLEL_IMAGE_REQUESTS=v},h.setRTLTextPlugin=function(v,i){return dn().setRTLTextPlugin(v,i)},h.setWorkerCount=function(v){Xt.workerCount=v},h.setWorkerUrl=function(v){l.a.WORKER_URL=v}});var c=n;return c})})(PM);var AM=PM.exports;const Pt=Fm(AM),a$=aI({__proto__:null,default:Pt},[AM]);function s$(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class l${constructor(){this._apiKey="",this._fetch=s$(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const gh=new l$,qm={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!1},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!1},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!1},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!1},WELSH:{code:"cy",flag:"name:cy",name:"WELSH",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!1},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!1},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!1},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!1},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!1},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!1},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!1},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!1},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!1},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!1},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!1}};function u$(e,t=qm){return e in t?e[e]:null}function Vb(e,t=qm){for(const n of Object.values(t))if(n.code===e)return n;return null}function Wb(e,t=qm){for(const n of Object.values(t))if(n.flag===e)return n;return null}function c$(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function ME(e,t=qm){return c$(e)?Wb(e.flag,t):typeof e!="string"?null:u$(e,t)||Vb(e,t)||Wb(e,t)||null}async function d$(e,t={}){if(gh.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return gh.fetch(e,t)}const LM={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(LM);class h$ extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const AE={403:"Key is missing, invalid or restricted"};async function p$(e={}){const t=new URL("geolocation/ip.json",LM.maptilerApiURL);t.searchParams.set("key",e.apiKey??gh.apiKey);const n=t.toString(),r=await d$(n);if(!r.ok)throw new h$(r,r.status in AE?AE[r.status]:"");return await r.json()}const LE={info:p$};function RM(e){const t=/^maptiler:\/\/(.*)/;let n;const r=e.trim();let a;return r.startsWith("http://")||r.startsWith("https://")?a=r:(n=t.exec(r))!==null?a=`https://api.maptiler.com/maps/${n[1]}/style.json`:a=`https://api.maptiler.com/maps/${r}/style.json`,a}class zM{constructor(t,n,r,a,c,h){this.name=t,this.variantType=n,this.id=r,this.referenceStyle=a,this.description=c,this.imageURL=h}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return RM(this.getId())}}class DM{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const Zf=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function f$(e){return new Proxy(e,{get(t,n,r){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,r)}})}function m$(){const e={};for(let t=0;t<Zf.length;t+=1){const n=Zf[t],r=f$(new DM(n.name,n.referenceStyleID));for(let a=0;a<n.variants.length;a+=1){const c=n.variants[a],h=new zM(c.name,c.variantType,c.id,r,c.description,c.imageURL);r.addVariant(h)}e[n.referenceStyleID]=r}return e}const yh=m$();var A2={exports:{}},vh=typeof Reflect=="object"?Reflect:null,RE=vh&&typeof vh.apply=="function"?vh.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},r0;vh&&typeof vh.ownKeys=="function"?r0=vh.ownKeys:Object.getOwnPropertySymbols?r0=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:r0=function(t){return Object.getOwnPropertyNames(t)};function g$(e){console&&console.warn&&console.warn(e)}var $M=Number.isNaN||function(t){return t!==t};function nr(){nr.init.call(this)}A2.exports=nr;A2.exports.once=x$;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var zE=10;function Ov(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return zE},set:function(e){if(typeof e!="number"||e<0||$M(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");zE=e}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||$M(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function OM(e){return e._maxListeners===void 0?nr.defaultMaxListeners:e._maxListeners}nr.prototype.getMaxListeners=function(){return OM(this)};nr.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var a=t==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var h;if(n.length>0&&(h=n[0]),h instanceof Error)throw h;var l=new Error("Unhandled error."+(h?" ("+h.message+")":""));throw l.context=h,l}var b=c[t];if(b===void 0)return!1;if(typeof b=="function")RE(b,this,n);else for(var w=b.length,I=UM(b,w),r=0;r<w;++r)RE(I[r],this,n);return!0};function BM(e,t,n,r){var a,c,h;if(Ov(n),c=e._events,c===void 0?(c=e._events=Object.create(null),e._eventsCount=0):(c.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),h=c[t]),h===void 0)h=c[t]=n,++e._eventsCount;else if(typeof h=="function"?h=c[t]=r?[n,h]:[h,n]:r?h.unshift(n):h.push(n),a=OM(e),a>0&&h.length>a&&!h.warned){h.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+h.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=h.length,g$(l)}return e}nr.prototype.addListener=function(t,n){return BM(this,t,n,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(t,n){return BM(this,t,n,!0)};function y$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function FM(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=y$.bind(r);return a.listener=n,r.wrapFn=a,a}nr.prototype.once=function(t,n){return Ov(n),this.on(t,FM(this,t,n)),this};nr.prototype.prependOnceListener=function(t,n){return Ov(n),this.prependListener(t,FM(this,t,n)),this};nr.prototype.removeListener=function(t,n){var r,a,c,h,l;if(Ov(n),a=this._events,a===void 0)return this;if(r=a[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(c=-1,h=r.length-1;h>=0;h--)if(r[h]===n||r[h].listener===n){l=r[h].listener,c=h;break}if(c<0)return this;c===0?r.shift():v$(r,c),r.length===1&&(a[t]=r[0]),a.removeListener!==void 0&&this.emit("removeListener",t,l||n)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(t){var n,r,a;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var c=Object.keys(r),h;for(a=0;a<c.length;++a)h=c[a],h!=="removeListener"&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function NM(e,t,n){var r=e._events;if(r===void 0)return[];var a=r[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?_$(a):UM(a,a.length)}nr.prototype.listeners=function(t){return NM(this,t,!0)};nr.prototype.rawListeners=function(t){return NM(this,t,!1)};nr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):jM.call(e,t)};nr.prototype.listenerCount=jM;function jM(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?r0(this._events):[]};function UM(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function v$(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function _$(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function x$(e,t){return new Promise(function(n,r){function a(h){e.removeListener(t,c),r(h)}function c(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}VM(e,t,c,{once:!0}),t!=="error"&&b$(e,a,{once:!0})})}function b$(e,t,n){typeof e.on=="function"&&VM(e,"error",t,n)}function VM(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(c){r.once&&e.removeEventListener(t,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var w$=A2.exports;const S$=Fm(w$);let ky;const C$=new Uint8Array(16);function k$(){if(!ky&&(ky=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ky))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ky(C$)}const Ii=[];for(let e=0;e<256;++e)Ii.push((e+256).toString(16).slice(1));function E$(e,t=0){return Ii[e[t+0]]+Ii[e[t+1]]+Ii[e[t+2]]+Ii[e[t+3]]+"-"+Ii[e[t+4]]+Ii[e[t+5]]+"-"+Ii[e[t+6]]+Ii[e[t+7]]+"-"+Ii[e[t+8]]+Ii[e[t+9]]+"-"+Ii[e[t+10]]+Ii[e[t+11]]+Ii[e[t+12]]+Ii[e[t+13]]+Ii[e[t+14]]+Ii[e[t+15]]}const T$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),DE={randomUUID:T$};function I$(e,t,n){if(DE.randomUUID&&!t&&!e)return DE.randomUUID();e=e||{};const r=e.random||(e.rng||k$)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,E$(r)}const WM="3.7.7",P$=WM,qh=typeof Buffer=="function",$E=typeof TextDecoder=="function"?new TextDecoder:void 0,OE=typeof TextEncoder=="function"?new TextEncoder:void 0,M$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Rf=Array.prototype.slice.call(M$),Ey=(e=>{let t={};return e.forEach((n,r)=>t[n]=r),t})(Rf),A$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Mi=String.fromCharCode.bind(String),BE=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),qM=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),HM=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),GM=e=>{let t,n,r,a,c="";const h=e.length%3;for(let l=0;l<e.length;){if((n=e.charCodeAt(l++))>255||(r=e.charCodeAt(l++))>255||(a=e.charCodeAt(l++))>255)throw new TypeError("invalid character found");t=n<<16|r<<8|a,c+=Rf[t>>18&63]+Rf[t>>12&63]+Rf[t>>6&63]+Rf[t&63]}return h?c.slice(0,h-3)+"===".substring(h):c},L2=typeof btoa=="function"?e=>btoa(e):qh?e=>Buffer.from(e,"binary").toString("base64"):GM,qb=qh?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let r=0,a=e.length;r<a;r+=4096)n.push(Mi.apply(null,e.subarray(r,r+4096)));return L2(n.join(""))},i0=(e,t=!1)=>t?qM(qb(e)):qb(e),L$=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Mi(192|t>>>6)+Mi(128|t&63):Mi(224|t>>>12&15)+Mi(128|t>>>6&63)+Mi(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Mi(240|t>>>18&7)+Mi(128|t>>>12&63)+Mi(128|t>>>6&63)+Mi(128|t&63)}},R$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ZM=e=>e.replace(R$,L$),FE=qh?e=>Buffer.from(e,"utf8").toString("base64"):OE?e=>qb(OE.encode(e)):e=>L2(ZM(e)),_h=(e,t=!1)=>t?qM(FE(e)):FE(e),NE=e=>_h(e,!0),z$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,D$=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Mi((n>>>10)+55296)+Mi((n&1023)+56320);case 3:return Mi((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Mi((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},KM=e=>e.replace(z$,D$),XM=e=>{if(e=e.replace(/\s+/g,""),!A$.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",r,a;for(let c=0;c<e.length;)t=Ey[e.charAt(c++)]<<18|Ey[e.charAt(c++)]<<12|(r=Ey[e.charAt(c++)])<<6|(a=Ey[e.charAt(c++)]),n+=r===64?Mi(t>>16&255):a===64?Mi(t>>16&255,t>>8&255):Mi(t>>16&255,t>>8&255,t&255);return n},R2=typeof atob=="function"?e=>atob(HM(e)):qh?e=>Buffer.from(e,"base64").toString("binary"):XM,YM=qh?e=>BE(Buffer.from(e,"base64")):e=>BE(R2(e).split("").map(t=>t.charCodeAt(0))),JM=e=>YM(QM(e)),$$=qh?e=>Buffer.from(e,"base64").toString("utf8"):$E?e=>$E.decode(YM(e)):e=>KM(R2(e)),QM=e=>HM(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Hb=e=>$$(QM(e)),O$=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},e3=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),t3=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,e3(n));e("fromBase64",function(){return Hb(this)}),e("toBase64",function(t){return _h(this,t)}),e("toBase64URI",function(){return _h(this,!0)}),e("toBase64URL",function(){return _h(this,!0)}),e("toUint8Array",function(){return JM(this)})},n3=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,e3(n));e("toBase64",function(t){return i0(this,t)}),e("toBase64URI",function(){return i0(this,!0)}),e("toBase64URL",function(){return i0(this,!0)})},B$=()=>{t3(),n3()},F$={version:WM,VERSION:P$,atob:R2,atobPolyfill:XM,btoa:L2,btoaPolyfill:GM,fromBase64:Hb,toBase64:_h,encode:_h,encodeURI:NE,encodeURL:NE,utob:ZM,btou:KM,decode:Hb,isValid:O$,fromUint8Array:i0,toUint8Array:JM,extendString:t3,extendUint8Array:n3,extendBuiltins:B$};var N$=Object.defineProperty,r3=e=>{throw TypeError(e)},j$=(e,t,n)=>t in e?N$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nn=(e,t,n)=>j$(e,typeof t!="symbol"?t+"":t,n),z2=(e,t,n)=>t.has(e)||r3("Cannot "+n),En=(e,t,n)=>(z2(e,t,"read from private field"),n?n.call(e):t.get(e)),tc=(e,t,n)=>t.has(e)?r3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),qd=(e,t,n,r)=>(z2(e,t,"write to private field"),t.set(e,n),n),Ko=(e,t,n)=>(z2(e,t,"access private method"),n);const Pn={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...qm};function jE(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Vb(e)||Pn.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>Vb(e)).filter(e=>e)[0]??Pn.LOCAL}const Io={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Pn.STYLE,secondaryLanguage:Pn.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(Io);const i3=I$();class U$ extends S${constructor(){super(...arguments),Nn(this,"primaryLanguage",Io.primaryLanguage),Nn(this,"secondaryLanguage"),Nn(this,"session",!0),Nn(this,"caching",!0),Nn(this,"_unit","metric"),Nn(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,gh.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){gh.fetch=t}get fetch(){return gh.fetch}}const co=new U$,{addProtocol:UE}=Pt,Gb="localcache_source",Zb="localcache",V$="maptiler_sdk",W$=1e3,q$=100,Kb=typeof caches<"u";function H$(e,t){if(Kb&&co.caching&&co.session&&e.host===Io.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${Gb}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${Zb}://`)}return e.href}let Cx;async function o3(){return Cx||(Cx=await caches.open(V$)),Cx}let VE=0;async function G$(){const e=await o3(),t=await e.keys(),n=t.slice(0,Math.max(t.length-W$,0));for(const r of n)e.delete(r)}function Z$(){UE(Gb,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Gb}://`,"https://");const n=e;n.signal=t.signal;const r=await fetch(e.url,n),a=await r.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${r.headers.get("Last-Modified")}`),{data:a,cacheControl:r.headers.get("Cache-Control"),expires:r.headers.get("Expires")}}),UE(Zb,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Zb}://`,"https://");const n=new URL(e.url),r=new URL(n);r.searchParams.delete("mtsid"),r.searchParams.delete("key");const a=r.toString(),c=new URL(n);c.searchParams.delete("last-modified");const h=c.toString(),l=async P=>({data:await P.arrayBuffer(),cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}),b=await o3(),w=await b.match(a);if(w)return l(w);const I=e;I.signal=t.signal;const k=await fetch(h,I);return k.status>=200&&k.status<300&&(b.put(a,k.clone()).catch(()=>{}),++VE>q$&&(G$(),VE=0)),l(k)})}function K$(){if(typeof window>"u")return;const e=Pt.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Pt.setRTLTextPlugin(Io.rtlPluginURL,!0)}catch{}}function X$(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function xh(e,t,n){const r=window.document.createElement(e);return t!==void 0&&(r.className=t),n&&n.appendChild(r),r}function a3(e){e.parentNode&&e.parentNode.removeChild(e)}function WE(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===Io.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",co.apiKey),co.session&&n.searchParams.append("mtsid",i3)),{url:H$(n,t)}}function qE(e){return(t,n)=>{if(e!=null){const r=e(t,n),a=WE((r==null?void 0:r.url)??"",n);return{...r,...a}}return WE(t,n)}}function Y$(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function J$(e){const t=Y$();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const r=document.createElement("div");throw r.innerHTML=t,r.classList.add("webgl-warning-div"),n.appendChild(r),new Error(t)}function Q$(e){const t="The WebGL context was lost.";let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const r=document.createElement("div");r.innerHTML=t,r.classList.add("webgl-warning-div"),n.appendChild(r)}let yf=class extends Pt.Marker{addTo(e){return super.addTo(e)}};class vf extends Pt.Popup{addTo(t){return super.addTo(t)}}class uZ extends Pt.Style{constructor(t,n={}){super(t,n)}}class cZ extends Pt.CanvasSource{onAdd(t){super.onAdd(t)}}class dZ extends Pt.GeoJSONSource{onAdd(t){super.onAdd(t)}}class hZ extends Pt.ImageSource{onAdd(t){super.onAdd(t)}}class pZ extends Pt.RasterTileSource{onAdd(t){super.onAdd(t)}}class fZ extends Pt.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class mZ extends Pt.VectorTileSource{onAdd(t){super.onAdd(t)}}class gZ extends Pt.VideoSource{onAdd(t){super.onAdd(t)}}class eO extends Pt.NavigationControl{onAdd(t){return super.onAdd(t)}}class tO extends Pt.GeolocateControl{onAdd(t){return super.onAdd(t)}}class yZ extends Pt.AttributionControl{onAdd(t){return super.onAdd(t)}}class nO extends Pt.LogoControl{onAdd(t){return super.onAdd(t)}}class rO extends Pt.ScaleControl{onAdd(t){return super.onAdd(t)}}class iO extends Pt.FullscreenControl{onAdd(t){return super.onAdd(t)}}class vZ extends Pt.TerrainControl{onAdd(t){return super.onAdd(t)}}class _Z extends Pt.BoxZoomHandler{constructor(t,n){super(t,n)}}class xZ extends Pt.ScrollZoomHandler{constructor(t,n){super(t,n)}}class bZ extends Pt.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class wZ extends Pt.KeyboardHandler{constructor(t){super(t)}}class SZ extends Pt.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class CZ extends Pt.MapWheelEvent{constructor(t,n,r){super(t,n,r)}}class kZ extends Pt.MapTouchEvent{constructor(t,n,r){super(t,n,r)}}class EZ extends Pt.MapMouseEvent{constructor(t,n,r,a={}){super(t,n,r,a)}}let HE=class extends nO{constructor(t={}){super(t),Nn(this,"logoURL",""),Nn(this,"linkURL",""),this.logoURL=t.logoURL??Io.maptilerLogoURL,this.linkURL=t.linkURL??Io.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}};var oO=8,aO={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sO={"*":{type:"source"}},lO=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],uO={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},cO={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},dO={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},hO={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},pO={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},fO={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},mO={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},gO=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],yO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},vO={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_O={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},xO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},bO={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wO={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},SO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},CO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kO={type:"array",value:"*"},EO={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},TO={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},IO={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},PO={type:"array",value:"*",minimum:1},MO={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},AO={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},LO={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},RO={type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},zO=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],DO={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},$O={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},OO={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},BO={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},FO={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},NO={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},jO={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},UO={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},VO={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},WO={"*":{type:"string"}},qO={$version:oO,$root:aO,sources:sO,source:lO,source_vector:uO,source_raster:cO,source_raster_dem:dO,source_geojson:hO,source_video:pO,source_image:fO,layer:mO,layout:gO,layout_background:yO,layout_fill:vO,layout_circle:_O,layout_heatmap:xO,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:bO,layout_symbol:wO,layout_raster:SO,layout_hillshade:CO,filter:kO,filter_operator:EO,geometry_type:TO,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:IO,expression:PO,light:MO,sky:AO,terrain:LO,projection:RO,paint:zO,paint_fill:DO,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:$O,paint_circle:OO,paint_heatmap:BO,paint_symbol:FO,paint_raster:NO,paint_hillshade:jO,paint_background:UO,transition:VO,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:WO};let ot=class{constructor(t,n,r,a){this.message=(t?`${t}: `:"")+r,a&&(this.identifier=a),n!=null&&n.__line__&&(this.line=n.__line__)}};function q0(e,...t){for(const n of t)for(const r in n)e[r]=n[r];return e}let gs=class extends Error{constructor(t,n){super(n),this.message=n,this.key=t}},HO=class s3{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[r,a]of n)this.bindings[r]=a}concat(t){return new s3(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}};const Bv={kind:"null"},st={kind:"number"},pn={kind:"string"},Yt={kind:"boolean"},ws={kind:"color"},bh={kind:"object"},Jt={kind:"value"},GO={kind:"error"},Fv={kind:"collator"},Nv={kind:"formatted"},jv={kind:"padding"},Hm={kind:"resolvedImage"},Uv={kind:"variableAnchorOffsetCollection"};function Qo(e,t){return{kind:"array",itemType:e,N:t}}function Cr(e){if(e.kind==="array"){const t=Cr(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const ZO=[Bv,st,pn,Yt,ws,Nv,bh,Qo(Jt),jv,Hm,Uv];function wm(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!wm(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of ZO)if(!wm(n,t))return null}}return`Expected ${Cr(e)} but found ${Cr(t)} instead.`}function D2(e,t){return t.some(n=>n.kind===e.kind)}function Sc(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function _f(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const l3=.96422,u3=1,c3=.82521,d3=4/29,wh=6/29,h3=3*wh*wh,KO=wh*wh*wh,XO=Math.PI/180,YO=180/Math.PI;function p3(e){return e=e%360,e<0&&(e+=360),e}function f3([e,t,n,r]){e=kx(e),t=kx(t),n=kx(n);let a,c;const h=Ex((.2225045*e+.7168786*t+.0606169*n)/u3);e===t&&t===n?a=c=h:(a=Ex((.4360747*e+.3850649*t+.1430804*n)/l3),c=Ex((.0139322*e+.0971045*t+.7141733*n)/c3));const l=116*h-16;return[l<0?0:l,500*(a-h),200*(h-c),r]}function kx(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ex(e){return e>KO?Math.pow(e,1/3):e/h3+d3}function m3([e,t,n,r]){let a=(e+16)/116,c=isNaN(t)?a:a+t/500,h=isNaN(n)?a:a-n/200;return a=u3*Ix(a),c=l3*Ix(c),h=c3*Ix(h),[Tx(3.1338561*c-1.6168667*a-.4906146*h),Tx(-.9787684*c+1.9161415*a+.033454*h),Tx(.0719453*c-.2289914*a+1.4052427*h),r]}function Tx(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function Ix(e){return e>wh?e*e*e:h3*(e-d3)}function JO(e){const[t,n,r,a]=f3(e),c=Math.sqrt(n*n+r*r);return[Math.round(c*1e4)?p3(Math.atan2(r,n)*YO):NaN,c,t,a]}function QO([e,t,n,r]){return e=isNaN(e)?0:e*XO,m3([n,Math.cos(e)*t,Math.sin(e)*t,r])}function e8([e,t,n,r]){e=p3(e),t/=100,n/=100;function a(c){const h=(c+e/30)%12,l=t*Math.min(n,1-n);return n-l*Math.max(-1,Math.min(h-3,9-h,1))}return[a(0),a(8),a(4),r]}function t8(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=n8[e];if(t){const[a,c,h]=t;return[a/255,c/255,h/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const a=e.length<6?1:2;let c=1;return[Ty(e.slice(c,c+=a)),Ty(e.slice(c,c+=a)),Ty(e.slice(c,c+=a)),Ty(e.slice(c,c+a)||"ff")]}if(e.startsWith("rgb")){const a=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,c=e.match(a);if(c){const[h,l,b,w,I,k,P,R,$,U,Z,D]=c,O=[w||" ",P||" ",U].join("");if(O==="  "||O==="  /"||O===",,"||O===",,,"){const F=[b,k,$].join(""),G=F==="%%%"?100:F===""?255:0;if(G){const te=[Hd(+l/G,0,1),Hd(+I/G,0,1),Hd(+R/G,0,1),Z?GE(+Z,D):1];if(ZE(te))return te}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,r=e.match(n);if(r){const[a,c,h,l,b,w,I,k,P]=r,R=[h||" ",b||" ",I].join("");if(R==="  "||R==="  /"||R===",,"||R===",,,"){const $=[+c,Hd(+l,0,100),Hd(+w,0,100),k?GE(+k,P):1];if(ZE($))return e8($)}}}function Ty(e){return parseInt(e.padEnd(2,e),16)/255}function GE(e,t){return Hd(t?e/100:e,0,1)}function Hd(e,t,n){return Math.min(Math.max(t,e),n)}function ZE(e){return!e.some(Number.isNaN)}const n8={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class kr{constructor(t,n,r,a=1,c=!0){this.r=t,this.g=n,this.b=r,this.a=a,c||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[t,n,r,a]))}static parse(t){if(t instanceof kr)return t;if(typeof t!="string")return;const n=t8(t);if(n)return new kr(...n,!1)}get rgb(){const{r:t,g:n,b:r,a}=this,c=a||1/0;return this.overwriteGetter("rgb",[t/c,n/c,r/c,a])}get hcl(){return this.overwriteGetter("hcl",JO(this.rgb))}get lab(){return this.overwriteGetter("lab",f3(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,r,a]=this.rgb;return`rgba(${[t,n,r].map(c=>Math.round(c*255)).join(",")},${a})`}}kr.black=new kr(0,0,0,1);kr.white=new kr(1,1,1,1);kr.transparent=new kr(0,0,0,0);kr.red=new kr(1,0,0,1);let $2=class{constructor(t,n,r){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},Xb=class{constructor(t,n,r,a,c){this.text=t,this.image=n,this.scale=r,this.fontStack=a,this.textColor=c}},Gm=class o0{constructor(t){this.sections=t}static fromString(t){return new o0([new Xb(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof o0?t:o0.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}};class Ss{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Ss)return t;if(typeof t=="number")return new Ss([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new Ss(t)}}toString(){return JSON.stringify(this.values)}}const r8=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class al{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof al)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const r=t[n],a=t[n+1];if(typeof r!="string"||!r8.has(r)||!Array.isArray(a)||a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")return}return new al(t)}}toString(){return JSON.stringify(this.values)}}let Hh=class g3{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new g3({name:t,available:!1}):null}};function y3(e,t,n,r){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof r>"u"||typeof r=="number"&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof r=="number"?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Sm(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof kr||e instanceof $2||e instanceof Gm||e instanceof Ss||e instanceof al||e instanceof Hh)return!0;if(Array.isArray(e)){for(const t of e)if(!Sm(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!Sm(e[t]))return!1;return!0}else return!1}function ai(e){if(e===null)return Bv;if(typeof e=="string")return pn;if(typeof e=="boolean")return Yt;if(typeof e=="number")return st;if(e instanceof kr)return ws;if(e instanceof $2)return Fv;if(e instanceof Gm)return Nv;if(e instanceof Ss)return jv;if(e instanceof al)return Uv;if(e instanceof Hh)return Hm;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const a=ai(r);if(!n)n=a;else{if(n===a)continue;n=Jt;break}}return Qo(n||Jt,t)}else return bh}function Kf(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof kr||e instanceof Gm||e instanceof Ss||e instanceof al||e instanceof Hh?e.toString():JSON.stringify(e)}class zh{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Sm(t[1]))return n.error("invalid value");const r=t[1];let a=ai(r);const c=n.expectedType;return a.kind==="array"&&a.N===0&&c&&c.kind==="array"&&(typeof c.N!="number"||c.N===0)&&(a=c),new zh(a,r)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Hr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Iy={string:pn,number:st,boolean:Yt,object:bh};class Ga{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let r=1,a;const c=t[0];if(c==="array"){let l;if(t.length>2){const w=t[1];if(typeof w!="string"||!(w in Iy)||w==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);l=Iy[w],r++}else l=Jt;let b;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);b=t[2],r++}a=Qo(l,b)}else{if(!Iy[c])throw new Error(`Types doesn't contain name = ${c}`);a=Iy[c]}const h=[];for(;r<t.length;r++){const l=n.parse(t[r],r,Jt);if(!l)return null;h.push(l)}return new Ga(a,h)}evaluate(t){for(let n=0;n<this.args.length;n++){const r=this.args[n].evaluate(t);if(wm(this.type,ai(r))){if(n===this.args.length-1)throw new Hr(`Expected value to be of type ${Cr(this.type)}, but found ${Cr(ai(r))} instead.`)}else return r}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const KE={"to-boolean":Yt,"to-color":ws,"to-number":st,"to-string":pn};let uh=class v3{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[0];if(!KE[r])throw new Error(`Can't parse ${r} as it is not part of the known types`);if((r==="to-boolean"||r==="to-string")&&t.length!==2)return n.error("Expected one argument.");const a=KE[r],c=[];for(let h=1;h<t.length;h++){const l=n.parse(t[h],h,Jt);if(!l)return null;c.push(l)}return new v3(a,c)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,r;for(const a of this.args){if(n=a.evaluate(t),r=null,n instanceof kr)return n;if(typeof n=="string"){const c=t.parseColor(n);if(c)return c}else if(Array.isArray(n)&&(n.length<3||n.length>4?r=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:r=y3(n[0],n[1],n[2],n[3]),!r))return new kr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Hr(r||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const r of this.args){n=r.evaluate(t);const a=Ss.parse(n);if(a)return a}throw new Hr(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const r of this.args){n=r.evaluate(t);const a=al.parse(n);if(a)return a}throw new Hr(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const r of this.args){if(n=r.evaluate(t),n===null)return 0;const a=Number(n);if(!isNaN(a))return a}throw new Hr(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Gm.fromString(Kf(this.args[0].evaluate(t)));case"resolvedImage":return Hh.fromString(Kf(this.args[0].evaluate(t)));default:return Kf(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};const i8=["Unknown","Point","LineString","Polygon"];let _3=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?i8[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=kr.parse(t)),n}},x3=class b3{constructor(t,n,r=[],a,c=new HO,h=[]){this.registry=t,this.path=r,this.key=r.map(l=>`[${l}]`).join(""),this.scope=c,this.errors=h,this.expectedType=a,this._isConstant=n}parse(t,n,r,a,c={}){return n?this.concat(n,r,a)._parse(t,c):this._parse(t,c)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function r(a,c,h){return h==="assert"?new Ga(c,[a]):h==="coerce"?new uh(c,[a]):a}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=t[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const c=this.registry[a];if(c){let h=c.parse(t,this);if(!h)return null;if(this.expectedType){const l=this.expectedType,b=h.type;if((l.kind==="string"||l.kind==="number"||l.kind==="boolean"||l.kind==="object"||l.kind==="array")&&b.kind==="value")h=r(h,l,n.typeAnnotation||"assert");else if((l.kind==="color"||l.kind==="formatted"||l.kind==="resolvedImage")&&(b.kind==="value"||b.kind==="string"))h=r(h,l,n.typeAnnotation||"coerce");else if(l.kind==="padding"&&(b.kind==="value"||b.kind==="number"||b.kind==="array"))h=r(h,l,n.typeAnnotation||"coerce");else if(l.kind==="variableAnchorOffsetCollection"&&(b.kind==="value"||b.kind==="array"))h=r(h,l,n.typeAnnotation||"coerce");else if(this.checkSubtype(l,b))return null}if(!(h instanceof zh)&&h.type.kind!=="resolvedImage"&&this._isConstant(h)){const l=new _3;try{h=new zh(h.type,h.evaluate(l))}catch(b){return this.error(b.message),null}}return h}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,r){const a=typeof t=="number"?this.path.concat(t):this.path,c=r?this.scope.concat(r):this.scope;return new b3(this.registry,this._isConstant,a,n||null,c,this.errors)}error(t,...n){const r=`${this.key}${n.map(a=>`[${a}]`).join("")}`;this.errors.push(new gs(r,t))}checkSubtype(t,n){const r=wm(t,n);return r&&this.error(r),r}},w3=class S3{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const r=[];for(let c=1;c<t.length-1;c+=2){const h=t[c];if(typeof h!="string")return n.error(`Expected string, but found ${typeof h} instead.`,c);if(/[^a-zA-Z0-9_]/.test(h))return n.error("Variable names must contain only alphanumeric characters or '_'.",c);const l=n.parse(t[c+1],c+1);if(!l)return null;r.push([h,l])}const a=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return a?new S3(r,a):null}outputDefined(){return this.result.outputDefined()}},C3=class k3{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const r=t[1];return n.scope.has(r)?new k3(r,n.scope.get(r)):n.error(`Unknown variable "${r}". Make sure "${r}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}},o8=class E3{constructor(t,n,r){this.type=t,this.index=n,this.input=r}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,st),a=n.parse(t[2],2,Qo(n.expectedType||Jt));if(!r||!a)return null;const c=a.type;return new E3(c.itemType,r,a)}evaluate(t){const n=this.index.evaluate(t),r=this.input.evaluate(t);if(n<0)throw new Hr(`Array index out of bounds: ${n} < 0.`);if(n>=r.length)throw new Hr(`Array index out of bounds: ${n} > ${r.length-1}.`);if(n!==Math.floor(n))throw new Hr(`Array index must be an integer, but found ${n} instead.`);return r[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}},a8=class T3{constructor(t,n){this.type=Yt,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Jt),a=n.parse(t[2],2,Jt);return!r||!a?null:D2(r.type,[Yt,pn,st,Bv,Jt])?new T3(r,a):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(r.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!r)return!1;if(!Sc(n,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(ai(n))} instead.`);if(!Sc(r,["string","array"]))throw new Hr(`Expected second argument to be of type array or string, but found ${Cr(ai(r))} instead.`);return r.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}},s8=class Yb{constructor(t,n,r){this.type=st,this.needle=t,this.haystack=n,this.fromIndex=r}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Jt),a=n.parse(t[2],2,Jt);if(!r||!a)return null;if(!D2(r.type,[Yt,pn,st,Bv,Jt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(r.type)} instead`);if(t.length===4){const c=n.parse(t[3],3,st);return c?new Yb(r,a,c):null}else return new Yb(r,a)}evaluate(t){const n=this.needle.evaluate(t),r=this.haystack.evaluate(t);if(!Sc(n,["boolean","string","number","null"]))throw new Hr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(ai(n))} instead.`);let a;if(this.fromIndex&&(a=this.fromIndex.evaluate(t)),Sc(r,["string"])){const c=r.indexOf(n,a);return c===-1?-1:[...r.slice(0,c)].length}else{if(Sc(r,["array"]))return r.indexOf(n,a);throw new Hr(`Expected second argument to be of type array or string, but found ${Cr(ai(r))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}},l8=class I3{constructor(t,n,r,a,c,h){this.inputType=t,this.type=n,this.input=r,this.cases=a,this.outputs=c,this.otherwise=h}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let r,a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);const c={},h=[];for(let w=2;w<t.length-1;w+=2){let I=t[w];const k=t[w+1];Array.isArray(I)||(I=[I]);const P=n.concat(w);if(I.length===0)return P.error("Expected at least one branch label.");for(const $ of I){if(typeof $!="number"&&typeof $!="string")return P.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof $=="number"&&Math.floor($)!==$)return P.error("Numeric branch labels must be integer values.");if(!r)r=ai($);else if(P.checkSubtype(r,ai($)))return null;if(typeof c[String($)]<"u")return P.error("Branch labels must be unique.");c[String($)]=h.length}const R=n.parse(k,w,a);if(!R)return null;a=a||R.type,h.push(R)}const l=n.parse(t[1],1,Jt);if(!l)return null;const b=n.parse(t[t.length-1],t.length-1,a);return!b||l.type.kind!=="value"&&n.concat(1).checkSubtype(r,l.type)?null:new I3(r,a,l,c,h,b)}evaluate(t){const n=this.input.evaluate(t);return(ai(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}},u8=class P3{constructor(t,n,r){this.type=t,this.branches=n,this.otherwise=r}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let r;n.expectedType&&n.expectedType.kind!=="value"&&(r=n.expectedType);const a=[];for(let h=1;h<t.length-1;h+=2){const l=n.parse(t[h],h,Yt);if(!l)return null;const b=n.parse(t[h+1],h+1,r);if(!b)return null;a.push([l,b]),r=r||b.type}const c=n.parse(t[t.length-1],t.length-1,r);if(!c)return null;if(!r)throw new Error("Can't infer output type");return new P3(r,a,c)}evaluate(t){for(const[n,r]of this.branches)if(n.evaluate(t))return r.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,r]of this.branches)t(n),t(r);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}},c8=class Jb{constructor(t,n,r,a){this.type=t,this.input=n,this.beginIndex=r,this.endIndex=a}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const r=n.parse(t[1],1,Jt),a=n.parse(t[2],2,st);if(!r||!a)return null;if(!D2(r.type,[Qo(Jt),pn,Jt]))return n.error(`Expected first argument to be of type array or string, but found ${Cr(r.type)} instead`);if(t.length===4){const c=n.parse(t[3],3,st);return c?new Jb(r.type,r,a,c):null}else return new Jb(r.type,r,a)}evaluate(t){const n=this.input.evaluate(t),r=this.beginIndex.evaluate(t);let a;if(this.endIndex&&(a=this.endIndex.evaluate(t)),Sc(n,["string"]))return[...n].slice(r,a).join("");if(Sc(n,["array"]))return n.slice(r,a);throw new Hr(`Expected first argument to be of type array or string, but found ${Cr(ai(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}};function M3(e,t){const n=e.length-1;let r=0,a=n,c=0,h,l;for(;r<=a;)if(c=Math.floor((r+a)/2),h=e[c],l=e[c+1],h<=t){if(c===n||t<l)return c;r=c+1}else if(h>t)a=c-1;else throw new Hr("Input is not a number.");return 0}let A3=class L3{constructor(t,n,r){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[a,c]of r)this.labels.push(a),this.outputs.push(c)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const r=n.parse(t[1],1,st);if(!r)return null;const a=[];let c=null;n.expectedType&&n.expectedType.kind!=="value"&&(c=n.expectedType);for(let h=1;h<t.length;h+=2){const l=h===1?-1/0:t[h],b=t[h+1],w=h,I=h+1;if(typeof l!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(a.length&&a[a.length-1][0]>=l)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',w);const k=n.parse(b,I,c);if(!k)return null;c=c||k.type,a.push([l,k])}return new L3(c,r,a)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return r[0].evaluate(t);const c=n.length;if(a>=n[c-1])return r[c-1].evaluate(t);const h=M3(n,a);return r[h].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function d8(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h8=R3;function R3(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}R3.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var a=this.sampleCurveX(n)-e;if(Math.abs(a)<t)return n;var c=this.sampleCurveDerivativeX(n);if(Math.abs(c)<1e-6)break;n=n-a/c}var h=0,l=1;for(n=e,r=0;r<20&&(a=this.sampleCurveX(n),!(Math.abs(a-e)<t));r++)e>a?h=n:l=n,n=(l-h)*.5+h;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var p8=d8(h8);function Cc(e,t,n){return e+n*(t-e)}function f8(e,t,n,r="rgb"){switch(r){case"rgb":{const[a,c,h,l]=H0(e.rgb,t.rgb,n);return new kr(a,c,h,l,!1)}case"hcl":{const[a,c,h,l]=e.hcl,[b,w,I,k]=t.hcl;let P,R;if(!isNaN(a)&&!isNaN(b)){let O=b-a;b>a&&O>180?O-=360:b<a&&a-b>180&&(O+=360),P=a+n*O}else isNaN(a)?isNaN(b)?P=NaN:(P=b,(h===1||h===0)&&(R=w)):(P=a,(I===1||I===0)&&(R=c));const[$,U,Z,D]=QO([P,R??Cc(c,w,n),Cc(h,I,n),Cc(l,k,n)]);return new kr($,U,Z,D,!1)}case"lab":{const[a,c,h,l]=m3(H0(e.lab,t.lab,n));return new kr(a,c,h,l,!1)}}}function H0(e,t,n){return e.map((r,a)=>Cc(r,t[a],n))}function m8(e,t,n){return new Ss(H0(e.values,t.values,n))}function g8(e,t,n){const r=e.values,a=t.values;if(r.length!==a.length)throw new Hr(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const c=[];for(let h=0;h<r.length;h+=2){if(r[h]!==a[h])throw new Hr(`Cannot interpolate values containing mismatched anchors. from[${h}]: ${r[h]}, to[${h}]: ${a[h]}`);c.push(r[h]);const[l,b]=r[h+1],[w,I]=a[h+1];c.push([Cc(l,w,n),Cc(b,I,n)])}return new al(c)}const Px={number:Cc,color:f8,array:H0,padding:m8,variableAnchorOffsetCollection:g8};let kc=class Qb{constructor(t,n,r,a,c){this.type=t,this.operator=n,this.interpolation=r,this.input=a,this.labels=[],this.outputs=[];for(const[h,l]of c)this.labels.push(h),this.outputs.push(l)}static interpolationFactor(t,n,r,a){let c=0;if(t.name==="exponential")c=Mx(n,t.base,r,a);else if(t.name==="linear")c=Mx(n,1,r,a);else if(t.name==="cubic-bezier"){const h=t.controlPoints;c=new p8(h[0],h[1],h[2],h[3]).solve(Mx(n,1,r,a))}return c}static parse(t,n){let[r,a,c,...h]=t;if(!Array.isArray(a)||a.length===0)return n.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const w=a[1];if(typeof w!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:w}}else if(a[0]==="cubic-bezier"){const w=a.slice(1);if(w.length!==4||w.some(I=>typeof I!="number"||I<0||I>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:w}}else return n.error(`Unknown interpolation type ${String(a[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(c=n.parse(c,2,st),!c)return null;const l=[];let b=null;r==="interpolate-hcl"||r==="interpolate-lab"?b=ws:n.expectedType&&n.expectedType.kind!=="value"&&(b=n.expectedType);for(let w=0;w<h.length;w+=2){const I=h[w],k=h[w+1],P=w+3,R=w+4;if(typeof I!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(l.length&&l[l.length-1][0]>=I)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const $=n.parse(k,R,b);if(!$)return null;b=b||$.type,l.push([I,$])}return!_f(b,st)&&!_f(b,ws)&&!_f(b,jv)&&!_f(b,Uv)&&!_f(b,Qo(st))?n.error(`Type ${Cr(b)} is not interpolatable.`):new Qb(b,r,a,c,l)}evaluate(t){const n=this.labels,r=this.outputs;if(n.length===1)return r[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return r[0].evaluate(t);const c=n.length;if(a>=n[c-1])return r[c-1].evaluate(t);const h=M3(n,a),l=n[h],b=n[h+1],w=Qb.interpolationFactor(this.interpolation,a,l,b),I=r[h].evaluate(t),k=r[h+1].evaluate(t);switch(this.operator){case"interpolate":return Px[this.type.kind](I,k,w);case"interpolate-hcl":return Px.color(I,k,w,"hcl");case"interpolate-lab":return Px.color(I,k,w,"lab")}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function Mx(e,t,n,r){const a=r-n,c=e-n;return a===0?0:t===1?c/a:(Math.pow(t,c)-1)/(Math.pow(t,a)-1)}let z3=class ew{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expectected at least one argument.");let r=null;const a=n.expectedType;a&&a.kind!=="value"&&(r=a);const c=[];for(const h of t.slice(1)){const l=n.parse(h,1+c.length,r,void 0,{typeAnnotation:"omit"});if(!l)return null;r=r||l.type,c.push(l)}if(!r)throw new Error("No output type");return a&&c.some(h=>wm(a,h.type))?new ew(Jt,c):new ew(r,c)}evaluate(t){let n=null,r=0,a;for(const c of this.args)if(r++,n=c.evaluate(t),n&&n instanceof Hh&&!n.available&&(a||(a=n.name),n=null,r===this.args.length&&(n=a)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};function XE(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function y8(e,t,n){return t===n}function v8(e,t,n){return t!==n}function _8(e,t,n){return t<n}function x8(e,t,n){return t>n}function b8(e,t,n){return t<=n}function w8(e,t,n){return t>=n}function D3(e,t,n,r){return r.compare(t,n)===0}function S8(e,t,n,r){return!D3(e,t,n,r)}function C8(e,t,n,r){return r.compare(t,n)<0}function k8(e,t,n,r){return r.compare(t,n)>0}function E8(e,t,n,r){return r.compare(t,n)<=0}function T8(e,t,n,r){return r.compare(t,n)>=0}function Gh(e,t,n){const r=e!=="=="&&e!=="!=";return class $3{constructor(c,h,l){this.type=Yt,this.lhs=c,this.rhs=h,this.collator=l,this.hasUntypedArgument=c.type.kind==="value"||h.type.kind==="value"}static parse(c,h){if(c.length!==3&&c.length!==4)return h.error("Expected two or three arguments.");const l=c[0];let b=h.parse(c[1],1,Jt);if(!b)return null;if(!XE(l,b.type))return h.concat(1).error(`"${l}" comparisons are not supported for type '${Cr(b.type)}'.`);let w=h.parse(c[2],2,Jt);if(!w)return null;if(!XE(l,w.type))return h.concat(2).error(`"${l}" comparisons are not supported for type '${Cr(w.type)}'.`);if(b.type.kind!==w.type.kind&&b.type.kind!=="value"&&w.type.kind!=="value")return h.error(`Cannot compare types '${Cr(b.type)}' and '${Cr(w.type)}'.`);r&&(b.type.kind==="value"&&w.type.kind!=="value"?b=new Ga(w.type,[b]):b.type.kind!=="value"&&w.type.kind==="value"&&(w=new Ga(b.type,[w])));let I=null;if(c.length===4){if(b.type.kind!=="string"&&w.type.kind!=="string"&&b.type.kind!=="value"&&w.type.kind!=="value")return h.error("Cannot use collator to compare non-string types.");if(I=h.parse(c[3],3,Fv),!I)return null}return new $3(b,w,I)}evaluate(c){const h=this.lhs.evaluate(c),l=this.rhs.evaluate(c);if(r&&this.hasUntypedArgument){const b=ai(h),w=ai(l);if(b.kind!==w.kind||!(b.kind==="string"||b.kind==="number"))throw new Hr(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${b.kind}, ${w.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const b=ai(h),w=ai(l);if(b.kind!=="string"||w.kind!=="string")return t(c,h,l)}return this.collator?n(c,h,l,this.collator.evaluate(c)):t(c,h,l)}eachChild(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)}outputDefined(){return!0}}}const I8=Gh("==",y8,D3),P8=Gh("!=",v8,S8),M8=Gh("<",_8,C8),A8=Gh(">",x8,k8),L8=Gh("<=",b8,E8),R8=Gh(">=",w8,T8);let O3=class B3{constructor(t,n,r){this.type=Fv,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const r=t[1];if(typeof r!="object"||Array.isArray(r))return n.error("Collator options argument must be an object.");const a=n.parse(r["case-sensitive"]===void 0?!1:r["case-sensitive"],1,Yt);if(!a)return null;const c=n.parse(r["diacritic-sensitive"]===void 0?!1:r["diacritic-sensitive"],1,Yt);if(!c)return null;let h=null;return r.locale&&(h=n.parse(r.locale,1,pn),!h)?null:new B3(a,c,h)}evaluate(t){return new $2(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}},z8=class F3{constructor(t,n,r,a,c){this.type=pn,this.number=t,this.locale=n,this.currency=r,this.minFractionDigits=a,this.maxFractionDigits=c}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const r=n.parse(t[1],1,st);if(!r)return null;const a=t[2];if(typeof a!="object"||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");let c=null;if(a.locale&&(c=n.parse(a.locale,1,pn),!c))return null;let h=null;if(a.currency&&(h=n.parse(a.currency,1,pn),!h))return null;let l=null;if(a["min-fraction-digits"]&&(l=n.parse(a["min-fraction-digits"],1,st),!l))return null;let b=null;return a["max-fraction-digits"]&&(b=n.parse(a["max-fraction-digits"],1,st),!b)?null:new F3(r,c,h,l,b)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}},D8=class N3{constructor(t){this.type=Nv,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const r=t[1];if(!Array.isArray(r)&&typeof r=="object")return n.error("First argument must be an image or text section.");const a=[];let c=!1;for(let h=1;h<=t.length-1;++h){const l=t[h];if(c&&typeof l=="object"&&!Array.isArray(l)){c=!1;let b=null;if(l["font-scale"]&&(b=n.parse(l["font-scale"],1,st),!b))return null;let w=null;if(l["text-font"]&&(w=n.parse(l["text-font"],1,Qo(pn)),!w))return null;let I=null;if(l["text-color"]&&(I=n.parse(l["text-color"],1,ws),!I))return null;const k=a[a.length-1];k.scale=b,k.font=w,k.textColor=I}else{const b=n.parse(t[h],1,Jt);if(!b)return null;const w=b.type.kind;if(w!=="string"&&w!=="value"&&w!=="null"&&w!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");c=!0,a.push({content:b,scale:null,font:null,textColor:null})}}return new N3(a)}evaluate(t){const n=r=>{const a=r.content.evaluate(t);return ai(a)===Hm?new Xb("",a,null,null,null):new Xb(Kf(a),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)};return new Gm(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}outputDefined(){return!1}},$8=class j3{constructor(t){this.type=Hm,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const r=n.parse(t[1],1,pn);return r?new j3(r):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),r=Hh.fromString(n);return r&&t.availableImages&&(r.available=t.availableImages.indexOf(n)>-1),r}eachChild(t){t(this.input)}outputDefined(){return!1}},O8=class U3{constructor(t){this.type=st,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const r=n.parse(t[1],1);return r?r.type.kind!=="array"&&r.type.kind!=="string"&&r.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Cr(r.type)} instead.`):new U3(r):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Hr(`Expected value to be of type string or array, but found ${Cr(ai(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}};const Cs=8192;function B8(e,t){const n=F8(e[0]),r=j8(e[1]),a=Math.pow(2,t.z);return[Math.round(n*a*Cs),Math.round(r*a*Cs)]}function O2(e,t){const n=Math.pow(2,t.z),r=(e[0]/Cs+t.x)/n,a=(e[1]/Cs+t.y)/n;return[N8(r),U8(a)]}function F8(e){return(180+e)/360}function N8(e){return e*360-180}function j8(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function U8(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Zm(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Cm(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function V8(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function W8(e,t,n){const r=e[0]-t[0],a=e[1]-t[1],c=e[0]-n[0],h=e[1]-n[1];return r*h-c*a===0&&r*c<=0&&a*h<=0}function Vv(e,t,n,r){const a=[t[0]-e[0],t[1]-e[1]],c=[r[0]-n[0],r[1]-n[1]];return Z8(c,a)===0?!1:!!(YE(e,t,n,r)&&YE(n,r,e,t))}function q8(e,t,n){for(const r of n)for(let a=0;a<r.length-1;++a)if(Vv(e,t,r[a],r[a+1]))return!0;return!1}function Zh(e,t,n=!1){let r=!1;for(const a of t)for(let c=0;c<a.length-1;c++){if(W8(e,a[c],a[c+1]))return n;V8(e,a[c],a[c+1])&&(r=!r)}return r}function H8(e,t){for(const n of t)if(Zh(e,n))return!0;return!1}function V3(e,t){for(const n of e)if(!Zh(n,t))return!1;for(let n=0;n<e.length-1;++n)if(q8(e[n],e[n+1],t))return!1;return!0}function G8(e,t){for(const n of t)if(V3(e,n))return!0;return!1}function Z8(e,t){return e[0]*t[1]-e[1]*t[0]}function YE(e,t,n,r){const a=e[0]-n[0],c=e[1]-n[1],h=t[0]-n[0],l=t[1]-n[1],b=r[0]-n[0],w=r[1]-n[1],I=a*w-b*c,k=h*w-b*l;return I>0&&k<0||I<0&&k>0}function B2(e,t,n){const r=[];for(let a=0;a<e.length;a++){const c=[];for(let h=0;h<e[a].length;h++){const l=B8(e[a][h],n);Zm(t,l),c.push(l)}r.push(c)}return r}function W3(e,t,n){const r=[];for(let a=0;a<e.length;a++){const c=B2(e[a],t,n);r.push(c)}return r}function q3(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const a=r*.5;let c=e[0]-n[0]>a?-r:n[0]-e[0]>a?r:0;c===0&&(c=e[0]-n[2]>a?-r:n[2]-e[0]>a?r:0),e[0]+=c}Zm(t,e)}function K8(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function JE(e,t,n,r){const a=Math.pow(2,r.z)*Cs,c=[r.x*Cs,r.y*Cs],h=[];for(const l of e)for(const b of l){const w=[b.x+c[0],b.y+c[1]];q3(w,t,n,a),h.push(w)}return h}function QE(e,t,n,r){const a=Math.pow(2,r.z)*Cs,c=[r.x*Cs,r.y*Cs],h=[];for(const l of e){const b=[];for(const w of l){const I=[w.x+c[0],w.y+c[1]];Zm(t,I),b.push(I)}h.push(b)}if(t[2]-t[0]<=a/2){K8(t);for(const l of h)for(const b of l)q3(b,t,n,a)}return h}function X8(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const c=B2(t.coordinates,r,a),h=JE(e.geometry(),n,r,a);if(!Cm(n,r))return!1;for(const l of h)if(!Zh(l,c))return!1}if(t.type==="MultiPolygon"){const c=W3(t.coordinates,r,a),h=JE(e.geometry(),n,r,a);if(!Cm(n,r))return!1;for(const l of h)if(!H8(l,c))return!1}return!0}function Y8(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const c=B2(t.coordinates,r,a),h=QE(e.geometry(),n,r,a);if(!Cm(n,r))return!1;for(const l of h)if(!V3(l,c))return!1}if(t.type==="MultiPolygon"){const c=W3(t.coordinates,r,a),h=QE(e.geometry(),n,r,a);if(!Cm(n,r))return!1;for(const l of h)if(!G8(l,c))return!1}return!0}class Ec{constructor(t,n){this.type=Yt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Sm(t[1])){const r=t[1];if(r.type==="FeatureCollection"){const a=[];for(const c of r.features){const{type:h,coordinates:l}=c.geometry;h==="Polygon"&&a.push(l),h==="MultiPolygon"&&a.push(...l)}if(a.length){const c={type:"MultiPolygon",coordinates:a};return new Ec(r,c)}}else if(r.type==="Feature"){const a=r.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new Ec(r,r.geometry)}else if(r.type==="Polygon"||r.type==="MultiPolygon")return new Ec(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return X8(t,this.geometries);if(t.geometryType()==="LineString")return Y8(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let H3=class{constructor(t=[],n=(r,a)=>r<a?-1:r>a?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:r}=this,a=n[t];for(;t>0;){const c=t-1>>1,h=n[c];if(r(a,h)>=0)break;n[t]=h,t=c}n[t]=a}_down(t){const{data:n,compare:r}=this,a=this.length>>1,c=n[t];for(;t<a;){let h=(t<<1)+1;const l=h+1;if(l<this.length&&r(n[l],n[h])<0&&(h=l),r(n[h],c)>=0)break;n[t]=n[h],t=h}n[t]=c}};function J8(e,t){if(e.length<=1)return[e];const n=[];let r,a;for(const c of e){const h=Q8(c);h!==0&&(c.area=Math.abs(h),a===void 0&&(a=h<0),a===h<0?(r&&n.push(r),r=[c]):r.push(c))}return r&&n.push(r),n}function Q8(e){let t=0;for(let n=0,r=e.length,a=r-1,c,h;n<r;a=n++)c=e[n],h=e[a],t+=(h.x-c.x)*(c.y+h.y);return t}const eB=6378.137,eT=1/298.257223563,tT=eT*(2-eT),nT=Math.PI/180;let F2=class{constructor(t){const n=nT*eB*1e3,r=Math.cos(t*nT),a=1/(1-tT*(1-r*r)),c=Math.sqrt(a);this.kx=n*c*r,this.ky=n*c*a*(1-tT)}distance(t,n){const r=this.wrap(t[0]-n[0])*this.kx,a=(t[1]-n[1])*this.ky;return Math.sqrt(r*r+a*a)}pointOnLine(t,n){let r=1/0,a,c,h,l;for(let b=0;b<t.length-1;b++){let w=t[b][0],I=t[b][1],k=this.wrap(t[b+1][0]-w)*this.kx,P=(t[b+1][1]-I)*this.ky,R=0;(k!==0||P!==0)&&(R=(this.wrap(n[0]-w)*this.kx*k+(n[1]-I)*this.ky*P)/(k*k+P*P),R>1?(w=t[b+1][0],I=t[b+1][1]):R>0&&(w+=k/this.kx*R,I+=P/this.ky*R)),k=this.wrap(n[0]-w)*this.kx,P=(n[1]-I)*this.ky;const $=k*k+P*P;$<r&&(r=$,a=w,c=I,h=b,l=R)}return{point:[a,c],index:h,t:Math.max(0,Math.min(1,l))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}};const tw=100,nw=50;function G3(e,t){return t[0]-e[0]}function G0(e){return e[1]-e[0]+1}function sl(e,t){return e[1]>=e[0]&&e[1]<t}function rw(e,t){if(e[0]>e[1])return[null,null];const n=G0(e);if(t){if(n===2)return[e,null];const a=Math.floor(n/2);return[[e[0],e[0]+a],[e[0]+a,e[1]]]}if(n===1)return[e,null];const r=Math.floor(n/2)-1;return[[e[0],e[0]+r],[e[0]+r+1,e[1]]]}function iw(e,t){if(!sl(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let r=t[0];r<=t[1];++r)Zm(n,e[r]);return n}function ow(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const r of n)Zm(t,r);return t}function rT(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function N2(e,t,n){if(!rT(e)||!rT(t))return NaN;let r=0,a=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(a=e[1]-t[3]),e[3]<t[1]&&(a=t[1]-e[3]),n.distance([0,0],[r,a])}function gc(e,t,n){const r=n.pointOnLine(t,e);return n.distance(e,r.point)}function j2(e,t,n,r,a){const c=Math.min(gc(e,[n,r],a),gc(t,[n,r],a)),h=Math.min(gc(n,[e,t],a),gc(r,[e,t],a));return Math.min(c,h)}function tB(e,t,n,r,a){if(!(sl(t,e.length)&&sl(r,n.length)))return 1/0;let c=1/0;for(let h=t[0];h<t[1];++h){const l=e[h],b=e[h+1];for(let w=r[0];w<r[1];++w){const I=n[w],k=n[w+1];if(Vv(l,b,I,k))return 0;c=Math.min(c,j2(l,b,I,k,a))}}return c}function nB(e,t,n,r,a){if(!(sl(t,e.length)&&sl(r,n.length)))return NaN;let c=1/0;for(let h=t[0];h<=t[1];++h)for(let l=r[0];l<=r[1];++l)if(c=Math.min(c,a.distance(e[h],n[l])),c===0)return c;return c}function rB(e,t,n){if(Zh(e,t,!0))return 0;let r=1/0;for(const a of t){const c=a[0],h=a[a.length-1];if(c!==h&&(r=Math.min(r,gc(e,[h,c],n)),r===0))return r;const l=n.pointOnLine(a,e);if(r=Math.min(r,n.distance(e,l.point)),r===0)return r}return r}function iB(e,t,n,r){if(!sl(t,e.length))return NaN;for(let c=t[0];c<=t[1];++c)if(Zh(e[c],n,!0))return 0;let a=1/0;for(let c=t[0];c<t[1];++c){const h=e[c],l=e[c+1];for(const b of n)for(let w=0,I=b.length,k=I-1;w<I;k=w++){const P=b[k],R=b[w];if(Vv(h,l,P,R))return 0;a=Math.min(a,j2(h,l,P,R,r))}}return a}function iT(e,t){for(const n of e)for(const r of n)if(Zh(r,t,!0))return!0;return!1}function oB(e,t,n,r=1/0){const a=ow(e),c=ow(t);if(r!==1/0&&N2(a,c,n)>=r)return r;if(Cm(a,c)){if(iT(e,t))return 0}else if(iT(t,e))return 0;let h=1/0;for(const l of e)for(let b=0,w=l.length,I=w-1;b<w;I=b++){const k=l[I],P=l[b];for(const R of t)for(let $=0,U=R.length,Z=U-1;$<U;Z=$++){const D=R[Z],O=R[$];if(Vv(k,P,D,O))return 0;h=Math.min(h,j2(k,P,D,O,n))}}return h}function oT(e,t,n,r,a,c){if(!c)return;const h=N2(iw(r,c),a,n);h<t&&e.push([h,c,[0,0]])}function Py(e,t,n,r,a,c,h){if(!c||!h)return;const l=N2(iw(r,c),iw(a,h),n);l<t&&e.push([l,c,h])}function Z0(e,t,n,r,a=1/0){let c=Math.min(r.distance(e[0],n[0][0]),a);if(c===0)return c;const h=new H3([[0,[0,e.length-1],[0,0]]],G3),l=ow(n);for(;h.length>0;){const b=h.pop();if(b[0]>=c)continue;const w=b[1],I=t?nw:tw;if(G0(w)<=I){if(!sl(w,e.length))return NaN;if(t){const k=iB(e,w,n,r);if(isNaN(k)||k===0)return k;c=Math.min(c,k)}else for(let k=w[0];k<=w[1];++k){const P=rB(e[k],n,r);if(c=Math.min(c,P),c===0)return 0}}else{const k=rw(w,t);oT(h,c,r,e,l,k[0]),oT(h,c,r,e,l,k[1])}}return c}function K0(e,t,n,r,a,c=1/0){let h=Math.min(c,a.distance(e[0],n[0]));if(h===0)return h;const l=new H3([[0,[0,e.length-1],[0,n.length-1]]],G3);for(;l.length>0;){const b=l.pop();if(b[0]>=h)continue;const w=b[1],I=b[2],k=t?nw:tw,P=r?nw:tw;if(G0(w)<=k&&G0(I)<=P){if(!sl(w,e.length)&&sl(I,n.length))return NaN;let R;if(t&&r)R=tB(e,w,n,I,a),h=Math.min(h,R);else if(t&&!r){const $=e.slice(w[0],w[1]+1);for(let U=I[0];U<=I[1];++U)if(R=gc(n[U],$,a),h=Math.min(h,R),h===0)return h}else if(!t&&r){const $=n.slice(I[0],I[1]+1);for(let U=w[0];U<=w[1];++U)if(R=gc(e[U],$,a),h=Math.min(h,R),h===0)return h}else R=nB(e,w,n,I,a),h=Math.min(h,R)}else{const R=rw(w,t),$=rw(I,r);Py(l,h,a,e,n,R[0],$[0]),Py(l,h,a,e,n,R[0],$[1]),Py(l,h,a,e,n,R[1],$[0]),Py(l,h,a,e,n,R[1],$[1])}}return h}function aB(e,t){const n=e.geometry(),r=n.flat().map(h=>O2([h.x,h.y],e.canonical));if(n.length===0)return NaN;const a=new F2(r[0][1]);let c=1/0;for(const h of t){switch(h.type){case"Point":c=Math.min(c,K0(r,!1,[h.coordinates],!1,a,c));break;case"LineString":c=Math.min(c,K0(r,!1,h.coordinates,!0,a,c));break;case"Polygon":c=Math.min(c,Z0(r,!1,h.coordinates,a,c));break}if(c===0)return c}return c}function sB(e,t){const n=e.geometry(),r=n.flat().map(h=>O2([h.x,h.y],e.canonical));if(n.length===0)return NaN;const a=new F2(r[0][1]);let c=1/0;for(const h of t){switch(h.type){case"Point":c=Math.min(c,K0(r,!0,[h.coordinates],!1,a,c));break;case"LineString":c=Math.min(c,K0(r,!0,h.coordinates,!0,a,c));break;case"Polygon":c=Math.min(c,Z0(r,!0,h.coordinates,a,c));break}if(c===0)return c}return c}function lB(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const r=J8(n).map(h=>h.map(l=>l.map(b=>O2([b.x,b.y],e.canonical)))),a=new F2(r[0][0][0][1]);let c=1/0;for(const h of t)for(const l of r){switch(h.type){case"Point":c=Math.min(c,Z0([h.coordinates],!1,l,a,c));break;case"LineString":c=Math.min(c,Z0(h.coordinates,!0,l,a,c));break;case"Polygon":c=Math.min(c,oB(l,h.coordinates,a,c));break}if(c===0)return c}return c}function Ax(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}let U2=class a0{constructor(t,n){this.type=st,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Sm(t[1])){const r=t[1];if(r.type==="FeatureCollection")return new a0(r,r.features.map(a=>Ax(a.geometry)).flat());if(r.type==="Feature")return new a0(r,Ax(r.geometry));if("type"in r&&"coordinates"in r)return new a0(r,Ax(r))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return aB(t,this.geometries);if(t.geometryType()==="LineString")return sB(t,this.geometries);if(t.geometryType()==="Polygon")return lB(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}};const V2={"==":I8,"!=":P8,">":A8,"<":M8,">=":R8,"<=":L8,array:Ga,at:o8,boolean:Ga,case:u8,coalesce:z3,collator:O3,format:D8,image:$8,in:a8,"index-of":s8,interpolate:kc,"interpolate-hcl":kc,"interpolate-lab":kc,length:O8,let:w3,literal:zh,match:l8,number:Ga,"number-format":z8,object:Ga,slice:c8,step:A3,string:Ga,"to-boolean":uh,"to-color":uh,"to-number":uh,"to-string":uh,var:C3,within:Ec,distance:U2};class Za{constructor(t,n,r,a){this.name=t,this.type=n,this._evaluate=r,this.args=a}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const r=t[0],a=Za.definitions[r];if(!a)return n.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0);const c=Array.isArray(a)?a[0]:a.type,h=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,l=h.filter(([w])=>!Array.isArray(w)||w.length===t.length-1);let b=null;for(const[w,I]of l){b=new x3(n.registry,X0,n.path,null,n.scope);const k=[];let P=!1;for(let R=1;R<t.length;R++){const $=t[R],U=Array.isArray(w)?w[R-1]:w.type,Z=b.parse($,1+k.length,U);if(!Z){P=!0;break}k.push(Z)}if(!P){if(Array.isArray(w)&&w.length!==k.length){b.error(`Expected ${w.length} arguments, but found ${k.length} instead.`);continue}for(let R=0;R<k.length;R++){const $=Array.isArray(w)?w[R]:w.type,U=k[R];b.concat(R+1).checkSubtype($,U.type)}if(b.errors.length===0)return new Za(r,c,I,k)}}if(l.length===1)n.errors.push(...b.errors);else{const w=(l.length?l:h).map(([k])=>cB(k)).join(" | "),I=[];for(let k=1;k<t.length;k++){const P=n.parse(t[k],1+I.length);if(!P)return null;I.push(Cr(P.type))}n.error(`Expected arguments of type ${w}, but found (${I.join(", ")}) instead.`)}return null}static register(t,n){Za.definitions=n;for(const r in n)t[r]=Za}}function aT(e,[t,n,r,a]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const c=a?a.evaluate(e):1,h=y3(t,n,r,c);if(h)throw new Hr(h);return new kr(t/255,n/255,r/255,c,!1)}function sT(e,t){return e in t}function Lx(e,t){const n=t[e];return typeof n>"u"?null:n}function uB(e,t,n,r){for(;n<=r;){const a=n+r>>1;if(t[a]===e)return!0;t[a]>e?r=a-1:n=a+1}return!1}function nc(e){return{type:e}}Za.register(V2,{error:[GO,[pn],(e,[t])=>{throw new Hr(t.evaluate(e))}],typeof:[pn,[Jt],(e,[t])=>Cr(ai(t.evaluate(e)))],"to-rgba":[Qo(st,4),[ws],(e,[t])=>{const[n,r,a,c]=t.evaluate(e).rgb;return[n*255,r*255,a*255,c]}],rgb:[ws,[st,st,st],aT],rgba:[ws,[st,st,st,st],aT],has:{type:Yt,overloads:[[[pn],(e,[t])=>sT(t.evaluate(e),e.properties())],[[pn,bh],(e,[t,n])=>sT(t.evaluate(e),n.evaluate(e))]]},get:{type:Jt,overloads:[[[pn],(e,[t])=>Lx(t.evaluate(e),e.properties())],[[pn,bh],(e,[t,n])=>Lx(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Jt,[pn],(e,[t])=>Lx(t.evaluate(e),e.featureState||{})],properties:[bh,[],e=>e.properties()],"geometry-type":[pn,[],e=>e.geometryType()],id:[Jt,[],e=>e.id()],zoom:[st,[],e=>e.globals.zoom],"heatmap-density":[st,[],e=>e.globals.heatmapDensity||0],"line-progress":[st,[],e=>e.globals.lineProgress||0],accumulated:[Jt,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[st,nc(st),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[st,nc(st),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:st,overloads:[[[st,st],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[st],(e,[t])=>-t.evaluate(e)]]},"/":[st,[st,st],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[st,[st,st],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[st,[],()=>Math.LN2],pi:[st,[],()=>Math.PI],e:[st,[],()=>Math.E],"^":[st,[st,st],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[st,[st],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[st,[st],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[st,[st],(e,[t])=>Math.log(t.evaluate(e))],log2:[st,[st],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[st,[st],(e,[t])=>Math.sin(t.evaluate(e))],cos:[st,[st],(e,[t])=>Math.cos(t.evaluate(e))],tan:[st,[st],(e,[t])=>Math.tan(t.evaluate(e))],asin:[st,[st],(e,[t])=>Math.asin(t.evaluate(e))],acos:[st,[st],(e,[t])=>Math.acos(t.evaluate(e))],atan:[st,[st],(e,[t])=>Math.atan(t.evaluate(e))],min:[st,nc(st),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[st,nc(st),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[st,[st],(e,[t])=>Math.abs(t.evaluate(e))],round:[st,[st],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[st,[st],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[st,[st],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Yt,[pn,Jt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Yt,[Jt],(e,[t])=>e.id()===t.value],"filter-type-==":[Yt,[pn],(e,[t])=>e.geometryType()===t.value],"filter-<":[Yt,[pn,Jt],(e,[t,n])=>{const r=e.properties()[t.value],a=n.value;return typeof r==typeof a&&r<a}],"filter-id-<":[Yt,[Jt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[Yt,[pn,Jt],(e,[t,n])=>{const r=e.properties()[t.value],a=n.value;return typeof r==typeof a&&r>a}],"filter-id->":[Yt,[Jt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[Yt,[pn,Jt],(e,[t,n])=>{const r=e.properties()[t.value],a=n.value;return typeof r==typeof a&&r<=a}],"filter-id-<=":[Yt,[Jt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[Yt,[pn,Jt],(e,[t,n])=>{const r=e.properties()[t.value],a=n.value;return typeof r==typeof a&&r>=a}],"filter-id->=":[Yt,[Jt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[Yt,[Jt],(e,[t])=>t.value in e.properties()],"filter-has-id":[Yt,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Yt,[Qo(pn)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Yt,[Qo(Jt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Yt,[pn,Qo(Jt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Yt,[pn,Qo(Jt)],(e,[t,n])=>uB(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Yt,overloads:[[[Yt,Yt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[nc(Yt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Yt,overloads:[[[Yt,Yt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[nc(Yt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Yt,[Yt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Yt,[pn],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[pn,[pn],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[pn,[pn],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[pn,nc(Jt),(e,t)=>t.map(n=>Kf(n.evaluate(e))).join("")],"resolved-locale":[pn,[Fv],(e,[t])=>t.evaluate(e).resolvedLocale()]});function cB(e){return Array.isArray(e)?`(${e.map(Cr).join(", ")})`:`(${Cr(e.type)}...)`}function X0(e){if(e instanceof C3)return X0(e.boundExpression);if(e instanceof Za&&e.name==="error"||e instanceof O3||e instanceof Ec||e instanceof U2)return!1;const t=e instanceof uh||e instanceof Ga;let n=!0;return e.eachChild(r=>{t?n=n&&X0(r):n=n&&r instanceof zh}),n?Wv(e)&&qv(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Wv(e){if(e instanceof Za&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof Ec||e instanceof U2)return!1;let t=!0;return e.eachChild(n=>{t&&!Wv(n)&&(t=!1)}),t}function km(e){if(e instanceof Za&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!km(n)&&(t=!1)}),t}function qv(e,t){if(e instanceof Za&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(r=>{n&&!qv(r,t)&&(n=!1)}),n}function aw(e){return{result:"success",value:e}}function Gd(e){return{result:"error",value:e}}function Y0(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function Z3(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function K3(e){return!!e.expression&&e.expression.interpolated}function jn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function W2(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class dB{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new _3,this._defaultValue=n?fB(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,r,a,c,h){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=r,this._evaluator.canonical=a,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=h,this.expression.evaluate(this._evaluator)}evaluate(t,n,r,a,c,h){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=r||null,this._evaluator.canonical=a,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=h||null;try{const l=this.expression.evaluate(this._evaluator);if(l==null||typeof l=="number"&&l!==l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new Hr(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(l)} instead.`);return l}catch(l){return this._warningHistory[l.message]||(this._warningHistory[l.message]=!0,typeof console<"u"&&console.warn(l.message)),this._defaultValue}}}function X3(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in V2}function Y3(e,t){const n=new x3(V2,X0,[],t?pB(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return r?aw(new dB(r,t)):Gd(n.errors)}class lT{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!km(n.expression)}evaluateWithoutErrorHandling(t,n,r,a,c,h){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,a,c,h)}evaluate(t,n,r,a,c,h){return this._styleExpression.evaluate(t,n,r,a,c,h)}}let uT=class{constructor(t,n,r,a){this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!km(n.expression),this.interpolationType=a}evaluateWithoutErrorHandling(t,n,r,a,c,h){return this._styleExpression.evaluateWithoutErrorHandling(t,n,r,a,c,h)}evaluate(t,n,r,a,c,h){return this._styleExpression.evaluate(t,n,r,a,c,h)}interpolationFactor(t,n,r){return this.interpolationType?kc.interpolationFactor(this.interpolationType,t,n,r):0}};function hB(e,t){const n=Y3(e,t);if(n.result==="error")return n;const r=n.value.expression,a=Wv(r);if(!a&&!Y0(t))return Gd([new gs("","data expressions not supported")]);const c=qv(r,["zoom"]);if(!c&&!Z3(t))return Gd([new gs("","zoom expressions not supported")]);const h=s0(r);if(!h&&!c)return Gd([new gs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(h instanceof gs)return Gd([h]);if(h instanceof kc&&!K3(t))return Gd([new gs("",'"interpolate" expressions cannot be used with this property')]);if(!h)return aw(a?new lT("constant",n.value):new lT("source",n.value));const l=h instanceof kc?h.interpolation:void 0;return aw(a?new uT("camera",n.value,h.labels,l):new uT("composite",n.value,h.labels,l))}function s0(e){let t=null;if(e instanceof w3)t=s0(e.result);else if(e instanceof z3){for(const n of e.args)if(t=s0(n),t)break}else(e instanceof A3||e instanceof kc)&&e.input instanceof Za&&e.input.name==="zoom"&&(t=e);return t instanceof gs||e.eachChild(n=>{const r=s0(n);r instanceof gs?t=r:!t&&r?t=new gs("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&r&&t!==r&&(t=new gs("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function pB(e){const t={color:ws,string:pn,number:st,enum:pn,boolean:Yt,formatted:Nv,padding:jv,resolvedImage:Hm,variableAnchorOffsetCollection:Uv};return e.type==="array"?Qo(t[e.value]||Jt,e.length):t[e.type]}function fB(e){return e.type==="color"&&W2(e.default)?new kr(0,0,0,0):e.type==="color"?kr.parse(e.default)||null:e.type==="padding"?Ss.parse(e.default)||null:e.type==="variableAnchorOffsetCollection"?al.parse(e.default)||null:e.default===void 0?null:e.default}function J3(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!J3(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function Q3(e){const t=e.key,n=e.value;return n?[new ot(t,n,"constants have been deprecated as of v8")]:[]}function jr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Rc(e){if(Array.isArray(e))return e.map(Rc);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Rc(e[n]);return t}return jr(e)}function Ea(e){const t=e.key,n=e.value,r=e.valueSpec||{},a=e.objectElementValidators||{},c=e.style,h=e.styleSpec,l=e.validateSpec;let b=[];const w=jn(n);if(w!=="object")return[new ot(t,n,`object expected, ${w} found`)];for(const I in n){const k=I.split(".")[0],P=r[k]||r["*"];let R;if(a[k])R=a[k];else if(r[k])R=l;else if(a["*"])R=a["*"];else if(r["*"])R=l;else{b.push(new ot(t,n[I],`unknown property "${I}"`));continue}b=b.concat(R({key:(t&&`${t}.`)+I,value:n[I],valueSpec:P,style:c,styleSpec:h,object:n,objectKey:I,validateSpec:l},n))}for(const I in r)a[I]||r[I].required&&r[I].default===void 0&&n[I]===void 0&&b.push(new ot(t,n,`missing required property "${I}"`));return b}function q2(e){const t=e.value,n=e.valueSpec,r=e.validateSpec,a=e.style,c=e.styleSpec,h=e.key,l=e.arrayElementValidator||r;if(jn(t)!=="array")return[new ot(h,t,`array expected, ${jn(t)} found`)];if(n.length&&t.length!==n.length)return[new ot(h,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new ot(h,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let b={type:n.value,values:n.values};c.$version<7&&(b.function=n.function),jn(n.value)==="object"&&(b=n.value);let w=[];for(let I=0;I<t.length;I++)w=w.concat(l({array:t,arrayIndex:I,value:t[I],valueSpec:b,validateSpec:e.validateSpec,style:a,styleSpec:c,key:`${h}[${I}]`}));return w}function H2(e){const t=e.key,n=e.value,r=e.valueSpec;let a=jn(n);return a==="number"&&n!==n&&(a="NaN"),a!=="number"?[new ot(t,n,`number expected, ${a} found`)]:"minimum"in r&&n<r.minimum?[new ot(t,n,`${n} is less than the minimum value ${r.minimum}`)]:"maximum"in r&&n>r.maximum?[new ot(t,n,`${n} is greater than the maximum value ${r.maximum}`)]:[]}function eA(e){const t=e.valueSpec,n=jr(e.value.type);let r,a={},c,h;const l=n!=="categorical"&&e.value.property===void 0,b=!l,w=jn(e.value.stops)==="array"&&jn(e.value.stops[0])==="array"&&jn(e.value.stops[0][0])==="object",I=Ea({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:k,default:$}});return n==="identity"&&l&&I.push(new ot(e.key,e.value,'missing required property "property"')),n!=="identity"&&!e.value.stops&&I.push(new ot(e.key,e.value,'missing required property "stops"')),n==="exponential"&&e.valueSpec.expression&&!K3(e.valueSpec)&&I.push(new ot(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(b&&!Y0(e.valueSpec)?I.push(new ot(e.key,e.value,"property functions not supported")):l&&!Z3(e.valueSpec)&&I.push(new ot(e.key,e.value,"zoom functions not supported"))),(n==="categorical"||w)&&e.value.property===void 0&&I.push(new ot(e.key,e.value,'"property" property is required')),I;function k(U){if(n==="identity")return[new ot(U.key,U.value,'identity function may not have a "stops" property')];let Z=[];const D=U.value;return Z=Z.concat(q2({key:U.key,value:D,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:P})),jn(D)==="array"&&D.length===0&&Z.push(new ot(U.key,D,"array must have at least one stop")),Z}function P(U){let Z=[];const D=U.value,O=U.key;if(jn(D)!=="array")return[new ot(O,D,`array expected, ${jn(D)} found`)];if(D.length!==2)return[new ot(O,D,`array length 2 expected, length ${D.length} found`)];if(w){if(jn(D[0])!=="object")return[new ot(O,D,`object expected, ${jn(D[0])} found`)];if(D[0].zoom===void 0)return[new ot(O,D,"object stop key must have zoom")];if(D[0].value===void 0)return[new ot(O,D,"object stop key must have value")];if(h&&h>jr(D[0].zoom))return[new ot(O,D[0].zoom,"stop zoom values must appear in ascending order")];jr(D[0].zoom)!==h&&(h=jr(D[0].zoom),c=void 0,a={}),Z=Z.concat(Ea({key:`${O}[0]`,value:D[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:H2,value:R}}))}else Z=Z.concat(R({key:`${O}[0]`,value:D[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},D));return X3(Rc(D[1]))?Z.concat([new ot(`${O}[1]`,D[1],"expressions are not allowed in function stops.")]):Z.concat(U.validateSpec({key:`${O}[1]`,value:D[1],valueSpec:t,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function R(U,Z){const D=jn(U.value),O=jr(U.value),F=U.value!==null?U.value:Z;if(!r)r=D;else if(D!==r)return[new ot(U.key,F,`${D} stop domain type must match previous stop domain type ${r}`)];if(D!=="number"&&D!=="string"&&D!=="boolean")return[new ot(U.key,F,"stop domain value must be a number, string, or boolean")];if(D!=="number"&&n!=="categorical"){let G=`number expected, ${D} found`;return Y0(t)&&n===void 0&&(G+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ot(U.key,F,G)]}return n==="categorical"&&D==="number"&&(!isFinite(O)||Math.floor(O)!==O)?[new ot(U.key,F,`integer expected, found ${O}`)]:n!=="categorical"&&D==="number"&&c!==void 0&&O<c?[new ot(U.key,F,"stop domain values must appear in ascending order")]:(c=O,n==="categorical"&&O in a?[new ot(U.key,F,"stop domain values must be unique")]:(a[O]=!0,[]))}function $(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:t,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function Dh(e){const t=(e.expressionContext==="property"?hB:Y3)(Rc(e.value),e.valueSpec);if(t.result==="error")return t.value.map(r=>new ot(`${e.key}${r.key}`,e.value,r.message));const n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new ot(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!km(n))return[new ot(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!km(n))return[new ot(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!qv(n,["zoom","feature-state"]))return[new ot(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Wv(n))return[new ot(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function mB(e){const t=e.value,n=e.key,r=jn(t);return r!=="boolean"?[new ot(n,t,`boolean expected, ${r} found`)]:[]}function gB(e){const t=e.key,n=e.value,r=jn(n);return r!=="string"?[new ot(t,n,`color expected, ${r} found`)]:kr.parse(String(n))?[]:[new ot(t,n,`color expected, "${n}" found`)]}function Em(e){const t=e.key,n=e.value,r=e.valueSpec,a=[];return Array.isArray(r.values)?r.values.indexOf(jr(n))===-1&&a.push(new ot(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(r.values).indexOf(jr(n))===-1&&a.push(new ot(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),a}function G2(e){return J3(Rc(e.value))?Dh(q0({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):tA(e)}function tA(e){const t=e.value,n=e.key;if(jn(t)!=="array")return[new ot(n,t,`array expected, ${jn(t)} found`)];const r=e.styleSpec;let a,c=[];if(t.length<1)return[new ot(n,t,"filter array must have at least 1 element")];switch(c=c.concat(Em({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),jr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&jr(t[1])==="$type"&&c.push(new ot(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&c.push(new ot(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(a=jn(t[1]),a!=="string"&&c.push(new ot(`${n}[1]`,t[1],`string expected, ${a} found`)));for(let h=2;h<t.length;h++)a=jn(t[h]),jr(t[1])==="$type"?c=c.concat(Em({key:`${n}[${h}]`,value:t[h],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):a!=="string"&&a!=="number"&&a!=="boolean"&&c.push(new ot(`${n}[${h}]`,t[h],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let h=1;h<t.length;h++)c=c.concat(tA({key:`${n}[${h}]`,value:t[h],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=jn(t[1]),t.length!==2?c.push(new ot(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):a!=="string"&&c.push(new ot(`${n}[1]`,t[1],`string expected, ${a} found`));break}return c}function nA(e,t){const n=e.key,r=e.validateSpec,a=e.style,c=e.styleSpec,h=e.value,l=e.objectKey,b=c[`${t}_${e.layerType}`];if(!b)return[];const w=l.match(/^(.*)-transition$/);if(t==="paint"&&w&&b[w[1]]&&b[w[1]].transition)return r({key:n,value:h,valueSpec:c.transition,style:a,styleSpec:c});const I=e.valueSpec||b[l];if(!I)return[new ot(n,h,`unknown property "${l}"`)];let k;if(jn(h)==="string"&&Y0(I)&&!I.tokens&&(k=/^{([^}]+)}$/.exec(h)))return[new ot(n,h,`"${l}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const P=[];return e.layerType==="symbol"&&(l==="text-field"&&a&&!a.glyphs&&P.push(new ot(n,h,'use of "text-field" requires a style "glyphs" property')),l==="text-font"&&W2(Rc(h))&&jr(h.type)==="identity"&&P.push(new ot(n,h,'"text-font" does not support identity functions'))),P.concat(r({key:e.key,value:h,valueSpec:I,style:a,styleSpec:c,expressionContext:"property",propertyType:t,propertyKey:l}))}function rA(e){return nA(e,"paint")}function iA(e){return nA(e,"layout")}function oA(e){let t=[];const n=e.value,r=e.key,a=e.style,c=e.styleSpec;!n.type&&!n.ref&&t.push(new ot(r,n,'either "type" or "ref" is required'));let h=jr(n.type);const l=jr(n.ref);if(n.id){const b=jr(n.id);for(let w=0;w<e.arrayIndex;w++){const I=a.layers[w];jr(I.id)===b&&t.push(new ot(r,n.id,`duplicate layer id "${n.id}", previously used at line ${I.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(w=>{w in n&&t.push(new ot(r,n[w],`"${w}" is prohibited for ref layers`))});let b;a.layers.forEach(w=>{jr(w.id)===l&&(b=w)}),b?b.ref?t.push(new ot(r,n.ref,"ref cannot reference another ref layer")):h=jr(b.type):t.push(new ot(r,n.ref,`ref layer "${l}" not found`))}else if(h!=="background")if(!n.source)t.push(new ot(r,n,'missing required property "source"'));else{const b=a.sources&&a.sources[n.source],w=b&&jr(b.type);b?w==="vector"&&h==="raster"?t.push(new ot(r,n.source,`layer "${n.id}" requires a raster source`)):w!=="raster-dem"&&h==="hillshade"?t.push(new ot(r,n.source,`layer "${n.id}" requires a raster-dem source`)):w==="raster"&&h!=="raster"?t.push(new ot(r,n.source,`layer "${n.id}" requires a vector source`)):w==="vector"&&!n["source-layer"]?t.push(new ot(r,n,`layer "${n.id}" must specify a "source-layer"`)):w==="raster-dem"&&h!=="hillshade"?t.push(new ot(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):h==="line"&&n.paint&&n.paint["line-gradient"]&&(w!=="geojson"||!b.lineMetrics)&&t.push(new ot(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new ot(r,n.source,`source "${n.source}" not found`))}return t=t.concat(Ea({key:r,value:n,valueSpec:c.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${r}.type`,value:n.type,valueSpec:c.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"})},filter:G2,layout(b){return Ea({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return iA(q0({layerType:h},w))}}})},paint(b){return Ea({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return rA(q0({layerType:h},w))}}})}}})),t}function zc(e){const t=e.value,n=e.key,r=jn(t);return r!=="string"?[new ot(n,t,`string expected, ${r} found`)]:[]}function yB(e){var t;const n=(t=e.sourceName)!==null&&t!==void 0?t:"",r=e.value,a=e.styleSpec,c=a.source_raster_dem,h=e.style;let l=[];const b=jn(r);if(r===void 0)return l;if(b!=="object")return l.push(new ot("source_raster_dem",r,`object expected, ${b} found`)),l;const w=jr(r.encoding)==="custom",I=["redFactor","greenFactor","blueFactor","baseShift"],k=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const P in r)!w&&I.includes(P)?l.push(new ot(P,r[P],`In "${n}": "${P}" is only valid when "encoding" is set to "custom". ${k} encoding found`)):c[P]?l=l.concat(e.validateSpec({key:P,value:r[P],valueSpec:c[P],validateSpec:e.validateSpec,style:h,styleSpec:a})):l.push(new ot(P,r[P],`unknown property "${P}"`));return l}const cT={promoteId:vB};function aA(e){const t=e.value,n=e.key,r=e.styleSpec,a=e.style,c=e.validateSpec;if(!t.type)return[new ot(n,t,'"type" is required')];const h=jr(t.type);let l;switch(h){case"vector":case"raster":return l=Ea({key:n,value:t,valueSpec:r[`source_${h.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:cT,validateSpec:c}),l;case"raster-dem":return l=yB({sourceName:n,value:t,style:e.style,styleSpec:r,validateSpec:c}),l;case"geojson":if(l=Ea({key:n,value:t,valueSpec:r.source_geojson,style:a,styleSpec:r,validateSpec:c,objectElementValidators:cT}),t.cluster)for(const b in t.clusterProperties){const[w,I]=t.clusterProperties[b],k=typeof w=="string"?[w,["accumulated"],["get",b]]:w;l.push(...Dh({key:`${n}.${b}.map`,value:I,validateSpec:c,expressionContext:"cluster-map"})),l.push(...Dh({key:`${n}.${b}.reduce`,value:k,validateSpec:c,expressionContext:"cluster-reduce"}))}return l;case"video":return Ea({key:n,value:t,valueSpec:r.source_video,style:a,validateSpec:c,styleSpec:r});case"image":return Ea({key:n,value:t,valueSpec:r.source_image,style:a,validateSpec:c,styleSpec:r});case"canvas":return[new ot(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Em({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,validateSpec:c,styleSpec:r})}}function vB({key:e,value:t}){if(jn(t)==="string")return zc({key:e,value:t});{const n=[];for(const r in t)n.push(...zc({key:`${e}.${r}`,value:t[r]}));return n}}function sA(e){const t=e.value,n=e.styleSpec,r=n.light,a=e.style;let c=[];const h=jn(t);if(t===void 0)return c;if(h!=="object")return c=c.concat([new ot("light",t,`object expected, ${h} found`)]),c;for(const l in t){const b=l.match(/^(.*)-transition$/);b&&r[b[1]]&&r[b[1]].transition?c=c.concat(e.validateSpec({key:l,value:t[l],valueSpec:n.transition,validateSpec:e.validateSpec,style:a,styleSpec:n})):r[l]?c=c.concat(e.validateSpec({key:l,value:t[l],valueSpec:r[l],validateSpec:e.validateSpec,style:a,styleSpec:n})):c=c.concat([new ot(l,t[l],`unknown property "${l}"`)])}return c}function lA(e){const t=e.value,n=e.styleSpec,r=n.sky,a=e.style,c=jn(t);if(t===void 0)return[];if(c!=="object")return[new ot("sky",t,`object expected, ${c} found`)];let h=[];for(const l in t)r[l]?h=h.concat(e.validateSpec({key:l,value:t[l],valueSpec:r[l],style:a,styleSpec:n})):h=h.concat([new ot(l,t[l],`unknown property "${l}"`)]);return h}function uA(e){const t=e.value,n=e.styleSpec,r=n.terrain,a=e.style;let c=[];const h=jn(t);if(t===void 0)return c;if(h!=="object")return c=c.concat([new ot("terrain",t,`object expected, ${h} found`)]),c;for(const l in t)r[l]?c=c.concat(e.validateSpec({key:l,value:t[l],valueSpec:r[l],validateSpec:e.validateSpec,style:a,styleSpec:n})):c=c.concat([new ot(l,t[l],`unknown property "${l}"`)]);return c}function _B(e){return zc(e).length===0?[]:Dh(e)}function xB(e){return zc(e).length===0?[]:Dh(e)}function bB(e){const t=e.key,n=e.value;if(jn(n)==="array"){if(n.length<1||n.length>4)return[new ot(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const r={type:"number"};let a=[];for(let c=0;c<n.length;c++)a=a.concat(e.validateSpec({key:`${t}[${c}]`,value:n[c],validateSpec:e.validateSpec,valueSpec:r}));return a}else return H2({key:t,value:n,valueSpec:{}})}function wB(e){const t=e.key,n=e.value,r=jn(n),a=e.styleSpec;if(r!=="array"||n.length<1||n.length%2!==0)return[new ot(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let c=[];for(let h=0;h<n.length;h+=2)c=c.concat(Em({key:`${t}[${h}]`,value:n[h],valueSpec:a.layout_symbol["text-anchor"]})),c=c.concat(q2({key:`${t}[${h+1}]`,value:n[h+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:a}));return c}function cA(e){let t=[];const n=e.value,r=e.key;if(Array.isArray(n)){const a=[],c=[];for(const h in n){n[h].id&&a.includes(n[h].id)&&t.push(new ot(r,n,`all the sprites' ids must be unique, but ${n[h].id} is duplicated`)),a.push(n[h].id),n[h].url&&c.includes(n[h].url)&&t.push(new ot(r,n,`all the sprites' URLs must be unique, but ${n[h].url} is duplicated`)),c.push(n[h].url);const l={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(Ea({key:`${r}[${h}]`,value:n[h],valueSpec:l,validateSpec:e.validateSpec}))}return t}else return zc({key:r,value:n})}function SB(e){const t=e.value,n=e.styleSpec,r=n.projection,a=e.style,c=jn(t);if(t===void 0)return[];if(c!=="object")return[new ot("projection",t,`object expected, ${c} found`)];let h=[];for(const l in t)r[l]?h=h.concat(e.validateSpec({key:l,value:t[l],valueSpec:r[l],style:a,styleSpec:n})):h=h.concat([new ot(l,t[l],`unknown property "${l}"`)]);return h}const dT={"*"(){return[]},array:q2,boolean:mB,number:H2,color:gB,constants:Q3,enum:Em,filter:G2,function:eA,layer:oA,object:Ea,source:aA,light:sA,sky:lA,terrain:uA,projection:SB,string:zc,formatted:_B,resolvedImage:xB,padding:bB,variableAnchorOffsetCollection:wB,sprite:cA};function Xf(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return e.validateSpec=Xf,n.expression&&W2(jr(t))?eA(e):n.expression&&X3(Rc(t))?Dh(e):n.type&&dT[n.type]?dT[n.type](e):Ea(q0({},e,{valueSpec:n.type?r[n.type]:n}))}function dA(e){const t=e.value,n=e.key,r=zc(e);return r.length||(t.indexOf("{fontstack}")===-1&&r.push(new ot(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&r.push(new ot(n,t,'"glyphs" url must include a "{range}" token'))),r}function La(e,t=qO){let n=[];return n=n.concat(Xf({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:Xf,objectElementValidators:{glyphs:dA,"*"(){return[]}}})),e.constants&&(n=n.concat(Q3({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:Xf}))),hA(n)}La.source=Ts(Es(aA));La.sprite=Ts(Es(cA));La.glyphs=Ts(Es(dA));La.light=Ts(Es(sA));La.sky=Ts(Es(lA));La.terrain=Ts(Es(uA));La.layer=Ts(Es(oA));La.filter=Ts(Es(G2));La.paintProperty=Ts(Es(rA));La.layoutProperty=Ts(Es(iA));function Es(e){return function(t){return e({...t,validateSpec:Xf})}}function hA(e){return[].concat(e).sort((t,n)=>t.line-n.line)}function Ts(e){return function(...t){return hA(e.apply(this,t))}}function hT(e){if(!e)return{style:yh[Zf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=kB(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:yh[Zf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:CB(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:RM(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof zM?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof DM?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:La(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:yh[Zf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function CB(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function kB(e){try{const t=JSON.parse(e),n=La(t);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}class EB{constructor(){Nn(this,"_map"),Nn(this,"_container"),Nn(this,"_terrainButton"),X$(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=xh("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=xh("button","maplibregl-ctrl-terrain",this._container),xh("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){a3(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class TB extends eO{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),Nn(this,"_rotateCompassArrow",()=>{const n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const r=super._createButton(t,n);return r.clickFunction=n,r}}const pT=Pt.Marker,fT=Pt.LngLat,IB=Pt.LngLatBounds;class PB extends tO{constructor(){super(...arguments),Nn(this,"lastUpdatedCenter",new fT(0,0)),Nn(this,"_updateCamera",t=>{var n,r;const a=new fT(t.coords.longitude,t.coords.latitude),c=t.coords.accuracy,h={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},l=this._map.getZoom();l>(((r=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:r.maxZoom)??30)&&(h.zoom=l),this._map.fitBounds(IB.fromLngLat(a,c),h,{geolocateSource:!0});let b=!1;const w=()=>{b=!0};this._map.once("click",w),this._map.once("dblclick",w),this._map.once("dragstart",w),this._map.once("mousedown",w),this._map.once("touchstart",w),this._map.once("wheel",w),this._map.once("moveend",()=>{this._map.off("click",w),this._map.off("dblclick",w),this._map.off("dragstart",w),this._map.off("mousedown",w),this._map.off("touchstart",w),this._map.off("wheel",w),!b&&(this.lastUpdatedCenter=this._map.getCenter())})}),Nn(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=xh("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pT({element:this._dotElement}),this._circleElement=xh("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pT({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const r=n.originalEvent&&n.originalEvent.type==="resize",a=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!r&&a>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),Nn(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),r=this._map.unproject([n.x,n.y]),a=this._map.unproject([n.x+20,n.y]),c=r.distanceTo(a)/20,h=Math.ceil(2*this._accuracy/c);this._circleElement.style.width=`${h}px`,this._circleElement.style.height=`${h}px`}}var Xo,hs,lc,uc,ya,l0,lo,pA,_a,fA;class Rx{constructor(t,n){tc(this,lo),tc(this,Xo),Nn(this,"map"),tc(this,hs),tc(this,lc),tc(this,uc),tc(this,ya,!1),tc(this,l0),t.style!==void 0&&qd(this,ya,!0),qd(this,Xo,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(En(this,Xo).minZoom=t.lockZoom,En(this,Xo).maxZoom=t.lockZoom)}setStyle(t,n){En(this,ya)||this.map.setStyle(t,n),Ko(this,lo,_a).call(this)}addLayer(t,n){return En(this,ya)||this.map.addLayer(t,n),Ko(this,lo,_a).call(this),this.map}moveLayer(t,n){return En(this,ya)||this.map.moveLayer(t,n),Ko(this,lo,_a).call(this),this.map}removeLayer(t){return En(this,ya)||this.map.removeLayer(t),Ko(this,lo,_a).call(this),this}setLayerZoomRange(t,n,r){return En(this,ya)||this.map.setLayerZoomRange(t,n,r),Ko(this,lo,_a).call(this),this}setFilter(t,n,r){return En(this,ya)||this.map.setFilter(t,n,r),Ko(this,lo,_a).call(this),this}setPaintProperty(t,n,r,a){return En(this,ya)||this.map.setPaintProperty(t,n,r,a),Ko(this,lo,_a).call(this),this}setLayoutProperty(t,n,r,a){return En(this,ya)||this.map.setLayoutProperty(t,n,r,a),Ko(this,lo,_a).call(this),this}setGlyphs(t,n){return En(this,ya)||this.map.setGlyphs(t,n),Ko(this,lo,_a).call(this),this}onAdd(t){qd(this,hs,t),qd(this,lc,xh("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,r]of Object.entries(En(this,Xo).containerStyle))En(this,lc).style.setProperty(n,r);return En(this,Xo).container=En(this,lc),En(this,Xo).zoom=t.getZoom()+En(this,Xo).zoomAdjust,this.map=new mA(En(this,Xo)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Ko(this,lo,pA).call(this,En(this,Xo).parentRect),qd(this,l0,Ko(this,lo,fA).call(this))}),En(this,lc)}onRemove(){var t;(t=En(this,l0))==null||t.call(this),a3(En(this,lc))}}Xo=new WeakMap,hs=new WeakMap,lc=new WeakMap,uc=new WeakMap,ya=new WeakMap,l0=new WeakMap,lo=new WeakSet,pA=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(qd(this,uc,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:En(this,uc)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Ko(this,lo,_a).call(this))},_a=function(){if(En(this,uc)===void 0)return;const{devicePixelRatio:e}=window,t=En(this,hs).getCanvas(),n=t.width/e,r=t.height/e,a=En(this,hs).unproject.bind(En(this,hs)),c=a([0,0]),h=a([n,0]),l=a([0,r]),b=a([n,r]);En(this,uc).geometry.coordinates=[[l.toArray(),b.toArray(),h.toArray(),c.toArray(),l.toArray()]],this.map.getSource("parentRect").setData(En(this,uc))},fA=function(){const{pitchAdjust:e}=En(this,Xo),t=()=>{c("parent")},n=()=>{c("minimap")},r=()=>{En(this,hs).on("move",t),this.map.on("move",n)},a=()=>{En(this,hs).off("move",t),this.map.off("move",n)},c=h=>{a();const l=h==="parent"?En(this,hs):this.map,b=h==="parent"?this.map:En(this,hs),w=l.getCenter(),I=l.getZoom()+En(this,Xo).zoomAdjust*(h==="parent"?1:-1),k=l.getBearing(),P=l.getPitch();b.jumpTo({center:w,zoom:I,bearing:k,pitch:e?P:0}),Ko(this,lo,_a).call(this),r()};return r(),()=>{a()}};const MB={POINT:"POINT",COUNTRY:"COUNTRY"};class mA extends Pt.Map{constructor(t){J$(t.container),t.apiKey&&(co.apiKey=t.apiKey);const{style:n,requiresUrlMonitoring:r,isFallback:a}=hT(t.style);a&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),co.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const c=location.hash;let h={compact:!1};t.customAttribution?h.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(h={...h,...t.attributionControl});const l={...t,style:n,maplibreLogo:!1,transformRequest:qE(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:h};delete l.style,super(l),Nn(this,"isTerrainEnabled",!1),Nn(this,"terrainExaggeration",1),Nn(this,"primaryLanguage"),Nn(this,"terrainGrowing",!1),Nn(this,"terrainFlattening",!1),Nn(this,"minimap"),Nn(this,"forceLanguageUpdate"),Nn(this,"languageAlwaysBeenStyle"),Nn(this,"isReady",!1),Nn(this,"terrainAnimationDuration",1e3),Nn(this,"monitoredStyleUrls"),Nn(this,"styleInProcess",!1),this.setStyle(n),r&&this.monitorStyleUrl(n);const b=()=>{let R="The distant style could not be loaded.";this.getStyle()?R+="Leaving the style as is.":(this.setStyle(yh.STREETS),R+=`Loading default MapTiler Cloud style "${yh.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(R)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",R=>{if(R.error instanceof Pt.AJAXError){const $=R.error.url,U=new URL($);U.search="";const Z=U.href;this.monitoredStyleUrls.has(Z)&&(this.monitoredStyleUrls.delete(Z),b());return}if(this.styleInProcess)return b()}),co.caching&&!Kb&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),co.caching&&Kb&&Z$(),typeof t.language>"u")this.primaryLanguage=co.primaryLanguage;else{const R=ME(t.language,Pn);this.primaryLanguage=R??co.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===Pn.STYLE||this.primaryLanguage===Pn.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Pn.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&c)return;try{if(t.geolocate===MB.COUNTRY){await this.fitToIpBounds();return}}catch($){console.warn($.message)}let R;try{await this.centerOnIpPoint(t.zoom),R=this.getCameraHash()}catch($){console.warn($.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition($=>{R===this.getCameraHash()&&(this.terrain?this.easeTo({center:[$.coords.longitude,$.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[$.coords.longitude,$.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let R={logo:null};try{const $=Object.keys(this.style.sourceCaches).map(Z=>this.getSource(Z)).filter(Z=>Z&&"url"in Z&&typeof Z.url=="string"&&(Z==null?void 0:Z.url.includes("tiles.json"))),U=new URL($[0].url);U.searchParams.has("key")||U.searchParams.append("key",co.apiKey),R=await(await fetch(U.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in R&&R.logo){const $=R.logo;this.addControl(new HE({logoURL:$}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new HE,t.logoPosition);if(t.scaleControl){const $=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,U=new rO({unit:co.unit});this.addControl(U,$),co.on("unit",Z=>{U.setUnit(Z)})}if(t.navigationControl!==!1){const $=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new TB,$)}if(t.geolocateControl!==!1){const $=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new PB({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),$)}if(t.terrainControl){const $=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new EB,$)}if(t.fullscreenControl){const $=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new iO({}),$)}this.isReady=!0,this.fire("ready",{target:this})});let w=!1,I=!1,k;this.once("ready",()=>{w=!0,I&&this.fire("loadWithTerrain",k)}),this.once("style.load",()=>{const{minimap:R}=t;if(typeof R=="object"){const{zoom:$,center:U,style:Z,language:D,apiKey:O,maptilerLogo:F,antialias:G,refreshExpiredTiles:te,maxBounds:oe,scrollZoom:ae,minZoom:le,maxZoom:Ie,boxZoom:K,locale:Ce,fadeDuration:Fe,crossSourceCollisions:De,clickTolerance:Ae,bounds:Re,fitBoundsOptions:Ve,pixelRatio:et,validateStyle:$e}=t;this.minimap=new Rx(R,{zoom:$,center:U,style:Z,language:D,apiKey:O,container:"null",maptilerLogo:F,antialias:G,refreshExpiredTiles:te,maxBounds:oe,scrollZoom:ae,minZoom:le,maxZoom:Ie,boxZoom:K,locale:Ce,fadeDuration:Fe,crossSourceCollisions:De,clickTolerance:Ae,bounds:Re,fitBoundsOptions:Ve,pixelRatio:et,validateStyle:$e}),this.addControl(this.minimap,R.position??"bottom-left")}else R===!0?(this.minimap=new Rx({},t),this.addControl(this.minimap,"bottom-left")):R!==void 0&&R!==!1&&(this.minimap=new Rx({},t),this.addControl(this.minimap,R))});const P=R=>{R.terrain&&(I=!0,k={type:"loadWithTerrain",target:this,terrain:R.terrain},this.off("terrain",P),w&&this.fire("loadWithTerrain",k))};this.on("terrain",P),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",R=>{console.warn(R),Q$(t.container),this.fire("webglContextLost",{error:R})})})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(t);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(t,n){var r;(r=this.minimap)==null||r.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const a=hT(t);if(a.requiresUrlMonitoring&&this.monitorStyleUrl(a.style),a.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(a.style,n),this}addLayer(t,n){var r;return(r=this.minimap)==null||r.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var r;return(r=this.minimap)==null||r.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,r){var a;return(a=this.minimap)==null||a.setLayerZoomRange(t,n,r),super.setLayerZoomRange(t,n,r)}setFilter(t,n,r){var a;return(a=this.minimap)==null||a.setFilter(t,n,r),super.setFilter(t,n,r)}setPaintProperty(t,n,r,a){var c;return(c=this.minimap)==null||c.setPaintProperty(t,n,r,a),super.setPaintProperty(t,n,r,a)}setLayoutProperty(t,n,r,a){var c;return(c=this.minimap)==null||c.setLayoutProperty(t,n,r,a),super.setLayoutProperty(t,n,r,a)}setGlyphs(t,n){var r;return(r=this.minimap)==null||r.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?Wb(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n,r;(r=(n=this.minimap)==null?void 0:n.map)==null||r.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),r=ME(t,Pn);if(!r){console.warn(`The language "${r}" is not supported.`);return}if(!(r.flag===Pn.STYLE.flag&&n&&(n.flag===Pn.AUTO.flag||n.flag===Pn.VISITOR.flag))&&(r.flag!==Pn.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===r&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Pn.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=r;let a=r;if(r.flag===Pn.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}a=n}let c=Pn.LOCAL.flag,h=`{${c}}`;a.flag===Pn.VISITOR.flag?(c=jE().flag,h=["case",["all",["has",c],["has",Pn.LOCAL.flag]],["case",["==",["get",c],["get",Pn.LOCAL.flag]],["get",Pn.LOCAL.flag],["format",["get",c],{"font-scale":.8},`
`,["get",Pn.LOCAL.flag],{"font-scale":1.1}]],["get",Pn.LOCAL.flag]]):a.flag===Pn.VISITOR_ENGLISH.flag?(c=Pn.ENGLISH.flag,h=["case",["all",["has",c],["has",Pn.LOCAL.flag]],["case",["==",["get",c],["get",Pn.LOCAL.flag]],["get",Pn.LOCAL.flag],["format",["get",c],{"font-scale":.8},`
`,["get",Pn.LOCAL.flag],{"font-scale":1.1}]],["get",Pn.LOCAL.flag]]):a.flag===Pn.AUTO.flag?(c=jE().flag,h=["case",["has",c],["get",c],["get",Pn.LOCAL.flag]]):a===Pn.LOCAL?(c=Pn.LOCAL.flag,h=`{${c}}`):(c=a.flag,h=["case",["has",c],["get",c],["get",Pn.LOCAL.flag]]);const{layers:l}=this.getStyle();for(const b of l){if(b.type!=="symbol")continue;const w=b,I=this.getSource(w.source);if(!I||!("url"in I&&typeof I.url=="string")||new URL(I.url).host!==Io.maptilerApiHost)continue;const{id:k,layout:P}=w;if(!P||!("text-field"in P))continue;const R=this.getLayoutProperty(k,"text-field");typeof R=="string"&&(R.toLowerCase().includes("ref")||R.toLowerCase().includes("housenumber"))||this.setLayoutProperty(k,"text-field",h)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const n=performance.now(),r=this.terrain.exaggeration,a=t-r,c=()=>{if(!this.terrain||this.terrainFlattening)return;const h=(performance.now()-n)/this.terrainAnimationDuration;if(h<.99){const l=1-(1-h)**4,b=r+l*a;this.terrain.exaggeration=b,requestAnimationFrame(c)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(c)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=async a=>{!this.terrain||a.type!=="data"||a.dataType!=="source"||!("source"in a)||a.sourceId!=="maptiler-terrain"||a.source.type!=="raster-dem"||a.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},r=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(Io.terrainSourceId,{type:"raster-dem",url:Io.terrainSourceURL}),this.setTerrain({source:Io.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?r():this.once("load",()=>{this.getTerrain()&&this.getSource(Io.terrainSourceId)||r()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),n=this.terrain.exaggeration,r=()=>{if(!this.terrain||this.terrainGrowing)return;const a=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,a<.99){const c=(1-a)**4,h=n*c;this.terrain.exaggeration=h,requestAnimationFrame(r)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(Io.terrainSourceId)&&this.removeSource(Io.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(r)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await LE.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await LE.info();this.jumpTo({center:[(n==null?void 0:n.longitude)??0,(n==null?void 0:n.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),F$.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return co}getMaptilerSessionId(){return i3}setTransformRequest(t){return super.setTransformRequest(qE(t)),this}}function My(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function AB(e){return`#${My(e[0])}${My(e[1])}${My(e[2])}${e.length===4?My(e[3]):""}`}class Ot extends Array{constructor(t={}){super(),Nn(this,"min",0),Nn(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Ot({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const r=n.clone?this.clone():this;r.length=0;let a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let h=0;h<t.length;h+=1)a=Math.min(a,t[h].value),c=Math.max(c,t[h].value),r.push({value:t[h].value,color:t[h].color.slice()});return r.sort((h,l)=>h.value<l.value?-1:1),this.min=a,this.max=c,r}scale(t,n,r={clone:!0}){const a=r.clone,c=this[0].value,h=this.at(-1).value-c,l=n-t,b=[];for(let w=0;w<this.length;w+=1){const I=(this[w].value-c)/h*l+t;a?b.push({value:I,color:this[w].color.slice()}):this[w].value=I}return a?new Ot({stops:b}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Ot({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let r=0;r<~~(n.length/2);r+=1){const a=n[r].color;n[r].color=n.at(-(r+1)).color,n.at(-(r+1)).color=a}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let r=0;r<this.length-1;r+=1){if(t>this[r+1].value)continue;const a=this[r].color;if(!n.smooth)return a.slice();const c=this[r].value,h=this[r+1].value,l=this[r+1].color,b=(h-t)/(h-c);return a.map((w,I)=>Math.round(w*b+l[I]*(1-b)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return AB(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const r=this.getBounds();return this.getColor(r.min+t*(r.max-r.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const r=n.getContext("2d");if(!r)throw new Error("Canvs context is missing");const a=r.getImageData(0,0,n.width,n.height),c=a.data,h=t.size,l=this[0].value,b=(this.at(-1).value-l)/h;for(let w=0;w<h;w+=1){const I=this.getColor(l+w*b,{smooth:t.smooth});c[w*4]=I[0],c[w*4+1]=I[1],c[w*4+2]=I[2],c[w*4+3]=I.length>3?I[3]:255}return r.putImageData(a,0,0),n}resample(t,n=15){const r=this.getBounds(),a=this.scale(0,1),c=1/(n-1);let h;if(t==="ease-in-square")h=Array.from({length:n},(l,b)=>{const w=b*c,I=w**2,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-square")h=Array.from({length:n},(l,b)=>{const w=b*c,I=1-(1-w)**2,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-sqrt")h=Array.from({length:n},(l,b)=>{const w=b*c,I=w**.5,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-in-sqrt")h=Array.from({length:n},(l,b)=>{const w=b*c,I=1-(1-w)**.5,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-exp")h=Array.from({length:n},(l,b)=>{const w=b*c,I=1-2**(-10*w),k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-in-exp")h=Array.from({length:n},(l,b)=>{const w=b*c,I=2**(10*w-10),k=a.getColor(I);return{value:w,color:k}});else throw new Error("Invalid ressampling method.");return new Ot({stops:h}).scale(r.min,r.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new Ot({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Ot({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Ot({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Ot({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Ot({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Ot({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Ot({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Ot({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Ot({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Ot({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Ot({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Ot({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Ot({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Ot({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Ot({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Ot({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Ot({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Ot({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Ot({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Ot({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Ot({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Ot({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Ot({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Ot({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Ot({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Ot({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Ot({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Ot({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Ot({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Ot({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Ot({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Ot({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Ot({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Ot({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});K$();Pt.Map;Pt.Marker;Pt.Popup;Pt.Style;Pt.CanvasSource;Pt.GeoJSONSource;Pt.ImageSource;Pt.RasterTileSource;Pt.RasterDEMTileSource;Pt.VectorTileSource;Pt.VideoSource;Pt.NavigationControl;Pt.GeolocateControl;Pt.AttributionControl;Pt.LogoControl;Pt.ScaleControl;Pt.FullscreenControl;Pt.TerrainControl;Pt.BoxZoomHandler;Pt.ScrollZoomHandler;Pt.CooperativeGesturesHandler;Pt.KeyboardHandler;Pt.TwoFingersTouchPitchHandler;Pt.MapWheelEvent;Pt.MapTouchEvent;Pt.MapMouseEvent;Pt.config;Pt.getVersion;var gA={},LB=Object.defineProperty,yA=e=>{throw TypeError(e)},RB=(e,t,n)=>t in e?LB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mT=(e,t,n)=>RB(e,typeof t!="symbol"?t+"":t,n),vA=(e,t,n)=>t.has(e)||yA("Cannot "+n),ja=(e,t,n)=>(vA(e,t,"read from private field"),t.get(e)),gT=(e,t,n)=>t.has(e)?yA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),zx=(e,t,n,r)=>(vA(e,t,"write to private field"),t.set(e,n),n);function mr(){}function zB(e,t){for(const n in t)e[n]=t[n];return e}function _A(e){return e()}function yT(){return Object.create(null)}function pl(e){e.forEach(_A)}function xA(e){return typeof e=="function"}function ku(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Ay;function Yi(e,t){return e===t?!0:(Ay||(Ay=document.createElement("a")),Ay.href=t,e===Ay.href)}function DB(e){return Object.keys(e).length===0}function $B(e,t,n,r){if(e){const a=bA(e,t,n,r);return e[0](a)}}function bA(e,t,n,r){return e[1]&&r?zB(n.ctx.slice(),e[1](r(t))):n.ctx}function OB(e,t,n,r){if(e[2]&&r){const a=e[2](r(n));if(t.dirty===void 0)return a;if(typeof a=="object"){const c=[],h=Math.max(t.dirty.length,a.length);for(let l=0;l<h;l+=1)c[l]=t.dirty[l]|a[l];return c}return t.dirty|a}return t.dirty}function BB(e,t,n,r,a,c){if(a){const h=bA(t,n,r,c);e.p(h,a)}}function FB(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function vT(e){return e??""}function Tn(e,t){e.appendChild(t)}function Er(e,t,n){e.insertBefore(t,n||null)}function gr(e){e.parentNode&&e.parentNode.removeChild(e)}function tr(e){return document.createElement(e)}function Ja(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function vu(e){return document.createTextNode(e)}function Jo(){return vu(" ")}function NB(){return vu("")}function po(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function jB(e){return function(t){return t.preventDefault(),e.call(this,t)}}function qe(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function UB(e){return Array.from(e.childNodes)}function Tm(e,t){t=""+t,e.data!==t&&(e.data=t)}function _T(e,t){e.value=t??""}function Ta(e,t,n){e.classList.toggle(t,!!n)}function VB(e,t,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:r})}let Im;function Yf(e){Im=e}function wA(){if(!Im)throw new Error("Function called outside component initialization");return Im}function WB(e){wA().$$.on_destroy.push(e)}function qB(){const e=wA();return(t,n,{cancelable:r=!1}={})=>{const a=e.$$.callbacks[t];if(a){const c=VB(t,n,{cancelable:r});return a.slice().forEach(h=>{h.call(e,c)}),!c.defaultPrevented}return!0}}function xT(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(r=>r.call(this,t))}const Zd=[],sw=[];let Sh=[];const bT=[],HB=Promise.resolve();let lw=!1;function GB(){lw||(lw=!0,HB.then(SA))}function uw(e){Sh.push(e)}const Dx=new Set;let $d=0;function SA(){if($d!==0)return;const e=Im;do{try{for(;$d<Zd.length;){const t=Zd[$d];$d++,Yf(t),ZB(t.$$)}}catch(t){throw Zd.length=0,$d=0,t}for(Yf(null),Zd.length=0,$d=0;sw.length;)sw.pop()();for(let t=0;t<Sh.length;t+=1){const n=Sh[t];Dx.has(n)||(Dx.add(n),n())}Sh.length=0}while(Zd.length);for(;bT.length;)bT.pop()();lw=!1,Dx.clear(),Yf(e)}function ZB(e){if(e.fragment!==null){e.update(),pl(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(uw)}}function KB(e){const t=[],n=[];Sh.forEach(r=>e.indexOf(r)===-1?t.push(r):n.push(r)),n.forEach(r=>r()),Sh=t}const u0=new Set;let yc;function c0(){yc={r:0,c:[],p:yc}}function d0(){yc.r||pl(yc.c),yc=yc.p}function Vr(e,t){e&&e.i&&(u0.delete(e),e.i(t))}function yi(e,t,n,r){if(e&&e.o){if(u0.has(e))return;u0.add(e),yc.c.push(()=>{u0.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function wT(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function XB(e,t){yi(e,1,1,()=>{t.delete(e.key)})}function YB(e,t,n,r,a,c,h,l,b,w,I,k){let P=e.length,R=c.length,$=P;const U={};for(;$--;)U[e[$].key]=$;const Z=[],D=new Map,O=new Map,F=[];for($=R;$--;){const ae=k(a,c,$),le=n(ae);let Ie=h.get(le);Ie?F.push(()=>Ie.p(ae,t)):(Ie=w(le,ae),Ie.c()),D.set(le,Z[$]=Ie),le in U&&O.set(le,Math.abs($-U[le]))}const G=new Set,te=new Set;function oe(ae){Vr(ae,1),ae.m(l,I),h.set(ae.key,ae),I=ae.first,R--}for(;P&&R;){const ae=Z[R-1],le=e[P-1],Ie=ae.key,K=le.key;ae===le?(I=ae.first,P--,R--):D.has(K)?!h.has(Ie)||G.has(Ie)?oe(ae):te.has(K)?P--:O.get(Ie)>O.get(K)?(te.add(Ie),oe(ae)):(G.add(K),P--):(b(le,h),P--)}for(;P--;){const ae=e[P];D.has(ae.key)||b(ae,h)}for(;R;)oe(Z[R-1]);return pl(F),Z}function _u(e){e&&e.c()}function ll(e,t,n){const{fragment:r,after_update:a}=e.$$;r&&r.m(t,n),uw(()=>{const c=e.$$.on_mount.map(_A).filter(xA);e.$$.on_destroy?e.$$.on_destroy.push(...c):pl(c),e.$$.on_mount=[]}),a.forEach(uw)}function ul(e,t){const n=e.$$;n.fragment!==null&&(KB(n.after_update),pl(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function JB(e,t){e.$$.dirty[0]===-1&&(Zd.push(e),GB(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Eu(e,t,n,r,a,c,h=null,l=[-1]){const b=Im;Yf(e);const w=e.$$={fragment:null,ctx:[],props:c,update:mr,not_equal:a,bound:yT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:yT(),dirty:l,skip_bound:!1,root:t.target||b.$$.root};h&&h(w.root);let I=!1;if(w.ctx=n?n(e,t.props||{},(k,P,...R)=>{const $=R.length?R[0]:P;return w.ctx&&a(w.ctx[k],w.ctx[k]=$)&&(!w.skip_bound&&w.bound[k]&&w.bound[k]($),I&&JB(e,k)),P}):[],w.update(),I=!0,pl(w.before_update),w.fragment=r?r(w.ctx):!1,t.target){if(t.hydrate){const k=UB(t.target);w.fragment&&w.fragment.l(k),k.forEach(gr)}else w.fragment&&w.fragment.c();t.intro&&Vr(e.$$.fragment),ll(e,t.target,t.anchor),SA()}Yf(b)}class Tu{constructor(){mT(this,"$$"),mT(this,"$$set")}$destroy(){ul(this,1),this.$destroy=mr}$on(t,n){if(!xA(n))return mr;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const a=r.indexOf(n);a!==-1&&r.splice(a,1)}}$set(t){this.$$set&&!DB(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const QB="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(QB);function eF(e){let t,n;return{c(){t=Ja("svg"),n=Ja("path"),qe(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),qe(t,"viewBox","0 0 14 14"),qe(t,"width","13"),qe(t,"height","13"),qe(t,"class","svelte-en2qvf")},m(r,a){Er(r,t,a),Tn(t,n)},p:mr,i:mr,o:mr,d(r){r&&gr(t)}}}class CA extends Tu{constructor(t){super(),Eu(this,t,null,eF,ku,{})}}function tF(e){let t,n;return{c(){t=Ja("svg"),n=Ja("path"),qe(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),qe(t,"viewBox","0 0 30 30"),qe(t,"fill","none"),qe(t,"xmlns","http://www.w3.org/2000/svg"),qe(t,"class","svelte-d2loi5")},m(r,a){Er(r,t,a),Tn(t,n)},p:mr,i:mr,o:mr,d(r){r&&gr(t)}}}class kA extends Tu{constructor(t){super(),Eu(this,t,null,tF,ku,{})}}function nF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"area.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"area.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function rF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"reverse.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"reverse.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function iF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"poi.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"poi.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function oF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"postal_code.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"postal_code.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function aF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"street.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"street.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function sF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"road.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"road.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function lF(e){let t,n;return{c(){t=tr("img"),Yi(t.src,n=e[3]+"housenumber.svg")||qe(t,"src",n),qe(t,"alt",e[6]),qe(t,"class","svelte-ltkwvy")},m(r,a){Er(r,t,a)},p(r,a){a&8&&!Yi(t.src,n=r[3]+"housenumber.svg")&&qe(t,"src",n),a&64&&qe(t,"alt",r[6])},d(r){r&&gr(t)}}}function uF(e){let t,n,r,a;return{c(){t=tr("img"),Yi(t.src,n=e[5])||qe(t,"src",n),qe(t,"alt",e[4]),qe(t,"class","svelte-ltkwvy")},m(c,h){Er(c,t,h),r||(a=po(t,"error",e[14]),r=!0)},p(c,h){h&32&&!Yi(t.src,n=c[5])&&qe(t,"src",n),h&16&&qe(t,"alt",c[4])},d(c){c&&gr(t),r=!1,a()}}}function ST(e){let t,n;return{c(){t=tr("span"),n=vu(e[6]),qe(t,"class","secondary svelte-ltkwvy")},m(r,a){Er(r,t,a),Tn(t,n)},p(r,a){a&64&&Tm(n,r[6])},d(r){r&&gr(t)}}}function cF(e){let t,n,r,a,c,h,l,b,w,I=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",k,P,R=e[2]==="always"||e[2]&&!e[0].address&&!e[0].id.startsWith("road.")&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],$,U,Z=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",D,O,F;function G(le,Ie){return Ie&1&&(n=null),Ie&1&&(r=null),Ie&1&&(a=null),Ie&1&&(c=null),le[5]?uF:le[0].address?lF:(n==null&&(n=!!le[0].id.startsWith("road.")),n?sF:(r==null&&(r=!!le[0].id.startsWith("address.")),r?aF:(a==null&&(a=!!le[0].id.startsWith("postal_code.")),a?oF:(c==null&&(c=!!le[0].id.startsWith("poi.")),c?iF:le[7]?rF:nF))))}let te=G(e,-1),oe=te(e),ae=R&&ST(e);return{c(){t=tr("li"),oe.c(),h=Jo(),l=tr("span"),b=tr("span"),w=tr("span"),k=vu(I),P=Jo(),ae&&ae.c(),$=Jo(),U=tr("span"),D=vu(Z),qe(w,"class","primary svelte-ltkwvy"),qe(b,"class","svelte-ltkwvy"),qe(U,"class","line2 svelte-ltkwvy"),qe(l,"class","texts svelte-ltkwvy"),qe(t,"tabindex","0"),qe(t,"data-selected",e[1]),qe(t,"class","svelte-ltkwvy"),Ta(t,"selected",e[1])},m(le,Ie){Er(le,t,Ie),oe.m(t,null),Tn(t,h),Tn(t,l),Tn(l,b),Tn(b,w),Tn(w,k),Tn(b,P),ae&&ae.m(b,null),Tn(l,$),Tn(l,U),Tn(U,D),O||(F=[po(t,"mouseenter",e[12]),po(t,"focus",e[13])],O=!0)},p(le,[Ie]){te===(te=G(le,Ie))&&oe?oe.p(le,Ie):(oe.d(1),oe=te(le),oe&&(oe.c(),oe.m(t,h))),Ie&1&&I!==(I=(le[7]?le[0].place_name:le[0].place_name.replace(/,.*/,""))+"")&&Tm(k,I),Ie&37&&(R=le[2]==="always"||le[2]&&!le[0].address&&!le[0].id.startsWith("road.")&&!le[0].id.startsWith("address.")&&!le[0].id.startsWith("postal_code.")&&(!le[0].id.startsWith("poi.")||!le[5])&&!le[7]),R?ae?ae.p(le,Ie):(ae=ST(le),ae.c(),ae.m(b,null)):ae&&(ae.d(1),ae=null),Ie&1&&Z!==(Z=(le[7]?"":le[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Tm(D,Z),Ie&2&&qe(t,"data-selected",le[1]),Ie&2&&Ta(t,"selected",le[1])},i:mr,o:mr,d(le){le&&gr(t),oe.d(),ae&&ae.d(),O=!1,pl(F)}}}function dF(e,t,n){var r;let a,c,{feature:h}=t,{selected:l=!1}=t,{showPlaceType:b}=t,{missingIconsCache:w}=t,{iconsBaseUrl:I}=t;const k=(r=h.properties)==null?void 0:r.categories;let P,R,$=0,U=h.place_type[0]==="reverse";function Z(){R&&w.add(R),n(10,$++,$)}function D(G){xT.call(this,e,G)}function O(G){xT.call(this,e,G)}const F=()=>Z();return e.$$set=G=>{"feature"in G&&n(0,h=G.feature),"selected"in G&&n(1,l=G.selected),"showPlaceType"in G&&n(2,b=G.showPlaceType),"missingIconsCache"in G&&n(9,w=G.missingIconsCache),"iconsBaseUrl"in G&&n(3,I=G.iconsBaseUrl)},e.$$.update=()=>{var G,te,oe,ae;if(e.$$.dirty&3640)do n(11,a--,a),n(4,P=k==null?void 0:k[a]),n(5,R=P?I+P.replace(/ /g,"_")+".svg":void 0);while(a>-1&&(!R||w.has(R)));e.$$.dirty&1&&n(6,c=((te=(G=h.properties)==null?void 0:G.categories)==null?void 0:te.join(", "))??((ae=(oe=h.properties)==null?void 0:oe.place_type_name)==null?void 0:ae[0])??h.place_type[0])},n(11,a=(k==null?void 0:k.length)??0),[h,l,b,I,P,R,c,U,Z,w,$,a,D,O,F]}class hF extends Tu{constructor(t){super(),Eu(this,t,dF,cF,ku,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function pF(e){let t;return{c(){t=tr("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',qe(t,"class","svelte-7cmwmc")},m(n,r){Er(n,t,r)},p:mr,i:mr,o:mr,d(n){n&&gr(t)}}}class fF extends Tu{constructor(t){super(),Eu(this,t,null,pF,ku,{})}}function mF(e){let t,n,r;return{c(){t=Ja("svg"),n=Ja("path"),qe(n,"stroke-width","4"),qe(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),qe(n,"class","svelte-gzo3ar"),qe(t,"width",r=e[0]==="list"?20:void 0),qe(t,"viewBox","0 0 70 85"),qe(t,"fill","none"),qe(t,"class","svelte-gzo3ar"),Ta(t,"in-map",e[0]!=="list"),Ta(t,"list-icon",e[0]==="list")},m(a,c){Er(a,t,c),Tn(t,n)},p(a,[c]){c&1&&r!==(r=a[0]==="list"?20:void 0)&&qe(t,"width",r),c&1&&Ta(t,"in-map",a[0]!=="list"),c&1&&Ta(t,"list-icon",a[0]==="list")},i:mr,o:mr,d(a){a&&gr(t)}}}function gF(e,t,n){let{displayIn:r}=t;return e.$$set=a=>{"displayIn"in a&&n(0,r=a.displayIn)},[r]}class yF extends Tu{constructor(t){super(),Eu(this,t,gF,mF,ku,{displayIn:0})}}function vF(e){let t,n;return{c(){t=Ja("svg"),n=Ja("path"),qe(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),qe(t,"viewBox","0 0 60.006 21.412"),qe(t,"width","14"),qe(t,"height","20"),qe(t,"class","svelte-en2qvf")},m(r,a){Er(r,t,a),Tn(t,n)},p:mr,i:mr,o:mr,d(r){r&&gr(t)}}}class _F extends Tu{constructor(t){super(),Eu(this,t,null,vF,ku,{})}}function xF(e){let t,n,r;return{c(){t=Ja("svg"),n=Ja("circle"),r=Ja("path"),qe(n,"cx","4.789"),qe(n,"cy","4.787"),qe(n,"r","3.85"),qe(n,"class","svelte-1aq105l"),qe(r,"d","M12.063 12.063 7.635 7.635"),qe(r,"class","svelte-1aq105l"),qe(t,"xmlns","http://www.w3.org/2000/svg"),qe(t,"width","13"),qe(t,"height","13"),qe(t,"viewBox","0 0 13 13"),qe(t,"class","svelte-1aq105l")},m(a,c){Er(a,t,c),Tn(t,n),Tn(t,r)},p:mr,i:mr,o:mr,d(a){a&&gr(t)}}}class bF extends Tu{constructor(t){super(),Eu(this,t,null,xF,ku,{})}}function wF(e,t,n){const r=t[1],a=t[0],c=r-a;return e===r&&n?e:((e-a)%c+c)%c+a}function J0(e){const t=[...e];return t[2]<t[0]&&(Math.abs((t[0]+t[2]+360)/2)>Math.abs((t[0]-360+t[2])/2)?t[0]-=360:t[2]+=360),t}let xf;async function SF(e,t,n){const r=e==null?void 0:e.getCenterAndZoom();for(const a of t??[])if(!(r&&(a.minZoom!=null&&a.minZoom>r[0]||a.maxZoom!=null&&a.maxZoom<r[0]))){if(a.type==="fixed")return a.coordinates.join(",");e:if(a.type==="client-geolocation"){if(xf&&a.cachedLocationExpiry&&xf.time+a.cachedLocationExpiry>Date.now()){if(!xf.coords)break e;return xf.coords}let c;try{return c=await new Promise((h,l)=>{n.signal.addEventListener("abort",()=>{l(Error("aborted"))}),navigator.geolocation.getCurrentPosition(b=>{h([b.coords.longitude,b.coords.latitude].map(w=>w.toFixed(6)).join(","))},b=>{l(b)},a)}),c}catch{}finally{a.cachedLocationExpiry&&(xf={time:Date.now(),coords:c})}if(n.signal.aborted)return}if(a.type==="server-geolocation")return"ip";if(r&&a.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}const CF=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,CT=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,kT=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?$/i,ET=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,TT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,IT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?$/i;function kF(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(R=>Number(R.trim())),n=Number(t[0]),r=Number(t[1]),a=Math.abs(n),c=Math.abs(r),h=n>0?"N":"S",l=r>0?"E":"W";let b;e=="DD"&&(b=`${a} ${h}, ${c} ${l}`);const w=Math.floor(a),I=Math.floor(c),k=(a-w)*60,P=(c-I)*60;if(e=="DM"){let R=PT(k,3).toFixed(3).padStart(6,"0"),$=PT(P,3).toFixed(3).padStart(6,"0");R.endsWith(".000")&&$.endsWith(".000")&&(R=R.replace(/\.000$/,""),$=$.replace(/\.000$/,"")),b=`${w} ${R}' ${h}, ${I} ${$}' ${l}`}if(e=="DMS"){const R=Math.floor(k),$=Math.floor(P);let U=((k-R)*60).toFixed(1).padStart(4,"0"),Z=((P-$)*60).toFixed(1).padStart(4,"0");const D=R.toString().padStart(2,"0"),O=$.toString().padStart(2,"0");U.endsWith(".0")&&Z.endsWith(".0")&&(U=U.replace(/\.0$/,""),Z=Z.replace(/\.0$/,"")),b=`${w} ${D}' ${U}" ${h}, ${I} ${O}' ${Z}" ${l}`}return b}else throw new Error("no decimal coordinates to convert")}function PT(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function Z2(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,r=null,a="",c="",h=null,l=[],b=!1;if(CF.test(e))throw new Error("invalid coordinate value");if(CT.test(e))if(l=CT.exec(e),b=bf(l),b)n=Math.abs(l[1])+l[2]/60,Number(l[1])<0&&(n*=-1),r=Math.abs(l[3])+l[4]/60,Number(l[3])<0&&(r*=-1),h="DM";else throw new Error("invalid coordinate format");else if(kT.test(e))if(l=kT.exec(e),b=bf(l),b){if(n=l[2],r=l[6],n.includes(",")&&(n=n.replace(",",".")),r.includes(",")&&(r=r.replace(",",".")),h="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(r))==Number(r))throw new Error("integer only coordinate provided");l[1]?(a=l[1],c=l[5]):l[4]&&(a=l[4],c=l[8])}else throw new Error("invalid decimal coordinate format");else if(ET.test(e))if(l=ET.exec(e),b=bf(l),b)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60,h="DM"),l[6]&&(n+=l[6].replace(",",".")/3600,h="DMS"),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[9])),l[11]&&(r+=l[11]/60),l[13]&&(r+=l[13].replace(",",".")/3600),parseInt(l[9])<0&&(r=-1*r),l[1]?(a=l[1],c=l[8]):l[7]&&(a=l[7],c=l[14]);else throw new Error("invalid DMS coordinates format");else if(TT.test(e))if(l=TT.exec(e),b=bf(l),b)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4]/60,h="DM"),l[6]&&(n+=l[6]/3600,h="DMS"),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[10])),l[12]&&(r+=l[12]/60),l[14]&&(r+=l[14]/3600),parseInt(l[10])<0&&(r=-1*r),l[1]?(a=l[1],c=l[9]):l[8]&&(a=l[8],c=l[16]);else throw new Error("invalid DMS coordinates format");else if(IT.test(e)){if(l=IT.exec(e),b=bf(l),l.filter(w=>w).length<=5)throw new Error("invalid coordinates format");if(b)n=Math.abs(parseInt(l[2])),l[4]&&(n+=l[4].replace(",",".")/60,h="DM"),l[6]&&(n+=l[6].replace(",",".")/3600,h="DMS"),parseInt(l[2])<0&&(n=-1*n),r=Math.abs(parseInt(l[10])),l[12]&&(r+=l[12].replace(",",".")/60),l[14]&&(r+=l[14].replace(",",".")/3600),parseInt(l[10])<0&&(r=-1*r),l[1]?(a=l[1],c=l[9]):l[8]&&(a=l[8],c=l[16]);else throw new Error("invalid coordinates format")}if(b){if(Math.abs(r)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(a&&!c||!a&&c)throw new Error("invalid coordinates value");if(a&&a==c)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),r.toString().includes(",")&&(r=r.replace(",","."));let w=/S|SOUTH/i;w.test(a)&&n>0&&(n=-1*n),w=/W|WEST/i,w.test(c)&&r>0&&(r=-1*r);const I=l[0].trim();let k,P;const R=/[,/;\u0020]/g,$=I.match(R);if($==null){const D=Math.floor(e.length/2);k=I.substring(0,D).trim(),P=I.substring(D).trim()}else{let D;$.length%2==1?D=Math.floor($.length/2):D=$.length/2-1;let O=0;if(D==0)O=I.indexOf($[0]),k=I.substring(0,O).trim(),P=I.substring(O+1).trim();else{let F=0,G=0;for(;F<=D;)O=I.indexOf($[F],G),G=O+1,F++;k=I.substring(0,O).trim(),P=I.substring(O+1).trim()}}const U=k.split(".");if(U.length==2&&U[1]==0&&U[1].length!=2)throw new Error("invalid coordinates format");const Z=P.split(".");if(Z.length==2&&Z[1]==0&&Z[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(k)||/^\d+$/.test(P))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),r=Number(Number(r).toFixed(t)),Object.freeze({verbatimCoordinates:I,verbatimLatitude:k,verbatimLongitude:P,decimalLatitude:n,decimalLongitude:r,decimalCoordinates:`${n},${r}`,originalFormat:h,closeEnough:EF,toCoordinateFormat:kF})}else throw new Error("coordinates pattern match failed")}function bf(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,r=/[eastsouthnorthwest]+/i,a=t.length/2;for(let c=0;c<a;c++){const h=t[c],l=t[c+a],b=n.test(h)&&n.test(l),w=r.test(h)&&r.test(l),I=h==l;if(!(h==null&&l==null)){if(h==null||l==null)return!1;if(b||w||I)continue;return!1}}return!0}function MT(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function EF(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return MT(this.decimalLatitude,Number(t[0]))&&MT(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const TF=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Z2.to=TF;const IF=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],PF={decimalLatitude:40.123,decimalLongitude:-74.123},MF=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],AF=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48 30,6410', E 18 57,4583'",verbatimLatitude:"N 48 30,6410'",verbatimLongitude:"E 18 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function LF(){const e=[];return IF.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...PF})}),[...e,...MF,...AF]}const RF=LF();Z2.formats=RF.map(e=>e.verbatimCoordinates);const zF=Z2;function AT(e,t,n){const r=e.slice();return r[83]=t[n],r[85]=n,r}function LT(e){let t,n;return t=new fF({}),{c(){_u(t.$$.fragment)},m(r,a){ll(t,r,a),n=!0},i(r){n||(Vr(t.$$.fragment,r),n=!0)},o(r){yi(t.$$.fragment,r),n=!1},d(r){ul(t,r)}}}function RT(e){let t,n,r,a,c;return n=new _F({}),{c(){t=tr("button"),_u(n.$$.fragment),qe(t,"type","button"),qe(t,"title",e[9]),qe(t,"class","svelte-qnu791"),Ta(t,"active",e[0])},m(h,l){Er(h,t,l),ll(n,t,null),r=!0,a||(c=po(t,"click",e[68]),a=!0)},p(h,l){(!r||l[0]&512)&&qe(t,"title",h[9]),(!r||l[0]&1)&&Ta(t,"active",h[0])},i(h){r||(Vr(n.$$.fragment,h),r=!0)},o(h){yi(n.$$.fragment,h),r=!1},d(h){h&&gr(t),ul(n),a=!1,c()}}}function DF(e){let t,n=[],r=new Map,a,c,h,l=wT(e[14]);const b=w=>w[83].id+(w[83].address?","+w[83].address:"");for(let w=0;w<l.length;w+=1){let I=AT(e,l,w),k=b(I);r.set(k,n[w]=zT(k,I))}return{c(){t=tr("ul");for(let w=0;w<n.length;w+=1)n[w].c();qe(t,"class","svelte-qnu791")},m(w,I){Er(w,t,I);for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(t,null);a=!0,c||(h=[po(t,"mouseleave",e[72]),po(t,"blur",e[73])],c=!0)},p(w,I){I[0]&17880064&&(l=wT(w[14]),c0(),n=YB(n,I,b,1,w,l,r,t,XB,zT,null,AT),d0())},i(w){if(!a){for(let I=0;I<l.length;I+=1)Vr(n[I]);a=!0}},o(w){for(let I=0;I<n.length;I+=1)yi(n[I]);a=!1},d(w){w&&gr(t);for(let I=0;I<n.length;I+=1)n[I].d();c=!1,pl(h)}}}function $F(e){let t,n,r,a,c,h;return n=new kA({}),{c(){t=tr("div"),_u(n.$$.fragment),r=Jo(),a=tr("div"),c=vu(e[7]),qe(a,"class","svelte-qnu791"),qe(t,"class","no-results svelte-qnu791")},m(l,b){Er(l,t,b),ll(n,t,null),Tn(t,r),Tn(t,a),Tn(a,c),h=!0},p(l,b){(!h||b[0]&128)&&Tm(c,l[7])},i(l){h||(Vr(n.$$.fragment,l),h=!0)},o(l){yi(n.$$.fragment,l),h=!1},d(l){l&&gr(t),ul(n)}}}function OF(e){let t="",n;return{c(){n=vu(t)},m(r,a){Er(r,n,a)},p:mr,i:mr,o:mr,d(r){r&&gr(n)}}}function BF(e){let t,n,r,a,c,h,l,b,w,I,k;return n=new kA({}),b=new CA({}),{c(){t=tr("div"),_u(n.$$.fragment),r=Jo(),a=tr("div"),c=vu(e[6]),h=Jo(),l=tr("button"),_u(b.$$.fragment),qe(a,"class","svelte-qnu791"),qe(l,"class","svelte-qnu791"),qe(t,"class","error svelte-qnu791")},m(P,R){Er(P,t,R),ll(n,t,null),Tn(t,r),Tn(t,a),Tn(a,c),Tn(t,h),Tn(t,l),ll(b,l,null),w=!0,I||(k=po(l,"click",e[69]),I=!0)},p(P,R){(!w||R[0]&64)&&Tm(c,P[6])},i(P){w||(Vr(n.$$.fragment,P),Vr(b.$$.fragment,P),w=!0)},o(P){yi(n.$$.fragment,P),yi(b.$$.fragment,P),w=!1},d(P){P&&gr(t),ul(n),ul(b),I=!1,k()}}}function zT(e,t){let n,r,a;function c(){return t[70](t[85])}function h(){return t[71](t[83])}return r=new hF({props:{feature:t[83],showPlaceType:t[10],selected:t[15]===t[85],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),r.$on("mouseenter",c),r.$on("focus",h),{key:e,first:null,c(){n=NB(),_u(r.$$.fragment),this.first=n},m(l,b){Er(l,n,b),ll(r,l,b),a=!0},p(l,b){t=l;const w={};b[0]&16384&&(w.feature=t[83]),b[0]&1024&&(w.showPlaceType=t[10]),b[0]&49152&&(w.selected=t[15]===t[85]),b[0]&4096&&(w.iconsBaseUrl=t[12]),r.$set(w)},i(l){a||(Vr(r.$$.fragment,l),a=!0)},o(l){yi(r.$$.fragment,l),a=!1},d(l){l&&gr(n),ul(r,l)}}}function FF(e){let t,n,r,a,c,h,l,b,w,I,k,P,R,$,U,Z,D,O,F,G,te,oe=!1;c=new bF({}),k=new CA({});let ae=e[19]&&LT(),le=e[5]===!0&&RT(e);const Ie=e[60].default,K=$B(Ie,e,e[59],null),Ce=[BF,OF,$F,DF],Fe=[];function De(Ae,Re){var Ve,et;return Ae[18]?0:Ae[16]?((Ve=Ae[14])==null?void 0:Ve.length)===0?2:Ae[16]&&(et=Ae[14])!=null&&et.length?3:-1:1}return~(Z=De(e))&&(D=Fe[Z]=Ce[Z](e)),{c(){t=Jo(),n=tr("form"),r=tr("div"),a=tr("button"),_u(c.$$.fragment),h=Jo(),l=tr("input"),b=Jo(),w=tr("div"),I=tr("button"),_u(k.$$.fragment),P=Jo(),ae&&ae.c(),R=Jo(),le&&le.c(),$=Jo(),K&&K.c(),U=Jo(),D&&D.c(),qe(a,"class","search-button svelte-qnu791"),qe(a,"type","button"),qe(l,"placeholder",e[8]),qe(l,"aria-label",e[8]),qe(l,"class","svelte-qnu791"),qe(I,"type","button"),qe(I,"title",e[3]),qe(I,"class","svelte-qnu791"),qe(w,"class","clear-button-container svelte-qnu791"),Ta(w,"displayable",e[1]!==""),qe(r,"class","input-group svelte-qnu791"),qe(n,"tabindex","0"),qe(n,"class",O=vT(e[2])+" svelte-qnu791"),Ta(n,"can-collapse",e[4]&&e[1]==="")},m(Ae,Re){Er(Ae,t,Re),Er(Ae,n,Re),Tn(n,r),Tn(r,a),ll(c,a,null),Tn(r,h),Tn(r,l),e[62](l),_T(l,e[1]),Tn(r,b),Tn(r,w),Tn(w,I),ll(k,I,null),Tn(w,P),ae&&ae.m(w,null),Tn(r,R),le&&le.m(r,null),Tn(r,$),K&&K.m(r,null),Tn(n,U),~Z&&Fe[Z].m(n,null),F=!0,G||(te=[po(a,"click",e[61]),po(l,"input",e[63]),po(l,"focus",e[64]),po(l,"blur",e[65]),po(l,"keydown",e[22]),po(l,"input",e[66]),po(I,"click",e[67]),po(n,"submit",jB(e[21]))],G=!0)},p(Ae,Re){(!F||Re[0]&256)&&qe(l,"placeholder",Ae[8]),(!F||Re[0]&256)&&qe(l,"aria-label",Ae[8]),Re[0]&2&&l.value!==Ae[1]&&_T(l,Ae[1]),(!F||Re[0]&8)&&qe(I,"title",Ae[3]),Ae[19]?ae?Re[0]&524288&&Vr(ae,1):(ae=LT(),ae.c(),Vr(ae,1),ae.m(w,null)):ae&&(c0(),yi(ae,1,1,()=>{ae=null}),d0()),(!F||Re[0]&2)&&Ta(w,"displayable",Ae[1]!==""),Ae[5]===!0?le?(le.p(Ae,Re),Re[0]&32&&Vr(le,1)):(le=RT(Ae),le.c(),Vr(le,1),le.m(r,$)):le&&(c0(),yi(le,1,1,()=>{le=null}),d0()),K&&K.p&&(!F||Re[1]&268435456)&&BB(K,Ie,Ae,Ae[59],F?OB(Ie,Ae[59],Re,null):FB(Ae[59]),null);let Ve=Z;Z=De(Ae),Z===Ve?~Z&&Fe[Z].p(Ae,Re):(D&&(c0(),yi(Fe[Ve],1,1,()=>{Fe[Ve]=null}),d0()),~Z?(D=Fe[Z],D?D.p(Ae,Re):(D=Fe[Z]=Ce[Z](Ae),D.c()),Vr(D,1),D.m(n,null)):D=null),(!F||Re[0]&4&&O!==(O=vT(Ae[2])+" svelte-qnu791"))&&qe(n,"class",O),(!F||Re[0]&22)&&Ta(n,"can-collapse",Ae[4]&&Ae[1]==="")},i(Ae){F||(Vr(oe),Vr(c.$$.fragment,Ae),Vr(k.$$.fragment,Ae),Vr(ae),Vr(le),Vr(K,Ae),Vr(D),F=!0)},o(Ae){yi(oe),yi(c.$$.fragment,Ae),yi(k.$$.fragment,Ae),yi(ae),yi(le),yi(K,Ae),yi(D),F=!1},d(Ae){Ae&&(gr(t),gr(n)),ul(c),e[62](null),ul(k),ae&&ae.d(),le&&le.d(),K&&K.d(Ae),~Z&&Fe[Z].d(),G=!1,pl(te)}}}function NF(e,t,n){let r,{$$slots:a={},$$scope:c}=t;const h={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:l=void 0}=t,{apiKey:b}=t,{bbox:w=void 0}=t,{clearButtonTitle:I="clear"}=t,{clearOnBlur:k=!1}=t,{collapsed:P=!1}=t,{country:R=void 0}=t,{debounceSearch:$=200}=t,{enableReverse:U=!1}=t,{errorMessage:Z="Something went wrong"}=t,{filter:D=()=>!0}=t,{flyTo:O=!0}=t,{fuzzyMatch:F=!0}=t,{language:G=void 0}=t,{limit:te=void 0}=t,{mapController:oe=void 0}=t,{minLength:ae=2}=t,{noResultsMessage:le="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:Ie="Search"}=t,{proximity:K=[{type:"server-geolocation"}]}=t,{reverseActive:Ce=U==="always"}=t,{reverseButtonTitle:Fe="toggle reverse geocoding"}=t,{searchValue:De=""}=t,{showFullGeometry:Ae=!0}=t,{showPlaceType:Re="ifNeeded"}=t,{showResultsWhileTyping:Ve=!0}=t,{selectFirst:et=!0}=t,{flyToSelected:$e=!1}=t,{markerOnSelected:Ue=!0}=t,{types:ct=void 0}=t,{excludeTypes:St=!1}=t,{zoom:At=h}=t,{maxZoom:jt=void 0}=t,{apiUrl:zt="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Xt={}}=t,{iconsBaseUrl:yn="https://cdn.maptiler.com/maptiler-geocoding-control/v1.4.1/icons/"}=t,{adjustUrlQuery:on=()=>{}}=t;function Un(){bn.focus()}function Mn(){bn.blur()}function Vt(re,pe=!0,Le=!1){n(1,De=re),pe?(n(15,ft=-1),Ge()):(at(!Le,Le),setTimeout(()=>{bn.focus(),bn.select()}))}function an(){n(14,_t=void 0),n(56,Se=void 0),n(15,ft=-1)}function Wt(){n(55,Dt=[]),n(56,Se=void 0)}let Cn=!1,_t,Dt,Se,ur="",bn,ft=-1,qt,fn=[],ir,Ct,zn,yr;const ei=new Set,vr=qB();WB(()=>{oe&&(oe.setEventHandler(void 0),oe.indicateReverse(!1),oe.setSelectedMarker(-1),oe.setMarkers(void 0,void 0))});function Ge(re){if(Ct&&(clearTimeout(Ct),Ct=void 0),ft>-1&&_t)n(56,Se=_t[ft]),n(1,De=Se.place_type[0]==="reverse"?Se.place_name:Se.place_name.replace(/,.*/,"")),n(18,qt=void 0),n(55,Dt=void 0),n(15,ft=-1);else if(De){const pe=re||!cr(De);Kn(De,{exact:!0}).then(()=>{n(55,Dt=_t),n(56,Se=void 0),pe&&dn()}).catch(Le=>n(18,qt=Le))}}function cr(re){try{return zF(re,6)}catch{return!1}}async function Kn(re,{byId:pe=!1,exact:Le=!1}={}){n(18,qt=void 0),ir==null||ir.abort();const Oe=new AbortController;n(19,ir=Oe);try{const ke=cr(re),We=new URLSearchParams;if(G!==void 0&&We.set("language",Array.isArray(G)?G.join(","):G??""),ct&&We.set("types",ct.join(",")),St&&We.set("excludeTypes",String(St)),w&&We.set("bbox",w.map(Bt=>Bt.toFixed(6)).join(",")),R&&We.set("country",Array.isArray(R)?R.join(","):R),!pe&&!ke){const Bt=await SF(oe,K,Oe);Bt&&We.set("proximity",Bt),(Le||!Ve)&&We.set("autocomplete","false"),We.set("fuzzyMatch",String(F))}te!==void 0&&(!ke||(ct==null?void 0:ct.length)===1)&&We.set("limit",String(te)),We.set("key",b),on(We);const gt=zt+"/"+encodeURIComponent(ke?ke.decimalLongitude+","+ke.decimalLatitude:re)+".json?"+We.toString();if(gt===ur){pe?(n(14,_t=void 0),n(56,Se=fn[0])):n(14,_t=fn);return}ur=gt;const It=await fetch(gt,{signal:Oe.signal,...Xt});if(!It.ok)throw new Error(await It.text());const en=await It.json();vr("response",{url:gt,featureCollection:en}),pe?(n(14,_t=void 0),n(56,Se=en.features[0]),fn=[Se]):(n(14,_t=en.features.filter(D)),ke&&_t.unshift({type:"Feature",properties:{},id:"reverse_"+ke.decimalLongitude+"_"+ke.decimalLatitude,text:ke.decimalLatitude+", "+ke.decimalLongitude,place_name:ke.decimalLatitude+", "+ke.decimalLongitude,place_type:["reverse"],center:[ke.decimalLongitude,ke.decimalLatitude],bbox:[ke.decimalLongitude,ke.decimalLatitude,ke.decimalLongitude,ke.decimalLatitude],geometry:{type:"Point",coordinates:[ke.decimalLongitude,ke.decimalLatitude]}}),fn=_t,ke&&bn.focus())}catch(ke){if(ke&&typeof ke=="object"&&"name"in ke&&ke.name==="AbortError")return;throw ke}finally{Oe===ir&&n(19,ir=void 0)}}function dn(){var re;if(!(Dt!=null&&Dt.length)||!O)return;const pe=[180,90,-180,-90],Le=!Dt.some(ke=>!ke.matching_text);let Oe;for(const ke of Dt){const We=Rr(ke);if(Oe=jt??(Oe===void 0?We:We===void 0?Oe:Math.max(Oe,We)),Le||!ke.matching_text)for(const gt of[0,1,2,3])pe[gt]=Math[gt<2?"min":"max"](pe[gt],((re=ke.bbox)==null?void 0:re[gt])??ke.center[gt%2])}oe&&Dt.length>0&&(Se&&pe[0]===pe[2]&&pe[1]===pe[3]?oe.flyTo(Se.center,Rr(Se)):oe.fitBounds(J0(pe),50,Oe))}function Rr(re){var pe;if(!re.bbox||re.bbox[0]!==re.bbox[2]&&re.bbox[1]!==re.bbox[3])return;if(typeof At=="number")return re.id.startsWith("poi.")||re.id.startsWith("address.")?jt:At;const Le=re.id.replace(/\..*/,"");return(Array.isArray((pe=re.properties)==null?void 0:pe.categories)?re.properties.categories.reduce((Oe,ke)=>{const We=At[Le+"."+ke];return Oe===void 0?We:We===void 0?Oe:Math.max(Oe,We)},void 0):void 0)??At[Le]}function Ke(re){n(0,Ce=U==="always"),n(14,_t=void 0),n(56,Se=void 0),n(15,ft=-1),Vt(re[1].toFixed(6)+", "+wF(re[0],[-180,180],!0).toFixed(6),!1,!0)}function Xe(re){if(!_t)return;let pe=re.key==="ArrowDown"?1:re.key==="ArrowUp"?-1:0;pe&&(ft===(et?0:-1)&&pe===-1&&n(15,ft=_t.length),n(15,ft+=pe),ft>=_t.length&&n(15,ft=-1),ft<0&&et&&n(15,ft=0),re.preventDefault())}function at(re=!0,pe=!1){if(n(18,qt=void 0),Ve||pe){if(Ct&&clearTimeout(Ct),De.length<ae)return;const Le=De;Ct=window.setTimeout(()=>{Kn(Le).catch(Oe=>n(18,qt=Oe))},re?$:0)}else n(14,_t=void 0),n(18,qt=void 0)}function mn(re){n(56,Se=re),n(1,De=re.place_name),n(15,ft=-1)}const zr=()=>bn.focus();function $t(re){sw[re?"unshift":"push"](()=>{bn=re,n(17,bn)})}function vo(){De=this.value,n(1,De),n(13,Cn),n(28,k)}const $o=()=>n(13,Cn=!0),ca=()=>n(13,Cn=!1),_o=()=>at(),fe=()=>{n(1,De=""),bn.focus()},q=()=>n(0,Ce=!Ce),W=()=>n(18,qt=void 0),Q=re=>n(15,ft=re),ce=re=>mn(re),_e=()=>{et||n(15,ft=-1)},we=()=>{};return e.$$set=re=>{"class"in re&&n(2,l=re.class),"apiKey"in re&&n(26,b=re.apiKey),"bbox"in re&&n(27,w=re.bbox),"clearButtonTitle"in re&&n(3,I=re.clearButtonTitle),"clearOnBlur"in re&&n(28,k=re.clearOnBlur),"collapsed"in re&&n(4,P=re.collapsed),"country"in re&&n(29,R=re.country),"debounceSearch"in re&&n(30,$=re.debounceSearch),"enableReverse"in re&&n(5,U=re.enableReverse),"errorMessage"in re&&n(6,Z=re.errorMessage),"filter"in re&&n(31,D=re.filter),"flyTo"in re&&n(32,O=re.flyTo),"fuzzyMatch"in re&&n(33,F=re.fuzzyMatch),"language"in re&&n(34,G=re.language),"limit"in re&&n(35,te=re.limit),"mapController"in re&&n(36,oe=re.mapController),"minLength"in re&&n(37,ae=re.minLength),"noResultsMessage"in re&&n(7,le=re.noResultsMessage),"placeholder"in re&&n(8,Ie=re.placeholder),"proximity"in re&&n(38,K=re.proximity),"reverseActive"in re&&n(0,Ce=re.reverseActive),"reverseButtonTitle"in re&&n(9,Fe=re.reverseButtonTitle),"searchValue"in re&&n(1,De=re.searchValue),"showFullGeometry"in re&&n(39,Ae=re.showFullGeometry),"showPlaceType"in re&&n(10,Re=re.showPlaceType),"showResultsWhileTyping"in re&&n(40,Ve=re.showResultsWhileTyping),"selectFirst"in re&&n(11,et=re.selectFirst),"flyToSelected"in re&&n(41,$e=re.flyToSelected),"markerOnSelected"in re&&n(42,Ue=re.markerOnSelected),"types"in re&&n(43,ct=re.types),"excludeTypes"in re&&n(44,St=re.excludeTypes),"zoom"in re&&n(45,At=re.zoom),"maxZoom"in re&&n(46,jt=re.maxZoom),"apiUrl"in re&&n(47,zt=re.apiUrl),"fetchParameters"in re&&n(48,Xt=re.fetchParameters),"iconsBaseUrl"in re&&n(12,yn=re.iconsBaseUrl),"adjustUrlQuery"in re&&n(49,on=re.adjustUrlQuery),"$$scope"in re&&n(59,c=re.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&32&&n(0,Ce=U==="always"),e.$$.dirty[0]&268443648&&setTimeout(()=>{n(16,zn=Cn),k&&!Cn&&n(1,De="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&64&&De.length<ae&&(n(56,Se=void 0),n(14,_t=void 0),n(18,qt=void 0),n(55,Dt=_t)),e.$$.dirty[1]&33554688&&Ae&&Se&&!Se.address&&Se.geometry.type==="Point"&&Se.place_type[0]!=="reverse"&&Kn(Se.id,{byId:!0}).catch(re=>n(18,qt=re)),e.$$.dirty[1]&100663330&&(oe&&Se&&Se.id!==yr&&O&&(!Se.bbox||Se.bbox[0]===Se.bbox[2]&&Se.bbox[1]===Se.bbox[3]?oe.flyTo(Se.center,Rr(Se)):oe.fitBounds(J0(Se.bbox),50,Rr(Se)),n(14,_t=void 0),n(55,Dt=void 0),n(15,ft=-1)),n(57,yr=Se==null?void 0:Se.id)),e.$$.dirty[0]&18432&&et&&_t!=null&&_t.length&&n(15,ft=0),e.$$.dirty[0]&2050&&(et||n(15,ft=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&16777216&&Dt!==_t&&n(55,Dt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&16777248&&oe&&oe.setEventHandler(re=>{switch(re.type){case"mapClick":Ce&&Ke(re.coordinates);break;case"markerClick":{const pe=_t==null?void 0:_t.find(Le=>Le.id===re.id);pe&&mn(pe)}break;case"markerMouseEnter":Dt&&n(15,ft=zn?(_t==null?void 0:_t.findIndex(pe=>pe.id===re.id))??-1:-1);break;case"markerMouseLeave":Dt&&n(15,ft=-1);break}}),e.$$.dirty[0]&49152&&n(58,r=_t==null?void 0:_t[ft]),e.$$.dirty[1]&134218786&&oe&&r&&O&&$e&&oe.flyTo(r.center,Rr(r)),e.$$.dirty[1]&2080&&(Ue||oe==null||oe.setMarkers(void 0,void 0)),e.$$.dirty[1]&150997024&&oe&&Ue&&!Dt&&(oe.setMarkers(r?[r]:void 0,void 0),oe.setSelectedMarker(r?0:-1)),e.$$.dirty[1]&50331680&&oe&&oe.setMarkers(Dt,Se),e.$$.dirty[0]&32768|e.$$.dirty[1]&16777248&&Dt&&oe&&oe.setSelectedMarker(ft),e.$$.dirty[0]&2|e.$$.dirty[1]&32&&oe){const re=cr(De);oe.setReverseMarker(re?[re.decimalLongitude,re.decimalLatitude]:void 0)}e.$$.dirty[1]&134217728&&vr("select",r),e.$$.dirty[1]&33554432&&vr("pick",Se),e.$$.dirty[0]&81920&&vr("optionsVisibilityChange",zn&&!!_t),e.$$.dirty[0]&16384&&vr("featuresListed",_t),e.$$.dirty[1]&16777216&&vr("featuresMarked",Dt),e.$$.dirty[0]&1&&vr("reverseToggle",Ce),e.$$.dirty[0]&2&&vr("queryChange",De),e.$$.dirty[0]&1|e.$$.dirty[1]&32&&oe&&oe.indicateReverse(Ce)},[Ce,De,l,I,P,U,Z,le,Ie,Fe,Re,et,yn,Cn,_t,ft,zn,bn,qt,ir,ei,Ge,Xe,at,mn,h,b,w,k,R,$,D,O,F,G,te,oe,ae,K,Ae,Ve,$e,Ue,ct,St,At,jt,zt,Xt,on,Un,Mn,Vt,an,Wt,Dt,Se,yr,r,c,a,zr,$t,vo,$o,ca,_o,fe,q,W,Q,ce,_e,we]}let jF=class extends Tu{constructor(e){super(),Eu(this,e,NF,FF,ku,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,excludeTypes:44,zoom:45,maxZoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}};function Pm(e,t,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function K2(e,t,n={}){for(const r of e){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<r[r.length-1].length;a++)if(r[r.length-1][a]!==r[0][a])throw new Error("First and last Position are not equivalent.")}return Pm({type:"Polygon",coordinates:e},t,n)}function Mm(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function EA(e,t,n={}){return Pm({type:"MultiPolygon",coordinates:e},t,n)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function UF(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},r,a,c,h;return h={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function l(w){return function(I){return b([w,I])}}function b(w){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(c=w[0]&2?a.return:w[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,w[1])).done)return c;switch(a=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){n.label=w[1];break}if(w[0]===6&&n.label<c[1]){n.label=c[1],c=w;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(w);break}c[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(I){w=[6,I],a=0}finally{r=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var xu=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function VF(e,t){return e>t?1:e<t?-1:0}function eu(e,t,n){for(var r=new xu(null,null),a=r,c=r;;){var h=n(e,t.key);if(h<0){if(t.left===null)break;if(n(e,t.left.key)<0){var l=t.left;if(t.left=l.right,l.right=t,t=l,t.left===null)break}c.left=t,c=t,t=t.left}else if(h>0){if(t.right===null)break;if(n(e,t.right.key)>0){var l=t.right;if(t.right=l.left,l.left=t,t=l,t.right===null)break}a.right=t,a=t,t=t.right}else break}return a.right=t.left,c.left=t.right,t.left=r.right,t.right=r.left,t}function $x(e,t,n,r){var a=new xu(e,t);if(n===null)return a.left=a.right=null,a;n=eu(e,n,r);var c=r(e,n.key);return c<0?(a.left=n.left,a.right=n,n.left=null):c>=0&&(a.right=n.right,a.left=n,n.right=null),a}function DT(e,t,n){var r=null,a=null;if(t){t=eu(e,t,n);var c=n(t.key,e);c===0?(r=t.left,a=t.right):c<0?(a=t.right,t.right=null,r=t):(r=t.left,t.left=null,a=t)}return{left:r,right:a}}function WF(e,t,n){return t===null?e:(e===null||(t=eu(e.key,t,n),t.left=e),t)}function cw(e,t,n,r,a){if(e){r(""+t+(n?" ":" ")+a(e)+`
`);var c=t+(n?"    ":"   ");e.left&&cw(e.left,c,!1,r,a),e.right&&cw(e.right,c,!0,r,a)}}var X2=function(){function e(t){t===void 0&&(t=VF),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=$x(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new xu(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var a=this._comparator,c=eu(t,this._root,a),h=a(t,c.key);return h===0?this._root=c:(h<0?(r.left=c.left,r.right=c,c.left=null):h>0&&(r.right=c.right,r.left=c,c.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var a;if(n===null)return null;n=eu(t,n,r);var c=r(t,n.key);return c===0?(n.left===null?a=n.right:(a=eu(t,n.left,r),a.right=n.right),this._size--,a):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=eu(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return n;a<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=eu(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return!0;a<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,a=[],c=!1;!c;)r!==null?(a.push(r),r=r.left):a.length!==0?(r=a.pop(),t.call(n,r),r=r.right):c=!0;return this},e.prototype.range=function(t,n,r,a){for(var c=[],h=this._comparator,l=this._root,b;c.length!==0||l;)if(l)c.push(l),l=l.left;else{if(l=c.pop(),b=h(l.key,n),b>0)break;if(h(l.key,t)>=0&&r.call(a,l))return this;l=l.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,a=0,c=[];!r;)if(n)c.push(n),n=n.left;else if(c.length>0){if(n=c.pop(),a===t)return n;a++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var a=this._comparator;n;){var c=a(t.key,n.key);if(c===0)break;c<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var a=this._comparator;n;){var c=a(t.key,n.key);if(c===0)break;c<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return HF(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var a=t.length,c=this._comparator;if(r&&pw(t,n,0,a-1,c),this._root===null)this._root=dw(t,n,0,a),this._size=a;else{var h=GF(this.toList(),qF(t,n),c);a=this._size+a,this._root=hw({head:h},0,a)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return cw(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var a=this._comparator,c=DT(t,this._root,a),h=c.left,l=c.right;a(t,n)<0?l=$x(n,r,l,a):h=$x(n,r,h,a),this._root=WF(h,l,a)},e.prototype.split=function(t){return DT(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return UF(this,function(a){switch(a.label){case 0:t=this._root,n=[],r=!1,a.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return a.sent(),t=t.right,[3,5];case 4:r=!0,a.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function dw(e,t,n,r){var a=r-n;if(a>0){var c=n+Math.floor(a/2),h=e[c],l=t[c],b=new xu(h,l);return b.left=dw(e,t,n,c),b.right=dw(e,t,c+1,r),b}return null}function qF(e,t){for(var n=new xu(null,null),r=n,a=0;a<e.length;a++)r=r.next=new xu(e[a],t[a]);return r.next=null,n.next}function HF(e){for(var t=e,n=[],r=!1,a=new xu(null,null),c=a;!r;)t?(n.push(t),t=t.left):n.length>0?(t=c=c.next=n.pop(),t=t.right):r=!0;return c.next=null,a.next}function hw(e,t,n){var r=n-t;if(r>0){var a=t+Math.floor(r/2),c=hw(e,t,a),h=e.head;return h.left=c,e.head=e.head.next,h.right=hw(e,a+1,n),h}return null}function GF(e,t,n){for(var r=new xu(null,null),a=r,c=e,h=t;c!==null&&h!==null;)n(c.key,h.key)<0?(a.next=c,c=c.next):(a.next=h,h=h.next),a=a.next;return c!==null?a.next=c:h!==null&&(a.next=h),r.next}function pw(e,t,n,r,a){if(!(n>=r)){for(var c=e[n+r>>1],h=n-1,l=r+1;;){do h++;while(a(e[h],c)<0);do l--;while(a(e[l],c)>0);if(h>=l)break;var b=e[h];e[h]=e[l],e[l]=b,b=t[h],t[h]=t[l],t[l]=b}pw(e,t,n,l,a),pw(e,t,l+1,r,a)}}const tl=11102230246251565e-32,qi=134217729,ZF=(3+8*tl)*tl;function Ox(e,t,n,r,a){let c,h,l,b,w=t[0],I=r[0],k=0,P=0;I>w==I>-w?(c=w,w=t[++k]):(c=I,I=r[++P]);let R=0;if(k<e&&P<n)for(I>w==I>-w?(h=w+c,l=c-(h-w),w=t[++k]):(h=I+c,l=c-(h-I),I=r[++P]),c=h,l!==0&&(a[R++]=l);k<e&&P<n;)I>w==I>-w?(h=c+w,b=h-c,l=c-(h-b)+(w-b),w=t[++k]):(h=c+I,b=h-c,l=c-(h-b)+(I-b),I=r[++P]),c=h,l!==0&&(a[R++]=l);for(;k<e;)h=c+w,b=h-c,l=c-(h-b)+(w-b),w=t[++k],c=h,l!==0&&(a[R++]=l);for(;P<n;)h=c+I,b=h-c,l=c-(h-b)+(I-b),I=r[++P],c=h,l!==0&&(a[R++]=l);return(c!==0||R===0)&&(a[R++]=c),R}function KF(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Km(e){return new Float64Array(e)}const XF=(3+16*tl)*tl,YF=(2+12*tl)*tl,JF=(9+64*tl)*tl*tl,Od=Km(4),$T=Km(8),OT=Km(12),BT=Km(16),ao=Km(4);function QF(e,t,n,r,a,c,h){let l,b,w,I,k,P,R,$,U,Z,D,O,F,G,te,oe,ae,le;const Ie=e-a,K=n-a,Ce=t-c,Fe=r-c;G=Ie*Fe,P=qi*Ie,R=P-(P-Ie),$=Ie-R,P=qi*Fe,U=P-(P-Fe),Z=Fe-U,te=$*Z-(G-R*U-$*U-R*Z),oe=Ce*K,P=qi*Ce,R=P-(P-Ce),$=Ce-R,P=qi*K,U=P-(P-K),Z=K-U,ae=$*Z-(oe-R*U-$*U-R*Z),D=te-ae,k=te-D,Od[0]=te-(D+k)+(k-ae),O=G+D,k=O-G,F=G-(O-k)+(D-k),D=F-oe,k=F-D,Od[1]=F-(D+k)+(k-oe),le=O+D,k=le-O,Od[2]=O-(le-k)+(D-k),Od[3]=le;let De=KF(4,Od),Ae=YF*h;if(De>=Ae||-De>=Ae||(k=e-Ie,l=e-(Ie+k)+(k-a),k=n-K,w=n-(K+k)+(k-a),k=t-Ce,b=t-(Ce+k)+(k-c),k=r-Fe,I=r-(Fe+k)+(k-c),l===0&&b===0&&w===0&&I===0)||(Ae=JF*h+ZF*Math.abs(De),De+=Ie*I+Fe*l-(Ce*w+K*b),De>=Ae||-De>=Ae))return De;G=l*Fe,P=qi*l,R=P-(P-l),$=l-R,P=qi*Fe,U=P-(P-Fe),Z=Fe-U,te=$*Z-(G-R*U-$*U-R*Z),oe=b*K,P=qi*b,R=P-(P-b),$=b-R,P=qi*K,U=P-(P-K),Z=K-U,ae=$*Z-(oe-R*U-$*U-R*Z),D=te-ae,k=te-D,ao[0]=te-(D+k)+(k-ae),O=G+D,k=O-G,F=G-(O-k)+(D-k),D=F-oe,k=F-D,ao[1]=F-(D+k)+(k-oe),le=O+D,k=le-O,ao[2]=O-(le-k)+(D-k),ao[3]=le;const Re=Ox(4,Od,4,ao,$T);G=Ie*I,P=qi*Ie,R=P-(P-Ie),$=Ie-R,P=qi*I,U=P-(P-I),Z=I-U,te=$*Z-(G-R*U-$*U-R*Z),oe=Ce*w,P=qi*Ce,R=P-(P-Ce),$=Ce-R,P=qi*w,U=P-(P-w),Z=w-U,ae=$*Z-(oe-R*U-$*U-R*Z),D=te-ae,k=te-D,ao[0]=te-(D+k)+(k-ae),O=G+D,k=O-G,F=G-(O-k)+(D-k),D=F-oe,k=F-D,ao[1]=F-(D+k)+(k-oe),le=O+D,k=le-O,ao[2]=O-(le-k)+(D-k),ao[3]=le;const Ve=Ox(Re,$T,4,ao,OT);G=l*I,P=qi*l,R=P-(P-l),$=l-R,P=qi*I,U=P-(P-I),Z=I-U,te=$*Z-(G-R*U-$*U-R*Z),oe=b*w,P=qi*b,R=P-(P-b),$=b-R,P=qi*w,U=P-(P-w),Z=w-U,ae=$*Z-(oe-R*U-$*U-R*Z),D=te-ae,k=te-D,ao[0]=te-(D+k)+(k-ae),O=G+D,k=O-G,F=G-(O-k)+(D-k),D=F-oe,k=F-D,ao[1]=F-(D+k)+(k-oe),le=O+D,k=le-O,ao[2]=O-(le-k)+(D-k),ao[3]=le;const et=Ox(Ve,OT,4,ao,BT);return BT[et-1]}function eN(e,t,n,r,a,c){const h=(t-c)*(n-a),l=(e-a)*(r-c),b=h-l,w=Math.abs(h+l);return Math.abs(b)>=XF*w?b:-QF(e,t,n,r,a,c,w)}const wf=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,fw=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,a=e.ll.y<t.ll.y?t.ll.y:e.ll.y,c=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:a},ur:{x:r,y:c}}};let iu=Number.EPSILON;iu===void 0&&(iu=Math.pow(2,-52));const tN=iu*iu,FT=(e,t)=>{if(-iu<e&&e<iu&&-iu<t&&t<iu)return 0;const n=e-t;return n*n<tN*e*t?0:e<t?-1:1};class nN{constructor(){this.reset()}reset(){this.xRounder=new NT,this.yRounder=new NT}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class NT{constructor(){this.tree=new X2,this.round(0)}round(t){const n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&FT(n.key,r.key)===0)return this.tree.remove(t),r.key;const a=this.tree.next(n);return a!==null&&FT(n.key,a.key)===0?(this.tree.remove(t),a.key):t}}const Am=new nN,h0=(e,t)=>e.x*t.y-e.y*t.x,TA=(e,t)=>e.x*t.x+e.y*t.y,jT=(e,t,n)=>{const r=eN(e.x,e.y,t.x,t.y,n.x,n.y);return r>0?-1:r<0?1:0},Q0=e=>Math.sqrt(TA(e,e)),rN=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return h0(a,r)/Q0(a)/Q0(r)},iN=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return TA(a,r)/Q0(a)/Q0(r)},UT=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},VT=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},oN=(e,t,n,r)=>{if(t.x===0)return VT(n,r,e.x);if(r.x===0)return VT(e,t,n.x);if(t.y===0)return UT(n,r,e.y);if(r.y===0)return UT(e,t,n.y);const a=h0(t,r);if(a==0)return null;const c={x:n.x-e.x,y:n.y-e.y},h=h0(c,t)/a,l=h0(c,r)/a,b=e.x+l*t.x,w=n.x+h*r.x,I=e.y+l*t.y,k=n.y+h*r.y,P=(b+w)/2,R=(I+k)/2;return{x:P,y:R}};class xa{static compare(t,n){const r=xa.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:fu.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,a=n.length;r<a;r++){const c=n[r];this.point.events.push(c),c.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let a=n+1;a<t;a++){const c=this.point.events[a];c.consumedBy===void 0&&r.otherSE.point.events===c.otherSE.point.events&&r.segment.consume(c.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const a=this.point.events[n];a!==this&&!a.segment.ringOut&&a.segment.isInResult()&&t.push(a)}return t}getLeftmostComparator(t){const n=new Map,r=a=>{const c=a.otherSE;n.set(a,{sine:rN(this.point,t.point,c.point),cosine:iN(this.point,t.point,c.point)})};return(a,c)=>{n.has(a)||r(a),n.has(c)||r(c);const{sine:h,cosine:l}=n.get(a),{sine:b,cosine:w}=n.get(c);return h>=0&&b>=0?l<w?1:l>w?-1:0:h<0&&b<0?l<w?-1:l>w?1:0:b<h?-1:b>h?1:0}}}let aN=0;class fu{static compare(t,n){const r=t.leftSE.point.x,a=n.leftSE.point.x,c=t.rightSE.point.x,h=n.rightSE.point.x;if(h<r)return 1;if(c<a)return-1;const l=t.leftSE.point.y,b=n.leftSE.point.y,w=t.rightSE.point.y,I=n.rightSE.point.y;if(r<a){if(b<l&&b<w)return 1;if(b>l&&b>w)return-1;const k=t.comparePoint(n.leftSE.point);if(k<0)return 1;if(k>0)return-1;const P=n.comparePoint(t.rightSE.point);return P!==0?P:-1}if(r>a){if(l<b&&l<I)return-1;if(l>b&&l>I)return 1;const k=n.comparePoint(t.leftSE.point);if(k!==0)return k;const P=t.comparePoint(n.rightSE.point);return P<0?1:P>0?-1:1}if(l<b)return-1;if(l>b)return 1;if(c<h){const k=n.comparePoint(t.rightSE.point);if(k!==0)return k}if(c>h){const k=t.comparePoint(n.rightSE.point);if(k<0)return 1;if(k>0)return-1}if(c!==h){const k=w-l,P=c-r,R=I-b,$=h-a;if(k>P&&R<$)return 1;if(k<P&&R>$)return-1}return c>h?1:c<h||w<I?-1:w>I?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,r,a){this.id=++aN,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=a}static fromRing(t,n,r){let a,c,h;const l=xa.comparePoints(t,n);if(l<0)a=t,c=n,h=1;else if(l>0)a=n,c=t,h=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const b=new xa(a,!0),w=new xa(c,!1);return new fu(b,w,[r],[h])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,r=this.rightSE.point,a=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;const c=(t.y-n.y)/a.y,h=n.x+c*a.x;if(t.x===h)return 0;const l=(t.x-n.x)/a.x,b=n.y+l*a.y;return t.y===b?0:t.y<b?-1:1}getIntersection(t){const n=this.bbox(),r=t.bbox(),a=fw(n,r);if(a===null)return null;const c=this.leftSE.point,h=this.rightSE.point,l=t.leftSE.point,b=t.rightSE.point,w=wf(n,l)&&this.comparePoint(l)===0,I=wf(r,c)&&t.comparePoint(c)===0,k=wf(n,b)&&this.comparePoint(b)===0,P=wf(r,h)&&t.comparePoint(h)===0;if(I&&w)return P&&!k?h:!P&&k?b:null;if(I)return k&&c.x===b.x&&c.y===b.y?null:c;if(w)return P&&h.x===l.x&&h.y===l.y?null:l;if(P&&k)return null;if(P)return h;if(k)return b;const R=oN(c,this.vector(),l,t.vector());return R===null||!wf(a,R)?null:Am.round(R.x,R.y)}split(t){const n=[],r=t.events!==void 0,a=new xa(t,!0),c=new xa(t,!1),h=this.rightSE;this.replaceRightSE(c),n.push(c),n.push(a);const l=new fu(a,h,this.rings.slice(),this.windings.slice());return xa.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),xa.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(a.checkForConsuming(),c.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const a=fu.compare(n,r);if(a!==0){if(a>0){const c=n;n=r,r=c}if(n.prev===r){const c=n;n=r,r=c}for(let c=0,h=r.rings.length;c<h;c++){const l=r.rings[c],b=r.windings[c],w=n.rings.indexOf(l);w===-1?(n.rings.push(l),n.windings.push(b)):n.windings[w]+=b}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,a=this._afterState.multiPolys;for(let l=0,b=this.rings.length;l<b;l++){const w=this.rings[l],I=this.windings[l],k=n.indexOf(w);k===-1?(n.push(w),r.push(I)):r[k]+=I}const c=[],h=[];for(let l=0,b=n.length;l<b;l++){if(r[l]===0)continue;const w=n[l],I=w.poly;if(h.indexOf(I)===-1)if(w.isExterior)c.push(I);else{h.indexOf(I)===-1&&h.push(I);const k=c.indexOf(w.poly);k!==-1&&c.splice(k,1)}}for(let l=0,b=c.length;l<b;l++){const w=c[l].multiPoly;a.indexOf(w)===-1&&a.push(w)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Ka.type){case"union":{const r=t.length===0,a=n.length===0;this._isInResult=r!==a;break}case"intersection":{let r,a;t.length<n.length?(r=t.length,a=n.length):(r=n.length,a=t.length),this._isInResult=a===Ka.numMultiPolys&&r<a;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=a=>a.length===1&&a[0].isSubject;this._isInResult=r(t)!==r(n);break}default:throw new Error(`Unrecognized operation type found ${Ka.type}`)}return this._isInResult}}class WT{constructor(t,n,r){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Am.round(t[0][0],t[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};let c=a;for(let h=1,l=t.length;h<l;h++){if(typeof t[h][0]!="number"||typeof t[h][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=Am.round(t[h][0],t[h][1]);b.x===c.x&&b.y===c.y||(this.segments.push(fu.fromRing(c,b,this)),b.x<this.bbox.ll.x&&(this.bbox.ll.x=b.x),b.y<this.bbox.ll.y&&(this.bbox.ll.y=b.y),b.x>this.bbox.ur.x&&(this.bbox.ur.x=b.x),b.y>this.bbox.ur.y&&(this.bbox.ur.y=b.y),c=b)}(a.x!==c.x||a.y!==c.y)&&this.segments.push(fu.fromRing(c,a,this))}getSweepEvents(){const t=[];for(let n=0,r=this.segments.length;n<r;n++){const a=this.segments[n];t.push(a.leftSE),t.push(a.rightSE)}return t}}class sN{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new WT(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,a=t.length;r<a;r++){const c=new WT(t[r],this,!1);c.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=c.bbox.ur.y),this.interiorRings.push(c)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,r=this.interiorRings.length;n<r;n++){const a=this.interiorRings[n].getSweepEvents();for(let c=0,h=a.length;c<h;c++)t.push(a[c])}return t}}class qT{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,a=t.length;r<a;r++){const c=new sN(t[r],this);c.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=c.bbox.ur.y),this.polys.push(c)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const a=this.polys[n].getSweepEvents();for(let c=0,h=a.length;c<h;c++)t.push(a[c])}return t}}class ev{static factory(t){const n=[];for(let r=0,a=t.length;r<a;r++){const c=t[r];if(!c.isInResult()||c.ringOut)continue;let h=null,l=c.leftSE,b=c.rightSE;const w=[l],I=l.point,k=[];for(;h=l,l=b,w.push(l),l.point!==I;)for(;;){const P=l.getAvailableLinkedEvents();if(P.length===0){const U=w[0].point,Z=w[w.length-1].point;throw new Error(`Unable to complete output ring starting at [${U.x}, ${U.y}]. Last matching segment found ends at [${Z.x}, ${Z.y}].`)}if(P.length===1){b=P[0].otherSE;break}let R=null;for(let U=0,Z=k.length;U<Z;U++)if(k[U].point===l.point){R=U;break}if(R!==null){const U=k.splice(R)[0],Z=w.splice(U.index);Z.unshift(Z[0].otherSE),n.push(new ev(Z.reverse()));continue}k.push({index:w.length,point:l.point});const $=l.getLeftmostComparator(h);b=P.sort($)[0].otherSE;break}n.push(new ev(w))}return n}constructor(t){this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let w=1,I=this.events.length-1;w<I;w++){const k=this.events[w].point,P=this.events[w+1].point;jT(k,t,P)!==0&&(n.push(k),t=k)}if(n.length===1)return null;const r=n[0],a=n[1];jT(r,t,a)===0&&n.shift(),n.push(n[0]);const c=this.isExteriorRing()?1:-1,h=this.isExteriorRing()?0:n.length-1,l=this.isExteriorRing()?n.length:-1,b=[];for(let w=h;w!=l;w+=c)b.push([n[w].x,n[w].y]);return b}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let a=1,c=this.events.length;a<c;a++){const h=this.events[a];xa.compare(t,h)>0&&(t=h)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return r.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}}class HT{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,r=this.interiorRings.length;n<r;n++){const a=this.interiorRings[n].getGeom();a!==null&&t.push(a)}return t}}class lN{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const a=this.polys[n].getGeom();a!==null&&t.push(a)}return t}_composePolys(t){const n=[];for(let r=0,a=t.length;r<a;r++){const c=t[r];if(!c.poly)if(c.isExteriorRing())n.push(new HT(c));else{const h=c.enclosingRing();h.poly||n.push(new HT(h)),h.poly.addInterior(c)}}return n}}class uN{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fu.compare;this.queue=t,this.tree=new X2(n),this.segments=[]}process(t){const n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;const a=t.isLeft?this.tree.add(n):this.tree.find(n);if(!a)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let c=a,h=a,l,b;for(;l===void 0;)c=this.tree.prev(c),c===null?l=null:c.key.consumedBy===void 0&&(l=c.key);for(;b===void 0;)h=this.tree.next(h),h===null?b=null:h.key.consumedBy===void 0&&(b=h.key);if(t.isLeft){let w=null;if(l){const k=l.getIntersection(n);if(k!==null&&(n.isAnEndpoint(k)||(w=k),!l.isAnEndpoint(k))){const P=this._splitSafely(l,k);for(let R=0,$=P.length;R<$;R++)r.push(P[R])}}let I=null;if(b){const k=b.getIntersection(n);if(k!==null&&(n.isAnEndpoint(k)||(I=k),!b.isAnEndpoint(k))){const P=this._splitSafely(b,k);for(let R=0,$=P.length;R<$;R++)r.push(P[R])}}if(w!==null||I!==null){let k=null;w===null?k=I:I===null?k=w:k=xa.comparePoints(w,I)<=0?w:I,this.queue.remove(n.rightSE),r.push(n.rightSE);const P=n.split(k);for(let R=0,$=P.length;R<$;R++)r.push(P[R])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=l)}else{if(l&&b){const w=l.getIntersection(b);if(w!==null){if(!l.isAnEndpoint(w)){const I=this._splitSafely(l,w);for(let k=0,P=I.length;k<P;k++)r.push(I[k])}if(!b.isAnEndpoint(w)){const I=this._splitSafely(b,w);for(let k=0,P=I.length;k<P;k++)r.push(I[k])}}}this.tree.remove(n)}return r}_splitSafely(t,n){this.tree.remove(t);const r=t.rightSE;this.queue.remove(r);const a=t.split(n);return a.push(r),t.consumedBy===void 0&&this.tree.add(t),a}}const GT=typeof process<"u"&&gA.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,cN=typeof process<"u"&&gA.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class dN{run(t,n,r){Ka.type=t,Am.reset();const a=[new qT(n,!0)];for(let I=0,k=r.length;I<k;I++)a.push(new qT(r[I],!1));if(Ka.numMultiPolys=a.length,Ka.type==="difference"){const I=a[0];let k=1;for(;k<a.length;)fw(a[k].bbox,I.bbox)!==null?k++:a.splice(k,1)}if(Ka.type==="intersection")for(let I=0,k=a.length;I<k;I++){const P=a[I];for(let R=I+1,$=a.length;R<$;R++)if(fw(P.bbox,a[R].bbox)===null)return[]}const c=new X2(xa.compare);for(let I=0,k=a.length;I<k;I++){const P=a[I].getSweepEvents();for(let R=0,$=P.length;R<$;R++)if(c.insert(P[R]),c.size>GT)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const h=new uN(c);let l=c.size,b=c.pop();for(;b;){const I=b.key;if(c.size===l){const P=I.segment;throw new Error(`Unable to pop() ${I.isLeft?"left":"right"} SweepEvent [${I.point.x}, ${I.point.y}] from segment #${P.id} [${P.leftSE.point.x}, ${P.leftSE.point.y}] -> [${P.rightSE.point.x}, ${P.rightSE.point.y}] from queue.`)}if(c.size>GT)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(h.segments.length>cN)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const k=h.process(I);for(let P=0,R=k.length;P<R;P++){const $=k[P];$.consumedBy===void 0&&c.insert($)}l=c.size,b=c.pop()}Am.reset();const w=ev.factory(h.segments);return new lN(w).getGeom()}}const Ka=new dN,hN=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ka.run("union",e,n)},pN=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ka.run("intersection",e,n)},fN=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ka.run("xor",e,n)},mN=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ka.run("difference",e,n)};var IA={union:hN,intersection:pN,xor:fN,difference:mN};function PA(e,t,n){if(e!==null)for(var r,a,c,h,l,b,w,I=0,k=0,P,R=e.type,$=R==="FeatureCollection",U=R==="Feature",Z=$?e.features.length:1,D=0;D<Z;D++){w=$?e.features[D].geometry:U?e.geometry:e,P=w?w.type==="GeometryCollection":!1,l=P?w.geometries.length:1;for(var O=0;O<l;O++){var F=0,G=0;if(h=P?w.geometries[O]:w,h!==null){b=h.coordinates;var te=h.type;switch(I=0,te){case null:break;case"Point":if(t(b,k,D,F,G)===!1)return!1;k++,F++;break;case"LineString":case"MultiPoint":for(r=0;r<b.length;r++){if(t(b[r],k,D,F,G)===!1)return!1;k++,te==="MultiPoint"&&F++}te==="LineString"&&F++;break;case"Polygon":case"MultiLineString":for(r=0;r<b.length;r++){for(a=0;a<b[r].length-I;a++){if(t(b[r][a],k,D,F,G)===!1)return!1;k++}te==="MultiLineString"&&F++,te==="Polygon"&&G++}te==="Polygon"&&F++;break;case"MultiPolygon":for(r=0;r<b.length;r++){for(G=0,a=0;a<b[r].length;a++){for(c=0;c<b[r][a].length-I;c++){if(t(b[r][a][c],k,D,F,G)===!1)return!1;k++}G++}F++}break;case"GeometryCollection":for(r=0;r<h.geometries.length;r++)if(PA(h.geometries[r],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Y2(e,t){var n,r,a,c,h,l,b,w,I,k,P=0,R=e.type==="FeatureCollection",$=e.type==="Feature",U=R?e.features.length:1;for(n=0;n<U;n++){for(l=R?e.features[n].geometry:$?e.geometry:e,w=R?e.features[n].properties:$?e.properties:{},I=R?e.features[n].bbox:$?e.bbox:void 0,k=R?e.features[n].id:$?e.id:void 0,b=l?l.type==="GeometryCollection":!1,h=b?l.geometries.length:1,a=0;a<h;a++){if(c=b?l.geometries[a]:l,c===null){if(t(null,P,w,I,k)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(c,P,w,I,k)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<c.geometries.length;r++)if(t(c.geometries[r],P,w,I,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}P++}}function gN(e,t){Y2(e,function(n,r,a,c,h){var l=n===null?null:n.type;switch(l){case null:case"Point":case"LineString":case"Polygon":return t(Pm(n,a,{bbox:c,id:h}),r,0)===!1?!1:void 0}var b;switch(l){case"MultiPoint":b="Point";break;case"MultiLineString":b="LineString";break;case"MultiPolygon":b="Polygon";break}for(var w=0;w<n.coordinates.length;w++){var I=n.coordinates[w],k={type:b,coordinates:I};if(t(Pm(k,a),r,w)===!1)return!1}})}function yN(e,t={}){const n=[];if(Y2(e,a=>{n.push(a.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const r=IA.union(n[0],...n.slice(1));return r.length===0?null:r.length===1?K2(r[0],t.properties):EA(r,t.properties)}var MA=yN;function vN(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return PA(e,r=>{n[0]>r[0]&&(n[0]=r[0]),n[1]>r[1]&&(n[1]=r[1]),n[2]<r[0]&&(n[2]=r[0]),n[3]<r[1]&&(n[3]=r[1])}),n}var ZT=vN;function _N(e){const t=[];if(Y2(e,a=>{t.push(a.coordinates)}),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},r=IA.difference(t[0],...t.slice(1));return r.length===0?null:r.length===1?K2(r[0],n):EA(r,n)}var xN=_N;function bN(e){if(!e)throw new Error("geojson is required");var t=[];return gN(e,function(n){t.push(n)}),Mm(t)}var wN=bN;function KT(e,t){const n=xN(Mm([K2([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),e]));if(!n)return;n.properties={isMask:!0};const r=J0(ZT(e)),a=(r[2]-r[0])/360/1e3,c=r[0]<-180,h=r[2]>180,l=wN(e);if(l.features.length>1&&(c||h))for(const b of l.features){const w=J0(ZT(b));if(h&&w[0]<-180+a)for(const I of b.geometry.coordinates)for(const k of I)k[0]+=360-a;if(c&&w[2]>180-a)for(const I of b.geometry.coordinates)for(const k of I)k[0]-=360-a}t(Mm([l.features.length<2?e:MA(l)??e,n]))}const XT=Mm([]);function SN(e,t,n=!0,r=!0,a={},c={},h={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let l;const b=[];let w,I,k;function P(){!e.getSource("full-geom")&&(h!=null&&h.fill||h!=null&&h.line)&&e.addSource("full-geom",{type:"geojson",data:XT}),!e.getLayer("full-geom-fill")&&h!=null&&h.fill&&e.addLayer({...h==null?void 0:h.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),!e.getLayer("full-geom-line")&&h!=null&&h.line&&e.addLayer({...h==null?void 0:h.line,id:"full-geom-line",type:"line",source:"full-geom"}),k&&U(k)}e.loaded()?P():e.once("load",()=>{P()}),e.on("styledata",()=>{P()});const R=Z=>{l==null||l({type:"mapClick",coordinates:[Z.lngLat.lng,Z.lngLat.lat]})};function $(Z=!1){if(!t)throw new Error;const D=document.createElement("div");return Z&&D.classList.add("marker-interactive"),new yF({props:{displayIn:"maplibre"},target:D}),new t.Marker({element:D,offset:[1,-13]})}function U(Z){var D;k=Z,Z&&((D=e.getSource("full-geom"))==null||D.setData(Z))}return{setEventHandler(Z){Z?(l=Z,e.on("click",R)):(l=void 0,e.off("click",R))},flyTo(Z,D){e.flyTo({center:Z,...D?{zoom:D}:{},...a})},fitBounds(Z,D,O){e.fitBounds([[Z[0],Z[1]],[Z[2],Z[3]]],{padding:D,...O?{maxZoom:O}:{},...c})},indicateReverse(Z){e.getCanvasContainer().style.cursor=Z?"crosshair":""},setReverseMarker(Z){!t||!n||(I?Z?I.setLngLat(Z):(I.remove(),I=void 0):Z&&(I=(typeof n=="object"?new t.Marker(n):$()).setLngLat(Z).addTo(e),I.getElement().classList.add("marker-reverse")))},setMarkers(Z,D){if(n){for(const O of b)O.remove();if(b.length=0,U(XT),!!t){if(D){let O=!1;if(D.geometry.type==="GeometryCollection"){const F=D.geometry.geometries.filter(G=>G.type==="Polygon"||G.type==="MultiPolygon");e:if(F.length>0){const G=MA(Mm(F.map(te=>Pm(te))));if(!G)break e;KT({...D,geometry:G.geometry},U),O=!0}else{const G=D.geometry.geometries.filter(te=>te.type==="LineString"||te.type==="MultiLineString");G.length>0&&(U({...D,geometry:{type:"GeometryCollection",geometries:G}}),O=!0)}}if(!O){if(D.geometry.type==="Polygon"||D.geometry.type==="MultiPolygon")KT(D,U);else if(D.geometry.type==="LineString"||D.geometry.type==="MultiLineString"){U(D);return}}n&&b.push((typeof n=="object"?new t.Marker(n):$()).setLngLat(D.center).addTo(e))}if(r)for(const O of Z??[]){if(O===D)continue;const F=(typeof r=="object"?new t.Marker(r):$(!0)).setLngLat(O.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(O.place_type[0]==="reverse"?O.place_name:O.place_name.replace(/,.*/,""))).addTo(e),G=F.getElement();G.addEventListener("click",te=>{te.stopPropagation(),l==null||l({type:"markerClick",id:O.id})}),G.addEventListener("mouseenter",()=>{l==null||l({type:"markerMouseEnter",id:O.id}),F.togglePopup()}),G.addEventListener("mouseleave",()=>{l==null||l({type:"markerMouseLeave",id:O.id}),F.togglePopup()}),b.push(F)}}}},setSelectedMarker(Z){w&&w.getElement().classList.toggle("marker-selected",!1),w=Z>-1?b[Z]:void 0,w==null||w.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const Z=e.getCenter();return[e.getZoom(),Z.lng,Z.lat]}}}var va,Kd;class CN extends EventTarget{constructor(t={}){super(),gT(this,va),gT(this,Kd),zx(this,Kd,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:r,showResultMarkers:a,flyTo:c,fullGeometryStyle:h,...l}=ja(this,Kd),b=typeof c=="boolean"?{}:c,w=this.getExtraProps(t,n),I={mapController:SN(t,this.getMapLibreGl(),r,a,b,b,h),flyTo:c===void 0?!0:!!c,apiKey:"",...w,...l};if(!I.apiKey)throw new Error("no apiKey provided");zx(this,va,new jF({target:n,props:I}));for(const k of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])ja(this,va).$on(k,P=>this.dispatchEvent(P));return n}setOptions(t){var n;zx(this,Kd,t);const{marker:r,showResultMarkers:a,flyTo:c,fullGeometryStyle:h,...l}=ja(this,Kd);(n=ja(this,va))==null||n.$set(l)}setQuery(t,n=!0){var r;(r=ja(this,va))==null||r.setQuery(t,n)}clearMap(){var t;(t=ja(this,va))==null||t.clearMap()}clearList(){var t;(t=ja(this,va))==null||t.clearList()}setReverseMode(t){var n;(n=ja(this,va))==null||n.$set({reverseActive:t})}focus(){var t;(t=ja(this,va))==null||t.focus()}blur(){var t;(t=ja(this,va))==null||t.blur()}onRemove(){var t;(t=ja(this,va))==null||t.$destroy()}}va=new WeakMap,Kd=new WeakMap;class kN extends CN{getMapLibreGl(){return a$}onAdd(t){return super.onAddInt(t)}getExtraProps(){return{}}}function EN(){const e=ne.useRef(null),t=ne.useRef(null),n={lng:139.753,lat:35.6844},r=15;return co.apiKey="0RIdnIp4oGo6HhkfVfWj",ne.useEffect(()=>{if(t.current)return;t.current=new mA({container:e.current,style:yh.STREETS,center:[n.lng,n.lat],zoom:r}),new yf({color:"#2CDA9D"}).setLngLat([139.7525,35.6846]).setPopup(new vf().setHTML("Approved: Traditional Tea Sets Anzuri")).addTo(t.current),new yf({color:"#2CDA9D"}).setLngLat([139.74,35.69]).setPopup(new vf().setHTML("Approved: Tokyo Souvenir Mimoto")).addTo(t.current),new yf({color:"#2C4443"}).setLngLat([139.71,35.71]).setPopup(new vf().setHTML("Community: SHIBUYA Souvenirs")).addTo(t.current),new yf({color:"#2C4443"}).setLngLat([139.74,35.68]).setPopup(new vf().setHTML("Community: KYOTOTO")).addTo(t.current),new yf({color:"#2CDA9D"}).setLngLat([8.432436222,47.14508040683401]).setPopup(new vf().setHTML("Cool HSLU store")).addTo(t.current);const a=new kN({apiKey:"0RIdnIp4oGo6HhkfVfWj",maplibregl:Pt,flyTo:!0,color:"red"});t.current.addControl(a,"top-left")},[n.lng,n.lat,r]),se.jsx("div",{className:"map-wrap",children:se.jsx("div",{ref:e,className:"map"})})}const Lm={black:"#000",white:"#fff"},Bd={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Fd={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Nd={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},jd={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ud={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Sf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},TN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function cl(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(r=>n.searchParams.append("args[]",r)),`Minified MUI error #${e}; visit ${n} for the full message.`}const Hv="$$material";function tv(){return tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tv.apply(null,arguments)}function AA(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var IN=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,PN=AA(function(e){return IN.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),MN=!1;function AN(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function LN(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var RN=function(){function e(n){var r=this;this._insertTag=function(a){var c;r.tags.length===0?r.insertionPoint?c=r.insertionPoint.nextSibling:r.prepend?c=r.container.firstChild:c=r.before:c=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(a,c),r.tags.push(a)},this.isSpeedy=n.speedy===void 0?!MN:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(LN(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=AN(a);try{c.insertRule(r,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var a;return(a=r.parentNode)==null?void 0:a.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Hi="-ms-",nv="-moz-",Bn="-webkit-",LA="comm",J2="rule",Q2="decl",zN="@import",RA="@keyframes",DN="@layer",$N=Math.abs,Gv=String.fromCharCode,ON=Object.assign;function BN(e,t){return Ai(e,0)^45?(((t<<2^Ai(e,0))<<2^Ai(e,1))<<2^Ai(e,2))<<2^Ai(e,3):0}function zA(e){return e.trim()}function FN(e,t){return(e=t.exec(e))?e[0]:e}function Fn(e,t,n){return e.replace(t,n)}function mw(e,t){return e.indexOf(t)}function Ai(e,t){return e.charCodeAt(t)|0}function Rm(e,t,n){return e.slice(t,n)}function ps(e){return e.length}function eS(e){return e.length}function Ly(e,t){return t.push(e),e}function NN(e,t){return e.map(t).join("")}var Zv=1,$h=1,DA=0,Do=0,Jr=0,Kh="";function Kv(e,t,n,r,a,c,h){return{value:e,root:t,parent:n,type:r,props:a,children:c,line:Zv,column:$h,length:h,return:""}}function Cf(e,t){return ON(Kv("",null,null,"",null,null,0),e,{length:-e.length},t)}function jN(){return Jr}function UN(){return Jr=Do>0?Ai(Kh,--Do):0,$h--,Jr===10&&($h=1,Zv--),Jr}function ia(){return Jr=Do<DA?Ai(Kh,Do++):0,$h++,Jr===10&&($h=1,Zv++),Jr}function ks(){return Ai(Kh,Do)}function p0(){return Do}function Xm(e,t){return Rm(Kh,e,t)}function zm(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $A(e){return Zv=$h=1,DA=ps(Kh=e),Do=0,[]}function OA(e){return Kh="",e}function f0(e){return zA(Xm(Do-1,gw(e===91?e+2:e===40?e+1:e)))}function VN(e){for(;(Jr=ks())&&Jr<33;)ia();return zm(e)>2||zm(Jr)>3?"":" "}function WN(e,t){for(;--t&&ia()&&!(Jr<48||Jr>102||Jr>57&&Jr<65||Jr>70&&Jr<97););return Xm(e,p0()+(t<6&&ks()==32&&ia()==32))}function gw(e){for(;ia();)switch(Jr){case e:return Do;case 34:case 39:e!==34&&e!==39&&gw(Jr);break;case 40:e===41&&gw(e);break;case 92:ia();break}return Do}function qN(e,t){for(;ia()&&e+Jr!==57;)if(e+Jr===84&&ks()===47)break;return"/*"+Xm(t,Do-1)+"*"+Gv(e===47?e:ia())}function HN(e){for(;!zm(ks());)ia();return Xm(e,Do)}function GN(e){return OA(m0("",null,null,null,[""],e=$A(e),0,[0],e))}function m0(e,t,n,r,a,c,h,l,b){for(var w=0,I=0,k=h,P=0,R=0,$=0,U=1,Z=1,D=1,O=0,F="",G=a,te=c,oe=r,ae=F;Z;)switch($=O,O=ia()){case 40:if($!=108&&Ai(ae,k-1)==58){mw(ae+=Fn(f0(O),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:ae+=f0(O);break;case 9:case 10:case 13:case 32:ae+=VN($);break;case 92:ae+=WN(p0()-1,7);continue;case 47:switch(ks()){case 42:case 47:Ly(ZN(qN(ia(),p0()),t,n),b);break;default:ae+="/"}break;case 123*U:l[w++]=ps(ae)*D;case 125*U:case 59:case 0:switch(O){case 0:case 125:Z=0;case 59+I:D==-1&&(ae=Fn(ae,/\f/g,"")),R>0&&ps(ae)-k&&Ly(R>32?JT(ae+";",r,n,k-1):JT(Fn(ae," ","")+";",r,n,k-2),b);break;case 59:ae+=";";default:if(Ly(oe=YT(ae,t,n,w,I,a,l,F,G=[],te=[],k),c),O===123)if(I===0)m0(ae,t,oe,oe,G,c,k,l,te);else switch(P===99&&Ai(ae,3)===110?100:P){case 100:case 108:case 109:case 115:m0(e,oe,oe,r&&Ly(YT(e,oe,oe,0,0,a,l,F,a,G=[],k),te),a,te,k,l,r?G:te);break;default:m0(ae,oe,oe,oe,[""],te,0,l,te)}}w=I=R=0,U=D=1,F=ae="",k=h;break;case 58:k=1+ps(ae),R=$;default:if(U<1){if(O==123)--U;else if(O==125&&U++==0&&UN()==125)continue}switch(ae+=Gv(O),O*U){case 38:D=I>0?1:(ae+="\f",-1);break;case 44:l[w++]=(ps(ae)-1)*D,D=1;break;case 64:ks()===45&&(ae+=f0(ia())),P=ks(),I=k=ps(F=ae+=HN(p0())),O++;break;case 45:$===45&&ps(ae)==2&&(U=0)}}return c}function YT(e,t,n,r,a,c,h,l,b,w,I){for(var k=a-1,P=a===0?c:[""],R=eS(P),$=0,U=0,Z=0;$<r;++$)for(var D=0,O=Rm(e,k+1,k=$N(U=h[$])),F=e;D<R;++D)(F=zA(U>0?P[D]+" "+O:Fn(O,/&\f/g,P[D])))&&(b[Z++]=F);return Kv(e,t,n,a===0?J2:l,b,w,I)}function ZN(e,t,n){return Kv(e,t,n,LA,Gv(jN()),Rm(e,2,-2),0)}function JT(e,t,n,r){return Kv(e,t,n,Q2,Rm(e,0,r),Rm(e,r+1,-1),r)}function Ch(e,t){for(var n="",r=eS(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function KN(e,t,n,r){switch(e.type){case DN:if(e.children.length)break;case zN:case Q2:return e.return=e.return||e.value;case LA:return"";case RA:return e.return=e.value+"{"+Ch(e.children,r)+"}";case J2:e.value=e.props.join(",")}return ps(n=Ch(e.children,r))?e.return=e.value+"{"+n+"}":""}function XN(e){var t=eS(e);return function(n,r,a,c){for(var h="",l=0;l<t;l++)h+=e[l](n,r,a,c)||"";return h}}function YN(e){return function(t){t.root||(t=t.return)&&e(t)}}var JN=function(t,n,r){for(var a=0,c=0;a=c,c=ks(),a===38&&c===12&&(n[r]=1),!zm(c);)ia();return Xm(t,Do)},QN=function(t,n){var r=-1,a=44;do switch(zm(a)){case 0:a===38&&ks()===12&&(n[r]=1),t[r]+=JN(Do-1,n,r);break;case 2:t[r]+=f0(a);break;case 4:if(a===44){t[++r]=ks()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=Gv(a)}while(a=ia());return t},e7=function(t,n){return OA(QN($A(t),n))},QT=new WeakMap,t7=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,a=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!QT.get(r))&&!a){QT.set(t,!0);for(var c=[],h=e7(n,c),l=r.props,b=0,w=0;b<h.length;b++)for(var I=0;I<l.length;I++,w++)t.props[w]=c[b]?h[b].replace(/&\f/g,l[I]):l[I]+" "+h[b]}}},n7=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function BA(e,t){switch(BN(e,t)){case 5103:return Bn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Bn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Bn+e+nv+e+Hi+e+e;case 6828:case 4268:return Bn+e+Hi+e+e;case 6165:return Bn+e+Hi+"flex-"+e+e;case 5187:return Bn+e+Fn(e,/(\w+).+(:[^]+)/,Bn+"box-$1$2"+Hi+"flex-$1$2")+e;case 5443:return Bn+e+Hi+"flex-item-"+Fn(e,/flex-|-self/,"")+e;case 4675:return Bn+e+Hi+"flex-line-pack"+Fn(e,/align-content|flex-|-self/,"")+e;case 5548:return Bn+e+Hi+Fn(e,"shrink","negative")+e;case 5292:return Bn+e+Hi+Fn(e,"basis","preferred-size")+e;case 6060:return Bn+"box-"+Fn(e,"-grow","")+Bn+e+Hi+Fn(e,"grow","positive")+e;case 4554:return Bn+Fn(e,/([^-])(transform)/g,"$1"+Bn+"$2")+e;case 6187:return Fn(Fn(Fn(e,/(zoom-|grab)/,Bn+"$1"),/(image-set)/,Bn+"$1"),e,"")+e;case 5495:case 3959:return Fn(e,/(image-set\([^]*)/,Bn+"$1$`$1");case 4968:return Fn(Fn(e,/(.+:)(flex-)?(.*)/,Bn+"box-pack:$3"+Hi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Bn+e+e;case 4095:case 3583:case 4068:case 2532:return Fn(e,/(.+)-inline(.+)/,Bn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ps(e)-1-t>6)switch(Ai(e,t+1)){case 109:if(Ai(e,t+4)!==45)break;case 102:return Fn(e,/(.+:)(.+)-([^]+)/,"$1"+Bn+"$2-$3$1"+nv+(Ai(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~mw(e,"stretch")?BA(Fn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ai(e,t+1)!==115)break;case 6444:switch(Ai(e,ps(e)-3-(~mw(e,"!important")&&10))){case 107:return Fn(e,":",":"+Bn)+e;case 101:return Fn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Bn+(Ai(e,14)===45?"inline-":"")+"box$3$1"+Bn+"$2$3$1"+Hi+"$2box$3")+e}break;case 5936:switch(Ai(e,t+11)){case 114:return Bn+e+Hi+Fn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Bn+e+Hi+Fn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Bn+e+Hi+Fn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Bn+e+Hi+e+e}return e}var r7=function(t,n,r,a){if(t.length>-1&&!t.return)switch(t.type){case Q2:t.return=BA(t.value,t.length);break;case RA:return Ch([Cf(t,{value:Fn(t.value,"@","@"+Bn)})],a);case J2:if(t.length)return NN(t.props,function(c){switch(FN(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Ch([Cf(t,{props:[Fn(c,/:(read-\w+)/,":"+nv+"$1")]})],a);case"::placeholder":return Ch([Cf(t,{props:[Fn(c,/:(plac\w+)/,":"+Bn+"input-$1")]}),Cf(t,{props:[Fn(c,/:(plac\w+)/,":"+nv+"$1")]}),Cf(t,{props:[Fn(c,/:(plac\w+)/,Hi+"input-$1")]})],a)}return""})}},i7=[r7],o7=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(U){var Z=U.getAttribute("data-emotion");Z.indexOf(" ")!==-1&&(document.head.appendChild(U),U.setAttribute("data-s",""))})}var a=t.stylisPlugins||i7,c={},h,l=[];h=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(U){for(var Z=U.getAttribute("data-emotion").split(" "),D=1;D<Z.length;D++)c[Z[D]]=!0;l.push(U)});var b,w=[t7,n7];{var I,k=[KN,YN(function(U){I.insert(U)})],P=XN(w.concat(a,k)),R=function(Z){return Ch(GN(Z),P)};b=function(Z,D,O,F){I=O,R(Z?Z+"{"+D.styles+"}":D.styles),F&&($.inserted[D.name]=!0)}}var $={key:n,sheet:new RN({key:n,container:h,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:b};return $.sheet.hydrate(l),$},FA={exports:{}},Zn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bi=typeof Symbol=="function"&&Symbol.for,tS=bi?Symbol.for("react.element"):60103,nS=bi?Symbol.for("react.portal"):60106,Xv=bi?Symbol.for("react.fragment"):60107,Yv=bi?Symbol.for("react.strict_mode"):60108,Jv=bi?Symbol.for("react.profiler"):60114,Qv=bi?Symbol.for("react.provider"):60109,e1=bi?Symbol.for("react.context"):60110,rS=bi?Symbol.for("react.async_mode"):60111,t1=bi?Symbol.for("react.concurrent_mode"):60111,n1=bi?Symbol.for("react.forward_ref"):60112,r1=bi?Symbol.for("react.suspense"):60113,a7=bi?Symbol.for("react.suspense_list"):60120,i1=bi?Symbol.for("react.memo"):60115,o1=bi?Symbol.for("react.lazy"):60116,s7=bi?Symbol.for("react.block"):60121,l7=bi?Symbol.for("react.fundamental"):60117,u7=bi?Symbol.for("react.responder"):60118,c7=bi?Symbol.for("react.scope"):60119;function la(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case tS:switch(e=e.type,e){case rS:case t1:case Xv:case Jv:case Yv:case r1:return e;default:switch(e=e&&e.$$typeof,e){case e1:case n1:case o1:case i1:case Qv:return e;default:return t}}case nS:return t}}}function NA(e){return la(e)===t1}Zn.AsyncMode=rS;Zn.ConcurrentMode=t1;Zn.ContextConsumer=e1;Zn.ContextProvider=Qv;Zn.Element=tS;Zn.ForwardRef=n1;Zn.Fragment=Xv;Zn.Lazy=o1;Zn.Memo=i1;Zn.Portal=nS;Zn.Profiler=Jv;Zn.StrictMode=Yv;Zn.Suspense=r1;Zn.isAsyncMode=function(e){return NA(e)||la(e)===rS};Zn.isConcurrentMode=NA;Zn.isContextConsumer=function(e){return la(e)===e1};Zn.isContextProvider=function(e){return la(e)===Qv};Zn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===tS};Zn.isForwardRef=function(e){return la(e)===n1};Zn.isFragment=function(e){return la(e)===Xv};Zn.isLazy=function(e){return la(e)===o1};Zn.isMemo=function(e){return la(e)===i1};Zn.isPortal=function(e){return la(e)===nS};Zn.isProfiler=function(e){return la(e)===Jv};Zn.isStrictMode=function(e){return la(e)===Yv};Zn.isSuspense=function(e){return la(e)===r1};Zn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Xv||e===t1||e===Jv||e===Yv||e===r1||e===a7||typeof e=="object"&&e!==null&&(e.$$typeof===o1||e.$$typeof===i1||e.$$typeof===Qv||e.$$typeof===e1||e.$$typeof===n1||e.$$typeof===l7||e.$$typeof===u7||e.$$typeof===c7||e.$$typeof===s7)};Zn.typeOf=la;FA.exports=Zn;var d7=FA.exports,jA=d7,h7={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},p7={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},UA={};UA[jA.ForwardRef]=h7;UA[jA.Memo]=p7;var f7=!0;function m7(e,t,n){var r="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(r+=a+" ")}),r}var VA=function(t,n,r){var a=t.key+"-"+n.name;(r===!1||f7===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},WA=function(t,n,r){VA(t,n,r);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+a:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function g7(e){for(var t=0,n,r=0,a=e.length;a>=4;++r,a-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var y7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},v7=!1,_7=/[A-Z]|^ms/g,x7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qA=function(t){return t.charCodeAt(1)===45},e5=function(t){return t!=null&&typeof t!="boolean"},Bx=AA(function(e){return qA(e)?e:e.replace(_7,"-$&").toLowerCase()}),t5=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(x7,function(r,a,c){return fs={name:a,styles:c,next:fs},a})}return y7[t]!==1&&!qA(t)&&typeof n=="number"&&n!==0?n+"px":n},b7="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Dm(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return fs={name:a.name,styles:a.styles,next:fs},a.name;var c=n;if(c.styles!==void 0){var h=c.next;if(h!==void 0)for(;h!==void 0;)fs={name:h.name,styles:h.styles,next:fs},h=h.next;var l=c.styles+";";return l}return w7(e,t,n)}case"function":{if(e!==void 0){var b=fs,w=n(e);return fs=b,Dm(e,t,w)}break}}var I=n;if(t==null)return I;var k=t[I];return k!==void 0?k:I}function w7(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=Dm(e,t,n[a])+";";else for(var c in n){var h=n[c];if(typeof h!="object"){var l=h;t!=null&&t[l]!==void 0?r+=c+"{"+t[l]+"}":e5(l)&&(r+=Bx(c)+":"+t5(c,l)+";")}else{if(c==="NO_COMPONENT_SELECTOR"&&v7)throw new Error(b7);if(Array.isArray(h)&&typeof h[0]=="string"&&(t==null||t[h[0]]===void 0))for(var b=0;b<h.length;b++)e5(h[b])&&(r+=Bx(c)+":"+t5(c,h[b])+";");else{var w=Dm(e,t,h);switch(c){case"animation":case"animationName":{r+=Bx(c)+":"+w+";";break}default:r+=c+"{"+w+"}"}}}}return r}var n5=/label:\s*([^\s;{]+)\s*(;|$)/g,fs;function a1(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,a="";fs=void 0;var c=e[0];if(c==null||c.raw===void 0)r=!1,a+=Dm(n,t,c);else{var h=c;a+=h[0]}for(var l=1;l<e.length;l++)if(a+=Dm(n,t,e[l]),r){var b=c;a+=b[l]}n5.lastIndex=0;for(var w="",I;(I=n5.exec(a))!==null;)w+="-"+I[1];var k=g7(a)+w;return{name:k,styles:a,next:fs}}var S7=function(t){return t()},HA=_0.useInsertionEffect?_0.useInsertionEffect:!1,C7=HA||S7,r5=HA||ne.useLayoutEffect,GA=ne.createContext(typeof HTMLElement<"u"?o7({key:"css"}):null);GA.Provider;var ZA=function(t){return ne.forwardRef(function(n,r){var a=ne.useContext(GA);return t(n,a,r)})},iS=ne.createContext({}),k7=ZA(function(e,t){var n=e.styles,r=a1([n],void 0,ne.useContext(iS)),a=ne.useRef();return r5(function(){var c=t.key+"-global",h=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+c+" "+r.name+'"]');return t.sheet.tags.length&&(h.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",c),h.hydrate([b])),a.current=[h,l],function(){h.flush()}},[t]),r5(function(){var c=a.current,h=c[0],l=c[1];if(l){c[1]=!1;return}if(r.next!==void 0&&WA(t,r.next,!0),h.tags.length){var b=h.tags[h.tags.length-1].nextElementSibling;h.before=b,h.flush()}t.insert("",r,h,!1)},[t,r.name]),null});function E7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return a1(t)}var oS=function(){var t=E7.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},T7=PN,I7=function(t){return t!=="theme"},i5=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?T7:I7},o5=function(t,n,r){var a;if(n){var c=n.shouldForwardProp;a=t.__emotion_forwardProp&&c?function(h){return t.__emotion_forwardProp(h)&&c(h)}:c}return typeof a!="function"&&r&&(a=t.__emotion_forwardProp),a},P7=!1,M7=function(t){var n=t.cache,r=t.serialized,a=t.isStringTag;return VA(n,r,a),C7(function(){return WA(n,r,a)}),null},A7=function e(t,n){var r=t.__emotion_real===t,a=r&&t.__emotion_base||t,c,h;n!==void 0&&(c=n.label,h=n.target);var l=o5(t,n,r),b=l||i5(a),w=!b("as");return function(){var I=arguments,k=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&k.push("label:"+c+";"),I[0]==null||I[0].raw===void 0)k.push.apply(k,I);else{k.push(I[0][0]);for(var P=I.length,R=1;R<P;R++)k.push(I[R],I[0][R])}var $=ZA(function(U,Z,D){var O=w&&U.as||a,F="",G=[],te=U;if(U.theme==null){te={};for(var oe in U)te[oe]=U[oe];te.theme=ne.useContext(iS)}typeof U.className=="string"?F=m7(Z.registered,G,U.className):U.className!=null&&(F=U.className+" ");var ae=a1(k.concat(G),Z.registered,te);F+=Z.key+"-"+ae.name,h!==void 0&&(F+=" "+h);var le=w&&l===void 0?i5(O):b,Ie={};for(var K in U)w&&K==="as"||le(K)&&(Ie[K]=U[K]);return Ie.className=F,D&&(Ie.ref=D),ne.createElement(ne.Fragment,null,ne.createElement(M7,{cache:Z,serialized:ae,isStringTag:typeof O=="string"}),ne.createElement(O,Ie))});return $.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",$.defaultProps=t.defaultProps,$.__emotion_real=$,$.__emotion_base=a,$.__emotion_styles=k,$.__emotion_forwardProp=l,Object.defineProperty($,"toString",{value:function(){return h===void 0&&P7?"NO_COMPONENT_SELECTOR":"."+h}}),$.withComponent=function(U,Z){return e(U,tv({},n,Z,{shouldForwardProp:o5($,Z,!0)})).apply(void 0,k)},$}},L7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],yw=A7.bind();L7.forEach(function(e){yw[e]=yw(e)});var KA={exports:{}},R7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",z7=R7,D7=z7;function XA(){}function YA(){}YA.resetWarningCache=XA;var $7=function(){function e(r,a,c,h,l,b){if(b!==D7){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:YA,resetWarningCache:XA};return n.PropTypes=n,n};KA.exports=$7();var JA=KA.exports;const Hs=Fm(JA);function O7(e){return e==null||Object.keys(e).length===0}function B7(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?a=>t(O7(a)?n:a):t;return se.jsx(k7,{styles:r})}/**
 * @mui/styled-engine v6.1.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function QA(e,t){return yw(e,t)}function F7(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const a5=[];function s5(e){return a5[0]=e,a1(a5)}function ys(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function e4(e){if(!ys(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=e4(e[n])}),t}function Ki(e,t,n={clone:!0}){const r=n.clone?{...e}:e;return ys(e)&&ys(t)&&Object.keys(t).forEach(a=>{ys(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&ys(e[a])?r[a]=Ki(e[a],t[a],n):n.clone?r[a]=ys(t[a])?e4(t[a]):t[a]:r[a]=t[a]}),r}const N7=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>({...n,[r.key]:r.val}),{})};function j7(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5,...a}=e,c=N7(t),h=Object.keys(c);function l(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-r/100}${n})`}function w(P,R){const $=h.indexOf(R);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n}) and (max-width:${($!==-1&&typeof t[h[$]]=="number"?t[h[$]]:R)-r/100}${n})`}function I(P){return h.indexOf(P)+1<h.length?w(P,h[h.indexOf(P)+1]):l(P)}function k(P){const R=h.indexOf(P);return R===0?l(h[1]):R===h.length-1?b(h[R]):w(P,h[h.indexOf(P)+1]).replace("@media","@media not all and")}return{keys:h,values:c,up:l,down:b,between:w,only:I,not:k,unit:n,...a}}function U7(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(r=>r.startsWith("@container")).sort((r,a)=>{var h,l;const c=/min-width:\s*([0-9.]+)/;return+(((h=r.match(c))==null?void 0:h[1])||0)-+(((l=a.match(c))==null?void 0:l[1])||0)});return n.length?n.reduce((r,a)=>{const c=t[a];return delete r[a],r[a]=c,r},{...t}):t}function V7(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function W7(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,r,a]=n,c=Number.isNaN(+r)?r||0:+r;return e.containerQueries(a).up(c)}function q7(e){const t=(c,h)=>c.replace("@media",h?`@container ${h}`:"@container");function n(c,h){c.up=(...l)=>t(e.breakpoints.up(...l),h),c.down=(...l)=>t(e.breakpoints.down(...l),h),c.between=(...l)=>t(e.breakpoints.between(...l),h),c.only=(...l)=>t(e.breakpoints.only(...l),h),c.not=(...l)=>{const b=t(e.breakpoints.not(...l),h);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const r={},a=c=>(n(r,c),r);return n(a),{...e,containerQueries:a}}const H7={borderRadius:4};function Jf(e,t){return t?Ki(e,t,{clone:!1}):e}const s1={xs:0,sm:600,md:900,lg:1200,xl:1536},l5={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${s1[e]}px)`},G7={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:s1[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Aa(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const c=r.breakpoints||l5;return t.reduce((h,l,b)=>(h[c.up(c.keys[b])]=n(t[b]),h),{})}if(typeof t=="object"){const c=r.breakpoints||l5;return Object.keys(t).reduce((h,l)=>{if(V7(c.keys,l)){const b=W7(r.containerQueries?r:G7,l);b&&(h[b]=n(t[l],l))}else if(Object.keys(c.values||s1).includes(l)){const b=c.up(l);h[b]=n(t[l],l)}else{const b=l;h[b]=t[b]}return h},{})}return n(t)}function Z7(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,a)=>{const c=e.up(a);return r[c]={},r},{}))||{}}function K7(e,t){return e.reduce((n,r)=>{const a=n[r];return(!a||Object.keys(a).length===0)&&delete n[r],n},t)}function X7(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((a,c)=>{c<e.length&&(n[a]=!0)}):r.forEach(a=>{e[a]!=null&&(n[a]=!0)}),n}function l1({values:e,breakpoints:t,base:n}){const r=n||X7(e,t),a=Object.keys(r);if(a.length===0)return e;let c;return a.reduce((h,l,b)=>(Array.isArray(e)?(h[l]=e[b]!=null?e[b]:e[c],c=b):typeof e=="object"?(h[l]=e[l]!=null?e[l]:e[c],c=l):h[l]=e,h),{})}function tt(e){if(typeof e!="string")throw new Error(cl(7));return e.charAt(0).toUpperCase()+e.slice(1)}function u1(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((a,c)=>a&&a[c]?a[c]:null,e);if(r!=null)return r}return t.split(".").reduce((r,a)=>r&&r[a]!=null?r[a]:null,e)}function rv(e,t,n,r=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||r:a=u1(e,n)||r,t&&(a=t(a,r,e)),a}function Gr(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:a}=e,c=h=>{if(h[t]==null)return null;const l=h[t],b=h.theme,w=u1(b,r)||{};return Aa(h,l,k=>{let P=rv(w,a,k);return k===P&&typeof k=="string"&&(P=rv(w,a,`${t}${k==="default"?"":tt(k)}`,k)),n===!1?P:{[n]:P}})};return c.propTypes={},c.filterProps=[t],c}function Y7(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const J7={m:"margin",p:"padding"},Q7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},u5={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},e9=Y7(e=>{if(e.length>2)if(u5[e])e=u5[e];else return[e];const[t,n]=e.split(""),r=J7[t],a=Q7[n]||"";return Array.isArray(a)?a.map(c=>r+c):[r+a]}),aS=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],sS=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...aS,...sS];function Ym(e,t,n,r){const a=u1(e,t,!0)??n;return typeof a=="number"||typeof a=="string"?c=>typeof c=="string"?c:typeof a=="string"?`calc(${c} * ${a})`:a*c:Array.isArray(a)?c=>{if(typeof c=="string")return c;const h=Math.abs(c),l=a[h];return c>=0?l:typeof l=="number"?-l:`-${l}`}:typeof a=="function"?a:()=>{}}function lS(e){return Ym(e,"spacing",8)}function Jm(e,t){return typeof t=="string"||t==null?t:e(t)}function t9(e,t){return n=>e.reduce((r,a)=>(r[a]=Jm(t,n),r),{})}function n9(e,t,n,r){if(!t.includes(n))return null;const a=e9(n),c=t9(a,r),h=e[n];return Aa(e,h,c)}function t4(e,t){const n=lS(e.theme);return Object.keys(e).map(r=>n9(e,t,r,n)).reduce(Jf,{})}function Br(e){return t4(e,aS)}Br.propTypes={};Br.filterProps=aS;function Fr(e){return t4(e,sS)}Fr.propTypes={};Fr.filterProps=sS;function n4(e=8,t=lS({spacing:e})){if(e.mui)return e;const n=(...r)=>(r.length===0?[1]:r).map(c=>{const h=t(c);return typeof h=="number"?`${h}px`:h}).join(" ");return n.mui=!0,n}function c1(...e){const t=e.reduce((r,a)=>(a.filterProps.forEach(c=>{r[c]=a}),r),{}),n=r=>Object.keys(r).reduce((a,c)=>t[c]?Jf(a,t[c](r)):a,{});return n.propTypes={},n.filterProps=e.reduce((r,a)=>r.concat(a.filterProps),[]),n}function Ca(e){return typeof e!="number"?e:`${e}px solid`}function Ra(e,t){return Gr({prop:e,themeKey:"borders",transform:t})}const r9=Ra("border",Ca),i9=Ra("borderTop",Ca),o9=Ra("borderRight",Ca),a9=Ra("borderBottom",Ca),s9=Ra("borderLeft",Ca),l9=Ra("borderColor"),u9=Ra("borderTopColor"),c9=Ra("borderRightColor"),d9=Ra("borderBottomColor"),h9=Ra("borderLeftColor"),p9=Ra("outline",Ca),f9=Ra("outlineColor"),d1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ym(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:Jm(t,r)});return Aa(e,e.borderRadius,n)}return null};d1.propTypes={};d1.filterProps=["borderRadius"];c1(r9,i9,o9,a9,s9,l9,u9,c9,d9,h9,d1,p9,f9);const h1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ym(e.theme,"spacing",8),n=r=>({gap:Jm(t,r)});return Aa(e,e.gap,n)}return null};h1.propTypes={};h1.filterProps=["gap"];const p1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ym(e.theme,"spacing",8),n=r=>({columnGap:Jm(t,r)});return Aa(e,e.columnGap,n)}return null};p1.propTypes={};p1.filterProps=["columnGap"];const f1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ym(e.theme,"spacing",8),n=r=>({rowGap:Jm(t,r)});return Aa(e,e.rowGap,n)}return null};f1.propTypes={};f1.filterProps=["rowGap"];const m9=Gr({prop:"gridColumn"}),g9=Gr({prop:"gridRow"}),y9=Gr({prop:"gridAutoFlow"}),v9=Gr({prop:"gridAutoColumns"}),_9=Gr({prop:"gridAutoRows"}),x9=Gr({prop:"gridTemplateColumns"}),b9=Gr({prop:"gridTemplateRows"}),w9=Gr({prop:"gridTemplateAreas"}),S9=Gr({prop:"gridArea"});c1(h1,p1,f1,m9,g9,y9,v9,_9,x9,b9,w9,S9);function kh(e,t){return t==="grey"?t:e}const C9=Gr({prop:"color",themeKey:"palette",transform:kh}),k9=Gr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:kh}),E9=Gr({prop:"backgroundColor",themeKey:"palette",transform:kh});c1(C9,k9,E9);function ea(e){return e<=1&&e!==0?`${e*100}%`:e}const T9=Gr({prop:"width",transform:ea}),uS=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c,h,l,b;const r=((h=(c=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:c.values)==null?void 0:h[n])||s1[n];return r?((b=(l=e.theme)==null?void 0:l.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${r}${e.theme.breakpoints.unit}`}:{maxWidth:r}:{maxWidth:ea(n)}};return Aa(e,e.maxWidth,t)}return null};uS.filterProps=["maxWidth"];const I9=Gr({prop:"minWidth",transform:ea}),P9=Gr({prop:"height",transform:ea}),M9=Gr({prop:"maxHeight",transform:ea}),A9=Gr({prop:"minHeight",transform:ea});Gr({prop:"size",cssProperty:"width",transform:ea});Gr({prop:"size",cssProperty:"height",transform:ea});const L9=Gr({prop:"boxSizing"});c1(T9,uS,I9,P9,M9,A9,L9);const Qm={border:{themeKey:"borders",transform:Ca},borderTop:{themeKey:"borders",transform:Ca},borderRight:{themeKey:"borders",transform:Ca},borderBottom:{themeKey:"borders",transform:Ca},borderLeft:{themeKey:"borders",transform:Ca},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ca},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:d1},color:{themeKey:"palette",transform:kh},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:kh},backgroundColor:{themeKey:"palette",transform:kh},p:{style:Fr},pt:{style:Fr},pr:{style:Fr},pb:{style:Fr},pl:{style:Fr},px:{style:Fr},py:{style:Fr},padding:{style:Fr},paddingTop:{style:Fr},paddingRight:{style:Fr},paddingBottom:{style:Fr},paddingLeft:{style:Fr},paddingX:{style:Fr},paddingY:{style:Fr},paddingInline:{style:Fr},paddingInlineStart:{style:Fr},paddingInlineEnd:{style:Fr},paddingBlock:{style:Fr},paddingBlockStart:{style:Fr},paddingBlockEnd:{style:Fr},m:{style:Br},mt:{style:Br},mr:{style:Br},mb:{style:Br},ml:{style:Br},mx:{style:Br},my:{style:Br},margin:{style:Br},marginTop:{style:Br},marginRight:{style:Br},marginBottom:{style:Br},marginLeft:{style:Br},marginX:{style:Br},marginY:{style:Br},marginInline:{style:Br},marginInlineStart:{style:Br},marginInlineEnd:{style:Br},marginBlock:{style:Br},marginBlockStart:{style:Br},marginBlockEnd:{style:Br},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:h1},rowGap:{style:f1},columnGap:{style:p1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ea},maxWidth:{style:uS},minWidth:{transform:ea},height:{transform:ea},maxHeight:{transform:ea},minHeight:{transform:ea},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function R9(...e){const t=e.reduce((r,a)=>r.concat(Object.keys(a)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function z9(e,t){return typeof e=="function"?e(t):e}function D9(){function e(n,r,a,c){const h={[n]:r,theme:a},l=c[n];if(!l)return{[n]:r};const{cssProperty:b=n,themeKey:w,transform:I,style:k}=l;if(r==null)return null;if(w==="typography"&&r==="inherit")return{[n]:r};const P=u1(a,w)||{};return k?k(h):Aa(h,r,$=>{let U=rv(P,I,$);return $===U&&typeof $=="string"&&(U=rv(P,I,`${n}${$==="default"?"":tt($)}`,$)),b===!1?U:{[b]:U}})}function t(n){const{sx:r,theme:a={}}=n||{};if(!r)return null;const c=a.unstable_sxConfig??Qm;function h(l){let b=l;if(typeof l=="function")b=l(a);else if(typeof l!="object")return l;if(!b)return null;const w=Z7(a.breakpoints),I=Object.keys(w);let k=w;return Object.keys(b).forEach(P=>{const R=z9(b[P],a);if(R!=null)if(typeof R=="object")if(c[P])k=Jf(k,e(P,R,a,c));else{const $=Aa({theme:a},R,U=>({[P]:U}));R9($,R)?k[P]=t({sx:R,theme:a}):k=Jf(k,$)}else k=Jf(k,e(P,R,a,c))}),U7(a,K7(I,k))}return Array.isArray(r)?r.map(h):h(r)}return t}const Dc=D9();Dc.filterProps=["sx"];function $9(e,t){var r;const n=this;if(n.vars){if(!((r=n.colorSchemes)!=null&&r[e])||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return n.palette.mode===e?t:{}}function m1(e={},...t){const{breakpoints:n={},palette:r={},spacing:a,shape:c={},...h}=e,l=j7(n),b=n4(a);let w=Ki({breakpoints:l,direction:"ltr",components:{},palette:{mode:"light",...r},spacing:b,shape:{...H7,...c}},h);return w=q7(w),w.applyStyles=$9,w=t.reduce((I,k)=>Ki(I,k),w),w.unstable_sxConfig={...Qm,...h==null?void 0:h.unstable_sxConfig},w.unstable_sx=function(k){return Dc({sx:k,theme:this})},w}function O9(e){return Object.keys(e).length===0}function B9(e=null){const t=ne.useContext(iS);return!t||O9(t)?e:t}const F9=m1();function g1(e=F9){return B9(e)}function N9({styles:e,themeId:t,defaultTheme:n={}}){const r=g1(n),a=typeof e=="function"?e(t&&r[t]||r):e;return se.jsx(B7,{styles:a})}const j9=e=>{var r;const t={systemProps:{},otherProps:{}},n=((r=e==null?void 0:e.theme)==null?void 0:r.unstable_sxConfig)??Qm;return Object.keys(e).forEach(a=>{n[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function cS(e){const{sx:t,...n}=e,{systemProps:r,otherProps:a}=j9(n);let c;return Array.isArray(t)?c=[r,...t]:typeof t=="function"?c=(...h)=>{const l=t(...h);return ys(l)?{...r,...l}:r}:c={...r,...t},{...a,sx:c}}const c5=e=>e,U9=()=>{let e=c5;return{configure(t){e=t},generate(t){return e(t)},reset(){e=c5}}},r4=U9();function i4(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=i4(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Mt(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=i4(e))&&(r&&(r+=" "),r+=t);return r}function V9(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:a}=e,c=QA("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(Dc);return ne.forwardRef(function(b,w){const I=g1(n),{className:k,component:P="div",...R}=cS(b);return se.jsx(c,{as:P,ref:w,className:Mt(k,a?a(r):r),theme:t&&I[t]||I,...R})})}const W9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Qt(e,t,n="Mui"){const r=W9[t];return r?`${n}-${r}`:`${r4.generate(e)}-${t}`}function Kt(e,t,n="Mui"){const r={};return t.forEach(a=>{r[a]=Qt(e,a,n)}),r}function o4(e){const{variants:t,...n}=e,r={variants:t,style:s5(n),isProcessed:!0};return r.style===n||t&&t.forEach(a=>{typeof a.style!="function"&&(a.style=s5(a.style))}),r}const q9=m1();function Fx(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function H9(e){return e?(t,n)=>n[e]:null}function G9(e,t,n){e.theme=K9(e.theme)?n:e.theme[t]||e.theme}function g0(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(r=>g0(e,r));if(Array.isArray(n==null?void 0:n.variants)){let r;if(n.isProcessed)r=n.style;else{const{variants:a,...c}=n;r=c}return a4(e,n.variants,[r])}return n!=null&&n.isProcessed?n.style:n}function a4(e,t,n=[]){var a;let r;e:for(let c=0;c<t.length;c+=1){const h=t[c];if(typeof h.props=="function"){if(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),!h.props(r))continue}else for(const l in h.props)if(e[l]!==h.props[l]&&((a=e.ownerState)==null?void 0:a[l])!==h.props[l])continue e;typeof h.style=="function"?(r??(r={...e,...e.ownerState,ownerState:e.ownerState}),n.push(h.style(r))):n.push(h.style)}return n}function s4(e={}){const{themeId:t,defaultTheme:n=q9,rootShouldForwardProp:r=Fx,slotShouldForwardProp:a=Fx}=e;function c(l){G9(l,t,n)}return(l,b={})=>{F7(l,te=>te.filter(oe=>oe!==Dc));const{name:w,slot:I,skipVariantsResolver:k,skipSx:P,overridesResolver:R=H9(Y9(I)),...$}=b,U=k!==void 0?k:I&&I!=="Root"&&I!=="root"||!1,Z=P||!1;let D=Fx;I==="Root"||I==="root"?D=r:I?D=a:X9(l)&&(D=void 0);const O=QA(l,{shouldForwardProp:D,label:Z9(),...$}),F=te=>{if(typeof te=="function"&&te.__emotion_real!==te)return function(ae){return g0(ae,te)};if(ys(te)){const oe=o4(te);return oe.variants?function(le){return g0(le,oe)}:oe.style}return te},G=(...te)=>{const oe=[],ae=te.map(F),le=[];if(oe.push(c),w&&R&&le.push(function(Fe){var Ve,et;const Ae=(et=(Ve=Fe.theme.components)==null?void 0:Ve[w])==null?void 0:et.styleOverrides;if(!Ae)return null;const Re={};for(const $e in Ae)Re[$e]=g0(Fe,Ae[$e]);return R(Fe,Re)}),w&&!U&&le.push(function(Fe){var Re,Ve;const De=Fe.theme,Ae=(Ve=(Re=De==null?void 0:De.components)==null?void 0:Re[w])==null?void 0:Ve.variants;return Ae?a4(Fe,Ae):null}),Z||le.push(Dc),Array.isArray(ae[0])){const Ce=ae.shift(),Fe=new Array(oe.length).fill(""),De=new Array(le.length).fill("");let Ae;Ae=[...Fe,...Ce,...De],Ae.raw=[...Fe,...Ce.raw,...De],oe.unshift(Ae)}const Ie=[...oe,...ae,...le],K=O(...Ie);return l.muiName&&(K.muiName=l.muiName),K};return O.withConfig&&(G.withConfig=O.withConfig),G}}function Z9(e,t){return void 0}function K9(e){for(const t in e)return!1;return!0}function X9(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Y9(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const J9=s4();function $m(e,t){const n={...t};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=r;if(a==="components"||a==="slots")n[a]={...e[a],...n[a]};else if(a==="componentsProps"||a==="slotProps"){const c=e[a],h=t[a];if(!h)n[a]=c||{};else if(!c)n[a]=h;else{n[a]={...h};for(const l in c)if(Object.prototype.hasOwnProperty.call(c,l)){const b=l;n[a][b]=$m(c[b],h[b])}}}else n[a]===void 0&&(n[a]=e[a])}return n}function Q9(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:$m(t.components[n].defaultProps,r)}function ej({props:e,name:t,defaultTheme:n,themeId:r}){let a=g1(n);return r&&(a=a[r]||a),Q9({theme:a,name:t,props:e})}const $c=typeof window<"u"?ne.useLayoutEffect:ne.useEffect;function tj(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function dS(e,t=0,n=1){return tj(e,t,n)}function nj(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,a)=>a<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function bu(e){if(e.type)return e;if(e.charAt(0)==="#")return bu(nj(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(cl(9,e));let r=e.substring(t+1,e.length-1),a;if(n==="color"){if(r=r.split(" "),a=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(cl(10,a))}else r=r.split(",");return r=r.map(c=>parseFloat(c)),{type:n,values:r,colorSpace:a}}const rj=e=>{const t=bu(e);return t.values.slice(0,3).map((n,r)=>t.type.includes("hsl")&&r!==0?`${n}%`:n).join(" ")},zf=(e,t)=>{try{return rj(e)}catch{return e}};function y1(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.includes("rgb")?r=r.map((a,c)=>c<3?parseInt(a,10):a):t.includes("hsl")&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.includes("color")?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function l4(e){e=bu(e);const{values:t}=e,n=t[0],r=t[1]/100,a=t[2]/100,c=r*Math.min(a,1-a),h=(w,I=(w+n/30)%12)=>a-c*Math.max(Math.min(I-3,9-I,1),-1);let l="rgb";const b=[Math.round(h(0)*255),Math.round(h(8)*255),Math.round(h(4)*255)];return e.type==="hsla"&&(l+="a",b.push(t[3])),y1({type:l,values:b})}function vw(e){e=bu(e);let t=e.type==="hsl"||e.type==="hsla"?bu(l4(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function ij(e,t){const n=vw(e),r=vw(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function Pr(e,t){return e=bu(e),t=dS(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,y1(e)}function Ry(e,t,n){try{return Pr(e,t)}catch{return e}}function Oh(e,t){if(e=bu(e),t=dS(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return y1(e)}function ar(e,t,n){try{return Oh(e,t)}catch{return e}}function Bh(e,t){if(e=bu(e),t=dS(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return y1(e)}function sr(e,t,n){try{return Bh(e,t)}catch{return e}}function u4(e,t=.15){return vw(e)>.5?Oh(e,t):Bh(e,t)}function zy(e,t,n){try{return u4(e,t)}catch{return e}}function d5(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function c4(e,t=166){let n;function r(...a){const c=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(c,t)}return r.clear=()=>{clearTimeout(n)},r}function y0(e,t){var n,r,a;return ne.isValidElement(e)&&t.indexOf(e.type.muiName??((a=(r=(n=e.type)==null?void 0:n._payload)==null?void 0:r.value)==null?void 0:a.muiName))!==-1}function zo(e){return e&&e.ownerDocument||document}function dl(e){return zo(e).defaultView||window}function _w(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let h5=0;function oj(e){const[t,n]=ne.useState(e),r=e||t;return ne.useEffect(()=>{t==null&&(h5+=1,n(`mui-${h5}`))},[t]),r}const aj={..._0},p5=aj.useId;function d4(e){if(p5!==void 0){const t=p5();return e??t}return oj(e)}function xw({controlled:e,default:t,name:n,state:r="value"}){const{current:a}=ne.useRef(e!==void 0),[c,h]=ne.useState(t),l=a?e:c,b=ne.useCallback(w=>{a||h(w)},[]);return[l,b]}function Qs(e){const t=ne.useRef(e);return $c(()=>{t.current=e}),ne.useRef((...n)=>(0,t.current)(...n)).current}function li(...e){return ne.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{_w(n,t)})},e)}const f5={};function h4(e,t){const n=ne.useRef(f5);return n.current===f5&&(n.current=e(t)),n}const sj=[];function lj(e){ne.useEffect(e,sj)}class hS{constructor(){lf(this,"currentId",null);lf(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});lf(this,"disposeEffect",()=>this.clear)}static create(){return new hS}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function pS(){const e=h4(hS.create).current;return lj(e.disposeEffect),e}function m5(e){try{return e.matches(":focus-visible")}catch{}return!1}function p4(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function rn(e,t,n=void 0){const r={};for(const a in e){const c=e[a];let h="",l=!0;for(let b=0;b<c.length;b+=1){const w=c[b];w&&(h+=(l===!0?"":" ")+t(w),l=!1,n&&n[w]&&(h+=" "+n[w]))}r[a]=h}return r}function uj(e){return typeof e=="string"}function f4(e,t,n){return e===void 0||uj(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function iv(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(r=>r.match(/^on[A-Z]/)&&typeof e[r]=="function"&&!t.includes(r)).forEach(r=>{n[r]=e[r]}),n}function g5(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function m4(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:r,externalForwardedProps:a,className:c}=e;if(!t){const R=Mt(n==null?void 0:n.className,c,a==null?void 0:a.className,r==null?void 0:r.className),$={...n==null?void 0:n.style,...a==null?void 0:a.style,...r==null?void 0:r.style},U={...n,...a,...r};return R.length>0&&(U.className=R),Object.keys($).length>0&&(U.style=$),{props:U,internalRef:void 0}}const h=iv({...a,...r}),l=g5(r),b=g5(a),w=t(h),I=Mt(w==null?void 0:w.className,n==null?void 0:n.className,c,a==null?void 0:a.className,r==null?void 0:r.className),k={...w==null?void 0:w.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...r==null?void 0:r.style},P={...w,...n,...b,...l};return I.length>0&&(P.className=I),Object.keys(k).length>0&&(P.style=k),{props:P,internalRef:w.ref}}function g4(e,t,n){return typeof e=="function"?e(t,n):e}function bw(e){var k;const{elementType:t,externalSlotProps:n,ownerState:r,skipResolvingSlotProps:a=!1,...c}=e,h=a?{}:g4(n,r),{props:l,internalRef:b}=m4({...c,externalSlotProps:h}),w=li(b,h==null?void 0:h.ref,(k=e.additionalProps)==null?void 0:k.ref);return f4(t,{...l,ref:w},r)}function Xh(e){var t;return parseInt(ne.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const cj=ne.createContext(),dj=()=>ne.useContext(cj)??!1,hj=ne.createContext(void 0);function pj(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const a=t.components[n];return a.defaultProps?$m(a.defaultProps,r):!a.styleOverrides&&!a.variants?$m(a,r):r}function fj({props:e,name:t}){const n=ne.useContext(hj);return pj({props:e,name:t,theme:{components:n}})}const y5={theme:void 0};function mj(e){let t,n;return function(a){let c=t;return(c===void 0||a.theme!==n)&&(y5.theme=a.theme,c=o4(e(y5)),t=c,n=a.theme),c}}function gj(e=""){function t(...r){if(!r.length)return"";const a=r[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...r.slice(1))})`:`, ${a}`}return(r,...a)=>`var(--${e?`${e}-`:""}${r}${t(...a)})`}const v5=(e,t,n,r=[])=>{let a=e;t.forEach((c,h)=>{h===t.length-1?Array.isArray(a)?a[Number(c)]=n:a&&typeof a=="object"&&(a[c]=n):a&&typeof a=="object"&&(a[c]||(a[c]=r.includes(c)?[]:{}),a=a[c])})},yj=(e,t,n)=>{function r(a,c=[],h=[]){Object.entries(a).forEach(([l,b])=>{(!n||n&&!n([...c,l]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?r(b,[...c,l],Array.isArray(b)?[...h,l]:h):t([...c,l],b,h))})}r(e)},vj=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(r=>e.includes(r))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function Nx(e,t){const{prefix:n,shouldSkipGeneratingVar:r}=t||{},a={},c={},h={};return yj(e,(l,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!r||!r(l,b))){const I=`--${n?`${n}-`:""}${l.join("-")}`,k=vj(l,b);Object.assign(a,{[I]:k}),v5(c,l,`var(${I})`,w),v5(h,l,`var(${I}, ${k})`,w)}},l=>l[0]==="vars"),{css:a,vars:c,varsWithDefaults:h}}function _j(e,t={}){const{getSelector:n=Z,disableCssColorScheme:r,colorSchemeSelector:a}=t,{colorSchemes:c={},components:h,defaultColorScheme:l="light",...b}=e,{vars:w,css:I,varsWithDefaults:k}=Nx(b,t);let P=k;const R={},{[l]:$,...U}=c;if(Object.entries(U||{}).forEach(([F,G])=>{const{vars:te,css:oe,varsWithDefaults:ae}=Nx(G,t);P=Ki(P,ae),R[F]={css:oe,vars:te}}),$){const{css:F,vars:G,varsWithDefaults:te}=Nx($,t);P=Ki(P,te),R[l]={css:F,vars:G}}function Z(F,G){var oe,ae;let te=a;if(a==="class"&&(te=".%s"),a==="data"&&(te="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(te=`[${a}="%s"]`),F){if(te==="media")return e.defaultColorScheme===F?":root":{[`@media (prefers-color-scheme: ${((ae=(oe=c[F])==null?void 0:oe.palette)==null?void 0:ae.mode)||F})`]:{":root":G}};if(te)return e.defaultColorScheme===F?`:root, ${te.replace("%s",String(F))}`:te.replace("%s",String(F))}return":root"}return{vars:P,generateThemeVars:()=>{let F={...w};return Object.entries(R).forEach(([,{vars:G}])=>{F=Ki(F,G)}),F},generateStyleSheets:()=>{var le,Ie;const F=[],G=e.defaultColorScheme||"light";function te(K,Ce){Object.keys(Ce).length&&F.push(typeof K=="string"?{[K]:{...Ce}}:K)}te(n(void 0,{...I}),I);const{[G]:oe,...ae}=R;if(oe){const{css:K}=oe,Ce=(Ie=(le=c[G])==null?void 0:le.palette)==null?void 0:Ie.mode,Fe=!r&&Ce?{colorScheme:Ce,...K}:{...K};te(n(G,{...Fe}),Fe)}return Object.entries(ae).forEach(([K,{css:Ce}])=>{var Ae,Re;const Fe=(Re=(Ae=c[K])==null?void 0:Ae.palette)==null?void 0:Re.mode,De=!r&&Fe?{colorScheme:Fe,...Ce}:{...Ce};te(n(K,{...De}),De)}),F}}}function xj(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const bj=m1(),wj=J9("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${tt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),Sj=e=>ej({props:e,name:"MuiContainer",defaultTheme:bj}),Cj=(e,t)=>{const n=b=>Qt(t,b),{classes:r,fixed:a,disableGutters:c,maxWidth:h}=e,l={root:["root",h&&`maxWidth${tt(String(h))}`,a&&"fixed",c&&"disableGutters"]};return rn(l,n,r)};function kj(e={}){const{createStyledComponent:t=wj,useThemeProps:n=Sj,componentName:r="MuiContainer"}=e,a=t(({theme:h,ownerState:l})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!l.disableGutters&&{paddingLeft:h.spacing(2),paddingRight:h.spacing(2),[h.breakpoints.up("sm")]:{paddingLeft:h.spacing(3),paddingRight:h.spacing(3)}}}),({theme:h,ownerState:l})=>l.fixed&&Object.keys(h.breakpoints.values).reduce((b,w)=>{const I=w,k=h.breakpoints.values[I];return k!==0&&(b[h.breakpoints.up(I)]={maxWidth:`${k}${h.breakpoints.unit}`}),b},{}),({theme:h,ownerState:l})=>({...l.maxWidth==="xs"&&{[h.breakpoints.up("xs")]:{maxWidth:Math.max(h.breakpoints.values.xs,444)}},...l.maxWidth&&l.maxWidth!=="xs"&&{[h.breakpoints.up(l.maxWidth)]:{maxWidth:`${h.breakpoints.values[l.maxWidth]}${h.breakpoints.unit}`}}}));return ne.forwardRef(function(l,b){const w=n(l),{className:I,component:k="div",disableGutters:P=!1,fixed:R=!1,maxWidth:$="lg",classes:U,...Z}=w,D={...w,component:k,disableGutters:P,fixed:R,maxWidth:$},O=Cj(D,r);return se.jsx(a,{as:k,ownerState:D,className:Mt(O.root,I),ref:b,...Z})})}function y4(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Lm.white,default:Lm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const Ej=y4();function v4(){return{text:{primary:Lm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Lm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const _5=v4();function x5(e,t,n,r){const a=r.light||r,c=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=Bh(e.main,a):t==="dark"&&(e.dark=Oh(e.main,c)))}function Tj(e="light"){return e==="dark"?{main:Nd[200],light:Nd[50],dark:Nd[400]}:{main:Nd[700],light:Nd[400],dark:Nd[800]}}function Ij(e="light"){return e==="dark"?{main:Fd[200],light:Fd[50],dark:Fd[400]}:{main:Fd[500],light:Fd[300],dark:Fd[700]}}function Pj(e="light"){return e==="dark"?{main:Bd[500],light:Bd[300],dark:Bd[700]}:{main:Bd[700],light:Bd[400],dark:Bd[800]}}function Mj(e="light"){return e==="dark"?{main:jd[400],light:jd[300],dark:jd[700]}:{main:jd[700],light:jd[500],dark:jd[900]}}function Aj(e="light"){return e==="dark"?{main:Ud[400],light:Ud[300],dark:Ud[700]}:{main:Ud[800],light:Ud[500],dark:Ud[900]}}function Lj(e="light"){return e==="dark"?{main:Sf[400],light:Sf[300],dark:Sf[700]}:{main:"#ed6c02",light:Sf[500],dark:Sf[900]}}function fS(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2,...a}=e,c=e.primary||Tj(t),h=e.secondary||Ij(t),l=e.error||Pj(t),b=e.info||Mj(t),w=e.success||Aj(t),I=e.warning||Lj(t);function k(U){return ij(U,_5.text.primary)>=n?_5.text.primary:Ej.text.primary}const P=({color:U,name:Z,mainShade:D=500,lightShade:O=300,darkShade:F=700})=>{if(U={...U},!U.main&&U[D]&&(U.main=U[D]),!U.hasOwnProperty("main"))throw new Error(cl(11,Z?` (${Z})`:"",D));if(typeof U.main!="string")throw new Error(cl(12,Z?` (${Z})`:"",JSON.stringify(U.main)));return x5(U,"light",O,r),x5(U,"dark",F,r),U.contrastText||(U.contrastText=k(U.main)),U};let R;return t==="light"?R=y4():t==="dark"&&(R=v4()),Ki({common:{...Lm},mode:t,primary:P({color:c,name:"primary"}),secondary:P({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:l,name:"error"}),warning:P({color:I,name:"warning"}),info:P({color:b,name:"info"}),success:P({color:w,name:"success"}),grey:TN,contrastThreshold:n,getContrastText:k,augmentColor:P,tonalOffset:r,...R},a)}function Rj(e){const t={};return Object.entries(e).forEach(r=>{const[a,c]=r;typeof c=="object"&&(t[a]=`${c.fontStyle?`${c.fontStyle} `:""}${c.fontVariant?`${c.fontVariant} `:""}${c.fontWeight?`${c.fontWeight} `:""}${c.fontStretch?`${c.fontStretch} `:""}${c.fontSize||""}${c.lineHeight?`/${c.lineHeight} `:""}${c.fontFamily||""}`)}),t}function zj(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function Dj(e){return Math.round(e*1e5)/1e5}const b5={textTransform:"uppercase"},w5='"Roboto", "Helvetica", "Arial", sans-serif';function $j(e,t){const{fontFamily:n=w5,fontSize:r=14,fontWeightLight:a=300,fontWeightRegular:c=400,fontWeightMedium:h=500,fontWeightBold:l=700,htmlFontSize:b=16,allVariants:w,pxToRem:I,...k}=typeof t=="function"?t(e):t,P=r/14,R=I||(Z=>`${Z/b*P}rem`),$=(Z,D,O,F,G)=>({fontFamily:n,fontWeight:Z,fontSize:R(D),lineHeight:O,...n===w5?{letterSpacing:`${Dj(F/D)}em`}:{},...G,...w}),U={h1:$(a,96,1.167,-1.5),h2:$(a,60,1.2,-.5),h3:$(c,48,1.167,0),h4:$(c,34,1.235,.25),h5:$(c,24,1.334,0),h6:$(h,20,1.6,.15),subtitle1:$(c,16,1.75,.15),subtitle2:$(h,14,1.57,.1),body1:$(c,16,1.5,.15),body2:$(c,14,1.43,.15),button:$(h,14,1.75,.4,b5),caption:$(c,12,1.66,.4),overline:$(c,12,2.66,1,b5),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ki({htmlFontSize:b,pxToRem:R,fontFamily:n,fontSize:r,fontWeightLight:a,fontWeightRegular:c,fontWeightMedium:h,fontWeightBold:l,...U},k,{clone:!1})}const Oj=.2,Bj=.14,Fj=.12;function wr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${Oj})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${Bj})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Fj})`].join(",")}const Nj=["none",wr(0,2,1,-1,0,1,1,0,0,1,3,0),wr(0,3,1,-2,0,2,2,0,0,1,5,0),wr(0,3,3,-2,0,3,4,0,0,1,8,0),wr(0,2,4,-1,0,4,5,0,0,1,10,0),wr(0,3,5,-1,0,5,8,0,0,1,14,0),wr(0,3,5,-1,0,6,10,0,0,1,18,0),wr(0,4,5,-2,0,7,10,1,0,2,16,1),wr(0,5,5,-3,0,8,10,1,0,3,14,2),wr(0,5,6,-3,0,9,12,1,0,3,16,2),wr(0,6,6,-3,0,10,14,1,0,4,18,3),wr(0,6,7,-4,0,11,15,1,0,4,20,3),wr(0,7,8,-4,0,12,17,2,0,5,22,4),wr(0,7,8,-4,0,13,19,2,0,5,24,4),wr(0,7,9,-4,0,14,21,2,0,5,26,4),wr(0,8,9,-5,0,15,22,2,0,6,28,5),wr(0,8,10,-5,0,16,24,2,0,6,30,5),wr(0,8,11,-5,0,17,26,2,0,6,32,5),wr(0,9,11,-5,0,18,28,2,0,7,34,6),wr(0,9,12,-6,0,19,29,2,0,7,36,6),wr(0,10,13,-6,0,20,31,3,0,8,38,7),wr(0,10,13,-6,0,21,33,3,0,8,40,7),wr(0,10,14,-6,0,22,35,3,0,8,42,7),wr(0,11,14,-7,0,23,36,3,0,9,44,8),wr(0,11,15,-7,0,24,38,3,0,9,46,8)],jj={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Uj={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function S5(e){return`${Math.round(e)}ms`}function Vj(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Wj(e){const t={...jj,...e.easing},n={...Uj,...e.duration};return{getAutoHeightDuration:Vj,create:(a=["all"],c={})=>{const{duration:h=n.standard,easing:l=t.easeInOut,delay:b=0,...w}=c;return(Array.isArray(a)?a:[a]).map(I=>`${I} ${typeof h=="string"?h:S5(h)} ${l} ${typeof b=="string"?b:S5(b)}`).join(",")},...e,easing:t,duration:n}}const qj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Hj(e){return ys(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function _4(e={}){const t={...e};function n(r){const a=Object.entries(r);for(let c=0;c<a.length;c++){const[h,l]=a[c];!Hj(l)||h.startsWith("unstable_")?delete r[h]:ys(l)&&(r[h]={...l},n(r[h]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function ww(e={},...t){const{breakpoints:n,mixins:r={},spacing:a,palette:c={},transitions:h={},typography:l={},shape:b,...w}=e;if(e.vars)throw new Error(cl(20));const I=fS(c),k=m1(e);let P=Ki(k,{mixins:zj(k.breakpoints,r),palette:I,shadows:Nj.slice(),typography:$j(I,l),transitions:Wj(h),zIndex:{...qj}});return P=Ki(P,w),P=t.reduce((R,$)=>Ki(R,$),P),P.unstable_sxConfig={...Qm,...w==null?void 0:w.unstable_sxConfig},P.unstable_sx=function($){return Dc({sx:$,theme:this})},P.toRuntimeSource=_4,P}function Sw(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Gj=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Sw(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function x4(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function b4(e){return e==="dark"?Gj:[]}function Zj(e){const{palette:t={mode:"light"},opacity:n,overlays:r,...a}=e,c=fS(t);return{palette:c,opacity:{...x4(c.mode),...n},overlays:r||b4(c.mode),...a}}function Kj(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Xj=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Yj=e=>(t,n)=>{const r=e.rootSelector||":root",a=e.colorSchemeSelector;let c=a;if(a==="class"&&(c=".%s"),a==="data"&&(c="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(c=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const h={};return Xj(e.cssVarPrefix).forEach(l=>{h[l]=n[l],delete n[l]}),c==="media"?{[r]:n,"@media (prefers-color-scheme: dark)":{[r]:h}}:c?{[c.replace("%s",t)]:h,[`${r}, ${c.replace("%s",t)}`]:n}:{[r]:{...n,...h}}}if(c&&c!=="media")return`${r}, ${c.replace("%s",String(t))}`}else if(t){if(c==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[r]:n}};if(c)return c.replace("%s",String(t))}return r};function Jj(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Ne(e,t,n){!e[t]&&n&&(e[t]=n)}function Df(e){return!e||!e.startsWith("hsl")?e:l4(e)}function Gs(e,t){`${t}Channel`in e||(e[`${t}Channel`]=zf(Df(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function Qj(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const us=e=>{try{return e()}catch{}},eU=(e="mui")=>gj(e);function jx(e,t,n,r){if(!t)return;t=t===!0?{}:t;const a=r==="dark"?"dark":"light";if(!n){e[r]=Zj({...t,palette:{mode:a,...t==null?void 0:t.palette}});return}const{palette:c,...h}=ww({...n,palette:{mode:a,...t==null?void 0:t.palette}});return e[r]={...t,palette:c,opacity:{...x4(a),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||b4(a)},h}function tU(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:r,disableCssColorScheme:a=!1,cssVarPrefix:c="mui",shouldSkipGeneratingVar:h=Kj,colorSchemeSelector:l=n.light&&n.dark?"media":void 0,rootSelector:b=":root",...w}=e,I=Object.keys(n)[0],k=r||(n.light&&I!=="light"?"light":I),P=eU(c),{[k]:R,light:$,dark:U,...Z}=n,D={...Z};let O=R;if((k==="dark"&&!("dark"in n)||k==="light"&&!("light"in n))&&(O=!0),!O)throw new Error(cl(21,k));const F=jx(D,O,w,k);$&&!D.light&&jx(D,$,void 0,"light"),U&&!D.dark&&jx(D,U,void 0,"dark");let G={defaultColorScheme:k,...F,cssVarPrefix:c,colorSchemeSelector:l,rootSelector:b,getCssVar:P,colorSchemes:D,font:{...Rj(F.typography),...F.font},spacing:Qj(w.spacing)};Object.keys(G.colorSchemes).forEach(Ie=>{const K=G.colorSchemes[Ie].palette,Ce=Fe=>{const De=Fe.split("-"),Ae=De[1],Re=De[2];return P(Fe,K[Ae][Re])};if(K.mode==="light"&&(Ne(K.common,"background","#fff"),Ne(K.common,"onBackground","#000")),K.mode==="dark"&&(Ne(K.common,"background","#000"),Ne(K.common,"onBackground","#fff")),Jj(K,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),K.mode==="light"){Ne(K.Alert,"errorColor",ar(K.error.light,.6)),Ne(K.Alert,"infoColor",ar(K.info.light,.6)),Ne(K.Alert,"successColor",ar(K.success.light,.6)),Ne(K.Alert,"warningColor",ar(K.warning.light,.6)),Ne(K.Alert,"errorFilledBg",Ce("palette-error-main")),Ne(K.Alert,"infoFilledBg",Ce("palette-info-main")),Ne(K.Alert,"successFilledBg",Ce("palette-success-main")),Ne(K.Alert,"warningFilledBg",Ce("palette-warning-main")),Ne(K.Alert,"errorFilledColor",us(()=>K.getContrastText(K.error.main))),Ne(K.Alert,"infoFilledColor",us(()=>K.getContrastText(K.info.main))),Ne(K.Alert,"successFilledColor",us(()=>K.getContrastText(K.success.main))),Ne(K.Alert,"warningFilledColor",us(()=>K.getContrastText(K.warning.main))),Ne(K.Alert,"errorStandardBg",sr(K.error.light,.9)),Ne(K.Alert,"infoStandardBg",sr(K.info.light,.9)),Ne(K.Alert,"successStandardBg",sr(K.success.light,.9)),Ne(K.Alert,"warningStandardBg",sr(K.warning.light,.9)),Ne(K.Alert,"errorIconColor",Ce("palette-error-main")),Ne(K.Alert,"infoIconColor",Ce("palette-info-main")),Ne(K.Alert,"successIconColor",Ce("palette-success-main")),Ne(K.Alert,"warningIconColor",Ce("palette-warning-main")),Ne(K.AppBar,"defaultBg",Ce("palette-grey-100")),Ne(K.Avatar,"defaultBg",Ce("palette-grey-400")),Ne(K.Button,"inheritContainedBg",Ce("palette-grey-300")),Ne(K.Button,"inheritContainedHoverBg",Ce("palette-grey-A100")),Ne(K.Chip,"defaultBorder",Ce("palette-grey-400")),Ne(K.Chip,"defaultAvatarColor",Ce("palette-grey-700")),Ne(K.Chip,"defaultIconColor",Ce("palette-grey-700")),Ne(K.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Ne(K.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Ne(K.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Ne(K.LinearProgress,"primaryBg",sr(K.primary.main,.62)),Ne(K.LinearProgress,"secondaryBg",sr(K.secondary.main,.62)),Ne(K.LinearProgress,"errorBg",sr(K.error.main,.62)),Ne(K.LinearProgress,"infoBg",sr(K.info.main,.62)),Ne(K.LinearProgress,"successBg",sr(K.success.main,.62)),Ne(K.LinearProgress,"warningBg",sr(K.warning.main,.62)),Ne(K.Skeleton,"bg",`rgba(${Ce("palette-text-primaryChannel")} / 0.11)`),Ne(K.Slider,"primaryTrack",sr(K.primary.main,.62)),Ne(K.Slider,"secondaryTrack",sr(K.secondary.main,.62)),Ne(K.Slider,"errorTrack",sr(K.error.main,.62)),Ne(K.Slider,"infoTrack",sr(K.info.main,.62)),Ne(K.Slider,"successTrack",sr(K.success.main,.62)),Ne(K.Slider,"warningTrack",sr(K.warning.main,.62));const Fe=zy(K.background.default,.8);Ne(K.SnackbarContent,"bg",Fe),Ne(K.SnackbarContent,"color",us(()=>K.getContrastText(Fe))),Ne(K.SpeedDialAction,"fabHoverBg",zy(K.background.paper,.15)),Ne(K.StepConnector,"border",Ce("palette-grey-400")),Ne(K.StepContent,"border",Ce("palette-grey-400")),Ne(K.Switch,"defaultColor",Ce("palette-common-white")),Ne(K.Switch,"defaultDisabledColor",Ce("palette-grey-100")),Ne(K.Switch,"primaryDisabledColor",sr(K.primary.main,.62)),Ne(K.Switch,"secondaryDisabledColor",sr(K.secondary.main,.62)),Ne(K.Switch,"errorDisabledColor",sr(K.error.main,.62)),Ne(K.Switch,"infoDisabledColor",sr(K.info.main,.62)),Ne(K.Switch,"successDisabledColor",sr(K.success.main,.62)),Ne(K.Switch,"warningDisabledColor",sr(K.warning.main,.62)),Ne(K.TableCell,"border",sr(Ry(K.divider,1),.88)),Ne(K.Tooltip,"bg",Ry(K.grey[700],.92))}if(K.mode==="dark"){Ne(K.Alert,"errorColor",sr(K.error.light,.6)),Ne(K.Alert,"infoColor",sr(K.info.light,.6)),Ne(K.Alert,"successColor",sr(K.success.light,.6)),Ne(K.Alert,"warningColor",sr(K.warning.light,.6)),Ne(K.Alert,"errorFilledBg",Ce("palette-error-dark")),Ne(K.Alert,"infoFilledBg",Ce("palette-info-dark")),Ne(K.Alert,"successFilledBg",Ce("palette-success-dark")),Ne(K.Alert,"warningFilledBg",Ce("palette-warning-dark")),Ne(K.Alert,"errorFilledColor",us(()=>K.getContrastText(K.error.dark))),Ne(K.Alert,"infoFilledColor",us(()=>K.getContrastText(K.info.dark))),Ne(K.Alert,"successFilledColor",us(()=>K.getContrastText(K.success.dark))),Ne(K.Alert,"warningFilledColor",us(()=>K.getContrastText(K.warning.dark))),Ne(K.Alert,"errorStandardBg",ar(K.error.light,.9)),Ne(K.Alert,"infoStandardBg",ar(K.info.light,.9)),Ne(K.Alert,"successStandardBg",ar(K.success.light,.9)),Ne(K.Alert,"warningStandardBg",ar(K.warning.light,.9)),Ne(K.Alert,"errorIconColor",Ce("palette-error-main")),Ne(K.Alert,"infoIconColor",Ce("palette-info-main")),Ne(K.Alert,"successIconColor",Ce("palette-success-main")),Ne(K.Alert,"warningIconColor",Ce("palette-warning-main")),Ne(K.AppBar,"defaultBg",Ce("palette-grey-900")),Ne(K.AppBar,"darkBg",Ce("palette-background-paper")),Ne(K.AppBar,"darkColor",Ce("palette-text-primary")),Ne(K.Avatar,"defaultBg",Ce("palette-grey-600")),Ne(K.Button,"inheritContainedBg",Ce("palette-grey-800")),Ne(K.Button,"inheritContainedHoverBg",Ce("palette-grey-700")),Ne(K.Chip,"defaultBorder",Ce("palette-grey-700")),Ne(K.Chip,"defaultAvatarColor",Ce("palette-grey-300")),Ne(K.Chip,"defaultIconColor",Ce("palette-grey-300")),Ne(K.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Ne(K.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Ne(K.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Ne(K.LinearProgress,"primaryBg",ar(K.primary.main,.5)),Ne(K.LinearProgress,"secondaryBg",ar(K.secondary.main,.5)),Ne(K.LinearProgress,"errorBg",ar(K.error.main,.5)),Ne(K.LinearProgress,"infoBg",ar(K.info.main,.5)),Ne(K.LinearProgress,"successBg",ar(K.success.main,.5)),Ne(K.LinearProgress,"warningBg",ar(K.warning.main,.5)),Ne(K.Skeleton,"bg",`rgba(${Ce("palette-text-primaryChannel")} / 0.13)`),Ne(K.Slider,"primaryTrack",ar(K.primary.main,.5)),Ne(K.Slider,"secondaryTrack",ar(K.secondary.main,.5)),Ne(K.Slider,"errorTrack",ar(K.error.main,.5)),Ne(K.Slider,"infoTrack",ar(K.info.main,.5)),Ne(K.Slider,"successTrack",ar(K.success.main,.5)),Ne(K.Slider,"warningTrack",ar(K.warning.main,.5));const Fe=zy(K.background.default,.98);Ne(K.SnackbarContent,"bg",Fe),Ne(K.SnackbarContent,"color",us(()=>K.getContrastText(Fe))),Ne(K.SpeedDialAction,"fabHoverBg",zy(K.background.paper,.15)),Ne(K.StepConnector,"border",Ce("palette-grey-600")),Ne(K.StepContent,"border",Ce("palette-grey-600")),Ne(K.Switch,"defaultColor",Ce("palette-grey-300")),Ne(K.Switch,"defaultDisabledColor",Ce("palette-grey-600")),Ne(K.Switch,"primaryDisabledColor",ar(K.primary.main,.55)),Ne(K.Switch,"secondaryDisabledColor",ar(K.secondary.main,.55)),Ne(K.Switch,"errorDisabledColor",ar(K.error.main,.55)),Ne(K.Switch,"infoDisabledColor",ar(K.info.main,.55)),Ne(K.Switch,"successDisabledColor",ar(K.success.main,.55)),Ne(K.Switch,"warningDisabledColor",ar(K.warning.main,.55)),Ne(K.TableCell,"border",ar(Ry(K.divider,1),.68)),Ne(K.Tooltip,"bg",Ry(K.grey[700],.92))}Gs(K.background,"default"),Gs(K.background,"paper"),Gs(K.common,"background"),Gs(K.common,"onBackground"),Gs(K,"divider"),Object.keys(K).forEach(Fe=>{const De=K[Fe];De&&typeof De=="object"&&(De.main&&Ne(K[Fe],"mainChannel",zf(Df(De.main))),De.light&&Ne(K[Fe],"lightChannel",zf(Df(De.light))),De.dark&&Ne(K[Fe],"darkChannel",zf(Df(De.dark))),De.contrastText&&Ne(K[Fe],"contrastTextChannel",zf(Df(De.contrastText))),Fe==="text"&&(Gs(K[Fe],"primary"),Gs(K[Fe],"secondary")),Fe==="action"&&(De.active&&Gs(K[Fe],"active"),De.selected&&Gs(K[Fe],"selected")))})}),G=t.reduce((Ie,K)=>Ki(Ie,K),G);const te={prefix:c,disableCssColorScheme:a,shouldSkipGeneratingVar:h,getSelector:Yj(G)},{vars:oe,generateThemeVars:ae,generateStyleSheets:le}=_j(G,te);return G.vars=oe,Object.entries(G.colorSchemes[G.defaultColorScheme]).forEach(([Ie,K])=>{G[Ie]=K}),G.generateThemeVars=ae,G.generateStyleSheets=le,G.generateSpacing=function(){return n4(w.spacing,lS(this))},G.getColorSchemeSelector=xj(l),G.spacing=G.generateSpacing(),G.shouldSkipGeneratingVar=h,G.unstable_sxConfig={...Qm,...w==null?void 0:w.unstable_sxConfig},G.unstable_sx=function(K){return Dc({sx:K,theme:this})},G.toRuntimeSource=_4,G}function C5(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:fS({...n===!0?{}:n.palette,mode:t})})}function w4(e={},...t){const{palette:n,cssVariables:r=!1,colorSchemes:a=n?void 0:{light:!0},defaultColorScheme:c=n==null?void 0:n.mode,...h}=e,l=c||"light",b=a==null?void 0:a[l],w={...a,...n?{[l]:{...typeof b!="boolean"&&b,palette:n}}:void 0};if(r===!1){if(!("colorSchemes"in e))return ww(e,...t);let I=n;"palette"in e||w[l]&&(w[l]!==!0?I=w[l].palette:l==="dark"&&(I={mode:"dark"}));const k=ww({...e,palette:I},...t);return k.defaultColorScheme=l,k.colorSchemes=w,k.palette.mode==="light"&&(k.colorSchemes.light={...w.light!==!0&&w.light,palette:k.palette},C5(k,"dark",w.dark)),k.palette.mode==="dark"&&(k.colorSchemes.dark={...w.dark!==!0&&w.dark,palette:k.palette},C5(k,"light",w.light)),k}return!n&&!("light"in w)&&l==="light"&&(w.light=!0),tU({...h,colorSchemes:w,defaultColorScheme:l,...typeof r!="boolean"&&r},...t)}const mS=w4();function eg(){const e=g1(mS);return e[Hv]||e}function S4(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const ua=e=>S4(e)&&e!=="classes",ht=s4({themeId:Hv,defaultTheme:mS,rootShouldForwardProp:ua});function nU(e){return se.jsx(N9,{...e,defaultTheme:mS,themeId:Hv})}function rU(e){return function(n){return se.jsx(nU,{styles:typeof e=="function"?r=>e({theme:r,...n}):e})}}function iU(){return cS}const un=mj;function cn(e){return fj(e)}function oU(e){return Qt("MuiSvgIcon",e)}Kt("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const aU=e=>{const{color:t,fontSize:n,classes:r}=e,a={root:["root",t!=="inherit"&&`color${tt(t)}`,`fontSize${tt(n)}`]};return rn(a,oU,r)},sU=ht("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${tt(n.color)}`],t[`fontSize${tt(n.fontSize)}`]]}})(un(({theme:e})=>{var t,n,r,a,c,h,l,b,w,I,k,P,R,$;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(a=(t=e.transitions)==null?void 0:t.create)==null?void 0:a.call(t,"fill",{duration:(r=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:r.shorter}),variants:[{props:U=>!U.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((h=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:h.call(c,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(l=e.typography)==null?void 0:l.pxToRem)==null?void 0:b.call(l,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((I=(w=e.typography)==null?void 0:w.pxToRem)==null?void 0:I.call(w,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,U])=>U&&U.main).map(([U])=>{var Z,D;return{props:{color:U},style:{color:(D=(Z=(e.vars??e).palette)==null?void 0:Z[U])==null?void 0:D.main}}}),{props:{color:"action"},style:{color:(P=(k=(e.vars??e).palette)==null?void 0:k.action)==null?void 0:P.active}},{props:{color:"disabled"},style:{color:($=(R=(e.vars??e).palette)==null?void 0:R.action)==null?void 0:$.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),Tc=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiSvgIcon"}),{children:a,className:c,color:h="inherit",component:l="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:I=!1,titleAccess:k,viewBox:P="0 0 24 24",...R}=r,$=ne.isValidElement(a)&&a.type==="svg",U={...r,color:h,component:l,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:P,hasSvgAsChild:$},Z={};I||(Z.viewBox=P);const D=aU(U);return se.jsxs(sU,{as:l,className:Mt(D.root,c),focusable:"false",color:w,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:n,...Z,...R,...$&&a.props,ownerState:U,children:[$?a.props.children:a,k?se.jsx("title",{children:k}):null]})});Tc&&(Tc.muiName="SvgIcon");function wi(e,t){function n(r,a){return se.jsx(Tc,{"data-testid":`${t}Icon`,ref:a,...r,children:e})}return n.muiName=Tc.muiName,ne.memo(ne.forwardRef(n))}var rr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gS=Symbol.for("react.element"),yS=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),_1=Symbol.for("react.strict_mode"),x1=Symbol.for("react.profiler"),b1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),lU=Symbol.for("react.server_context"),S1=Symbol.for("react.forward_ref"),C1=Symbol.for("react.suspense"),k1=Symbol.for("react.suspense_list"),E1=Symbol.for("react.memo"),T1=Symbol.for("react.lazy"),uU=Symbol.for("react.offscreen"),C4;C4=Symbol.for("react.module.reference");function za(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gS:switch(e=e.type,e){case v1:case x1:case _1:case C1:case k1:return e;default:switch(e=e&&e.$$typeof,e){case lU:case w1:case S1:case T1:case E1:case b1:return e;default:return t}}case yS:return t}}}rr.ContextConsumer=w1;rr.ContextProvider=b1;rr.Element=gS;rr.ForwardRef=S1;rr.Fragment=v1;rr.Lazy=T1;rr.Memo=E1;rr.Portal=yS;rr.Profiler=x1;rr.StrictMode=_1;rr.Suspense=C1;rr.SuspenseList=k1;rr.isAsyncMode=function(){return!1};rr.isConcurrentMode=function(){return!1};rr.isContextConsumer=function(e){return za(e)===w1};rr.isContextProvider=function(e){return za(e)===b1};rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gS};rr.isForwardRef=function(e){return za(e)===S1};rr.isFragment=function(e){return za(e)===v1};rr.isLazy=function(e){return za(e)===T1};rr.isMemo=function(e){return za(e)===E1};rr.isPortal=function(e){return za(e)===yS};rr.isProfiler=function(e){return za(e)===x1};rr.isStrictMode=function(e){return za(e)===_1};rr.isSuspense=function(e){return za(e)===C1};rr.isSuspenseList=function(e){return za(e)===k1};rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===v1||e===x1||e===_1||e===C1||e===k1||e===uU||typeof e=="object"&&e!==null&&(e.$$typeof===T1||e.$$typeof===E1||e.$$typeof===b1||e.$$typeof===w1||e.$$typeof===S1||e.$$typeof===C4||e.getModuleId!==void 0)};rr.typeOf=za;function k4(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Cw(e,t){return Cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Cw(e,t)}function E4(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Cw(e,t)}const k5={disabled:!1},ov=_i.createContext(null);var cU=function(t){return t.scrollTop},$f="unmounted",cc="exited",dc="entering",Xd="entered",kw="exiting",Is=function(e){E4(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var h=a,l=h&&!h.isMounting?r.enter:r.appear,b;return c.appearStatus=null,r.in?l?(b=cc,c.appearStatus=dc):b=Xd:r.unmountOnExit||r.mountOnEnter?b=$f:b=cc,c.state={status:b},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var h=a.in;return h&&c.status===$f?{status:cc}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var h=this.state.status;this.props.in?h!==dc&&h!==Xd&&(c=dc):(h===dc||h===Xd)&&(c=kw)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,h,l;return c=h=l=a,a!=null&&typeof a!="number"&&(c=a.exit,h=a.enter,l=a.appear!==void 0?a.appear:h),{exit:c,enter:h,appear:l}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===dc){if(this.props.unmountOnExit||this.props.mountOnEnter){var h=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this);h&&cU(h)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===cc&&this.setState({status:$f})},n.performEnter=function(a){var c=this,h=this.props.enter,l=this.context?this.context.isMounting:a,b=this.props.nodeRef?[l]:[Cy.findDOMNode(this),l],w=b[0],I=b[1],k=this.getTimeouts(),P=l?k.appear:k.enter;if(!a&&!h||k5.disabled){this.safeSetState({status:Xd},function(){c.props.onEntered(w)});return}this.props.onEnter(w,I),this.safeSetState({status:dc},function(){c.props.onEntering(w,I),c.onTransitionEnd(P,function(){c.safeSetState({status:Xd},function(){c.props.onEntered(w,I)})})})},n.performExit=function(){var a=this,c=this.props.exit,h=this.getTimeouts(),l=this.props.nodeRef?void 0:Cy.findDOMNode(this);if(!c||k5.disabled){this.safeSetState({status:cc},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:kw},function(){a.props.onExiting(l),a.onTransitionEnd(h.exit,function(){a.safeSetState({status:cc},function(){a.props.onExited(l)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,h=!0;return this.nextCallback=function(l){h&&(h=!1,c.nextCallback=null,a(l))},this.nextCallback.cancel=function(){h=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var h=this.props.nodeRef?this.props.nodeRef.current:Cy.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!h||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[h,this.nextCallback],w=b[0],I=b[1];this.props.addEndListener(w,I)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===$f)return null;var c=this.props,h=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var l=k4(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _i.createElement(ov.Provider,{value:null},typeof h=="function"?h(a,l):_i.cloneElement(_i.Children.only(h),l))},t}(_i.Component);Is.contextType=ov;Is.propTypes={};function Vd(){}Is.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Vd,onEntering:Vd,onEntered:Vd,onExit:Vd,onExiting:Vd,onExited:Vd};Is.UNMOUNTED=$f;Is.EXITED=cc;Is.ENTERING=dc;Is.ENTERED=Xd;Is.EXITING=kw;function dU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vS(e,t){var n=function(c){return t&&ne.isValidElement(c)?t(c):c},r=Object.create(null);return e&&ne.Children.map(e,function(a){return a}).forEach(function(a){r[a.key]=n(a)}),r}function hU(e,t){e=e||{},t=t||{};function n(I){return I in t?t[I]:e[I]}var r=Object.create(null),a=[];for(var c in e)c in t?a.length&&(r[c]=a,a=[]):a.push(c);var h,l={};for(var b in t){if(r[b])for(h=0;h<r[b].length;h++){var w=r[b][h];l[r[b][h]]=n(w)}l[b]=n(b)}for(h=0;h<a.length;h++)l[a[h]]=n(a[h]);return l}function vc(e,t,n){return n[t]!=null?n[t]:e.props[t]}function pU(e,t){return vS(e.children,function(n){return ne.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:vc(n,"appear",e),enter:vc(n,"enter",e),exit:vc(n,"exit",e)})})}function fU(e,t,n){var r=vS(e.children),a=hU(t,r);return Object.keys(a).forEach(function(c){var h=a[c];if(ne.isValidElement(h)){var l=c in t,b=c in r,w=t[c],I=ne.isValidElement(w)&&!w.props.in;b&&(!l||I)?a[c]=ne.cloneElement(h,{onExited:n.bind(null,h),in:!0,exit:vc(h,"exit",e),enter:vc(h,"enter",e)}):!b&&l&&!I?a[c]=ne.cloneElement(h,{in:!1}):b&&l&&ne.isValidElement(w)&&(a[c]=ne.cloneElement(h,{onExited:n.bind(null,h),in:w.props.in,exit:vc(h,"exit",e),enter:vc(h,"enter",e)}))}}),a}var mU=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},gU={component:"div",childFactory:function(t){return t}},_S=function(e){E4(t,e);function t(r,a){var c;c=e.call(this,r,a)||this;var h=c.handleExited.bind(dU(c));return c.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,c){var h=c.children,l=c.handleExited,b=c.firstRender;return{children:b?pU(a,l):fU(a,h,l),firstRender:!1}},n.handleExited=function(a,c){var h=vS(this.props.children);a.key in h||(a.props.onExited&&a.props.onExited(c),this.mounted&&this.setState(function(l){var b=tv({},l.children);return delete b[a.key],{children:b}}))},n.render=function(){var a=this.props,c=a.component,h=a.childFactory,l=k4(a,["component","childFactory"]),b=this.state.contextValue,w=mU(this.state.children).map(h);return delete l.appear,delete l.enter,delete l.exit,c===null?_i.createElement(ov.Provider,{value:b},w):_i.createElement(ov.Provider,{value:b},_i.createElement(c,l,w))},t}(_i.Component);_S.propTypes={};_S.defaultProps=gU;const T4=e=>e.scrollTop;function av(e,t){const{timeout:n,easing:r,style:a={}}=e;return{duration:a.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:a.transitionTimingFunction??(typeof r=="object"?r[t.mode]:r),delay:a.transitionDelay}}function yU(e){return Qt("MuiPaper",e)}Kt("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const vU=e=>{const{square:t,elevation:n,variant:r,classes:a}=e,c={root:["root",r,!t&&"rounded",r==="elevation"&&`elevation${n}`]};return rn(c,yU,a)},_U=ht("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(un(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),Yh=ne.forwardRef(function(t,n){var R;const r=cn({props:t,name:"MuiPaper"}),a=eg(),{className:c,component:h="div",elevation:l=1,square:b=!1,variant:w="elevation",...I}=r,k={...r,component:h,elevation:l,square:b,variant:w},P=vU(k);return se.jsx(_U,{as:h,ownerState:k,className:Mt(P.root,c),ref:n,...I,style:{...w==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[l],...a.vars&&{"--Paper-overlay":(R=a.vars.overlays)==null?void 0:R[l]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Pr("#fff",Sw(l))}, ${Pr("#fff",Sw(l))})`}},...I.style}})});function fo(e,t){const{className:n,elementType:r,ownerState:a,externalForwardedProps:c,getSlotOwnerState:h,internalForwardedProps:l,...b}=t,{component:w,slots:I={[e]:void 0},slotProps:k={[e]:void 0},...P}=c,R=I[e]||r,$=g4(k[e],a),{props:{component:U,...Z},internalRef:D}=m4({className:n,...b,externalForwardedProps:e==="root"?P:void 0,externalSlotProps:$}),O=li(D,$==null?void 0:$.ref,t.ref),F=h?h(Z):{},G={...a,...F},te=e==="root"?U||w:U,oe=f4(R,{...e==="root"&&!w&&!I[e]&&l,...e!=="root"&&!I[e]&&l,...Z,...te&&{as:te},ref:O},G);return Object.keys(F).forEach(ae=>{delete oe[ae]}),[R,oe]}class sv{constructor(){lf(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new sv}static use(){const t=h4(sv.create).current,[n,r]=ne.useState(!1);return t.shouldMount=n,t.setShouldMount=r,ne.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=bU(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function xU(){return sv.use()}function bU(){let e,t;const n=new Promise((r,a)=>{e=r,t=a});return n.resolve=e,n.reject=t,n}function wU(e){const{className:t,classes:n,pulsate:r=!1,rippleX:a,rippleY:c,rippleSize:h,in:l,onExited:b,timeout:w}=e,[I,k]=ne.useState(!1),P=Mt(t,n.ripple,n.rippleVisible,r&&n.ripplePulsate),R={width:h,height:h,top:-(h/2)+c,left:-(h/2)+a},$=Mt(n.child,I&&n.childLeaving,r&&n.childPulsate);return!l&&!I&&k(!0),ne.useEffect(()=>{if(!l&&b!=null){const U=setTimeout(b,w);return()=>{clearTimeout(U)}}},[b,l,w]),se.jsx("span",{className:P,style:R,children:se.jsx("span",{className:$})})}const ba=Kt("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ew=550,SU=80,CU=oS`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,kU=oS`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,EU=oS`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,TU=ht("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),IU=ht(wU,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ba.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${CU};
    animation-duration: ${Ew}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ba.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ba.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ba.childLeaving} {
    opacity: 0;
    animation-name: ${kU};
    animation-duration: ${Ew}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ba.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${EU};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,PU=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:c={},className:h,...l}=r,[b,w]=ne.useState([]),I=ne.useRef(0),k=ne.useRef(null);ne.useEffect(()=>{k.current&&(k.current(),k.current=null)},[b]);const P=ne.useRef(!1),R=pS(),$=ne.useRef(null),U=ne.useRef(null),Z=ne.useCallback(G=>{const{pulsate:te,rippleX:oe,rippleY:ae,rippleSize:le,cb:Ie}=G;w(K=>[...K,se.jsx(IU,{classes:{ripple:Mt(c.ripple,ba.ripple),rippleVisible:Mt(c.rippleVisible,ba.rippleVisible),ripplePulsate:Mt(c.ripplePulsate,ba.ripplePulsate),child:Mt(c.child,ba.child),childLeaving:Mt(c.childLeaving,ba.childLeaving),childPulsate:Mt(c.childPulsate,ba.childPulsate)},timeout:Ew,pulsate:te,rippleX:oe,rippleY:ae,rippleSize:le},I.current)]),I.current+=1,k.current=Ie},[c]),D=ne.useCallback((G={},te={},oe=()=>{})=>{const{pulsate:ae=!1,center:le=a||te.pulsate,fakeElement:Ie=!1}=te;if((G==null?void 0:G.type)==="mousedown"&&P.current){P.current=!1;return}(G==null?void 0:G.type)==="touchstart"&&(P.current=!0);const K=Ie?null:U.current,Ce=K?K.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Fe,De,Ae;if(le||G===void 0||G.clientX===0&&G.clientY===0||!G.clientX&&!G.touches)Fe=Math.round(Ce.width/2),De=Math.round(Ce.height/2);else{const{clientX:Re,clientY:Ve}=G.touches&&G.touches.length>0?G.touches[0]:G;Fe=Math.round(Re-Ce.left),De=Math.round(Ve-Ce.top)}if(le)Ae=Math.sqrt((2*Ce.width**2+Ce.height**2)/3),Ae%2===0&&(Ae+=1);else{const Re=Math.max(Math.abs((K?K.clientWidth:0)-Fe),Fe)*2+2,Ve=Math.max(Math.abs((K?K.clientHeight:0)-De),De)*2+2;Ae=Math.sqrt(Re**2+Ve**2)}G!=null&&G.touches?$.current===null&&($.current=()=>{Z({pulsate:ae,rippleX:Fe,rippleY:De,rippleSize:Ae,cb:oe})},R.start(SU,()=>{$.current&&($.current(),$.current=null)})):Z({pulsate:ae,rippleX:Fe,rippleY:De,rippleSize:Ae,cb:oe})},[a,Z,R]),O=ne.useCallback(()=>{D({},{pulsate:!0})},[D]),F=ne.useCallback((G,te)=>{if(R.clear(),(G==null?void 0:G.type)==="touchend"&&$.current){$.current(),$.current=null,R.start(0,()=>{F(G,te)});return}$.current=null,w(oe=>oe.length>0?oe.slice(1):oe),k.current=te},[R]);return ne.useImperativeHandle(n,()=>({pulsate:O,start:D,stop:F}),[O,D,F]),se.jsx(TU,{className:Mt(ba.root,c.root,h),ref:U,...l,children:se.jsx(_S,{component:null,exit:!0,children:b})})});function MU(e){return Qt("MuiButtonBase",e)}const AU=Kt("MuiButtonBase",["root","disabled","focusVisible"]),LU=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:r,classes:a}=e,h=rn({root:["root",t&&"disabled",n&&"focusVisible"]},MU,a);return n&&r&&(h.root+=` ${r}`),h},RU=ht("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${AU.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Oc=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:c=!1,children:h,className:l,component:b="button",disabled:w=!1,disableRipple:I=!1,disableTouchRipple:k=!1,focusRipple:P=!1,focusVisibleClassName:R,LinkComponent:$="a",onBlur:U,onClick:Z,onContextMenu:D,onDragLeave:O,onFocus:F,onFocusVisible:G,onKeyDown:te,onKeyUp:oe,onMouseDown:ae,onMouseLeave:le,onMouseUp:Ie,onTouchEnd:K,onTouchMove:Ce,onTouchStart:Fe,tabIndex:De=0,TouchRippleProps:Ae,touchRippleRef:Re,type:Ve,...et}=r,$e=ne.useRef(null),Ue=xU(),ct=li(Ue.ref,Re),[St,At]=ne.useState(!1);w&&St&&At(!1),ne.useImperativeHandle(a,()=>({focusVisible:()=>{At(!0),$e.current.focus()}}),[]);const jt=Ue.shouldMount&&!I&&!w;ne.useEffect(()=>{St&&P&&!I&&Ue.pulsate()},[I,P,St,Ue]);function zt(Ct,zn,yr=k){return Qs(ei=>(zn&&zn(ei),yr||Ue[Ct](ei),!0))}const Xt=zt("start",ae),yn=zt("stop",D),on=zt("stop",O),Un=zt("stop",Ie),Mn=zt("stop",Ct=>{St&&Ct.preventDefault(),le&&le(Ct)}),Vt=zt("start",Fe),an=zt("stop",K),Wt=zt("stop",Ce),Cn=zt("stop",Ct=>{m5(Ct.target)||At(!1),U&&U(Ct)},!1),_t=Qs(Ct=>{$e.current||($e.current=Ct.currentTarget),m5(Ct.target)&&(At(!0),G&&G(Ct)),F&&F(Ct)}),Dt=()=>{const Ct=$e.current;return b&&b!=="button"&&!(Ct.tagName==="A"&&Ct.href)},Se=Qs(Ct=>{P&&!Ct.repeat&&St&&Ct.key===" "&&Ue.stop(Ct,()=>{Ue.start(Ct)}),Ct.target===Ct.currentTarget&&Dt()&&Ct.key===" "&&Ct.preventDefault(),te&&te(Ct),Ct.target===Ct.currentTarget&&Dt()&&Ct.key==="Enter"&&!w&&(Ct.preventDefault(),Z&&Z(Ct))}),ur=Qs(Ct=>{P&&Ct.key===" "&&St&&!Ct.defaultPrevented&&Ue.stop(Ct,()=>{Ue.pulsate(Ct)}),oe&&oe(Ct),Z&&Ct.target===Ct.currentTarget&&Dt()&&Ct.key===" "&&!Ct.defaultPrevented&&Z(Ct)});let bn=b;bn==="button"&&(et.href||et.to)&&(bn=$);const ft={};bn==="button"?(ft.type=Ve===void 0?"button":Ve,ft.disabled=w):(!et.href&&!et.to&&(ft.role="button"),w&&(ft["aria-disabled"]=w));const qt=li(n,$e),fn={...r,centerRipple:c,component:b,disabled:w,disableRipple:I,disableTouchRipple:k,focusRipple:P,tabIndex:De,focusVisible:St},ir=LU(fn);return se.jsxs(RU,{as:bn,className:Mt(ir.root,l),ownerState:fn,onBlur:Cn,onClick:Z,onContextMenu:yn,onFocus:_t,onKeyDown:Se,onKeyUp:ur,onMouseDown:Xt,onMouseLeave:Mn,onMouseUp:Un,onDragLeave:on,onTouchEnd:an,onTouchMove:Wt,onTouchStart:Vt,ref:qt,tabIndex:w?-1:De,type:Ve,...ft,...et,children:[h,jt?se.jsx(PU,{ref:ct,center:c,...Ae}):null]})});function zU(e){return typeof e.main=="string"}function DU(e,t=[]){if(!zU(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Li(e=[]){return([,t])=>t&&DU(t,e)}function $U(e){return Qt("MuiAlert",e)}const E5=Kt("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function OU(e){return Qt("MuiIconButton",e)}const BU=Kt("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),FU=e=>{const{classes:t,disabled:n,color:r,edge:a,size:c}=e,h={root:["root",n&&"disabled",r!=="default"&&`color${tt(r)}`,a&&`edge${tt(a)}`,`size${tt(c)}`]};return rn(h,OU,t)},NU=ht(Oc,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="default"&&t[`color${tt(n.color)}`],n.edge&&t[`edge${tt(n.edge)}`],t[`size${tt(n.size)}`]]}})(un(({theme:e})=>({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),variants:[{props:t=>!t.disableRipple,style:{"--IconButton-hoverBg":e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette.action.active,e.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]})),un(({theme:e})=>({variants:[{props:{color:"inherit"},style:{color:"inherit"}},...Object.entries(e.palette).filter(Li()).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].main}})),...Object.entries(e.palette).filter(Li()).map(([t])=>({props:{color:t},style:{"--IconButton-hoverBg":e.vars?`rgba(${(e.vars||e).palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr((e.vars||e).palette[t].main,e.palette.action.hoverOpacity)}})),{props:{size:"small"},style:{padding:5,fontSize:e.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:e.typography.pxToRem(28)}}],[`&.${BU.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}}))),jU=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiIconButton"}),{edge:a=!1,children:c,className:h,color:l="default",disabled:b=!1,disableFocusRipple:w=!1,size:I="medium",...k}=r,P={...r,edge:a,color:l,disabled:b,disableFocusRipple:w,size:I},R=FU(P);return se.jsx(NU,{className:Mt(R.root,h),centerRipple:!0,focusRipple:!w,disabled:b,ref:n,...k,ownerState:P,children:c})}),UU=wi(se.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),VU=wi(se.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),WU=wi(se.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),qU=wi(se.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),HU=wi(se.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),GU=e=>{const{variant:t,color:n,severity:r,classes:a}=e,c={root:["root",`color${tt(n||r)}`,`${t}${tt(n||r)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return rn(c,$U,a)},ZU=ht(Yh,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${tt(n.color||n.severity)}`]]}})(un(({theme:e})=>{const t=e.palette.mode==="light"?Oh:Bh,n=e.palette.mode==="light"?Bh:Oh;return{...e.typography.body2,backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(Li(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${r}StandardBg`]:n(e.palette[r].light,.9),[`& .${E5.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(Li(["light"])).map(([r])=>({props:{colorSeverity:r,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${r}Color`]:t(e.palette[r].light,.6),border:`1px solid ${(e.vars||e).palette[r].light}`,[`& .${E5.icon}`]:e.vars?{color:e.vars.palette.Alert[`${r}IconColor`]}:{color:e.palette[r].main}}})),...Object.entries(e.palette).filter(Li(["dark"])).map(([r])=>({props:{colorSeverity:r,variant:"filled"},style:{fontWeight:e.typography.fontWeightMedium,...e.vars?{color:e.vars.palette.Alert[`${r}FilledColor`],backgroundColor:e.vars.palette.Alert[`${r}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[r].dark:e.palette[r].main,color:e.palette.getContrastText(e.palette[r].main)}}}))]}})),KU=ht("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),XU=ht("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),T5=ht("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),I5={success:se.jsx(UU,{fontSize:"inherit"}),warning:se.jsx(VU,{fontSize:"inherit"}),error:se.jsx(WU,{fontSize:"inherit"}),info:se.jsx(qU,{fontSize:"inherit"})},YU=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiAlert"}),{action:a,children:c,className:h,closeText:l="Close",color:b,components:w={},componentsProps:I={},icon:k,iconMapping:P=I5,onClose:R,role:$="alert",severity:U="success",slotProps:Z={},slots:D={},variant:O="standard",...F}=r,G={...r,color:b,severity:U,variant:O,colorSeverity:b||U},te=GU(G),oe={slots:{closeButton:w.CloseButton,closeIcon:w.CloseIcon,...D},slotProps:{...I,...Z}},[ae,le]=fo("closeButton",{elementType:jU,externalForwardedProps:oe,ownerState:G}),[Ie,K]=fo("closeIcon",{elementType:HU,externalForwardedProps:oe,ownerState:G});return se.jsxs(ZU,{role:$,elevation:0,ownerState:G,className:Mt(te.root,h),ref:n,...F,children:[k!==!1?se.jsx(KU,{ownerState:G,className:te.icon,children:k||P[U]||I5[U]}):null,se.jsx(XU,{ownerState:G,className:te.message,children:c}),a!=null?se.jsx(T5,{ownerState:G,className:te.action,children:a}):null,a==null&&R?se.jsx(T5,{ownerState:G,className:te.action,children:se.jsx(ae,{size:"small","aria-label":l,title:l,color:"inherit",onClick:R,...le,children:se.jsx(Ie,{fontSize:"small",...K})})}):null]})});function JU(e){return Qt("MuiTypography",e)}const P5=Kt("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),QU={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},eV=iU(),tV=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:a,variant:c,classes:h}=e,l={root:["root",c,e.align!=="inherit"&&`align${tt(t)}`,n&&"gutterBottom",r&&"noWrap",a&&"paragraph"]};return rn(l,JU,h)},nV=ht("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${tt(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(un(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,r])=>n!=="inherit"&&r&&typeof r=="object").map(([n,r])=>({props:{variant:n},style:r})),...Object.entries(e.palette).filter(Li()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${tt(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),M5={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},qr=ne.forwardRef(function(t,n){const{color:r,...a}=cn({props:t,name:"MuiTypography"}),c=!QU[r],h=eV({...a,...c&&{color:r}}),{align:l="inherit",className:b,component:w,gutterBottom:I=!1,noWrap:k=!1,paragraph:P=!1,variant:R="body1",variantMapping:$=M5,...U}=h,Z={...h,align:l,color:r,className:b,component:w,gutterBottom:I,noWrap:k,paragraph:P,variant:R,variantMapping:$},D=w||(P?"p":$[R]||M5[R])||"span",O=tV(Z);return se.jsx(nV,{as:D,ref:n,className:Mt(O.root,b),...U,ownerState:Z,style:{...l!=="inherit"&&{"--Typography-textAlign":l},...U.style}})});function rV(e){return typeof e=="function"?e():e}const iV=ne.forwardRef(function(t,n){const{children:r,container:a,disablePortal:c=!1}=t,[h,l]=ne.useState(null),b=li(ne.isValidElement(r)?Xh(r):null,n);if($c(()=>{c||l(rV(a)||document.body)},[a,c]),$c(()=>{if(h&&!c)return _w(n,h),()=>{_w(n,null)}},[n,h,c]),c){if(ne.isValidElement(r)){const w={ref:b};return ne.cloneElement(r,w)}return se.jsx(ne.Fragment,{children:r})}return se.jsx(ne.Fragment,{children:h&&T2.createPortal(r,h)})}),oV=wi(se.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function aV(e){return Qt("MuiChip",e)}const _n=Kt("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),sV=e=>{const{classes:t,disabled:n,size:r,color:a,iconColor:c,onDelete:h,clickable:l,variant:b}=e,w={root:["root",b,n&&"disabled",`size${tt(r)}`,`color${tt(a)}`,l&&"clickable",l&&`clickableColor${tt(a)}`,h&&"deletable",h&&`deletableColor${tt(a)}`,`${b}${tt(a)}`],label:["label",`label${tt(r)}`],avatar:["avatar",`avatar${tt(r)}`,`avatarColor${tt(a)}`],icon:["icon",`icon${tt(r)}`,`iconColor${tt(c)}`],deleteIcon:["deleteIcon",`deleteIcon${tt(r)}`,`deleteIconColor${tt(a)}`,`deleteIcon${tt(b)}Color${tt(a)}`]};return rn(w,aV,t)},lV=ht("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:r,iconColor:a,clickable:c,onDelete:h,size:l,variant:b}=n;return[{[`& .${_n.avatar}`]:t.avatar},{[`& .${_n.avatar}`]:t[`avatar${tt(l)}`]},{[`& .${_n.avatar}`]:t[`avatarColor${tt(r)}`]},{[`& .${_n.icon}`]:t.icon},{[`& .${_n.icon}`]:t[`icon${tt(l)}`]},{[`& .${_n.icon}`]:t[`iconColor${tt(a)}`]},{[`& .${_n.deleteIcon}`]:t.deleteIcon},{[`& .${_n.deleteIcon}`]:t[`deleteIcon${tt(l)}`]},{[`& .${_n.deleteIcon}`]:t[`deleteIconColor${tt(r)}`]},{[`& .${_n.deleteIcon}`]:t[`deleteIcon${tt(b)}Color${tt(r)}`]},t.root,t[`size${tt(l)}`],t[`color${tt(r)}`],c&&t.clickable,c&&r!=="default"&&t[`clickableColor${tt(r)})`],h&&t.deletable,h&&r!=="default"&&t[`deletableColor${tt(r)}`],t[b],t[`${b}${tt(r)}`]]}})(un(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${_n.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${_n.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${_n.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${_n.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${_n.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${_n.icon}`]:{marginLeft:5,marginRight:-6},[`& .${_n.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:Pr(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:Pr(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${_n.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${_n.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(Li(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${_n.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:Pr(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${_n.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${_n.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${_n.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Pr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(Li(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${_n.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:Pr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${_n.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:Pr(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(Li(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${_n.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${_n.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${_n.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${_n.avatar}`]:{marginLeft:4},[`& .${_n.avatarSmall}`]:{marginLeft:2},[`& .${_n.icon}`]:{marginLeft:4},[`& .${_n.iconSmall}`]:{marginLeft:2},[`& .${_n.deleteIcon}`]:{marginRight:5},[`& .${_n.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(Li()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:Pr(e.palette[n].main,.7)}`,[`&.${_n.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${_n.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:Pr(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${_n.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:Pr(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),uV=ht("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:r}=n;return[t.label,t[`label${tt(r)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function A5(e){return e.key==="Backspace"||e.key==="Delete"}const L5=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiChip"}),{avatar:a,className:c,clickable:h,color:l="default",component:b,deleteIcon:w,disabled:I=!1,icon:k,label:P,onClick:R,onDelete:$,onKeyDown:U,onKeyUp:Z,size:D="medium",variant:O="filled",tabIndex:F,skipFocusWhenDisabled:G=!1,...te}=r,oe=ne.useRef(null),ae=li(oe,n),le=Ue=>{Ue.stopPropagation(),$&&$(Ue)},Ie=Ue=>{Ue.currentTarget===Ue.target&&A5(Ue)&&Ue.preventDefault(),U&&U(Ue)},K=Ue=>{Ue.currentTarget===Ue.target&&$&&A5(Ue)&&$(Ue),Z&&Z(Ue)},Ce=h!==!1&&R?!0:h,Fe=Ce||$?Oc:b||"div",De={...r,component:Fe,disabled:I,size:D,color:l,iconColor:ne.isValidElement(k)&&k.props.color||l,onDelete:!!$,clickable:Ce,variant:O},Ae=sV(De),Re=Fe===Oc?{component:b||"div",focusVisibleClassName:Ae.focusVisible,...$&&{disableRipple:!0}}:{};let Ve=null;$&&(Ve=w&&ne.isValidElement(w)?ne.cloneElement(w,{className:Mt(w.props.className,Ae.deleteIcon),onClick:le}):se.jsx(oV,{className:Mt(Ae.deleteIcon),onClick:le}));let et=null;a&&ne.isValidElement(a)&&(et=ne.cloneElement(a,{className:Mt(Ae.avatar,a.props.className)}));let $e=null;return k&&ne.isValidElement(k)&&($e=ne.cloneElement(k,{className:Mt(Ae.icon,k.props.className)})),se.jsxs(lV,{as:Fe,className:Mt(Ae.root,c),disabled:Ce&&I?!0:void 0,onClick:R,onKeyDown:Ie,onKeyUp:K,ref:ae,tabIndex:G&&I?-1:F,ownerState:De,...Re,...te,children:[et||$e,se.jsx(uV,{className:Mt(Ae.label),ownerState:De,children:P}),Ve]})});function Dy(e){return parseInt(e,10)||0}const cV={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function dV(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const hV=ne.forwardRef(function(t,n){const{onChange:r,maxRows:a,minRows:c=1,style:h,value:l,...b}=t,{current:w}=ne.useRef(l!=null),I=ne.useRef(null),k=li(n,I),P=ne.useRef(null),R=ne.useRef(null),$=ne.useCallback(()=>{const D=I.current,F=dl(D).getComputedStyle(D);if(F.width==="0px")return{outerHeightStyle:0,overflowing:!1};const G=R.current;G.style.width=F.width,G.value=D.value||t.placeholder||"x",G.value.slice(-1)===`
`&&(G.value+=" ");const te=F.boxSizing,oe=Dy(F.paddingBottom)+Dy(F.paddingTop),ae=Dy(F.borderBottomWidth)+Dy(F.borderTopWidth),le=G.scrollHeight;G.value="x";const Ie=G.scrollHeight;let K=le;c&&(K=Math.max(Number(c)*Ie,K)),a&&(K=Math.min(Number(a)*Ie,K)),K=Math.max(K,Ie);const Ce=K+(te==="border-box"?oe+ae:0),Fe=Math.abs(K-le)<=1;return{outerHeightStyle:Ce,overflowing:Fe}},[a,c,t.placeholder]),U=ne.useCallback(()=>{const D=$();if(dV(D))return;const O=D.outerHeightStyle,F=I.current;P.current!==O&&(P.current=O,F.style.height=`${O}px`),F.style.overflow=D.overflowing?"hidden":""},[$]);$c(()=>{const D=()=>{U()};let O;const F=c4(D),G=I.current,te=dl(G);te.addEventListener("resize",F);let oe;return typeof ResizeObserver<"u"&&(oe=new ResizeObserver(D),oe.observe(G)),()=>{F.clear(),cancelAnimationFrame(O),te.removeEventListener("resize",F),oe&&oe.disconnect()}},[$,U]),$c(()=>{U()});const Z=D=>{w||U(),r&&r(D)};return se.jsxs(ne.Fragment,{children:[se.jsx("textarea",{value:l,onChange:Z,ref:k,rows:c,style:h,...b}),se.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:{...cV.shadow,...h,paddingTop:0,paddingBottom:0}})]})});function Om(e){return typeof e=="string"}function Nc({props:e,states:t,muiFormControl:n}){return t.reduce((r,a)=>(r[a]=e[a],n&&typeof e[a]>"u"&&(r[a]=n[a]),r),{})}const xS=ne.createContext(void 0);function Iu(){return ne.useContext(xS)}function R5(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function lv(e,t=!1){return e&&(R5(e.value)&&e.value!==""||t&&R5(e.defaultValue)&&e.defaultValue!=="")}function pV(e){return e.startAdornment}function fV(e){return Qt("MuiInputBase",e)}const Fh=Kt("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var z5;const I1=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${tt(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},P1=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},mV=e=>{const{classes:t,color:n,disabled:r,error:a,endAdornment:c,focused:h,formControl:l,fullWidth:b,hiddenLabel:w,multiline:I,readOnly:k,size:P,startAdornment:R,type:$}=e,U={root:["root",`color${tt(n)}`,r&&"disabled",a&&"error",b&&"fullWidth",h&&"focused",l&&"formControl",P&&P!=="medium"&&`size${tt(P)}`,I&&"multiline",R&&"adornedStart",c&&"adornedEnd",w&&"hiddenLabel",k&&"readOnly"],input:["input",r&&"disabled",$==="search"&&"inputTypeSearch",I&&"inputMultiline",P==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",R&&"inputAdornedStart",c&&"inputAdornedEnd",k&&"readOnly"]};return rn(U,fV,t)},M1=ht("div",{name:"MuiInputBase",slot:"Root",overridesResolver:I1})(un(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Fh.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),A1=ht("input",{name:"MuiInputBase",slot:"Input",overridesResolver:P1})(un(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},r={opacity:"0 !important"},a=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Fh.formControl} &`]:{"&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&::-ms-input-placeholder":r,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Fh.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:c})=>!c.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:c})=>c.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),D5=rU({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),bS=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:c,autoFocus:h,className:l,color:b,components:w={},componentsProps:I={},defaultValue:k,disabled:P,disableInjectingGlobalStyles:R,endAdornment:$,error:U,fullWidth:Z=!1,id:D,inputComponent:O="input",inputProps:F={},inputRef:G,margin:te,maxRows:oe,minRows:ae,multiline:le=!1,name:Ie,onBlur:K,onChange:Ce,onClick:Fe,onFocus:De,onKeyDown:Ae,onKeyUp:Re,placeholder:Ve,readOnly:et,renderSuffix:$e,rows:Ue,size:ct,slotProps:St={},slots:At={},startAdornment:jt,type:zt="text",value:Xt,...yn}=r,on=F.value!=null?F.value:Xt,{current:Un}=ne.useRef(on!=null),Mn=ne.useRef(),Vt=ne.useCallback(dn=>{},[]),an=li(Mn,G,F.ref,Vt),[Wt,Cn]=ne.useState(!1),_t=Iu(),Dt=Nc({props:r,muiFormControl:_t,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Dt.focused=_t?_t.focused:Wt,ne.useEffect(()=>{!_t&&P&&Wt&&(Cn(!1),K&&K())},[_t,P,Wt,K]);const Se=_t&&_t.onFilled,ur=_t&&_t.onEmpty,bn=ne.useCallback(dn=>{lv(dn)?Se&&Se():ur&&ur()},[Se,ur]);$c(()=>{Un&&bn({value:on})},[on,bn,Un]);const ft=dn=>{De&&De(dn),F.onFocus&&F.onFocus(dn),_t&&_t.onFocus?_t.onFocus(dn):Cn(!0)},qt=dn=>{K&&K(dn),F.onBlur&&F.onBlur(dn),_t&&_t.onBlur?_t.onBlur(dn):Cn(!1)},fn=(dn,...Rr)=>{if(!Un){const Ke=dn.target||Mn.current;if(Ke==null)throw new Error(cl(1));bn({value:Ke.value})}F.onChange&&F.onChange(dn,...Rr),Ce&&Ce(dn,...Rr)};ne.useEffect(()=>{bn(Mn.current)},[]);const ir=dn=>{Mn.current&&dn.currentTarget===dn.target&&Mn.current.focus(),Fe&&Fe(dn)};let Ct=O,zn=F;le&&Ct==="input"&&(Ue?zn={type:void 0,minRows:Ue,maxRows:Ue,...zn}:zn={type:void 0,maxRows:oe,minRows:ae,...zn},Ct=hV);const yr=dn=>{bn(dn.animationName==="mui-auto-fill-cancel"?Mn.current:{value:"x"})};ne.useEffect(()=>{_t&&_t.setAdornedStart(!!jt)},[_t,jt]);const ei={...r,color:Dt.color||"primary",disabled:Dt.disabled,endAdornment:$,error:Dt.error,focused:Dt.focused,formControl:_t,fullWidth:Z,hiddenLabel:Dt.hiddenLabel,multiline:le,size:Dt.size,startAdornment:jt,type:zt},vr=mV(ei),Ge=At.root||w.Root||M1,cr=St.root||I.root||{},Kn=At.input||w.Input||A1;return zn={...zn,...St.input??I.input},se.jsxs(ne.Fragment,{children:[!R&&typeof D5=="function"&&(z5||(z5=se.jsx(D5,{}))),se.jsxs(Ge,{...cr,ref:n,onClick:ir,...yn,...!Om(Ge)&&{ownerState:{...ei,...cr.ownerState}},className:Mt(vr.root,cr.className,l,et&&"MuiInputBase-readOnly"),children:[jt,se.jsx(xS.Provider,{value:null,children:se.jsx(Kn,{"aria-invalid":Dt.error,"aria-describedby":a,autoComplete:c,autoFocus:h,defaultValue:k,disabled:Dt.disabled,id:D,onAnimationStart:yr,name:Ie,placeholder:Ve,readOnly:et,required:Dt.required,rows:Ue,value:on,onKeyDown:Ae,onKeyUp:Re,type:zt,...zn,...!Om(Kn)&&{as:Ct,ownerState:{...ei,...zn.ownerState}},ref:an,className:Mt(vr.input,zn.className,et&&"MuiInputBase-readOnly"),onBlur:qt,onChange:fn,onFocus:ft})}),$,$e?$e({...Dt,startAdornment:jt}):null]})]})});function gV(e){return Qt("MuiInput",e)}const kf={...Fh,...Kt("MuiInput",["root","underline","input"])};function yV(e){return Qt("MuiOutlinedInput",e)}const cs={...Fh,...Kt("MuiOutlinedInput",["root","notchedOutline","input"])};function vV(e){return Qt("MuiFilledInput",e)}const rc={...Fh,...Kt("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},_V=wi(se.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),xV=wi(se.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function bV(e){return Qt("MuiAvatar",e)}Kt("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const wV=e=>{const{classes:t,variant:n,colorDefault:r}=e;return rn({root:["root",n,r&&"colorDefault"],img:["img"],fallback:["fallback"]},bV,t)},SV=ht("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(un(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),CV=ht("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),kV=ht(xV,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function EV({crossOrigin:e,referrerPolicy:t,src:n,srcSet:r}){const[a,c]=ne.useState(!1);return ne.useEffect(()=>{if(!n&&!r)return;c(!1);let h=!0;const l=new Image;return l.onload=()=>{h&&c("loaded")},l.onerror=()=>{h&&c("error")},l.crossOrigin=e,l.referrerPolicy=t,l.src=n,r&&(l.srcset=r),()=>{h=!1}},[e,t,n,r]),a}const I4=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiAvatar"}),{alt:a,children:c,className:h,component:l="div",slots:b={},slotProps:w={},imgProps:I,sizes:k,src:P,srcSet:R,variant:$="circular",...U}=r;let Z=null;const D=EV({...I,src:P,srcSet:R}),O=P||R,F=O&&D!=="error",G={...r,colorDefault:!F,component:l,variant:$};delete G.ownerState;const te=wV(G),[oe,ae]=fo("img",{className:te.img,elementType:CV,externalForwardedProps:{slots:b,slotProps:{img:{...I,...w.img}}},additionalProps:{alt:a,src:P,srcSet:R,sizes:k},ownerState:G});return F?Z=se.jsx(oe,{...ae}):c||c===0?Z=c:O&&a?Z=a[0]:Z=se.jsx(kV,{ownerState:G,className:te.fallback}),se.jsx(SV,{as:l,className:Mt(te.root,h),ref:n,...U,ownerState:G,children:Z})}),TV={entering:{opacity:1},entered:{opacity:1}},IV=ne.forwardRef(function(t,n){const r=eg(),a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:c,appear:h=!0,children:l,easing:b,in:w,onEnter:I,onEntered:k,onEntering:P,onExit:R,onExited:$,onExiting:U,style:Z,timeout:D=a,TransitionComponent:O=Is,...F}=t,G=ne.useRef(null),te=li(G,Xh(l),n),oe=Ae=>Re=>{if(Ae){const Ve=G.current;Re===void 0?Ae(Ve):Ae(Ve,Re)}},ae=oe(P),le=oe((Ae,Re)=>{T4(Ae);const Ve=av({style:Z,timeout:D,easing:b},{mode:"enter"});Ae.style.webkitTransition=r.transitions.create("opacity",Ve),Ae.style.transition=r.transitions.create("opacity",Ve),I&&I(Ae,Re)}),Ie=oe(k),K=oe(U),Ce=oe(Ae=>{const Re=av({style:Z,timeout:D,easing:b},{mode:"exit"});Ae.style.webkitTransition=r.transitions.create("opacity",Re),Ae.style.transition=r.transitions.create("opacity",Re),R&&R(Ae)}),Fe=oe($),De=Ae=>{c&&c(G.current,Ae)};return se.jsx(O,{appear:h,in:w,nodeRef:G,onEnter:le,onEntered:Ie,onEntering:ae,onExit:Ce,onExited:Fe,onExiting:K,addEndListener:De,timeout:D,...F,children:(Ae,Re)=>ne.cloneElement(l,{style:{opacity:0,visibility:Ae==="exited"&&!w?"hidden":void 0,...TV[Ae],...Z,...l.props.style},ref:te,...Re})})});function PV(e){return Qt("MuiBackdrop",e)}Kt("MuiBackdrop",["root","invisible"]);const MV=e=>{const{ownerState:t,...n}=e;return n},AV=e=>{const{classes:t,invisible:n}=e;return rn({root:["root",n&&"invisible"]},PV,t)},LV=ht("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),RV=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiBackdrop"}),{children:a,className:c,component:h="div",invisible:l=!1,open:b,components:w={},componentsProps:I={},slotProps:k={},slots:P={},TransitionComponent:R,transitionDuration:$,...U}=r,Z={...r,component:h,invisible:l},D=AV(Z),O={transition:R,root:w.Root,...P},F={...I,...k},G={slots:O,slotProps:F},[te,oe]=fo("root",{elementType:LV,externalForwardedProps:G,className:Mt(D.root,c),ownerState:Z}),[ae,le]=fo("transition",{elementType:IV,externalForwardedProps:G,ownerState:Z}),Ie=MV(le);return se.jsx(ae,{in:b,timeout:$,...U,...Ie,children:se.jsx(te,{"aria-hidden":!0,...oe,classes:D,ref:n,children:a})})});function zV(e){return Qt("MuiBottomNavigation",e)}Kt("MuiBottomNavigation",["root"]);const DV=e=>{const{classes:t}=e;return rn({root:["root"]},zV,t)},$V=ht("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(un(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper}))),OV=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiBottomNavigation"}),{children:a,className:c,component:h="div",onChange:l,showLabels:b=!1,value:w,...I}=r,k={...r,component:h,showLabels:b},P=DV(k);return se.jsx($V,{as:h,className:Mt(P.root,c),ref:n,ownerState:k,...I,children:ne.Children.map(a,(R,$)=>{if(!ne.isValidElement(R))return null;const U=R.props.value===void 0?$:R.props.value;return ne.cloneElement(R,{selected:U===w,showLabel:R.props.showLabel!==void 0?R.props.showLabel:b,value:U,onChange:l})})})});function BV(e){return Qt("MuiBottomNavigationAction",e)}const P4=Kt("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),FV=e=>{const{classes:t,showLabel:n,selected:r}=e;return rn({root:["root",!n&&!r&&"iconOnly",r&&"selected"],label:["label",!n&&!r&&"iconOnly",r&&"selected"]},BV,t)},NV=ht(Oc,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(un(({theme:e})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${P4.selected}`]:{color:(e.vars||e).palette.primary.main},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{paddingTop:14}},{props:({showLabel:t,selected:n,label:r})=>!t&&!n&&!r,style:{paddingTop:0}}]}))),jV=ht("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(un(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${P4.selected}`]:{fontSize:e.typography.pxToRem(14)},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{opacity:0,transitionDelay:"0s"}}]}))),Ux=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiBottomNavigationAction"}),{className:a,icon:c,label:h,onChange:l,onClick:b,selected:w,showLabel:I,value:k,...P}=r,R=r,$=FV(R),U=Z=>{l&&l(Z,k),b&&b(Z)};return se.jsxs(NV,{ref:n,className:Mt($.root,a),focusRipple:!0,onClick:U,ownerState:R,...P,children:[c,se.jsx(jV,{className:$.label,ownerState:R,children:h})]})}),UV=Kt("MuiBox",["root"]),VV=w4(),mu=V9({themeId:Hv,defaultTheme:VV,defaultClassName:UV.root,generateClassName:r4.generate});function WV(e){return Qt("MuiButton",e)}const Wd=Kt("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),qV=ne.createContext({}),HV=ne.createContext(void 0),GV=e=>{const{color:t,disableElevation:n,fullWidth:r,size:a,variant:c,classes:h}=e,l={root:["root",c,`${c}${tt(t)}`,`size${tt(a)}`,`${c}Size${tt(a)}`,`color${tt(t)}`,n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${tt(a)}`],endIcon:["icon","endIcon",`iconSize${tt(a)}`]},b=rn(l,WV,h);return{...h,...b}},M4=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],ZV=ht(Oc,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${tt(n.color)}`],t[`size${tt(n.size)}`],t[`${n.variant}Size${tt(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(un(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Wd.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Wd.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Wd.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Wd.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Li()).map(([r])=>({props:{color:r},style:{"--variant-textColor":(e.vars||e).palette[r].main,"--variant-outlinedColor":(e.vars||e).palette[r].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[r].mainChannel} / 0.5)`:Pr(e.palette[r].main,.5),"--variant-containedColor":(e.vars||e).palette[r].contrastText,"--variant-containedBg":(e.vars||e).palette[r].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[r].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette[r].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[r].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette[r].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Wd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Wd.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),KV=ht("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${tt(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...M4]}),XV=ht("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${tt(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...M4]}),_c=ne.forwardRef(function(t,n){const r=ne.useContext(qV),a=ne.useContext(HV),c=$m(r,t),h=cn({props:c,name:"MuiButton"}),{children:l,color:b="primary",component:w="button",className:I,disabled:k=!1,disableElevation:P=!1,disableFocusRipple:R=!1,endIcon:$,focusVisibleClassName:U,fullWidth:Z=!1,size:D="medium",startIcon:O,type:F,variant:G="text",...te}=h,oe={...h,color:b,component:w,disabled:k,disableElevation:P,disableFocusRipple:R,fullWidth:Z,size:D,type:F,variant:G},ae=GV(oe),le=O&&se.jsx(KV,{className:ae.startIcon,ownerState:oe,children:O}),Ie=$&&se.jsx(XV,{className:ae.endIcon,ownerState:oe,children:$}),K=a||"";return se.jsxs(ZV,{ownerState:oe,className:Mt(r.className,ae.root,I,K),component:w,disabled:k,focusRipple:!R,focusVisibleClassName:Mt(ae.focusVisible,U),ref:n,type:F,...te,classes:ae,children:[le,l,Ie]})});function YV(e){return Qt("MuiCard",e)}Kt("MuiCard",["root"]);const JV=e=>{const{classes:t}=e;return rn({root:["root"]},YV,t)},QV=ht(Yh,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),eW=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiCard"}),{className:a,raised:c=!1,...h}=r,l={...r,raised:c},b=JV(l);return se.jsx(QV,{className:Mt(b.root,a),elevation:c?8:void 0,ref:n,ownerState:l,...h})});function tW(e){return Qt("MuiCardContent",e)}Kt("MuiCardContent",["root"]);const nW=e=>{const{classes:t}=e;return rn({root:["root"]},tW,t)},rW=ht("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),iW=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiCardContent"}),{className:a,component:c="div",...h}=r,l={...r,component:c},b=nW(l);return se.jsx(rW,{as:c,className:Mt(b.root,a),ownerState:l,ref:n,...h})});function oW(e){return Qt("PrivateSwitchBase",e)}Kt("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const aW=e=>{const{classes:t,checked:n,disabled:r,edge:a}=e,c={root:["root",n&&"checked",r&&"disabled",a&&`edge${tt(a)}`],input:["input"]};return rn(c,oW,t)},sW=ht(Oc)({padding:9,borderRadius:"50%",variants:[{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:({edge:e,ownerState:t})=>e==="start"&&t.size!=="small",style:{marginLeft:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}},{props:({edge:e,ownerState:t})=>e==="end"&&t.size!=="small",style:{marginRight:-12}}]}),lW=ht("input",{shouldForwardProp:ua})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),uW=ne.forwardRef(function(t,n){const{autoFocus:r,checked:a,checkedIcon:c,className:h,defaultChecked:l,disabled:b,disableFocusRipple:w=!1,edge:I=!1,icon:k,id:P,inputProps:R,inputRef:$,name:U,onBlur:Z,onChange:D,onFocus:O,readOnly:F,required:G=!1,tabIndex:te,type:oe,value:ae,...le}=t,[Ie,K]=xw({controlled:a,default:!!l,name:"SwitchBase",state:"checked"}),Ce=Iu(),Fe=Ue=>{O&&O(Ue),Ce&&Ce.onFocus&&Ce.onFocus(Ue)},De=Ue=>{Z&&Z(Ue),Ce&&Ce.onBlur&&Ce.onBlur(Ue)},Ae=Ue=>{if(Ue.nativeEvent.defaultPrevented)return;const ct=Ue.target.checked;K(ct),D&&D(Ue,ct)};let Re=b;Ce&&typeof Re>"u"&&(Re=Ce.disabled);const Ve=oe==="checkbox"||oe==="radio",et={...t,checked:Ie,disabled:Re,disableFocusRipple:w,edge:I},$e=aW(et);return se.jsxs(sW,{component:"span",className:Mt($e.root,h),centerRipple:!0,focusRipple:!w,disabled:Re,tabIndex:null,role:void 0,onFocus:Fe,onBlur:De,ownerState:et,ref:n,...le,children:[se.jsx(lW,{autoFocus:r,checked:a,defaultChecked:l,className:$e.input,disabled:Re,id:Ve?P:void 0,name:U,onChange:Ae,readOnly:F,ref:$,required:G,ownerState:et,tabIndex:te,type:oe,...oe==="checkbox"&&ae===void 0?{}:{value:ae},...R}),Ie?c:k]})});function $5(e){return e.substring(2).toLowerCase()}function cW(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function dW(e){const{children:t,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:a,touchEvent:c="onTouchEnd"}=e,h=ne.useRef(!1),l=ne.useRef(null),b=ne.useRef(!1),w=ne.useRef(!1);ne.useEffect(()=>(setTimeout(()=>{b.current=!0},0),()=>{b.current=!1}),[]);const I=li(Xh(t),l),k=Qs($=>{const U=w.current;w.current=!1;const Z=zo(l.current);if(!b.current||!l.current||"clientX"in $&&cW($,Z))return;if(h.current){h.current=!1;return}let D;$.composedPath?D=$.composedPath().includes(l.current):D=!Z.documentElement.contains($.target)||l.current.contains($.target),!D&&(n||!U)&&a($)}),P=$=>U=>{w.current=!0;const Z=t.props[$];Z&&Z(U)},R={ref:I};return c!==!1&&(R[c]=P(c)),ne.useEffect(()=>{if(c!==!1){const $=$5(c),U=zo(l.current),Z=()=>{h.current=!0};return U.addEventListener($,k),U.addEventListener("touchmove",Z),()=>{U.removeEventListener($,k),U.removeEventListener("touchmove",Z)}}},[k,c]),r!==!1&&(R[r]=P(r)),ne.useEffect(()=>{if(r!==!1){const $=$5(r),U=zo(l.current);return U.addEventListener($,k),()=>{U.removeEventListener($,k)}}},[k,r]),se.jsx(ne.Fragment,{children:ne.cloneElement(t,R)})}const hW=kj({createStyledComponent:ht("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${tt(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>cn({props:e,name:"MuiContainer"})});function pW(e){const t=zo(e);return t.body===e?dl(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Qf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function O5(e){return parseInt(dl(e).getComputedStyle(e).paddingRight,10)||0}function fW(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),r=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||r}function B5(e,t,n,r,a){const c=[t,n,...r];[].forEach.call(e.children,h=>{const l=!c.includes(h),b=!fW(h);l&&b&&Qf(h,a)})}function Vx(e,t){let n=-1;return e.some((r,a)=>t(r)?(n=a,!0):!1),n}function mW(e,t){const n=[],r=e.container;if(!t.disableScrollLock){if(pW(r)){const h=p4(dl(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${O5(r)+h}px`;const l=zo(r).querySelectorAll(".mui-fixed");[].forEach.call(l,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${O5(b)+h}px`})}let c;if(r.parentNode instanceof DocumentFragment)c=zo(r).body;else{const h=r.parentElement,l=dl(r);c=(h==null?void 0:h.nodeName)==="HTML"&&l.getComputedStyle(h).overflowY==="scroll"?h:r}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:h,property:l})=>{c?h.style.setProperty(l,c):h.style.removeProperty(l)})}}function gW(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class yW{constructor(){this.modals=[],this.containers=[]}add(t,n){let r=this.modals.indexOf(t);if(r!==-1)return r;r=this.modals.length,this.modals.push(t),t.modalRef&&Qf(t.modalRef,!1);const a=gW(n);B5(n,t.mount,t.modalRef,a,!0);const c=Vx(this.containers,h=>h.container===n);return c!==-1?(this.containers[c].modals.push(t),r):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),r)}mount(t,n){const r=Vx(this.containers,c=>c.modals.includes(t)),a=this.containers[r];a.restore||(a.restore=mW(a,n))}remove(t,n=!0){const r=this.modals.indexOf(t);if(r===-1)return r;const a=Vx(this.containers,h=>h.modals.includes(t)),c=this.containers[a];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(r,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&Qf(t.modalRef,n),B5(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(a,1);else{const h=c.modals[c.modals.length-1];h.modalRef&&Qf(h.modalRef,!1)}return r}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const vW=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function _W(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function xW(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=r=>e.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function bW(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||xW(e))}function wW(e){const t=[],n=[];return Array.from(e.querySelectorAll(vW)).forEach((r,a)=>{const c=_W(r);c===-1||!bW(r)||(c===0?t.push(r):n.push({documentOrder:a,tabIndex:c,node:r}))}),n.sort((r,a)=>r.tabIndex===a.tabIndex?r.documentOrder-a.documentOrder:r.tabIndex-a.tabIndex).map(r=>r.node).concat(t)}function SW(){return!0}function CW(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:a=!1,getTabbable:c=wW,isEnabled:h=SW,open:l}=e,b=ne.useRef(!1),w=ne.useRef(null),I=ne.useRef(null),k=ne.useRef(null),P=ne.useRef(null),R=ne.useRef(!1),$=ne.useRef(null),U=li(Xh(t),$),Z=ne.useRef(null);ne.useEffect(()=>{!l||!$.current||(R.current=!n)},[n,l]),ne.useEffect(()=>{if(!l||!$.current)return;const F=zo($.current);return $.current.contains(F.activeElement)||($.current.hasAttribute("tabIndex")||$.current.setAttribute("tabIndex","-1"),R.current&&$.current.focus()),()=>{a||(k.current&&k.current.focus&&(b.current=!0,k.current.focus()),k.current=null)}},[l]),ne.useEffect(()=>{if(!l||!$.current)return;const F=zo($.current),G=ae=>{Z.current=ae,!(r||!h()||ae.key!=="Tab")&&F.activeElement===$.current&&ae.shiftKey&&(b.current=!0,I.current&&I.current.focus())},te=()=>{var Ie,K;const ae=$.current;if(ae===null)return;if(!F.hasFocus()||!h()||b.current){b.current=!1;return}if(ae.contains(F.activeElement)||r&&F.activeElement!==w.current&&F.activeElement!==I.current)return;if(F.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!R.current)return;let le=[];if((F.activeElement===w.current||F.activeElement===I.current)&&(le=c($.current)),le.length>0){const Ce=!!((Ie=Z.current)!=null&&Ie.shiftKey&&((K=Z.current)==null?void 0:K.key)==="Tab"),Fe=le[0],De=le[le.length-1];typeof Fe!="string"&&typeof De!="string"&&(Ce?De.focus():Fe.focus())}else ae.focus()};F.addEventListener("focusin",te),F.addEventListener("keydown",G,!0);const oe=setInterval(()=>{F.activeElement&&F.activeElement.tagName==="BODY"&&te()},50);return()=>{clearInterval(oe),F.removeEventListener("focusin",te),F.removeEventListener("keydown",G,!0)}},[n,r,a,h,l,c]);const D=F=>{k.current===null&&(k.current=F.relatedTarget),R.current=!0,P.current=F.target;const G=t.props.onFocus;G&&G(F)},O=F=>{k.current===null&&(k.current=F.relatedTarget),R.current=!0};return se.jsxs(ne.Fragment,{children:[se.jsx("div",{tabIndex:l?0:-1,onFocus:O,ref:w,"data-testid":"sentinelStart"}),ne.cloneElement(t,{ref:U,onFocus:D}),se.jsx("div",{tabIndex:l?0:-1,onFocus:O,ref:I,"data-testid":"sentinelEnd"})]})}function kW(e){return typeof e=="function"?e():e}function EW(e){return e?e.props.hasOwnProperty("in"):!1}const $y=new yW;function TW(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,closeAfterTransition:a=!1,onTransitionEnter:c,onTransitionExited:h,children:l,onClose:b,open:w,rootRef:I}=e,k=ne.useRef({}),P=ne.useRef(null),R=ne.useRef(null),$=li(R,I),[U,Z]=ne.useState(!w),D=EW(l);let O=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(O=!1);const F=()=>zo(P.current),G=()=>(k.current.modalRef=R.current,k.current.mount=P.current,k.current),te=()=>{$y.mount(G(),{disableScrollLock:r}),R.current&&(R.current.scrollTop=0)},oe=Qs(()=>{const Re=kW(t)||F().body;$y.add(G(),Re),R.current&&te()}),ae=()=>$y.isTopModal(G()),le=Qs(Re=>{P.current=Re,Re&&(w&&ae()?te():R.current&&Qf(R.current,O))}),Ie=ne.useCallback(()=>{$y.remove(G(),O)},[O]);ne.useEffect(()=>()=>{Ie()},[Ie]),ne.useEffect(()=>{w?oe():(!D||!a)&&Ie()},[w,Ie,D,a,oe]);const K=Re=>Ve=>{var et;(et=Re.onKeyDown)==null||et.call(Re,Ve),!(Ve.key!=="Escape"||Ve.which===229||!ae())&&(n||(Ve.stopPropagation(),b&&b(Ve,"escapeKeyDown")))},Ce=Re=>Ve=>{var et;(et=Re.onClick)==null||et.call(Re,Ve),Ve.target===Ve.currentTarget&&b&&b(Ve,"backdropClick")};return{getRootProps:(Re={})=>{const Ve=iv(e);delete Ve.onTransitionEnter,delete Ve.onTransitionExited;const et={...Ve,...Re};return{role:"presentation",...et,onKeyDown:K(et),ref:$}},getBackdropProps:(Re={})=>{const Ve=Re;return{"aria-hidden":!0,...Ve,onClick:Ce(Ve),open:w}},getTransitionProps:()=>{const Re=()=>{Z(!1),c&&c()},Ve=()=>{Z(!0),h&&h(),a&&Ie()};return{onEnter:d5(Re,l==null?void 0:l.props.onEnter),onExited:d5(Ve,l==null?void 0:l.props.onExited)}},rootRef:$,portalRef:le,isTopModal:ae,exited:U,hasTransition:D}}function IW(e){return Qt("MuiModal",e)}Kt("MuiModal",["root","hidden","backdrop"]);const PW=e=>{const{open:t,exited:n,classes:r}=e;return rn({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},IW,r)},MW=ht("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(un(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),AW=ht(RV,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),LW=ne.forwardRef(function(t,n){const r=cn({name:"MuiModal",props:t}),{BackdropComponent:a=AW,BackdropProps:c,classes:h,className:l,closeAfterTransition:b=!1,children:w,container:I,component:k,components:P={},componentsProps:R={},disableAutoFocus:$=!1,disableEnforceFocus:U=!1,disableEscapeKeyDown:Z=!1,disablePortal:D=!1,disableRestoreFocus:O=!1,disableScrollLock:F=!1,hideBackdrop:G=!1,keepMounted:te=!1,onBackdropClick:oe,onClose:ae,onTransitionEnter:le,onTransitionExited:Ie,open:K,slotProps:Ce={},slots:Fe={},theme:De,...Ae}=r,Re={...r,closeAfterTransition:b,disableAutoFocus:$,disableEnforceFocus:U,disableEscapeKeyDown:Z,disablePortal:D,disableRestoreFocus:O,disableScrollLock:F,hideBackdrop:G,keepMounted:te},{getRootProps:Ve,getBackdropProps:et,getTransitionProps:$e,portalRef:Ue,isTopModal:ct,exited:St,hasTransition:At}=TW({...Re,rootRef:n}),jt={...Re,exited:St},zt=PW(jt),Xt={};if(w.props.tabIndex===void 0&&(Xt.tabIndex="-1"),At){const{onEnter:Wt,onExited:Cn}=$e();Xt.onEnter=Wt,Xt.onExited=Cn}const yn={...Ae,slots:{root:P.Root,backdrop:P.Backdrop,...Fe},slotProps:{...R,...Ce}},[on,Un]=fo("root",{elementType:MW,externalForwardedProps:yn,getSlotProps:Ve,additionalProps:{ref:n,as:k},ownerState:jt,className:Mt(l,zt==null?void 0:zt.root,!jt.open&&jt.exited&&(zt==null?void 0:zt.hidden))}),[Mn,Vt]=fo("backdrop",{elementType:a,externalForwardedProps:yn,additionalProps:c,getSlotProps:Wt=>et({...Wt,onClick:Cn=>{oe&&oe(Cn),Wt!=null&&Wt.onClick&&Wt.onClick(Cn)}}),className:Mt(c==null?void 0:c.className,zt==null?void 0:zt.backdrop),ownerState:jt}),an=li(c==null?void 0:c.ref,Vt.ref);return!te&&!K&&(!At||St)?null:se.jsx(iV,{ref:Ue,container:I,disablePortal:D,children:se.jsxs(on,{...Un,children:[!G&&a?se.jsx(Mn,{...Vt,ref:an}):null,se.jsx(CW,{disableEnforceFocus:U,disableAutoFocus:$,disableRestoreFocus:O,isEnabled:ct,open:K,children:ne.cloneElement(w,Xt)})]})})});function RW(e){return Qt("MuiDivider",e)}Kt("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const zW=e=>{const{absolute:t,children:n,classes:r,flexItem:a,light:c,orientation:h,textAlign:l,variant:b}=e;return rn({root:["root",t&&"absolute",b,c&&"light",h==="vertical"&&"vertical",a&&"flexItem",n&&"withChildren",n&&h==="vertical"&&"withChildrenVertical",l==="right"&&h!=="vertical"&&"textAlignRight",l==="left"&&h!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",h==="vertical"&&"wrapperVertical"]},RW,r)},DW=ht("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(un(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Pr(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),$W=ht("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(un(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),ou=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiDivider"}),{absolute:a=!1,children:c,className:h,orientation:l="horizontal",component:b=c||l==="vertical"?"div":"hr",flexItem:w=!1,light:I=!1,role:k=b!=="hr"?"separator":void 0,textAlign:P="center",variant:R="fullWidth",...$}=r,U={...r,absolute:a,component:b,flexItem:w,light:I,orientation:l,role:k,textAlign:P,variant:R},Z=zW(U);return se.jsx(DW,{as:b,className:Mt(Z.root,h),role:k,ref:n,ownerState:U,"aria-orientation":k==="separator"&&(b!=="hr"||l==="vertical")?l:void 0,...$,children:c?se.jsx($W,{className:Z.wrapper,ownerState:U,children:c}):null})});ou&&(ou.muiSkipListHighlight=!0);function OW(e){return Qt("MuiFab",e)}const F5=Kt("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),BW=e=>{const{color:t,variant:n,classes:r,size:a}=e,c={root:["root",n,`size${tt(a)}`,t==="inherit"?"colorInherit":t]},h=rn(c,OW,r);return{...r,...h}},FW=ht(Oc,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>ua(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${tt(n.size)}`],n.color==="inherit"&&t.colorInherit,t[tt(n.size)],t[n.color]]}})(un(({theme:e})=>{var t,n;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(t=e.palette).getContrastText)==null?void 0:n.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${F5.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),un(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Li(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),un(({theme:e})=>({[`&.${F5.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),NW=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFab"}),{children:a,className:c,color:h="default",component:l="button",disabled:b=!1,disableFocusRipple:w=!1,focusVisibleClassName:I,size:k="large",variant:P="circular",...R}=r,$={...r,color:h,component:l,disabled:b,disableFocusRipple:w,size:k,variant:P},U=BW($);return se.jsx(FW,{className:Mt(U.root,c),component:l,disabled:b,focusRipple:!w,focusVisibleClassName:Mt(U.focusVisible,I),ownerState:$,ref:n,...R,classes:U,children:a})}),jW=e=>{const{classes:t,disableUnderline:n,startAdornment:r,endAdornment:a,size:c,hiddenLabel:h,multiline:l}=e,b={root:["root",!n&&"underline",r&&"adornedStart",a&&"adornedEnd",c==="small"&&`size${tt(c)}`,h&&"hiddenLabel",l&&"multiline"],input:["input"]},w=rn(b,vV,t);return{...t,...w}},UW=ht(M1,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...I1(e,t),!n.disableUnderline&&t.underline]}})(un(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",r=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r}},[`&.${rc.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:r},[`&.${rc.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[{props:({ownerState:h})=>!h.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${rc.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${rc.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${rc.disabled}, .${rc.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${rc.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Li()).map(([h])=>{var l;return{props:{disableUnderline:!1,color:h},style:{"&::after":{borderBottom:`2px solid ${(l=(e.vars||e).palette[h])==null?void 0:l.main}`}}}}),{props:({ownerState:h})=>h.startAdornment,style:{paddingLeft:12}},{props:({ownerState:h})=>h.endAdornment,style:{paddingRight:12}},{props:({ownerState:h})=>h.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:h,size:l})=>h.multiline&&l==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:h})=>h.multiline&&h.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:h})=>h.multiline&&h.hiddenLabel&&h.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),VW=ht(A1,{name:"MuiFilledInput",slot:"Input",overridesResolver:P1})(un(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),uv=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:c={},componentsProps:h,fullWidth:l=!1,hiddenLabel:b,inputComponent:w="input",multiline:I=!1,slotProps:k,slots:P={},type:R="text",...$}=r,U={...r,disableUnderline:a,fullWidth:l,inputComponent:w,multiline:I,type:R},Z=jW(r),D={root:{ownerState:U},input:{ownerState:U}},O=k??h?Ki(D,k??h):D,F=P.root??c.Root??UW,G=P.input??c.Input??VW;return se.jsx(bS,{slots:{root:F,input:G},componentsProps:O,fullWidth:l,inputComponent:w,multiline:I,ref:n,type:R,...$,classes:Z})});uv&&(uv.muiName="Input");function WW(e){return Qt("MuiFormControl",e)}Kt("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const qW=e=>{const{classes:t,margin:n,fullWidth:r}=e,a={root:["root",n!=="none"&&`margin${tt(n)}`,r&&"fullWidth"]};return rn(a,WW,t)},HW=ht("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${tt(e.margin)}`],...e.fullWidth&&t.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),GW=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFormControl"}),{children:a,className:c,color:h="primary",component:l="div",disabled:b=!1,error:w=!1,focused:I,fullWidth:k=!1,hiddenLabel:P=!1,margin:R="none",required:$=!1,size:U="medium",variant:Z="outlined",...D}=r,O={...r,color:h,component:l,disabled:b,error:w,fullWidth:k,hiddenLabel:P,margin:R,required:$,size:U,variant:Z},F=qW(O),[G,te]=ne.useState(()=>{let De=!1;return a&&ne.Children.forEach(a,Ae=>{if(!y0(Ae,["Input","Select"]))return;const Re=y0(Ae,["Select"])?Ae.props.input:Ae;Re&&pV(Re.props)&&(De=!0)}),De}),[oe,ae]=ne.useState(()=>{let De=!1;return a&&ne.Children.forEach(a,Ae=>{y0(Ae,["Input","Select"])&&(lv(Ae.props,!0)||lv(Ae.props.inputProps,!0))&&(De=!0)}),De}),[le,Ie]=ne.useState(!1);b&&le&&Ie(!1);const K=I!==void 0&&!b?I:le;let Ce;ne.useRef(!1);const Fe=ne.useMemo(()=>({adornedStart:G,setAdornedStart:te,color:h,disabled:b,error:w,filled:oe,focused:K,fullWidth:k,hiddenLabel:P,size:U,onBlur:()=>{Ie(!1)},onEmpty:()=>{ae(!1)},onFilled:()=>{ae(!0)},onFocus:()=>{Ie(!0)},registerEffect:Ce,required:$,variant:Z}),[G,h,b,w,oe,K,k,P,Ce,$,U,Z]);return se.jsx(xS.Provider,{value:Fe,children:se.jsx(HW,{as:l,ownerState:O,className:Mt(F.root,c),ref:n,...D,children:a})})});function ZW(e){return Qt("MuiFormControlLabel",e)}const Of=Kt("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),KW=e=>{const{classes:t,disabled:n,labelPlacement:r,error:a,required:c}=e,h={root:["root",n&&"disabled",`labelPlacement${tt(r)}`,a&&"error",c&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",a&&"error"]};return rn(h,ZW,t)},XW=ht("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Of.label}`]:t.label},t.root,t[`labelPlacement${tt(n.labelPlacement)}`]]}})(un(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${Of.disabled}`]:{cursor:"default"},[`& .${Of.label}`]:{[`&.${Of.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),YW=ht("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(un(({theme:e})=>({[`&.${Of.error}`]:{color:(e.vars||e).palette.error.main}}))),Oy=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFormControlLabel"}),{checked:a,className:c,componentsProps:h={},control:l,disabled:b,disableTypography:w,inputRef:I,label:k,labelPlacement:P="end",name:R,onChange:$,required:U,slots:Z={},slotProps:D={},value:O,...F}=r,G=Iu(),te=b??l.props.disabled??(G==null?void 0:G.disabled),oe=U??l.props.required,ae={disabled:te,required:oe};["checked","name","onChange","value","inputRef"].forEach(Re=>{typeof l.props[Re]>"u"&&typeof r[Re]<"u"&&(ae[Re]=r[Re])});const le=Nc({props:r,muiFormControl:G,states:["error"]}),Ie={...r,disabled:te,labelPlacement:P,required:oe,error:le.error},K=KW(Ie),Ce={slots:Z,slotProps:{...h,...D}},[Fe,De]=fo("typography",{elementType:qr,externalForwardedProps:Ce,ownerState:Ie});let Ae=k;return Ae!=null&&Ae.type!==qr&&!w&&(Ae=se.jsx(Fe,{component:"span",...De,className:Mt(K.label,De==null?void 0:De.className),children:Ae})),se.jsxs(XW,{className:Mt(K.root,c),ownerState:Ie,ref:n,...F,children:[ne.cloneElement(l,ae),oe?se.jsxs("div",{children:[Ae,se.jsxs(YW,{ownerState:Ie,"aria-hidden":!0,className:K.asterisk,children:["","*"]})]}):Ae]})});function JW(e){return Qt("MuiFormHelperText",e)}const N5=Kt("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var j5;const QW=e=>{const{classes:t,contained:n,size:r,disabled:a,error:c,filled:h,focused:l,required:b}=e,w={root:["root",a&&"disabled",c&&"error",r&&`size${tt(r)}`,n&&"contained",l&&"focused",h&&"filled",b&&"required"]};return rn(w,JW,t)},eq=ht("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${tt(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(un(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${N5.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${N5.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),tq=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFormHelperText"}),{children:a,className:c,component:h="p",disabled:l,error:b,filled:w,focused:I,margin:k,required:P,variant:R,...$}=r,U=Iu(),Z=Nc({props:r,muiFormControl:U,states:["variant","size","disabled","error","filled","focused","required"]}),D={...r,component:h,contained:Z.variant==="filled"||Z.variant==="outlined",variant:Z.variant,size:Z.size,disabled:Z.disabled,error:Z.error,filled:Z.filled,focused:Z.focused,required:Z.required};delete D.ownerState;const O=QW(D);return se.jsx(eq,{as:h,className:Mt(O.root,c),ref:n,...$,ownerState:D,children:a===" "?j5||(j5=se.jsx("span",{className:"notranslate",children:""})):a})});function nq(e){return Qt("MuiFormLabel",e)}const em=Kt("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),rq=e=>{const{classes:t,color:n,focused:r,disabled:a,error:c,filled:h,required:l}=e,b={root:["root",`color${tt(n)}`,a&&"disabled",c&&"error",h&&"filled",r&&"focused",l&&"required"],asterisk:["asterisk",c&&"error"]};return rn(b,nq,t)},iq=ht("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(un(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Li()).map(([t])=>({props:{color:t},style:{[`&.${em.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${em.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${em.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),oq=ht("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(un(({theme:e})=>({[`&.${em.error}`]:{color:(e.vars||e).palette.error.main}}))),aq=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiFormLabel"}),{children:a,className:c,color:h,component:l="label",disabled:b,error:w,filled:I,focused:k,required:P,...R}=r,$=Iu(),U=Nc({props:r,muiFormControl:$,states:["color","required","focused","disabled","error","filled"]}),Z={...r,color:U.color||"primary",component:l,disabled:U.disabled,error:U.error,filled:U.filled,focused:U.focused,required:U.required},D=rq(Z);return se.jsxs(iq,{as:l,ownerState:Z,className:Mt(D.root,c),ref:n,...R,children:[a,U.required&&se.jsxs(oq,{ownerState:Z,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]})}),U5=ne.createContext();function sq(e){return Qt("MuiGrid",e)}const lq=[0,1,2,3,4,5,6,7,8,9,10],uq=["column-reverse","column","row-reverse","row"],cq=["nowrap","wrap-reverse","wrap"],Ef=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Bm=Kt("MuiGrid",["root","container","item","zeroMinWidth",...lq.map(e=>`spacing-xs-${e}`),...uq.map(e=>`direction-xs-${e}`),...cq.map(e=>`wrap-xs-${e}`),...Ef.map(e=>`grid-xs-${e}`),...Ef.map(e=>`grid-sm-${e}`),...Ef.map(e=>`grid-md-${e}`),...Ef.map(e=>`grid-lg-${e}`),...Ef.map(e=>`grid-xl-${e}`)]);function dq({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((r,a)=>{let c={};if(t[a]&&(n=t[a]),!n)return r;if(n===!0)c={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const h=l1({values:t.columns,breakpoints:e.breakpoints.values}),l=typeof h=="object"?h[a]:h;if(l==null)return r;const b=`${Math.round(n/l*1e8)/1e6}%`;let w={};if(t.container&&t.item&&t.columnSpacing!==0){const I=e.spacing(t.columnSpacing);if(I!=="0px"){const k=`calc(${b} + ${I})`;w={flexBasis:k,maxWidth:k}}}c={flexBasis:b,flexGrow:0,maxWidth:b,...w}}return e.breakpoints.values[a]===0?Object.assign(r,c):r[e.breakpoints.up(a)]=c,r},{})}function hq({theme:e,ownerState:t}){const n=l1({values:t.direction,breakpoints:e.breakpoints.values});return Aa({theme:e},n,r=>{const a={flexDirection:r};return r.startsWith("column")&&(a[`& > .${Bm.item}`]={maxWidth:"none"}),a})}function A4({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(a=>{n===""&&t[a]!==0&&(n=a)});const r=Object.keys(e).sort((a,c)=>e[a]-e[c]);return r.slice(0,r.indexOf(n))}function pq({theme:e,ownerState:t}){const{container:n,rowSpacing:r}=t;let a={};if(n&&r!==0){const c=l1({values:r,breakpoints:e.breakpoints.values});let h;typeof c=="object"&&(h=A4({breakpoints:e.breakpoints.values,values:c})),a=Aa({theme:e},c,(l,b)=>{const w=e.spacing(l);return w!=="0px"?{marginTop:e.spacing(-l),[`& > .${Bm.item}`]:{paddingTop:w}}:h!=null&&h.includes(b)?{}:{marginTop:0,[`& > .${Bm.item}`]:{paddingTop:0}}})}return a}function fq({theme:e,ownerState:t}){const{container:n,columnSpacing:r}=t;let a={};if(n&&r!==0){const c=l1({values:r,breakpoints:e.breakpoints.values});let h;typeof c=="object"&&(h=A4({breakpoints:e.breakpoints.values,values:c})),a=Aa({theme:e},c,(l,b)=>{const w=e.spacing(l);if(w!=="0px"){const I=e.spacing(-l);return{width:`calc(100% + ${w})`,marginLeft:I,[`& > .${Bm.item}`]:{paddingLeft:w}}}return h!=null&&h.includes(b)?{}:{width:"100%",marginLeft:0,[`& > .${Bm.item}`]:{paddingLeft:0}}})}return a}function mq(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const r=[];return t.forEach(a=>{const c=e[a];Number(c)>0&&r.push(n[`spacing-${a}-${String(c)}`])}),r}const gq=ht("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:r,direction:a,item:c,spacing:h,wrap:l,zeroMinWidth:b,breakpoints:w}=n;let I=[];r&&(I=mq(h,w,t));const k=[];return w.forEach(P=>{const R=n[P];R&&k.push(t[`grid-${P}-${String(R)}`])}),[t.root,r&&t.container,c&&t.item,b&&t.zeroMinWidth,...I,a!=="row"&&t[`direction-xs-${String(a)}`],l!=="wrap"&&t[`wrap-xs-${String(l)}`],...k]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),hq,pq,fq,dq);function yq(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(r=>{const a=e[r];if(Number(a)>0){const c=`spacing-${r}-${String(a)}`;n.push(c)}}),n}const vq=e=>{const{classes:t,container:n,direction:r,item:a,spacing:c,wrap:h,zeroMinWidth:l,breakpoints:b}=e;let w=[];n&&(w=yq(c,b));const I=[];b.forEach(P=>{const R=e[P];R&&I.push(`grid-${P}-${String(R)}`)});const k={root:["root",n&&"container",a&&"item",l&&"zeroMinWidth",...w,r!=="row"&&`direction-xs-${String(r)}`,h!=="wrap"&&`wrap-xs-${String(h)}`,...I]};return rn(k,sq,t)},V5=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiGrid"}),{breakpoints:a}=eg(),c=cS(r),{className:h,columns:l,columnSpacing:b,component:w="div",container:I=!1,direction:k="row",item:P=!1,rowSpacing:R,spacing:$=0,wrap:U="wrap",zeroMinWidth:Z=!1,...D}=c,O=R||$,F=b||$,G=ne.useContext(U5),te=I?l||12:G,oe={},ae={...D};a.keys.forEach(K=>{D[K]!=null&&(oe[K]=D[K],delete ae[K])});const le={...c,columns:te,container:I,direction:k,item:P,rowSpacing:O,columnSpacing:F,wrap:U,zeroMinWidth:Z,spacing:$,...oe,breakpoints:a.keys},Ie=vq(le);return se.jsx(U5.Provider,{value:te,children:se.jsx(gq,{ownerState:le,className:Mt(Ie.root,h),as:w,ref:n,...ae})})});function Tw(e){return`scale(${e}, ${e**2})`}const _q={entering:{opacity:1,transform:Tw(1)},entered:{opacity:1,transform:"none"}},Wx=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),cv=ne.forwardRef(function(t,n){const{addEndListener:r,appear:a=!0,children:c,easing:h,in:l,onEnter:b,onEntered:w,onEntering:I,onExit:k,onExited:P,onExiting:R,style:$,timeout:U="auto",TransitionComponent:Z=Is,...D}=t,O=pS(),F=ne.useRef(),G=eg(),te=ne.useRef(null),oe=li(te,Xh(c),n),ae=Re=>Ve=>{if(Re){const et=te.current;Ve===void 0?Re(et):Re(et,Ve)}},le=ae(I),Ie=ae((Re,Ve)=>{T4(Re);const{duration:et,delay:$e,easing:Ue}=av({style:$,timeout:U,easing:h},{mode:"enter"});let ct;U==="auto"?(ct=G.transitions.getAutoHeightDuration(Re.clientHeight),F.current=ct):ct=et,Re.style.transition=[G.transitions.create("opacity",{duration:ct,delay:$e}),G.transitions.create("transform",{duration:Wx?ct:ct*.666,delay:$e,easing:Ue})].join(","),b&&b(Re,Ve)}),K=ae(w),Ce=ae(R),Fe=ae(Re=>{const{duration:Ve,delay:et,easing:$e}=av({style:$,timeout:U,easing:h},{mode:"exit"});let Ue;U==="auto"?(Ue=G.transitions.getAutoHeightDuration(Re.clientHeight),F.current=Ue):Ue=Ve,Re.style.transition=[G.transitions.create("opacity",{duration:Ue,delay:et}),G.transitions.create("transform",{duration:Wx?Ue:Ue*.666,delay:Wx?et:et||Ue*.333,easing:$e})].join(","),Re.style.opacity=0,Re.style.transform=Tw(.75),k&&k(Re)}),De=ae(P),Ae=Re=>{U==="auto"&&O.start(F.current||0,Re),r&&r(te.current,Re)};return se.jsx(Z,{appear:a,in:l,nodeRef:te,onEnter:Ie,onEntered:K,onEntering:le,onExit:Fe,onExited:De,onExiting:Ce,addEndListener:Ae,timeout:U==="auto"?null:U,...D,children:(Re,Ve)=>ne.cloneElement(c,{style:{opacity:0,transform:Tw(.75),visibility:Re==="exited"&&!l?"hidden":void 0,..._q[Re],...$,...c.props.style},ref:oe,...Ve})})});cv&&(cv.muiSupportAuto=!0);const xq=e=>{const{classes:t,disableUnderline:n}=e,a=rn({root:["root",!n&&"underline"],input:["input"]},gV,t);return{...t,...a}},bq=ht(M1,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...I1(e,t),!n.disableUnderline&&t.underline]}})(un(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:r})=>r.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:r})=>!r.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${kf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${kf.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${kf.disabled}, .${kf.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${kf.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Li()).map(([r])=>({props:{color:r,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[r].main}`}}}))]}})),wq=ht(A1,{name:"MuiInput",slot:"Input",overridesResolver:P1})({}),dv=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiInput"}),{disableUnderline:a=!1,components:c={},componentsProps:h,fullWidth:l=!1,inputComponent:b="input",multiline:w=!1,slotProps:I,slots:k={},type:P="text",...R}=r,$=xq(r),Z={root:{ownerState:{disableUnderline:a}}},D=I??h?Ki(I??h,Z):Z,O=k.root??c.Root??bq,F=k.input??c.Input??wq;return se.jsx(bS,{slots:{root:O,input:F},slotProps:D,fullWidth:l,inputComponent:b,multiline:w,ref:n,type:P,...R,classes:$})});dv&&(dv.muiName="Input");function Sq(e){return Qt("MuiInputLabel",e)}Kt("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const Cq=e=>{const{classes:t,formControl:n,size:r,shrink:a,disableAnimation:c,variant:h,required:l}=e,b={root:["root",n&&"formControl",!c&&"animated",a&&"shrink",r&&r!=="normal"&&`size${tt(r)}`,h],asterisk:[l&&"asterisk"]},w=rn(b,Sq,t);return{...t,...w}},kq=ht(aq,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${em.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(un(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:r})=>t==="filled"&&n.shrink&&r==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),Eq=ne.forwardRef(function(t,n){const r=cn({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,margin:c,shrink:h,variant:l,className:b,...w}=r,I=Iu();let k=h;typeof k>"u"&&I&&(k=I.filled||I.focused||I.adornedStart);const P=Nc({props:r,muiFormControl:I,states:["size","variant","required","focused"]}),R={...r,disableAnimation:a,formControl:I,shrink:k,size:P.size,variant:P.variant,required:P.required,focused:P.focused},$=Cq(R);return se.jsx(kq,{"data-shrink":k,ref:n,className:Mt($.root,b),...w,ownerState:R,classes:$})}),Eh=ne.createContext({});function Tq(e){return Qt("MuiList",e)}Kt("MuiList",["root","padding","dense","subheader"]);const Iq=e=>{const{classes:t,disablePadding:n,dense:r,subheader:a}=e;return rn({root:["root",!n&&"padding",r&&"dense",a&&"subheader"]},Tq,t)},Pq=ht("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),L4=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiList"}),{children:a,className:c,component:h="ul",dense:l=!1,disablePadding:b=!1,subheader:w,...I}=r,k=ne.useMemo(()=>({dense:l}),[l]),P={...r,component:h,dense:l,disablePadding:b},R=Iq(P);return se.jsx(Eh.Provider,{value:k,children:se.jsxs(Pq,{as:h,className:Mt(R.root,c),ref:n,ownerState:P,...I,children:[w,a]})})});function Mq(e){return Qt("MuiListItem",e)}Kt("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const Aq=Kt("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Lq(e){return Qt("MuiListItemSecondaryAction",e)}Kt("MuiListItemSecondaryAction",["root","disableGutters"]);const Rq=e=>{const{disableGutters:t,classes:n}=e;return rn({root:["root",t&&"disableGutters"]},Lq,n)},zq=ht("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),R4=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiListItemSecondaryAction"}),{className:a,...c}=r,h=ne.useContext(Eh),l={...r,disableGutters:h.disableGutters},b=Rq(l);return se.jsx(zq,{className:Mt(b.root,a),ownerState:l,ref:n,...c})});R4.muiName="ListItemSecondaryAction";const Dq=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},$q=e=>{const{alignItems:t,classes:n,dense:r,disableGutters:a,disablePadding:c,divider:h,hasSecondaryAction:l}=e;return rn({root:["root",r&&"dense",!a&&"gutters",!c&&"padding",h&&"divider",t==="flex-start"&&"alignItemsFlexStart",l&&"secondaryAction"],container:["container"]},Mq,n)},Oq=ht("div",{name:"MuiListItem",slot:"Root",overridesResolver:Dq})(un(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${Aq.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),Bq=ht("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),By=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiListItem"}),{alignItems:a="center",children:c,className:h,component:l,components:b={},componentsProps:w={},ContainerComponent:I="li",ContainerProps:{className:k,...P}={},dense:R=!1,disableGutters:$=!1,disablePadding:U=!1,divider:Z=!1,secondaryAction:D,slotProps:O={},slots:F={},...G}=r,te=ne.useContext(Eh),oe=ne.useMemo(()=>({dense:R||te.dense||!1,alignItems:a,disableGutters:$}),[a,te.dense,R,$]),ae=ne.useRef(null),le=ne.Children.toArray(c),Ie=le.length&&y0(le[le.length-1],["ListItemSecondaryAction"]),K={...r,alignItems:a,dense:oe.dense,disableGutters:$,disablePadding:U,divider:Z,hasSecondaryAction:Ie},Ce=$q(K),Fe=li(ae,n),De=F.root||b.Root||Oq,Ae=O.root||w.root||{},Re={className:Mt(Ce.root,Ae.className,h),...G};let Ve=l||"li";return Ie?(Ve=!Re.component&&!l?"div":Ve,I==="li"&&(Ve==="li"?Ve="div":Re.component==="li"&&(Re.component="div")),se.jsx(Eh.Provider,{value:oe,children:se.jsxs(Bq,{as:I,className:Mt(Ce.container,k),ref:Fe,ownerState:K,...P,children:[se.jsx(De,{...Ae,...!Om(De)&&{as:Ve,ownerState:{...K,...Ae.ownerState}},...Re,children:le}),le.pop()]})})):se.jsx(Eh.Provider,{value:oe,children:se.jsxs(De,{...Ae,as:Ve,ref:Fe,...!Om(De)&&{ownerState:{...K,...Ae.ownerState}},...Re,children:[le,D&&se.jsx(R4,{children:D})]})})});function Fq(e){return Qt("MuiListItemText",e)}const Fy=Kt("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Nq=e=>{const{classes:t,inset:n,primary:r,secondary:a,dense:c}=e;return rn({root:["root",n&&"inset",c&&"dense",r&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},Fq,t)},jq=ht("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Fy.primary}`]:t.primary},{[`& .${Fy.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${P5.root}:where(& .${Fy.primary})`]:{display:"block"},[`.${P5.root}:where(& .${Fy.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),Ny=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiListItemText"}),{children:a,className:c,disableTypography:h=!1,inset:l=!1,primary:b,primaryTypographyProps:w,secondary:I,secondaryTypographyProps:k,...P}=r,{dense:R}=ne.useContext(Eh);let $=b??a,U=I;const Z={...r,disableTypography:h,inset:l,primary:!!$,secondary:!!U,dense:R},D=Nq(Z);return $!=null&&$.type!==qr&&!h&&($=se.jsx(qr,{variant:R?"body2":"body1",className:D.primary,component:w!=null&&w.variant?void 0:"span",...w,children:$})),U!=null&&U.type!==qr&&!h&&(U=se.jsx(qr,{variant:"body2",className:D.secondary,color:"textSecondary",...k,children:U})),se.jsxs(jq,{className:Mt(D.root,c),ownerState:Z,ref:n,...P,children:[$,U]})});function qx(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function W5(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function z4(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function Tf(e,t,n,r,a,c){let h=!1,l=a(e,t,t?n:!1);for(;l;){if(l===e.firstChild){if(h)return!1;h=!0}const b=r?!1:l.disabled||l.getAttribute("aria-disabled")==="true";if(!l.hasAttribute("tabindex")||!z4(l,c)||b)l=a(e,l,n);else return l.focus(),!0}return!1}const Uq=ne.forwardRef(function(t,n){const{actions:r,autoFocus:a=!1,autoFocusItem:c=!1,children:h,className:l,disabledItemsFocusable:b=!1,disableListWrap:w=!1,onKeyDown:I,variant:k="selectedMenu",...P}=t,R=ne.useRef(null),$=ne.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});$c(()=>{a&&R.current.focus()},[a]),ne.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(F,{direction:G})=>{const te=!R.current.style.width;if(F.clientHeight<R.current.clientHeight&&te){const oe=`${p4(dl(F))}px`;R.current.style[G==="rtl"?"paddingLeft":"paddingRight"]=oe,R.current.style.width=`calc(100% + ${oe})`}return R.current}}),[]);const U=F=>{const G=R.current,te=F.key;if(F.ctrlKey||F.metaKey||F.altKey){I&&I(F);return}const ae=zo(G).activeElement;if(te==="ArrowDown")F.preventDefault(),Tf(G,ae,w,b,qx);else if(te==="ArrowUp")F.preventDefault(),Tf(G,ae,w,b,W5);else if(te==="Home")F.preventDefault(),Tf(G,null,w,b,qx);else if(te==="End")F.preventDefault(),Tf(G,null,w,b,W5);else if(te.length===1){const le=$.current,Ie=te.toLowerCase(),K=performance.now();le.keys.length>0&&(K-le.lastTime>500?(le.keys=[],le.repeating=!0,le.previousKeyMatched=!0):le.repeating&&Ie!==le.keys[0]&&(le.repeating=!1)),le.lastTime=K,le.keys.push(Ie);const Ce=ae&&!le.repeating&&z4(ae,le);le.previousKeyMatched&&(Ce||Tf(G,ae,!1,b,qx,le))?F.preventDefault():le.previousKeyMatched=!1}I&&I(F)},Z=li(R,n);let D=-1;ne.Children.forEach(h,(F,G)=>{if(!ne.isValidElement(F)){D===G&&(D+=1,D>=h.length&&(D=-1));return}F.props.disabled||(k==="selectedMenu"&&F.props.selected||D===-1)&&(D=G),D===G&&(F.props.disabled||F.props.muiSkipListHighlight||F.type.muiSkipListHighlight)&&(D+=1,D>=h.length&&(D=-1))});const O=ne.Children.map(h,(F,G)=>{if(G===D){const te={};return c&&(te.autoFocus=!0),F.props.tabIndex===void 0&&k==="selectedMenu"&&(te.tabIndex=0),ne.cloneElement(F,te)}return F});return se.jsx(L4,{role:"menu",ref:Z,className:l,onKeyDown:U,tabIndex:a?0:-1,...P,children:O})});function Vq(e){return Qt("MuiPopover",e)}Kt("MuiPopover",["root","paper"]);function q5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function H5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function G5(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Hx(e){return typeof e=="function"?e():e}const Wq=e=>{const{classes:t}=e;return rn({root:["root"],paper:["paper"]},Vq,t)},qq=ht(LW,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),D4=ht(Yh,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Hq=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiPopover"}),{action:a,anchorEl:c,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:l,anchorReference:b="anchorEl",children:w,className:I,container:k,elevation:P=8,marginThreshold:R=16,open:$,PaperProps:U={},slots:Z={},slotProps:D={},transformOrigin:O={vertical:"top",horizontal:"left"},TransitionComponent:F=cv,transitionDuration:G="auto",TransitionProps:{onEntering:te,...oe}={},disableScrollLock:ae=!1,...le}=r,Ie=(D==null?void 0:D.paper)??U,K=ne.useRef(),Ce={...r,anchorOrigin:h,anchorReference:b,elevation:P,marginThreshold:R,externalPaperSlotProps:Ie,transformOrigin:O,TransitionComponent:F,transitionDuration:G,TransitionProps:oe},Fe=Wq(Ce),De=ne.useCallback(()=>{if(b==="anchorPosition")return l;const Vt=Hx(c),Wt=(Vt&&Vt.nodeType===1?Vt:zo(K.current).body).getBoundingClientRect();return{top:Wt.top+q5(Wt,h.vertical),left:Wt.left+H5(Wt,h.horizontal)}},[c,h.horizontal,h.vertical,l,b]),Ae=ne.useCallback(Vt=>({vertical:q5(Vt,O.vertical),horizontal:H5(Vt,O.horizontal)}),[O.horizontal,O.vertical]),Re=ne.useCallback(Vt=>{const an={width:Vt.offsetWidth,height:Vt.offsetHeight},Wt=Ae(an);if(b==="none")return{top:null,left:null,transformOrigin:G5(Wt)};const Cn=De();let _t=Cn.top-Wt.vertical,Dt=Cn.left-Wt.horizontal;const Se=_t+an.height,ur=Dt+an.width,bn=dl(Hx(c)),ft=bn.innerHeight-R,qt=bn.innerWidth-R;if(R!==null&&_t<R){const fn=_t-R;_t-=fn,Wt.vertical+=fn}else if(R!==null&&Se>ft){const fn=Se-ft;_t-=fn,Wt.vertical+=fn}if(R!==null&&Dt<R){const fn=Dt-R;Dt-=fn,Wt.horizontal+=fn}else if(ur>qt){const fn=ur-qt;Dt-=fn,Wt.horizontal+=fn}return{top:`${Math.round(_t)}px`,left:`${Math.round(Dt)}px`,transformOrigin:G5(Wt)}},[c,b,De,Ae,R]),[Ve,et]=ne.useState($),$e=ne.useCallback(()=>{const Vt=K.current;if(!Vt)return;const an=Re(Vt);an.top!==null&&Vt.style.setProperty("top",an.top),an.left!==null&&(Vt.style.left=an.left),Vt.style.transformOrigin=an.transformOrigin,et(!0)},[Re]);ne.useEffect(()=>(ae&&window.addEventListener("scroll",$e),()=>window.removeEventListener("scroll",$e)),[c,ae,$e]);const Ue=(Vt,an)=>{te&&te(Vt,an),$e()},ct=()=>{et(!1)};ne.useEffect(()=>{$&&$e()}),ne.useImperativeHandle(a,()=>$?{updatePosition:()=>{$e()}}:null,[$,$e]),ne.useEffect(()=>{if(!$)return;const Vt=c4(()=>{$e()}),an=dl(c);return an.addEventListener("resize",Vt),()=>{Vt.clear(),an.removeEventListener("resize",Vt)}},[c,$,$e]);let St=G;G==="auto"&&!F.muiSupportAuto&&(St=void 0);const At=k||(c?zo(Hx(c)).body:void 0),jt={slots:Z,slotProps:{...D,paper:Ie}},[zt,Xt]=fo("paper",{elementType:D4,externalForwardedProps:jt,additionalProps:{elevation:P,className:Mt(Fe.paper,Ie==null?void 0:Ie.className),style:Ve?Ie.style:{...Ie.style,opacity:0}},ownerState:Ce}),[yn,{slotProps:on,...Un}]=fo("root",{elementType:qq,externalForwardedProps:jt,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:At,open:$},ownerState:Ce,className:Mt(Fe.root,I)}),Mn=li(K,Xt.ref);return se.jsx(yn,{...Un,...!Om(yn)&&{slotProps:on,disableScrollLock:ae},...le,ref:n,children:se.jsx(F,{appear:!0,in:$,onEntering:Ue,onExited:ct,timeout:St,...oe,children:se.jsx(zt,{...Xt,ref:Mn,children:w})})})});function Gq(e){return Qt("MuiMenu",e)}Kt("MuiMenu",["root","paper","list"]);const Zq={vertical:"top",horizontal:"right"},Kq={vertical:"top",horizontal:"left"},Xq=e=>{const{classes:t}=e;return rn({root:["root"],paper:["paper"],list:["list"]},Gq,t)},Yq=ht(Hq,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Jq=ht(D4,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Qq=ht(Uq,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),eH=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:c,className:h,disableAutoFocusItem:l=!1,MenuListProps:b={},onClose:w,open:I,PaperProps:k={},PopoverClasses:P,transitionDuration:R="auto",TransitionProps:{onEntering:$,...U}={},variant:Z="selectedMenu",slots:D={},slotProps:O={},...F}=r,G=dj(),te={...r,autoFocus:a,disableAutoFocusItem:l,MenuListProps:b,onEntering:$,PaperProps:k,transitionDuration:R,TransitionProps:U,variant:Z},oe=Xq(te),ae=a&&!l&&I,le=ne.useRef(null),Ie=(Ve,et)=>{le.current&&le.current.adjustStyleForScrollbar(Ve,{direction:G?"rtl":"ltr"}),$&&$(Ve,et)},K=Ve=>{Ve.key==="Tab"&&(Ve.preventDefault(),w&&w(Ve,"tabKeyDown"))};let Ce=-1;ne.Children.map(c,(Ve,et)=>{ne.isValidElement(Ve)&&(Ve.props.disabled||(Z==="selectedMenu"&&Ve.props.selected||Ce===-1)&&(Ce=et))});const Fe=D.paper??Jq,De=O.paper??k,Ae=bw({elementType:D.root,externalSlotProps:O.root,ownerState:te,className:[oe.root,h]}),Re=bw({elementType:Fe,externalSlotProps:De,ownerState:te,className:oe.paper});return se.jsx(Yq,{onClose:w,anchorOrigin:{vertical:"bottom",horizontal:G?"right":"left"},transformOrigin:G?Zq:Kq,slots:{paper:Fe,root:D.root},slotProps:{root:Ae,paper:Re},open:I,ref:n,transitionDuration:R,TransitionProps:{onEntering:Ie,...U},ownerState:te,...F,classes:P,children:se.jsx(Qq,{onKeyDown:K,actions:le,autoFocus:a&&(Ce===-1||l),autoFocusItem:ae,variant:Z,...b,className:Mt(oe.list,b.className),children:c})})});function tH(e){return Qt("MuiNativeSelect",e)}const wS=Kt("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),nH=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c,error:h}=e,l={select:["select",n,r&&"disabled",a&&"multiple",h&&"error"],icon:["icon",`icon${tt(n)}`,c&&"iconOpen",r&&"disabled"]};return rn(l,tH,t)},$4=ht("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${wS.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),rH=ht($4,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ua,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${wS.multiple}`]:t.multiple}]}})({}),O4=ht("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${wS.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),iH=ht(O4,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${tt(n.variant)}`],n.open&&t.iconOpen]}})({}),oH=ne.forwardRef(function(t,n){const{className:r,disabled:a,error:c,IconComponent:h,inputRef:l,variant:b="standard",...w}=t,I={...t,disabled:a,variant:b,error:c},k=nH(I);return se.jsxs(ne.Fragment,{children:[se.jsx(rH,{ownerState:I,className:Mt(k.select,r),disabled:a,ref:l||n,...w}),t.multiple?null:se.jsx(iH,{as:h,ownerState:I,className:k.icon})]})});var Z5;const aH=ht("fieldset",{shouldForwardProp:ua})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),sH=ht("legend",{shouldForwardProp:ua})(un(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function lH(e){const{children:t,classes:n,className:r,label:a,notched:c,...h}=e,l=a!=null&&a!=="",b={...e,notched:c,withLabel:l};return se.jsx(aH,{"aria-hidden":!0,className:r,ownerState:b,...h,children:se.jsx(sH,{ownerState:b,children:l?se.jsx("span",{children:a}):Z5||(Z5=se.jsx("span",{className:"notranslate",children:""}))})})}const uH=e=>{const{classes:t}=e,r=rn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},yV,t);return{...t,...r}},cH=ht(M1,{shouldForwardProp:e=>ua(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:I1})(un(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${cs.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${cs.focused} .${cs.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Li()).map(([n])=>({props:{color:n},style:{[`&.${cs.focused} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${cs.error} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${cs.disabled} .${cs.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:r})=>n.multiline&&r==="small",style:{padding:"8.5px 14px"}}]}})),dH=ht(lH,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(un(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),hH=ht(A1,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:P1})(un(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),hv=ne.forwardRef(function(t,n){var r;const a=cn({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:h=!1,inputComponent:l="input",label:b,multiline:w=!1,notched:I,slots:k={},type:P="text",...R}=a,$=uH(a),U=Iu(),Z=Nc({props:a,muiFormControl:U,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),D={...a,color:Z.color||"primary",disabled:Z.disabled,error:Z.error,focused:Z.focused,formControl:U,fullWidth:h,hiddenLabel:Z.hiddenLabel,multiline:w,size:Z.size,type:P},O=k.root??c.Root??cH,F=k.input??c.Input??hH;return se.jsx(bS,{slots:{root:O,input:F},renderSuffix:G=>se.jsx(dH,{ownerState:D,className:$.notchedOutline,label:b!=null&&b!==""&&Z.required?r||(r=se.jsxs(ne.Fragment,{children:[b,"","*"]})):b,notched:typeof I<"u"?I:!!(G.startAdornment||G.filled||G.focused)}),fullWidth:h,inputComponent:l,multiline:w,ref:n,type:P,...R,classes:{...$,notchedOutline:null}})});hv&&(hv.muiName="Input");function pH(e){return Qt("MuiSelect",e)}const If=Kt("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var K5;const fH=ht($4,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${If.select}`]:t.select},{[`&.${If.select}`]:t[n.variant]},{[`&.${If.error}`]:t.error},{[`&.${If.multiple}`]:t.multiple}]}})({[`&.${If.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),mH=ht(O4,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${tt(n.variant)}`],n.open&&t.iconOpen]}})({}),gH=ht("input",{shouldForwardProp:e=>S4(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function X5(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function yH(e){return e==null||typeof e=="string"&&!e.trim()}const vH=e=>{const{classes:t,variant:n,disabled:r,multiple:a,open:c,error:h}=e,l={select:["select",n,r&&"disabled",a&&"multiple",h&&"error"],icon:["icon",`icon${tt(n)}`,c&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return rn(l,pH,t)},_H=ne.forwardRef(function(t,n){var Ke;const{"aria-describedby":r,"aria-label":a,autoFocus:c,autoWidth:h,children:l,className:b,defaultOpen:w,defaultValue:I,disabled:k,displayEmpty:P,error:R=!1,IconComponent:$,inputRef:U,labelId:Z,MenuProps:D={},multiple:O,name:F,onBlur:G,onChange:te,onClose:oe,onFocus:ae,onOpen:le,open:Ie,readOnly:K,renderValue:Ce,SelectDisplayProps:Fe={},tabIndex:De,type:Ae,value:Re,variant:Ve="standard",...et}=t,[$e,Ue]=xw({controlled:Re,default:I,name:"Select"}),[ct,St]=xw({controlled:Ie,default:w,name:"Select"}),At=ne.useRef(null),jt=ne.useRef(null),[zt,Xt]=ne.useState(null),{current:yn}=ne.useRef(Ie!=null),[on,Un]=ne.useState(),Mn=li(n,U),Vt=ne.useCallback(Xe=>{jt.current=Xe,Xe&&Xt(Xe)},[]),an=zt==null?void 0:zt.parentNode;ne.useImperativeHandle(Mn,()=>({focus:()=>{jt.current.focus()},node:At.current,value:$e}),[$e]),ne.useEffect(()=>{w&&ct&&zt&&!yn&&(Un(h?null:an.clientWidth),jt.current.focus())},[zt,h]),ne.useEffect(()=>{c&&jt.current.focus()},[c]),ne.useEffect(()=>{if(!Z)return;const Xe=zo(jt.current).getElementById(Z);if(Xe){const at=()=>{getSelection().isCollapsed&&jt.current.focus()};return Xe.addEventListener("click",at),()=>{Xe.removeEventListener("click",at)}}},[Z]);const Wt=(Xe,at)=>{Xe?le&&le(at):oe&&oe(at),yn||(Un(h?null:an.clientWidth),St(Xe))},Cn=Xe=>{Xe.button===0&&(Xe.preventDefault(),jt.current.focus(),Wt(!0,Xe))},_t=Xe=>{Wt(!1,Xe)},Dt=ne.Children.toArray(l),Se=Xe=>{const at=Dt.find(mn=>mn.props.value===Xe.target.value);at!==void 0&&(Ue(at.props.value),te&&te(Xe,at))},ur=Xe=>at=>{let mn;if(at.currentTarget.hasAttribute("tabindex")){if(O){mn=Array.isArray($e)?$e.slice():[];const zr=$e.indexOf(Xe.props.value);zr===-1?mn.push(Xe.props.value):mn.splice(zr,1)}else mn=Xe.props.value;if(Xe.props.onClick&&Xe.props.onClick(at),$e!==mn&&(Ue(mn),te)){const zr=at.nativeEvent||at,$t=new zr.constructor(zr.type,zr);Object.defineProperty($t,"target",{writable:!0,value:{value:mn,name:F}}),te($t,Xe)}O||Wt(!1,at)}},bn=Xe=>{K||[" ","ArrowUp","ArrowDown","Enter"].includes(Xe.key)&&(Xe.preventDefault(),Wt(!0,Xe))},ft=zt!==null&&ct,qt=Xe=>{!ft&&G&&(Object.defineProperty(Xe,"target",{writable:!0,value:{value:$e,name:F}}),G(Xe))};delete et["aria-invalid"];let fn,ir;const Ct=[];let zn=!1;(lv({value:$e})||P)&&(Ce?fn=Ce($e):zn=!0);const yr=Dt.map(Xe=>{if(!ne.isValidElement(Xe))return null;let at;if(O){if(!Array.isArray($e))throw new Error(cl(2));at=$e.some(mn=>X5(mn,Xe.props.value)),at&&zn&&Ct.push(Xe.props.children)}else at=X5($e,Xe.props.value),at&&zn&&(ir=Xe.props.children);return ne.cloneElement(Xe,{"aria-selected":at?"true":"false",onClick:ur(Xe),onKeyUp:mn=>{mn.key===" "&&mn.preventDefault(),Xe.props.onKeyUp&&Xe.props.onKeyUp(mn)},role:"option",selected:at,value:void 0,"data-value":Xe.props.value})});zn&&(O?Ct.length===0?fn=null:fn=Ct.reduce((Xe,at,mn)=>(Xe.push(at),mn<Ct.length-1&&Xe.push(", "),Xe),[]):fn=ir);let ei=on;!h&&yn&&zt&&(ei=an.clientWidth);let vr;typeof De<"u"?vr=De:vr=k?null:0;const Ge=Fe.id||(F?`mui-component-select-${F}`:void 0),cr={...t,variant:Ve,value:$e,open:ft,error:R},Kn=vH(cr),dn={...D.PaperProps,...(Ke=D.slotProps)==null?void 0:Ke.paper},Rr=d4();return se.jsxs(ne.Fragment,{children:[se.jsx(fH,{as:"div",ref:Vt,tabIndex:vr,role:"combobox","aria-controls":Rr,"aria-disabled":k?"true":void 0,"aria-expanded":ft?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[Z,Ge].filter(Boolean).join(" ")||void 0,"aria-describedby":r,onKeyDown:bn,onMouseDown:k||K?null:Cn,onBlur:qt,onFocus:ae,...Fe,ownerState:cr,className:Mt(Fe.className,Kn.select,b),id:Ge,children:yH(fn)?K5||(K5=se.jsx("span",{className:"notranslate",children:""})):fn}),se.jsx(gH,{"aria-invalid":R,value:Array.isArray($e)?$e.join(","):$e,name:F,ref:At,"aria-hidden":!0,onChange:Se,tabIndex:-1,disabled:k,className:Kn.nativeInput,autoFocus:c,...et,ownerState:cr}),se.jsx(mH,{as:$,className:Kn.icon,ownerState:cr}),se.jsx(eH,{id:`menu-${F||""}`,anchorEl:an,open:ft,onClose:_t,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...D,MenuListProps:{"aria-labelledby":Z,role:"listbox","aria-multiselectable":O?"true":void 0,disableListWrap:!0,id:Rr,...D.MenuListProps},slotProps:{...D.slotProps,paper:{...dn,style:{minWidth:ei,...dn!=null?dn.style:null}}},children:yr})]})}),xH=e=>{const{classes:t}=e;return t},SS={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>ua(e)&&e!=="variant",slot:"Root"},bH=ht(dv,SS)(""),wH=ht(hv,SS)(""),SH=ht(uv,SS)(""),B4=ne.forwardRef(function(t,n){const r=cn({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:c,classes:h={},className:l,defaultOpen:b=!1,displayEmpty:w=!1,IconComponent:I=_V,id:k,input:P,inputProps:R,label:$,labelId:U,MenuProps:Z,multiple:D=!1,native:O=!1,onClose:F,onOpen:G,open:te,renderValue:oe,SelectDisplayProps:ae,variant:le="outlined",...Ie}=r,K=O?oH:_H,Ce=Iu(),Fe=Nc({props:r,muiFormControl:Ce,states:["variant","error"]}),De=Fe.variant||le,Ae={...r,variant:De,classes:h},Re=xH(Ae),{root:Ve,...et}=Re,$e=P||{standard:se.jsx(bH,{ownerState:Ae}),outlined:se.jsx(wH,{label:$,ownerState:Ae}),filled:se.jsx(SH,{ownerState:Ae})}[De],Ue=li(n,Xh($e));return se.jsx(ne.Fragment,{children:ne.cloneElement($e,{inputComponent:K,inputProps:{children:c,error:Fe.error,IconComponent:I,variant:De,type:void 0,multiple:D,...O?{id:k}:{autoWidth:a,defaultOpen:b,displayEmpty:w,labelId:U,MenuProps:Z,onClose:F,onOpen:G,open:te,renderValue:oe,SelectDisplayProps:{id:k,...ae}},...R,classes:R?Ki(et,R.classes):et,...P?P.props.inputProps:{}},...(D&&O||w)&&De==="outlined"?{notched:!0}:{},ref:Ue,className:Mt($e.props.className,l,Re.root),...!P&&{variant:De},...Ie})})});B4.muiName="Select";function CH(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:r,open:a,resumeHideDuration:c}=e,h=pS();ne.useEffect(()=>{if(!a)return;function D(O){O.defaultPrevented||O.key==="Escape"&&(r==null||r(O,"escapeKeyDown"))}return document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}},[a,r]);const l=Qs((D,O)=>{r==null||r(D,O)}),b=Qs(D=>{!r||D==null||h.start(D,()=>{l(null,"timeout")})});ne.useEffect(()=>(a&&b(t),h.clear),[a,t,b,h]);const w=D=>{r==null||r(D,"clickaway")},I=h.clear,k=ne.useCallback(()=>{t!=null&&b(c??t*.5)},[t,c,b]),P=D=>O=>{const F=D.onBlur;F==null||F(O),k()},R=D=>O=>{const F=D.onFocus;F==null||F(O),I()},$=D=>O=>{const F=D.onMouseEnter;F==null||F(O),I()},U=D=>O=>{const F=D.onMouseLeave;F==null||F(O),k()};return ne.useEffect(()=>{if(!n&&a)return window.addEventListener("focus",k),window.addEventListener("blur",I),()=>{window.removeEventListener("focus",k),window.removeEventListener("blur",I)}},[n,a,k,I]),{getRootProps:(D={})=>{const O={...iv(e),...iv(D)};return{role:"presentation",...D,...O,onBlur:P(O),onFocus:R(O),onMouseEnter:$(O),onMouseLeave:U(O)}},onClickAway:w}}function kH(e){return Qt("MuiSnackbarContent",e)}Kt("MuiSnackbarContent",["root","message","action"]);const EH=e=>{const{classes:t}=e;return rn({root:["root"],action:["action"],message:["message"]},kH,t)},TH=ht(Yh,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(un(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=u4(e.palette.background.default,t);return{...e.typography.body2,color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}}})),IH=ht("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),PH=ht("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),MH=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiSnackbarContent"}),{action:a,className:c,message:h,role:l="alert",...b}=r,w=r,I=EH(w);return se.jsxs(TH,{role:l,square:!0,elevation:6,className:Mt(I.root,c),ownerState:w,ref:n,...b,children:[se.jsx(IH,{className:I.message,ownerState:w,children:h}),a?se.jsx(PH,{className:I.action,ownerState:w,children:a}):null]})});function AH(e){return Qt("MuiSnackbar",e)}Kt("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const LH=e=>{const{classes:t,anchorOrigin:n}=e,r={root:["root",`anchorOrigin${tt(n.vertical)}${tt(n.horizontal)}`]};return rn(r,AH,t)},Y5=ht("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${tt(n.anchorOrigin.vertical)}${tt(n.anchorOrigin.horizontal)}`]]}})(un(({theme:e})=>({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center",variants:[{props:({ownerState:t})=>t.anchorOrigin.vertical==="top",style:{top:8,[e.breakpoints.up("sm")]:{top:24}}},{props:({ownerState:t})=>t.anchorOrigin.vertical!=="top",style:{bottom:8,[e.breakpoints.up("sm")]:{bottom:24}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="left",style:{justifyContent:"flex-start",[e.breakpoints.up("sm")]:{left:24,right:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="right",style:{justifyContent:"flex-end",[e.breakpoints.up("sm")]:{right:24,left:"auto"}}},{props:({ownerState:t})=>t.anchorOrigin.horizontal==="center",style:{[e.breakpoints.up("sm")]:{left:"50%",right:"auto",transform:"translateX(-50%)"}}}]}))),RH=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiSnackbar"}),a=eg(),c={enter:a.transitions.duration.enteringScreen,exit:a.transitions.duration.leavingScreen},{action:h,anchorOrigin:{vertical:l,horizontal:b}={vertical:"bottom",horizontal:"left"},autoHideDuration:w=null,children:I,className:k,ClickAwayListenerProps:P,ContentProps:R,disableWindowBlurListener:$=!1,message:U,onBlur:Z,onClose:D,onFocus:O,onMouseEnter:F,onMouseLeave:G,open:te,resumeHideDuration:oe,TransitionComponent:ae=cv,transitionDuration:le=c,TransitionProps:{onEnter:Ie,onExited:K,...Ce}={},...Fe}=r,De={...r,anchorOrigin:{vertical:l,horizontal:b},autoHideDuration:w,disableWindowBlurListener:$,TransitionComponent:ae,transitionDuration:le},Ae=LH(De),{getRootProps:Re,onClickAway:Ve}=CH({...De}),[et,$e]=ne.useState(!0),Ue=bw({elementType:Y5,getSlotProps:Re,externalForwardedProps:Fe,ownerState:De,additionalProps:{ref:n},className:[Ae.root,k]}),ct=At=>{$e(!0),K&&K(At)},St=(At,jt)=>{$e(!1),Ie&&Ie(At,jt)};return!te&&et?null:se.jsx(dW,{onClickAway:Ve,...P,children:se.jsx(Y5,{...Ue,children:se.jsx(ae,{appear:!0,in:te,timeout:le,direction:l==="top"?"down":"up",onEnter:St,onExited:ct,...Ce,children:I||se.jsx(MH,{message:U,action:h,...R})})})})});function zH(e){return Qt("MuiSwitch",e)}const uo=Kt("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),DH=e=>{const{classes:t,edge:n,size:r,color:a,checked:c,disabled:h}=e,l={root:["root",n&&`edge${tt(n)}`,`size${tt(r)}`],switchBase:["switchBase",`color${tt(a)}`,c&&"checked",h&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},b=rn(l,zH,t);return{...t,...b}},$H=ht("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.edge&&t[`edge${tt(n.edge)}`],t[`size${tt(n.size)}`]]}})({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"},variants:[{props:{edge:"start"},style:{marginLeft:-8}},{props:{edge:"end"},style:{marginRight:-8}},{props:{size:"small"},style:{width:40,height:24,padding:7,[`& .${uo.thumb}`]:{width:16,height:16},[`& .${uo.switchBase}`]:{padding:4,[`&.${uo.checked}`]:{transform:"translateX(16px)"}}}}]}),OH=ht(uW,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.switchBase,{[`& .${uo.input}`]:t.input},n.color!=="default"&&t[`color${tt(n.color)}`]]}})(un(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${uo.checked}`]:{transform:"translateX(20px)"},[`&.${uo.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${uo.checked} + .${uo.track}`]:{opacity:.5},[`&.${uo.disabled} + .${uo.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${uo.input}`]:{left:"-100%",width:"300%"}})),un(({theme:e})=>({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[...Object.entries(e.palette).filter(Li(["light"])).map(([t])=>({props:{color:t},style:{[`&.${uo.checked}`]:{color:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Pr(e.palette[t].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${uo.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${t}DisabledColor`]:`${e.palette.mode==="light"?Bh(e.palette[t].main,.62):Oh(e.palette[t].main,.55)}`}},[`&.${uo.checked} + .${uo.track}`]:{backgroundColor:(e.vars||e).palette[t].main}}}))]}))),BH=ht("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})(un(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`}))),FH=ht("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})(un(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}))),jy=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiSwitch"}),{className:a,color:c="primary",edge:h=!1,size:l="medium",sx:b,...w}=r,I={...r,color:c,edge:h,size:l},k=DH(I),P=se.jsx(FH,{className:k.thumb,ownerState:I});return se.jsxs($H,{className:Mt(k.root,a),sx:b,ownerState:I,children:[se.jsx(OH,{type:"checkbox",icon:P,checkedIcon:P,ref:n,ownerState:I,...w,classes:{...k,root:k.switchBase}}),se.jsx(BH,{className:k.track,ownerState:I})]})});function NH(e){return Qt("MuiTextField",e)}Kt("MuiTextField",["root"]);const jH={standard:dv,filled:uv,outlined:hv},UH=e=>{const{classes:t}=e;return rn({root:["root"]},NH,t)},VH=ht(GW,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v0=ne.forwardRef(function(t,n){const r=cn({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:c=!1,children:h,className:l,color:b="primary",defaultValue:w,disabled:I=!1,error:k=!1,FormHelperTextProps:P,fullWidth:R=!1,helperText:$,id:U,InputLabelProps:Z,inputProps:D,InputProps:O,inputRef:F,label:G,maxRows:te,minRows:oe,multiline:ae=!1,name:le,onBlur:Ie,onChange:K,onFocus:Ce,placeholder:Fe,required:De=!1,rows:Ae,select:Re=!1,SelectProps:Ve,slots:et={},slotProps:$e={},type:Ue,value:ct,variant:St="outlined",...At}=r,jt={...r,autoFocus:c,color:b,disabled:I,error:k,fullWidth:R,multiline:ae,required:De,select:Re,variant:St},zt=UH(jt),Xt=d4(U),yn=$&&Xt?`${Xt}-helper-text`:void 0,on=G&&Xt?`${Xt}-label`:void 0,Un=jH[St],Mn={slots:et,slotProps:{input:O,inputLabel:Z,htmlInput:D,formHelperText:P,select:Ve,...$e}},Vt={},an=Mn.slotProps.inputLabel;St==="outlined"&&(an&&typeof an.shrink<"u"&&(Vt.notched=an.shrink),Vt.label=G),Re&&((!Ve||!Ve.native)&&(Vt.id=void 0),Vt["aria-describedby"]=void 0);const[Wt,Cn]=fo("input",{elementType:Un,externalForwardedProps:Mn,additionalProps:Vt,ownerState:jt}),[_t,Dt]=fo("inputLabel",{elementType:Eq,externalForwardedProps:Mn,ownerState:jt}),[Se,ur]=fo("htmlInput",{elementType:"input",externalForwardedProps:Mn,ownerState:jt}),[bn,ft]=fo("formHelperText",{elementType:tq,externalForwardedProps:Mn,ownerState:jt}),[qt,fn]=fo("select",{elementType:B4,externalForwardedProps:Mn,ownerState:jt}),ir=se.jsx(Wt,{"aria-describedby":yn,autoComplete:a,autoFocus:c,defaultValue:w,fullWidth:R,multiline:ae,name:le,rows:Ae,maxRows:te,minRows:oe,type:Ue,value:ct,id:Xt,inputRef:F,onBlur:Ie,onChange:K,onFocus:Ce,placeholder:Fe,inputProps:ur,slots:{input:et.htmlInput?Se:void 0},...Cn});return se.jsxs(VH,{className:Mt(zt.root,l),disabled:I,error:k,fullWidth:R,ref:n,required:De,color:b,variant:St,ownerState:jt,...At,children:[G!=null&&G!==""&&se.jsx(_t,{htmlFor:Xt,id:on,...Dt,children:G}),Re?se.jsx(qt,{"aria-describedby":yn,id:Xt,labelId:on,value:ct,input:ir,...fn,children:h}):ir,$&&se.jsx(bn,{id:yn,...ft,children:$})]})}),WH="/foundhere/assets/logostyled-BA_oX2fn.png";function qH(){const e=M2(),[t,n]=ne.useState(""),[r,a]=ne.useState(""),[c,h]=ne.useState(""),l=b=>{b.preventDefault(),localStorage.setItem("username",t),localStorage.setItem("email",r),localStorage.setItem("password",c),e("/map")};return se.jsxs(mu,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#f5f5f5"},children:[se.jsx("img",{src:WH,alt:"Logo",style:{width:"275px",marginBottom:"20px",borderRadius:"8%"}}),se.jsx(qr,{variant:"h6",gutterBottom:!0,children:"Welcome to the Login"}),se.jsxs("form",{onSubmit:l,style:{width:"100%",maxWidth:400},children:[se.jsx(v0,{label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:t,onChange:b=>n(b.target.value),required:!0}),se.jsx(v0,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:r,onChange:b=>a(b.target.value),required:!0}),se.jsx(v0,{label:"Password",variant:"outlined",fullWidth:!0,margin:"normal",type:"password",value:c,onChange:b=>h(b.target.value),required:!0}),se.jsx(_c,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2,bgcolor:"#778DA9",color:"white"},children:"Login"})]})]})}const HH=wi(se.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),GH=()=>{const e=M2(),t=localStorage.getItem("email"),n=localStorage.getItem("username"),r=()=>{localStorage.clear(),e("/foundhere/")},a=()=>{e("/liked/")},c=()=>{e("/account-settings/")},h=()=>{e("/edit-profile/")};return se.jsxs(hW,{maxWidth:"sm",sx:{textAlign:"center",pt:6},children:[se.jsx(I4,{alt:"User Avatar",src:"/images/user-avatar.jpg",sx:{width:100,height:100,mx:"auto"},children:n.charAt(0)}),se.jsx(qr,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:n||"User"}),se.jsx(qr,{variant:"body1",color:"text.secondary",children:t||"user@example.com"}),se.jsx(ou,{sx:{my:3}}),se.jsxs(mu,{display:"flex",flexDirection:"column",gap:2,alignItems:"center",children:[se.jsx(_c,{variant:"contained",fullWidth:!0,sx:{bgcolor:"#778DA9",borderRadius:"20px"},onClick:h,children:"Edit Profile"}),se.jsx(_c,{variant:"outlined",fullWidth:!0,sx:{color:"#778DA9",borderColor:"#778DA9",borderRadius:"20px"},onClick:c,children:"Account Settings"}),se.jsx(_c,{variant:"outlined",fullWidth:!0,sx:{color:"#778DA9",borderColor:"#778DA9",borderRadius:"20px"},onClick:a,children:"My Liked Souvenirs"}),se.jsxs(_c,{variant:"contained",sx:{bgcolor:"#FF8A5B",borderRadius:"20px"},fullWidth:!0,onClick:r,children:["Logout",se.jsx(HH,{})]})]})]})};var F4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J5=_i.createContext&&_i.createContext(F4),ZH=["attr","size","title"];function KH(e,t){if(e==null)return{};var n=XH(e,t),r,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)r=c[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function XH(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pv.apply(this,arguments)}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function fv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(r){YH(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function YH(e,t,n){return t=JH(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function JH(e){var t=QH(e,"string");return typeof t=="symbol"?t:t+""}function QH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function N4(e){return e&&e.map((t,n)=>_i.createElement(t.tag,fv({key:n},t.attr),N4(t.child)))}function CS(e){return t=>_i.createElement(eG,pv({attr:fv({},e.attr)},t),N4(e.child))}function eG(e){var t=n=>{var{attr:r,size:a,title:c}=e,h=KH(e,ZH),l=a||n.size||"1em",b;return n.className&&(b=n.className),e.className&&(b=(b?b+" ":"")+e.className),_i.createElement("svg",pv({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,h,{className:b,style:fv(fv({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),c&&_i.createElement("title",null,c),e.children)};return J5!==void 0?_i.createElement(J5.Consumer,null,n=>t(n)):t(F4)}function tG(e){return CS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function nG(e){return CS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(e)}function rG(e){return CS({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}const iG=()=>{const[e,t]=ne.useState("map"),n=M2(),r=(a,c)=>{t(c),c==="map"?n("/map"):c==="liked"?n("/liked"):c==="profile"&&n("/profile")};return se.jsx(Yh,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:"10",minHeight:"60px"},elevation:3,children:se.jsxs(OV,{value:e,onChange:r,sx:{bgcolor:"#374151",color:"#9ca3af",height:"75px"},children:[se.jsx(Ux,{label:"Map",value:"map",icon:se.jsx(Tc,{children:se.jsx(nG,{})}),sx:{color:"#9ca3af"}}),se.jsx(Ux,{label:"Liked",value:"liked",icon:se.jsx(Tc,{children:se.jsx(tG,{})}),sx:{color:"#9ca3af"}}),se.jsx(Ux,{label:"Profile",value:"profile",icon:se.jsx(Tc,{children:se.jsx(rG,{})}),sx:{color:"#9ca3af"}})]})})},eI=wi(se.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"}),"Storefront"),oG=wi(se.jsx("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),aG=wi(se.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),sG=wi(se.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),lG=wi([se.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),se.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var j4={},L1={},kS={},Gx={},tI;function uG(){return tI||(tI=1,function(e){(function(t,n){n(e,ne,JA)})(Lw,function(t,n,r){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=$;var a=h(n),c=h(r);function h(O){return O&&O.__esModule?O:{default:O}}var l=Object.assign||function(O){for(var F=1;F<arguments.length;F++){var G=arguments[F];for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&(O[te]=G[te])}return O};function b(O,F){var G={};for(var te in O)F.indexOf(te)>=0||Object.prototype.hasOwnProperty.call(O,te)&&(G[te]=O[te]);return G}function w(O,F){if(!(O instanceof F))throw new TypeError("Cannot call a class as a function")}var I=function(){function O(F,G){for(var te=0;te<G.length;te++){var oe=G[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(F,oe.key,oe)}}return function(F,G,te){return G&&O(F.prototype,G),te&&O(F,te),F}}();function k(O,F){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F&&(typeof F=="object"||typeof F=="function")?F:O}function P(O,F){if(typeof F!="function"&&F!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof F);O.prototype=Object.create(F&&F.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),F&&(Object.setPrototypeOf?Object.setPrototypeOf(O,F):O.__proto__=F)}var R=!1;function $(O){R=O}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){$(!0)}}))}catch{}function U(){var O=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return R?O:O.capture}function Z(O){if("touches"in O){var F=O.touches[0],G=F.pageX,te=F.pageY;return{x:G,y:te}}var oe=O.screenX,ae=O.screenY;return{x:oe,y:ae}}var D=function(O){P(F,O);function F(){var G;w(this,F);for(var te=arguments.length,oe=Array(te),ae=0;ae<te;ae++)oe[ae]=arguments[ae];var le=k(this,(G=F.__proto__||Object.getPrototypeOf(F)).call.apply(G,[this].concat(oe)));return le._handleSwipeStart=le._handleSwipeStart.bind(le),le._handleSwipeMove=le._handleSwipeMove.bind(le),le._handleSwipeEnd=le._handleSwipeEnd.bind(le),le._onMouseDown=le._onMouseDown.bind(le),le._onMouseMove=le._onMouseMove.bind(le),le._onMouseUp=le._onMouseUp.bind(le),le._setSwiperRef=le._setSwiperRef.bind(le),le}return I(F,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,U({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,U({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(te){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(te))}},{key:"_onMouseMove",value:function(te){this.mouseDown&&this._handleSwipeMove(te)}},{key:"_onMouseUp",value:function(te){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(te)}},{key:"_handleSwipeStart",value:function(te){var oe=Z(te),ae=oe.x,le=oe.y;this.moveStart={x:ae,y:le},this.props.onSwipeStart(te)}},{key:"_handleSwipeMove",value:function(te){if(this.moveStart){var oe=Z(te),ae=oe.x,le=oe.y,Ie=ae-this.moveStart.x,K=le-this.moveStart.y;this.moving=!0;var Ce=this.props.onSwipeMove({x:Ie,y:K},te);Ce&&te.cancelable&&te.preventDefault(),this.movePosition={deltaX:Ie,deltaY:K}}}},{key:"_handleSwipeEnd",value:function(te){this.props.onSwipeEnd(te);var oe=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-oe?this.props.onSwipeLeft(1,te):this.movePosition.deltaX>oe&&this.props.onSwipeRight(1,te),this.movePosition.deltaY<-oe?this.props.onSwipeUp(1,te):this.movePosition.deltaY>oe&&this.props.onSwipeDown(1,te)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(te){this.swiper=te,this.props.innerRef(te)}},{key:"render",value:function(){var te=this.props;te.tagName;var oe=te.className,ae=te.style,le=te.children;te.allowMouseEvents,te.onSwipeUp,te.onSwipeDown,te.onSwipeLeft,te.onSwipeRight,te.onSwipeStart,te.onSwipeMove,te.onSwipeEnd,te.innerRef,te.tolerance;var Ie=b(te,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return a.default.createElement(this.props.tagName,l({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:oe,style:ae},Ie),le)}}]),F}(n.Component);D.displayName="ReactSwipe",D.propTypes={tagName:c.default.string,className:c.default.string,style:c.default.object,children:c.default.node,allowMouseEvents:c.default.bool,onSwipeUp:c.default.func,onSwipeDown:c.default.func,onSwipeLeft:c.default.func,onSwipeRight:c.default.func,onSwipeStart:c.default.func,onSwipeMove:c.default.func,onSwipeEnd:c.default.func,innerRef:c.default.func,tolerance:c.default.number.isRequired},D.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=D})}(Gx)),Gx}(function(e){(function(t,n){n(e,uG())})(Lw,function(t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=a(n);function a(c){return c&&c.__esModule?c:{default:c}}t.default=r.default})})(kS);var tg={},U4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var c="",h=0;h<arguments.length;h++){var l=arguments[h];l&&(c=a(c,r(l)))}return c}function r(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return n.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var h="";for(var l in c)t.call(c,l)&&c[l]&&(h=a(h,l));return h}function a(c,h){return h?c?c+" "+h:c+h:c}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(U4);var cG=U4.exports;Object.defineProperty(tg,"__esModule",{value:!0});tg.default=void 0;var Kl=dG(cG);function dG(e){return e&&e.__esModule?e:{default:e}}function hG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pG={ROOT:function(t){return(0,Kl.default)(hG({"carousel-root":!0},t||"",!!t))},CAROUSEL:function(t){return(0,Kl.default)({carousel:!0,"carousel-slider":t})},WRAPPER:function(t,n){return(0,Kl.default)({"thumbs-wrapper":!t,"slider-wrapper":t,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(t,n){return(0,Kl.default)({thumbs:!t,slider:t,animated:!n})},ITEM:function(t,n,r){return(0,Kl.default)({thumb:!t,slide:t,selected:n,previous:r})},ARROW_PREV:function(t){return(0,Kl.default)({"control-arrow control-prev":!0,"control-disabled":t})},ARROW_NEXT:function(t){return(0,Kl.default)({"control-arrow control-next":!0,"control-disabled":t})},DOT:function(t){return(0,Kl.default)({dot:!0,selected:t})}};tg.default=pG;var ng={},R1={};Object.defineProperty(R1,"__esModule",{value:!0});R1.outerWidth=void 0;var fG=function(t){var n=t.offsetWidth,r=getComputedStyle(t);return n+=parseInt(r.marginLeft)+parseInt(r.marginRight),n};R1.outerWidth=fG;var Jh={};Object.defineProperty(Jh,"__esModule",{value:!0});Jh.default=void 0;var mG=function(t,n,r){var a=t===0?t:t+n,c=r==="horizontal"?[a,0,0]:[0,a,0],h="translate3d",l="("+c.join(",")+")";return h+l};Jh.default=mG;var rg={};Object.defineProperty(rg,"__esModule",{value:!0});rg.default=void 0;var gG=function(){return window};rg.default=gG;Object.defineProperty(ng,"__esModule",{value:!0});ng.default=void 0;var Ua=_G(ne),ic=z1(tg),yG=R1,nI=z1(Jh),vG=z1(kS),Uy=z1(rg);function z1(e){return e&&e.__esModule?e:{default:e}}function V4(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return V4=function(){return e},e}function _G(e){if(e&&e.__esModule)return e;if(e===null||tm(e)!=="object"&&typeof e!="function")return{default:e};var t=V4();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=r?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function tm(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tm=function(n){return typeof n}:tm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tm(e)}function Iw(){return Iw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Iw.apply(this,arguments)}function xG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wG(e,t,n){return t&&bG(e.prototype,t),e}function SG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pw(e,t)}function Pw(e,t){return Pw=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Pw(e,t)}function CG(e){var t=EG();return function(){var r=mv(e),a;if(t){var c=mv(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return kG(this,a)}}function kG(e,t){return t&&(tm(t)==="object"||typeof t=="function")?t:so(e)}function so(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function mv(e){return mv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},mv(e)}function Gi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TG=function(t){return t.hasOwnProperty("key")},ES=function(e){SG(n,e);var t=CG(n);function n(r){var a;return xG(this,n),a=t.call(this,r),Gi(so(a),"itemsWrapperRef",void 0),Gi(so(a),"itemsListRef",void 0),Gi(so(a),"thumbsRef",void 0),Gi(so(a),"setItemsWrapperRef",function(c){a.itemsWrapperRef=c}),Gi(so(a),"setItemsListRef",function(c){a.itemsListRef=c}),Gi(so(a),"setThumbsRef",function(c,h){a.thumbsRef||(a.thumbsRef=[]),a.thumbsRef[h]=c}),Gi(so(a),"updateSizes",function(){if(!(!a.props.children||!a.itemsWrapperRef||!a.thumbsRef)){var c=Ua.Children.count(a.props.children),h=a.itemsWrapperRef.clientWidth,l=a.props.thumbWidth?a.props.thumbWidth:(0,yG.outerWidth)(a.thumbsRef[0]),b=Math.floor(h/l),w=b<c,I=w?c-b:0;a.setState(function(k,P){return{itemSize:l,visibleItems:b,firstItem:w?a.getFirstItem(P.selectedItem):0,lastPosition:I,showArrows:w}})}}),Gi(so(a),"handleClickItem",function(c,h,l){if(!TG(l)||l.key==="Enter"){var b=a.props.onSelectItem;typeof b=="function"&&b(c,h)}}),Gi(so(a),"onSwipeStart",function(){a.setState({swiping:!0})}),Gi(so(a),"onSwipeEnd",function(){a.setState({swiping:!1})}),Gi(so(a),"onSwipeMove",function(c){var h=c.x;if(!a.state.itemSize||!a.itemsWrapperRef||!a.state.visibleItems)return!1;var l=0,b=Ua.Children.count(a.props.children),w=-(a.state.firstItem*100)/a.state.visibleItems,I=Math.max(b-a.state.visibleItems,0),k=-I*100/a.state.visibleItems;w===l&&h>0&&(h=0),w===k&&h<0&&(h=0);var P=a.itemsWrapperRef.clientWidth,R=w+100/(P/h);return a.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function($){a.itemsListRef.style[$]=(0,nI.default)(R,"%",a.props.axis)}),!0}),Gi(so(a),"slideRight",function(c){a.moveTo(a.state.firstItem-(typeof c=="number"?c:1))}),Gi(so(a),"slideLeft",function(c){a.moveTo(a.state.firstItem+(typeof c=="number"?c:1))}),Gi(so(a),"moveTo",function(c){c=c<0?0:c,c=c>=a.state.lastPosition?a.state.lastPosition:c,a.setState({firstItem:c})}),a.state={selectedItem:r.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},a}return wG(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(a){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==a.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,Uy.default)().addEventListener("resize",this.updateSizes),(0,Uy.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,Uy.default)().removeEventListener("resize",this.updateSizes),(0,Uy.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(a){var c=a;return a>=this.state.lastPosition&&(c=this.state.lastPosition),a<this.state.firstItem+this.state.visibleItems&&(c=this.state.firstItem),a<this.state.firstItem&&(c=a),c}},{key:"renderItems",value:function(){var a=this;return this.props.children.map(function(c,h){var l=ic.default.ITEM(!1,h===a.state.selectedItem),b={key:h,ref:function(I){return a.setThumbsRef(I,h)},className:l,onClick:a.handleClickItem.bind(a,h,a.props.children[h]),onKeyDown:a.handleClickItem.bind(a,h,a.props.children[h]),"aria-label":"".concat(a.props.labels.item," ").concat(h+1),style:{width:a.props.thumbWidth}};return Ua.default.createElement("li",Iw({},b,{role:"button",tabIndex:0}),c)})}},{key:"render",value:function(){var a=this;if(!this.props.children)return null;var c=Ua.Children.count(this.props.children)>1,h=this.state.showArrows&&this.state.firstItem>0,l=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,b={},w=-this.state.firstItem*(this.state.itemSize||0),I=(0,nI.default)(w,"px",this.props.axis),k=this.props.transitionTime+"ms";return b={WebkitTransform:I,MozTransform:I,MsTransform:I,OTransform:I,transform:I,msTransform:I,WebkitTransitionDuration:k,MozTransitionDuration:k,MsTransitionDuration:k,OTransitionDuration:k,transitionDuration:k,msTransitionDuration:k},Ua.default.createElement("div",{className:ic.default.CAROUSEL(!1)},Ua.default.createElement("div",{className:ic.default.WRAPPER(!1),ref:this.setItemsWrapperRef},Ua.default.createElement("button",{type:"button",className:ic.default.ARROW_PREV(!h),onClick:function(){return a.slideRight()},"aria-label":this.props.labels.leftArrow}),c?Ua.default.createElement(vG.default,{tagName:"ul",className:ic.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:b,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):Ua.default.createElement("ul",{className:ic.default.SLIDER(!1,this.state.swiping),ref:function(R){return a.setItemsListRef(R)},style:b},this.renderItems()),Ua.default.createElement("button",{type:"button",className:ic.default.ARROW_NEXT(!l),onClick:function(){return a.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(Ua.Component);ng.default=ES;Gi(ES,"displayName","Thumbs");Gi(ES,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var D1={};Object.defineProperty(D1,"__esModule",{value:!0});D1.default=void 0;var IG=function(){return document};D1.default=IG;var ta={};Object.defineProperty(ta,"__esModule",{value:!0});ta.setPosition=ta.getPosition=ta.isKeyboardEvent=ta.defaultStatusFormatter=ta.noop=void 0;var PG=ne,MG=AG(Jh);function AG(e){return e&&e.__esModule?e:{default:e}}var LG=function(){};ta.noop=LG;var RG=function(t,n){return"".concat(t," of ").concat(n)};ta.defaultStatusFormatter=RG;var zG=function(t){return t?t.hasOwnProperty("key"):!1};ta.isKeyboardEvent=zG;var DG=function(t,n){if(n.infiniteLoop&&++t,t===0)return 0;var r=PG.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var a=-t*n.centerSlidePercentage,c=r-1;return t&&(t!==c||n.infiniteLoop)?a+=(100-n.centerSlidePercentage)/2:t===c&&(a+=100-n.centerSlidePercentage),a}return-t*100};ta.getPosition=DG;var $G=function(t,n){var r={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(a){r[a]=(0,MG.default)(t,"%",n)}),r};ta.setPosition=$G;var vs={};Object.defineProperty(vs,"__esModule",{value:!0});vs.fadeAnimationHandler=vs.slideStopSwipingHandler=vs.slideSwipeAnimationHandler=vs.slideAnimationHandler=void 0;var W4=ne,OG=BG(Jh),_s=ta;function BG(e){return e&&e.__esModule?e:{default:e}}function rI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rI(Object(n),!0).forEach(function(r){FG(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function FG(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var NG=function(t,n){var r={},a=n.selectedItem,c=a,h=W4.Children.count(t.children)-1,l=t.infiniteLoop&&(a<0||a>h);if(l)return c<0?t.centerMode&&t.centerSlidePercentage&&t.axis==="horizontal"?r.itemListStyle=(0,_s.setPosition)(-(h+2)*t.centerSlidePercentage-(100-t.centerSlidePercentage)/2,t.axis):r.itemListStyle=(0,_s.setPosition)(-(h+2)*100,t.axis):c>h&&(r.itemListStyle=(0,_s.setPosition)(0,t.axis)),r;var b=(0,_s.getPosition)(a,t),w=(0,OG.default)(b,"%",t.axis),I=t.transitionTime+"ms";return r.itemListStyle={WebkitTransform:w,msTransform:w,OTransform:w,transform:w},n.swiping||(r.itemListStyle=hc(hc({},r.itemListStyle),{},{WebkitTransitionDuration:I,MozTransitionDuration:I,OTransitionDuration:I,transitionDuration:I,msTransitionDuration:I})),r};vs.slideAnimationHandler=NG;var jG=function(t,n,r,a){var c={},h=n.axis==="horizontal",l=W4.Children.count(n.children),b=0,w=(0,_s.getPosition)(r.selectedItem,n),I=n.infiniteLoop?(0,_s.getPosition)(l-1,n)-100:(0,_s.getPosition)(l-1,n),k=h?t.x:t.y,P=k;w===b&&k>0&&(P=0),w===I&&k<0&&(P=0);var R=w+100/(r.itemSize/P),$=Math.abs(k)>n.swipeScrollTolerance;return n.infiniteLoop&&$&&(r.selectedItem===0&&R>-100?R-=l*100:r.selectedItem===l-1&&R<-l*100&&(R+=l*100)),(!n.preventMovementUntilSwipeScrollTolerance||$||r.swipeMovementStarted)&&(r.swipeMovementStarted||a({swipeMovementStarted:!0}),c.itemListStyle=(0,_s.setPosition)(R,n.axis)),$&&!r.cancelClick&&a({cancelClick:!0}),c};vs.slideSwipeAnimationHandler=jG;var UG=function(t,n){var r=(0,_s.getPosition)(n.selectedItem,t),a=(0,_s.setPosition)(r,t.axis);return{itemListStyle:a}};vs.slideStopSwipingHandler=UG;var VG=function(t,n){var r=t.transitionTime+"ms",a="ease-in-out",c={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:a,msTransitionTimingFunction:a,MozTransitionTimingFunction:a,WebkitTransitionTimingFunction:a,OTransitionTimingFunction:a};return n.swiping||(c=hc(hc({},c),{},{WebkitTransitionDuration:r,MozTransitionDuration:r,OTransitionDuration:r,transitionDuration:r,msTransitionDuration:r})),{slideStyle:c,selectedStyle:hc(hc({},c),{},{opacity:1,position:"relative"}),prevStyle:hc({},c)}};vs.fadeAnimationHandler=VG;Object.defineProperty(L1,"__esModule",{value:!0});L1.default=void 0;var Hn=HG(ne),WG=ig(kS),Xs=ig(tg),qG=ig(ng),Vy=ig(D1),Wy=ig(rg),Bf=ta,gv=vs;function ig(e){return e&&e.__esModule?e:{default:e}}function q4(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return q4=function(){return e},e}function HG(e){if(e&&e.__esModule)return e;if(e===null||nm(e)!=="object"&&typeof e!="function")return{default:e};var t=q4();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=r?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function nm(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nm=function(n){return typeof n}:nm=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nm(e)}function Mw(){return Mw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mw.apply(this,arguments)}function iI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Va(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iI(Object(n),!0).forEach(function(r){hn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function GG(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZG(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KG(e,t,n){return t&&ZG(e.prototype,t),e}function XG(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aw(e,t)}function Aw(e,t){return Aw=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Aw(e,t)}function YG(e){var t=QG();return function(){var r=yv(e),a;if(t){var c=yv(this).constructor;a=Reflect.construct(r,arguments,c)}else a=r.apply(this,arguments);return JG(this,a)}}function JG(e,t){return t&&(nm(t)==="object"||typeof t=="function")?t:gn(e)}function gn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QG(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function yv(e){return yv=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yv(e)}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var TS=function(e){XG(n,e);var t=YG(n);function n(r){var a;GG(this,n),a=t.call(this,r),hn(gn(a),"thumbsRef",void 0),hn(gn(a),"carouselWrapperRef",void 0),hn(gn(a),"listRef",void 0),hn(gn(a),"itemsRef",void 0),hn(gn(a),"timer",void 0),hn(gn(a),"animationHandler",void 0),hn(gn(a),"setThumbsRef",function(h){a.thumbsRef=h}),hn(gn(a),"setCarouselWrapperRef",function(h){a.carouselWrapperRef=h}),hn(gn(a),"setListRef",function(h){a.listRef=h}),hn(gn(a),"setItemsRef",function(h,l){a.itemsRef||(a.itemsRef=[]),a.itemsRef[l]=h}),hn(gn(a),"autoPlay",function(){Hn.Children.count(a.props.children)<=1||(a.clearAutoPlay(),a.props.autoPlay&&(a.timer=setTimeout(function(){a.increment()},a.props.interval)))}),hn(gn(a),"clearAutoPlay",function(){a.timer&&clearTimeout(a.timer)}),hn(gn(a),"resetAutoPlay",function(){a.clearAutoPlay(),a.autoPlay()}),hn(gn(a),"stopOnHover",function(){a.setState({isMouseEntered:!0},a.clearAutoPlay)}),hn(gn(a),"startOnLeave",function(){a.setState({isMouseEntered:!1},a.autoPlay)}),hn(gn(a),"isFocusWithinTheCarousel",function(){return a.carouselWrapperRef?!!((0,Vy.default)().activeElement===a.carouselWrapperRef||a.carouselWrapperRef.contains((0,Vy.default)().activeElement)):!1}),hn(gn(a),"navigateWithKeyboard",function(h){if(a.isFocusWithinTheCarousel()){var l=a.props.axis,b=l==="horizontal",w={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},I=b?w.ArrowRight:w.ArrowDown,k=b?w.ArrowLeft:w.ArrowUp;I===h.keyCode?a.increment():k===h.keyCode&&a.decrement()}}),hn(gn(a),"updateSizes",function(){if(!(!a.state.initialized||!a.itemsRef||a.itemsRef.length===0)){var h=a.props.axis==="horizontal",l=a.itemsRef[0];if(l){var b=h?l.clientWidth:l.clientHeight;a.setState({itemSize:b}),a.thumbsRef&&a.thumbsRef.updateSizes()}}}),hn(gn(a),"setMountState",function(){a.setState({hasMount:!0}),a.updateSizes()}),hn(gn(a),"handleClickItem",function(h,l){if(Hn.Children.count(a.props.children)!==0){if(a.state.cancelClick){a.setState({cancelClick:!1});return}a.props.onClickItem(h,l),h!==a.state.selectedItem&&a.setState({selectedItem:h})}}),hn(gn(a),"handleOnChange",function(h,l){Hn.Children.count(a.props.children)<=1||a.props.onChange(h,l)}),hn(gn(a),"handleClickThumb",function(h,l){a.props.onClickThumb(h,l),a.moveTo(h)}),hn(gn(a),"onSwipeStart",function(h){a.setState({swiping:!0}),a.props.onSwipeStart(h)}),hn(gn(a),"onSwipeEnd",function(h){a.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),a.props.onSwipeEnd(h),a.clearAutoPlay(),a.state.autoPlay&&a.autoPlay()}),hn(gn(a),"onSwipeMove",function(h,l){a.props.onSwipeMove(l);var b=a.props.swipeAnimationHandler(h,a.props,a.state,a.setState.bind(gn(a)));return a.setState(Va({},b)),!!Object.keys(b).length}),hn(gn(a),"decrement",function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;a.moveTo(a.state.selectedItem-(typeof h=="number"?h:1))}),hn(gn(a),"increment",function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;a.moveTo(a.state.selectedItem+(typeof h=="number"?h:1))}),hn(gn(a),"moveTo",function(h){if(typeof h=="number"){var l=Hn.Children.count(a.props.children)-1;h<0&&(h=a.props.infiniteLoop?l:0),h>l&&(h=a.props.infiniteLoop?0:l),a.selectItem({selectedItem:h}),a.state.autoPlay&&a.state.isMouseEntered===!1&&a.resetAutoPlay()}}),hn(gn(a),"onClickNext",function(){a.increment(1)}),hn(gn(a),"onClickPrev",function(){a.decrement(1)}),hn(gn(a),"onSwipeForward",function(){a.increment(1),a.props.emulateTouch&&a.setState({cancelClick:!0})}),hn(gn(a),"onSwipeBackwards",function(){a.decrement(1),a.props.emulateTouch&&a.setState({cancelClick:!0})}),hn(gn(a),"changeItem",function(h){return function(l){(!(0,Bf.isKeyboardEvent)(l)||l.key==="Enter")&&a.moveTo(h)}}),hn(gn(a),"selectItem",function(h){a.setState(Va({previousItem:a.state.selectedItem},h),function(){a.setState(a.animationHandler(a.props,a.state))}),a.handleOnChange(h.selectedItem,Hn.Children.toArray(a.props.children)[h.selectedItem])}),hn(gn(a),"getInitialImage",function(){var h=a.props.selectedItem,l=a.itemsRef&&a.itemsRef[h],b=l&&l.getElementsByTagName("img")||[];return b[0]}),hn(gn(a),"getVariableItemHeight",function(h){var l=a.itemsRef&&a.itemsRef[h];if(a.state.hasMount&&l&&l.children.length){var b=l.children[0].getElementsByTagName("img")||[];if(b.length>0){var w=b[0];if(!w.complete){var I=function R(){a.forceUpdate(),w.removeEventListener("load",R)};w.addEventListener("load",I)}}var k=b[0]||l.children[0],P=k.clientHeight;return P>0?P:null}return null});var c={initialized:!1,previousItem:r.selectedItem,selectedItem:r.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:r.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return a.animationHandler=typeof r.animationHandler=="function"&&r.animationHandler||r.animationHandler==="fade"&&gv.fadeAnimationHandler||gv.slideAnimationHandler,a.state=Va(Va({},c),a.animationHandler(r,c)),a}return KG(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(a,c){!a.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!a.autoFocus&&this.props.autoFocus&&this.forceFocus(),c.swiping&&!this.state.swiping&&this.setState(Va({},this.props.stopSwipingHandler(this.props,this.state))),(a.selectedItem!==this.props.selectedItem||a.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),a.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var a=this;this.bindEvents(),this.state.autoPlay&&Hn.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var c=a.getInitialImage();c&&!c.complete?c.addEventListener("load",a.setMountState):a.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var a=this.carouselWrapperRef;this.props.stopOnHover&&a&&(a.addEventListener("mouseenter",this.stopOnHover),a.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var a=this.carouselWrapperRef;this.props.stopOnHover&&a&&(a.removeEventListener("mouseenter",this.stopOnHover),a.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,Wy.default)().addEventListener("resize",this.updateSizes),(0,Wy.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,Vy.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,Wy.default)().removeEventListener("resize",this.updateSizes),(0,Wy.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var a=this.getInitialImage();a&&a.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,Vy.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var a;(a=this.carouselWrapperRef)===null||a===void 0||a.focus()}},{key:"renderItems",value:function(a){var c=this;return this.props.children?Hn.Children.map(this.props.children,function(h,l){var b=l===c.state.selectedItem,w=l===c.state.previousItem,I=b&&c.state.selectedStyle||w&&c.state.prevStyle||c.state.slideStyle||{};c.props.centerMode&&c.props.axis==="horizontal"&&(I=Va(Va({},I),{},{minWidth:c.props.centerSlidePercentage+"%"})),c.state.swiping&&c.state.swipeMovementStarted&&(I=Va(Va({},I),{},{pointerEvents:"none"}));var k={ref:function(R){return c.setItemsRef(R,l)},key:"itemKey"+l+(a?"clone":""),className:Xs.default.ITEM(!0,l===c.state.selectedItem,l===c.state.previousItem),onClick:c.handleClickItem.bind(c,l,h),style:I};return Hn.default.createElement("li",k,c.props.renderItem(h,{isSelected:l===c.state.selectedItem,isPrevious:l===c.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var a=this,c=this.props,h=c.showIndicators,l=c.labels,b=c.renderIndicator,w=c.children;return h?Hn.default.createElement("ul",{className:"control-dots"},Hn.Children.map(w,function(I,k){return b&&b(a.changeItem(k),k===a.state.selectedItem,k,l.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?Hn.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,Hn.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||Hn.Children.count(this.props.children)===0?null:Hn.default.createElement(qG.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var a=this;if(!this.props.children||Hn.Children.count(this.props.children)===0)return null;var c=this.props.swipeable&&Hn.Children.count(this.props.children)>1,h=this.props.axis==="horizontal",l=this.props.showArrows&&Hn.Children.count(this.props.children)>1,b=l&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,w=l&&(this.state.selectedItem<Hn.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,I=this.renderItems(!0),k=I.shift(),P=I.pop(),R={className:Xs.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},$={};if(h){if(R.onSwipeLeft=this.onSwipeForward,R.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var U=this.getVariableItemHeight(this.state.selectedItem);$.height=U||"auto"}}else R.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,R.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,R.style=Va(Va({},R.style),{},{height:this.state.itemSize}),$.height=this.state.itemSize;return Hn.default.createElement("div",{"aria-label":this.props.ariaLabel,className:Xs.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},Hn.default.createElement("div",{className:Xs.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,b,this.props.labels.leftArrow),Hn.default.createElement("div",{className:Xs.default.WRAPPER(!0,this.props.axis),style:$},c?Hn.default.createElement(WG.default,Mw({tagName:"ul",innerRef:this.setListRef},R,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&P,this.renderItems(),this.props.infiniteLoop&&k):Hn.default.createElement("ul",{className:Xs.default.SLIDER(!0,this.state.swiping),ref:function(D){return a.setListRef(D)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&P,this.renderItems(),this.props.infiniteLoop&&k)),this.props.renderArrowNext(this.onClickNext,w,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(Hn.default.Component);L1.default=TS;hn(TS,"displayName","Carousel");hn(TS,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:Bf.noop,onClickThumb:Bf.noop,onChange:Bf.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(t,n,r){return Hn.default.createElement("button",{type:"button","aria-label":r,className:Xs.default.ARROW_PREV(!n),onClick:t})},renderArrowNext:function(t,n,r){return Hn.default.createElement("button",{type:"button","aria-label":r,className:Xs.default.ARROW_NEXT(!n),onClick:t})},renderIndicator:function(t,n,r,a){return Hn.default.createElement("li",{className:Xs.default.DOT(n),onClick:t,onKeyDown:t,value:r,key:r,role:"button",tabIndex:0,"aria-label":"".concat(a," ").concat(r+1)})},renderItem:function(t){return t},renderThumbs:function(t){var n=Hn.Children.map(t,function(r){var a=r;if(r.type!=="img"&&(a=Hn.Children.toArray(r.props.children).find(function(c){return c.type==="img"})),!!a)return a});return n.filter(function(r){return r}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:Bf.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:gv.slideSwipeAnimationHandler,stopSwipingHandler:gv.slideStopSwipingHandler});var eZ={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return r.default}});var t=a(L1),n=eZ,r=a(ng);function a(c){return c&&c.__esModule?c:{default:c}}})(j4);const H4=({store:e,onBack:t})=>se.jsxs(se.Fragment,{children:[se.jsxs(NW,{variant:"extended",onClick:t,sx:{bgcolor:"#777AA9",color:"#ffffff"},children:[se.jsx(oG,{sx:{mr:1}}),"Back to List"]}),se.jsx(mu,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pt:2},children:se.jsxs(Yh,{sx:{width:"100%",maxWidth:800,padding:3,borderRadius:2,boxShadow:3,backgroundColor:"#ffffff"},children:[se.jsx(qr,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#333",textAlign:"left",mb:2},children:e.name}),e.images&&e.images.length>0&&se.jsx(mu,{sx:{mb:3},children:se.jsx(j4.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,children:e.images.map((n,r)=>se.jsx("div",{children:se.jsx("img",{src:n,alt:`Store Image ${r+1}`,style:{borderRadius:"8px",maxHeight:"300px",objectFit:"cover",width:"100%"}})},r))})}),se.jsxs(mu,{sx:{textAlign:"left",mb:3},children:[se.jsxs(qr,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left",mb:1},children:[se.jsx(aG,{sx:{mr:1,color:"#2196f3"}})," ",e.location]}),e.phone&&se.jsxs(qr,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left",mb:1},children:[se.jsx(sG,{sx:{mr:1,color:"#2196f3"}})," ",e.phone]}),e.hours&&se.jsxs(qr,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left"},children:[se.jsx(lG,{sx:{mr:1,color:"#2196f3"}})," ",e.hours]})]}),e.description&&se.jsx(qr,{variant:"body1",sx:{fontStyle:"italic",color:"#666",mb:4,textAlign:"left"},children:e.description})]})})]});H4.propTypes={store:Hs.shape({name:Hs.string.isRequired,location:Hs.string.isRequired,phone:Hs.string,hours:Hs.string,description:Hs.string,images:Hs.arrayOf(Hs.string)}).isRequired,onBack:Hs.func};const tZ=wi([se.jsx("path",{d:"M21 9.02c0 1.09-.89 1.98-1.98 1.98H4.98C3.89 11 3 10.11 3 9.02H1c0 1.86 1.28 3.4 3 3.84V22h6v-3c0-1.1.9-2 2-2s2 .9 2 2v3h6v-9.14c.55-.14 3-1.04 3-3.86z"},"0"),se.jsx("path",{d:"M6 8.86V10h12V8.86c.55-.14 3-1.04 3-3.86l-2 .02C19 6.11 18.11 7 17.02 7H6.98C5.89 7 5 6.11 5 5.02H3c0 1.85 1.28 3.4 3 3.84"},"1"),se.jsx("path",{d:"M12 1 8.25 6h7.5z"},"2")],"TempleBuddhist"),nZ=wi(se.jsx("path",{d:"M19.56 11.36 13 8.44V7c0-.55-.45-1-1-1s-1-.45-1-1 .45-1 1-1 1 .45 1 1h2c0-1.84-1.66-3.3-3.56-2.95-1.18.22-2.15 1.17-2.38 2.35-.3 1.56.6 2.94 1.94 3.42v.63l-6.56 2.92c-.88.38-1.44 1.25-1.44 2.2v.01C3 14.92 4.08 16 5.42 16H7v6h10v-6h1.58c1.34 0 2.42-1.08 2.42-2.42v-.01c0-.95-.56-1.82-1.44-2.21M18.58 14H17v-1H7v1H5.42c-.23 0-.42-.19-.42-.43 0-.17.1-.32.25-.38l6.75-3 6.75 3c.15.07.25.22.25.39 0 .23-.19.42-.42.42"}),"DryCleaning"),rZ=wi(se.jsx("path",{d:"M3 14c0 1.3.84 2.4 2 2.82V20H3v2h6v-2H7v-3.18C8.16 16.4 9 15.3 9 14V6H3zm2-6h2v3H5zm15.63.54-.95-.32c-.4-.13-.68-.51-.68-.94V3c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1v4.28c0 .43-.28.81-.68.95l-.95.32c-.82.27-1.37 1.03-1.37 1.89V20c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-9.56c0-.86-.55-1.62-1.37-1.9M16 4h1v1h-1zm-3 6.44.95-.32C15.18 9.72 16 8.57 16 7.28V7h1v.28c0 1.29.82 2.44 2.05 2.85l.95.31V12h-7zM20 20h-7v-2h7z"}),"Liquor"),oI=wi(se.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),iZ=()=>{const e=[{id:1,name:"Traditional Tea Sets Anzuri",location:"123 Shibuya, Tokyo",description:"Authentic Japanese tea sets",phone:"+12 345 343 44 15",icon:se.jsx(tZ,{})},{id:2,name:"Tokyo Souvenir Mimoto",location:"456 Akihabara, Tokyo",description:"Best souvenirs in Tokyo",icon:se.jsx(eI,{})},{id:3,name:"HIto Dress",location:"53 Akihabara, Tokyo",description:"Beautiful traditional kimonos",icon:se.jsx(nZ,{}),image:"https://lh5.googleusercontent.com/p/AF1QipOZ44YegxvN8SVFkN06gamqPNzFPmEu2as4HpA=w171-h171-n-k-no",image2:"https://lh5.googleusercontent.com/p/AF1QipOZ44YegxvN8SVFkN06gamqPNzFPmEu2as4HpA=w171-h171-n-k-no"}],t=[{id:4,name:"HSLU Merch",location:"1 Surstoffi, Rotkreuz",description:"High-quality samurai swords",icon:se.jsx(eI,{})},{id:5,name:"Sake Store Fujiwara",location:"101 Asakusa, Tokyo",description:"Best Sake in the world",icon:se.jsx(rZ,{})}],[n,r]=ne.useState(null),a=l=>{r(l)},c=()=>{r(null)},h=l=>se.jsxs(eW,{sx:{display:"flex",width:"100%",alignItems:"center",bgcolor:"#778DA9",color:"white",borderRadius:"20px",mb:1,p:2,cursor:"pointer","&:hover":{boxShadow:10}},onClick:()=>a(l),children:[se.jsx(I4,{sx:{bgcolor:"#374151",width:56,height:56,mr:2},children:l.icon}),se.jsxs(iW,{children:[se.jsx(qr,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:l.name}),se.jsx(qr,{variant:"body2",color:"withe",children:l.location}),se.jsx(qr,{variant:"body2",color:"withe",children:l.description})]})]},l.id);return se.jsx(mu,{sx:{p:3},children:n?se.jsx(H4,{store:n,onBack:c}):se.jsxs(se.Fragment,{children:[se.jsx(qr,{variant:"h5",sx:{textAlign:"center",mb:3,fontWeight:"bold",bgcolor:"#777AA9",color:"white",borderRadius:"20px"},children:"Liked Souvenir"}),se.jsx(L5,{icon:se.jsx(oI,{}),label:"Liked by You!",sx:{mb:3,fontWeight:"bold",fontSize:"14px"},color:"success"}),se.jsx(V5,{container:!0,spacing:2,children:e.map(h)}),se.jsx(L5,{icon:se.jsx(oI,{}),label:"Liked by yor friends!",sx:{mb:3,mt:3,fontWeight:"bold",fontSize:"14px"},color:"info",variant:"outlined"}),se.jsx(V5,{container:!0,spacing:2,children:t.map(h)})]})})},oZ=()=>{const[e,t]=ne.useState({locationHidden:!1,notificationsEnabled:!0,darkMode:!1,autoUpdates:!0}),n=r=>{t(a=>({...a,[r]:!a[r]}))};return se.jsxs(mu,{sx:{maxWidth:"600px",margin:"auto",padding:"20px",bgcolor:"background.paper",borderRadius:"8px",boxShadow:3},children:[se.jsx(qr,{variant:"h5",sx:{textAlign:"center",mb:3,fontWeight:"bold",bgcolor:"#777AA9",color:"white",borderRadius:"20px"},children:"Account Settings"}),se.jsx(ou,{sx:{mb:3}}),se.jsxs(L4,{children:[se.jsxs(By,{children:[se.jsx(Ny,{primary:"Hide Location",secondary:"Prevent others from seeing your location"}),se.jsx(Oy,{control:se.jsx(jy,{checked:e.locationHidden,onChange:()=>n("locationHidden"),color:"success"}),label:""})]}),se.jsx(ou,{}),se.jsxs(By,{children:[se.jsx(Ny,{primary:"Enable Notifications",secondary:"Receive notifications from the app"}),se.jsx(Oy,{control:se.jsx(jy,{checked:e.notificationsEnabled,onChange:()=>n("notificationsEnabled"),color:"success"}),label:""})]}),se.jsx(ou,{}),se.jsxs(By,{children:[se.jsx(Ny,{primary:"Dark Mode",secondary:"Use a dark theme for the app"}),se.jsx(Oy,{control:se.jsx(jy,{checked:e.darkMode,onChange:()=>n("darkMode"),color:"success"}),label:""})]}),se.jsx(ou,{}),se.jsxs(By,{children:[se.jsx(Ny,{primary:"Auto Updates",secondary:"Enable automatic app updates"}),se.jsx(Oy,{control:se.jsx(jy,{checked:e.autoUpdates,onChange:()=>n("autoUpdates"),color:"success"}),label:""})]})]})]})},aZ=()=>{const[e,t]=ne.useState(""),[n,r]=ne.useState(""),[a,c]=ne.useState(!1);ne.useEffect(()=>{const b=localStorage.getItem("username")||"User123",w=localStorage.getItem("email")||"user@example.com";t(b),r(w)},[]);const h=()=>{localStorage.setItem("username",e)},l=()=>{c(!0)};return se.jsxs(mu,{sx:{maxWidth:"600px",margin:"auto",padding:"20px",bgcolor:"background.paper",borderRadius:"8px",boxShadow:3},children:[se.jsx(qr,{variant:"h5",svariant:"h5",sx:{textAlign:"center",mb:3,fontWeight:"bold",bgcolor:"#777AA9",color:"white",borderRadius:"20px"},children:"Edit Profile"}),se.jsx(ou,{sx:{mb:3}}),se.jsx(v0,{label:"Username",fullWidth:!0,value:e,onChange:b=>t(b.target.value),variant:"outlined",sx:{mb:3}}),se.jsx(_c,{fullWidth:!0,onClick:h,variant:"outlined",sx:{color:"#778DA9",borderColor:"#778DA9",borderRadius:"20px",mb:"20px"},children:"Save new Username"}),se.jsxs(qr,{variant:"body1",sx:{mb:2},children:[se.jsx("strong",{children:"Email:"})," ",n]}),se.jsx(_c,{variant:"outlined",color:"secondary",fullWidth:!0,onClick:l,sx:{borderRadius:"20px"},children:"Change Password"}),se.jsx(RH,{open:a,autoHideDuration:3e3,onClose:()=>c(!1),children:se.jsx(YU,{onClose:()=>c(!1),severity:"success",sx:{width:"100%"},children:"Password reset email has been sent!"})})]})};function sZ(){const e=P2();return se.jsxs(se.Fragment,{children:[se.jsxs(n$,{children:[se.jsx(sc,{path:"foundhere/",element:se.jsx(qH,{})}),se.jsx(sc,{path:"/map",element:se.jsx(EN,{})}),se.jsx(sc,{path:"/profile",element:se.jsx(GH,{})}),se.jsx(sc,{path:"/liked",element:se.jsx(iZ,{})}),se.jsx(sc,{path:"/account-settings",element:se.jsx(oZ,{})}),se.jsx(sc,{path:"/edit-profile",element:se.jsx(aZ,{})})]}),e.pathname!=="/foundhere/"&&se.jsx(iG,{})]})}Zx.createRoot(document.getElementById("root")).render(se.jsx(_i.StrictMode,{children:se.jsx(o$,{children:se.jsx(sZ,{})})}));
