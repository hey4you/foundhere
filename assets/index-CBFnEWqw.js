var wz=Object.defineProperty;var Sz=(e,t,n)=>t in e?wz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Yp=(e,t,n)=>Sz(e,typeof t!="symbol"?t+"":t,n);function W5(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const c=Object.getOwnPropertyDescriptor(i,a);c&&Object.defineProperty(e,a,c.get?c:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var _w=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Mm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q5={exports:{}},ev={},H5={exports:{}},mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am=Symbol.for("react.element"),Cz=Symbol.for("react.portal"),kz=Symbol.for("react.fragment"),Ez=Symbol.for("react.strict_mode"),Tz=Symbol.for("react.profiler"),Iz=Symbol.for("react.provider"),Pz=Symbol.for("react.context"),Mz=Symbol.for("react.forward_ref"),Az=Symbol.for("react.suspense"),Lz=Symbol.for("react.memo"),zz=Symbol.for("react.lazy"),QC=Symbol.iterator;function Rz(e){return e===null||typeof e!="object"?null:(e=QC&&e[QC]||e["@@iterator"],typeof e=="function"?e:null)}var G5={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z5=Object.assign,K5={};function Md(e,t,n){this.props=e,this.context=t,this.refs=K5,this.updater=n||G5}Md.prototype.isReactComponent={};Md.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Md.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function X5(){}X5.prototype=Md.prototype;function xw(e,t,n){this.props=e,this.context=t,this.refs=K5,this.updater=n||G5}var bw=xw.prototype=new X5;bw.constructor=xw;Z5(bw,Md.prototype);bw.isPureReactComponent=!0;var ek=Array.isArray,Y5=Object.prototype.hasOwnProperty,ww={current:null},J5={key:!0,ref:!0,__self:!0,__source:!0};function Q5(e,t,n){var i,a={},c=null,d=null;if(t!=null)for(i in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(c=""+t.key),t)Y5.call(t,i)&&!J5.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){for(var b=Array(u),w=0;w<u;w++)b[w]=arguments[w+2];a.children=b}if(e&&e.defaultProps)for(i in u=e.defaultProps,u)a[i]===void 0&&(a[i]=u[i]);return{$$typeof:Am,type:e,key:c,ref:d,props:a,_owner:ww.current}}function Dz(e,t){return{$$typeof:Am,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sw(e){return typeof e=="object"&&e!==null&&e.$$typeof===Am}function $z(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tk=/\/+/g;function D_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?$z(""+e.key):t.toString(36)}function Ay(e,t,n,i,a){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(c){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case Am:case Cz:d=!0}}if(d)return d=e,a=a(d),e=i===""?"."+D_(d,0):i,ek(a)?(n="",e!=null&&(n=e.replace(tk,"$&/")+"/"),Ay(a,t,n,"",function(w){return w})):a!=null&&(Sw(a)&&(a=Dz(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(tk,"$&/")+"/")+e)),t.push(a)),1;if(d=0,i=i===""?".":i+":",ek(e))for(var u=0;u<e.length;u++){c=e[u];var b=i+D_(c,u);d+=Ay(c,t,n,b,a)}else if(b=Rz(e),typeof b=="function")for(e=b.call(e),u=0;!(c=e.next()).done;)c=c.value,b=i+D_(c,u++),d+=Ay(c,t,n,b,a);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Jg(e,t,n){if(e==null)return e;var i=[],a=0;return Ay(e,i,"","",function(c){return t.call(n,c,a++)}),i}function Oz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var co={current:null},Ly={transition:null},Fz={ReactCurrentDispatcher:co,ReactCurrentBatchConfig:Ly,ReactCurrentOwner:ww};function eI(){throw Error("act(...) is not supported in production builds of React.")}mn.Children={map:Jg,forEach:function(e,t,n){Jg(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Jg(e,function(){t++}),t},toArray:function(e){return Jg(e,function(t){return t})||[]},only:function(e){if(!Sw(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mn.Component=Md;mn.Fragment=kz;mn.Profiler=Tz;mn.PureComponent=xw;mn.StrictMode=Ez;mn.Suspense=Az;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fz;mn.act=eI;mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=Z5({},e.props),a=e.key,c=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,d=ww.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)Y5.call(t,b)&&!J5.hasOwnProperty(b)&&(i[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)i.children=n;else if(1<b){u=Array(b);for(var w=0;w<b;w++)u[w]=arguments[w+2];i.children=u}return{$$typeof:Am,type:e.type,key:a,ref:c,props:i,_owner:d}};mn.createContext=function(e){return e={$$typeof:Pz,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Iz,_context:e},e.Consumer=e};mn.createElement=Q5;mn.createFactory=function(e){var t=Q5.bind(null,e);return t.type=e,t};mn.createRef=function(){return{current:null}};mn.forwardRef=function(e){return{$$typeof:Mz,render:e}};mn.isValidElement=Sw;mn.lazy=function(e){return{$$typeof:zz,_payload:{_status:-1,_result:e},_init:Oz}};mn.memo=function(e,t){return{$$typeof:Lz,type:e,compare:t===void 0?null:t}};mn.startTransition=function(e){var t=Ly.transition;Ly.transition={};try{e()}finally{Ly.transition=t}};mn.unstable_act=eI;mn.useCallback=function(e,t){return co.current.useCallback(e,t)};mn.useContext=function(e){return co.current.useContext(e)};mn.useDebugValue=function(){};mn.useDeferredValue=function(e){return co.current.useDeferredValue(e)};mn.useEffect=function(e,t){return co.current.useEffect(e,t)};mn.useId=function(){return co.current.useId()};mn.useImperativeHandle=function(e,t,n){return co.current.useImperativeHandle(e,t,n)};mn.useInsertionEffect=function(e,t){return co.current.useInsertionEffect(e,t)};mn.useLayoutEffect=function(e,t){return co.current.useLayoutEffect(e,t)};mn.useMemo=function(e,t){return co.current.useMemo(e,t)};mn.useReducer=function(e,t,n){return co.current.useReducer(e,t,n)};mn.useRef=function(e){return co.current.useRef(e)};mn.useState=function(e){return co.current.useState(e)};mn.useSyncExternalStore=function(e,t,n){return co.current.useSyncExternalStore(e,t,n)};mn.useTransition=function(){return co.current.useTransition()};mn.version="18.3.1";H5.exports=mn;var ie=H5.exports;const yi=Mm(ie),r0=W5({__proto__:null,default:yi},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bz=ie,Nz=Symbol.for("react.element"),jz=Symbol.for("react.fragment"),Uz=Object.prototype.hasOwnProperty,Vz=Bz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wz={key:!0,ref:!0,__self:!0,__source:!0};function tI(e,t,n){var i,a={},c=null,d=null;n!==void 0&&(c=""+n),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(d=t.ref);for(i in t)Uz.call(t,i)&&!Wz.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Nz,type:e,key:c,ref:d,props:a,_owner:Vz.current}}ev.Fragment=jz;ev.jsx=tI;ev.jsxs=tI;q5.exports=ev;var be=q5.exports,Rx={},nI={exports:{}},ea={},rI={exports:{}},iI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(De,qe){var pt=De.length;De.push(qe);e:for(;0<pt;){var Ct=pt-1>>>1,Lt=De[Ct];if(0<a(Lt,qe))De[Ct]=qe,De[pt]=Lt,pt=Ct;else break e}}function n(De){return De.length===0?null:De[0]}function i(De){if(De.length===0)return null;var qe=De[0],pt=De.pop();if(pt!==qe){De[0]=pt;e:for(var Ct=0,Lt=De.length,jt=Lt>>>1;Ct<jt;){var zt=2*(Ct+1)-1,Kt=De[zt],dn=zt+1,tn=De[dn];if(0>a(Kt,pt))dn<Lt&&0>a(tn,Kt)?(De[Ct]=tn,De[dn]=pt,Ct=dn):(De[Ct]=Kt,De[zt]=pt,Ct=zt);else if(dn<Lt&&0>a(tn,pt))De[Ct]=tn,De[dn]=pt,Ct=dn;else break e}}return qe}function a(De,qe){var pt=De.sortIndex-qe.sortIndex;return pt!==0?pt:De.id-qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var b=[],w=[],I=1,k=null,P=3,R=!1,N=!1,V=!1,X=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(De){for(var qe=n(w);qe!==null;){if(qe.callback===null)i(w);else if(qe.startTime<=De)i(w),qe.sortIndex=qe.expirationTime,t(b,qe);else break;qe=n(w)}}function G(De){if(V=!1,j(De),!N)if(n(b)!==null)N=!0,He(te);else{var qe=n(w);qe!==null&&at(G,qe.startTime-De)}}function te(De,qe){N=!1,V&&(V=!1,D(de),de=-1),R=!0;var pt=P;try{for(j(qe),k=n(b);k!==null&&(!(k.expirationTime>qe)||De&&!Ie());){var Ct=k.callback;if(typeof Ct=="function"){k.callback=null,P=k.priorityLevel;var Lt=Ct(k.expirationTime<=qe);qe=e.unstable_now(),typeof Lt=="function"?k.callback=Lt:k===n(b)&&i(b),j(qe)}else i(b);k=n(b)}if(k!==null)var jt=!0;else{var zt=n(w);zt!==null&&at(G,zt.startTime-qe),jt=!1}return jt}finally{k=null,P=pt,R=!1}}var oe=!1,ae=null,de=-1,Me=5,Z=-1;function Ie(){return!(e.unstable_now()-Z<Me)}function je(){if(ae!==null){var De=e.unstable_now();Z=De;var qe=!0;try{qe=ae(!0,De)}finally{qe?$e():(oe=!1,ae=null)}}else oe=!1}var $e;if(typeof B=="function")$e=function(){B(je)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,Oe=Le.port2;Le.port1.onmessage=je,$e=function(){Oe.postMessage(null)}}else $e=function(){X(je,0)};function He(De){ae=De,oe||(oe=!0,$e())}function at(De,qe){de=X(function(){De(e.unstable_now())},qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(De){De.callback=null},e.unstable_continueExecution=function(){N||R||(N=!0,He(te))},e.unstable_forceFrameRate=function(De){0>De||125<De?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<De?Math.floor(1e3/De):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(De){switch(P){case 1:case 2:case 3:var qe=3;break;default:qe=P}var pt=P;P=qe;try{return De()}finally{P=pt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(De,qe){switch(De){case 1:case 2:case 3:case 4:case 5:break;default:De=3}var pt=P;P=De;try{return qe()}finally{P=pt}},e.unstable_scheduleCallback=function(De,qe,pt){var Ct=e.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?Ct+pt:Ct):pt=Ct,De){case 1:var Lt=-1;break;case 2:Lt=250;break;case 5:Lt=1073741823;break;case 4:Lt=1e4;break;default:Lt=5e3}return Lt=pt+Lt,De={id:I++,callback:qe,priorityLevel:De,startTime:pt,expirationTime:Lt,sortIndex:-1},pt>Ct?(De.sortIndex=pt,t(w,De),n(b)===null&&De===n(w)&&(V?(D(de),de=-1):V=!0,at(G,pt-Ct))):(De.sortIndex=Lt,t(b,De),N||R||(N=!0,He(te))),De},e.unstable_shouldYield=Ie,e.unstable_wrapCallback=function(De){var qe=P;return function(){var pt=P;P=qe;try{return De.apply(this,arguments)}finally{P=pt}}}})(iI);rI.exports=iI;var qz=rI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hz=ie,Qo=qz;function Ye(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oI=new Set,Zf={};function Mc(e,t){_d(e,t),_d(e+"Capture",t)}function _d(e,t){for(Zf[e]=t,e=0;e<t.length;e++)oI.add(t[e])}var el=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dx=Object.prototype.hasOwnProperty,Gz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nk={},rk={};function Zz(e){return Dx.call(rk,e)?!0:Dx.call(nk,e)?!1:Gz.test(e)?rk[e]=!0:(nk[e]=!0,!1)}function Kz(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Xz(e,t,n,i){if(t===null||typeof t>"u"||Kz(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ho(e,t,n,i,a,c,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=d}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new ho(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new ho(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new ho(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new ho(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new ho(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new ho(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new ho(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new ho(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new ho(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cw=/[\-:]([a-z])/g;function kw(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cw,kw);Mi[t]=new ho(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cw,kw);Mi[t]=new ho(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cw,kw);Mi[t]=new ho(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new ho(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new ho("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new ho(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ew(e,t,n,i){var a=Mi.hasOwnProperty(t)?Mi[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Xz(t,n,a,i)&&(n=null),i||a===null?Zz(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,i=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var cl=Hz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qg=Symbol.for("react.element"),Uh=Symbol.for("react.portal"),Vh=Symbol.for("react.fragment"),Tw=Symbol.for("react.strict_mode"),$x=Symbol.for("react.profiler"),aI=Symbol.for("react.provider"),sI=Symbol.for("react.context"),Iw=Symbol.for("react.forward_ref"),Ox=Symbol.for("react.suspense"),Fx=Symbol.for("react.suspense_list"),Pw=Symbol.for("react.memo"),Zl=Symbol.for("react.lazy"),lI=Symbol.for("react.offscreen"),ik=Symbol.iterator;function Jp(e){return e===null||typeof e!="object"?null:(e=ik&&e[ik]||e["@@iterator"],typeof e=="function"?e:null)}var Ar=Object.assign,$_;function _f(e){if($_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$_=t&&t[1]||""}return`
`+$_+e}var O_=!1;function F_(e,t){if(!e||O_)return"";O_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var i=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){i=w}e.call(t.prototype)}else{try{throw Error()}catch(w){i=w}e()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),c=i.stack.split(`
`),d=a.length-1,u=c.length-1;1<=d&&0<=u&&a[d]!==c[u];)u--;for(;1<=d&&0<=u;d--,u--)if(a[d]!==c[u]){if(d!==1||u!==1)do if(d--,u--,0>u||a[d]!==c[u]){var b=`
`+a[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=u);break}}}finally{O_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?_f(e):""}function Yz(e){switch(e.tag){case 5:return _f(e.type);case 16:return _f("Lazy");case 13:return _f("Suspense");case 19:return _f("SuspenseList");case 0:case 2:case 15:return e=F_(e.type,!1),e;case 11:return e=F_(e.type.render,!1),e;case 1:return e=F_(e.type,!0),e;default:return""}}function Bx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Vh:return"Fragment";case Uh:return"Portal";case $x:return"Profiler";case Tw:return"StrictMode";case Ox:return"Suspense";case Fx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case sI:return(e.displayName||"Context")+".Consumer";case aI:return(e._context.displayName||"Context")+".Provider";case Iw:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pw:return t=e.displayName||null,t!==null?t:Bx(e.type)||"Memo";case Zl:t=e._payload,e=e._init;try{return Bx(e(t))}catch{}}return null}function Jz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bx(t);case 8:return t===Tw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function du(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function uI(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Qz(e){var t=uI(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,c=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){i=""+d,c.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ey(e){e._valueTracker||(e._valueTracker=Qz(e))}function cI(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=uI(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function i0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Nx(e,t){var n=t.checked;return Ar({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ok(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=du(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hI(e,t){t=t.checked,t!=null&&Ew(e,"checked",t,!1)}function jx(e,t){hI(e,t);var n=du(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ux(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ux(e,t.type,du(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ak(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ux(e,t,n){(t!=="number"||i0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var xf=Array.isArray;function nd(e,t,n,i){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&i&&(e[n].defaultSelected=!0)}else{for(n=""+du(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Vx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Ar({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function sk(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ye(92));if(xf(n)){if(1<n.length)throw Error(Ye(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:du(n)}}function dI(e,t){var n=du(t.value),i=du(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function lk(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function pI(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?pI(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ty,fI=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ty=ty||document.createElement("div"),ty.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ty.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Mf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eR=["Webkit","ms","Moz","O"];Object.keys(Mf).forEach(function(e){eR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Mf[t]=Mf[e]})});function mI(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Mf.hasOwnProperty(e)&&Mf[e]?(""+t).trim():t+"px"}function gI(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=mI(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,a):e[n]=a}}var tR=Ar({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qx(e,t){if(t){if(tR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ye(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ye(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ye(62))}}function Hx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gx=null;function Mw(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Zx=null,rd=null,id=null;function uk(e){if(e=Rm(e)){if(typeof Zx!="function")throw Error(Ye(280));var t=e.stateNode;t&&(t=ov(t),Zx(e.stateNode,e.type,t))}}function yI(e){rd?id?id.push(e):id=[e]:rd=e}function vI(){if(rd){var e=rd,t=id;if(id=rd=null,uk(e),t)for(e=0;e<t.length;e++)uk(t[e])}}function _I(e,t){return e(t)}function xI(){}var B_=!1;function bI(e,t,n){if(B_)return e(t,n);B_=!0;try{return _I(e,t,n)}finally{B_=!1,(rd!==null||id!==null)&&(xI(),vI())}}function Xf(e,t){var n=e.stateNode;if(n===null)return null;var i=ov(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ye(231,t,typeof n));return n}var Kx=!1;if(el)try{var Qp={};Object.defineProperty(Qp,"passive",{get:function(){Kx=!0}}),window.addEventListener("test",Qp,Qp),window.removeEventListener("test",Qp,Qp)}catch{Kx=!1}function nR(e,t,n,i,a,c,d,u,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(I){this.onError(I)}}var Af=!1,o0=null,a0=!1,Xx=null,rR={onError:function(e){Af=!0,o0=e}};function iR(e,t,n,i,a,c,d,u,b){Af=!1,o0=null,nR.apply(rR,arguments)}function oR(e,t,n,i,a,c,d,u,b){if(iR.apply(this,arguments),Af){if(Af){var w=o0;Af=!1,o0=null}else throw Error(Ye(198));a0||(a0=!0,Xx=w)}}function Ac(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function wI(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ck(e){if(Ac(e)!==e)throw Error(Ye(188))}function aR(e){var t=e.alternate;if(!t){if(t=Ac(e),t===null)throw Error(Ye(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(a===null)break;var c=a.alternate;if(c===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===n)return ck(a),e;if(c===i)return ck(a),t;c=c.sibling}throw Error(Ye(188))}if(n.return!==i.return)n=a,i=c;else{for(var d=!1,u=a.child;u;){if(u===n){d=!0,n=a,i=c;break}if(u===i){d=!0,i=a,n=c;break}u=u.sibling}if(!d){for(u=c.child;u;){if(u===n){d=!0,n=c,i=a;break}if(u===i){d=!0,i=c,n=a;break}u=u.sibling}if(!d)throw Error(Ye(189))}}if(n.alternate!==i)throw Error(Ye(190))}if(n.tag!==3)throw Error(Ye(188));return n.stateNode.current===n?e:t}function SI(e){return e=aR(e),e!==null?CI(e):null}function CI(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=CI(e);if(t!==null)return t;e=e.sibling}return null}var kI=Qo.unstable_scheduleCallback,hk=Qo.unstable_cancelCallback,sR=Qo.unstable_shouldYield,lR=Qo.unstable_requestPaint,Vr=Qo.unstable_now,uR=Qo.unstable_getCurrentPriorityLevel,Aw=Qo.unstable_ImmediatePriority,EI=Qo.unstable_UserBlockingPriority,s0=Qo.unstable_NormalPriority,cR=Qo.unstable_LowPriority,TI=Qo.unstable_IdlePriority,tv=null,_s=null;function hR(e){if(_s&&typeof _s.onCommitFiberRoot=="function")try{_s.onCommitFiberRoot(tv,e,void 0,(e.current.flags&128)===128)}catch{}}var Za=Math.clz32?Math.clz32:fR,dR=Math.log,pR=Math.LN2;function fR(e){return e>>>=0,e===0?32:31-(dR(e)/pR|0)|0}var ny=64,ry=4194304;function bf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function l0(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,a=e.suspendedLanes,c=e.pingedLanes,d=n&268435455;if(d!==0){var u=d&~a;u!==0?i=bf(u):(c&=d,c!==0&&(i=bf(c)))}else d=n&~a,d!==0?i=bf(d):c!==0&&(i=bf(c));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,c=t&-t,a>=c||a===16&&(c&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Za(t),a=1<<n,i|=e[n],t&=~a;return i}function mR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gR(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,c=e.pendingLanes;0<c;){var d=31-Za(c),u=1<<d,b=a[d];b===-1?(!(u&n)||u&i)&&(a[d]=mR(u,t)):b<=t&&(e.expiredLanes|=u),c&=~u}}function Yx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function II(){var e=ny;return ny<<=1,!(ny&4194240)&&(ny=64),e}function N_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Za(t),e[t]=n}function yR(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Za(n),c=1<<a;t[a]=0,i[a]=-1,e[a]=-1,n&=~c}}function Lw(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Za(n),a=1<<i;a&t|e[i]&t&&(e[i]|=t),n&=~a}}var Hn=0;function PI(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var MI,zw,AI,LI,zI,Jx=!1,iy=[],ru=null,iu=null,ou=null,Yf=new Map,Jf=new Map,Xl=[],vR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dk(e,t){switch(e){case"focusin":case"focusout":ru=null;break;case"dragenter":case"dragleave":iu=null;break;case"mouseover":case"mouseout":ou=null;break;case"pointerover":case"pointerout":Yf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jf.delete(t.pointerId)}}function ef(e,t,n,i,a,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:c,targetContainers:[a]},t!==null&&(t=Rm(t),t!==null&&zw(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function _R(e,t,n,i,a){switch(t){case"focusin":return ru=ef(ru,e,t,n,i,a),!0;case"dragenter":return iu=ef(iu,e,t,n,i,a),!0;case"mouseover":return ou=ef(ou,e,t,n,i,a),!0;case"pointerover":var c=a.pointerId;return Yf.set(c,ef(Yf.get(c)||null,e,t,n,i,a)),!0;case"gotpointercapture":return c=a.pointerId,Jf.set(c,ef(Jf.get(c)||null,e,t,n,i,a)),!0}return!1}function RI(e){var t=sc(e.target);if(t!==null){var n=Ac(t);if(n!==null){if(t=n.tag,t===13){if(t=wI(n),t!==null){e.blockedOn=t,zI(e.priority,function(){AI(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Gx=i,n.target.dispatchEvent(i),Gx=null}else return t=Rm(n),t!==null&&zw(t),e.blockedOn=n,!1;t.shift()}return!0}function pk(e,t,n){zy(e)&&n.delete(t)}function xR(){Jx=!1,ru!==null&&zy(ru)&&(ru=null),iu!==null&&zy(iu)&&(iu=null),ou!==null&&zy(ou)&&(ou=null),Yf.forEach(pk),Jf.forEach(pk)}function tf(e,t){e.blockedOn===t&&(e.blockedOn=null,Jx||(Jx=!0,Qo.unstable_scheduleCallback(Qo.unstable_NormalPriority,xR)))}function Qf(e){function t(a){return tf(a,e)}if(0<iy.length){tf(iy[0],e);for(var n=1;n<iy.length;n++){var i=iy[n];i.blockedOn===e&&(i.blockedOn=null)}}for(ru!==null&&tf(ru,e),iu!==null&&tf(iu,e),ou!==null&&tf(ou,e),Yf.forEach(t),Jf.forEach(t),n=0;n<Xl.length;n++)i=Xl[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Xl.length&&(n=Xl[0],n.blockedOn===null);)RI(n),n.blockedOn===null&&Xl.shift()}var od=cl.ReactCurrentBatchConfig,u0=!0;function bR(e,t,n,i){var a=Hn,c=od.transition;od.transition=null;try{Hn=1,Rw(e,t,n,i)}finally{Hn=a,od.transition=c}}function wR(e,t,n,i){var a=Hn,c=od.transition;od.transition=null;try{Hn=4,Rw(e,t,n,i)}finally{Hn=a,od.transition=c}}function Rw(e,t,n,i){if(u0){var a=Qx(e,t,n,i);if(a===null)X_(e,t,i,c0,n),dk(e,i);else if(_R(a,e,t,n,i))i.stopPropagation();else if(dk(e,i),t&4&&-1<vR.indexOf(e)){for(;a!==null;){var c=Rm(a);if(c!==null&&MI(c),c=Qx(e,t,n,i),c===null&&X_(e,t,i,c0,n),c===a)break;a=c}a!==null&&i.stopPropagation()}else X_(e,t,i,null,n)}}var c0=null;function Qx(e,t,n,i){if(c0=null,e=Mw(i),e=sc(e),e!==null)if(t=Ac(e),t===null)e=null;else if(n=t.tag,n===13){if(e=wI(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return c0=e,null}function DI(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uR()){case Aw:return 1;case EI:return 4;case s0:case cR:return 16;case TI:return 536870912;default:return 16}default:return 16}}var Ql=null,Dw=null,Ry=null;function $I(){if(Ry)return Ry;var e,t=Dw,n=t.length,i,a="value"in Ql?Ql.value:Ql.textContent,c=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(i=1;i<=d&&t[n-i]===a[c-i];i++);return Ry=a.slice(e,1<i?1-i:void 0)}function Dy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oy(){return!0}function fk(){return!1}function ta(e){function t(n,i,a,c,d){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=c,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(c):c[u]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?oy:fk,this.isPropagationStopped=fk,this}return Ar(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=oy)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=oy)},persist:function(){},isPersistent:oy}),t}var Ad={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$w=ta(Ad),zm=Ar({},Ad,{view:0,detail:0}),SR=ta(zm),j_,U_,nf,nv=Ar({},zm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ow,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nf&&(nf&&e.type==="mousemove"?(j_=e.screenX-nf.screenX,U_=e.screenY-nf.screenY):U_=j_=0,nf=e),j_)},movementY:function(e){return"movementY"in e?e.movementY:U_}}),mk=ta(nv),CR=Ar({},nv,{dataTransfer:0}),kR=ta(CR),ER=Ar({},zm,{relatedTarget:0}),V_=ta(ER),TR=Ar({},Ad,{animationName:0,elapsedTime:0,pseudoElement:0}),IR=ta(TR),PR=Ar({},Ad,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MR=ta(PR),AR=Ar({},Ad,{data:0}),gk=ta(AR),LR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RR[e])?!!t[e]:!1}function Ow(){return DR}var $R=Ar({},zm,{key:function(e){if(e.key){var t=LR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Dy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ow,charCode:function(e){return e.type==="keypress"?Dy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Dy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OR=ta($R),FR=Ar({},nv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yk=ta(FR),BR=Ar({},zm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ow}),NR=ta(BR),jR=Ar({},Ad,{propertyName:0,elapsedTime:0,pseudoElement:0}),UR=ta(jR),VR=Ar({},nv,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),WR=ta(VR),qR=[9,13,27,32],Fw=el&&"CompositionEvent"in window,Lf=null;el&&"documentMode"in document&&(Lf=document.documentMode);var HR=el&&"TextEvent"in window&&!Lf,OI=el&&(!Fw||Lf&&8<Lf&&11>=Lf),vk=" ",_k=!1;function FI(e,t){switch(e){case"keyup":return qR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BI(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wh=!1;function GR(e,t){switch(e){case"compositionend":return BI(t);case"keypress":return t.which!==32?null:(_k=!0,vk);case"textInput":return e=t.data,e===vk&&_k?null:e;default:return null}}function ZR(e,t){if(Wh)return e==="compositionend"||!Fw&&FI(e,t)?(e=$I(),Ry=Dw=Ql=null,Wh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return OI&&t.locale!=="ko"?null:t.data;default:return null}}var KR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!KR[e.type]:t==="textarea"}function NI(e,t,n,i){yI(i),t=h0(t,"onChange"),0<t.length&&(n=new $w("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var zf=null,em=null;function XR(e){YI(e,0)}function rv(e){var t=Gh(e);if(cI(t))return e}function YR(e,t){if(e==="change")return t}var jI=!1;if(el){var W_;if(el){var q_="oninput"in document;if(!q_){var bk=document.createElement("div");bk.setAttribute("oninput","return;"),q_=typeof bk.oninput=="function"}W_=q_}else W_=!1;jI=W_&&(!document.documentMode||9<document.documentMode)}function wk(){zf&&(zf.detachEvent("onpropertychange",UI),em=zf=null)}function UI(e){if(e.propertyName==="value"&&rv(em)){var t=[];NI(t,em,e,Mw(e)),bI(XR,t)}}function JR(e,t,n){e==="focusin"?(wk(),zf=t,em=n,zf.attachEvent("onpropertychange",UI)):e==="focusout"&&wk()}function QR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return rv(em)}function e6(e,t){if(e==="click")return rv(t)}function t6(e,t){if(e==="input"||e==="change")return rv(t)}function n6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ya=typeof Object.is=="function"?Object.is:n6;function tm(e,t){if(Ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!Dx.call(t,a)||!Ya(e[a],t[a]))return!1}return!0}function Sk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ck(e,t){var n=Sk(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sk(n)}}function VI(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?VI(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function WI(){for(var e=window,t=i0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=i0(e.document)}return t}function Bw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function r6(e){var t=WI(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&VI(n.ownerDocument.documentElement,n)){if(i!==null&&Bw(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,c=Math.min(i.start,a);i=i.end===void 0?c:Math.min(i.end,a),!e.extend&&c>i&&(a=i,i=c,c=a),a=Ck(n,c);var d=Ck(n,i);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),c>i?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var i6=el&&"documentMode"in document&&11>=document.documentMode,qh=null,eb=null,Rf=null,tb=!1;function kk(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;tb||qh==null||qh!==i0(i)||(i=qh,"selectionStart"in i&&Bw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Rf&&tm(Rf,i)||(Rf=i,i=h0(eb,"onSelect"),0<i.length&&(t=new $w("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=qh)))}function ay(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Hh={animationend:ay("Animation","AnimationEnd"),animationiteration:ay("Animation","AnimationIteration"),animationstart:ay("Animation","AnimationStart"),transitionend:ay("Transition","TransitionEnd")},H_={},qI={};el&&(qI=document.createElement("div").style,"AnimationEvent"in window||(delete Hh.animationend.animation,delete Hh.animationiteration.animation,delete Hh.animationstart.animation),"TransitionEvent"in window||delete Hh.transitionend.transition);function iv(e){if(H_[e])return H_[e];if(!Hh[e])return e;var t=Hh[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qI)return H_[e]=t[n];return e}var HI=iv("animationend"),GI=iv("animationiteration"),ZI=iv("animationstart"),KI=iv("transitionend"),XI=new Map,Ek="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vu(e,t){XI.set(e,t),Mc(t,[e])}for(var G_=0;G_<Ek.length;G_++){var Z_=Ek[G_],o6=Z_.toLowerCase(),a6=Z_[0].toUpperCase()+Z_.slice(1);vu(o6,"on"+a6)}vu(HI,"onAnimationEnd");vu(GI,"onAnimationIteration");vu(ZI,"onAnimationStart");vu("dblclick","onDoubleClick");vu("focusin","onFocus");vu("focusout","onBlur");vu(KI,"onTransitionEnd");_d("onMouseEnter",["mouseout","mouseover"]);_d("onMouseLeave",["mouseout","mouseover"]);_d("onPointerEnter",["pointerout","pointerover"]);_d("onPointerLeave",["pointerout","pointerover"]);Mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s6=new Set("cancel close invalid load scroll toggle".split(" ").concat(wf));function Tk(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,oR(i,t,void 0,e),e.currentTarget=null}function YI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],a=i.event;i=i.listeners;e:{var c=void 0;if(t)for(var d=i.length-1;0<=d;d--){var u=i[d],b=u.instance,w=u.currentTarget;if(u=u.listener,b!==c&&a.isPropagationStopped())break e;Tk(a,u,w),c=b}else for(d=0;d<i.length;d++){if(u=i[d],b=u.instance,w=u.currentTarget,u=u.listener,b!==c&&a.isPropagationStopped())break e;Tk(a,u,w),c=b}}}if(a0)throw e=Xx,a0=!1,Xx=null,e}function pr(e,t){var n=t[ab];n===void 0&&(n=t[ab]=new Set);var i=e+"__bubble";n.has(i)||(JI(t,e,2,!1),n.add(i))}function K_(e,t,n){var i=0;t&&(i|=4),JI(n,e,i,t)}var sy="_reactListening"+Math.random().toString(36).slice(2);function nm(e){if(!e[sy]){e[sy]=!0,oI.forEach(function(n){n!=="selectionchange"&&(s6.has(n)||K_(n,!1,e),K_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[sy]||(t[sy]=!0,K_("selectionchange",!1,t))}}function JI(e,t,n,i){switch(DI(t)){case 1:var a=bR;break;case 4:a=wR;break;default:a=Rw}n=a.bind(null,t,n,e),a=void 0,!Kx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function X_(e,t,n,i,a){var c=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var u=i.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(d===4)for(d=i.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;d=d.return}for(;u!==null;){if(d=sc(u),d===null)return;if(b=d.tag,b===5||b===6){i=c=d;continue e}u=u.parentNode}}i=i.return}bI(function(){var w=c,I=Mw(n),k=[];e:{var P=XI.get(e);if(P!==void 0){var R=$w,N=e;switch(e){case"keypress":if(Dy(n)===0)break e;case"keydown":case"keyup":R=OR;break;case"focusin":N="focus",R=V_;break;case"focusout":N="blur",R=V_;break;case"beforeblur":case"afterblur":R=V_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=mk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=kR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=NR;break;case HI:case GI:case ZI:R=IR;break;case KI:R=UR;break;case"scroll":R=SR;break;case"wheel":R=WR;break;case"copy":case"cut":case"paste":R=MR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=yk}var V=(t&4)!==0,X=!V&&e==="scroll",D=V?P!==null?P+"Capture":null:P;V=[];for(var B=w,j;B!==null;){j=B;var G=j.stateNode;if(j.tag===5&&G!==null&&(j=G,D!==null&&(G=Xf(B,D),G!=null&&V.push(rm(B,G,j)))),X)break;B=B.return}0<V.length&&(P=new R(P,N,null,n,I),k.push({event:P,listeners:V}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",P&&n!==Gx&&(N=n.relatedTarget||n.fromElement)&&(sc(N)||N[tl]))break e;if((R||P)&&(P=I.window===I?I:(P=I.ownerDocument)?P.defaultView||P.parentWindow:window,R?(N=n.relatedTarget||n.toElement,R=w,N=N?sc(N):null,N!==null&&(X=Ac(N),N!==X||N.tag!==5&&N.tag!==6)&&(N=null)):(R=null,N=w),R!==N)){if(V=mk,G="onMouseLeave",D="onMouseEnter",B="mouse",(e==="pointerout"||e==="pointerover")&&(V=yk,G="onPointerLeave",D="onPointerEnter",B="pointer"),X=R==null?P:Gh(R),j=N==null?P:Gh(N),P=new V(G,B+"leave",R,n,I),P.target=X,P.relatedTarget=j,G=null,sc(I)===w&&(V=new V(D,B+"enter",N,n,I),V.target=j,V.relatedTarget=X,G=V),X=G,R&&N)t:{for(V=R,D=N,B=0,j=V;j;j=Eh(j))B++;for(j=0,G=D;G;G=Eh(G))j++;for(;0<B-j;)V=Eh(V),B--;for(;0<j-B;)D=Eh(D),j--;for(;B--;){if(V===D||D!==null&&V===D.alternate)break t;V=Eh(V),D=Eh(D)}V=null}else V=null;R!==null&&Ik(k,P,R,V,!1),N!==null&&X!==null&&Ik(k,X,N,V,!0)}}e:{if(P=w?Gh(w):window,R=P.nodeName&&P.nodeName.toLowerCase(),R==="select"||R==="input"&&P.type==="file")var te=YR;else if(xk(P))if(jI)te=t6;else{te=QR;var oe=JR}else(R=P.nodeName)&&R.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(te=e6);if(te&&(te=te(e,w))){NI(k,te,n,I);break e}oe&&oe(e,P,w),e==="focusout"&&(oe=P._wrapperState)&&oe.controlled&&P.type==="number"&&Ux(P,"number",P.value)}switch(oe=w?Gh(w):window,e){case"focusin":(xk(oe)||oe.contentEditable==="true")&&(qh=oe,eb=w,Rf=null);break;case"focusout":Rf=eb=qh=null;break;case"mousedown":tb=!0;break;case"contextmenu":case"mouseup":case"dragend":tb=!1,kk(k,n,I);break;case"selectionchange":if(i6)break;case"keydown":case"keyup":kk(k,n,I)}var ae;if(Fw)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else Wh?FI(e,n)&&(de="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(de="onCompositionStart");de&&(OI&&n.locale!=="ko"&&(Wh||de!=="onCompositionStart"?de==="onCompositionEnd"&&Wh&&(ae=$I()):(Ql=I,Dw="value"in Ql?Ql.value:Ql.textContent,Wh=!0)),oe=h0(w,de),0<oe.length&&(de=new gk(de,e,null,n,I),k.push({event:de,listeners:oe}),ae?de.data=ae:(ae=BI(n),ae!==null&&(de.data=ae)))),(ae=HR?GR(e,n):ZR(e,n))&&(w=h0(w,"onBeforeInput"),0<w.length&&(I=new gk("onBeforeInput","beforeinput",null,n,I),k.push({event:I,listeners:w}),I.data=ae))}YI(k,t)})}function rm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function h0(e,t){for(var n=t+"Capture",i=[];e!==null;){var a=e,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Xf(e,n),c!=null&&i.unshift(rm(e,c,a)),c=Xf(e,t),c!=null&&i.push(rm(e,c,a))),e=e.return}return i}function Eh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ik(e,t,n,i,a){for(var c=t._reactName,d=[];n!==null&&n!==i;){var u=n,b=u.alternate,w=u.stateNode;if(b!==null&&b===i)break;u.tag===5&&w!==null&&(u=w,a?(b=Xf(n,c),b!=null&&d.unshift(rm(n,b,u))):a||(b=Xf(n,c),b!=null&&d.push(rm(n,b,u)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var l6=/\r\n?/g,u6=/\u0000|\uFFFD/g;function Pk(e){return(typeof e=="string"?e:""+e).replace(l6,`
`).replace(u6,"")}function ly(e,t,n){if(t=Pk(t),Pk(e)!==t&&n)throw Error(Ye(425))}function d0(){}var nb=null,rb=null;function ib(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ob=typeof setTimeout=="function"?setTimeout:void 0,c6=typeof clearTimeout=="function"?clearTimeout:void 0,Mk=typeof Promise=="function"?Promise:void 0,h6=typeof queueMicrotask=="function"?queueMicrotask:typeof Mk<"u"?function(e){return Mk.resolve(null).then(e).catch(d6)}:ob;function d6(e){setTimeout(function(){throw e})}function Y_(e,t){var n=t,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){e.removeChild(a),Qf(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);Qf(t)}function au(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ak(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),fs="__reactFiber$"+Ld,im="__reactProps$"+Ld,tl="__reactContainer$"+Ld,ab="__reactEvents$"+Ld,p6="__reactListeners$"+Ld,f6="__reactHandles$"+Ld;function sc(e){var t=e[fs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tl]||n[fs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ak(e);e!==null;){if(n=e[fs])return n;e=Ak(e)}return t}e=n,n=e.parentNode}return null}function Rm(e){return e=e[fs]||e[tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Gh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function ov(e){return e[im]||null}var sb=[],Zh=-1;function _u(e){return{current:e}}function fr(e){0>Zh||(e.current=sb[Zh],sb[Zh]=null,Zh--)}function lr(e,t){Zh++,sb[Zh]=e.current,e.current=t}var pu={},Gi=_u(pu),Eo=_u(!1),bc=pu;function xd(e,t){var n=e.type.contextTypes;if(!n)return pu;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in n)a[c]=t[c];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function To(e){return e=e.childContextTypes,e!=null}function p0(){fr(Eo),fr(Gi)}function Lk(e,t,n){if(Gi.current!==pu)throw Error(Ye(168));lr(Gi,t),lr(Eo,n)}function QI(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(Ye(108,Jz(e)||"Unknown",a));return Ar({},n,i)}function f0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pu,bc=Gi.current,lr(Gi,e),lr(Eo,Eo.current),!0}function zk(e,t,n){var i=e.stateNode;if(!i)throw Error(Ye(169));n?(e=QI(e,t,bc),i.__reactInternalMemoizedMergedChildContext=e,fr(Eo),fr(Gi),lr(Gi,e)):fr(Eo),lr(Eo,n)}var Zs=null,av=!1,J_=!1;function eP(e){Zs===null?Zs=[e]:Zs.push(e)}function m6(e){av=!0,eP(e)}function xu(){if(!J_&&Zs!==null){J_=!0;var e=0,t=Hn;try{var n=Zs;for(Hn=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}Zs=null,av=!1}catch(a){throw Zs!==null&&(Zs=Zs.slice(e+1)),kI(Aw,xu),a}finally{Hn=t,J_=!1}}return null}var Kh=[],Xh=0,m0=null,g0=0,ga=[],ya=0,wc=null,Xs=1,Ys="";function ec(e,t){Kh[Xh++]=g0,Kh[Xh++]=m0,m0=e,g0=t}function tP(e,t,n){ga[ya++]=Xs,ga[ya++]=Ys,ga[ya++]=wc,wc=e;var i=Xs;e=Ys;var a=32-Za(i)-1;i&=~(1<<a),n+=1;var c=32-Za(t)+a;if(30<c){var d=a-a%5;c=(i&(1<<d)-1).toString(32),i>>=d,a-=d,Xs=1<<32-Za(t)+a|n<<a|i,Ys=c+e}else Xs=1<<c|n<<a|i,Ys=e}function Nw(e){e.return!==null&&(ec(e,1),tP(e,1,0))}function jw(e){for(;e===m0;)m0=Kh[--Xh],Kh[Xh]=null,g0=Kh[--Xh],Kh[Xh]=null;for(;e===wc;)wc=ga[--ya],ga[ya]=null,Ys=ga[--ya],ga[ya]=null,Xs=ga[--ya],ga[ya]=null}var Yo=null,Xo=null,Sr=!1,Va=null;function nP(e,t){var n=ba(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Rk(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Yo=e,Xo=au(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Yo=e,Xo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=wc!==null?{id:Xs,overflow:Ys}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ba(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Yo=e,Xo=null,!0):!1;default:return!1}}function lb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ub(e){if(Sr){var t=Xo;if(t){var n=t;if(!Rk(e,t)){if(lb(e))throw Error(Ye(418));t=au(n.nextSibling);var i=Yo;t&&Rk(e,t)?nP(i,n):(e.flags=e.flags&-4097|2,Sr=!1,Yo=e)}}else{if(lb(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Sr=!1,Yo=e}}}function Dk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Yo=e}function uy(e){if(e!==Yo)return!1;if(!Sr)return Dk(e),Sr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ib(e.type,e.memoizedProps)),t&&(t=Xo)){if(lb(e))throw rP(),Error(Ye(418));for(;t;)nP(e,t),t=au(t.nextSibling)}if(Dk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Xo=au(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Xo=null}}else Xo=Yo?au(e.stateNode.nextSibling):null;return!0}function rP(){for(var e=Xo;e;)e=au(e.nextSibling)}function bd(){Xo=Yo=null,Sr=!1}function Uw(e){Va===null?Va=[e]:Va.push(e)}var g6=cl.ReactCurrentBatchConfig;function rf(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ye(309));var i=n.stateNode}if(!i)throw Error(Ye(147,e));var a=i,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(d){var u=a.refs;d===null?delete u[c]:u[c]=d},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ye(284));if(!n._owner)throw Error(Ye(290,e))}return e}function cy(e,t){throw e=Object.prototype.toString.call(t),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function $k(e){var t=e._init;return t(e._payload)}function iP(e){function t(D,B){if(e){var j=D.deletions;j===null?(D.deletions=[B],D.flags|=16):j.push(B)}}function n(D,B){if(!e)return null;for(;B!==null;)t(D,B),B=B.sibling;return null}function i(D,B){for(D=new Map;B!==null;)B.key!==null?D.set(B.key,B):D.set(B.index,B),B=B.sibling;return D}function a(D,B){return D=cu(D,B),D.index=0,D.sibling=null,D}function c(D,B,j){return D.index=j,e?(j=D.alternate,j!==null?(j=j.index,j<B?(D.flags|=2,B):j):(D.flags|=2,B)):(D.flags|=1048576,B)}function d(D){return e&&D.alternate===null&&(D.flags|=2),D}function u(D,B,j,G){return B===null||B.tag!==6?(B=ox(j,D.mode,G),B.return=D,B):(B=a(B,j),B.return=D,B)}function b(D,B,j,G){var te=j.type;return te===Vh?I(D,B,j.props.children,G,j.key):B!==null&&(B.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Zl&&$k(te)===B.type)?(G=a(B,j.props),G.ref=rf(D,B,j),G.return=D,G):(G=Uy(j.type,j.key,j.props,null,D.mode,G),G.ref=rf(D,B,j),G.return=D,G)}function w(D,B,j,G){return B===null||B.tag!==4||B.stateNode.containerInfo!==j.containerInfo||B.stateNode.implementation!==j.implementation?(B=ax(j,D.mode,G),B.return=D,B):(B=a(B,j.children||[]),B.return=D,B)}function I(D,B,j,G,te){return B===null||B.tag!==7?(B=fc(j,D.mode,G,te),B.return=D,B):(B=a(B,j),B.return=D,B)}function k(D,B,j){if(typeof B=="string"&&B!==""||typeof B=="number")return B=ox(""+B,D.mode,j),B.return=D,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Qg:return j=Uy(B.type,B.key,B.props,null,D.mode,j),j.ref=rf(D,null,B),j.return=D,j;case Uh:return B=ax(B,D.mode,j),B.return=D,B;case Zl:var G=B._init;return k(D,G(B._payload),j)}if(xf(B)||Jp(B))return B=fc(B,D.mode,j,null),B.return=D,B;cy(D,B)}return null}function P(D,B,j,G){var te=B!==null?B.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return te!==null?null:u(D,B,""+j,G);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Qg:return j.key===te?b(D,B,j,G):null;case Uh:return j.key===te?w(D,B,j,G):null;case Zl:return te=j._init,P(D,B,te(j._payload),G)}if(xf(j)||Jp(j))return te!==null?null:I(D,B,j,G,null);cy(D,j)}return null}function R(D,B,j,G,te){if(typeof G=="string"&&G!==""||typeof G=="number")return D=D.get(j)||null,u(B,D,""+G,te);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Qg:return D=D.get(G.key===null?j:G.key)||null,b(B,D,G,te);case Uh:return D=D.get(G.key===null?j:G.key)||null,w(B,D,G,te);case Zl:var oe=G._init;return R(D,B,j,oe(G._payload),te)}if(xf(G)||Jp(G))return D=D.get(j)||null,I(B,D,G,te,null);cy(B,G)}return null}function N(D,B,j,G){for(var te=null,oe=null,ae=B,de=B=0,Me=null;ae!==null&&de<j.length;de++){ae.index>de?(Me=ae,ae=null):Me=ae.sibling;var Z=P(D,ae,j[de],G);if(Z===null){ae===null&&(ae=Me);break}e&&ae&&Z.alternate===null&&t(D,ae),B=c(Z,B,de),oe===null?te=Z:oe.sibling=Z,oe=Z,ae=Me}if(de===j.length)return n(D,ae),Sr&&ec(D,de),te;if(ae===null){for(;de<j.length;de++)ae=k(D,j[de],G),ae!==null&&(B=c(ae,B,de),oe===null?te=ae:oe.sibling=ae,oe=ae);return Sr&&ec(D,de),te}for(ae=i(D,ae);de<j.length;de++)Me=R(ae,D,de,j[de],G),Me!==null&&(e&&Me.alternate!==null&&ae.delete(Me.key===null?de:Me.key),B=c(Me,B,de),oe===null?te=Me:oe.sibling=Me,oe=Me);return e&&ae.forEach(function(Ie){return t(D,Ie)}),Sr&&ec(D,de),te}function V(D,B,j,G){var te=Jp(j);if(typeof te!="function")throw Error(Ye(150));if(j=te.call(j),j==null)throw Error(Ye(151));for(var oe=te=null,ae=B,de=B=0,Me=null,Z=j.next();ae!==null&&!Z.done;de++,Z=j.next()){ae.index>de?(Me=ae,ae=null):Me=ae.sibling;var Ie=P(D,ae,Z.value,G);if(Ie===null){ae===null&&(ae=Me);break}e&&ae&&Ie.alternate===null&&t(D,ae),B=c(Ie,B,de),oe===null?te=Ie:oe.sibling=Ie,oe=Ie,ae=Me}if(Z.done)return n(D,ae),Sr&&ec(D,de),te;if(ae===null){for(;!Z.done;de++,Z=j.next())Z=k(D,Z.value,G),Z!==null&&(B=c(Z,B,de),oe===null?te=Z:oe.sibling=Z,oe=Z);return Sr&&ec(D,de),te}for(ae=i(D,ae);!Z.done;de++,Z=j.next())Z=R(ae,D,de,Z.value,G),Z!==null&&(e&&Z.alternate!==null&&ae.delete(Z.key===null?de:Z.key),B=c(Z,B,de),oe===null?te=Z:oe.sibling=Z,oe=Z);return e&&ae.forEach(function(je){return t(D,je)}),Sr&&ec(D,de),te}function X(D,B,j,G){if(typeof j=="object"&&j!==null&&j.type===Vh&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Qg:e:{for(var te=j.key,oe=B;oe!==null;){if(oe.key===te){if(te=j.type,te===Vh){if(oe.tag===7){n(D,oe.sibling),B=a(oe,j.props.children),B.return=D,D=B;break e}}else if(oe.elementType===te||typeof te=="object"&&te!==null&&te.$$typeof===Zl&&$k(te)===oe.type){n(D,oe.sibling),B=a(oe,j.props),B.ref=rf(D,oe,j),B.return=D,D=B;break e}n(D,oe);break}else t(D,oe);oe=oe.sibling}j.type===Vh?(B=fc(j.props.children,D.mode,G,j.key),B.return=D,D=B):(G=Uy(j.type,j.key,j.props,null,D.mode,G),G.ref=rf(D,B,j),G.return=D,D=G)}return d(D);case Uh:e:{for(oe=j.key;B!==null;){if(B.key===oe)if(B.tag===4&&B.stateNode.containerInfo===j.containerInfo&&B.stateNode.implementation===j.implementation){n(D,B.sibling),B=a(B,j.children||[]),B.return=D,D=B;break e}else{n(D,B);break}else t(D,B);B=B.sibling}B=ax(j,D.mode,G),B.return=D,D=B}return d(D);case Zl:return oe=j._init,X(D,B,oe(j._payload),G)}if(xf(j))return N(D,B,j,G);if(Jp(j))return V(D,B,j,G);cy(D,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,B!==null&&B.tag===6?(n(D,B.sibling),B=a(B,j),B.return=D,D=B):(n(D,B),B=ox(j,D.mode,G),B.return=D,D=B),d(D)):n(D,B)}return X}var wd=iP(!0),oP=iP(!1),y0=_u(null),v0=null,Yh=null,Vw=null;function Ww(){Vw=Yh=v0=null}function qw(e){var t=y0.current;fr(y0),e._currentValue=t}function cb(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ad(e,t){v0=e,Vw=Yh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ko=!0),e.firstContext=null)}function ka(e){var t=e._currentValue;if(Vw!==e)if(e={context:e,memoizedValue:t,next:null},Yh===null){if(v0===null)throw Error(Ye(308));Yh=e,v0.dependencies={lanes:0,firstContext:e}}else Yh=Yh.next=e;return t}var lc=null;function Hw(e){lc===null?lc=[e]:lc.push(e)}function aP(e,t,n,i){var a=t.interleaved;return a===null?(n.next=n,Hw(t)):(n.next=a.next,a.next=n),t.interleaved=n,nl(e,i)}function nl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Kl=!1;function Gw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Js(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function su(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,En&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,nl(e,n)}return a=i.interleaved,a===null?(t.next=t,Hw(i)):(t.next=a.next,a.next=t),i.interleaved=t,nl(e,n)}function $y(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lw(e,n)}}function Ok(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,c=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};c===null?a=c=d:c=c.next=d,n=n.next}while(n!==null);c===null?a=c=t:c=c.next=t}else a=c=t;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function _0(e,t,n,i){var a=e.updateQueue;Kl=!1;var c=a.firstBaseUpdate,d=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var b=u,w=b.next;b.next=null,d===null?c=w:d.next=w,d=b;var I=e.alternate;I!==null&&(I=I.updateQueue,u=I.lastBaseUpdate,u!==d&&(u===null?I.firstBaseUpdate=w:u.next=w,I.lastBaseUpdate=b))}if(c!==null){var k=a.baseState;d=0,I=w=b=null,u=c;do{var P=u.lane,R=u.eventTime;if((i&P)===P){I!==null&&(I=I.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=e,V=u;switch(P=t,R=n,V.tag){case 1:if(N=V.payload,typeof N=="function"){k=N.call(R,k,P);break e}k=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=V.payload,P=typeof N=="function"?N.call(R,k,P):N,P==null)break e;k=Ar({},k,P);break e;case 2:Kl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,P=a.effects,P===null?a.effects=[u]:P.push(u))}else R={eventTime:R,lane:P,tag:u.tag,payload:u.payload,callback:u.callback,next:null},I===null?(w=I=R,b=k):I=I.next=R,d|=P;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;P=u,u=P.next,P.next=null,a.lastBaseUpdate=P,a.shared.pending=null}}while(!0);if(I===null&&(b=k),a.baseState=b,a.firstBaseUpdate=w,a.lastBaseUpdate=I,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else c===null&&(a.shared.lanes=0);Cc|=d,e.lanes=d,e.memoizedState=k}}function Fk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(Ye(191,a));a.call(i)}}}var Dm={},xs=_u(Dm),om=_u(Dm),am=_u(Dm);function uc(e){if(e===Dm)throw Error(Ye(174));return e}function Zw(e,t){switch(lr(am,t),lr(om,e),lr(xs,Dm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wx(t,e)}fr(xs),lr(xs,t)}function Sd(){fr(xs),fr(om),fr(am)}function lP(e){uc(am.current);var t=uc(xs.current),n=Wx(t,e.type);t!==n&&(lr(om,e),lr(xs,n))}function Kw(e){om.current===e&&(fr(xs),fr(om))}var Pr=_u(0);function x0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Q_=[];function Xw(){for(var e=0;e<Q_.length;e++)Q_[e]._workInProgressVersionPrimary=null;Q_.length=0}var Oy=cl.ReactCurrentDispatcher,ex=cl.ReactCurrentBatchConfig,Sc=0,Mr=null,ri=null,gi=null,b0=!1,Df=!1,sm=0,y6=0;function Ni(){throw Error(Ye(321))}function Yw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ya(e[n],t[n]))return!1;return!0}function Jw(e,t,n,i,a,c){if(Sc=c,Mr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Oy.current=e===null||e.memoizedState===null?b6:w6,e=n(i,a),Df){c=0;do{if(Df=!1,sm=0,25<=c)throw Error(Ye(301));c+=1,gi=ri=null,t.updateQueue=null,Oy.current=S6,e=n(i,a)}while(Df)}if(Oy.current=w0,t=ri!==null&&ri.next!==null,Sc=0,gi=ri=Mr=null,b0=!1,t)throw Error(Ye(300));return e}function Qw(){var e=sm!==0;return sm=0,e}function cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?Mr.memoizedState=gi=e:gi=gi.next=e,gi}function Ea(){if(ri===null){var e=Mr.alternate;e=e!==null?e.memoizedState:null}else e=ri.next;var t=gi===null?Mr.memoizedState:gi.next;if(t!==null)gi=t,ri=e;else{if(e===null)throw Error(Ye(310));ri=e,e={memoizedState:ri.memoizedState,baseState:ri.baseState,baseQueue:ri.baseQueue,queue:ri.queue,next:null},gi===null?Mr.memoizedState=gi=e:gi=gi.next=e}return gi}function lm(e,t){return typeof t=="function"?t(e):t}function tx(e){var t=Ea(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var i=ri,a=i.baseQueue,c=n.pending;if(c!==null){if(a!==null){var d=a.next;a.next=c.next,c.next=d}i.baseQueue=a=c,n.pending=null}if(a!==null){c=a.next,i=i.baseState;var u=d=null,b=null,w=c;do{var I=w.lane;if((Sc&I)===I)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:e(i,w.action);else{var k={lane:I,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(u=b=k,d=i):b=b.next=k,Mr.lanes|=I,Cc|=I}w=w.next}while(w!==null&&w!==c);b===null?d=i:b.next=u,Ya(i,t.memoizedState)||(ko=!0),t.memoizedState=i,t.baseState=d,t.baseQueue=b,n.lastRenderedState=i}if(e=n.interleaved,e!==null){a=e;do c=a.lane,Mr.lanes|=c,Cc|=c,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function nx(e){var t=Ea(),n=t.queue;if(n===null)throw Error(Ye(311));n.lastRenderedReducer=e;var i=n.dispatch,a=n.pending,c=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do c=e(c,d.action),d=d.next;while(d!==a);Ya(c,t.memoizedState)||(ko=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),n.lastRenderedState=c}return[c,i]}function uP(){}function cP(e,t){var n=Mr,i=Ea(),a=t(),c=!Ya(i.memoizedState,a);if(c&&(i.memoizedState=a,ko=!0),i=i.queue,e2(pP.bind(null,n,i,e),[e]),i.getSnapshot!==t||c||gi!==null&&gi.memoizedState.tag&1){if(n.flags|=2048,um(9,dP.bind(null,n,i,a,t),void 0,null),vi===null)throw Error(Ye(349));Sc&30||hP(n,t,a)}return a}function hP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dP(e,t,n,i){t.value=n,t.getSnapshot=i,fP(t)&&mP(e)}function pP(e,t,n){return n(function(){fP(t)&&mP(e)})}function fP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ya(e,n)}catch{return!0}}function mP(e){var t=nl(e,1);t!==null&&Ka(t,e,1,-1)}function Bk(e){var t=cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lm,lastRenderedState:e},t.queue=e,e=e.dispatch=x6.bind(null,Mr,e),[t.memoizedState,e]}function um(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Mr.updateQueue,t===null?(t={lastEffect:null,stores:null},Mr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function gP(){return Ea().memoizedState}function Fy(e,t,n,i){var a=cs();Mr.flags|=e,a.memoizedState=um(1|t,n,void 0,i===void 0?null:i)}function sv(e,t,n,i){var a=Ea();i=i===void 0?null:i;var c=void 0;if(ri!==null){var d=ri.memoizedState;if(c=d.destroy,i!==null&&Yw(i,d.deps)){a.memoizedState=um(t,n,c,i);return}}Mr.flags|=e,a.memoizedState=um(1|t,n,c,i)}function Nk(e,t){return Fy(8390656,8,e,t)}function e2(e,t){return sv(2048,8,e,t)}function yP(e,t){return sv(4,2,e,t)}function vP(e,t){return sv(4,4,e,t)}function _P(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xP(e,t,n){return n=n!=null?n.concat([e]):null,sv(4,4,_P.bind(null,t,e),n)}function t2(){}function bP(e,t){var n=Ea();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Yw(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function wP(e,t){var n=Ea();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Yw(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function SP(e,t,n){return Sc&21?(Ya(n,t)||(n=II(),Mr.lanes|=n,Cc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ko=!0),e.memoizedState=n)}function v6(e,t){var n=Hn;Hn=n!==0&&4>n?n:4,e(!0);var i=ex.transition;ex.transition={};try{e(!1),t()}finally{Hn=n,ex.transition=i}}function CP(){return Ea().memoizedState}function _6(e,t,n){var i=uu(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},kP(e))EP(t,n);else if(n=aP(e,t,n,i),n!==null){var a=uo();Ka(n,e,i,a),TP(n,t,i)}}function x6(e,t,n){var i=uu(e),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(kP(e))EP(t,a);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var d=t.lastRenderedState,u=c(d,n);if(a.hasEagerState=!0,a.eagerState=u,Ya(u,d)){var b=t.interleaved;b===null?(a.next=a,Hw(t)):(a.next=b.next,b.next=a),t.interleaved=a;return}}catch{}finally{}n=aP(e,t,a,i),n!==null&&(a=uo(),Ka(n,e,i,a),TP(n,t,i))}}function kP(e){var t=e.alternate;return e===Mr||t!==null&&t===Mr}function EP(e,t){Df=b0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function TP(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Lw(e,n)}}var w0={readContext:ka,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},b6={readContext:ka,useCallback:function(e,t){return cs().memoizedState=[e,t===void 0?null:t],e},useContext:ka,useEffect:Nk,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Fy(4194308,4,_P.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fy(4,2,e,t)},useMemo:function(e,t){var n=cs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=cs();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=_6.bind(null,Mr,e),[i.memoizedState,e]},useRef:function(e){var t=cs();return e={current:e},t.memoizedState=e},useState:Bk,useDebugValue:t2,useDeferredValue:function(e){return cs().memoizedState=e},useTransition:function(){var e=Bk(!1),t=e[0];return e=v6.bind(null,e[1]),cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Mr,a=cs();if(Sr){if(n===void 0)throw Error(Ye(407));n=n()}else{if(n=t(),vi===null)throw Error(Ye(349));Sc&30||hP(i,t,n)}a.memoizedState=n;var c={value:n,getSnapshot:t};return a.queue=c,Nk(pP.bind(null,i,c,e),[e]),i.flags|=2048,um(9,dP.bind(null,i,c,n,t),void 0,null),n},useId:function(){var e=cs(),t=vi.identifierPrefix;if(Sr){var n=Ys,i=Xs;n=(i&~(1<<32-Za(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=sm++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=y6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w6={readContext:ka,useCallback:bP,useContext:ka,useEffect:e2,useImperativeHandle:xP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:wP,useReducer:tx,useRef:gP,useState:function(){return tx(lm)},useDebugValue:t2,useDeferredValue:function(e){var t=Ea();return SP(t,ri.memoizedState,e)},useTransition:function(){var e=tx(lm)[0],t=Ea().memoizedState;return[e,t]},useMutableSource:uP,useSyncExternalStore:cP,useId:CP,unstable_isNewReconciler:!1},S6={readContext:ka,useCallback:bP,useContext:ka,useEffect:e2,useImperativeHandle:xP,useInsertionEffect:yP,useLayoutEffect:vP,useMemo:wP,useReducer:nx,useRef:gP,useState:function(){return nx(lm)},useDebugValue:t2,useDeferredValue:function(e){var t=Ea();return ri===null?t.memoizedState=e:SP(t,ri.memoizedState,e)},useTransition:function(){var e=nx(lm)[0],t=Ea().memoizedState;return[e,t]},useMutableSource:uP,useSyncExternalStore:cP,useId:CP,unstable_isNewReconciler:!1};function ja(e,t){if(e&&e.defaultProps){t=Ar({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hb(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ar({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lv={isMounted:function(e){return(e=e._reactInternals)?Ac(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=uo(),a=uu(e),c=Js(i,a);c.payload=t,n!=null&&(c.callback=n),t=su(e,c,a),t!==null&&(Ka(t,e,a,i),$y(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=uo(),a=uu(e),c=Js(i,a);c.tag=1,c.payload=t,n!=null&&(c.callback=n),t=su(e,c,a),t!==null&&(Ka(t,e,a,i),$y(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=uo(),i=uu(e),a=Js(n,i);a.tag=2,t!=null&&(a.callback=t),t=su(e,a,i),t!==null&&(Ka(t,e,i,n),$y(t,e,i))}};function jk(e,t,n,i,a,c,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,c,d):t.prototype&&t.prototype.isPureReactComponent?!tm(n,i)||!tm(a,c):!0}function IP(e,t,n){var i=!1,a=pu,c=t.contextType;return typeof c=="object"&&c!==null?c=ka(c):(a=To(t)?bc:Gi.current,i=t.contextTypes,c=(i=i!=null)?xd(e,a):pu),t=new t(n,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lv,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=c),t}function Uk(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&lv.enqueueReplaceState(t,t.state,null)}function db(e,t,n,i){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Gw(e);var c=t.contextType;typeof c=="object"&&c!==null?a.context=ka(c):(c=To(t)?bc:Gi.current,a.context=xd(e,c)),a.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(hb(e,t,c,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&lv.enqueueReplaceState(a,a.state,null),_0(e,n,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Cd(e,t){try{var n="",i=t;do n+=Yz(i),i=i.return;while(i);var a=n}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:a,digest:null}}function rx(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function pb(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var C6=typeof WeakMap=="function"?WeakMap:Map;function PP(e,t,n){n=Js(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){C0||(C0=!0,Sb=i),pb(e,t)},n}function MP(e,t,n){n=Js(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;n.payload=function(){return i(a)},n.callback=function(){pb(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(n.callback=function(){pb(e,t),typeof i!="function"&&(lu===null?lu=new Set([this]):lu.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function Vk(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new C6;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(n)||(a.add(n),e=F6.bind(null,e,t,n),t.then(e,e))}function Wk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qk(e,t,n,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Js(-1,1),t.tag=2,su(n,t,1))),n.lanes|=1),e)}var k6=cl.ReactCurrentOwner,ko=!1;function so(e,t,n,i){t.child=e===null?oP(t,null,n,i):wd(t,e.child,n,i)}function Hk(e,t,n,i,a){n=n.render;var c=t.ref;return ad(t,a),i=Jw(e,t,n,i,c,a),n=Qw(),e!==null&&!ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,rl(e,t,a)):(Sr&&n&&Nw(t),t.flags|=1,so(e,t,i,a),t.child)}function Gk(e,t,n,i,a){if(e===null){var c=n.type;return typeof c=="function"&&!u2(c)&&c.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=c,AP(e,t,c,i,a)):(e=Uy(n.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&a)){var d=c.memoizedProps;if(n=n.compare,n=n!==null?n:tm,n(d,i)&&e.ref===t.ref)return rl(e,t,a)}return t.flags|=1,e=cu(c,i),e.ref=t.ref,e.return=t,t.child=e}function AP(e,t,n,i,a){if(e!==null){var c=e.memoizedProps;if(tm(c,i)&&e.ref===t.ref)if(ko=!1,t.pendingProps=i=c,(e.lanes&a)!==0)e.flags&131072&&(ko=!0);else return t.lanes=e.lanes,rl(e,t,a)}return fb(e,t,n,i,a)}function LP(e,t,n){var i=t.pendingProps,a=i.children,c=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},lr(Qh,qo),qo|=n;else{if(!(n&1073741824))return e=c!==null?c.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,lr(Qh,qo),qo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:n,lr(Qh,qo),qo|=i}else c!==null?(i=c.baseLanes|n,t.memoizedState=null):i=n,lr(Qh,qo),qo|=i;return so(e,t,a,n),t.child}function zP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function fb(e,t,n,i,a){var c=To(n)?bc:Gi.current;return c=xd(t,c),ad(t,a),n=Jw(e,t,n,i,c,a),i=Qw(),e!==null&&!ko?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,rl(e,t,a)):(Sr&&i&&Nw(t),t.flags|=1,so(e,t,n,a),t.child)}function Zk(e,t,n,i,a){if(To(n)){var c=!0;f0(t)}else c=!1;if(ad(t,a),t.stateNode===null)By(e,t),IP(t,n,i),db(t,n,i,a),i=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var b=d.context,w=n.contextType;typeof w=="object"&&w!==null?w=ka(w):(w=To(n)?bc:Gi.current,w=xd(t,w));var I=n.getDerivedStateFromProps,k=typeof I=="function"||typeof d.getSnapshotBeforeUpdate=="function";k||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==i||b!==w)&&Uk(t,d,i,w),Kl=!1;var P=t.memoizedState;d.state=P,_0(t,i,d,a),b=t.memoizedState,u!==i||P!==b||Eo.current||Kl?(typeof I=="function"&&(hb(t,n,I,i),b=t.memoizedState),(u=Kl||jk(t,n,u,i,P,b,w))?(k||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=b),d.props=i,d.state=b,d.context=w,i=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{d=t.stateNode,sP(e,t),u=t.memoizedProps,w=t.type===t.elementType?u:ja(t.type,u),d.props=w,k=t.pendingProps,P=d.context,b=n.contextType,typeof b=="object"&&b!==null?b=ka(b):(b=To(n)?bc:Gi.current,b=xd(t,b));var R=n.getDerivedStateFromProps;(I=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==k||P!==b)&&Uk(t,d,i,b),Kl=!1,P=t.memoizedState,d.state=P,_0(t,i,d,a);var N=t.memoizedState;u!==k||P!==N||Eo.current||Kl?(typeof R=="function"&&(hb(t,n,R,i),N=t.memoizedState),(w=Kl||jk(t,n,w,i,P,N,b)||!1)?(I||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,N,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,N,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),d.props=i,d.state=N,d.context=b,i=w):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),i=!1)}return mb(e,t,n,i,c,a)}function mb(e,t,n,i,a,c){zP(e,t);var d=(t.flags&128)!==0;if(!i&&!d)return a&&zk(t,n,!1),rl(e,t,c);i=t.stateNode,k6.current=t;var u=d&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&d?(t.child=wd(t,e.child,null,c),t.child=wd(t,null,u,c)):so(e,t,u,c),t.memoizedState=i.state,a&&zk(t,n,!0),t.child}function RP(e){var t=e.stateNode;t.pendingContext?Lk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Lk(e,t.context,!1),Zw(e,t.containerInfo)}function Kk(e,t,n,i,a){return bd(),Uw(a),t.flags|=256,so(e,t,n,i),t.child}var gb={dehydrated:null,treeContext:null,retryLane:0};function yb(e){return{baseLanes:e,cachePool:null,transitions:null}}function DP(e,t,n){var i=t.pendingProps,a=Pr.current,c=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),lr(Pr,a&1),e===null)return ub(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=i.children,e=i.fallback,c?(i=t.mode,c=t.child,d={mode:"hidden",children:d},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=d):c=hv(d,i,0,null),e=fc(e,i,n,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=yb(n),t.memoizedState=gb,e):n2(t,d));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return E6(e,t,d,i,u,a,n);if(c){c=i.fallback,d=t.mode,a=e.child,u=a.sibling;var b={mode:"hidden",children:i.children};return!(d&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=b,t.deletions=null):(i=cu(a,b),i.subtreeFlags=a.subtreeFlags&14680064),u!==null?c=cu(u,c):(c=fc(c,d,n,null),c.flags|=2),c.return=t,i.return=t,i.sibling=c,t.child=i,i=c,c=t.child,d=e.child.memoizedState,d=d===null?yb(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},c.memoizedState=d,c.childLanes=e.childLanes&~n,t.memoizedState=gb,i}return c=e.child,e=c.sibling,i=cu(c,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function n2(e,t){return t=hv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function hy(e,t,n,i){return i!==null&&Uw(i),wd(t,e.child,null,n),e=n2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E6(e,t,n,i,a,c,d){if(n)return t.flags&256?(t.flags&=-257,i=rx(Error(Ye(422))),hy(e,t,d,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=i.fallback,a=t.mode,i=hv({mode:"visible",children:i.children},a,0,null),c=fc(c,a,d,null),c.flags|=2,i.return=t,c.return=t,i.sibling=c,t.child=i,t.mode&1&&wd(t,e.child,null,d),t.child.memoizedState=yb(d),t.memoizedState=gb,c);if(!(t.mode&1))return hy(e,t,d,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var u=i.dgst;return i=u,c=Error(Ye(419)),i=rx(c,i,void 0),hy(e,t,d,i)}if(u=(d&e.childLanes)!==0,ko||u){if(i=vi,i!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|d)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,nl(e,a),Ka(i,e,a,-1))}return l2(),i=rx(Error(Ye(421))),hy(e,t,d,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=B6.bind(null,e),a._reactRetry=t,null):(e=c.treeContext,Xo=au(a.nextSibling),Yo=t,Sr=!0,Va=null,e!==null&&(ga[ya++]=Xs,ga[ya++]=Ys,ga[ya++]=wc,Xs=e.id,Ys=e.overflow,wc=t),t=n2(t,i.children),t.flags|=4096,t)}function Xk(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),cb(e.return,t,n)}function ix(e,t,n,i,a){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=n,c.tailMode=a)}function $P(e,t,n){var i=t.pendingProps,a=i.revealOrder,c=i.tail;if(so(e,t,i.children,n),i=Pr.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xk(e,n,t);else if(e.tag===19)Xk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lr(Pr,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&x0(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),ix(t,!1,a,n,c);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&x0(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}ix(t,!0,n,null,c);break;case"together":ix(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function By(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ye(153));if(t.child!==null){for(e=t.child,n=cu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function T6(e,t,n){switch(t.tag){case 3:RP(t),bd();break;case 5:lP(t);break;case 1:To(t.type)&&f0(t);break;case 4:Zw(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;lr(y0,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(lr(Pr,Pr.current&1),t.flags|=128,null):n&t.child.childLanes?DP(e,t,n):(lr(Pr,Pr.current&1),e=rl(e,t,n),e!==null?e.sibling:null);lr(Pr,Pr.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return $P(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),lr(Pr,Pr.current),i)break;return null;case 22:case 23:return t.lanes=0,LP(e,t,n)}return rl(e,t,n)}var OP,vb,FP,BP;OP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vb=function(){};FP=function(e,t,n,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,uc(xs.current);var c=null;switch(n){case"input":a=Nx(e,a),i=Nx(e,i),c=[];break;case"select":a=Ar({},a,{value:void 0}),i=Ar({},i,{value:void 0}),c=[];break;case"textarea":a=Vx(e,a),i=Vx(e,i),c=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=d0)}qx(n,i);var d;n=null;for(w in a)if(!i.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var u=a[w];for(d in u)u.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(Zf.hasOwnProperty(w)?c||(c=[]):(c=c||[]).push(w,null));for(w in i){var b=i[w];if(u=a!=null?a[w]:void 0,i.hasOwnProperty(w)&&b!==u&&(b!=null||u!=null))if(w==="style")if(u){for(d in u)!u.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in b)b.hasOwnProperty(d)&&u[d]!==b[d]&&(n||(n={}),n[d]=b[d])}else n||(c||(c=[]),c.push(w,n)),n=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(c=c||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(c=c||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(Zf.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&pr("scroll",e),c||u===b||(c=[])):(c=c||[]).push(w,b))}n&&(c=c||[]).push("style",n);var w=c;(t.updateQueue=w)&&(t.flags|=4)}};BP=function(e,t,n,i){n!==i&&(t.flags|=4)};function of(e,t){if(!Sr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function I6(e,t,n){var i=t.pendingProps;switch(jw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ji(t),null;case 1:return To(t.type)&&p0(),ji(t),null;case 3:return i=t.stateNode,Sd(),fr(Eo),fr(Gi),Xw(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(uy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Va!==null&&(Eb(Va),Va=null))),vb(e,t),ji(t),null;case 5:Kw(t);var a=uc(am.current);if(n=t.type,e!==null&&t.stateNode!=null)FP(e,t,n,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Ye(166));return ji(t),null}if(e=uc(xs.current),uy(t)){i=t.stateNode,n=t.type;var c=t.memoizedProps;switch(i[fs]=t,i[im]=c,e=(t.mode&1)!==0,n){case"dialog":pr("cancel",i),pr("close",i);break;case"iframe":case"object":case"embed":pr("load",i);break;case"video":case"audio":for(a=0;a<wf.length;a++)pr(wf[a],i);break;case"source":pr("error",i);break;case"img":case"image":case"link":pr("error",i),pr("load",i);break;case"details":pr("toggle",i);break;case"input":ok(i,c),pr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},pr("invalid",i);break;case"textarea":sk(i,c),pr("invalid",i)}qx(n,c),a=null;for(var d in c)if(c.hasOwnProperty(d)){var u=c[d];d==="children"?typeof u=="string"?i.textContent!==u&&(c.suppressHydrationWarning!==!0&&ly(i.textContent,u,e),a=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(c.suppressHydrationWarning!==!0&&ly(i.textContent,u,e),a=["children",""+u]):Zf.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&pr("scroll",i)}switch(n){case"input":ey(i),ak(i,c,!0);break;case"textarea":ey(i),lk(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=d0)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=pI(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=d.createElement(n,{is:i.is}):(e=d.createElement(n),n==="select"&&(d=e,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):e=d.createElementNS(e,n),e[fs]=t,e[im]=i,OP(e,t,!1,!1),t.stateNode=e;e:{switch(d=Hx(n,i),n){case"dialog":pr("cancel",e),pr("close",e),a=i;break;case"iframe":case"object":case"embed":pr("load",e),a=i;break;case"video":case"audio":for(a=0;a<wf.length;a++)pr(wf[a],e);a=i;break;case"source":pr("error",e),a=i;break;case"img":case"image":case"link":pr("error",e),pr("load",e),a=i;break;case"details":pr("toggle",e),a=i;break;case"input":ok(e,i),a=Nx(e,i),pr("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Ar({},i,{value:void 0}),pr("invalid",e);break;case"textarea":sk(e,i),a=Vx(e,i),pr("invalid",e);break;default:a=i}qx(n,a),u=a;for(c in u)if(u.hasOwnProperty(c)){var b=u[c];c==="style"?gI(e,b):c==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&fI(e,b)):c==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&Kf(e,b):typeof b=="number"&&Kf(e,""+b):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Zf.hasOwnProperty(c)?b!=null&&c==="onScroll"&&pr("scroll",e):b!=null&&Ew(e,c,b,d))}switch(n){case"input":ey(e),ak(e,i,!1);break;case"textarea":ey(e),lk(e);break;case"option":i.value!=null&&e.setAttribute("value",""+du(i.value));break;case"select":e.multiple=!!i.multiple,c=i.value,c!=null?nd(e,!!i.multiple,c,!1):i.defaultValue!=null&&nd(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=d0)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ji(t),null;case 6:if(e&&t.stateNode!=null)BP(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Ye(166));if(n=uc(am.current),uc(xs.current),uy(t)){if(i=t.stateNode,n=t.memoizedProps,i[fs]=t,(c=i.nodeValue!==n)&&(e=Yo,e!==null))switch(e.tag){case 3:ly(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ly(i.nodeValue,n,(e.mode&1)!==0)}c&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[fs]=t,t.stateNode=i}return ji(t),null;case 13:if(fr(Pr),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Sr&&Xo!==null&&t.mode&1&&!(t.flags&128))rP(),bd(),t.flags|=98560,c=!1;else if(c=uy(t),i!==null&&i.dehydrated!==null){if(e===null){if(!c)throw Error(Ye(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Ye(317));c[fs]=t}else bd(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ji(t),c=!1}else Va!==null&&(Eb(Va),Va=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Pr.current&1?ii===0&&(ii=3):l2())),t.updateQueue!==null&&(t.flags|=4),ji(t),null);case 4:return Sd(),vb(e,t),e===null&&nm(t.stateNode.containerInfo),ji(t),null;case 10:return qw(t.type._context),ji(t),null;case 17:return To(t.type)&&p0(),ji(t),null;case 19:if(fr(Pr),c=t.memoizedState,c===null)return ji(t),null;if(i=(t.flags&128)!==0,d=c.rendering,d===null)if(i)of(c,!1);else{if(ii!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=x0(e),d!==null){for(t.flags|=128,of(c,!1),i=d.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)c=n,e=i,c.flags&=14680066,d=c.alternate,d===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=d.childLanes,c.lanes=d.lanes,c.child=d.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=d.memoizedProps,c.memoizedState=d.memoizedState,c.updateQueue=d.updateQueue,c.type=d.type,e=d.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return lr(Pr,Pr.current&1|2),t.child}e=e.sibling}c.tail!==null&&Vr()>kd&&(t.flags|=128,i=!0,of(c,!1),t.lanes=4194304)}else{if(!i)if(e=x0(d),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),of(c,!0),c.tail===null&&c.tailMode==="hidden"&&!d.alternate&&!Sr)return ji(t),null}else 2*Vr()-c.renderingStartTime>kd&&n!==1073741824&&(t.flags|=128,i=!0,of(c,!1),t.lanes=4194304);c.isBackwards?(d.sibling=t.child,t.child=d):(n=c.last,n!==null?n.sibling=d:t.child=d,c.last=d)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=Vr(),t.sibling=null,n=Pr.current,lr(Pr,i?n&1|2:n&1),t):(ji(t),null);case 22:case 23:return s2(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?qo&1073741824&&(ji(t),t.subtreeFlags&6&&(t.flags|=8192)):ji(t),null;case 24:return null;case 25:return null}throw Error(Ye(156,t.tag))}function P6(e,t){switch(jw(t),t.tag){case 1:return To(t.type)&&p0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sd(),fr(Eo),fr(Gi),Xw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Kw(t),null;case 13:if(fr(Pr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ye(340));bd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fr(Pr),null;case 4:return Sd(),null;case 10:return qw(t.type._context),null;case 22:case 23:return s2(),null;case 24:return null;default:return null}}var dy=!1,qi=!1,M6=typeof WeakSet=="function"?WeakSet:Set,Et=null;function Jh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Br(e,t,i)}else n.current=null}function _b(e,t,n){try{n()}catch(i){Br(e,t,i)}}var Yk=!1;function A6(e,t){if(nb=u0,e=WI(),Bw(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{n.nodeType,c.nodeType}catch{n=null;break e}var d=0,u=-1,b=-1,w=0,I=0,k=e,P=null;t:for(;;){for(var R;k!==n||a!==0&&k.nodeType!==3||(u=d+a),k!==c||i!==0&&k.nodeType!==3||(b=d+i),k.nodeType===3&&(d+=k.nodeValue.length),(R=k.firstChild)!==null;)P=k,k=R;for(;;){if(k===e)break t;if(P===n&&++w===a&&(u=d),P===c&&++I===i&&(b=d),(R=k.nextSibling)!==null)break;k=P,P=k.parentNode}k=R}n=u===-1||b===-1?null:{start:u,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(rb={focusedElem:e,selectionRange:n},u0=!1,Et=t;Et!==null;)if(t=Et,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Et=e;else for(;Et!==null;){t=Et;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var V=N.memoizedProps,X=N.memoizedState,D=t.stateNode,B=D.getSnapshotBeforeUpdate(t.elementType===t.type?V:ja(t.type,V),X);D.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var j=t.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(G){Br(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,Et=e;break}Et=t.return}return N=Yk,Yk=!1,N}function $f(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var c=a.destroy;a.destroy=void 0,c!==void 0&&_b(t,n,c)}a=a.next}while(a!==i)}}function uv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function xb(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function NP(e){var t=e.alternate;t!==null&&(e.alternate=null,NP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fs],delete t[im],delete t[ab],delete t[p6],delete t[f6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function jP(e){return e.tag===5||e.tag===3||e.tag===4}function Jk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bb(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=d0));else if(i!==4&&(e=e.child,e!==null))for(bb(e,t,n),e=e.sibling;e!==null;)bb(e,t,n),e=e.sibling}function wb(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(wb(e,t,n),e=e.sibling;e!==null;)wb(e,t,n),e=e.sibling}var Ei=null,Ua=!1;function Hl(e,t,n){for(n=n.child;n!==null;)UP(e,t,n),n=n.sibling}function UP(e,t,n){if(_s&&typeof _s.onCommitFiberUnmount=="function")try{_s.onCommitFiberUnmount(tv,n)}catch{}switch(n.tag){case 5:qi||Jh(n,t);case 6:var i=Ei,a=Ua;Ei=null,Hl(e,t,n),Ei=i,Ua=a,Ei!==null&&(Ua?(e=Ei,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ei.removeChild(n.stateNode));break;case 18:Ei!==null&&(Ua?(e=Ei,n=n.stateNode,e.nodeType===8?Y_(e.parentNode,n):e.nodeType===1&&Y_(e,n),Qf(e)):Y_(Ei,n.stateNode));break;case 4:i=Ei,a=Ua,Ei=n.stateNode.containerInfo,Ua=!0,Hl(e,t,n),Ei=i,Ua=a;break;case 0:case 11:case 14:case 15:if(!qi&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var c=a,d=c.destroy;c=c.tag,d!==void 0&&(c&2||c&4)&&_b(n,t,d),a=a.next}while(a!==i)}Hl(e,t,n);break;case 1:if(!qi&&(Jh(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){Br(n,t,u)}Hl(e,t,n);break;case 21:Hl(e,t,n);break;case 22:n.mode&1?(qi=(i=qi)||n.memoizedState!==null,Hl(e,t,n),qi=i):Hl(e,t,n);break;default:Hl(e,t,n)}}function Qk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new M6),t.forEach(function(i){var a=N6.bind(null,e,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Oa(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var c=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:Ei=u.stateNode,Ua=!1;break e;case 3:Ei=u.stateNode.containerInfo,Ua=!0;break e;case 4:Ei=u.stateNode.containerInfo,Ua=!0;break e}u=u.return}if(Ei===null)throw Error(Ye(160));UP(c,d,a),Ei=null,Ua=!1;var b=a.alternate;b!==null&&(b.return=null),a.return=null}catch(w){Br(a,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)VP(t,e),t=t.sibling}function VP(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Oa(t,e),ss(e),i&4){try{$f(3,e,e.return),uv(3,e)}catch(V){Br(e,e.return,V)}try{$f(5,e,e.return)}catch(V){Br(e,e.return,V)}}break;case 1:Oa(t,e),ss(e),i&512&&n!==null&&Jh(n,n.return);break;case 5:if(Oa(t,e),ss(e),i&512&&n!==null&&Jh(n,n.return),e.flags&32){var a=e.stateNode;try{Kf(a,"")}catch(V){Br(e,e.return,V)}}if(i&4&&(a=e.stateNode,a!=null)){var c=e.memoizedProps,d=n!==null?n.memoizedProps:c,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&c.type==="radio"&&c.name!=null&&hI(a,c),Hx(u,d);var w=Hx(u,c);for(d=0;d<b.length;d+=2){var I=b[d],k=b[d+1];I==="style"?gI(a,k):I==="dangerouslySetInnerHTML"?fI(a,k):I==="children"?Kf(a,k):Ew(a,I,k,w)}switch(u){case"input":jx(a,c);break;case"textarea":dI(a,c);break;case"select":var P=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var R=c.value;R!=null?nd(a,!!c.multiple,R,!1):P!==!!c.multiple&&(c.defaultValue!=null?nd(a,!!c.multiple,c.defaultValue,!0):nd(a,!!c.multiple,c.multiple?[]:"",!1))}a[im]=c}catch(V){Br(e,e.return,V)}}break;case 6:if(Oa(t,e),ss(e),i&4){if(e.stateNode===null)throw Error(Ye(162));a=e.stateNode,c=e.memoizedProps;try{a.nodeValue=c}catch(V){Br(e,e.return,V)}}break;case 3:if(Oa(t,e),ss(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Qf(t.containerInfo)}catch(V){Br(e,e.return,V)}break;case 4:Oa(t,e),ss(e);break;case 13:Oa(t,e),ss(e),a=e.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(o2=Vr())),i&4&&Qk(e);break;case 22:if(I=n!==null&&n.memoizedState!==null,e.mode&1?(qi=(w=qi)||I,Oa(t,e),qi=w):Oa(t,e),ss(e),i&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!I&&e.mode&1)for(Et=e,I=e.child;I!==null;){for(k=Et=I;Et!==null;){switch(P=Et,R=P.child,P.tag){case 0:case 11:case 14:case 15:$f(4,P,P.return);break;case 1:Jh(P,P.return);var N=P.stateNode;if(typeof N.componentWillUnmount=="function"){i=P,n=P.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(V){Br(i,n,V)}}break;case 5:Jh(P,P.return);break;case 22:if(P.memoizedState!==null){tE(k);continue}}R!==null?(R.return=P,Et=R):tE(k)}I=I.sibling}e:for(I=null,k=e;;){if(k.tag===5){if(I===null){I=k;try{a=k.stateNode,w?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(u=k.stateNode,b=k.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=mI("display",d))}catch(V){Br(e,e.return,V)}}}else if(k.tag===6){if(I===null)try{k.stateNode.nodeValue=w?"":k.memoizedProps}catch(V){Br(e,e.return,V)}}else if((k.tag!==22&&k.tag!==23||k.memoizedState===null||k===e)&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===e)break e;for(;k.sibling===null;){if(k.return===null||k.return===e)break e;I===k&&(I=null),k=k.return}I===k&&(I=null),k.sibling.return=k.return,k=k.sibling}}break;case 19:Oa(t,e),ss(e),i&4&&Qk(e);break;case 21:break;default:Oa(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(jP(n)){var i=n;break e}n=n.return}throw Error(Ye(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Kf(a,""),i.flags&=-33);var c=Jk(e);wb(e,c,a);break;case 3:case 4:var d=i.stateNode.containerInfo,u=Jk(e);bb(e,u,d);break;default:throw Error(Ye(161))}}catch(b){Br(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function L6(e,t,n){Et=e,WP(e)}function WP(e,t,n){for(var i=(e.mode&1)!==0;Et!==null;){var a=Et,c=a.child;if(a.tag===22&&i){var d=a.memoizedState!==null||dy;if(!d){var u=a.alternate,b=u!==null&&u.memoizedState!==null||qi;u=dy;var w=qi;if(dy=d,(qi=b)&&!w)for(Et=a;Et!==null;)d=Et,b=d.child,d.tag===22&&d.memoizedState!==null?nE(a):b!==null?(b.return=d,Et=b):nE(a);for(;c!==null;)Et=c,WP(c),c=c.sibling;Et=a,dy=u,qi=w}eE(e)}else a.subtreeFlags&8772&&c!==null?(c.return=a,Et=c):eE(e)}}function eE(e){for(;Et!==null;){var t=Et;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qi||uv(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!qi)if(n===null)i.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ja(t.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&Fk(t,c,i);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fk(t,d,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var I=w.memoizedState;if(I!==null){var k=I.dehydrated;k!==null&&Qf(k)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}qi||t.flags&512&&xb(t)}catch(P){Br(t,t.return,P)}}if(t===e){Et=null;break}if(n=t.sibling,n!==null){n.return=t.return,Et=n;break}Et=t.return}}function tE(e){for(;Et!==null;){var t=Et;if(t===e){Et=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Et=n;break}Et=t.return}}function nE(e){for(;Et!==null;){var t=Et;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uv(4,t)}catch(b){Br(t,n,b)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(b){Br(t,a,b)}}var c=t.return;try{xb(t)}catch(b){Br(t,c,b)}break;case 5:var d=t.return;try{xb(t)}catch(b){Br(t,d,b)}}}catch(b){Br(t,t.return,b)}if(t===e){Et=null;break}var u=t.sibling;if(u!==null){u.return=t.return,Et=u;break}Et=t.return}}var z6=Math.ceil,S0=cl.ReactCurrentDispatcher,r2=cl.ReactCurrentOwner,Ca=cl.ReactCurrentBatchConfig,En=0,vi=null,Yr=null,Pi=0,qo=0,Qh=_u(0),ii=0,cm=null,Cc=0,cv=0,i2=0,Of=null,Co=null,o2=0,kd=1/0,Gs=null,C0=!1,Sb=null,lu=null,py=!1,eu=null,k0=0,Ff=0,Cb=null,Ny=-1,jy=0;function uo(){return En&6?Vr():Ny!==-1?Ny:Ny=Vr()}function uu(e){return e.mode&1?En&2&&Pi!==0?Pi&-Pi:g6.transition!==null?(jy===0&&(jy=II()),jy):(e=Hn,e!==0||(e=window.event,e=e===void 0?16:DI(e.type)),e):1}function Ka(e,t,n,i){if(50<Ff)throw Ff=0,Cb=null,Error(Ye(185));Lm(e,n,i),(!(En&2)||e!==vi)&&(e===vi&&(!(En&2)&&(cv|=n),ii===4&&Yl(e,Pi)),Io(e,i),n===1&&En===0&&!(t.mode&1)&&(kd=Vr()+500,av&&xu()))}function Io(e,t){var n=e.callbackNode;gR(e,t);var i=l0(e,e===vi?Pi:0);if(i===0)n!==null&&hk(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&hk(n),t===1)e.tag===0?m6(rE.bind(null,e)):eP(rE.bind(null,e)),h6(function(){!(En&6)&&xu()}),n=null;else{switch(PI(i)){case 1:n=Aw;break;case 4:n=EI;break;case 16:n=s0;break;case 536870912:n=TI;break;default:n=s0}n=JP(n,qP.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qP(e,t){if(Ny=-1,jy=0,En&6)throw Error(Ye(327));var n=e.callbackNode;if(sd()&&e.callbackNode!==n)return null;var i=l0(e,e===vi?Pi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=E0(e,i);else{t=i;var a=En;En|=2;var c=GP();(vi!==e||Pi!==t)&&(Gs=null,kd=Vr()+500,pc(e,t));do try{$6();break}catch(u){HP(e,u)}while(!0);Ww(),S0.current=c,En=a,Yr!==null?t=0:(vi=null,Pi=0,t=ii)}if(t!==0){if(t===2&&(a=Yx(e),a!==0&&(i=a,t=kb(e,a))),t===1)throw n=cm,pc(e,0),Yl(e,i),Io(e,Vr()),n;if(t===6)Yl(e,i);else{if(a=e.current.alternate,!(i&30)&&!R6(a)&&(t=E0(e,i),t===2&&(c=Yx(e),c!==0&&(i=c,t=kb(e,c))),t===1))throw n=cm,pc(e,0),Yl(e,i),Io(e,Vr()),n;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(Ye(345));case 2:tc(e,Co,Gs);break;case 3:if(Yl(e,i),(i&130023424)===i&&(t=o2+500-Vr(),10<t)){if(l0(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){uo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ob(tc.bind(null,e,Co,Gs),t);break}tc(e,Co,Gs);break;case 4:if(Yl(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var d=31-Za(i);c=1<<d,d=t[d],d>a&&(a=d),i&=~c}if(i=a,i=Vr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*z6(i/1960))-i,10<i){e.timeoutHandle=ob(tc.bind(null,e,Co,Gs),i);break}tc(e,Co,Gs);break;case 5:tc(e,Co,Gs);break;default:throw Error(Ye(329))}}}return Io(e,Vr()),e.callbackNode===n?qP.bind(null,e):null}function kb(e,t){var n=Of;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),e=E0(e,t),e!==2&&(t=Co,Co=n,t!==null&&Eb(t)),e}function Eb(e){Co===null?Co=e:Co.push.apply(Co,e)}function R6(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],c=a.getSnapshot;a=a.value;try{if(!Ya(c(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Yl(e,t){for(t&=~i2,t&=~cv,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Za(t),i=1<<n;e[n]=-1,t&=~i}}function rE(e){if(En&6)throw Error(Ye(327));sd();var t=l0(e,0);if(!(t&1))return Io(e,Vr()),null;var n=E0(e,t);if(e.tag!==0&&n===2){var i=Yx(e);i!==0&&(t=i,n=kb(e,i))}if(n===1)throw n=cm,pc(e,0),Yl(e,t),Io(e,Vr()),n;if(n===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tc(e,Co,Gs),Io(e,Vr()),null}function a2(e,t){var n=En;En|=1;try{return e(t)}finally{En=n,En===0&&(kd=Vr()+500,av&&xu())}}function kc(e){eu!==null&&eu.tag===0&&!(En&6)&&sd();var t=En;En|=1;var n=Ca.transition,i=Hn;try{if(Ca.transition=null,Hn=1,e)return e()}finally{Hn=i,Ca.transition=n,En=t,!(En&6)&&xu()}}function s2(){qo=Qh.current,fr(Qh)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,c6(n)),Yr!==null)for(n=Yr.return;n!==null;){var i=n;switch(jw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&p0();break;case 3:Sd(),fr(Eo),fr(Gi),Xw();break;case 5:Kw(i);break;case 4:Sd();break;case 13:fr(Pr);break;case 19:fr(Pr);break;case 10:qw(i.type._context);break;case 22:case 23:s2()}n=n.return}if(vi=e,Yr=e=cu(e.current,null),Pi=qo=t,ii=0,cm=null,i2=cv=Cc=0,Co=Of=null,lc!==null){for(t=0;t<lc.length;t++)if(n=lc[t],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,c=n.pending;if(c!==null){var d=c.next;c.next=a,i.next=d}n.pending=i}lc=null}return e}function HP(e,t){do{var n=Yr;try{if(Ww(),Oy.current=w0,b0){for(var i=Mr.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}b0=!1}if(Sc=0,gi=ri=Mr=null,Df=!1,sm=0,r2.current=null,n===null||n.return===null){ii=1,cm=t,Yr=null;break}e:{var c=e,d=n.return,u=n,b=t;if(t=Pi,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,I=u,k=I.tag;if(!(I.mode&1)&&(k===0||k===11||k===15)){var P=I.alternate;P?(I.updateQueue=P.updateQueue,I.memoizedState=P.memoizedState,I.lanes=P.lanes):(I.updateQueue=null,I.memoizedState=null)}var R=Wk(d);if(R!==null){R.flags&=-257,qk(R,d,u,c,t),R.mode&1&&Vk(c,w,t),t=R,b=w;var N=t.updateQueue;if(N===null){var V=new Set;V.add(b),t.updateQueue=V}else N.add(b);break e}else{if(!(t&1)){Vk(c,w,t),l2();break e}b=Error(Ye(426))}}else if(Sr&&u.mode&1){var X=Wk(d);if(X!==null){!(X.flags&65536)&&(X.flags|=256),qk(X,d,u,c,t),Uw(Cd(b,u));break e}}c=b=Cd(b,u),ii!==4&&(ii=2),Of===null?Of=[c]:Of.push(c),c=d;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var D=PP(c,b,t);Ok(c,D);break e;case 1:u=b;var B=c.type,j=c.stateNode;if(!(c.flags&128)&&(typeof B.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(lu===null||!lu.has(j)))){c.flags|=65536,t&=-t,c.lanes|=t;var G=MP(c,u,t);Ok(c,G);break e}}c=c.return}while(c!==null)}KP(n)}catch(te){t=te,Yr===n&&n!==null&&(Yr=n=n.return);continue}break}while(!0)}function GP(){var e=S0.current;return S0.current=w0,e===null?w0:e}function l2(){(ii===0||ii===3||ii===2)&&(ii=4),vi===null||!(Cc&268435455)&&!(cv&268435455)||Yl(vi,Pi)}function E0(e,t){var n=En;En|=2;var i=GP();(vi!==e||Pi!==t)&&(Gs=null,pc(e,t));do try{D6();break}catch(a){HP(e,a)}while(!0);if(Ww(),En=n,S0.current=i,Yr!==null)throw Error(Ye(261));return vi=null,Pi=0,ii}function D6(){for(;Yr!==null;)ZP(Yr)}function $6(){for(;Yr!==null&&!sR();)ZP(Yr)}function ZP(e){var t=YP(e.alternate,e,qo);e.memoizedProps=e.pendingProps,t===null?KP(e):Yr=t,r2.current=null}function KP(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=P6(n,t),n!==null){n.flags&=32767,Yr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ii=6,Yr=null;return}}else if(n=I6(n,t,qo),n!==null){Yr=n;return}if(t=t.sibling,t!==null){Yr=t;return}Yr=t=e}while(t!==null);ii===0&&(ii=5)}function tc(e,t,n){var i=Hn,a=Ca.transition;try{Ca.transition=null,Hn=1,O6(e,t,n,i)}finally{Ca.transition=a,Hn=i}return null}function O6(e,t,n,i){do sd();while(eu!==null);if(En&6)throw Error(Ye(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var c=n.lanes|n.childLanes;if(yR(e,c),e===vi&&(Yr=vi=null,Pi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||py||(py=!0,JP(s0,function(){return sd(),null})),c=(n.flags&15990)!==0,n.subtreeFlags&15990||c){c=Ca.transition,Ca.transition=null;var d=Hn;Hn=1;var u=En;En|=4,r2.current=null,A6(e,n),VP(n,e),r6(rb),u0=!!nb,rb=nb=null,e.current=n,L6(n),lR(),En=u,Hn=d,Ca.transition=c}else e.current=n;if(py&&(py=!1,eu=e,k0=a),c=e.pendingLanes,c===0&&(lu=null),hR(n.stateNode),Io(e,Vr()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(C0)throw C0=!1,e=Sb,Sb=null,e;return k0&1&&e.tag!==0&&sd(),c=e.pendingLanes,c&1?e===Cb?Ff++:(Ff=0,Cb=e):Ff=0,xu(),null}function sd(){if(eu!==null){var e=PI(k0),t=Ca.transition,n=Hn;try{if(Ca.transition=null,Hn=16>e?16:e,eu===null)var i=!1;else{if(e=eu,eu=null,k0=0,En&6)throw Error(Ye(331));var a=En;for(En|=4,Et=e.current;Et!==null;){var c=Et,d=c.child;if(Et.flags&16){var u=c.deletions;if(u!==null){for(var b=0;b<u.length;b++){var w=u[b];for(Et=w;Et!==null;){var I=Et;switch(I.tag){case 0:case 11:case 15:$f(8,I,c)}var k=I.child;if(k!==null)k.return=I,Et=k;else for(;Et!==null;){I=Et;var P=I.sibling,R=I.return;if(NP(I),I===w){Et=null;break}if(P!==null){P.return=R,Et=P;break}Et=R}}}var N=c.alternate;if(N!==null){var V=N.child;if(V!==null){N.child=null;do{var X=V.sibling;V.sibling=null,V=X}while(V!==null)}}Et=c}}if(c.subtreeFlags&2064&&d!==null)d.return=c,Et=d;else e:for(;Et!==null;){if(c=Et,c.flags&2048)switch(c.tag){case 0:case 11:case 15:$f(9,c,c.return)}var D=c.sibling;if(D!==null){D.return=c.return,Et=D;break e}Et=c.return}}var B=e.current;for(Et=B;Et!==null;){d=Et;var j=d.child;if(d.subtreeFlags&2064&&j!==null)j.return=d,Et=j;else e:for(d=B;Et!==null;){if(u=Et,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:uv(9,u)}}catch(te){Br(u,u.return,te)}if(u===d){Et=null;break e}var G=u.sibling;if(G!==null){G.return=u.return,Et=G;break e}Et=u.return}}if(En=a,xu(),_s&&typeof _s.onPostCommitFiberRoot=="function")try{_s.onPostCommitFiberRoot(tv,e)}catch{}i=!0}return i}finally{Hn=n,Ca.transition=t}}return!1}function iE(e,t,n){t=Cd(n,t),t=PP(e,t,1),e=su(e,t,1),t=uo(),e!==null&&(Lm(e,1,t),Io(e,t))}function Br(e,t,n){if(e.tag===3)iE(e,e,n);else for(;t!==null;){if(t.tag===3){iE(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lu===null||!lu.has(i))){e=Cd(n,e),e=MP(t,e,1),t=su(t,e,1),e=uo(),t!==null&&(Lm(t,1,e),Io(t,e));break}}t=t.return}}function F6(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=uo(),e.pingedLanes|=e.suspendedLanes&n,vi===e&&(Pi&n)===n&&(ii===4||ii===3&&(Pi&130023424)===Pi&&500>Vr()-o2?pc(e,0):i2|=n),Io(e,t)}function XP(e,t){t===0&&(e.mode&1?(t=ry,ry<<=1,!(ry&130023424)&&(ry=4194304)):t=1);var n=uo();e=nl(e,t),e!==null&&(Lm(e,t,n),Io(e,n))}function B6(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),XP(e,n)}function N6(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Ye(314))}i!==null&&i.delete(t),XP(e,n)}var YP;YP=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Eo.current)ko=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ko=!1,T6(e,t,n);ko=!!(e.flags&131072)}else ko=!1,Sr&&t.flags&1048576&&tP(t,g0,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;By(e,t),e=t.pendingProps;var a=xd(t,Gi.current);ad(t,n),a=Jw(null,t,i,e,a,n);var c=Qw();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,To(i)?(c=!0,f0(t)):c=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Gw(t),a.updater=lv,t.stateNode=a,a._reactInternals=t,db(t,i,e,n),t=mb(null,t,i,!0,c,n)):(t.tag=0,Sr&&c&&Nw(t),so(null,t,a,n),t=t.child),t;case 16:i=t.elementType;e:{switch(By(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=U6(i),e=ja(i,e),a){case 0:t=fb(null,t,i,e,n);break e;case 1:t=Zk(null,t,i,e,n);break e;case 11:t=Hk(null,t,i,e,n);break e;case 14:t=Gk(null,t,i,ja(i.type,e),n);break e}throw Error(Ye(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ja(i,a),fb(e,t,i,a,n);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ja(i,a),Zk(e,t,i,a,n);case 3:e:{if(RP(t),e===null)throw Error(Ye(387));i=t.pendingProps,c=t.memoizedState,a=c.element,sP(e,t),_0(t,i,null,n);var d=t.memoizedState;if(i=d.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){a=Cd(Error(Ye(423)),t),t=Kk(e,t,i,n,a);break e}else if(i!==a){a=Cd(Error(Ye(424)),t),t=Kk(e,t,i,n,a);break e}else for(Xo=au(t.stateNode.containerInfo.firstChild),Yo=t,Sr=!0,Va=null,n=oP(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(bd(),i===a){t=rl(e,t,n);break e}so(e,t,i,n)}t=t.child}return t;case 5:return lP(t),e===null&&ub(t),i=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,d=a.children,ib(i,a)?d=null:c!==null&&ib(i,c)&&(t.flags|=32),zP(e,t),so(e,t,d,n),t.child;case 6:return e===null&&ub(t),null;case 13:return DP(e,t,n);case 4:return Zw(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=wd(t,null,i,n):so(e,t,i,n),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ja(i,a),Hk(e,t,i,a,n);case 7:return so(e,t,t.pendingProps,n),t.child;case 8:return so(e,t,t.pendingProps.children,n),t.child;case 12:return so(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,c=t.memoizedProps,d=a.value,lr(y0,i._currentValue),i._currentValue=d,c!==null)if(Ya(c.value,d)){if(c.children===a.children&&!Eo.current){t=rl(e,t,n);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var u=c.dependencies;if(u!==null){d=c.child;for(var b=u.firstContext;b!==null;){if(b.context===i){if(c.tag===1){b=Js(-1,n&-n),b.tag=2;var w=c.updateQueue;if(w!==null){w=w.shared;var I=w.pending;I===null?b.next=b:(b.next=I.next,I.next=b),w.pending=b}}c.lanes|=n,b=c.alternate,b!==null&&(b.lanes|=n),cb(c.return,n,t),u.lanes|=n;break}b=b.next}}else if(c.tag===10)d=c.type===t.type?null:c.child;else if(c.tag===18){if(d=c.return,d===null)throw Error(Ye(341));d.lanes|=n,u=d.alternate,u!==null&&(u.lanes|=n),cb(d,n,t),d=c.sibling}else d=c.child;if(d!==null)d.return=c;else for(d=c;d!==null;){if(d===t){d=null;break}if(c=d.sibling,c!==null){c.return=d.return,d=c;break}d=d.return}c=d}so(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,ad(t,n),a=ka(a),i=i(a),t.flags|=1,so(e,t,i,n),t.child;case 14:return i=t.type,a=ja(i,t.pendingProps),a=ja(i.type,a),Gk(e,t,i,a,n);case 15:return AP(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:ja(i,a),By(e,t),t.tag=1,To(i)?(e=!0,f0(t)):e=!1,ad(t,n),IP(t,i,a),db(t,i,a,n),mb(null,t,i,!0,e,n);case 19:return $P(e,t,n);case 22:return LP(e,t,n)}throw Error(Ye(156,t.tag))};function JP(e,t){return kI(e,t)}function j6(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ba(e,t,n,i){return new j6(e,t,n,i)}function u2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U6(e){if(typeof e=="function")return u2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Iw)return 11;if(e===Pw)return 14}return 2}function cu(e,t){var n=e.alternate;return n===null?(n=ba(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Uy(e,t,n,i,a,c){var d=2;if(i=e,typeof e=="function")u2(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case Vh:return fc(n.children,a,c,t);case Tw:d=8,a|=8;break;case $x:return e=ba(12,n,t,a|2),e.elementType=$x,e.lanes=c,e;case Ox:return e=ba(13,n,t,a),e.elementType=Ox,e.lanes=c,e;case Fx:return e=ba(19,n,t,a),e.elementType=Fx,e.lanes=c,e;case lI:return hv(n,a,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case aI:d=10;break e;case sI:d=9;break e;case Iw:d=11;break e;case Pw:d=14;break e;case Zl:d=16,i=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return t=ba(d,n,t,a),t.elementType=e,t.type=i,t.lanes=c,t}function fc(e,t,n,i){return e=ba(7,e,i,t),e.lanes=n,e}function hv(e,t,n,i){return e=ba(22,e,i,t),e.elementType=lI,e.lanes=n,e.stateNode={isHidden:!1},e}function ox(e,t,n){return e=ba(6,e,null,t),e.lanes=n,e}function ax(e,t,n){return t=ba(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function V6(e,t,n,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N_(0),this.expirationTimes=N_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N_(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function c2(e,t,n,i,a,c,d,u,b){return e=new V6(e,t,n,u,b),t===1?(t=1,c===!0&&(t|=8)):t=0,c=ba(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gw(c),e}function W6(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uh,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function QP(e){if(!e)return pu;e=e._reactInternals;e:{if(Ac(e)!==e||e.tag!==1)throw Error(Ye(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(To(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ye(171))}if(e.tag===1){var n=e.type;if(To(n))return QI(e,n,t)}return t}function e3(e,t,n,i,a,c,d,u,b){return e=c2(n,i,!0,e,a,c,d,u,b),e.context=QP(null),n=e.current,i=uo(),a=uu(n),c=Js(i,a),c.callback=t??null,su(n,c,a),e.current.lanes=a,Lm(e,a,i),Io(e,i),e}function dv(e,t,n,i){var a=t.current,c=uo(),d=uu(a);return n=QP(n),t.context===null?t.context=n:t.pendingContext=n,t=Js(c,d),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=su(a,t,d),e!==null&&(Ka(e,a,d,c),$y(e,a,d)),d}function T0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function oE(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function h2(e,t){oE(e,t),(e=e.alternate)&&oE(e,t)}function q6(){return null}var t3=typeof reportError=="function"?reportError:function(e){console.error(e)};function d2(e){this._internalRoot=e}pv.prototype.render=d2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ye(409));dv(e,t,null,null)};pv.prototype.unmount=d2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;kc(function(){dv(null,e,null,null)}),t[tl]=null}};function pv(e){this._internalRoot=e}pv.prototype.unstable_scheduleHydration=function(e){if(e){var t=LI();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xl.length&&t!==0&&t<Xl[n].priority;n++);Xl.splice(n,0,e),n===0&&RI(e)}};function p2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function aE(){}function H6(e,t,n,i,a){if(a){if(typeof i=="function"){var c=i;i=function(){var w=T0(d);c.call(w)}}var d=e3(t,i,e,0,null,!1,!1,"",aE);return e._reactRootContainer=d,e[tl]=d.current,nm(e.nodeType===8?e.parentNode:e),kc(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var u=i;i=function(){var w=T0(b);u.call(w)}}var b=c2(e,0,!1,null,null,!1,!1,"",aE);return e._reactRootContainer=b,e[tl]=b.current,nm(e.nodeType===8?e.parentNode:e),kc(function(){dv(t,b,n,i)}),b}function mv(e,t,n,i,a){var c=n._reactRootContainer;if(c){var d=c;if(typeof a=="function"){var u=a;a=function(){var b=T0(d);u.call(b)}}dv(t,d,e,a)}else d=H6(n,t,e,a,i);return T0(d)}MI=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=bf(t.pendingLanes);n!==0&&(Lw(t,n|1),Io(t,Vr()),!(En&6)&&(kd=Vr()+500,xu()))}break;case 13:kc(function(){var i=nl(e,1);if(i!==null){var a=uo();Ka(i,e,1,a)}}),h2(e,1)}};zw=function(e){if(e.tag===13){var t=nl(e,134217728);if(t!==null){var n=uo();Ka(t,e,134217728,n)}h2(e,134217728)}};AI=function(e){if(e.tag===13){var t=uu(e),n=nl(e,t);if(n!==null){var i=uo();Ka(n,e,t,i)}h2(e,t)}};LI=function(){return Hn};zI=function(e,t){var n=Hn;try{return Hn=e,t()}finally{Hn=n}};Zx=function(e,t,n){switch(t){case"input":if(jx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=ov(i);if(!a)throw Error(Ye(90));cI(i),jx(i,a)}}}break;case"textarea":dI(e,n);break;case"select":t=n.value,t!=null&&nd(e,!!n.multiple,t,!1)}};_I=a2;xI=kc;var G6={usingClientEntryPoint:!1,Events:[Rm,Gh,ov,yI,vI,a2]},af={findFiberByHostInstance:sc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z6={bundleType:af.bundleType,version:af.version,rendererPackageName:af.rendererPackageName,rendererConfig:af.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cl.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=SI(e),e===null?null:e.stateNode},findFiberByHostInstance:af.findFiberByHostInstance||q6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fy.isDisabled&&fy.supportsFiber)try{tv=fy.inject(Z6),_s=fy}catch{}}ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G6;ea.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p2(t))throw Error(Ye(200));return W6(e,t,null,n)};ea.createRoot=function(e,t){if(!p2(e))throw Error(Ye(299));var n=!1,i="",a=t3;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=c2(e,1,!1,null,null,n,!1,i,a),e[tl]=t.current,nm(e.nodeType===8?e.parentNode:e),new d2(t)};ea.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=SI(t),e=e===null?null:e.stateNode,e};ea.flushSync=function(e){return kc(e)};ea.hydrate=function(e,t,n){if(!fv(t))throw Error(Ye(200));return mv(null,e,t,!0,n)};ea.hydrateRoot=function(e,t,n){if(!p2(e))throw Error(Ye(405));var i=n!=null&&n.hydratedSources||null,a=!1,c="",d=t3;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=e3(t,null,e,1,n??null,a,!1,c,d),e[tl]=t.current,nm(e),i)for(e=0;e<i.length;e++)n=i[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new pv(t)};ea.render=function(e,t,n){if(!fv(t))throw Error(Ye(200));return mv(null,e,t,!1,n)};ea.unmountComponentAtNode=function(e){if(!fv(e))throw Error(Ye(40));return e._reactRootContainer?(kc(function(){mv(null,null,e,!1,function(){e._reactRootContainer=null,e[tl]=null})}),!0):!1};ea.unstable_batchedUpdates=a2;ea.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!fv(n))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return mv(e,t,n,!1,i)};ea.version="18.3.1-next-f1338f8080-20240426";function n3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n3)}catch(e){console.error(e)}}n3(),nI.exports=ea;var f2=nI.exports;const my=Mm(f2);var sE=f2;Rx.createRoot=sE.createRoot,Rx.hydrateRoot=sE.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hm(){return hm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hm.apply(this,arguments)}var tu;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(tu||(tu={}));const lE="popstate";function K6(e){e===void 0&&(e={});function t(i,a){let{pathname:c,search:d,hash:u}=i.location;return Tb("",{pathname:c,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){return typeof a=="string"?a:i3(a)}return Y6(t,n,null,e)}function ai(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function r3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function X6(){return Math.random().toString(36).substr(2,8)}function uE(e,t){return{usr:e.state,key:e.key,idx:t}}function Tb(e,t,n,i){return n===void 0&&(n=null),hm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?zd(t):t,{state:n,key:t&&t.key||i||X6()})}function i3(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function zd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Y6(e,t,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:c=!1}=i,d=a.history,u=tu.Pop,b=null,w=I();w==null&&(w=0,d.replaceState(hm({},d.state,{idx:w}),""));function I(){return(d.state||{idx:null}).idx}function k(){u=tu.Pop;let X=I(),D=X==null?null:X-w;w=X,b&&b({action:u,location:V.location,delta:D})}function P(X,D){u=tu.Push;let B=Tb(V.location,X,D);w=I()+1;let j=uE(B,w),G=V.createHref(B);try{d.pushState(j,"",G)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;a.location.assign(G)}c&&b&&b({action:u,location:V.location,delta:1})}function R(X,D){u=tu.Replace;let B=Tb(V.location,X,D);w=I();let j=uE(B,w),G=V.createHref(B);d.replaceState(j,"",G),c&&b&&b({action:u,location:V.location,delta:0})}function N(X){let D=a.location.origin!=="null"?a.location.origin:a.location.href,B=typeof X=="string"?X:i3(X);return B=B.replace(/ $/,"%20"),ai(D,"No window.location.(origin|href) available to create URL for href: "+B),new URL(B,D)}let V={get action(){return u},get location(){return e(a,d)},listen(X){if(b)throw new Error("A history only accepts one active listener");return a.addEventListener(lE,k),b=X,()=>{a.removeEventListener(lE,k),b=null}},createHref(X){return t(a,X)},createURL:N,encodeLocation(X){let D=N(X);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:P,replace:R,go(X){return d.go(X)}};return V}var cE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cE||(cE={}));function J6(e,t,n){return n===void 0&&(n="/"),Q6(e,t,n,!1)}function Q6(e,t,n,i){let a=typeof t=="string"?zd(t):t,c=s3(a.pathname||"/",n);if(c==null)return null;let d=o3(e);eD(d);let u=null;for(let b=0;u==null&&b<d.length;++b){let w=hD(c);u=uD(d[b],w,i)}return u}function o3(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(c,d,u)=>{let b={relativePath:u===void 0?c.path||"":u,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};b.relativePath.startsWith("/")&&(ai(b.relativePath.startsWith(i),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(i.length));let w=mc([i,b.relativePath]),I=n.concat(b);c.children&&c.children.length>0&&(ai(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),o3(c.children,t,I,w)),!(c.path==null&&!c.index)&&t.push({path:w,score:sD(w,c.index),routesMeta:I})};return e.forEach((c,d)=>{var u;if(c.path===""||!((u=c.path)!=null&&u.includes("?")))a(c,d);else for(let b of a3(c.path))a(c,d,b)}),t}function a3(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,a=n.endsWith("?"),c=n.replace(/\?$/,"");if(i.length===0)return a?[c,""]:[c];let d=a3(i.join("/")),u=[];return u.push(...d.map(b=>b===""?c:[c,b].join("/"))),a&&u.push(...d),u.map(b=>e.startsWith("/")&&b===""?"/":b)}function eD(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:lD(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const tD=/^:[\w-]+$/,nD=3,rD=2,iD=1,oD=10,aD=-2,hE=e=>e==="*";function sD(e,t){let n=e.split("/"),i=n.length;return n.some(hE)&&(i+=aD),t&&(i+=rD),n.filter(a=>!hE(a)).reduce((a,c)=>a+(tD.test(c)?nD:c===""?iD:oD),i)}function lD(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function uD(e,t,n){let{routesMeta:i}=e,a={},c="/",d=[];for(let u=0;u<i.length;++u){let b=i[u],w=u===i.length-1,I=c==="/"?t:t.slice(c.length)||"/",k=dE({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},I),P=b.route;if(!k&&w&&n&&!i[i.length-1].route.index&&(k=dE({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},I)),!k)return null;Object.assign(a,k.params),d.push({params:a,pathname:mc([c,k.pathname]),pathnameBase:yD(mc([c,k.pathnameBase])),route:P}),k.pathnameBase!=="/"&&(c=mc([c,k.pathnameBase]))}return d}function dE(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=cD(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let c=a[0],d=c.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:i.reduce((w,I,k)=>{let{paramName:P,isOptional:R}=I;if(P==="*"){let V=u[k]||"";d=c.slice(0,c.length-V.length).replace(/(.)\/+$/,"$1")}const N=u[k];return R&&!N?w[P]=void 0:w[P]=(N||"").replace(/%2F/g,"/"),w},{}),pathname:c,pathnameBase:d,pattern:e}}function cD(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),r3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,b)=>(i.push({paramName:u,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function hD(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return r3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function s3(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function dD(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:a=""}=typeof e=="string"?zd(e):e;return{pathname:n?n.startsWith("/")?n:pD(n,t):t,search:vD(i),hash:_D(a)}}function pD(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function sx(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function fD(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function mD(e,t){let n=fD(e);return t?n.map((i,a)=>a===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function gD(e,t,n,i){i===void 0&&(i=!1);let a;typeof e=="string"?a=zd(e):(a=hm({},e),ai(!a.pathname||!a.pathname.includes("?"),sx("?","pathname","search",a)),ai(!a.pathname||!a.pathname.includes("#"),sx("#","pathname","hash",a)),ai(!a.search||!a.search.includes("#"),sx("#","search","hash",a)));let c=e===""||a.pathname==="",d=c?"/":a.pathname,u;if(d==null)u=n;else{let k=t.length-1;if(!i&&d.startsWith("..")){let P=d.split("/");for(;P[0]==="..";)P.shift(),k-=1;a.pathname=P.join("/")}u=k>=0?t[k]:"/"}let b=dD(a,u),w=d&&d!=="/"&&d.endsWith("/"),I=(c||d===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(w||I)&&(b.pathname+="/"),b}const mc=e=>e.join("/").replace(/\/\/+/g,"/"),yD=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),vD=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_D=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xD(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l3=["post","put","patch","delete"];new Set(l3);const bD=["get",...l3];new Set(bD);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dm.apply(this,arguments)}const m2=ie.createContext(null),wD=ie.createContext(null),gv=ie.createContext(null),yv=ie.createContext(null),Rd=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),u3=ie.createContext(null);function vv(){return ie.useContext(yv)!=null}function g2(){return vv()||ai(!1),ie.useContext(yv).location}function c3(e){ie.useContext(gv).static||ie.useLayoutEffect(e)}function y2(){let{isDataRoute:e}=ie.useContext(Rd);return e?DD():SD()}function SD(){vv()||ai(!1);let e=ie.useContext(m2),{basename:t,future:n,navigator:i}=ie.useContext(gv),{matches:a}=ie.useContext(Rd),{pathname:c}=g2(),d=JSON.stringify(mD(a,n.v7_relativeSplatPath)),u=ie.useRef(!1);return c3(()=>{u.current=!0}),ie.useCallback(function(w,I){if(I===void 0&&(I={}),!u.current)return;if(typeof w=="number"){i.go(w);return}let k=gD(w,JSON.parse(d),c,I.relative==="path");e==null&&t!=="/"&&(k.pathname=k.pathname==="/"?t:mc([t,k.pathname])),(I.replace?i.replace:i.push)(k,I.state,I)},[t,i,d,c,e])}function CD(e,t){return kD(e,t)}function kD(e,t,n,i){vv()||ai(!1);let{navigator:a}=ie.useContext(gv),{matches:c}=ie.useContext(Rd),d=c[c.length-1],u=d?d.params:{};d&&d.pathname;let b=d?d.pathnameBase:"/";d&&d.route;let w=g2(),I;if(t){var k;let X=typeof t=="string"?zd(t):t;b==="/"||(k=X.pathname)!=null&&k.startsWith(b)||ai(!1),I=X}else I=w;let P=I.pathname||"/",R=P;if(b!=="/"){let X=b.replace(/^\//,"").split("/");R="/"+P.replace(/^\//,"").split("/").slice(X.length).join("/")}let N=J6(e,{pathname:R}),V=MD(N&&N.map(X=>Object.assign({},X,{params:Object.assign({},u,X.params),pathname:mc([b,a.encodeLocation?a.encodeLocation(X.pathname).pathname:X.pathname]),pathnameBase:X.pathnameBase==="/"?b:mc([b,a.encodeLocation?a.encodeLocation(X.pathnameBase).pathname:X.pathnameBase])})),c,n,i);return t&&V?ie.createElement(yv.Provider,{value:{location:dm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:tu.Pop}},V):V}function ED(){let e=RD(),t=xD(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},t),n?ie.createElement("pre",{style:a},n):null,null)}const TD=ie.createElement(ED,null);class ID extends ie.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?ie.createElement(Rd.Provider,{value:this.props.routeContext},ie.createElement(u3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PD(e){let{routeContext:t,match:n,children:i}=e,a=ie.useContext(m2);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),ie.createElement(Rd.Provider,{value:t},i)}function MD(e,t,n,i){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var c;if(!n)return null;if(n.errors)e=n.matches;else if((c=i)!=null&&c.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,u=(a=n)==null?void 0:a.errors;if(u!=null){let I=d.findIndex(k=>k.route.id&&(u==null?void 0:u[k.route.id])!==void 0);I>=0||ai(!1),d=d.slice(0,Math.min(d.length,I+1))}let b=!1,w=-1;if(n&&i&&i.v7_partialHydration)for(let I=0;I<d.length;I++){let k=d[I];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(w=I),k.route.id){let{loaderData:P,errors:R}=n,N=k.route.loader&&P[k.route.id]===void 0&&(!R||R[k.route.id]===void 0);if(k.route.lazy||N){b=!0,w>=0?d=d.slice(0,w+1):d=[d[0]];break}}}return d.reduceRight((I,k,P)=>{let R,N=!1,V=null,X=null;n&&(R=u&&k.route.id?u[k.route.id]:void 0,V=k.route.errorElement||TD,b&&(w<0&&P===0?(N=!0,X=null):w===P&&(N=!0,X=k.route.hydrateFallbackElement||null)));let D=t.concat(d.slice(0,P+1)),B=()=>{let j;return R?j=V:N?j=X:k.route.Component?j=ie.createElement(k.route.Component,null):k.route.element?j=k.route.element:j=I,ie.createElement(PD,{match:k,routeContext:{outlet:I,matches:D,isDataRoute:n!=null},children:j})};return n&&(k.route.ErrorBoundary||k.route.errorElement||P===0)?ie.createElement(ID,{location:n.location,revalidation:n.revalidation,component:V,error:R,children:B(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):B()},null)}var h3=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(h3||{}),I0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(I0||{});function AD(e){let t=ie.useContext(m2);return t||ai(!1),t}function LD(e){let t=ie.useContext(wD);return t||ai(!1),t}function zD(e){let t=ie.useContext(Rd);return t||ai(!1),t}function d3(e){let t=zD(),n=t.matches[t.matches.length-1];return n.route.id||ai(!1),n.route.id}function RD(){var e;let t=ie.useContext(u3),n=LD(I0.UseRouteError),i=d3(I0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function DD(){let{router:e}=AD(h3.UseNavigateStable),t=d3(I0.UseNavigateStable),n=ie.useRef(!1);return c3(()=>{n.current=!0}),ie.useCallback(function(a,c){c===void 0&&(c={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,dm({fromRouteId:t},c)))},[e,t])}const pE={};function $D(e,t){pE[t]||(pE[t]=!0,console.warn(t))}const fE=(e,t,n)=>$D(e," React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function OD(e,t){e!=null&&e.v7_startTransition||fE("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&fE("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function Sf(e){ai(!1)}function FD(e){let{basename:t="/",children:n=null,location:i,navigationType:a=tu.Pop,navigator:c,static:d=!1,future:u}=e;vv()&&ai(!1);let b=t.replace(/^\/*/,"/"),w=ie.useMemo(()=>({basename:b,navigator:c,static:d,future:dm({v7_relativeSplatPath:!1},u)}),[b,u,c,d]);typeof i=="string"&&(i=zd(i));let{pathname:I="/",search:k="",hash:P="",state:R=null,key:N="default"}=i,V=ie.useMemo(()=>{let X=s3(I,b);return X==null?null:{location:{pathname:X,search:k,hash:P,state:R,key:N},navigationType:a}},[b,I,k,P,R,N,a]);return V==null?null:ie.createElement(gv.Provider,{value:w},ie.createElement(yv.Provider,{children:n,value:V}))}function BD(e){let{children:t,location:n}=e;return CD(Ib(t),n)}new Promise(()=>{});function Ib(e,t){t===void 0&&(t=[]);let n=[];return ie.Children.forEach(e,(i,a)=>{if(!ie.isValidElement(i))return;let c=[...t,a];if(i.type===ie.Fragment){n.push.apply(n,Ib(i.props.children,c));return}i.type!==Sf&&ai(!1),!i.props.index||!i.props.children||ai(!1);let d={id:i.props.id||c.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=Ib(i.props.children,c)),n.push(d)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ND="6";try{window.__reactRouterVersion=ND}catch{}const jD="startTransition",mE=r0[jD];function UD(e){let{basename:t,children:n,future:i,window:a}=e,c=ie.useRef();c.current==null&&(c.current=K6({window:a,v5Compat:!0}));let d=c.current,[u,b]=ie.useState({action:d.action,location:d.location}),{v7_startTransition:w}=i||{},I=ie.useCallback(k=>{w&&mE?mE(()=>b(k)):b(k)},[b,w]);return ie.useLayoutEffect(()=>d.listen(I),[d,I]),ie.useEffect(()=>OD(i),[i]),ie.createElement(FD,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:d,future:i})}var gE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(gE||(gE={}));var yE;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(yE||(yE={}));var p3={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(n,i){e.exports=i()})(_w,function(){var n={},i={};function a(d,u,b){if(i[d]=b,d==="index"){var w="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",I={};return i.shared(I),i.index(n,I),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),n}}a("shared",["exports"],function(d){function u(s,o,l,p){return new(l||(l=Promise))(function(g,_){function x(A){try{E(p.next(A))}catch(L){_(L)}}function S(A){try{E(p.throw(A))}catch(L){_(L)}}function E(A){var L;A.done?g(A.value):(L=A.value,L instanceof l?L:new l(function($){$(L)})).then(x,S)}E((p=p.apply(s,o||[])).next())})}function b(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var w=I;function I(s,o){this.x=s,this.y=o}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,o){return this.clone()._rotateAround(s,o)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var o=s.x-this.x,l=s.y-this.y;return o*o+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,o){return Math.atan2(this.x*o-this.y*s,this.x*s+this.y*o)},_matMult:function(s){var o=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=o,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var o=Math.cos(s),l=Math.sin(s),p=l*this.x+o*this.y;return this.x=o*this.x-l*this.y,this.y=p,this},_rotateAround:function(s,o){var l=Math.cos(s),p=Math.sin(s),g=o.y+p*(this.x-o.x)+l*(this.y-o.y);return this.x=o.x+l*(this.x-o.x)-p*(this.y-o.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(s){return s instanceof I?s:Array.isArray(s)?new I(s[0],s[1]):s};var k=b(w),P=R;function R(s,o,l,p){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=l,this.p2y=p}R.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,p=0;p<8;p++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<o)return l;var _=this.sampleCurveDerivativeX(l);if(Math.abs(_)<1e-6)break;l-=g/_}var x=0,S=1;for(l=s,p=0;p<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<o));p++)s>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var N=b(P);let V,X;function D(){return V==null&&(V=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),V}function B(){if(X==null&&(X=!1,D())){const o=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(o){for(let p=0;p<5*5;p++){const g=4*p;o.fillStyle=`rgb(${g},${g+1},${g+2})`,o.fillRect(p%5,Math.floor(p/5),1,1)}const l=o.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&l[p]!==p){X=!0;break}}}return X||!1}function j(s,o,l,p){const g=new N(s,o,l,p);return _=>g.solve(_)}const G=j(.25,.1,.25,1);function te(s,o,l){return Math.min(l,Math.max(o,s))}function oe(s,o,l){const p=l-o,g=((s-o)%p+p)%p+o;return g===o?l:g}function ae(s,...o){for(const l of o)for(const p in l)s[p]=l[p];return s}let de=1;function Me(s,o,l){const p={};for(const g in s)p[g]=o.call(this,s[g],g,s);return p}function Z(s,o,l){const p={};for(const g in s)o.call(this,s[g],g,s)&&(p[g]=s[g]);return p}function Ie(s){return Array.isArray(s)?s.map(Ie):typeof s=="object"&&s?Me(s,Ie):s}const je={};function $e(s){je[s]||(typeof console<"u"&&console.warn(s),je[s]=!0)}function Le(s,o,l){return(l.y-s.y)*(o.x-s.x)>(o.y-s.y)*(l.x-s.x)}function Oe(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let He=null;function at(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const De="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function qe(s,o,l,p,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(s,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),E=new Uint8ClampedArray(p*g*4);if(yield _.copyTo(E,function(A,L,$,U,H){const Y=4*Math.max(-L,0),J=(Math.max(0,$)-$)*U*4+Y,ue=4*U,fe=Math.max(0,L),Te=Math.max(0,$);return{rect:{x:fe,y:Te,width:Math.min(A.width,L+U)-fe,height:Math.min(A.height,$+H)-Te},layout:[{offset:J,stride:ue}]}}(s,o,l,p,g)),S)for(let A=0;A<E.length;A+=4){const L=E[A];E[A]=E[A+2],E[A+2]=L}return E}finally{_.close()}})}let pt,Ct;const Lt="AbortError";function jt(){return new Error(Lt)}const zt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Kt(s){return zt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const dn="global-dispatcher";class tn extends Error{constructor(o,l,p,g){super(`AJAXError: ${l} (${o}): ${p}`),this.status=o,this.statusText=l,this.url=p,this.body=g}}const jn=()=>Oe(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,kn=function(s,o){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const p=Kt(s.url);if(p)return p(s,o);if(Oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:dn},o)}if(!(/^file:/.test(l=s.url)||/^file:/.test(jn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,g){return u(this,void 0,void 0,function*(){const _=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:jn(),signal:g.signal});p.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const A=yield x.blob();throw new tn(x.status,x.statusText,p.url,A)}let S;S=p.type==="arrayBuffer"||p.type==="image"?x.arrayBuffer():p.type==="json"?x.json():x.text();const E=yield S;if(g.signal.aborted)throw jt();return{data:E,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,o);if(Oe(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:dn},o)}var l;return function(p,g){return new Promise((_,x)=>{var S;const E=new XMLHttpRequest;E.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(E.responseType="arraybuffer");for(const A in p.headers)E.setRequestHeader(A,p.headers[A]);p.type==="json"&&(E.responseType="text",!((S=p.headers)===null||S===void 0)&&S.Accept||E.setRequestHeader("Accept","application/json")),E.withCredentials=p.credentials==="include",E.onerror=()=>{x(new Error(E.statusText))},E.onload=()=>{if(!g.signal.aborted)if((E.status>=200&&E.status<300||E.status===0)&&E.response!==null){let A=E.response;if(p.type==="json")try{A=JSON.parse(E.response)}catch(L){return void x(L)}_({data:A,cacheControl:E.getResponseHeader("Cache-Control"),expires:E.getResponseHeader("Expires")})}else{const A=new Blob([E.response],{type:E.getResponseHeader("Content-Type")});x(new tn(E.status,E.statusText,p.url,A))}},g.signal.addEventListener("abort",()=>{E.abort(),x(jt())}),E.send(p.body)})}(s,o)};function Vt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const o=new URL(s),l=window.location;return o.protocol===l.protocol&&o.host===l.host}function nn(s,o,l){l[s]&&l[s].indexOf(o)!==-1||(l[s]=l[s]||[],l[s].push(o))}function Wt(s,o,l){if(l&&l[s]){const p=l[s].indexOf(o);p!==-1&&l[s].splice(p,1)}}class _n{constructor(o,l={}){ae(this,l),this.type=o}}class yt extends _n{constructor(o,l={}){super("error",ae({error:o},l))}}class Rt{on(o,l){return this._listeners=this._listeners||{},nn(o,l,this._listeners),this}off(o,l){return Wt(o,l,this._listeners),Wt(o,l,this._oneTimeListeners),this}once(o,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},nn(o,l,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,l){typeof o=="string"&&(o=new _n(o,l||{}));const p=o.type;if(this.listens(p)){o.target=this;const g=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const S of g)S.call(this,o);const _=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const S of _)Wt(p,S,this._oneTimeListeners),S.call(this,o);const x=this._eventedParent;x&&(ae(o,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(o))}else o instanceof yt&&console.error(o.error);return this}listens(o){return this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o)}setEventedParent(o,l){return this._eventedParent=o,this._eventedParentData=l,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ur=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gn(s,o){const l={};for(const p in s)p!=="ref"&&(l[p]=s[p]);return ur.forEach(p=>{p in o&&(l[p]=o[p])}),l}function ht(s,o){if(Array.isArray(s)){if(!Array.isArray(o)||s.length!==o.length)return!1;for(let l=0;l<s.length;l++)if(!ht(s[l],o[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&o!==null){if(typeof o!="object"||Object.keys(s).length!==Object.keys(o).length)return!1;for(const l in s)if(!ht(s[l],o[l]))return!1;return!0}return s===o}function qt(s,o){s.push(o)}function un(s,o,l){qt(l,{command:"addSource",args:[s,o[s]]})}function ir(s,o,l){qt(o,{command:"removeSource",args:[s]}),l[s]=!0}function bt(s,o,l,p){ir(s,l,p),un(s,o,l)}function An(s,o,l){let p;for(p in s[l])if(Object.prototype.hasOwnProperty.call(s[l],p)&&p!=="data"&&!ht(s[l][p],o[l][p]))return!1;for(p in o[l])if(Object.prototype.hasOwnProperty.call(o[l],p)&&p!=="data"&&!ht(s[l][p],o[l][p]))return!1;return!0}function yr(s,o,l,p,g,_){s=s||{},o=o||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(ht(s[x],o[x])||l.push({command:_,args:[p,x,o[x],g]}));for(const x in o)Object.prototype.hasOwnProperty.call(o,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(ht(s[x],o[x])||l.push({command:_,args:[p,x,o[x],g]}))}function Jr(s){return s.id}function vr(s,o){return s[o.id]=o,s}class Ge{constructor(o,l,p,g){this.message=(o?`${o}: `:"")+p,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function cr(s,...o){for(const l of o)for(const p in l)s[p]=l[p];return s}class Zn extends Error{constructor(o,l){super(l),this.message=l,this.key=o}}class an{constructor(o,l=[]){this.parent=o,this.bindings={};for(const[p,g]of l)this.bindings[p]=g}concat(o){return new an(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Lr={kind:"null"},Ke={kind:"number"},Xe={kind:"string"},it={kind:"boolean"},cn={kind:"color"},zr={kind:"object"},Dt={kind:"value"},po={kind:"collator"},Mo={kind:"formatted"},ia={kind:"padding"},fo={kind:"resolvedImage"},pe={kind:"variableAnchorOffsetCollection"};function q(s,o){return{kind:"array",itemType:s,N:o}}function W(s){if(s.kind==="array"){const o=W(s.itemType);return typeof s.N=="number"?`array<${o}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${o}>`}return s.kind}const Q=[Lr,Ke,Xe,it,cn,Mo,zr,q(Dt),ia,fo,pe];function le(s,o){if(o.kind==="error")return null;if(s.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!le(s.itemType,o.itemType))&&(typeof s.N!="number"||s.N===o.N))return null}else{if(s.kind===o.kind)return null;if(s.kind==="value"){for(const l of Q)if(!le(l,o))return null}}return`Expected ${W(s)} but found ${W(o)} instead.`}function ve(s,o){return o.some(l=>l.kind===s.kind)}function we(s,o){return o.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function ne(s,o){return s.kind==="array"&&o.kind==="array"?s.itemType.kind===o.itemType.kind&&typeof s.N=="number":s.kind===o.kind}const he=.96422,Ae=.82521,Re=4/29,Ce=6/29,Ue=3*Ce*Ce,ft=Ce*Ce*Ce,Tt=Math.PI/180,Jt=180/Math.PI;function Ot(s){return(s%=360)<0&&(s+=360),s}function pn([s,o,l,p]){let g,_;const x=Rr((.2225045*(s=Qt(s))+.7168786*(o=Qt(o))+.0606169*(l=Qt(l)))/1);s===o&&o===l?g=_=x:(g=Rr((.4360747*s+.3850649*o+.1430804*l)/he),_=Rr((.0139322*s+.0971045*o+.7141733*l)/Ae));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),p]}function Qt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Rr(s){return s>ft?Math.pow(s,1/3):s/Ue+Re}function hr([s,o,l,p]){let g=(s+16)/116,_=isNaN(o)?g:g+o/500,x=isNaN(l)?g:g-l/200;return g=1*Tn(g),_=he*Tn(_),x=Ae*Tn(x),[Gt(3.1338561*_-1.6168667*g-.4906146*x),Gt(-.9787684*_+1.9161415*g+.033454*x),Gt(.0719453*_-.2289914*g+1.4052427*x),p]}function Gt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Tn(s){return s>Ce?s*s*s:Ue*(s-Re)}function or(s){return parseInt(s.padEnd(2,s),16)/255}function Hr(s,o){return Qr(o?s/100:s,0,1)}function Qr(s,o,l){return Math.min(Math.max(o,s),l)}function xi(s){return!s.some(Number.isNaN)}const dl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class In{constructor(o,l,p,g=1,_=!0){this.r=o,this.g=l,this.b=p,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[o,l,p,g]))}static parse(o){if(o instanceof In)return o;if(typeof o!="string")return;const l=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=dl[p];if(g){const[x,S,E]=g;return[x/255,S/255,E/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const x=p.length<6?1:2;let S=1;return[or(p.slice(S,S+=x)),or(p.slice(S,S+=x)),or(p.slice(S,S+=x)),or(p.slice(S,S+x)||"ff")]}if(p.startsWith("rgb")){const x=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,E,A,L,$,U,H,Y,J,ue,fe,Te]=x,_e=[L||" ",H||" ",ue].join("");if(_e==="  "||_e==="  /"||_e===",,"||_e===",,,"){const Ee=[A,U,J].join(""),ze=Ee==="%%%"?100:Ee===""?255:0;if(ze){const We=[Qr(+E/ze,0,1),Qr(+$/ze,0,1),Qr(+Y/ze,0,1),fe?Hr(+fe,Te):1];if(xi(We))return We}}return}}const _=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,E,A,L,$,U,H,Y]=_,J=[E||" ",L||" ",U].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const ue=[+S,Qr(+A,0,100),Qr(+$,0,100),H?Hr(+H,Y):1];if(xi(ue))return function([fe,Te,_e,Ee]){function ze(We){const ut=(We+fe/30)%12,Pt=Te*Math.min(_e,1-_e);return _e-Pt*Math.max(-1,Math.min(ut-3,9-ut,1))}return fe=Ot(fe),Te/=100,_e/=100,[ze(0),ze(8),ze(4),Ee]}(ue)}}}(o);return l?new In(...l,!1):void 0}get rgb(){const{r:o,g:l,b:p,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[o/_,l/_,p/_,g])}get hcl(){return this.overwriteGetter("hcl",function(o){const[l,p,g,_]=pn(o),x=Math.sqrt(p*p+g*g);return[Math.round(1e4*x)?Ot(Math.atan2(g,p)*Jt):NaN,x,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",pn(this.rgb))}overwriteGetter(o,l){return Object.defineProperty(this,o,{value:l}),l}toString(){const[o,l,p,g]=this.rgb;return`rgba(${[o,l,p].map(_=>Math.round(255*_)).join(",")},${g})`}}In.black=new In(0,0,0,1),In.white=new In(1,1,1,1),In.transparent=new In(0,0,0,0),In.red=new In(1,0,0,1);class Vd{constructor(o,l,p){this.sensitivity=o?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,l){return this.collator.compare(o,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Wd{constructor(o,l,p,g,_){this.text=o,this.image=l,this.scale=p,this.fontStack=g,this.textColor=_}}class Ki{constructor(o){this.sections=o}static fromString(o){return new Ki([new Wd(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.name.length!==0)}static factory(o){return o instanceof Ki?o:Ki.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}}class Xi{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof Xi)return o;if(typeof o=="number")return new Xi([o,o,o,o]);if(Array.isArray(o)&&!(o.length<1||o.length>4)){for(const l of o)if(typeof l!="number")return;switch(o.length){case 1:o=[o[0],o[0],o[0],o[0]];break;case 2:o=[o[0],o[1],o[0],o[1]];break;case 3:o=[o[0],o[1],o[2],o[1]]}return new Xi(o)}}toString(){return JSON.stringify(this.values)}}const x1=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class mo{constructor(o){this.values=o.slice()}static parse(o){if(o instanceof mo)return o;if(Array.isArray(o)&&!(o.length<1)&&o.length%2==0){for(let l=0;l<o.length;l+=2){const p=o[l],g=o[l+1];if(typeof p!="string"||!x1.has(p)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new mo(o)}}toString(){return JSON.stringify(this.values)}}class Yi{constructor(o){this.name=o.name,this.available=o.available}toString(){return this.name}static fromString(o){return o?new Yi({name:o,available:!1}):null}}function pl(s,o,l,p){return typeof s=="number"&&s>=0&&s<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,o,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,o,l,p]:[s,o,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Is(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof In||s instanceof Vd||s instanceof Ki||s instanceof Xi||s instanceof mo||s instanceof Yi)return!0;if(Array.isArray(s)){for(const o of s)if(!Is(o))return!1;return!0}if(typeof s=="object"){for(const o in s)if(!Is(s[o]))return!1;return!0}return!1}function Dr(s){if(s===null)return Lr;if(typeof s=="string")return Xe;if(typeof s=="boolean")return it;if(typeof s=="number")return Ke;if(s instanceof In)return cn;if(s instanceof Vd)return po;if(s instanceof Ki)return Mo;if(s instanceof Xi)return ia;if(s instanceof mo)return pe;if(s instanceof Yi)return fo;if(Array.isArray(s)){const o=s.length;let l;for(const p of s){const g=Dr(p);if(l){if(l===g)continue;l=Dt;break}l=g}return q(l||Dt,o)}return zr}function Cu(s){const o=typeof s;return s===null?"":o==="string"||o==="number"||o==="boolean"?String(s):s instanceof In||s instanceof Ki||s instanceof Xi||s instanceof mo||s instanceof Yi?s.toString():JSON.stringify(s)}class Ao{constructor(o,l){this.type=o,this.value=l}static parse(o,l){if(o.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!Is(o[1]))return l.error("invalid value");const p=o[1];let g=Dr(p);const _=l.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Ao(g,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Tr{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const Lc={string:Xe,number:Ke,boolean:it,object:zr};class Lo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");let p,g=1;const _=o[0];if(_==="array"){let S,E;if(o.length>2){const A=o[1];if(typeof A!="string"||!(A in Lc)||A==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=Lc[A],g++}else S=Dt;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return l.error('The length argument to "array" must be a positive integer literal',2);E=o[2],g++}p=q(S,E)}else{if(!Lc[_])throw new Error(`Types doesn't contain name = ${_}`);p=Lc[_]}const x=[];for(;g<o.length;g++){const S=l.parse(o[g],g,Dt);if(!S)return null;x.push(S)}return new Lo(p,x)}evaluate(o){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(o);if(!le(this.type,Dr(p)))return p;if(l===this.args.length-1)throw new Tr(`Expected value to be of type ${W(this.type)}, but found ${W(Dr(p))} instead.`)}throw new Error}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const qd={"to-boolean":it,"to-color":cn,"to-number":Ke,"to-string":Xe};class zo{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const p=o[0];if(!qd[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&o.length!==2)return l.error("Expected one argument.");const g=qd[p],_=[];for(let x=1;x<o.length;x++){const S=l.parse(o[x],x,Dt);if(!S)return null;_.push(S)}return new zo(g,_)}evaluate(o){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(o);case"color":{let l,p;for(const g of this.args){if(l=g.evaluate(o),p=null,l instanceof In)return l;if(typeof l=="string"){const _=o.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:pl(l[0],l[1],l[2],l[3]),!p))return new In(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Tr(p||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const p of this.args){l=p.evaluate(o);const g=Xi.parse(l);if(g)return g}throw new Tr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const p of this.args){l=p.evaluate(o);const g=mo.parse(l);if(g)return g}throw new Tr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const p of this.args){if(l=p.evaluate(o),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new Tr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ki.fromString(Cu(this.args[0].evaluate(o)));case"resolvedImage":return Yi.fromString(Cu(this.args[0].evaluate(o)));default:return Cu(this.args[0].evaluate(o))}}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}const b1=["Unknown","Point","LineString","Polygon"];class zc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?b1[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(o){let l=this._parseColorCache[o];return l||(l=this._parseColorCache[o]=In.parse(o)),l}}class Ps{constructor(o,l,p=[],g,_=new an,x=[]){this.registry=o,this.path=p,this.key=p.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=l}parse(o,l,p,g,_={}){return l?this.concat(l,p,g)._parse(o,_):this._parse(o,_)}_parse(o,l){function p(g,_,x){return x==="assert"?new Lo(_,[g]):x==="coerce"?new zo(_,[g]):g}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=o[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(o,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,E=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||E.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(S.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||E.kind!=="value"&&E.kind!=="array"){if(this.checkSubtype(S,E))return null}else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"assert")}if(!(x instanceof Ao)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new zc;try{x=new Ao(x.type,x.evaluate(S))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,l,p){const g=typeof o=="number"?this.path.concat(o):this.path,_=p?this.scope.concat(p):this.scope;return new Ps(this.registry,this._isConstant,g,l||null,_,this.errors)}error(o,...l){const p=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new Zn(p,o))}checkSubtype(o,l){const p=le(o,l);return p&&this.error(p),p}}class Qa{constructor(o,l){this.type=l.type,this.bindings=[].concat(o),this.result=l}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const l of this.bindings)o(l[1]);o(this.result)}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let _=1;_<o.length-1;_+=2){const x=o[_];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=l.parse(o[_+1],_+1);if(!S)return null;p.push([x,S])}const g=l.parse(o[o.length-1],o.length-1,l.expectedType,p);return g?new Qa(p,g):null}outputDefined(){return this.result.outputDefined()}}class xn{constructor(o,l){this.type=l.type,this.name=o,this.boundExpression=l}static parse(o,l){if(o.length!==2||typeof o[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const p=o[1];return l.scope.has(p)?new xn(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}}class Hd{constructor(o,l,p){this.type=o,this.index=l,this.input=p}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=l.parse(o[1],1,Ke),g=l.parse(o[2],2,q(l.expectedType||Dt));return p&&g?new Hd(g.type.itemType,p,g):null}evaluate(o){const l=this.index.evaluate(o),p=this.input.evaluate(o);if(l<0)throw new Tr(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new Tr(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new Tr(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}}class Gd{constructor(o,l){this.type=it,this.needle=o,this.haystack=l}static parse(o,l){if(o.length!==3)return l.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=l.parse(o[1],1,Dt),g=l.parse(o[2],2,Dt);return p&&g?ve(p.type,[it,Xe,Ke,Lr,Dt])?new Gd(p,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`):null}evaluate(o){const l=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!p)return!1;if(!we(l,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${W(Dr(l))} instead.`);if(!we(p,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${W(Dr(p))} instead.`);return p.indexOf(l)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}}class fl{constructor(o,l,p){this.type=Ke,this.needle=o,this.haystack=l,this.fromIndex=p}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=l.parse(o[1],1,Dt),g=l.parse(o[2],2,Dt);if(!p||!g)return null;if(!ve(p.type,[it,Xe,Ke,Lr,Dt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`);if(o.length===4){const _=l.parse(o[3],3,Ke);return _?new fl(p,g,_):null}return new fl(p,g)}evaluate(o){const l=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!we(l,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${W(Dr(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(o)),we(p,["string"])){const _=p.indexOf(l,g);return _===-1?-1:[...p.slice(0,_)].length}if(we(p,["array"]))return p.indexOf(l,g);throw new Tr(`Expected second argument to be of type array or string, but found ${W(Dr(p))} instead.`)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}}class Zd{constructor(o,l,p,g,_,x){this.inputType=o,this.type=l,this.input=p,this.cases=g,this.outputs=_,this.otherwise=x}static parse(o,l){if(o.length<5)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return l.error("Expected an even number of arguments.");let p,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const _={},x=[];for(let A=2;A<o.length-1;A+=2){let L=o[A];const $=o[A+1];Array.isArray(L)||(L=[L]);const U=l.concat(A);if(L.length===0)return U.error("Expected at least one branch label.");for(const Y of L){if(typeof Y!="number"&&typeof Y!="string")return U.error("Branch labels must be numbers or strings.");if(typeof Y=="number"&&Math.abs(Y)>Number.MAX_SAFE_INTEGER)return U.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Y=="number"&&Math.floor(Y)!==Y)return U.error("Numeric branch labels must be integer values.");if(p){if(U.checkSubtype(p,Dr(Y)))return null}else p=Dr(Y);if(_[String(Y)]!==void 0)return U.error("Branch labels must be unique.");_[String(Y)]=x.length}const H=l.parse($,A,g);if(!H)return null;g=g||H.type,x.push(H)}const S=l.parse(o[1],1,Dt);if(!S)return null;const E=l.parse(o[o.length-1],o.length-1,g);return E?S.type.kind!=="value"&&l.concat(1).checkSubtype(p,S.type)?null:new Zd(p,g,S,_,x,E):null}evaluate(o){const l=this.input.evaluate(o);return(Dr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}}class Rc{constructor(o,l,p){this.type=o,this.branches=l,this.otherwise=p}static parse(o,l){if(o.length<4)return l.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const g=[];for(let x=1;x<o.length-1;x+=2){const S=l.parse(o[x],x,it);if(!S)return null;const E=l.parse(o[x+1],x+1,p);if(!E)return null;g.push([S,E]),p=p||E.type}const _=l.parse(o[o.length-1],o.length-1,p);if(!_)return null;if(!p)throw new Error("Can't infer output type");return new Rc(p,g,_)}evaluate(o){for(const[l,p]of this.branches)if(l.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[l,p]of this.branches)o(l),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class ku{constructor(o,l,p,g){this.type=o,this.input=l,this.beginIndex=p,this.endIndex=g}static parse(o,l){if(o.length<=2||o.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=l.parse(o[1],1,Dt),g=l.parse(o[2],2,Ke);if(!p||!g)return null;if(!ve(p.type,[q(Dt),Xe,Dt]))return l.error(`Expected first argument to be of type array or string, but found ${W(p.type)} instead`);if(o.length===4){const _=l.parse(o[3],3,Ke);return _?new ku(p.type,p,g,_):null}return new ku(p.type,p,g)}evaluate(o){const l=this.input.evaluate(o),p=this.beginIndex.evaluate(o);let g;if(this.endIndex&&(g=this.endIndex.evaluate(o)),we(l,["string"]))return[...l].slice(p,g).join("");if(we(l,["array"]))return l.slice(p,g);throw new Tr(`Expected first argument to be of type array or string, but found ${W(Dr(l))} instead.`)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}}function Dc(s,o){const l=s.length-1;let p,g,_=0,x=l,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),p=s[S],g=s[S+1],p<=o){if(S===l||o<g)return S;_=S+1}else{if(!(p>o))throw new Tr("Input is not a number.");x=S-1}return 0}class ml{constructor(o,l,p){this.type=o,this.input=l,this.labels=[],this.outputs=[];for(const[g,_]of p)this.labels.push(g),this.outputs.push(_)}static parse(o,l){if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(o[1],1,Ke);if(!p)return null;const g=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let x=1;x<o.length;x+=2){const S=x===1?-1/0:o[x],E=o[x+1],A=x,L=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const $=l.parse(E,L,_);if(!$)return null;_=_||$.type,g.push([S,$])}return new ml(_,p,g)}evaluate(o){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return p[0].evaluate(o);const _=l.length;return g>=l[_-1]?p[_-1].evaluate(o):p[Dc(l,g)].evaluate(o)}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function Xm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var w1=Ym;function Ym(s,o,l,p){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(p-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=o,this.p2x=l,this.p2y=p}Ym.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,o){if(o===void 0&&(o=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,p=0;p<8;p++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<o)return l;var _=this.sampleCurveDerivativeX(l);if(Math.abs(_)<1e-6)break;l-=g/_}var x=0,S=1;for(l=s,p=0;p<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<o));p++)s>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(s,o){return this.sampleCurveY(this.solveCurveX(s,o))}};var S1=Xm(w1);function Ms(s,o,l){return s+l*(o-s)}function Eu(s,o,l){return s.map((p,g)=>Ms(p,o[g],l))}const Li={number:Ms,color:function(s,o,l,p="rgb"){switch(p){case"rgb":{const[g,_,x,S]=Eu(s.rgb,o.rgb,l);return new In(g,_,x,S,!1)}case"hcl":{const[g,_,x,S]=s.hcl,[E,A,L,$]=o.hcl;let U,H;if(isNaN(g)||isNaN(E))isNaN(g)?isNaN(E)?U=NaN:(U=E,x!==1&&x!==0||(H=A)):(U=g,L!==1&&L!==0||(H=_));else{let Te=E-g;E>g&&Te>180?Te-=360:E<g&&g-E>180&&(Te+=360),U=g+l*Te}const[Y,J,ue,fe]=function([Te,_e,Ee,ze]){return Te=isNaN(Te)?0:Te*Tt,hr([Ee,Math.cos(Te)*_e,Math.sin(Te)*_e,ze])}([U,H??Ms(_,A,l),Ms(x,L,l),Ms(S,$,l)]);return new In(Y,J,ue,fe,!1)}case"lab":{const[g,_,x,S]=hr(Eu(s.lab,o.lab,l));return new In(g,_,x,S,!1)}}},array:Eu,padding:function(s,o,l){return new Xi(Eu(s.values,o.values,l))},variableAnchorOffsetCollection:function(s,o,l){const p=s.values,g=o.values;if(p.length!==g.length)throw new Tr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${o.toString()}`);const _=[];for(let x=0;x<p.length;x+=2){if(p[x]!==g[x])throw new Tr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${p[x]}, to[${x}]: ${g[x]}`);_.push(p[x]);const[S,E]=p[x+1],[A,L]=g[x+1];_.push([Ms(S,A,l),Ms(E,L,l)])}return new mo(_)}};class zi{constructor(o,l,p,g,_){this.type=o,this.operator=l,this.interpolation=p,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(o,l,p,g){let _=0;if(o.name==="exponential")_=$c(l,o.base,p,g);else if(o.name==="linear")_=$c(l,1,p,g);else if(o.name==="cubic-bezier"){const x=o.controlPoints;_=new S1(x[0],x[1],x[2],x[3]).solve($c(l,1,p,g))}return _}static parse(o,l){let[p,g,_,...x]=o;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(o.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,Ke),!_)return null;const S=[];let E=null;p==="interpolate-hcl"||p==="interpolate-lab"?E=cn:l.expectedType&&l.expectedType.kind!=="value"&&(E=l.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],$=x[A+1],U=A+3,H=A+4;if(typeof L!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(S.length&&S[S.length-1][0]>=L)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',U);const Y=l.parse($,H,E);if(!Y)return null;E=E||Y.type,S.push([L,Y])}return ne(E,Ke)||ne(E,cn)||ne(E,ia)||ne(E,pe)||ne(E,q(Ke))?new zi(E,p,g,_,S):l.error(`Type ${W(E)} is not interpolatable.`)}evaluate(o){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(o);const g=this.input.evaluate(o);if(g<=l[0])return p[0].evaluate(o);const _=l.length;if(g>=l[_-1])return p[_-1].evaluate(o);const x=Dc(l,g),S=zi.interpolationFactor(this.interpolation,g,l[x],l[x+1]),E=p[x].evaluate(o),A=p[x+1].evaluate(o);switch(this.operator){case"interpolate":return Li[this.type.kind](E,A,S);case"interpolate-hcl":return Li.color(E,A,S,"hcl");case"interpolate-lab":return Li.color(E,A,S,"lab")}}eachChild(o){o(this.input);for(const l of this.outputs)o(l)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}}function $c(s,o,l,p){const g=p-l,_=s-l;return g===0?0:o===1?_/g:(Math.pow(o,_)-1)/(Math.pow(o,g)-1)}class Oc{constructor(o,l){this.type=o,this.args=l}static parse(o,l){if(o.length<2)return l.error("Expectected at least one argument.");let p=null;const g=l.expectedType;g&&g.kind!=="value"&&(p=g);const _=[];for(const S of o.slice(1)){const E=l.parse(S,1+_.length,p,void 0,{typeAnnotation:"omit"});if(!E)return null;p=p||E.type,_.push(E)}if(!p)throw new Error("No output type");const x=g&&_.some(S=>le(g,S.type));return new Oc(x?Dt:p,_)}evaluate(o){let l,p=null,g=0;for(const _ of this.args)if(g++,p=_.evaluate(o),p&&p instanceof Yi&&!p.available&&(l||(l=p.name),p=null,g===this.args.length&&(p=l)),p!==null)break;return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}}function Fc(s,o){return s==="=="||s==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function Jm(s,o,l,p){return p.compare(o,l)===0}function gl(s,o,l){const p=s!=="=="&&s!=="!=";return class f3{constructor(_,x,S){this.type=it,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let E=x.parse(_[1],1,Dt);if(!E)return null;if(!Fc(S,E.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${W(E.type)}'.`);let A=x.parse(_[2],2,Dt);if(!A)return null;if(!Fc(S,A.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${W(A.type)}'.`);if(E.type.kind!==A.type.kind&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${W(E.type)}' and '${W(A.type)}'.`);p&&(E.type.kind==="value"&&A.type.kind!=="value"?E=new Lo(A.type,[E]):E.type.kind!=="value"&&A.type.kind==="value"&&(A=new Lo(E.type,[A])));let L=null;if(_.length===4){if(E.type.kind!=="string"&&A.type.kind!=="string"&&E.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(_[3],3,po),!L)return null}return new f3(E,A,L)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(p&&this.hasUntypedArgument){const E=Dr(x),A=Dr(S);if(E.kind!==A.kind||E.kind!=="string"&&E.kind!=="number")throw new Tr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${E.kind}, ${A.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const E=Dr(x),A=Dr(S);if(E.kind!=="string"||A.kind!=="string")return o(_,x,S)}return this.collator?l(_,x,S,this.collator.evaluate(_)):o(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const C1=gl("==",function(s,o,l){return o===l},Jm),Qm=gl("!=",function(s,o,l){return o!==l},function(s,o,l,p){return!Jm(0,o,l,p)}),eg=gl("<",function(s,o,l){return o<l},function(s,o,l,p){return p.compare(o,l)<0}),k1=gl(">",function(s,o,l){return o>l},function(s,o,l,p){return p.compare(o,l)>0}),E1=gl("<=",function(s,o,l){return o<=l},function(s,o,l,p){return p.compare(o,l)<=0}),tg=gl(">=",function(s,o,l){return o>=l},function(s,o,l,p){return p.compare(o,l)>=0});class Tu{constructor(o,l,p){this.type=po,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=l}static parse(o,l){if(o.length!==2)return l.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return l.error("Collator options argument must be an object.");const g=l.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,it);if(!g)return null;const _=l.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,it);if(!_)return null;let x=null;return p.locale&&(x=l.parse(p.locale,1,Xe),!x)?null:new Tu(g,_,x)}evaluate(o){return new Vd(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}}class Kd{constructor(o,l,p,g,_){this.type=Xe,this.number=o,this.locale=l,this.currency=p,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(o,l){if(o.length!==3)return l.error("Expected two arguments.");const p=l.parse(o[1],1,Ke);if(!p)return null;const g=o[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=l.parse(g.locale,1,Xe),!_))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,Xe),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=l.parse(g["min-fraction-digits"],1,Ke),!S))return null;let E=null;return g["max-fraction-digits"]&&(E=l.parse(g["max-fraction-digits"],1,Ke),!E)?null:new Kd(p,_,x,S,E)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}}class Bc{constructor(o){this.type=Mo,this.sections=o}static parse(o,l){if(o.length<2)return l.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return l.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=o.length-1;++x){const S=o[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let E=null;if(S["font-scale"]&&(E=l.parse(S["font-scale"],1,Ke),!E))return null;let A=null;if(S["text-font"]&&(A=l.parse(S["text-font"],1,q(Xe)),!A))return null;let L=null;if(S["text-color"]&&(L=l.parse(S["text-color"],1,cn),!L))return null;const $=g[g.length-1];$.scale=E,$.font=A,$.textColor=L}else{const E=l.parse(o[x],1,Dt);if(!E)return null;const A=E.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null})}}return new Bc(g)}evaluate(o){return new Ki(this.sections.map(l=>{const p=l.content.evaluate(o);return Dr(p)===fo?new Wd("",p,null,null,null):new Wd(Cu(p),null,l.scale?l.scale.evaluate(o):null,l.font?l.font.evaluate(o).join(","):null,l.textColor?l.textColor.evaluate(o):null)}))}eachChild(o){for(const l of this.sections)o(l.content),l.scale&&o(l.scale),l.font&&o(l.font),l.textColor&&o(l.textColor)}outputDefined(){return!1}}class Xd{constructor(o){this.type=fo,this.input=o}static parse(o,l){if(o.length!==2)return l.error("Expected two arguments.");const p=l.parse(o[1],1,Xe);return p?new Xd(p):l.error("No image name provided.")}evaluate(o){const l=this.input.evaluate(o),p=Yi.fromString(l);return p&&o.availableImages&&(p.available=o.availableImages.indexOf(l)>-1),p}eachChild(o){o(this.input)}outputDefined(){return!1}}class Yd{constructor(o){this.type=Ke,this.input=o}static parse(o,l){if(o.length!==2)return l.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=l.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${W(p.type)} instead.`):new Yd(p):null}evaluate(o){const l=this.input.evaluate(o);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Tr(`Expected value to be of type string or array, but found ${W(Dr(l))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}}const oa=8192;function T1(s,o){const l=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,o.z);return[Math.round(l*g*oa),Math.round(p*g*oa)]}function Jd(s,o){const l=Math.pow(2,o.z);return[(g=(s[0]/oa+o.x)/l,360*g-180),(p=(s[1]/oa+o.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,g}function As(s,o){s[0]=Math.min(s[0],o[0]),s[1]=Math.min(s[1],o[1]),s[2]=Math.max(s[2],o[0]),s[3]=Math.max(s[3],o[1])}function es(s,o){return!(s[0]<=o[0]||s[2]>=o[2]||s[1]<=o[1]||s[3]>=o[3])}function Sn(s,o,l){const p=s[0]-o[0],g=s[1]-o[1],_=s[0]-l[0],x=s[1]-l[1];return p*x-_*g==0&&p*_<=0&&g*x<=0}function Nc(s,o,l,p){return(g=[p[0]-l[0],p[1]-l[1]])[0]*(_=[o[0]-s[0],o[1]-s[1]])[1]-g[1]*_[0]!=0&&!(!rg(s,o,l,p)||!rg(l,p,s,o));var g,_}function I1(s,o,l){for(const p of l)for(let g=0;g<p.length-1;++g)if(Nc(s,o,p[g],p[g+1]))return!0;return!1}function yl(s,o,l=!1){let p=!1;for(const S of o)for(let E=0;E<S.length-1;E++){if(Sn(s,S[E],S[E+1]))return l;(_=S[E])[1]>(g=s)[1]!=(x=S[E+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(p=!p)}var g,_,x;return p}function P1(s,o){for(const l of o)if(yl(s,l))return!0;return!1}function ng(s,o){for(const l of s)if(!yl(l,o))return!1;for(let l=0;l<s.length-1;++l)if(I1(s[l],s[l+1],o))return!1;return!0}function M1(s,o){for(const l of o)if(ng(s,l))return!0;return!1}function rg(s,o,l,p){const g=p[0]-l[0],_=p[1]-l[1],x=(s[0]-l[0])*_-g*(s[1]-l[1]),S=(o[0]-l[0])*_-g*(o[1]-l[1]);return x>0&&S<0||x<0&&S>0}function Qd(s,o,l){const p=[];for(let g=0;g<s.length;g++){const _=[];for(let x=0;x<s[g].length;x++){const S=T1(s[g][x],l);As(o,S),_.push(S)}p.push(_)}return p}function ig(s,o,l){const p=[];for(let g=0;g<s.length;g++){const _=Qd(s[g],o,l);p.push(_)}return p}function og(s,o,l,p){if(s[0]<l[0]||s[0]>l[2]){const g=.5*p;let _=s[0]-l[0]>g?-p:l[0]-s[0]>g?p:0;_===0&&(_=s[0]-l[2]>g?-p:l[2]-s[0]>g?p:0),s[0]+=_}As(o,s)}function ag(s,o,l,p){const g=Math.pow(2,p.z)*oa,_=[p.x*oa,p.y*oa],x=[];for(const S of s)for(const E of S){const A=[E.x+_[0],E.y+_[1]];og(A,o,l,g),x.push(A)}return x}function sg(s,o,l,p){const g=Math.pow(2,p.z)*oa,_=[p.x*oa,p.y*oa],x=[];for(const E of s){const A=[];for(const L of E){const $=[L.x+_[0],L.y+_[1]];As(o,$),A.push($)}x.push(A)}if(o[2]-o[0]<=g/2){(S=o)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const E of x)for(const A of E)og(A,o,l,g)}var S;return x}class Ls{constructor(o,l){this.type=it,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Is(o[1])){const p=o[1];if(p.type==="FeatureCollection"){const g=[];for(const _ of p.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new Ls(p,{type:"MultiPolygon",coordinates:g})}else if(p.type==="Feature"){const g=p.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new Ls(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ls(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(p.type==="Polygon"){const S=Qd(p.coordinates,_,x),E=ag(l.geometry(),g,_,x);if(!es(g,_))return!1;for(const A of E)if(!yl(A,S))return!1}if(p.type==="MultiPolygon"){const S=ig(p.coordinates,_,x),E=ag(l.geometry(),g,_,x);if(!es(g,_))return!1;for(const A of E)if(!P1(A,S))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(p.type==="Polygon"){const S=Qd(p.coordinates,_,x),E=sg(l.geometry(),g,_,x);if(!es(g,_))return!1;for(const A of E)if(!ng(A,S))return!1}if(p.type==="MultiPolygon"){const S=ig(p.coordinates,_,x),E=sg(l.geometry(),g,_,x);if(!es(g,_))return!1;for(const A of E)if(!M1(A,S))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let lg=class{constructor(s=[],o=(l,p)=>l<p?-1:l>p?1:0){if(this.data=s,this.length=this.data.length,this.compare=o,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:o,compare:l}=this,p=o[s];for(;s>0;){const g=s-1>>1,_=o[g];if(l(p,_)>=0)break;o[s]=_,s=g}o[s]=p}_down(s){const{data:o,compare:l}=this,p=this.length>>1,g=o[s];for(;s<p;){let _=1+(s<<1);const x=_+1;if(x<this.length&&l(o[x],o[_])<0&&(_=x),l(o[_],g)>=0)break;o[s]=o[_],s=_}o[s]=g}};function A1(s,o,l,p,g){ug(s,o,l,p||s.length-1,g||L1)}function ug(s,o,l,p,g){for(;p>l;){if(p-l>600){var _=p-l+1,x=o-l+1,S=Math.log(_),E=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*E*(_-E)/_)*(x-_/2<0?-1:1);ug(s,o,Math.max(l,Math.floor(o-x*E/_+A)),Math.min(p,Math.floor(o+(_-x)*E/_+A)),g)}var L=s[o],$=l,U=p;for(Iu(s,l,o),g(s[p],L)>0&&Iu(s,l,p);$<U;){for(Iu(s,$,U),$++,U--;g(s[$],L)<0;)$++;for(;g(s[U],L)>0;)U--}g(s[l],L)===0?Iu(s,l,U):Iu(s,++U,p),U<=o&&(l=U+1),o<=U&&(p=U-1)}}function Iu(s,o,l){var p=s[o];s[o]=s[l],s[l]=p}function L1(s,o){return s<o?-1:s>o?1:0}function jc(s,o){if(s.length<=1)return[s];const l=[];let p,g;for(const _ of s){const x=R1(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(p&&l.push(p),p=[_]):p.push(_))}if(p&&l.push(p),o>1)for(let _=0;_<l.length;_++)l[_].length<=o||(A1(l[_],o,1,l[_].length-1,z1),l[_]=l[_].slice(0,o));return l}function z1(s,o){return o.area-s.area}function R1(s){let o=0;for(let l,p,g=0,_=s.length,x=_-1;g<_;x=g++)l=s[g],p=s[x],o+=(p.x-l.x)*(l.y+p.y);return o}const cg=1/298.257223563,hg=cg*(2-cg),dg=Math.PI/180;class ep{constructor(o){const l=6378.137*dg*1e3,p=Math.cos(o*dg),g=1/(1-hg*(1-p*p)),_=Math.sqrt(g);this.kx=l*_*p,this.ky=l*_*g*(1-hg)}distance(o,l){const p=this.wrap(o[0]-l[0])*this.kx,g=(o[1]-l[1])*this.ky;return Math.sqrt(p*p+g*g)}pointOnLine(o,l){let p,g,_,x,S=1/0;for(let E=0;E<o.length-1;E++){let A=o[E][0],L=o[E][1],$=this.wrap(o[E+1][0]-A)*this.kx,U=(o[E+1][1]-L)*this.ky,H=0;$===0&&U===0||(H=(this.wrap(l[0]-A)*this.kx*$+(l[1]-L)*this.ky*U)/($*$+U*U),H>1?(A=o[E+1][0],L=o[E+1][1]):H>0&&(A+=$/this.kx*H,L+=U/this.ky*H)),$=this.wrap(l[0]-A)*this.kx,U=(l[1]-L)*this.ky;const Y=$*$+U*U;Y<S&&(S=Y,p=A,g=L,_=E,x=H)}return{point:[p,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(o){for(;o<-180;)o+=360;for(;o>180;)o-=360;return o}}function pg(s,o){return o[0]-s[0]}function Uc(s){return s[1]-s[0]+1}function La(s,o){return s[1]>=s[0]&&s[1]<o}function tp(s,o){if(s[0]>s[1])return[null,null];const l=Uc(s);if(o){if(l===2)return[s,null];const g=Math.floor(l/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(l===1)return[s,null];const p=Math.floor(l/2)-1;return[[s[0],s[0]+p],[s[0]+p+1,s[1]]]}function np(s,o){if(!La(o,s.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let p=o[0];p<=o[1];++p)As(l,s[p]);return l}function rp(s){const o=[1/0,1/0,-1/0,-1/0];for(const l of s)for(const p of l)As(o,p);return o}function Vc(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function ip(s,o,l){if(!Vc(s)||!Vc(o))return NaN;let p=0,g=0;return s[2]<o[0]&&(p=o[0]-s[2]),s[0]>o[2]&&(p=s[0]-o[2]),s[1]>o[3]&&(g=s[1]-o[3]),s[3]<o[1]&&(g=o[1]-s[3]),l.distance([0,0],[p,g])}function zs(s,o,l){const p=l.pointOnLine(o,s);return l.distance(s,p.point)}function op(s,o,l,p,g){const _=Math.min(zs(s,[l,p],g),zs(o,[l,p],g)),x=Math.min(zs(l,[s,o],g),zs(p,[s,o],g));return Math.min(_,x)}function D1(s,o,l,p,g){if(!La(o,s.length)||!La(p,l.length))return 1/0;let _=1/0;for(let x=o[0];x<o[1];++x){const S=s[x],E=s[x+1];for(let A=p[0];A<p[1];++A){const L=l[A],$=l[A+1];if(Nc(S,E,L,$))return 0;_=Math.min(_,op(S,E,L,$,g))}}return _}function _r(s,o,l,p,g){if(!La(o,s.length)||!La(p,l.length))return NaN;let _=1/0;for(let x=o[0];x<=o[1];++x)for(let S=p[0];S<=p[1];++S)if(_=Math.min(_,g.distance(s[x],l[S])),_===0)return _;return _}function $1(s,o,l){if(yl(s,o,!0))return 0;let p=1/0;for(const g of o){const _=g[0],x=g[g.length-1];if(_!==x&&(p=Math.min(p,zs(s,[x,_],l)),p===0))return p;const S=l.pointOnLine(g,s);if(p=Math.min(p,l.distance(s,S.point)),p===0)return p}return p}function Zt(s,o,l,p){if(!La(o,s.length))return NaN;for(let _=o[0];_<=o[1];++_)if(yl(s[_],l,!0))return 0;let g=1/0;for(let _=o[0];_<o[1];++_){const x=s[_],S=s[_+1];for(const E of l)for(let A=0,L=E.length,$=L-1;A<L;$=A++){const U=E[$],H=E[A];if(Nc(x,S,U,H))return 0;g=Math.min(g,op(x,S,U,H,p))}}return g}function Wc(s,o){for(const l of s)for(const p of l)if(yl(p,o,!0))return!0;return!1}function Vn(s,o,l,p=1/0){const g=rp(s),_=rp(o);if(p!==1/0&&ip(g,_,l)>=p)return p;if(es(g,_)){if(Wc(s,o))return 0}else if(Wc(o,s))return 0;let x=1/0;for(const S of s)for(let E=0,A=S.length,L=A-1;E<A;L=E++){const $=S[L],U=S[E];for(const H of o)for(let Y=0,J=H.length,ue=J-1;Y<J;ue=Y++){const fe=H[ue],Te=H[Y];if(Nc($,U,fe,Te))return 0;x=Math.min(x,op($,U,fe,Te,l))}}return x}function Ln(s,o,l,p,g,_){if(!_)return;const x=ip(np(p,_),g,l);x<o&&s.push([x,_,[0,0]])}function Rs(s,o,l,p,g,_,x){if(!_||!x)return;const S=ip(np(p,_),np(g,x),l);S<o&&s.push([S,_,x])}function Pu(s,o,l,p,g=1/0){let _=Math.min(p.distance(s[0],l[0][0]),g);if(_===0)return _;const x=new lg([[0,[0,s.length-1],[0,0]]],pg),S=rp(l);for(;x.length>0;){const E=x.pop();if(E[0]>=_)continue;const A=E[1],L=o?50:100;if(Uc(A)<=L){if(!La(A,s.length))return NaN;if(o){const $=Zt(s,A,l,p);if(isNaN($)||$===0)return $;_=Math.min(_,$)}else for(let $=A[0];$<=A[1];++$){const U=$1(s[$],l,p);if(_=Math.min(_,U),_===0)return 0}}else{const $=tp(A,o);Ln(x,_,p,s,S,$[0]),Ln(x,_,p,s,S,$[1])}}return _}function Mu(s,o,l,p,g,_=1/0){let x=Math.min(_,g.distance(s[0],l[0]));if(x===0)return x;const S=new lg([[0,[0,s.length-1],[0,l.length-1]]],pg);for(;S.length>0;){const E=S.pop();if(E[0]>=x)continue;const A=E[1],L=E[2],$=o?50:100,U=p?50:100;if(Uc(A)<=$&&Uc(L)<=U){if(!La(A,s.length)&&La(L,l.length))return NaN;let H;if(o&&p)H=D1(s,A,l,L,g),x=Math.min(x,H);else if(o&&!p){const Y=s.slice(A[0],A[1]+1);for(let J=L[0];J<=L[1];++J)if(H=zs(l[J],Y,g),x=Math.min(x,H),x===0)return x}else if(!o&&p){const Y=l.slice(L[0],L[1]+1);for(let J=A[0];J<=A[1];++J)if(H=zs(s[J],Y,g),x=Math.min(x,H),x===0)return x}else H=_r(s,A,l,L,g),x=Math.min(x,H)}else{const H=tp(A,o),Y=tp(L,p);Rs(S,x,g,s,l,H[0],Y[0]),Rs(S,x,g,s,l,H[0],Y[1]),Rs(S,x,g,s,l,H[1],Y[0]),Rs(S,x,g,s,l,H[1],Y[1])}}return x}function ap(s){return s.type==="MultiPolygon"?s.coordinates.map(o=>({type:"Polygon",coordinates:o})):s.type==="MultiLineString"?s.coordinates.map(o=>({type:"LineString",coordinates:o})):s.type==="MultiPoint"?s.coordinates.map(o=>({type:"Point",coordinates:o})):[s]}class Ds{constructor(o,l){this.type=Ke,this.geojson=o,this.geometries=l}static parse(o,l){if(o.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${o.length-1} instead.`);if(Is(o[1])){const p=o[1];if(p.type==="FeatureCollection")return new Ds(p,p.features.map(g=>ap(g.geometry)).flat());if(p.type==="Feature")return new Ds(p,ap(p.geometry));if("type"in p&&"coordinates"in p)return new Ds(p,ap(p))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(l,p){const g=l.geometry(),_=g.flat().map(E=>Jd([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new ep(_[0][1]);let S=1/0;for(const E of p){switch(E.type){case"Point":S=Math.min(S,Mu(_,!1,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Mu(_,!1,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Pu(_,!1,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="LineString")return function(l,p){const g=l.geometry(),_=g.flat().map(E=>Jd([E.x,E.y],l.canonical));if(g.length===0)return NaN;const x=new ep(_[0][1]);let S=1/0;for(const E of p){switch(E.type){case"Point":S=Math.min(S,Mu(_,!0,[E.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,Mu(_,!0,E.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,Pu(_,!0,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries);if(o.geometryType()==="Polygon")return function(l,p){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const _=jc(g,0).map(E=>E.map(A=>A.map(L=>Jd([L.x,L.y],l.canonical)))),x=new ep(_[0][0][0][1]);let S=1/0;for(const E of p)for(const A of _){switch(E.type){case"Point":S=Math.min(S,Pu([E.coordinates],!1,A,x,S));break;case"LineString":S=Math.min(S,Pu(E.coordinates,!0,A,x,S));break;case"Polygon":S=Math.min(S,Vn(A,E.coordinates,x,S))}if(S===0)return S}return S}(o,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const vl={"==":C1,"!=":Qm,">":k1,"<":eg,">=":tg,"<=":E1,array:Lo,at:Hd,boolean:Lo,case:Rc,coalesce:Oc,collator:Tu,format:Bc,image:Xd,in:Gd,"index-of":fl,interpolate:zi,"interpolate-hcl":zi,"interpolate-lab":zi,length:Yd,let:Qa,literal:Ao,match:Zd,number:Lo,"number-format":Kd,object:Lo,slice:ku,step:ml,string:Lo,"to-boolean":zo,"to-color":zo,"to-number":zo,"to-string":zo,var:xn,within:Ls,distance:Ds};class go{constructor(o,l,p,g){this.name=o,this.type=l,this._evaluate=p,this.args=g}evaluate(o){return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}static parse(o,l){const p=o[0],g=go.definitions[p];if(!g)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([A])=>!Array.isArray(A)||A.length===o.length-1);let E=null;for(const[A,L]of S){E=new Ps(l.registry,Au,l.path,null,l.scope);const $=[];let U=!1;for(let H=1;H<o.length;H++){const Y=o[H],J=Array.isArray(A)?A[H-1]:A.type,ue=E.parse(Y,1+$.length,J);if(!ue){U=!0;break}$.push(ue)}if(!U)if(Array.isArray(A)&&A.length!==$.length)E.error(`Expected ${A.length} arguments, but found ${$.length} instead.`);else{for(let H=0;H<$.length;H++){const Y=Array.isArray(A)?A[H]:A.type,J=$[H];E.concat(H+1).checkSubtype(Y,J.type)}if(E.errors.length===0)return new go(p,_,L,$)}}if(S.length===1)l.errors.push(...E.errors);else{const A=(S.length?S:x).map(([$])=>{return U=$,Array.isArray(U)?`(${U.map(W).join(", ")})`:`(${W(U.type)}...)`;var U}).join(" | "),L=[];for(let $=1;$<o.length;$++){const U=l.parse(o[$],1+L.length);if(!U)return null;L.push(W(U.type))}l.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(o,l){go.definitions=l;for(const p in l)o[p]=go}}function sp(s,[o,l,p,g]){o=o.evaluate(s),l=l.evaluate(s),p=p.evaluate(s);const _=g?g.evaluate(s):1,x=pl(o,l,p,_);if(x)throw new Tr(x);return new In(o/255,l/255,p/255,_,!1)}function lp(s,o){return s in o}function up(s,o){const l=o[s];return l===void 0?null:l}function $s(s){return{type:s}}function Au(s){if(s instanceof xn)return Au(s.boundExpression);if(s instanceof go&&s.name==="error"||s instanceof Tu||s instanceof Ls||s instanceof Ds)return!1;const o=s instanceof zo||s instanceof Lo;let l=!0;return s.eachChild(p=>{l=o?l&&Au(p):l&&p instanceof Ao}),!!l&&Lu(s)&&zu(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Lu(s){if(s instanceof go&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Ls||s instanceof Ds)return!1;let o=!0;return s.eachChild(l=>{o&&!Lu(l)&&(o=!1)}),o}function _l(s){if(s instanceof go&&s.name==="feature-state")return!1;let o=!0;return s.eachChild(l=>{o&&!_l(l)&&(o=!1)}),o}function zu(s,o){if(s instanceof go&&o.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(p=>{l&&!zu(p,o)&&(l=!1)}),l}function qc(s){return{result:"success",value:s}}function xl(s){return{result:"error",value:s}}function bl(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function fg(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function cp(s){return!!s.expression&&s.expression.interpolated}function yn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Hc(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function O1(s){return s}function mg(s,o){const l=o.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",g=p||!(p||s.property!==void 0),_=s.type||(cp(o)?"exponential":"interval");if(l||o.type==="padding"){const L=l?In.parse:Xi.parse;(s=cr({},s)).stops&&(s.stops=s.stops.map($=>[$[0],L($[1])])),s.default=L(s.default?s.default:o.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let S,E,A;if(_==="exponential")S=yg;else if(_==="interval")S=Gc;else if(_==="categorical"){S=gg,E=Object.create(null);for(const L of s.stops)E[L[0]]=L[1];A=typeof s.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=vg}if(p){const L={},$=[];for(let Y=0;Y<s.stops.length;Y++){const J=s.stops[Y],ue=J[0].zoom;L[ue]===void 0&&(L[ue]={zoom:ue,type:s.type,property:s.property,default:s.default,stops:[]},$.push(ue)),L[ue].stops.push([J[0].value,J[1]])}const U=[];for(const Y of $)U.push([L[Y].zoom,mg(L[Y],o)]);const H={name:"linear"};return{kind:"composite",interpolationType:H,interpolationFactor:zi.interpolationFactor.bind(void 0,H),zoomStops:U.map(Y=>Y[0]),evaluate:({zoom:Y},J)=>yg({stops:U,base:s.base},o,Y).evaluate(Y,J)}}if(g){const L=_==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:zi.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map($=>$[0]),evaluate:({zoom:$})=>S(s,o,$,E,A)}}return{kind:"source",evaluate(L,$){const U=$&&$.properties?$.properties[s.property]:void 0;return U===void 0?wl(s.default,o.default):S(s,o,U,E,A)}}}function wl(s,o,l){return s!==void 0?s:o!==void 0?o:l!==void 0?l:void 0}function gg(s,o,l,p,g){return wl(typeof l===g?p[l]:void 0,s.default,o.default)}function Gc(s,o,l){if(yn(l)!=="number")return wl(s.default,o.default);const p=s.stops.length;if(p===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[p-1][0])return s.stops[p-1][1];const g=Dc(s.stops.map(_=>_[0]),l);return s.stops[g][1]}function yg(s,o,l){const p=s.base!==void 0?s.base:1;if(yn(l)!=="number")return wl(s.default,o.default);const g=s.stops.length;if(g===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[g-1][0])return s.stops[g-1][1];const _=Dc(s.stops.map(L=>L[0]),l),x=function(L,$,U,H){const Y=H-U,J=L-U;return Y===0?0:$===1?J/Y:(Math.pow($,J)-1)/(Math.pow($,Y)-1)}(l,p,s.stops[_][0],s.stops[_+1][0]),S=s.stops[_][1],E=s.stops[_+1][1],A=Li[o.type]||O1;return typeof S.evaluate=="function"?{evaluate(...L){const $=S.evaluate.apply(void 0,L),U=E.evaluate.apply(void 0,L);if($!==void 0&&U!==void 0)return A($,U,x,s.colorSpace)}}:A(S,E,x,s.colorSpace)}function vg(s,o,l){switch(o.type){case"color":l=In.parse(l);break;case"formatted":l=Ki.fromString(l.toString());break;case"resolvedImage":l=Yi.fromString(l.toString());break;case"padding":l=Xi.parse(l);break;default:yn(l)===o.type||o.type==="enum"&&o.values[l]||(l=void 0)}return wl(l,s.default,o.default)}go.register(vl,{error:[{kind:"error"},[Xe],(s,[o])=>{throw new Tr(o.evaluate(s))}],typeof:[Xe,[Dt],(s,[o])=>W(Dr(o.evaluate(s)))],"to-rgba":[q(Ke,4),[cn],(s,[o])=>{const[l,p,g,_]=o.evaluate(s).rgb;return[255*l,255*p,255*g,_]}],rgb:[cn,[Ke,Ke,Ke],sp],rgba:[cn,[Ke,Ke,Ke,Ke],sp],has:{type:it,overloads:[[[Xe],(s,[o])=>lp(o.evaluate(s),s.properties())],[[Xe,zr],(s,[o,l])=>lp(o.evaluate(s),l.evaluate(s))]]},get:{type:Dt,overloads:[[[Xe],(s,[o])=>up(o.evaluate(s),s.properties())],[[Xe,zr],(s,[o,l])=>up(o.evaluate(s),l.evaluate(s))]]},"feature-state":[Dt,[Xe],(s,[o])=>up(o.evaluate(s),s.featureState||{})],properties:[zr,[],s=>s.properties()],"geometry-type":[Xe,[],s=>s.geometryType()],id:[Dt,[],s=>s.id()],zoom:[Ke,[],s=>s.globals.zoom],"heatmap-density":[Ke,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ke,[],s=>s.globals.lineProgress||0],accumulated:[Dt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ke,$s(Ke),(s,o)=>{let l=0;for(const p of o)l+=p.evaluate(s);return l}],"*":[Ke,$s(Ke),(s,o)=>{let l=1;for(const p of o)l*=p.evaluate(s);return l}],"-":{type:Ke,overloads:[[[Ke,Ke],(s,[o,l])=>o.evaluate(s)-l.evaluate(s)],[[Ke],(s,[o])=>-o.evaluate(s)]]},"/":[Ke,[Ke,Ke],(s,[o,l])=>o.evaluate(s)/l.evaluate(s)],"%":[Ke,[Ke,Ke],(s,[o,l])=>o.evaluate(s)%l.evaluate(s)],ln2:[Ke,[],()=>Math.LN2],pi:[Ke,[],()=>Math.PI],e:[Ke,[],()=>Math.E],"^":[Ke,[Ke,Ke],(s,[o,l])=>Math.pow(o.evaluate(s),l.evaluate(s))],sqrt:[Ke,[Ke],(s,[o])=>Math.sqrt(o.evaluate(s))],log10:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))/Math.LN10],ln:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))],log2:[Ke,[Ke],(s,[o])=>Math.log(o.evaluate(s))/Math.LN2],sin:[Ke,[Ke],(s,[o])=>Math.sin(o.evaluate(s))],cos:[Ke,[Ke],(s,[o])=>Math.cos(o.evaluate(s))],tan:[Ke,[Ke],(s,[o])=>Math.tan(o.evaluate(s))],asin:[Ke,[Ke],(s,[o])=>Math.asin(o.evaluate(s))],acos:[Ke,[Ke],(s,[o])=>Math.acos(o.evaluate(s))],atan:[Ke,[Ke],(s,[o])=>Math.atan(o.evaluate(s))],min:[Ke,$s(Ke),(s,o)=>Math.min(...o.map(l=>l.evaluate(s)))],max:[Ke,$s(Ke),(s,o)=>Math.max(...o.map(l=>l.evaluate(s)))],abs:[Ke,[Ke],(s,[o])=>Math.abs(o.evaluate(s))],round:[Ke,[Ke],(s,[o])=>{const l=o.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ke,[Ke],(s,[o])=>Math.floor(o.evaluate(s))],ceil:[Ke,[Ke],(s,[o])=>Math.ceil(o.evaluate(s))],"filter-==":[it,[Xe,Dt],(s,[o,l])=>s.properties()[o.value]===l.value],"filter-id-==":[it,[Dt],(s,[o])=>s.id()===o.value],"filter-type-==":[it,[Xe],(s,[o])=>s.geometryType()===o.value],"filter-<":[it,[Xe,Dt],(s,[o,l])=>{const p=s.properties()[o.value],g=l.value;return typeof p==typeof g&&p<g}],"filter-id-<":[it,[Dt],(s,[o])=>{const l=s.id(),p=o.value;return typeof l==typeof p&&l<p}],"filter->":[it,[Xe,Dt],(s,[o,l])=>{const p=s.properties()[o.value],g=l.value;return typeof p==typeof g&&p>g}],"filter-id->":[it,[Dt],(s,[o])=>{const l=s.id(),p=o.value;return typeof l==typeof p&&l>p}],"filter-<=":[it,[Xe,Dt],(s,[o,l])=>{const p=s.properties()[o.value],g=l.value;return typeof p==typeof g&&p<=g}],"filter-id-<=":[it,[Dt],(s,[o])=>{const l=s.id(),p=o.value;return typeof l==typeof p&&l<=p}],"filter->=":[it,[Xe,Dt],(s,[o,l])=>{const p=s.properties()[o.value],g=l.value;return typeof p==typeof g&&p>=g}],"filter-id->=":[it,[Dt],(s,[o])=>{const l=s.id(),p=o.value;return typeof l==typeof p&&l>=p}],"filter-has":[it,[Dt],(s,[o])=>o.value in s.properties()],"filter-has-id":[it,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[it,[q(Xe)],(s,[o])=>o.value.indexOf(s.geometryType())>=0],"filter-id-in":[it,[q(Dt)],(s,[o])=>o.value.indexOf(s.id())>=0],"filter-in-small":[it,[Xe,q(Dt)],(s,[o,l])=>l.value.indexOf(s.properties()[o.value])>=0],"filter-in-large":[it,[Xe,q(Dt)],(s,[o,l])=>function(p,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===p)return!0;g[S]>p?x=S-1:_=S+1}return!1}(s.properties()[o.value],l.value,0,l.value.length-1)],all:{type:it,overloads:[[[it,it],(s,[o,l])=>o.evaluate(s)&&l.evaluate(s)],[$s(it),(s,o)=>{for(const l of o)if(!l.evaluate(s))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(s,[o,l])=>o.evaluate(s)||l.evaluate(s)],[$s(it),(s,o)=>{for(const l of o)if(l.evaluate(s))return!0;return!1}]]},"!":[it,[it],(s,[o])=>!o.evaluate(s)],"is-supported-script":[it,[Xe],(s,[o])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(o.evaluate(s))}],upcase:[Xe,[Xe],(s,[o])=>o.evaluate(s).toUpperCase()],downcase:[Xe,[Xe],(s,[o])=>o.evaluate(s).toLowerCase()],concat:[Xe,$s(Dt),(s,o)=>o.map(l=>Cu(l.evaluate(s))).join("")],"resolved-locale":[Xe,[po],(s,[o])=>o.evaluate(s).resolvedLocale()]});class Zc{constructor(o,l){var p;this.expression=o,this._warningHistory={},this._evaluator=new zc,this._defaultValue=l?(p=l).type==="color"&&Hc(p.default)?new In(0,0,0,0):p.type==="color"?In.parse(p.default)||null:p.type==="padding"?Xi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?mo.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(o,l,p,g,_,x){return this._evaluator.globals=o,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(o,l,p,g,_,x){this._evaluator.globals=o,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Tr(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Kc(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in vl}function Sl(s,o){const l=new Ps(vl,Au,[],o?function(g){const _={color:cn,string:Xe,number:Ke,enum:Xe,boolean:it,formatted:Mo,padding:ia,resolvedImage:fo,variableAnchorOffsetCollection:pe};return g.type==="array"?q(_[g.value]||Dt,g.length):_[g.type]}(o):void 0),p=l.parse(s,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?qc(new Zc(p,o)):xl(l.errors)}class Cl{constructor(o,l){this.kind=o,this._styleExpression=l,this.isStateDependent=o!=="constant"&&!_l(l.expression)}evaluateWithoutErrorHandling(o,l,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,p,g,_,x)}evaluate(o,l,p,g,_,x){return this._styleExpression.evaluate(o,l,p,g,_,x)}}class kl{constructor(o,l,p,g){this.kind=o,this.zoomStops=p,this._styleExpression=l,this.isStateDependent=o!=="camera"&&!_l(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(o,l,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(o,l,p,g,_,x)}evaluate(o,l,p,g,_,x){return this._styleExpression.evaluate(o,l,p,g,_,x)}interpolationFactor(o,l,p){return this.interpolationType?zi.interpolationFactor(this.interpolationType,o,l,p):0}}function hp(s,o){const l=Sl(s,o);if(l.result==="error")return l;const p=l.value.expression,g=Lu(p);if(!g&&!bl(o))return xl([new Zn("","data expressions not supported")]);const _=zu(p,["zoom"]);if(!_&&!fg(o))return xl([new Zn("","zoom expressions not supported")]);const x=Ru(p);return x||_?x instanceof Zn?xl([x]):x instanceof zi&&!cp(o)?xl([new Zn("",'"interpolate" expressions cannot be used with this property')]):qc(x?new kl(g?"camera":"composite",l.value,x.labels,x instanceof zi?x.interpolation:void 0):new Cl(g?"constant":"source",l.value)):xl([new Zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class El{constructor(o,l){this._parameters=o,this._specification=l,cr(this,mg(this._parameters,this._specification))}static deserialize(o){return new El(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ru(s){let o=null;if(s instanceof Qa)o=Ru(s.result);else if(s instanceof Oc){for(const l of s.args)if(o=Ru(l),o)break}else(s instanceof ml||s instanceof zi)&&s.input instanceof go&&s.input.name==="zoom"&&(o=s);return o instanceof Zn||s.eachChild(l=>{const p=Ru(l);p instanceof Zn?o=p:!o&&p?o=new Zn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):o&&p&&o!==p&&(o=new Zn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}function Xc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const o of s.slice(1))if(!Xc(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}const Yc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dp(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Xc(s)||(s=Jc(s));const o=Sl(s,Yc);if(o.result==="error")throw new Error(o.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,p,g)=>o.value.evaluate(l,p,{},g),needGeometry:_g(s)}}function F1(s,o){return s<o?-1:s>o?1:0}function _g(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let o=1;o<s.length;o++)if(_g(s[o]))return!0;return!1}function Jc(s){if(!s)return!0;const o=s[0];return s.length<=1?o!=="any":o==="=="?pp(s[1],s[2],"=="):o==="!="?si(pp(s[1],s[2],"==")):o==="<"||o===">"||o==="<="||o===">="?pp(s[1],s[2],o):o==="any"?(l=s.slice(1),["any"].concat(l.map(Jc))):o==="all"?["all"].concat(s.slice(1).map(Jc)):o==="none"?["all"].concat(s.slice(1).map(Jc).map(si)):o==="in"?Du(s[1],s.slice(2)):o==="!in"?si(Du(s[1],s.slice(2))):o==="has"?$u(s[1]):o!=="!has"||si($u(s[1]));var l}function pp(s,o,l){switch(s){case"$type":return[`filter-type-${l}`,o];case"$id":return[`filter-id-${l}`,o];default:return[`filter-${l}`,s,o]}}function Du(s,o){if(o.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(l=>typeof l!=typeof o[0])?["filter-in-large",s,["literal",o.sort(F1)]]:["filter-in-small",s,["literal",o]]}}function $u(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function si(s){return["!",s]}function Os(s){const o=typeof s;if(o==="number"||o==="boolean"||o==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const _ of s)g+=`${Os(_)},`;return`${g}]`}const l=Object.keys(s).sort();let p="{";for(let g=0;g<l.length;g++)p+=`${JSON.stringify(l[g])}:${Os(s[l[g]])},`;return`${p}}`}function xg(s){let o="";for(const l of ur)o+=`/${Os(s[l])}`;return o}function bg(s){const o=s.value;return o?[new Ge(s.key,o,"constants have been deprecated as of v8")]:[]}function xr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Ro(s){if(Array.isArray(s))return s.map(Ro);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const o={};for(const l in s)o[l]=Ro(s[l]);return o}return xr(s)}function Ji(s){const o=s.key,l=s.value,p=s.valueSpec||{},g=s.objectElementValidators||{},_=s.style,x=s.styleSpec,S=s.validateSpec;let E=[];const A=yn(l);if(A!=="object")return[new Ge(o,l,`object expected, ${A} found`)];for(const L in l){const $=L.split(".")[0],U=p[$]||p["*"];let H;if(g[$])H=g[$];else if(p[$])H=S;else if(g["*"])H=g["*"];else{if(!p["*"]){E.push(new Ge(o,l[L],`unknown property "${L}"`));continue}H=S}E=E.concat(H({key:(o&&`${o}.`)+L,value:l[L],valueSpec:U,style:_,styleSpec:x,object:l,objectKey:L,validateSpec:S},l))}for(const L in p)g[L]||p[L].required&&p[L].default===void 0&&l[L]===void 0&&E.push(new Ge(o,l,`missing required property "${L}"`));return E}function Ou(s){const o=s.value,l=s.valueSpec,p=s.style,g=s.styleSpec,_=s.key,x=s.arrayElementValidator||s.validateSpec;if(yn(o)!=="array")return[new Ge(_,o,`array expected, ${yn(o)} found`)];if(l.length&&o.length!==l.length)return[new Ge(_,o,`array length ${l.length} expected, length ${o.length} found`)];if(l["min-length"]&&o.length<l["min-length"])return[new Ge(_,o,`array length at least ${l["min-length"]} expected, length ${o.length} found`)];let S={type:l.value,values:l.values};g.$version<7&&(S.function=l.function),yn(l.value)==="object"&&(S=l.value);let E=[];for(let A=0;A<o.length;A++)E=E.concat(x({array:o,arrayIndex:A,value:o[A],valueSpec:S,validateSpec:s.validateSpec,style:p,styleSpec:g,key:`${_}[${A}]`}));return E}function fp(s){const o=s.key,l=s.value,p=s.valueSpec;let g=yn(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new Ge(o,l,`number expected, ${g} found`)]:"minimum"in p&&l<p.minimum?[new Ge(o,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new Ge(o,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function Qc(s){const o=s.valueSpec,l=xr(s.value.type);let p,g,_,x={};const S=l!=="categorical"&&s.value.property===void 0,E=!S,A=yn(s.value.stops)==="array"&&yn(s.value.stops[0])==="array"&&yn(s.value.stops[0][0])==="object",L=Ji({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(H){if(l==="identity")return[new Ge(H.key,H.value,'identity function may not have a "stops" property')];let Y=[];const J=H.value;return Y=Y.concat(Ou({key:H.key,value:J,valueSpec:H.valueSpec,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,arrayElementValidator:$})),yn(J)==="array"&&J.length===0&&Y.push(new Ge(H.key,J,"array must have at least one stop")),Y},default:function(H){return H.validateSpec({key:H.key,value:H.value,valueSpec:o,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec})}}});return l==="identity"&&S&&L.push(new Ge(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||L.push(new Ge(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!cp(s.valueSpec)&&L.push(new Ge(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(E&&!bl(s.valueSpec)?L.push(new Ge(s.key,s.value,"property functions not supported")):S&&!fg(s.valueSpec)&&L.push(new Ge(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!A||s.value.property!==void 0||L.push(new Ge(s.key,s.value,'"property" property is required')),L;function $(H){let Y=[];const J=H.value,ue=H.key;if(yn(J)!=="array")return[new Ge(ue,J,`array expected, ${yn(J)} found`)];if(J.length!==2)return[new Ge(ue,J,`array length 2 expected, length ${J.length} found`)];if(A){if(yn(J[0])!=="object")return[new Ge(ue,J,`object expected, ${yn(J[0])} found`)];if(J[0].zoom===void 0)return[new Ge(ue,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new Ge(ue,J,"object stop key must have value")];if(_&&_>xr(J[0].zoom))return[new Ge(ue,J[0].zoom,"stop zoom values must appear in ascending order")];xr(J[0].zoom)!==_&&(_=xr(J[0].zoom),g=void 0,x={}),Y=Y.concat(Ji({key:`${ue}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{zoom:fp,value:U}}))}else Y=Y.concat(U({key:`${ue}[0]`,value:J[0],valueSpec:{},validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec},J));return Kc(Ro(J[1]))?Y.concat([new Ge(`${ue}[1]`,J[1],"expressions are not allowed in function stops.")]):Y.concat(H.validateSpec({key:`${ue}[1]`,value:J[1],valueSpec:o,validateSpec:H.validateSpec,style:H.style,styleSpec:H.styleSpec}))}function U(H,Y){const J=yn(H.value),ue=xr(H.value),fe=H.value!==null?H.value:Y;if(p){if(J!==p)return[new Ge(H.key,fe,`${J} stop domain type must match previous stop domain type ${p}`)]}else p=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new Ge(H.key,fe,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&l!=="categorical"){let Te=`number expected, ${J} found`;return bl(o)&&l===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(H.key,fe,Te)]}return l!=="categorical"||J!=="number"||isFinite(ue)&&Math.floor(ue)===ue?l!=="categorical"&&J==="number"&&g!==void 0&&ue<g?[new Ge(H.key,fe,"stop domain values must appear in ascending order")]:(g=ue,l==="categorical"&&ue in x?[new Ge(H.key,fe,"stop domain values must be unique")]:(x[ue]=!0,[])):[new Ge(H.key,fe,`integer expected, found ${ue}`)]}}function Tl(s){const o=(s.expressionContext==="property"?hp:Sl)(Ro(s.value),s.valueSpec);if(o.result==="error")return o.value.map(p=>new Ge(`${s.key}${p.key}`,s.value,p.message));const l=o.value.expression||o.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Ge(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!_l(l))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!_l(l))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!zu(l,["zoom","feature-state"]))return[new Ge(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!Lu(l))return[new Ge(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function za(s){const o=s.key,l=s.value,p=s.valueSpec,g=[];return Array.isArray(p.values)?p.values.indexOf(xr(l))===-1&&g.push(new Ge(o,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(xr(l))===-1&&g.push(new Ge(o,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function mp(s){return Xc(Ro(s.value))?Tl(cr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):eh(s)}function eh(s){const o=s.value,l=s.key;if(yn(o)!=="array")return[new Ge(l,o,`array expected, ${yn(o)} found`)];const p=s.styleSpec;let g,_=[];if(o.length<1)return[new Ge(l,o,"filter array must have at least 1 element")];switch(_=_.concat(za({key:`${l}[0]`,value:o[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),xr(o[0])){case"<":case"<=":case">":case">=":o.length>=2&&xr(o[1])==="$type"&&_.push(new Ge(l,o,`"$type" cannot be use with operator "${o[0]}"`));case"==":case"!=":o.length!==3&&_.push(new Ge(l,o,`filter array for operator "${o[0]}" must have 3 elements`));case"in":case"!in":o.length>=2&&(g=yn(o[1]),g!=="string"&&_.push(new Ge(`${l}[1]`,o[1],`string expected, ${g} found`)));for(let x=2;x<o.length;x++)g=yn(o[x]),xr(o[1])==="$type"?_=_.concat(za({key:`${l}[${x}]`,value:o[x],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ge(`${l}[${x}]`,o[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<o.length;x++)_=_.concat(eh({key:`${l}[${x}]`,value:o[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=yn(o[1]),o.length!==2?_.push(new Ge(l,o,`filter array for "${o[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ge(`${l}[1]`,o[1],`string expected, ${g} found`))}return _}function gp(s,o){const l=s.key,p=s.validateSpec,g=s.style,_=s.styleSpec,x=s.value,S=s.objectKey,E=_[`${o}_${s.layerType}`];if(!E)return[];const A=S.match(/^(.*)-transition$/);if(o==="paint"&&A&&E[A[1]]&&E[A[1]].transition)return p({key:l,value:x,valueSpec:_.transition,style:g,styleSpec:_});const L=s.valueSpec||E[S];if(!L)return[new Ge(l,x,`unknown property "${S}"`)];let $;if(yn(x)==="string"&&bl(L)&&!L.tokens&&($=/^{([^}]+)}$/.exec(x)))return[new Ge(l,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify($[1])} }\`.`)];const U=[];return s.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&U.push(new Ge(l,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Hc(Ro(x))&&xr(x.type)==="identity"&&U.push(new Ge(l,x,'"text-font" does not support identity functions'))),U.concat(p({key:s.key,value:x,valueSpec:L,style:g,styleSpec:_,expressionContext:"property",propertyType:o,propertyKey:S}))}function th(s){return gp(s,"paint")}function yp(s){return gp(s,"layout")}function vp(s){let o=[];const l=s.value,p=s.key,g=s.style,_=s.styleSpec;l.type||l.ref||o.push(new Ge(p,l,'either "type" or "ref" is required'));let x=xr(l.type);const S=xr(l.ref);if(l.id){const E=xr(l.id);for(let A=0;A<s.arrayIndex;A++){const L=g.layers[A];xr(L.id)===E&&o.push(new Ge(p,l.id,`duplicate layer id "${l.id}", previously used at line ${L.id.__line__}`))}}if("ref"in l){let E;["type","source","source-layer","filter","layout"].forEach(A=>{A in l&&o.push(new Ge(p,l[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{xr(A.id)===S&&(E=A)}),E?E.ref?o.push(new Ge(p,l.ref,"ref cannot reference another ref layer")):x=xr(E.type):o.push(new Ge(p,l.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(l.source){const E=g.sources&&g.sources[l.source],A=E&&xr(E.type);E?A==="vector"&&x==="raster"?o.push(new Ge(p,l.source,`layer "${l.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?o.push(new Ge(p,l.source,`layer "${l.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?o.push(new Ge(p,l.source,`layer "${l.id}" requires a vector source`)):A!=="vector"||l["source-layer"]?A==="raster-dem"&&x!=="hillshade"?o.push(new Ge(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||A==="geojson"&&E.lineMetrics||o.push(new Ge(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):o.push(new Ge(p,l,`layer "${l.id}" must specify a "source-layer"`)):o.push(new Ge(p,l.source,`source "${l.source}" not found`))}else o.push(new Ge(p,l,'missing required property "source"'));return o=o.concat(Ji({key:p,value:l,valueSpec:_.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:l.type,valueSpec:_.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:mp,layout:E=>Ji({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>yp(cr({layerType:x},A))}}),paint:E=>Ji({layer:l,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,validateSpec:E.validateSpec,objectElementValidators:{"*":A=>th(cr({layerType:x},A))}})}})),o}function Fs(s){const o=s.value,l=s.key,p=yn(o);return p!=="string"?[new Ge(l,o,`string expected, ${p} found`)]:[]}const nh={promoteId:function({key:s,value:o}){if(yn(o)==="string")return Fs({key:s,value:o});{const l=[];for(const p in o)l.push(...Fs({key:`${s}.${p}`,value:o[p]}));return l}}};function Fu(s){const o=s.value,l=s.key,p=s.styleSpec,g=s.style,_=s.validateSpec;if(!o.type)return[new Ge(l,o,'"type" is required')];const x=xr(o.type);let S;switch(x){case"vector":case"raster":return S=Ji({key:l,value:o,valueSpec:p[`source_${x.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:nh,validateSpec:_}),S;case"raster-dem":return S=function(E){var A;const L=(A=E.sourceName)!==null&&A!==void 0?A:"",$=E.value,U=E.styleSpec,H=U.source_raster_dem,Y=E.style;let J=[];const ue=yn($);if($===void 0)return J;if(ue!=="object")return J.push(new Ge("source_raster_dem",$,`object expected, ${ue} found`)),J;const fe=xr($.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],_e=E.value.encoding?`"${E.value.encoding}"`:"Default";for(const Ee in $)!fe&&Te.includes(Ee)?J.push(new Ge(Ee,$[Ee],`In "${L}": "${Ee}" is only valid when "encoding" is set to "custom". ${_e} encoding found`)):H[Ee]?J=J.concat(E.validateSpec({key:Ee,value:$[Ee],valueSpec:H[Ee],validateSpec:E.validateSpec,style:Y,styleSpec:U})):J.push(new Ge(Ee,$[Ee],`unknown property "${Ee}"`));return J}({sourceName:l,value:o,style:s.style,styleSpec:p,validateSpec:_}),S;case"geojson":if(S=Ji({key:l,value:o,valueSpec:p.source_geojson,style:g,styleSpec:p,validateSpec:_,objectElementValidators:nh}),o.cluster)for(const E in o.clusterProperties){const[A,L]=o.clusterProperties[E],$=typeof A=="string"?[A,["accumulated"],["get",E]]:A;S.push(...Tl({key:`${l}.${E}.map`,value:L,validateSpec:_,expressionContext:"cluster-map"})),S.push(...Tl({key:`${l}.${E}.reduce`,value:$,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return Ji({key:l,value:o,valueSpec:p.source_video,style:g,validateSpec:_,styleSpec:p});case"image":return Ji({key:l,value:o,valueSpec:p.source_image,style:g,validateSpec:_,styleSpec:p});case"canvas":return[new Ge(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return za({key:`${l}.type`,value:o.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:p})}}function _p(s){const o=s.value,l=s.styleSpec,p=l.light,g=s.style;let _=[];const x=yn(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Ge("light",o,`object expected, ${x} found`)]),_;for(const S in o){const E=S.match(/^(.*)-transition$/);_=_.concat(E&&p[E[1]]&&p[E[1]].transition?s.validateSpec({key:S,value:o[S],valueSpec:l.transition,validateSpec:s.validateSpec,style:g,styleSpec:l}):p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new Ge(S,o[S],`unknown property "${S}"`)])}return _}function xp(s){const o=s.value,l=s.styleSpec,p=l.sky,g=s.style,_=yn(o);if(o===void 0)return[];if(_!=="object")return[new Ge("sky",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],style:g,styleSpec:l}):[new Ge(S,o[S],`unknown property "${S}"`)]);return x}function bp(s){const o=s.value,l=s.styleSpec,p=l.terrain,g=s.style;let _=[];const x=yn(o);if(o===void 0)return _;if(x!=="object")return _=_.concat([new Ge("terrain",o,`object expected, ${x} found`)]),_;for(const S in o)_=_.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new Ge(S,o[S],`unknown property "${S}"`)]);return _}function wp(s){let o=[];const l=s.value,p=s.key;if(Array.isArray(l)){const g=[],_=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&o.push(new Ge(p,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&_.includes(l[x].url)&&o.push(new Ge(p,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),_.push(l[x].url),o=o.concat(Ji({key:`${p}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return o}return Fs({key:p,value:l})}const rh={"*":()=>[],array:Ou,boolean:function(s){const o=s.value,l=s.key,p=yn(o);return p!=="boolean"?[new Ge(l,o,`boolean expected, ${p} found`)]:[]},number:fp,color:function(s){const o=s.key,l=s.value,p=yn(l);return p!=="string"?[new Ge(o,l,`color expected, ${p} found`)]:In.parse(String(l))?[]:[new Ge(o,l,`color expected, "${l}" found`)]},constants:bg,enum:za,filter:mp,function:Qc,layer:vp,object:Ji,source:Fu,light:_p,sky:xp,terrain:bp,projection:function(s){const o=s.value,l=s.styleSpec,p=l.projection,g=s.style,_=yn(o);if(o===void 0)return[];if(_!=="object")return[new Ge("projection",o,`object expected, ${_} found`)];let x=[];for(const S in o)x=x.concat(p[S]?s.validateSpec({key:S,value:o[S],valueSpec:p[S],style:g,styleSpec:l}):[new Ge(S,o[S],`unknown property "${S}"`)]);return x},string:Fs,formatted:function(s){return Fs(s).length===0?[]:Tl(s)},resolvedImage:function(s){return Fs(s).length===0?[]:Tl(s)},padding:function(s){const o=s.key,l=s.value;if(yn(l)==="array"){if(l.length<1||l.length>4)return[new Ge(o,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let g=[];for(let _=0;_<l.length;_++)g=g.concat(s.validateSpec({key:`${o}[${_}]`,value:l[_],validateSpec:s.validateSpec,valueSpec:p}));return g}return fp({key:o,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const o=s.key,l=s.value,p=yn(l),g=s.styleSpec;if(p!=="array"||l.length<1||l.length%2!=0)return[new Ge(o,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<l.length;x+=2)_=_.concat(za({key:`${o}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(Ou({key:`${o}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return _},sprite:wp};function Il(s){const o=s.value,l=s.valueSpec,p=s.styleSpec;return s.validateSpec=Il,l.expression&&Hc(xr(o))?Qc(s):l.expression&&Kc(Ro(o))?Tl(s):l.type&&rh[l.type]?rh[l.type](s):Ji(cr({},s,{valueSpec:l.type?p[l.type]:l}))}function wg(s){const o=s.value,l=s.key,p=Fs(s);return p.length||(o.indexOf("{fontstack}")===-1&&p.push(new Ge(l,o,'"glyphs" url must include a "{fontstack}" token')),o.indexOf("{range}")===-1&&p.push(new Ge(l,o,'"glyphs" url must include a "{range}" token'))),p}function yo(s,o=Se){let l=[];return l=l.concat(Il({key:"",value:s,valueSpec:o.$root,styleSpec:o,style:s,validateSpec:Il,objectElementValidators:{glyphs:wg,"*":()=>[]}})),s.constants&&(l=l.concat(bg({key:"constants",value:s.constants,style:s,styleSpec:o,validateSpec:Il}))),Sp(l)}function aa(s){return function(o){return s({...o,validateSpec:Il})}}function Sp(s){return[].concat(s).sort((o,l)=>o.line-l.line)}function Do(s){return function(...o){return Sp(s.apply(this,o))}}yo.source=Do(aa(Fu)),yo.sprite=Do(aa(wp)),yo.glyphs=Do(aa(wg)),yo.light=Do(aa(_p)),yo.sky=Do(aa(xp)),yo.terrain=Do(aa(bp)),yo.layer=Do(aa(vp)),yo.filter=Do(aa(mp)),yo.paintProperty=Do(aa(th)),yo.layoutProperty=Do(aa(yp));const Bs=yo,B1=Bs.light,N1=Bs.sky,Sg=Bs.paintProperty,Cg=Bs.layoutProperty;function Cp(s,o){let l=!1;if(o&&o.length)for(const p of o)s.fire(new yt(new Error(p.message))),l=!0;return l}class Pl{constructor(o,l,p){const g=this.cells=[];if(o instanceof ArrayBuffer){this.arrayBuffer=o;const x=new Int32Array(this.arrayBuffer);o=x[0],this.d=(l=x[1])+2*(p=x[2]);for(let E=0;E<this.d*this.d;E++){const A=x[3+E],L=x[3+E+1];g.push(A===L?null:x.subarray(A,L))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=o,this.padding=p,this.scale=l/o,this.uid=0;const _=p/l*o;this.min=-_,this.max=o+_}insert(o,l,p,g,_){this._forEachCell(l,p,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(o),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(o,l,p,g,_,x){this.cells[_].push(x)}query(o,l,p,g,_){const x=this.min,S=this.max;if(o<=x&&l<=x&&S<=p&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(o,l,p,g,this._queryCell,E,{},_),E}}_queryCell(o,l,p,g,_,x,S,E){const A=this.cells[_];if(A!==null){const L=this.keys,$=this.bboxes;for(let U=0;U<A.length;U++){const H=A[U];if(S[H]===void 0){const Y=4*H;(E?E($[Y+0],$[Y+1],$[Y+2],$[Y+3]):o<=$[Y+2]&&l<=$[Y+3]&&p>=$[Y+0]&&g>=$[Y+1])?(S[H]=!0,x.push(L[H])):S[H]=!1}}}}_forEachCell(o,l,p,g,_,x,S,E){const A=this._convertToCellCoord(o),L=this._convertToCellCoord(l),$=this._convertToCellCoord(p),U=this._convertToCellCoord(g);for(let H=A;H<=$;H++)for(let Y=L;Y<=U;Y++){const J=this.d*Y+H;if((!E||E(this._convertFromCellCoord(H),this._convertFromCellCoord(Y),this._convertFromCellCoord(H+1),this._convertFromCellCoord(Y+1)))&&_.call(this,o,l,p,g,J,x,S,E))return}}_convertFromCellCoord(o){return(o-this.padding)/this.scale}_convertToCellCoord(o){return Math.max(0,Math.min(this.d-1,Math.floor(o*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const o=this.cells,l=3+this.cells.length+1+1;let p=0;for(let x=0;x<this.cells.length;x++)p+=this.cells[x].length;const g=new Int32Array(l+p+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=l;for(let x=0;x<o.length;x++){const S=o[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+o.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+o.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(o,l){const p=o.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(o){return new Pl(o.buffer)}}const vo={};function mt(s,o,l={}){if(vo[s])throw new Error(`${s} is already registered.`);Object.defineProperty(o,"_classRegistryKey",{value:s,writeable:!1}),vo[s]={klass:o,omit:l.omit||[],shallow:l.shallow||[]}}mt("Object",Object),mt("TransferableGridIndex",Pl),mt("Color",In),mt("Error",Error),mt("AJAXError",tn),mt("ResolvedImage",Yi),mt("StylePropertyFunction",El),mt("StyleExpression",Zc,{omit:["_evaluator"]}),mt("ZoomDependentExpression",kl),mt("ZoomConstantExpression",Cl),mt("CompoundExpression",go,{omit:["_evaluate"]});for(const s in vl)vl[s]._classRegistryKey||mt(`Expression_${s}`,vl[s]);function ih(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function kp(s){return s.$name||s.constructor._classRegistryKey}function kg(s){return!function(o){if(o===null||typeof o!="object")return!1;const l=kp(o);return!(!l||l==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||ih(s)||at(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Ml(s,o){if(kg(s))return(ih(s)||at(s))&&o&&o.push(s),ArrayBuffer.isView(s)&&o&&o.push(s.buffer),s instanceof ImageData&&o&&o.push(s.data.buffer),s;if(Array.isArray(s)){const _=[];for(const x of s)_.push(Ml(x,o));return _}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const l=kp(s);if(!l)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!vo[l])throw new Error(`${l} is not registered.`);const{klass:p}=vo[l],g=p.serialize?p.serialize(s,o):{};if(p.serialize){if(o&&g===o[o.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in s){if(!s.hasOwnProperty(_)||vo[l].omit.indexOf(_)>=0)continue;const x=s[_];g[_]=vo[l].shallow.indexOf(_)>=0?x:Ml(x,o)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function Al(s){if(kg(s))return s;if(Array.isArray(s))return s.map(Al);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const o=kp(s)||"Object";if(!vo[o])throw new Error(`can't deserialize unregistered class ${o}`);const{klass:l}=vo[o];if(!l)throw new Error(`can't deserialize unregistered class ${o}`);if(l.deserialize)return l.deserialize(s);const p=Object.create(l.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const _=s[g];p[g]=vo[o].shallow.indexOf(g)>=0?_:Al(_)}return p}class Ep{constructor(){this.first=!0}update(o,l){const p=Math.floor(o);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=o,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),o!==this.lastZoom&&(this.lastZoom=o,this.lastFloorZoom=p,!0))}}const rn={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function Tp(s){for(const o of s)if(Pp(o.charCodeAt(0)))return!0;return!1}function j1(s){for(const o of s)if(!Ll(o.charCodeAt(0)))return!1;return!0}function Ip(s){const o=s.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(o.join("|"),"u")}const U1=Ip(["Arab","Dupl","Mong","Ougr","Syrc"]);function Ll(s){return!U1.test(String.fromCodePoint(s))}const Eg=Ip(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Pp(s){return!(s!==746&&s!==747&&(s<4352||!(rn["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||rn["CJK Compatibility"](s)||rn["CJK Strokes"](s)||!(!rn["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||rn["Enclosed CJK Letters and Months"](s)||rn["Ideographic Description Characters"](s)||rn.Kanbun(s)||rn.Katakana(s)&&s!==12540||!(!rn["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!rn["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||rn["Vertical Forms"](s)||rn["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Eg.test(String.fromCodePoint(s)))))}function Tg(s){return!(Pp(s)||function(o){return!!(rn["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||rn["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||rn["Letterlike Symbols"](o)||rn["Number Forms"](o)||rn["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||rn["Control Pictures"](o)&&o!==9251||rn["Optical Character Recognition"](o)||rn["Enclosed Alphanumerics"](o)||rn["Geometric Shapes"](o)||rn["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||rn["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||rn["CJK Symbols and Punctuation"](o)||rn.Katakana(o)||rn["Private Use Area"](o)||rn["CJK Compatibility Forms"](o)||rn["Small Form Variants"](o)||rn["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(s))}const V1=Ip(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Mp(s){return V1.test(String.fromCodePoint(s))}function W1(s,o){return!(!o&&Mp(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||rn.Khmer(s))}function q1(s){for(const o of s)if(Mp(o.charCodeAt(0)))return!0;return!1}const Qi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Kn{constructor(o,l){this.zoom=o,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ep,this.transition={})}isSupportedScript(o){return function(l,p){for(const g of l)if(!W1(g.charCodeAt(0),p))return!1;return!0}(o,Qi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const o=this.zoom,l=o-Math.floor(o),p=this.crossFadingFactor();return o>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}class zl{constructor(o,l){this.property=o,this.value=l,this.expression=function(p,g){if(Hc(p))return new El(p,g);if(Kc(p)){const _=hp(p,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=p;return g.type==="color"&&typeof p=="string"?_=In.parse(p):g.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(_=mo.parse(p)):_=Xi.parse(p),{kind:"constant",evaluate:()=>_}}}(l===void 0?o.specification.default:l,o.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,l,p){return this.property.possiblyEvaluate(this,o,l,p)}}class oh{constructor(o){this.property=o,this.value=new zl(o,void 0)}transitioned(o,l){return new Ig(this.property,this.value,l,ae({},o.transition,this.transition),o.now)}untransitioned(){return new Ig(this.property,this.value,null,{},0)}}class ah{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues)}getValue(o){return Ie(this._values[o].value.value)}setValue(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new oh(this._values[o].property)),this._values[o].value=new zl(this._values[o].property,l===null?void 0:Ie(l))}getTransition(o){return Ie(this._values[o].transition)}setTransition(o,l){Object.prototype.hasOwnProperty.call(this._values,o)||(this._values[o]=new oh(this._values[o].property)),this._values[o].transition=Ie(l)||void 0}serialize(){const o={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(o[l]=p);const g=this.getTransition(l);g!==void 0&&(o[`${l}-transition`]=g)}return o}transitioned(o,l){const p=new Bu(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].transitioned(o,l._values[g]);return p}untransitioned(){const o=new Bu(this._properties);for(const l of Object.keys(this._values))o._values[l]=this._values[l].untransitioned();return o}}class Ig{constructor(o,l,p,g,_){this.property=o,this.value=l,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,o.specification.transition&&(g.delay||g.duration)&&(this.prior=p)}possiblyEvaluate(o,l,p){const g=o.now||0,_=this.value.possiblyEvaluate(o,l,p),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(o,l,p);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(o,l,p),_,function(E){if(E<=0)return 0;if(E>=1)return 1;const A=E*E,L=A*E;return 4*(E<.5?L:3*(E-A)+L-.75)}(S))}}return _}}class Bu{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,l,p){const g=new ju(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,l,p);return g}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class Nu{constructor(o){this._properties=o,this._values=Object.create(o.defaultPropertyValues)}hasValue(o){return this._values[o].value!==void 0}getValue(o){return Ie(this._values[o].value)}setValue(o,l){this._values[o]=new zl(this._values[o].property,l===null?void 0:Ie(l))}serialize(){const o={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(o[l]=p)}return o}possiblyEvaluate(o,l,p){const g=new ju(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(o,l,p);return g}}class sa{constructor(o,l,p){this.property=o,this.value=l,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,l,p,g){return this.property.evaluate(this.value,this.parameters,o,l,p,g)}}class ju{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class vt{constructor(o){this.specification=o}possiblyEvaluate(o,l){if(o.isDataDriven())throw new Error("Value should not be data driven");return o.expression.evaluate(l)}interpolate(o,l,p){const g=Li[this.specification.type];return g?g(o,l,p):o}}class At{constructor(o,l){this.specification=o,this.overrides=l}possiblyEvaluate(o,l,p,g){return new sa(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(l,null,{},p,g)}:o.expression,l)}interpolate(o,l,p){if(o.value.kind!=="constant"||l.value.kind!=="constant")return o;if(o.value.value===void 0||l.value.value===void 0)return new sa(this,{kind:"constant",value:void 0},o.parameters);const g=Li[this.specification.type];if(g){const _=g(o.value.value,l.value.value,p);return new sa(this,{kind:"constant",value:_},o.parameters)}return o}evaluate(o,l,p,g,_,x){return o.kind==="constant"?o.value:o.evaluate(l,p,g,_,x)}}class sh extends At{possiblyEvaluate(o,l,p,g){if(o.value===void 0)return new sa(this,{kind:"constant",value:void 0},l);if(o.expression.kind==="constant"){const _=o.expression.evaluate(l,null,{},p,g),x=o.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,l);return new sa(this,{kind:"constant",value:S},l)}if(o.expression.kind==="camera"){const _=this._calculate(o.expression.evaluate({zoom:l.zoom-1}),o.expression.evaluate({zoom:l.zoom}),o.expression.evaluate({zoom:l.zoom+1}),l);return new sa(this,{kind:"constant",value:_},l)}return new sa(this,o.expression,l)}evaluate(o,l,p,g,_,x){if(o.kind==="source"){const S=o.evaluate(l,p,g,_,x);return this._calculate(S,S,S,l)}return o.kind==="composite"?this._calculate(o.evaluate({zoom:Math.floor(l.zoom)-1},p,g),o.evaluate({zoom:Math.floor(l.zoom)},p,g),o.evaluate({zoom:Math.floor(l.zoom)+1},p,g),l):o.value}_calculate(o,l,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:p,to:l}}interpolate(o){return o}}class lh{constructor(o){this.specification=o}possiblyEvaluate(o,l,p,g){if(o.value!==void 0){if(o.expression.kind==="constant"){const _=o.expression.evaluate(l,null,{},p,g);return this._calculate(_,_,_,l)}return this._calculate(o.expression.evaluate(new Kn(Math.floor(l.zoom-1),l)),o.expression.evaluate(new Kn(Math.floor(l.zoom),l)),o.expression.evaluate(new Kn(Math.floor(l.zoom+1),l)),l)}}_calculate(o,l,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:o,to:l}:{from:p,to:l}}interpolate(o){return o}}class Ap{constructor(o){this.specification=o}possiblyEvaluate(o,l,p,g){return!!o.expression.evaluate(l,null,{},p,g)}interpolate(){return!1}}class v{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in o){const p=o[l];p.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new zl(p,void 0),_=this.defaultTransitionablePropertyValues[l]=new oh(p);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}mt("DataDrivenProperty",At),mt("DataConstantProperty",vt),mt("CrossFadedDataDrivenProperty",sh),mt("CrossFadedProperty",lh),mt("ColorRampProperty",Ap);const r="-transition";class h extends Rt{constructor(o,l){if(super(),this.id=o.id,this.type=o.type,this._featureFilter={filter:()=>!0,needGeometry:!1},o.type!=="custom"&&(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type!=="background"&&(this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter),l.layout&&(this._unevaluatedLayout=new Nu(l.layout)),l.paint)){this._transitionablePaint=new ah(l.paint);for(const p in o.paint)this.setPaintProperty(p,o.paint[p],{validate:!1});for(const p in o.layout)this.setLayoutProperty(p,o.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ju(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,l,p={}){l!=null&&this._validate(Cg,`layers.${this.id}.layout.${o}`,o,l,p)||(o!=="visibility"?this._unevaluatedLayout.setValue(o,l):this.visibility=l)}getPaintProperty(o){return o.endsWith(r)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,l,p={}){if(l!=null&&this._validate(Sg,`layers.${this.id}.paint.${o}`,o,l,p))return!1;if(o.endsWith(r))return this._transitionablePaint.setTransition(o.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[o],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(o,l),this._handleSpecialPaintPropertyUpdate(o);const E=this._transitionablePaint._values[o].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(o,S,E)}}_handleSpecialPaintPropertyUpdate(o){}_handleOverridablePaintPropertyUpdate(o,l,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,l){o.getCrossfadeParameters&&(this._crossfadeParameters=o.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,l)}serialize(){const o={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(o.layout=o.layout||{},o.layout.visibility=this.visibility),Z(o,(l,p)=>!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length))}_validate(o,l,p,g,_={}){return(!_||_.validate!==!1)&&Cp(this,o.call(Bs,{key:l,layerType:this.type,objectKey:p,value:g,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const o in this.paint._values){const l=this.paint.get(o);if(l instanceof sa&&bl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(o,l){this._structArray=o,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,l){return o._trim(),l&&(o.isTransferred=!0,l.push(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const l=Object.create(this.prototype);return l.arrayBuffer=o.arrayBuffer,l.length=o.length,l.capacity=o.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(s,o=1){let l=0,p=0;return{members:s.map(g=>{const _=f[g.type].BYTES_PER_ELEMENT,x=l=T(l,Math.max(o,_)),S=g.components||1;return p=Math.max(p,_),l+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:T(l,Math.max(p,o)),alignment:o}}function T(s,o){return Math.ceil(s/o)*o}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l){const p=this.length;return this.resize(p+1),this.emplace(p,o,l)}emplace(o,l,p){const g=2*o;return this.int16[g+0]=l,this.int16[g+1]=p,o}}M.prototype.bytesPerElement=4,mt("StructArrayLayout2i4",M);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,p)}emplace(o,l,p,g){const _=3*o;return this.int16[_+0]=l,this.int16[_+1]=p,this.int16[_+2]=g,o}}z.prototype.bytesPerElement=6,mt("StructArrayLayout3i6",z);class O extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,l,p,g)}emplace(o,l,p,g,_){const x=4*o;return this.int16[x+0]=l,this.int16[x+1]=p,this.int16[x+2]=g,this.int16[x+3]=_,o}}O.prototype.bytesPerElement=8,mt("StructArrayLayout4i8",O);class F extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,p,g,_,x)}emplace(o,l,p,g,_,x,S){const E=6*o;return this.int16[E+0]=l,this.int16[E+1]=p,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,o}}F.prototype.bytesPerElement=12,mt("StructArrayLayout2i4i12",F);class K extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,p,g,_,x)}emplace(o,l,p,g,_,x,S){const E=4*o,A=8*o;return this.int16[E+0]=l,this.int16[E+1]=p,this.uint8[A+4]=g,this.uint8[A+5]=_,this.uint8[A+6]=x,this.uint8[A+7]=S,o}}K.prototype.bytesPerElement=8,mt("StructArrayLayout2i4ub8",K);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l){const p=this.length;return this.resize(p+1),this.emplace(p,o,l)}emplace(o,l,p){const g=2*o;return this.float32[g+0]=l,this.float32[g+1]=p,o}}ee.prototype.bytesPerElement=8,mt("StructArrayLayout2f8",ee);class re extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x,S,E,A,L){const $=this.length;return this.resize($+1),this.emplace($,o,l,p,g,_,x,S,E,A,L)}emplace(o,l,p,g,_,x,S,E,A,L,$){const U=10*o;return this.uint16[U+0]=l,this.uint16[U+1]=p,this.uint16[U+2]=g,this.uint16[U+3]=_,this.uint16[U+4]=x,this.uint16[U+5]=S,this.uint16[U+6]=E,this.uint16[U+7]=A,this.uint16[U+8]=L,this.uint16[U+9]=$,o}}re.prototype.bytesPerElement=20,mt("StructArrayLayout10ui20",re);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x,S,E,A,L,$,U){const H=this.length;return this.resize(H+1),this.emplace(H,o,l,p,g,_,x,S,E,A,L,$,U)}emplace(o,l,p,g,_,x,S,E,A,L,$,U,H){const Y=12*o;return this.int16[Y+0]=l,this.int16[Y+1]=p,this.int16[Y+2]=g,this.int16[Y+3]=_,this.uint16[Y+4]=x,this.uint16[Y+5]=S,this.uint16[Y+6]=E,this.uint16[Y+7]=A,this.int16[Y+8]=L,this.int16[Y+9]=$,this.int16[Y+10]=U,this.int16[Y+11]=H,o}}ce.prototype.bytesPerElement=24,mt("StructArrayLayout4i4ui4i24",ce);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,p)}emplace(o,l,p,g){const _=3*o;return this.float32[_+0]=l,this.float32[_+1]=p,this.float32[_+2]=g,o}}me.prototype.bytesPerElement=12,mt("StructArrayLayout3f12",me);class ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint32[1*o+0]=l,o}}ge.prototype.bytesPerElement=4,mt("StructArrayLayout1ul4",ge);class ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x,S,E,A){const L=this.length;return this.resize(L+1),this.emplace(L,o,l,p,g,_,x,S,E,A)}emplace(o,l,p,g,_,x,S,E,A,L){const $=10*o,U=5*o;return this.int16[$+0]=l,this.int16[$+1]=p,this.int16[$+2]=g,this.int16[$+3]=_,this.int16[$+4]=x,this.int16[$+5]=S,this.uint32[U+3]=E,this.uint16[$+8]=A,this.uint16[$+9]=L,o}}ye.prototype.bytesPerElement=20,mt("StructArrayLayout6i1ul2ui20",ye);class se extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,p,g,_,x)}emplace(o,l,p,g,_,x,S){const E=6*o;return this.int16[E+0]=l,this.int16[E+1]=p,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=S,o}}se.prototype.bytesPerElement=12,mt("StructArrayLayout2i2i2i12",se);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,o,l,p,g,_)}emplace(o,l,p,g,_,x){const S=4*o,E=8*o;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=g,this.int16[E+6]=_,this.int16[E+7]=x,o}}xe.prototype.bytesPerElement=16,mt("StructArrayLayout2f1f2i16",xe);class ke extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,o,l,p,g,_,x)}emplace(o,l,p,g,_,x,S){const E=16*o,A=4*o,L=8*o;return this.uint8[E+0]=l,this.uint8[E+1]=p,this.float32[A+1]=g,this.float32[A+2]=_,this.int16[L+6]=x,this.int16[L+7]=S,o}}ke.prototype.bytesPerElement=16,mt("StructArrayLayout2ub2f2i16",ke);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,p)}emplace(o,l,p,g){const _=3*o;return this.uint16[_+0]=l,this.uint16[_+1]=p,this.uint16[_+2]=g,o}}Pe.prototype.bytesPerElement=6,mt("StructArrayLayout3ui6",Pe);class Ne extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe){const Te=this.length;return this.resize(Te+1),this.emplace(Te,o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe)}emplace(o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe,Te){const _e=24*o,Ee=12*o,ze=48*o;return this.int16[_e+0]=l,this.int16[_e+1]=p,this.uint16[_e+2]=g,this.uint16[_e+3]=_,this.uint32[Ee+2]=x,this.uint32[Ee+3]=S,this.uint32[Ee+4]=E,this.uint16[_e+10]=A,this.uint16[_e+11]=L,this.uint16[_e+12]=$,this.float32[Ee+7]=U,this.float32[Ee+8]=H,this.uint8[ze+36]=Y,this.uint8[ze+37]=J,this.uint8[ze+38]=ue,this.uint32[Ee+10]=fe,this.int16[_e+22]=Te,o}}Ne.prototype.bytesPerElement=48,mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ne);class Ze extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe,Te,_e,Ee,ze,We,ut,Pt,st,tt,wt,gt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe,Te,_e,Ee,ze,We,ut,Pt,st,tt,wt,gt)}emplace(o,l,p,g,_,x,S,E,A,L,$,U,H,Y,J,ue,fe,Te,_e,Ee,ze,We,ut,Pt,st,tt,wt,gt,dt){const Fe=32*o,kt=16*o;return this.int16[Fe+0]=l,this.int16[Fe+1]=p,this.int16[Fe+2]=g,this.int16[Fe+3]=_,this.int16[Fe+4]=x,this.int16[Fe+5]=S,this.int16[Fe+6]=E,this.int16[Fe+7]=A,this.uint16[Fe+8]=L,this.uint16[Fe+9]=$,this.uint16[Fe+10]=U,this.uint16[Fe+11]=H,this.uint16[Fe+12]=Y,this.uint16[Fe+13]=J,this.uint16[Fe+14]=ue,this.uint16[Fe+15]=fe,this.uint16[Fe+16]=Te,this.uint16[Fe+17]=_e,this.uint16[Fe+18]=Ee,this.uint16[Fe+19]=ze,this.uint16[Fe+20]=We,this.uint16[Fe+21]=ut,this.uint16[Fe+22]=Pt,this.uint32[kt+12]=st,this.float32[kt+13]=tt,this.float32[kt+14]=wt,this.uint16[Fe+30]=gt,this.uint16[Fe+31]=dt,o}}Ze.prototype.bytesPerElement=64,mt("StructArrayLayout8i15ui1ul2f2ui64",Ze);class nt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.float32[1*o+0]=l,o}}nt.prototype.bytesPerElement=4,mt("StructArrayLayout1f4",nt);class ct extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,p)}emplace(o,l,p,g){const _=3*o;return this.uint16[6*o+0]=l,this.float32[_+1]=p,this.float32[_+2]=g,o}}ct.prototype.bytesPerElement=12,mt("StructArrayLayout1ui2f12",ct);class Qe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,o,l,p)}emplace(o,l,p,g){const _=4*o;return this.uint32[2*o+0]=l,this.uint16[_+2]=p,this.uint16[_+3]=g,o}}Qe.prototype.bytesPerElement=8,mt("StructArrayLayout1ul2ui8",Qe);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,l){const p=this.length;return this.resize(p+1),this.emplace(p,o,l)}emplace(o,l,p){const g=2*o;return this.uint16[g+0]=l,this.uint16[g+1]=p,o}}Je.prototype.bytesPerElement=4,mt("StructArrayLayout2ui4",Je);class _t extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const l=this.length;return this.resize(l+1),this.emplace(l,o)}emplace(o,l){return this.uint16[1*o+0]=l,o}}_t.prototype.bytesPerElement=2,mt("StructArrayLayout1ui2",_t);class Nt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,l,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,o,l,p,g)}emplace(o,l,p,g,_){const x=4*o;return this.float32[x+0]=l,this.float32[x+1]=p,this.float32[x+2]=g,this.float32[x+3]=_,o}}Nt.prototype.bytesPerElement=16,mt("StructArrayLayout4f16",Nt);class et extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new k(this.anchorPointX,this.anchorPointY)}}et.prototype.size=20;class lt extends ye{get(o){return new et(this,o)}}mt("CollisionBoxArray",lt);class Ft extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(o){this._structArray.uint8[this._pos1+37]=o}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(o){this._structArray.uint8[this._pos1+38]=o}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(o){this._structArray.uint32[this._pos4+10]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ft.prototype.size=48;class Xn extends Ne{get(o){return new Ft(this,o)}}mt("PlacedSymbolArray",Xn);class Ht extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(o){this._structArray.uint32[this._pos4+12]=o}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Ht.prototype.size=64;class en extends Ze{get(o){return new Ht(this,o)}}mt("SymbolInstanceArray",en);class Yn extends nt{getoffsetX(o){return this.float32[1*o+0]}}mt("GlyphOffsetArray",Yn);class li extends z{getx(o){return this.int16[3*o+0]}gety(o){return this.int16[3*o+1]}gettileUnitDistanceFromAnchor(o){return this.int16[3*o+2]}}mt("SymbolLineVertexArray",li);class $o extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}$o.prototype.size=12;class Jn extends ct{get(o){return new $o(this,o)}}mt("TextAnchorOffsetArray",Jn);class Ri extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ri.prototype.size=8;class bi extends Qe{get(o){return new Ri(this,o)}}mt("FeatureIndexArray",bi);class ui extends M{}class wi extends M{}class la extends M{}class Rl extends F{}class uh extends K{}class Dl extends ee{}class _o extends re{}class ch extends ce{}class Lp extends me{}class xo extends ge{}class bo extends se{}class ts extends ke{}class Oo extends Pe{}class ei extends Je{}const ci=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:eo}=ci;class on{constructor(o=[]){this.segments=o}prepareSegment(o,l,p,g){let _=this.segments[this.segments.length-1];return o>on.MAX_VERTEX_ARRAY_LENGTH&&$e(`Max vertices per segment is ${on.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!_||_.vertexLength+o>on.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const o of this.segments)for(const l in o.vaos)o.vaos[l].destroy()}static simpleSegment(o,l,p,g){return new on([{vertexOffset:o,primitiveOffset:l,vertexLength:p,primitiveLength:g,vaos:{},sortKey:0}])}}function Ns(s,o){return 256*(s=te(Math.floor(s),0,255))+te(Math.floor(o),0,255)}on.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mt("SegmentVector",on);const $l=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ol={exports:{}},Pg={exports:{}};Pg.exports=function(s,o){var l,p,g,_,x,S,E,A;for(p=s.length-(l=3&s.length),g=o,x=3432918353,S=461845907,A=0;A<p;)E=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,g=27492+(65535&(_=5*(65535&(g=(g^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(E=0,l){case 3:E^=(255&s.charCodeAt(A+2))<<16;case 2:E^=(255&s.charCodeAt(A+1))<<8;case 1:g^=E=(65535&(E=(E=(65535&(E^=255&s.charCodeAt(A)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*S+(((E>>>16)*S&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var H1=Pg.exports,Mg={exports:{}};Mg.exports=function(s,o){for(var l,p=s.length,g=o^p,_=0;p>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(_)|(255&s.charCodeAt(++_))<<8|(255&s.charCodeAt(++_))<<16|(255&s.charCodeAt(++_))<<24))+((1540483477*(l>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++_;switch(p){case 3:g^=(255&s.charCodeAt(_+2))<<16;case 2:g^=(255&s.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var ns=H1,Ag=Mg.exports;Ol.exports=ns,Ol.exports.murmur3=ns,Ol.exports.murmur2=Ag;var hh=b(Ol.exports);class Uu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(o,l,p,g){this.ids.push(dh(o)),this.positions.push(l,p,g)}getPositions(o){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=dh(o);let p=0,g=this.ids.length-1;for(;p<g;){const x=p+g>>1;this.ids[x]>=l?g=x:p=x+1}const _=[];for(;this.ids[p]===l;)_.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return _}static serialize(o,l){const p=new Float64Array(o.ids),g=new Uint32Array(o.positions);return ph(p,g,0,p.length-1),l&&l.push(p.buffer,g.buffer),{ids:p,positions:g}}static deserialize(o){const l=new Uu;return l.ids=o.ids,l.positions=o.positions,l.indexed=!0,l}}function dh(s){const o=+s;return!isNaN(o)&&o<=Number.MAX_SAFE_INTEGER?o:hh(String(s))}function ph(s,o,l,p){for(;l<p;){const g=s[l+p>>1];let _=l-1,x=p+1;for(;;){do _++;while(s[_]<g);do x--;while(s[x]>g);if(_>=x)break;Fl(s,_,x),Fl(o,3*_,3*x),Fl(o,3*_+1,3*x+1),Fl(o,3*_+2,3*x+2)}x-l<p-x?(ph(s,o,l,x),l=x+1):(ph(s,o,x+1,p),p=x)}}function Fl(s,o,l){const p=s[o];s[o]=s[l],s[l]=p}mt("FeaturePositionMap",Uu);class Vu{constructor(o,l){this.gl=o.gl,this.location=l}}class Lg extends Vu{constructor(o,l){super(o,l),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1f(this.location,o))}}class gS extends Vu{constructor(o,l){super(o,l),this.current=[0,0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]&&o[3]===this.current[3]||(this.current=o,this.gl.uniform4f(this.location,o[0],o[1],o[2],o[3]))}}class yS extends Vu{constructor(o,l){super(o,l),this.current=In.transparent}set(o){o.r===this.current.r&&o.g===this.current.g&&o.b===this.current.b&&o.a===this.current.a||(this.current=o,this.gl.uniform4f(this.location,o.r,o.g,o.b,o.a))}}const M4=new Float32Array(16);function G1(s){return[Ns(255*s.r,255*s.g),Ns(255*s.b,255*s.a)]}class zp{constructor(o,l,p){this.value=o,this.uniformNames=l.map(g=>`u_${g}`),this.type=p}setUniform(o,l,p){o.set(p.constantOr(this.value))}getBinding(o,l,p){return this.type==="color"?new yS(o,l):new Lg(o,l)}}class fh{constructor(o,l){this.uniformNames=l.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(o,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=o.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=o.tlbr}setUniform(o,l,p,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&o.set(_)}getBinding(o,l,p){return p.substr(0,9)==="u_pattern"?new gS(o,l):new Lg(o,l)}}class js{constructor(o,l,p,g){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(o,l,p,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new Kn(0),l,{},g,[],_);this.paintVertexArray.resize(o),this._setPaintValue(x,o,S)}updatePaintArray(o,l,p,g){const _=this.expression.evaluate({zoom:0},p,g);this._setPaintValue(o,l,_)}_setPaintValue(o,l,p){if(this.type==="color"){const g=G1(p);for(let _=o;_<l;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=o;g<l;g++)this.paintVertexArray.emplace(g,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ra{constructor(o,l,p,g,_,x){this.expression=o,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=p,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(o,l,p,g,_){const x=this.expression.evaluate(new Kn(this.zoom),l,{},g,[],_),S=this.expression.evaluate(new Kn(this.zoom+1),l,{},g,[],_),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,x,S)}updatePaintArray(o,l,p,g){const _=this.expression.evaluate({zoom:this.zoom},p,g),x=this.expression.evaluate({zoom:this.zoom+1},p,g);this._setPaintValue(o,l,_,x)}_setPaintValue(o,l,p,g){if(this.type==="color"){const _=G1(p),x=G1(g);for(let S=o;S<l;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=o;_<l;_++)this.paintVertexArray.emplace(_,p,g);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(g))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=te(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);o.set(g)}getBinding(o,l,p){return new Lg(o,l)}}class Bl{constructor(o,l,p,g,_,x){this.expression=o,this.type=l,this.useIntegerZoom=p,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(o,l,p){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(o),this.zoomOutPaintVertexArray.resize(o),this._setPaintValues(g,o,l.patterns&&l.patterns[this.layerId],p)}updatePaintArray(o,l,p,g,_){this._setPaintValues(o,l,p.patterns&&p.patterns[this.layerId],_)}_setPaintValues(o,l,p,g){if(!g||!p)return;const{min:_,mid:x,max:S}=p,E=g[_],A=g[x],L=g[S];if(E&&A&&L)for(let $=o;$<l;$++)this.zoomInPaintVertexArray.emplace($,A.tl[0],A.tl[1],A.br[0],A.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],A.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace($,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(o){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=o.createVertexBuffer(this.zoomInPaintVertexArray,$l.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=o.createVertexBuffer(this.zoomOutPaintVertexArray,$l.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class vS{constructor(o,l,p){this.binders={},this._buffers=[];const g=[];for(const _ in o.paint._values){if(!p(_))continue;const x=o.paint.get(_);if(!(x instanceof sa&&bl(x.property.specification)))continue;const S=A4(_,o.type),E=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,$=x.property.specification["property-type"],U=$==="cross-faded"||$==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=U?new fh(E.value,S):new zp(E.value,S,A),g.push(`/u_${_}`);else if(E.kind==="source"||U){const H=_S(_,A,"source");this.binders[_]=U?new Bl(E,A,L,l,H,o.id):new js(E,S,A,H),g.push(`/a_${_}`)}else{const H=_S(_,A,"composite");this.binders[_]=new Ra(E,S,A,L,l,H),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(o){const l=this.binders[o];return l instanceof js||l instanceof Ra?l.maxValue:0}populatePaintArrays(o,l,p,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof js||S instanceof Ra||S instanceof Bl)&&S.populatePaintArray(o,l,p,g,_)}}setConstantPatternPositions(o,l){for(const p in this.binders){const g=this.binders[p];g instanceof fh&&g.setConstantPatternPositions(o,l)}}updatePaintArrays(o,l,p,g,_){let x=!1;for(const S in o){const E=l.getPositions(S);for(const A of E){const L=p.feature(A.index);for(const $ in this.binders){const U=this.binders[$];if((U instanceof js||U instanceof Ra||U instanceof Bl)&&U.expression.isStateDependent===!0){const H=g.paint.get($);U.expression=H.value,U.updatePaintArray(A.start,A.end,L,o[S],_),x=!0}}}}return x}defines(){const o=[];for(const l in this.binders){const p=this.binders[l];(p instanceof zp||p instanceof fh)&&o.push(...p.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return o}getBinderAttributes(){const o=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof js||p instanceof Ra)for(let g=0;g<p.paintVertexAttributes.length;g++)o.push(p.paintVertexAttributes[g].name);else if(p instanceof Bl)for(let g=0;g<$l.members.length;g++)o.push($l.members[g].name)}return o}getBinderUniforms(){const o=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof zp||p instanceof fh||p instanceof Ra)for(const g of p.uniformNames)o.push(g)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o,l){const p=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof zp||_ instanceof fh||_ instanceof Ra){for(const x of _.uniformNames)if(l[x]){const S=_.getBinding(o,l[x],x);p.push({name:x,property:g,binding:S})}}}return p}setUniforms(o,l,p,g){for(const{name:_,property:x,binding:S}of l)this.binders[x].setUniform(S,g,p.get(x),_)}updatePaintBuffers(o){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(o&&p instanceof Bl){const g=o.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(p instanceof js||p instanceof Ra)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(o){for(const l in this.binders){const p=this.binders[l];(p instanceof js||p instanceof Ra||p instanceof Bl)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const l=this.binders[o];(l instanceof js||l instanceof Ra||l instanceof Bl)&&l.destroy()}}}class Wu{constructor(o,l,p=()=>!0){this.programConfigurations={};for(const g of o)this.programConfigurations[g.id]=new vS(g,l,p);this.needsUpload=!1,this._featureMap=new Uu,this._bufferOffset=0}populatePaintArrays(o,l,p,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(o,l,g,_,x);l.id!==void 0&&this._featureMap.add(l.id,p,this._bufferOffset,o),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,l,p,g){for(const _ of p)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(o,this._featureMap,l,_,g)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}function A4(s,o){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${o}-`,"").replace(/-/g,"_")]}function _S(s,o,l){const p={color:{source:ee,composite:Nt},number:{source:nt,composite:ee}},g=function(_){return{"line-pattern":{source:_o,composite:_o},"fill-pattern":{source:_o,composite:_o},"fill-extrusion-pattern":{source:_o,composite:_o}}[_]}(s);return g&&g[l]||p[o][l]}mt("ConstantBinder",zp),mt("CrossFadedConstantBinder",fh),mt("SourceExpressionBinder",js),mt("CrossFadedCompositeBinder",Bl),mt("CompositeExpressionBinder",Ra),mt("ProgramConfiguration",vS,{omit:["_buffers"]}),mt("ProgramConfigurationSet",Wu);const $r=8192,Z1=Math.pow(2,14)-1,xS=-Z1-1;function qu(s){const o=$r/s.extent,l=s.loadGeometry();for(let p=0;p<l.length;p++){const g=l[p];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*o),E=Math.round(x.y*o);x.x=te(S,xS,Z1),x.y=te(E,xS,Z1),(S<x.x||S>x.x+1||E<x.y||E>x.y+1)&&$e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Hu(s,o){return{type:s.type,id:s.id,properties:s.properties,geometry:o?qu(s):[]}}function zg(s,o,l,p,g){s.emplaceBack(2*o+(p+1)/2,2*l+(g+1)/2)}class K1{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new wi,this.indexArray=new Oo,this.segments=new on,this.programConfigurations=new Wu(o.layers,o.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,p){const g=this.layers[0],_=[];let x=null,S=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:E,id:A,index:L,sourceLayerIndex:$}of o){const U=this.layers[0]._featureFilter.needGeometry,H=Hu(E,U);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),H,p))continue;const Y=S?x.evaluate(H,{},p):void 0,J={id:A,properties:E.properties,type:E.type,sourceLayerIndex:$,index:L,geometry:U?H.geometry:qu(E),patterns:{},sortKey:Y};_.push(J)}S&&_.sort((E,A)=>E.sortKey-A.sortKey);for(const E of _){const{geometry:A,index:L,sourceLayerIndex:$}=E,U=o[L].feature;this.addFeature(E,A,L,p),l.featureIndex.insert(U,A,L,$,this.index)}}update(o,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,eo),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,l,p,g){for(const _ of l)for(const x of _){const S=x.x,E=x.y;if(S<0||S>=$r||E<0||E>=$r)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),L=A.vertexLength;zg(this.layoutVertexArray,S,E,-1,-1),zg(this.layoutVertexArray,S,E,1,-1),zg(this.layoutVertexArray,S,E,1,1),zg(this.layoutVertexArray,S,E,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},g)}}function bS(s,o){for(let l=0;l<s.length;l++)if(mh(o,s[l]))return!0;for(let l=0;l<o.length;l++)if(mh(s,o[l]))return!0;return!!X1(s,o)}function L4(s,o,l){return!!mh(s,o)||!!Y1(o,s,l)}function wS(s,o){if(s.length===1)return CS(o,s[0]);for(let l=0;l<o.length;l++){const p=o[l];for(let g=0;g<p.length;g++)if(mh(s,p[g]))return!0}for(let l=0;l<s.length;l++)if(CS(o,s[l]))return!0;for(let l=0;l<o.length;l++)if(X1(s,o[l]))return!0;return!1}function z4(s,o,l){if(s.length>1){if(X1(s,o))return!0;for(let p=0;p<o.length;p++)if(Y1(o[p],s,l))return!0}for(let p=0;p<s.length;p++)if(Y1(s[p],o,l))return!0;return!1}function X1(s,o){if(s.length===0||o.length===0)return!1;for(let l=0;l<s.length-1;l++){const p=s[l],g=s[l+1];for(let _=0;_<o.length-1;_++)if(R4(p,g,o[_],o[_+1]))return!0}return!1}function R4(s,o,l,p){return Le(s,l,p)!==Le(o,l,p)&&Le(s,o,l)!==Le(s,o,p)}function Y1(s,o,l){const p=l*l;if(o.length===1)return s.distSqr(o[0])<p;for(let g=1;g<o.length;g++)if(SS(s,o[g-1],o[g])<p)return!0;return!1}function SS(s,o,l){const p=o.distSqr(l);if(p===0)return s.distSqr(o);const g=((s.x-o.x)*(l.x-o.x)+(s.y-o.y)*(l.y-o.y))/p;return s.distSqr(g<0?o:g>1?l:l.sub(o)._mult(g)._add(o))}function CS(s,o){let l,p,g,_=!1;for(let x=0;x<s.length;x++){l=s[x];for(let S=0,E=l.length-1;S<l.length;E=S++)p=l[S],g=l[E],p.y>o.y!=g.y>o.y&&o.x<(g.x-p.x)*(o.y-p.y)/(g.y-p.y)+p.x&&(_=!_)}return _}function mh(s,o){let l=!1;for(let p=0,g=s.length-1;p<s.length;g=p++){const _=s[p],x=s[g];_.y>o.y!=x.y>o.y&&o.x<(x.x-_.x)*(o.y-_.y)/(x.y-_.y)+_.x&&(l=!l)}return l}function D4(s,o,l){const p=l[0],g=l[2];if(s.x<p.x&&o.x<p.x||s.x>g.x&&o.x>g.x||s.y<p.y&&o.y<p.y||s.y>g.y&&o.y>g.y)return!1;const _=Le(s,o,l[0]);return _!==Le(s,o,l[1])||_!==Le(s,o,l[2])||_!==Le(s,o,l[3])}function Rp(s,o,l){const p=o.paint.get(s).value;return p.kind==="constant"?p.value:l.programConfigurations.get(o.id).getMaxValue(s)}function Rg(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Dg(s,o,l,p,g){if(!o[0]&&!o[1])return s;const _=k.convert(o)._mult(g);l==="viewport"&&_._rotate(-p);const x=[];for(let S=0;S<s.length;S++)x.push(s[S].sub(_));return x}let kS,ES;mt("CircleBucket",K1,{omit:["layers"]});var $4={get paint(){return ES=ES||new v({"circle-radius":new At(Se.paint_circle["circle-radius"]),"circle-color":new At(Se.paint_circle["circle-color"]),"circle-blur":new At(Se.paint_circle["circle-blur"]),"circle-opacity":new At(Se.paint_circle["circle-opacity"]),"circle-translate":new vt(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new At(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new At(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new At(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return kS=kS||new v({"circle-sort-key":new At(Se.layout_circle["circle-sort-key"])})}},Di=1e-6,gh=typeof Float32Array<"u"?Float32Array:Array;function J1(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function TS(s,o,l){var p=o[0],g=o[1],_=o[2],x=o[3],S=o[4],E=o[5],A=o[6],L=o[7],$=o[8],U=o[9],H=o[10],Y=o[11],J=o[12],ue=o[13],fe=o[14],Te=o[15],_e=l[0],Ee=l[1],ze=l[2],We=l[3];return s[0]=_e*p+Ee*S+ze*$+We*J,s[1]=_e*g+Ee*E+ze*U+We*ue,s[2]=_e*_+Ee*A+ze*H+We*fe,s[3]=_e*x+Ee*L+ze*Y+We*Te,s[4]=(_e=l[4])*p+(Ee=l[5])*S+(ze=l[6])*$+(We=l[7])*J,s[5]=_e*g+Ee*E+ze*U+We*ue,s[6]=_e*_+Ee*A+ze*H+We*fe,s[7]=_e*x+Ee*L+ze*Y+We*Te,s[8]=(_e=l[8])*p+(Ee=l[9])*S+(ze=l[10])*$+(We=l[11])*J,s[9]=_e*g+Ee*E+ze*U+We*ue,s[10]=_e*_+Ee*A+ze*H+We*fe,s[11]=_e*x+Ee*L+ze*Y+We*Te,s[12]=(_e=l[12])*p+(Ee=l[13])*S+(ze=l[14])*$+(We=l[15])*J,s[13]=_e*g+Ee*E+ze*U+We*ue,s[14]=_e*_+Ee*A+ze*H+We*fe,s[15]=_e*x+Ee*L+ze*Y+We*Te,s}Math.hypot||(Math.hypot=function(){for(var s=0,o=arguments.length;o--;)s+=arguments[o]*arguments[o];return Math.sqrt(s)});var Dp,O4=TS;function $g(s,o,l){var p=o[0],g=o[1],_=o[2],x=o[3];return s[0]=l[0]*p+l[4]*g+l[8]*_+l[12]*x,s[1]=l[1]*p+l[5]*g+l[9]*_+l[13]*x,s[2]=l[2]*p+l[6]*g+l[10]*_+l[14]*x,s[3]=l[3]*p+l[7]*g+l[11]*_+l[15]*x,s}Dp=new gh(4),gh!=Float32Array&&(Dp[0]=0,Dp[1]=0,Dp[2]=0,Dp[3]=0);class F4 extends h{constructor(o){super(o,$4)}createBucket(o){return new K1(o)}queryRadius(o){const l=o;return Rp("circle-radius",this,l)+Rp("circle-stroke-width",this,l)+Rg(this.paint.get("circle-translate"))}queryIntersectsFeature(o,l,p,g,_,x,S,E){const A=Dg(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),L=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),$=this.paint.get("circle-pitch-alignment")==="map",U=$?A:function(Y,J){return Y.map(ue=>IS(ue,J))}(A,E),H=$?L*S:L;for(const Y of g)for(const J of Y){const ue=$?J:IS(J,E);let fe=H;const Te=$g([],[J.x,J.y,0,1],E);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?fe*=Te[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(fe*=x.cameraToCenterDistance/Te[3]),L4(U,ue,fe))return!0}return!1}}function IS(s,o){const l=$g([],[s.x,s.y,0,1],o);return new k(l[0]/l[3],l[1]/l[3])}class PS extends K1{}let MS;mt("HeatmapBucket",PS,{omit:["layers"]});var B4={get paint(){return MS=MS||new v({"heatmap-radius":new At(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new At(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ap(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(Se.paint_heatmap["heatmap-opacity"])})}};function Q1(s,{width:o,height:l},p,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==o*l*p)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${o*l*p}`)}else g=new Uint8Array(o*l*p);return s.width=o,s.height=l,s.data=g,s}function AS(s,{width:o,height:l},p){if(o===s.width&&l===s.height)return;const g=Q1({},{width:o,height:l},p);e_(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,o),height:Math.min(s.height,l)},p),s.width=o,s.height=l,s.data=g.data}function e_(s,o,l,p,g,_){if(g.width===0||g.height===0)return o;if(g.width>s.width||g.height>s.height||l.x>s.width-g.width||l.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>o.width||g.height>o.height||p.x>o.width-g.width||p.y>o.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,S=o.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const A=((l.y+E)*s.width+l.x)*_,L=((p.y+E)*o.width+p.x)*_;for(let $=0;$<g.width*_;$++)S[L+$]=x[A+$]}return o}class $p{constructor(o,l){Q1(this,o,1,l)}resize(o){AS(this,o,1)}clone(){return new $p({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,p,g,_){e_(o,l,p,g,_,1)}}class Fo{constructor(o,l){Q1(this,o,4,l)}resize(o){AS(this,o,4)}replace(o,l){l?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Fo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,l,p,g,_){e_(o,l,p,g,_,4)}}function LS(s){const o={},l=s.resolution||256,p=s.clips?s.clips.length:1,g=s.image||new Fo({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(x,S,E)=>{o[s.evaluationKey]=E;const A=s.expression.evaluate(o);g.data[x+S+0]=Math.floor(255*A.r/A.a),g.data[x+S+1]=Math.floor(255*A.g/A.a),g.data[x+S+2]=Math.floor(255*A.b/A.a),g.data[x+S+3]=Math.floor(255*A.a)};if(s.clips)for(let x=0,S=0;x<p;++x,S+=4*l)for(let E=0,A=0;E<l;E++,A+=4){const L=E/(l-1),{start:$,end:U}=s.clips[x];_(S,A,$*(1-L)+U*L)}else for(let x=0,S=0;x<l;x++,S+=4)_(0,S,x/(l-1));return g}mt("AlphaImage",$p),mt("RGBAImage",Fo);const t_="big-fb";class N4 extends h{createBucket(o){return new PS(o)}constructor(o){super(o,B4),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=LS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(t_)&&this.heatmapFbos.delete(t_)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let zS;var j4={get paint(){return zS=zS||new v({"hillshade-illumination-direction":new vt(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vt(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(Se.paint_hillshade["hillshade-accent-color"])})}};class U4 extends h{constructor(o){super(o,j4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const V4=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:W4}=V4;function RS(s,o,l=2){const p=o&&o.length,g=p?o[0]*l:s.length;let _=DS(s,0,g,l,!0);const x=[];if(!_||_.next===_.prev)return x;let S,E,A;if(p&&(_=function(L,$,U,H){const Y=[];for(let J=0,ue=$.length;J<ue;J++){const fe=DS(L,$[J]*H,J<ue-1?$[J+1]*H:L.length,H,!1);fe===fe.next&&(fe.steiner=!0),Y.push(J4(fe))}Y.sort(K4);for(let J=0;J<Y.length;J++)U=X4(Y[J],U);return U}(s,o,_,l)),s.length>80*l){S=1/0,E=1/0;let L=-1/0,$=-1/0;for(let U=l;U<g;U+=l){const H=s[U],Y=s[U+1];H<S&&(S=H),Y<E&&(E=Y),H>L&&(L=H),Y>$&&($=Y)}A=Math.max(L-S,$-E),A=A!==0?32767/A:0}return Op(_,x,l,S,E,A,0),x}function DS(s,o,l,p,g){let _;if(g===function(x,S,E,A){let L=0;for(let $=S,U=E-A;$<E;$+=A)L+=(x[U]-x[$])*(x[$+1]+x[U+1]),U=$;return L}(s,o,l,p)>0)for(let x=o;x<l;x+=p)_=FS(x/p|0,s[x],s[x+1],_);else for(let x=l-p;x>=o;x-=p)_=FS(x/p|0,s[x],s[x+1],_);return _&&Og(_,_.next)&&(Bp(_),_=_.next),_}function Gu(s,o){if(!s)return s;o||(o=s);let l,p=s;do if(l=!1,p.steiner||!Og(p,p.next)&&Ir(p.prev,p,p.next)!==0)p=p.next;else{if(Bp(p),p=o=p.prev,p===p.next)break;l=!0}while(l||p!==o);return o}function Op(s,o,l,p,g,_,x){if(!s)return;!x&&_&&function(E,A,L,$){let U=E;do U.z===0&&(U.z=n_(U.x,U.y,A,L,$)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next;while(U!==E);U.prevZ.nextZ=null,U.prevZ=null,function(H){let Y,J=1;do{let ue,fe=H;H=null;let Te=null;for(Y=0;fe;){Y++;let _e=fe,Ee=0;for(let We=0;We<J&&(Ee++,_e=_e.nextZ,_e);We++);let ze=J;for(;Ee>0||ze>0&&_e;)Ee!==0&&(ze===0||!_e||fe.z<=_e.z)?(ue=fe,fe=fe.nextZ,Ee--):(ue=_e,_e=_e.nextZ,ze--),Te?Te.nextZ=ue:H=ue,ue.prevZ=Te,Te=ue;fe=_e}Te.nextZ=null,J*=2}while(Y>1)}(U)}(s,p,g,_);let S=s;for(;s.prev!==s.next;){const E=s.prev,A=s.next;if(_?H4(s,p,g,_):q4(s))o.push(E.i,s.i,A.i),Bp(s),s=A.next,S=A.next;else if((s=A)===S){x?x===1?Op(s=G4(Gu(s),o),o,l,p,g,_,2):x===2&&Z4(s,o,l,p,g,_):Op(Gu(s),o,l,p,g,_,1);break}}}function q4(s){const o=s.prev,l=s,p=s.next;if(Ir(o,l,p)>=0)return!1;const g=o.x,_=l.x,x=p.x,S=o.y,E=l.y,A=p.y,L=g<_?g<x?g:x:_<x?_:x,$=S<E?S<A?S:A:E<A?E:A,U=g>_?g>x?g:x:_>x?_:x,H=S>E?S>A?S:A:E>A?E:A;let Y=p.next;for(;Y!==o;){if(Y.x>=L&&Y.x<=U&&Y.y>=$&&Y.y<=H&&yh(g,S,_,E,x,A,Y.x,Y.y)&&Ir(Y.prev,Y,Y.next)>=0)return!1;Y=Y.next}return!0}function H4(s,o,l,p){const g=s.prev,_=s,x=s.next;if(Ir(g,_,x)>=0)return!1;const S=g.x,E=_.x,A=x.x,L=g.y,$=_.y,U=x.y,H=S<E?S<A?S:A:E<A?E:A,Y=L<$?L<U?L:U:$<U?$:U,J=S>E?S>A?S:A:E>A?E:A,ue=L>$?L>U?L:U:$>U?$:U,fe=n_(H,Y,o,l,p),Te=n_(J,ue,o,l,p);let _e=s.prevZ,Ee=s.nextZ;for(;_e&&_e.z>=fe&&Ee&&Ee.z<=Te;){if(_e.x>=H&&_e.x<=J&&_e.y>=Y&&_e.y<=ue&&_e!==g&&_e!==x&&yh(S,L,E,$,A,U,_e.x,_e.y)&&Ir(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,Ee.x>=H&&Ee.x<=J&&Ee.y>=Y&&Ee.y<=ue&&Ee!==g&&Ee!==x&&yh(S,L,E,$,A,U,Ee.x,Ee.y)&&Ir(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;_e&&_e.z>=fe;){if(_e.x>=H&&_e.x<=J&&_e.y>=Y&&_e.y<=ue&&_e!==g&&_e!==x&&yh(S,L,E,$,A,U,_e.x,_e.y)&&Ir(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;Ee&&Ee.z<=Te;){if(Ee.x>=H&&Ee.x<=J&&Ee.y>=Y&&Ee.y<=ue&&Ee!==g&&Ee!==x&&yh(S,L,E,$,A,U,Ee.x,Ee.y)&&Ir(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function G4(s,o){let l=s;do{const p=l.prev,g=l.next.next;!Og(p,g)&&$S(p,l,l.next,g)&&Fp(p,g)&&Fp(g,p)&&(o.push(p.i,l.i,g.i),Bp(l),Bp(l.next),l=s=g),l=l.next}while(l!==s);return Gu(l)}function Z4(s,o,l,p,g,_){let x=s;do{let S=x.next.next;for(;S!==x.prev;){if(x.i!==S.i&&Q4(x,S)){let E=OS(x,S);return x=Gu(x,x.next),E=Gu(E,E.next),Op(x,o,l,p,g,_,0),void Op(E,o,l,p,g,_,0)}S=S.next}x=x.next}while(x!==s)}function K4(s,o){return s.x-o.x}function X4(s,o){const l=function(g,_){let x=_;const S=g.x,E=g.y;let A,L=-1/0;do{if(E<=x.y&&E>=x.next.y&&x.next.y!==x.y){const J=x.x+(E-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(J<=S&&J>L&&(L=J,A=x.x<x.next.x?x:x.next,J===S))return A}x=x.next}while(x!==_);if(!A)return null;const $=A,U=A.x,H=A.y;let Y=1/0;x=A;do{if(S>=x.x&&x.x>=U&&S!==x.x&&yh(E<H?S:L,E,U,H,E<H?L:S,E,x.x,x.y)){const J=Math.abs(E-x.y)/(S-x.x);Fp(x,g)&&(J<Y||J===Y&&(x.x>A.x||x.x===A.x&&Y4(A,x)))&&(A=x,Y=J)}x=x.next}while(x!==$);return A}(s,o);if(!l)return o;const p=OS(l,s);return Gu(p,p.next),Gu(l,l.next)}function Y4(s,o){return Ir(s.prev,s,o.prev)<0&&Ir(o.next,s,s.next)<0}function n_(s,o,l,p,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*g|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function J4(s){let o=s,l=s;do(o.x<l.x||o.x===l.x&&o.y<l.y)&&(l=o),o=o.next;while(o!==s);return l}function yh(s,o,l,p,g,_,x,S){return(g-x)*(o-S)>=(s-x)*(_-S)&&(s-x)*(p-S)>=(l-x)*(o-S)&&(l-x)*(_-S)>=(g-x)*(p-S)}function Q4(s,o){return s.next.i!==o.i&&s.prev.i!==o.i&&!function(l,p){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==p.i&&g.next.i!==p.i&&$S(g,g.next,l,p))return!0;g=g.next}while(g!==l);return!1}(s,o)&&(Fp(s,o)&&Fp(o,s)&&function(l,p){let g=l,_=!1;const x=(l.x+p.x)/2,S=(l.y+p.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==l);return _}(s,o)&&(Ir(s.prev,s,o.prev)||Ir(s,o.prev,o))||Og(s,o)&&Ir(s.prev,s,s.next)>0&&Ir(o.prev,o,o.next)>0)}function Ir(s,o,l){return(o.y-s.y)*(l.x-o.x)-(o.x-s.x)*(l.y-o.y)}function Og(s,o){return s.x===o.x&&s.y===o.y}function $S(s,o,l,p){const g=Bg(Ir(s,o,l)),_=Bg(Ir(s,o,p)),x=Bg(Ir(l,p,s)),S=Bg(Ir(l,p,o));return g!==_&&x!==S||!(g!==0||!Fg(s,l,o))||!(_!==0||!Fg(s,p,o))||!(x!==0||!Fg(l,s,p))||!(S!==0||!Fg(l,o,p))}function Fg(s,o,l){return o.x<=Math.max(s.x,l.x)&&o.x>=Math.min(s.x,l.x)&&o.y<=Math.max(s.y,l.y)&&o.y>=Math.min(s.y,l.y)}function Bg(s){return s>0?1:s<0?-1:0}function Fp(s,o){return Ir(s.prev,s,s.next)<0?Ir(s,o,s.next)>=0&&Ir(s,s.prev,o)>=0:Ir(s,o,s.prev)<0||Ir(s,s.next,o)<0}function OS(s,o){const l=r_(s.i,s.x,s.y),p=r_(o.i,o.x,o.y),g=s.next,_=o.prev;return s.next=o,o.prev=s,l.next=g,g.prev=l,p.next=l,l.prev=p,_.next=p,p.prev=_,p}function FS(s,o,l,p){const g=r_(s,o,l);return p?(g.next=p.next,g.prev=p,p.next.prev=g,p.next=g):(g.prev=g,g.next=g),g}function Bp(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function r_(s,o,l){return{i:s,x:o,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function i_(s,o,l){const p=l.patternDependencies;let g=!1;for(const _ of o){const x=_.paint.get(`${s}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,p[S.to]=!0,p[S.from]=!0)}return g}function o_(s,o,l,p,g){const _=g.patternDependencies;for(const x of o){const S=x.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let E=S.evaluate({zoom:p-1},l,{},g.availableImages),A=S.evaluate({zoom:p},l,{},g.availableImages),L=S.evaluate({zoom:p+1},l,{},g.availableImages);E=E&&E.name?E.name:E,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,_[E]=!0,_[A]=!0,_[L]=!0,l.patterns[x.id]={min:E,mid:A,max:L}}}return l}class a_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new la,this.indexArray=new Oo,this.indexArray2=new ei,this.programConfigurations=new Wu(o.layers,o.zoom),this.segments=new on,this.segments2=new on,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,p){this.hasPattern=i_("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:E,index:A,sourceLayerIndex:L}of o){const $=this.layers[0]._featureFilter.needGeometry,U=Hu(S,$);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),U,p))continue;const H=_?g.evaluate(U,{},p,l.availableImages):void 0,Y={id:E,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:$?U.geometry:qu(S),patterns:{},sortKey:H};x.push(Y)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const $=o_("fill",this.layers,S,this.zoom,l);this.patternFeatures.push($)}else this.addFeature(S,E,A,p,{});l.featureIndex.insert(o[A].feature,E,A,L,this.index)}}update(o,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,p)}addFeatures(o,l,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,W4),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,l,p,g,_){for(const x of jc(l,500)){let S=0;for(const H of x)S+=H.length;const E=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=E.vertexLength,L=[],$=[];for(const H of x){if(H.length===0)continue;H!==x[0]&&$.push(L.length/2);const Y=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),J=Y.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(J+H.length-1,J),L.push(H[0].x),L.push(H[0].y);for(let ue=1;ue<H.length;ue++)this.layoutVertexArray.emplaceBack(H[ue].x,H[ue].y),this.indexArray2.emplaceBack(J+ue-1,J+ue),L.push(H[ue].x),L.push(H[ue].y);Y.vertexLength+=H.length,Y.primitiveLength+=H.length}const U=RS(L,$);for(let H=0;H<U.length;H+=3)this.indexArray.emplaceBack(A+U[H],A+U[H+1],A+U[H+2]);E.vertexLength+=S,E.primitiveLength+=U.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}}let BS,NS;mt("FillBucket",a_,{omit:["layers","patternFeatures"]});var eL={get paint(){return NS=NS||new v({"fill-antialias":new vt(Se.paint_fill["fill-antialias"]),"fill-opacity":new At(Se.paint_fill["fill-opacity"]),"fill-color":new At(Se.paint_fill["fill-color"]),"fill-outline-color":new At(Se.paint_fill["fill-outline-color"]),"fill-translate":new vt(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new sh(Se.paint_fill["fill-pattern"])})},get layout(){return BS=BS||new v({"fill-sort-key":new At(Se.layout_fill["fill-sort-key"])})}};class tL extends h{constructor(o){super(o,eL)}recalculate(o,l){super.recalculate(o,l);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new a_(o)}queryRadius(){return Rg(this.paint.get("fill-translate"))}queryIntersectsFeature(o,l,p,g,_,x,S){return wS(Dg(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),g)}isTileClipped(){return!0}}const nL=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),rL=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:iL}=nL;var Nl={},oL=w,jS=vh;function vh(s,o,l,p,g){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=g,s.readFields(aL,this,o)}function aL(s,o,l){s==1?o.id=l.readVarint():s==2?function(p,g){for(var _=p.readVarint()+p.pos;p.pos<_;){var x=g._keys[p.readVarint()],S=g._values[p.readVarint()];g.properties[x]=S}}(l,o):s==3?o.type=l.readVarint():s==4&&(o._geometry=l.pos)}function sL(s){for(var o,l,p=0,g=0,_=s.length,x=_-1;g<_;x=g++)p+=((l=s[x]).x-(o=s[g]).x)*(o.y+l.y);return p}vh.types=["Unknown","Point","LineString","Polygon"],vh.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var o,l=s.readVarint()+s.pos,p=1,g=0,_=0,x=0,S=[];s.pos<l;){if(g<=0){var E=s.readVarint();p=7&E,g=E>>3}if(g--,p===1||p===2)_+=s.readSVarint(),x+=s.readSVarint(),p===1&&(o&&S.push(o),o=[]),o.push(new oL(_,x));else{if(p!==7)throw new Error("unknown command "+p);o&&o.push(o[0].clone())}}return o&&S.push(o),S},vh.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var o=s.readVarint()+s.pos,l=1,p=0,g=0,_=0,x=1/0,S=-1/0,E=1/0,A=-1/0;s.pos<o;){if(p<=0){var L=s.readVarint();l=7&L,p=L>>3}if(p--,l===1||l===2)(g+=s.readSVarint())<x&&(x=g),g>S&&(S=g),(_+=s.readSVarint())<E&&(E=_),_>A&&(A=_);else if(l!==7)throw new Error("unknown command "+l)}return[x,E,S,A]},vh.prototype.toGeoJSON=function(s,o,l){var p,g,_=this.extent*Math.pow(2,l),x=this.extent*s,S=this.extent*o,E=this.loadGeometry(),A=vh.types[this.type];function L(H){for(var Y=0;Y<H.length;Y++){var J=H[Y];H[Y]=[360*(J.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(p=0;p<E.length;p++)$[p]=E[p][0];L(E=$);break;case 2:for(p=0;p<E.length;p++)L(E[p]);break;case 3:for(E=function(H){var Y=H.length;if(Y<=1)return[H];for(var J,ue,fe=[],Te=0;Te<Y;Te++){var _e=sL(H[Te]);_e!==0&&(ue===void 0&&(ue=_e<0),ue===_e<0?(J&&fe.push(J),J=[H[Te]]):J.push(H[Te]))}return J&&fe.push(J),fe}(E),p=0;p<E.length;p++)for(g=0;g<E[p].length;g++)L(E[p][g])}E.length===1?E=E[0]:A="Multi"+A;var U={type:"Feature",geometry:{type:A,coordinates:E},properties:this.properties};return"id"in this&&(U.id=this.id),U};var lL=jS,US=VS;function VS(s,o){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(uL,this,o),this.length=this._features.length}function uL(s,o,l){s===15?o.version=l.readVarint():s===1?o.name=l.readString():s===5?o.extent=l.readVarint():s===2?o._features.push(l.pos):s===3?o._keys.push(l.readString()):s===4&&o._values.push(function(p){for(var g=null,_=p.readVarint()+p.pos;p.pos<_;){var x=p.readVarint()>>3;g=x===1?p.readString():x===2?p.readFloat():x===3?p.readDouble():x===4?p.readVarint64():x===5?p.readVarint():x===6?p.readSVarint():x===7?p.readBoolean():null}return g}(l))}VS.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var o=this._pbf.readVarint()+this._pbf.pos;return new lL(this._pbf,o,this.extent,this._keys,this._values)};var cL=US;function hL(s,o,l){if(s===3){var p=new cL(l,l.readVarint()+l.pos);p.length&&(o[p.name]=p)}}Nl.VectorTile=function(s,o){this.layers=s.readFields(hL,{},o)},Nl.VectorTileFeature=jS,Nl.VectorTileLayer=US;const dL=Nl.VectorTileFeature.types,s_=Math.pow(2,13);function Np(s,o,l,p,g,_,x,S){s.emplaceBack(o,l,2*Math.floor(p*s_)+x,g*s_*2,_*s_*2,Math.round(S))}class l_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.layoutVertexArray=new Rl,this.centroidVertexArray=new ui,this.indexArray=new Oo,this.programConfigurations=new Wu(o.layers,o.zoom),this.segments=new on,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,p){this.features=[],this.hasPattern=i_("fill-extrusion",this.layers,l);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of o){const E=this.layers[0]._featureFilter.needGeometry,A=Hu(g,E);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),A,p))continue;const L={id:_,sourceLayerIndex:S,index:x,geometry:E?A.geometry:qu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(o_("fill-extrusion",this.layers,L,this.zoom,l)):this.addFeature(L,L.geometry,x,p,{}),l.featureIndex.insert(g,L.geometry,x,S,this.index,!0)}}addFeatures(o,l,p){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,l,p)}}update(o,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,iL),this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,rL.members,!0),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(o,l,p,g,_){for(const x of jc(l,500)){const S={x:0,y:0,vertexCount:0};let E=0;for(const Y of x)E+=Y.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Y of x){if(Y.length===0||fL(Y))continue;let J=0;for(let ue=0;ue<Y.length;ue++){const fe=Y[ue];if(ue>=1){const Te=Y[ue-1];if(!pL(fe,Te)){A.vertexLength+4>on.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const _e=fe.sub(Te)._perp()._unit(),Ee=Te.dist(fe);J+Ee>32768&&(J=0),Np(this.layoutVertexArray,fe.x,fe.y,_e.x,_e.y,0,0,J),Np(this.layoutVertexArray,fe.x,fe.y,_e.x,_e.y,0,1,J),S.x+=2*fe.x,S.y+=2*fe.y,S.vertexCount+=2,J+=Ee,Np(this.layoutVertexArray,Te.x,Te.y,_e.x,_e.y,0,0,J),Np(this.layoutVertexArray,Te.x,Te.y,_e.x,_e.y,0,1,J),S.x+=2*Te.x,S.y+=2*Te.y,S.vertexCount+=2;const ze=A.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+E>on.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),dL[o.type]!=="Polygon")continue;const L=[],$=[],U=A.vertexLength;for(const Y of x)if(Y.length!==0){Y!==x[0]&&$.push(L.length/2);for(let J=0;J<Y.length;J++){const ue=Y[J];Np(this.layoutVertexArray,ue.x,ue.y,0,0,1,1,0),S.x+=ue.x,S.y+=ue.y,S.vertexCount+=1,L.push(ue.x),L.push(ue.y)}}const H=RS(L,$);for(let Y=0;Y<H.length;Y+=3)this.indexArray.emplaceBack(U+H[Y],U+H[Y+2],U+H[Y+1]);A.primitiveLength+=H.length/3,A.vertexLength+=E;for(let Y=0;Y<S.vertexCount;Y++){const J=Math.floor(S.x/S.vertexCount),ue=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(J,ue)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}}function pL(s,o){return s.x===o.x&&(s.x<0||s.x>$r)||s.y===o.y&&(s.y<0||s.y>$r)}function fL(s){return s.every(o=>o.x<0)||s.every(o=>o.x>$r)||s.every(o=>o.y<0)||s.every(o=>o.y>$r)}let WS;mt("FillExtrusionBucket",l_,{omit:["layers","features"]});var mL={get paint(){return WS=WS||new v({"fill-extrusion-opacity":new vt(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new At(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sh(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new At(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new At(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class gL extends h{constructor(o){super(o,mL)}createBucket(o){return new l_(o)}queryRadius(){return Rg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,l,p,g,_,x,S,E){const A=Dg(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),L=this.paint.get("fill-extrusion-height").evaluate(l,p),$=this.paint.get("fill-extrusion-base").evaluate(l,p),U=function(Y,J,ue,fe){const Te=[];for(const _e of Y){const Ee=[_e.x,_e.y,0,1];$g(Ee,Ee,J),Te.push(new k(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Te}(A,E),H=function(Y,J,ue,fe){const Te=[],_e=[],Ee=fe[8]*J,ze=fe[9]*J,We=fe[10]*J,ut=fe[11]*J,Pt=fe[8]*ue,st=fe[9]*ue,tt=fe[10]*ue,wt=fe[11]*ue;for(const gt of Y){const dt=[],Fe=[];for(const kt of gt){const xt=kt.x,Bt=kt.y,Un=fe[0]*xt+fe[4]*Bt+fe[12],Rn=fe[1]*xt+fe[5]*Bt+fe[13],Gr=fe[2]*xt+fe[6]*Bt+fe[14],ua=fe[3]*xt+fe[7]*Bt+fe[15],di=Gr+We,Zr=ua+ut,$i=Un+Pt,Oi=Rn+st,Fi=Gr+tt,br=ua+wt,Kr=new k((Un+Ee)/Zr,(Rn+ze)/Zr);Kr.z=di/Zr,dt.push(Kr);const Si=new k($i/br,Oi/br);Si.z=Fi/br,Fe.push(Si)}Te.push(dt),_e.push(Fe)}return[Te,_e]}(g,$,L,E);return function(Y,J,ue){let fe=1/0;wS(ue,J)&&(fe=qS(ue,J[0]));for(let Te=0;Te<J.length;Te++){const _e=J[Te],Ee=Y[Te];for(let ze=0;ze<_e.length-1;ze++){const We=_e[ze],ut=[We,_e[ze+1],Ee[ze+1],Ee[ze],We];bS(ue,ut)&&(fe=Math.min(fe,qS(ue,ut)))}}return fe!==1/0&&fe}(H[0],H[1],U)}}function jp(s,o){return s.x*o.x+s.y*o.y}function qS(s,o){if(s.length===1){let l=0;const p=o[l++];let g;for(;!g||p.equals(g);)if(g=o[l++],!g)return 1/0;for(;l<o.length;l++){const _=o[l],x=s[0],S=g.sub(p),E=_.sub(p),A=x.sub(p),L=jp(S,S),$=jp(S,E),U=jp(E,E),H=jp(A,S),Y=jp(A,E),J=L*U-$*$,ue=(U*H-$*Y)/J,fe=(L*Y-$*H)/J,Te=p.z*(1-ue-fe)+g.z*ue+_.z*fe;if(isFinite(Te))return Te}return 1/0}{let l=1/0;for(const p of o)l=Math.min(l,p.z);return l}}const yL=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:vL}=yL,_L=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:xL}=_L,bL=Nl.VectorTileFeature.types,wL=Math.cos(Math.PI/180*37.5),HS=Math.pow(2,14)/.5;class u_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(l=>l.id),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new uh,this.layoutVertexArray2=new Dl,this.indexArray=new Oo,this.programConfigurations=new Wu(o.layers,o.zoom),this.segments=new on,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(o,l,p){this.hasPattern=i_("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:E,index:A,sourceLayerIndex:L}of o){const $=this.layers[0]._featureFilter.needGeometry,U=Hu(S,$);if(!this.layers[0]._featureFilter.filter(new Kn(this.zoom),U,p))continue;const H=_?g.evaluate(U,{},p):void 0,Y={id:E,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:$?U.geometry:qu(S),patterns:{},sortKey:H};x.push(Y)}_&&x.sort((S,E)=>S.sortKey-E.sortKey);for(const S of x){const{geometry:E,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const $=o_("line",this.layers,S,this.zoom,l);this.patternFeatures.push($)}else this.addFeature(S,E,A,p,{});l.featureIndex.insert(o[A].feature,E,A,L,this.index)}}update(o,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(o,l,this.stateDependentLayers,p)}addFeatures(o,l,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,xL)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,vL),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(o.properties,"mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,l,p,g,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(o,{}),E=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(o);for(const $ of l)this.addLine($,o,S,E,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,_,g)}addLine(o,l,p,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<o.length-1;fe++)this.totalDistance+=o[fe].dist(o[fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=bL[l.type]==="Polygon";let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let A=0;for(;A<E-1&&o[A].equals(o[A+1]);)A++;if(E<(S?3:2))return;p==="bevel"&&(_=1.05);const L=this.overscaling<=16?15*$r/(512*this.overscaling):0,$=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let U,H,Y,J,ue;this.e1=this.e2=-1,S&&(U=o[E-2],ue=o[A].sub(U)._unit()._perp());for(let fe=A;fe<E;fe++){if(Y=fe===E-1?S?o[A+1]:void 0:o[fe+1],Y&&o[fe].equals(Y))continue;ue&&(J=ue),U&&(H=U),U=o[fe],ue=Y?Y.sub(U)._unit()._perp():J,J=J||ue;let Te=J.add(ue);Te.x===0&&Te.y===0||Te._unit();const _e=J.x*ue.x+J.y*ue.y,Ee=Te.x*ue.x+Te.y*ue.y,ze=Ee!==0?1/Ee:1/0,We=2*Math.sqrt(2-2*Ee),ut=Ee<wL&&H&&Y,Pt=J.x*ue.y-J.y*ue.x>0;if(ut&&fe>A){const wt=U.dist(H);if(wt>2*L){const gt=U.sub(U.sub(H)._mult(L/wt)._round());this.updateDistance(H,gt),this.addCurrentVertex(gt,J,0,0,$),H=gt}}const st=H&&Y;let tt=st?p:S?"butt":g;if(st&&tt==="round"&&(ze<x?tt="miter":ze<=2&&(tt="fakeround")),tt==="miter"&&ze>_&&(tt="bevel"),tt==="bevel"&&(ze>2&&(tt="flipbevel"),ze<_&&(tt="miter")),H&&this.updateDistance(H,U),tt==="miter")Te._mult(ze),this.addCurrentVertex(U,Te,0,0,$);else if(tt==="flipbevel"){if(ze>100)Te=ue.mult(-1);else{const wt=ze*J.add(ue).mag()/J.sub(ue).mag();Te._perp()._mult(wt*(Pt?-1:1))}this.addCurrentVertex(U,Te,0,0,$),this.addCurrentVertex(U,Te.mult(-1),0,0,$)}else if(tt==="bevel"||tt==="fakeround"){const wt=-Math.sqrt(ze*ze-1),gt=Pt?wt:0,dt=Pt?0:wt;if(H&&this.addCurrentVertex(U,J,gt,dt,$),tt==="fakeround"){const Fe=Math.round(180*We/Math.PI/20);for(let kt=1;kt<Fe;kt++){let xt=kt/Fe;if(xt!==.5){const Un=xt-.5;xt+=xt*Un*(xt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Un*Un+(.848013+_e*(.215638*_e-1.06021)))}const Bt=ue.sub(J)._mult(xt)._add(J)._unit()._mult(Pt?-1:1);this.addHalfVertex(U,Bt.x,Bt.y,!1,Pt,0,$)}}Y&&this.addCurrentVertex(U,ue,-gt,-dt,$)}else if(tt==="butt")this.addCurrentVertex(U,Te,0,0,$);else if(tt==="square"){const wt=H?1:-1;this.addCurrentVertex(U,Te,wt,wt,$)}else tt==="round"&&(H&&(this.addCurrentVertex(U,J,0,0,$),this.addCurrentVertex(U,J,1,1,$,!0)),Y&&(this.addCurrentVertex(U,ue,-1,-1,$,!0),this.addCurrentVertex(U,ue,0,0,$)));if(ut&&fe<E-1){const wt=U.dist(Y);if(wt>2*L){const gt=U.add(Y.sub(U)._mult(L/wt)._round());this.updateDistance(U,gt),this.addCurrentVertex(gt,ue,0,0,$),U=gt}}}}addCurrentVertex(o,l,p,g,_,x=!1){const S=l.y*g-l.x,E=-l.y-l.x*g;this.addHalfVertex(o,l.x+l.y*p,l.y-l.x*p,x,!1,p,_),this.addHalfVertex(o,S,E,x,!0,-g,_),this.distance>HS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(o,l,p,g,_,x))}addHalfVertex({x:o,y:l},p,g,_,x,S,E){const A=.5*(this.lineClips?this.scaledDistance*(HS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((o<<1)+(_?1:0),(l<<1)+(x?1:0),Math.round(63*p)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),E.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(o,l){this.distance+=o.dist(l),this.updateScaledDistance()}}let GS,ZS;mt("LineBucket",u_,{omit:["layers","patternFeatures"]});var KS={get paint(){return ZS=ZS||new v({"line-opacity":new At(Se.paint_line["line-opacity"]),"line-color":new At(Se.paint_line["line-color"]),"line-translate":new vt(Se.paint_line["line-translate"]),"line-translate-anchor":new vt(Se.paint_line["line-translate-anchor"]),"line-width":new At(Se.paint_line["line-width"]),"line-gap-width":new At(Se.paint_line["line-gap-width"]),"line-offset":new At(Se.paint_line["line-offset"]),"line-blur":new At(Se.paint_line["line-blur"]),"line-dasharray":new lh(Se.paint_line["line-dasharray"]),"line-pattern":new sh(Se.paint_line["line-pattern"]),"line-gradient":new Ap(Se.paint_line["line-gradient"])})},get layout(){return GS=GS||new v({"line-cap":new vt(Se.layout_line["line-cap"]),"line-join":new At(Se.layout_line["line-join"]),"line-miter-limit":new vt(Se.layout_line["line-miter-limit"]),"line-round-limit":new vt(Se.layout_line["line-round-limit"]),"line-sort-key":new At(Se.layout_line["line-sort-key"])})}};class SL extends At{possiblyEvaluate(o,l){return l=new Kn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(o,l)}evaluate(o,l,p,g){return l=ae({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(o,l,p,g)}}let Ng;class CL extends h{constructor(o){super(o,KS),this.gradientVersion=0,Ng||(Ng=new SL(KS.paint.properties["line-width"].specification),Ng.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(o){if(o==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof ml,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,l){super.recalculate(o,l),this.paint._values["line-floorwidth"]=Ng.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new u_(o)}queryRadius(o){const l=o,p=XS(Rp("line-width",this,l),Rp("line-gap-width",this,l)),g=Rp("line-offset",this,l);return p/2+Math.abs(g)+Rg(this.paint.get("line-translate"))}queryIntersectsFeature(o,l,p,g,_,x,S){const E=Dg(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),A=S/2*XS(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),L=this.paint.get("line-offset").evaluate(l,p);return L&&(g=function($,U){const H=[];for(let Y=0;Y<$.length;Y++){const J=$[Y],ue=[];for(let fe=0;fe<J.length;fe++){const Te=J[fe-1],_e=J[fe],Ee=J[fe+1],ze=fe===0?new k(0,0):_e.sub(Te)._unit()._perp(),We=fe===J.length-1?new k(0,0):Ee.sub(_e)._unit()._perp(),ut=ze._add(We)._unit(),Pt=ut.x*We.x+ut.y*We.y;Pt!==0&&ut._mult(1/Pt),ue.push(ut._mult(U)._add(_e))}H.push(ue)}return H}(g,L*S)),function($,U,H){for(let Y=0;Y<U.length;Y++){const J=U[Y];if($.length>=3){for(let ue=0;ue<J.length;ue++)if(mh($,J[ue]))return!0}if(z4($,J,H))return!0}return!1}(E,g,A)}isTileClipped(){return!0}}function XS(s,o){return o>0?o+2*s:s}const kL=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),EL=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const TL=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const YS=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),IL=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function PL(s,o,l){return s.sections.forEach(p=>{p.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),Qi.applyArabicShaping&&(g=Qi.applyArabicShaping(g)),g}(p.text,o,l)}),s}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Up={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var jr=24,JS=zn,QS=function(s,o,l,p,g){var _,x,S=8*g-p-1,E=(1<<S)-1,A=E>>1,L=-7,$=g-1,U=-1,H=s[o+$];for($+=U,_=H&(1<<-L)-1,H>>=-L,L+=S;L>0;_=256*_+s[o+$],$+=U,L-=8);for(x=_&(1<<-L)-1,_>>=-L,L+=p;L>0;x=256*x+s[o+$],$+=U,L-=8);if(_===0)_=1-A;else{if(_===E)return x?NaN:1/0*(H?-1:1);x+=Math.pow(2,p),_-=A}return(H?-1:1)*x*Math.pow(2,_-p)},eC=function(s,o,l,p,g,_){var x,S,E,A=8*_-g-1,L=(1<<A)-1,$=L>>1,U=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=0,Y=1,J=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(S=isNaN(o)?1:0,x=L):(x=Math.floor(Math.log(o)/Math.LN2),o*(E=Math.pow(2,-x))<1&&(x--,E*=2),(o+=x+$>=1?U/E:U*Math.pow(2,1-$))*E>=2&&(x++,E/=2),x+$>=L?(S=0,x=L):x+$>=1?(S=(o*E-1)*Math.pow(2,g),x+=$):(S=o*Math.pow(2,$-1)*Math.pow(2,g),x=0));g>=8;s[l+H]=255&S,H+=Y,S/=256,g-=8);for(x=x<<g|S,A+=g;A>0;s[l+H]=255&x,H+=Y,x/=256,A-=8);s[l+H-Y]|=128*J};function zn(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}zn.Varint=0,zn.Fixed64=1,zn.Bytes=2,zn.Fixed32=5;var c_=4294967296,tC=1/c_,nC=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Us(s){return s.type===zn.Bytes?s.readVarint()+s.pos:s.pos+1}function _h(s,o,l){return l?4294967296*o+(s>>>0):4294967296*(o>>>0)+(s>>>0)}function rC(s,o,l){var p=o<=16383?1:o<=2097151?2:o<=268435455?3:Math.floor(Math.log(o)/(7*Math.LN2));l.realloc(p);for(var g=l.pos-1;g>=s;g--)l.buf[g+p]=l.buf[g]}function ML(s,o){for(var l=0;l<s.length;l++)o.writeVarint(s[l])}function AL(s,o){for(var l=0;l<s.length;l++)o.writeSVarint(s[l])}function LL(s,o){for(var l=0;l<s.length;l++)o.writeFloat(s[l])}function zL(s,o){for(var l=0;l<s.length;l++)o.writeDouble(s[l])}function RL(s,o){for(var l=0;l<s.length;l++)o.writeBoolean(s[l])}function DL(s,o){for(var l=0;l<s.length;l++)o.writeFixed32(s[l])}function $L(s,o){for(var l=0;l<s.length;l++)o.writeSFixed32(s[l])}function OL(s,o){for(var l=0;l<s.length;l++)o.writeFixed64(s[l])}function FL(s,o){for(var l=0;l<s.length;l++)o.writeSFixed64(s[l])}function jg(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+16777216*s[o+3]}function xh(s,o,l){s[l]=o,s[l+1]=o>>>8,s[l+2]=o>>>16,s[l+3]=o>>>24}function iC(s,o){return(s[o]|s[o+1]<<8|s[o+2]<<16)+(s[o+3]<<24)}zn.prototype={destroy:function(){this.buf=null},readFields:function(s,o,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),g=p>>3,_=this.pos;this.type=7&p,s(g,o,this),this.pos===_&&this.skip(p)}return o},readMessage:function(s,o){return this.readFields(s,o,this.readVarint()+this.pos)},readFixed32:function(){var s=jg(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=iC(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=jg(this.buf,this.pos)+jg(this.buf,this.pos+4)*c_;return this.pos+=8,s},readSFixed64:function(){var s=jg(this.buf,this.pos)+iC(this.buf,this.pos+4)*c_;return this.pos+=8,s},readFloat:function(){var s=QS(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=QS(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var o,l,p=this.buf;return o=127&(l=p[this.pos++]),l<128?o:(o|=(127&(l=p[this.pos++]))<<7,l<128?o:(o|=(127&(l=p[this.pos++]))<<14,l<128?o:(o|=(127&(l=p[this.pos++]))<<21,l<128?o:function(g,_,x){var S,E,A=x.buf;if(S=(112&(E=A[x.pos++]))>>4,E<128||(S|=(127&(E=A[x.pos++]))<<3,E<128)||(S|=(127&(E=A[x.pos++]))<<10,E<128)||(S|=(127&(E=A[x.pos++]))<<17,E<128)||(S|=(127&(E=A[x.pos++]))<<24,E<128)||(S|=(1&(E=A[x.pos++]))<<31,E<128))return _h(g,S,_);throw new Error("Expected varint not more than 10 bytes")}(o|=(15&(l=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,o=this.pos;return this.pos=s,s-o>=12&&nC?function(l,p,g){return nC.decode(l.subarray(p,g))}(this.buf,o,s):function(l,p,g){for(var _="",x=p;x<g;){var S,E,A,L=l[x],$=null,U=L>239?4:L>223?3:L>191?2:1;if(x+U>g)break;U===1?L<128&&($=L):U===2?(192&(S=l[x+1]))==128&&($=(31&L)<<6|63&S)<=127&&($=null):U===3?(E=l[x+2],(192&(S=l[x+1]))==128&&(192&E)==128&&(($=(15&L)<<12|(63&S)<<6|63&E)<=2047||$>=55296&&$<=57343)&&($=null)):U===4&&(E=l[x+2],A=l[x+3],(192&(S=l[x+1]))==128&&(192&E)==128&&(192&A)==128&&(($=(15&L)<<18|(63&S)<<12|(63&E)<<6|63&A)<=65535||$>=1114112)&&($=null)),$===null?($=65533,U=1):$>65535&&($-=65536,_+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),_+=String.fromCharCode($),x+=U}return _}(this.buf,o,s)},readBytes:function(){var s=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,s);return this.pos=s,o},readPackedVarint:function(s,o){if(this.type!==zn.Bytes)return s.push(this.readVarint(o));var l=Us(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(o));return s},readPackedSVarint:function(s){if(this.type!==zn.Bytes)return s.push(this.readSVarint());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==zn.Bytes)return s.push(this.readBoolean());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==zn.Bytes)return s.push(this.readFloat());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==zn.Bytes)return s.push(this.readDouble());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==zn.Bytes)return s.push(this.readFixed32());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==zn.Bytes)return s.push(this.readSFixed32());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==zn.Bytes)return s.push(this.readFixed64());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==zn.Bytes)return s.push(this.readSFixed64());var o=Us(this);for(s=s||[];this.pos<o;)s.push(this.readSFixed64());return s},skip:function(s){var o=7&s;if(o===zn.Varint)for(;this.buf[this.pos++]>127;);else if(o===zn.Bytes)this.pos=this.readVarint()+this.pos;else if(o===zn.Fixed32)this.pos+=4;else{if(o!==zn.Fixed64)throw new Error("Unimplemented type: "+o);this.pos+=8}},writeTag:function(s,o){this.writeVarint(s<<3|o)},realloc:function(s){for(var o=this.length||16;o<this.pos+s;)o*=2;if(o!==this.length){var l=new Uint8Array(o);l.set(this.buf),this.buf=l,this.length=o}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),xh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),xh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),xh(this.buf,-1&s,this.pos),xh(this.buf,Math.floor(s*tC),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),xh(this.buf,-1&s,this.pos),xh(this.buf,Math.floor(s*tC),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(o,l){var p,g;if(o>=0?(p=o%4294967296|0,g=o/4294967296|0):(g=~(-o/4294967296),4294967295^(p=~(-o%4294967296))?p=p+1|0:(p=0,g=g+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(p,0,l),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var o=this.pos;this.pos=function(p,g,_){for(var x,S,E=0;E<g.length;E++){if((x=g.charCodeAt(E))>55295&&x<57344){if(!S){x>56319||E+1===g.length?(p[_++]=239,p[_++]=191,p[_++]=189):S=x;continue}if(x<56320){p[_++]=239,p[_++]=191,p[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(p[_++]=239,p[_++]=191,p[_++]=189,S=null);x<128?p[_++]=x:(x<2048?p[_++]=x>>6|192:(x<65536?p[_++]=x>>12|224:(p[_++]=x>>18|240,p[_++]=x>>12&63|128),p[_++]=x>>6&63|128),p[_++]=63&x|128)}return _}(this.buf,s,this.pos);var l=this.pos-o;l>=128&&rC(o,l,this),this.pos=o-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),eC(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),eC(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var o=s.length;this.writeVarint(o),this.realloc(o);for(var l=0;l<o;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,o){this.pos++;var l=this.pos;s(o,this);var p=this.pos-l;p>=128&&rC(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,o,l){this.writeTag(s,zn.Bytes),this.writeRawMessage(o,l)},writePackedVarint:function(s,o){o.length&&this.writeMessage(s,ML,o)},writePackedSVarint:function(s,o){o.length&&this.writeMessage(s,AL,o)},writePackedBoolean:function(s,o){o.length&&this.writeMessage(s,RL,o)},writePackedFloat:function(s,o){o.length&&this.writeMessage(s,LL,o)},writePackedDouble:function(s,o){o.length&&this.writeMessage(s,zL,o)},writePackedFixed32:function(s,o){o.length&&this.writeMessage(s,DL,o)},writePackedSFixed32:function(s,o){o.length&&this.writeMessage(s,$L,o)},writePackedFixed64:function(s,o){o.length&&this.writeMessage(s,OL,o)},writePackedSFixed64:function(s,o){o.length&&this.writeMessage(s,FL,o)},writeBytesField:function(s,o){this.writeTag(s,zn.Bytes),this.writeBytes(o)},writeFixed32Field:function(s,o){this.writeTag(s,zn.Fixed32),this.writeFixed32(o)},writeSFixed32Field:function(s,o){this.writeTag(s,zn.Fixed32),this.writeSFixed32(o)},writeFixed64Field:function(s,o){this.writeTag(s,zn.Fixed64),this.writeFixed64(o)},writeSFixed64Field:function(s,o){this.writeTag(s,zn.Fixed64),this.writeSFixed64(o)},writeVarintField:function(s,o){this.writeTag(s,zn.Varint),this.writeVarint(o)},writeSVarintField:function(s,o){this.writeTag(s,zn.Varint),this.writeSVarint(o)},writeStringField:function(s,o){this.writeTag(s,zn.Bytes),this.writeString(o)},writeFloatField:function(s,o){this.writeTag(s,zn.Fixed32),this.writeFloat(o)},writeDoubleField:function(s,o){this.writeTag(s,zn.Fixed64),this.writeDouble(o)},writeBooleanField:function(s,o){this.writeVarintField(s,!!o)}};var h_=b(JS);const d_=3;function BL(s,o,l){s===1&&l.readMessage(NL,o)}function NL(s,o,l){if(s===3){const{id:p,bitmap:g,width:_,height:x,left:S,top:E,advance:A}=l.readMessage(jL,{});o.push({id:p,bitmap:new $p({width:_+2*d_,height:x+2*d_},g),metrics:{width:_,height:x,left:S,top:E,advance:A}})}}function jL(s,o,l){s===1?o.id=l.readVarint():s===2?o.bitmap=l.readBytes():s===3?o.width=l.readVarint():s===4?o.height=l.readVarint():s===5?o.left=l.readSVarint():s===6?o.top=l.readSVarint():s===7&&(o.advance=l.readVarint())}const oC=d_;function aC(s){let o=0,l=0;for(const x of s)o+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,S)=>S.h-x.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),l),h:1/0}];let g=0,_=0;for(const x of s)for(let S=p.length-1;S>=0;S--){const E=p[S];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const A=p.pop();S<p.length&&(p[S]=A)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(p.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:_,fill:o/(g*_)||0}}const to=1;class p_{constructor(o,{pixelRatio:l,version:p,stretchX:g,stretchY:_,content:x,textFitWidth:S,textFitHeight:E}){this.paddedRect=o,this.pixelRatio=l,this.stretchX=g,this.stretchY=_,this.content=x,this.version=p,this.textFitWidth=S,this.textFitHeight=E}get tl(){return[this.paddedRect.x+to,this.paddedRect.y+to]}get br(){return[this.paddedRect.x+this.paddedRect.w-to,this.paddedRect.y+this.paddedRect.h-to]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*to)/this.pixelRatio,(this.paddedRect.h-2*to)/this.pixelRatio]}}class sC{constructor(o,l){const p={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(o,p,_),this.addImages(l,g,_);const{w:x,h:S}=aC(_),E=new Fo({width:x||1,height:S||1});for(const A in o){const L=o[A],$=p[A].paddedRect;Fo.copy(L.data,E,{x:0,y:0},{x:$.x+to,y:$.y+to},L.data)}for(const A in l){const L=l[A],$=g[A].paddedRect,U=$.x+to,H=$.y+to,Y=L.data.width,J=L.data.height;Fo.copy(L.data,E,{x:0,y:0},{x:U,y:H},L.data),Fo.copy(L.data,E,{x:0,y:J-1},{x:U,y:H-1},{width:Y,height:1}),Fo.copy(L.data,E,{x:0,y:0},{x:U,y:H+J},{width:Y,height:1}),Fo.copy(L.data,E,{x:Y-1,y:0},{x:U-1,y:H},{width:1,height:J}),Fo.copy(L.data,E,{x:0,y:0},{x:U+Y,y:H},{width:1,height:J})}this.image=E,this.iconPositions=p,this.patternPositions=g}addImages(o,l,p){for(const g in o){const _=o[g],x={x:0,y:0,w:_.data.width+2*to,h:_.data.height+2*to};p.push(x),l[g]=new p_(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(o,l){o.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in o.updatedImages)this.patchUpdatedImage(this.iconPositions[p],o.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],o.getImage(p),l)}patchUpdatedImage(o,l,p){if(!o||!l||o.version===l.version)return;o.version=l.version;const[g,_]=o.tl;p.update(l.data,void 0,{x:g,y:_})}}var jl;mt("ImagePosition",p_),mt("ImageAtlas",sC),d.ah=void 0,(jl=d.ah||(d.ah={}))[jl.none=0]="none",jl[jl.horizontal=1]="horizontal",jl[jl.vertical=2]="vertical",jl[jl.horizontalOnly=3]="horizontalOnly";const Vp=-17;class Wp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(o,l){const p=new Wp;return p.scale=o||1,p.fontStack=l,p}static forImage(o){const l=new Wp;return l.imageName=o,l}}class bh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,l){const p=new bh;for(let g=0;g<o.sections.length;g++){const _=o.sections[g];_.image?p.addImageSection(_):p.addTextSection(_,l)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSectionIndex(o){return this.sectionIndex[o]}getCharCode(o){return this.text.charCodeAt(o)}verticalizePunctuation(){this.text=function(o){let l="";for(let p=0;p<o.length;p++){const g=o.charCodeAt(p+1)||null,_=o.charCodeAt(p-1)||null;l+=g&&Tg(g)&&!Up[o[p+1]]||_&&Tg(_)&&!Up[o[p-1]]||!Up[o[p]]?o[p]:Up[o[p]]}return l}(this.text)}trim(){let o=0;for(let p=0;p<this.text.length&&Vg[this.text.charCodeAt(p)];p++)o++;let l=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&Vg[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(o,l),this.sectionIndex=this.sectionIndex.slice(o,l)}substring(o,l){const p=new bh;return p.text=this.text.substring(o,l),p.sectionIndex=this.sectionIndex.slice(o,l),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,l)=>Math.max(o,this.sections[l].scale),0)}addTextSection(o,l){this.text+=o.text,this.sections.push(Wp.forText(o.scale,o.fontStack||l));const p=this.sections.length-1;for(let g=0;g<o.text.length;++g)this.sectionIndex.push(p)}addImageSection(o){const l=o.image?o.image.name:"";if(l.length===0)return void $e("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Wp.forImage(l)),this.sectionIndex.push(this.sections.length-1)):$e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ug(s,o,l,p,g,_,x,S,E,A,L,$,U,H,Y){const J=bh.fromFeature(s,g);let ue;$===d.ah.vertical&&J.verticalizePunctuation();const{processBidirectionalText:fe,processStyledBidirectionalText:Te}=Qi;if(fe&&J.sections.length===1){ue=[];const ze=fe(J.toString(),f_(J,A,_,o,p,H));for(const We of ze){const ut=new bh;ut.text=We,ut.sections=J.sections;for(let Pt=0;Pt<We.length;Pt++)ut.sectionIndex.push(0);ue.push(ut)}}else if(Te){ue=[];const ze=Te(J.text,J.sectionIndex,f_(J,A,_,o,p,H));for(const We of ze){const ut=new bh;ut.text=We[0],ut.sectionIndex=We[1],ut.sections=J.sections,ue.push(ut)}}else ue=function(ze,We){const ut=[],Pt=ze.text;let st=0;for(const tt of We)ut.push(ze.substring(st,tt)),st=tt;return st<Pt.length&&ut.push(ze.substring(st,Pt.length)),ut}(J,f_(J,A,_,o,p,H));const _e=[],Ee={positionedLines:_e,text:J.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:$,iconsInText:!1,verticalizable:!1};return function(ze,We,ut,Pt,st,tt,wt,gt,dt,Fe,kt,xt){let Bt=0,Un=Vp,Rn=0,Gr=0;const ua=gt==="right"?1:gt==="left"?0:.5;let di=0;for(const br of st){br.trim();const Kr=br.getMaxScale(),Si=(Kr-1)*jr,pi={positionedGlyphs:[],lineOffset:0};ze.positionedLines[di]=pi;const Bi=pi.positionedGlyphs;let fi=0;if(!br.length()){Un+=tt,++di;continue}for(let no=0;no<br.length();no++){const vn=br.getSection(no),Wn=br.getSectionIndex(no),Qn=br.getCharCode(no);let wo=0,dr=null,kh=null,is=null,os=jr;const ca=!(dt===d.ah.horizontal||!kt&&!Pp(Qn)||kt&&(Vg[Qn]||(Zr=Qn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Zr)))));if(vn.imageName){const jo=Pt[vn.imageName];if(!jo)continue;is=vn.imageName,ze.iconsInText=ze.iconsInText||!0,kh=jo.paddedRect;const ti=jo.displaySize;vn.scale=vn.scale*jr/xt,dr={width:ti[0],height:ti[1],left:to,top:-oC,advance:ca?ti[1]:ti[0]},wo=Si+(jr-ti[1]*vn.scale),os=dr.advance;const Vs=ca?ti[0]*vn.scale-jr*Kr:ti[1]*vn.scale-jr*Kr;Vs>0&&Vs>fi&&(fi=Vs)}else{const jo=ut[vn.fontStack],ti=jo&&jo[Qn];if(ti&&ti.rect)kh=ti.rect,dr=ti.metrics;else{const Vs=We[vn.fontStack],Xp=Vs&&Vs[Qn];if(!Xp)continue;dr=Xp.metrics}wo=(Kr-vn.scale)*jr}ca?(ze.verticalizable=!0,Bi.push({glyph:Qn,imageName:is,x:Bt,y:Un+wo,vertical:ca,scale:vn.scale,fontStack:vn.fontStack,sectionIndex:Wn,metrics:dr,rect:kh}),Bt+=os*vn.scale+Fe):(Bi.push({glyph:Qn,imageName:is,x:Bt,y:Un+wo,vertical:ca,scale:vn.scale,fontStack:vn.fontStack,sectionIndex:Wn,metrics:dr,rect:kh}),Bt+=dr.advance*vn.scale+Fe)}Bi.length!==0&&(Rn=Math.max(Bt-Fe,Rn),qL(Bi,0,Bi.length-1,ua,fi)),Bt=0;const No=tt*Kr+fi;pi.lineOffset=Math.max(fi,Si),Un+=No,Gr=Math.max(No,Gr),++di}var Zr;const $i=Un-Vp,{horizontalAlign:Oi,verticalAlign:Fi}=m_(wt);(function(br,Kr,Si,pi,Bi,fi,No,no,vn){const Wn=(Kr-Si)*Bi;let Qn=0;Qn=fi!==No?-no*pi-Vp:(-pi*vn+.5)*No;for(const wo of br)for(const dr of wo.positionedGlyphs)dr.x+=Wn,dr.y+=Qn})(ze.positionedLines,ua,Oi,Fi,Rn,Gr,tt,$i,st.length),ze.top+=-Fi*$i,ze.bottom=ze.top+$i,ze.left+=-Oi*Rn,ze.right=ze.left+Rn}(Ee,o,l,p,ue,x,S,E,$,A,U,Y),!function(ze){for(const We of ze)if(We.positionedGlyphs.length!==0)return!1;return!0}(_e)&&Ee}const Vg={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},UL={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},VL={40:!0};function lC(s,o,l,p,g,_){if(o.imageName){const x=p[o.imageName];return x?x.displaySize[0]*o.scale*jr/_+g:0}{const x=l[o.fontStack],S=x&&x[s];return S?S.metrics.advance*o.scale+g:0}}function uC(s,o,l,p){const g=Math.pow(s-o,2);return p?s<o?g/2:2*g:g+Math.abs(l)*l}function WL(s,o,l){let p=0;return s===10&&(p-=1e4),l&&(p+=150),s!==40&&s!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function cC(s,o,l,p,g,_){let x=null,S=uC(o,l,g,_);for(const E of p){const A=uC(o-E.x,l,g,_)+E.badness;A<=S&&(x=E,S=A)}return{index:s,x:o,priorBreak:x,badness:S}}function hC(s){return s?hC(s.priorBreak).concat(s.index):[]}function f_(s,o,l,p,g,_){if(!s)return[];const x=[],S=function($,U,H,Y,J,ue){let fe=0;for(let Te=0;Te<$.length();Te++){const _e=$.getSection(Te);fe+=lC($.getCharCode(Te),_e,Y,J,U,ue)}return fe/Math.max(1,Math.ceil(fe/H))}(s,o,l,p,g,_),E=s.text.indexOf("")>=0;let A=0;for(let $=0;$<s.length();$++){const U=s.getSection($),H=s.getCharCode($);if(Vg[H]||(A+=lC(H,U,p,g,o,_)),$<s.length()-1){const Y=!((L=H)<11904)&&(!!rn["CJK Compatibility Forms"](L)||!!rn["CJK Compatibility"](L)||!!rn["CJK Strokes"](L)||!!rn["CJK Symbols and Punctuation"](L)||!!rn["Enclosed CJK Letters and Months"](L)||!!rn["Halfwidth and Fullwidth Forms"](L)||!!rn["Ideographic Description Characters"](L)||!!rn["Vertical Forms"](L)||Eg.test(String.fromCodePoint(L)));(UL[H]||Y||U.imageName||$!==s.length()-2&&VL[s.getCharCode($+1)])&&x.push(cC($+1,A,S,x,WL(H,s.getCharCode($+1),Y&&E),!1))}}var L;return hC(cC(s.length(),A,S,x,0,!0))}function m_(s){let o=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:o,verticalAlign:l}}function qL(s,o,l,p,g){if(!p&&!g)return;const _=s[l],x=(s[l].x+_.metrics.advance*_.scale)*p;for(let S=o;S<=l;S++)s[S].x-=x,s[S].y+=g}function HL(s,o,l){const{horizontalAlign:p,verticalAlign:g}=m_(l),_=o[0]-s.displaySize[0]*p,x=o[1]-s.displaySize[1]*g;return{image:s,top:x,bottom:x+s.displaySize[1],left:_,right:_+s.displaySize[0]}}function dC(s){var o,l;let p=s.left,g=s.top,_=s.right-p,x=s.bottom-g;const S=(o=s.image.textFitWidth)!==null&&o!==void 0?o:"stretchOrShrink",E=(l=s.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",A=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(E==="proportional"){if(S==="stretchOnly"&&_/x<A||S==="proportional"){const L=Math.ceil(x*A);p*=L/_,_=L}}else if(S==="proportional"&&E==="stretchOnly"&&A!==0&&_/x>A){const L=Math.ceil(_/A);g*=L/x,x=L}return{x1:p,y1:g,x2:p+_,y2:g+x}}function pC(s,o,l,p,g,_){const x=s.image;let S;if(x.content){const ue=x.content,fe=x.pixelRatio||1;S=[ue[0]/fe,ue[1]/fe,x.displaySize[0]-ue[2]/fe,x.displaySize[1]-ue[3]/fe]}const E=o.left*_,A=o.right*_;let L,$,U,H;l==="width"||l==="both"?(H=g[0]+E-p[3],$=g[0]+A+p[1]):(H=g[0]+(E+A-x.displaySize[0])/2,$=H+x.displaySize[0]);const Y=o.top*_,J=o.bottom*_;return l==="height"||l==="both"?(L=g[1]+Y-p[0],U=g[1]+J+p[2]):(L=g[1]+(Y+J-x.displaySize[1])/2,U=L+x.displaySize[1]),{image:x,top:L,right:$,bottom:U,left:H,collisionPadding:S}}const qp=255,rs=128,Ul=qp*rs;function fC(s,o){const{expression:l}=o;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Kn(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:g}=l;let _=0;for(;_<p.length&&p[_]<=s;)_++;_=Math.max(0,_-1);let x=_;for(;x<p.length&&p[x]<s+1;)x++;x=Math.min(p.length-1,x);const S=p[_],E=p[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:E,minSize:l.evaluate(new Kn(S)),maxSize:l.evaluate(new Kn(E)),interpolationType:g}}}function g_(s,o,l){let p="never";const g=s.get(o);return g?p=g:s.get(l)&&(p="always"),p}const GL=Nl.VectorTileFeature.types,ZL=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Wg(s,o,l,p,g,_,x,S,E,A,L,$,U){const H=S?Math.min(Ul,Math.round(S[0])):0,Y=S?Math.min(Ul,Math.round(S[1])):0;s.emplaceBack(o,l,Math.round(32*p),Math.round(32*g),_,x,(H<<1)+(E?1:0),Y,16*A,16*L,256*$,256*U)}function y_(s,o,l){s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l),s.emplaceBack(o.x,o.y,l)}function KL(s){for(const o of s.sections)if(q1(o.text))return!0;return!1}class v_{constructor(o){this.layoutVertexArray=new ch,this.indexArray=new Oo,this.programConfigurations=o,this.segments=new on,this.dynamicLayoutVertexArray=new Lp,this.opacityVertexArray=new xo,this.hasVisibleVertices=!1,this.placedSymbolArray=new Xn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(o,l,p,g){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,kL.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,EL.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,ZL,!0),this.opacityVertexBuffer.itemSize=1),(p||g)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mt("SymbolBuffers",v_);class __{constructor(o,l,p){this.layoutVertexArray=new o,this.layoutAttributes=l,this.indexArray=new p,this.segments=new on,this.collisionVertexArray=new ts}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,TL.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mt("CollisionBuffers",__);class wh{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(x=>x.id),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=J1([]),this.placementViewportMatrix=J1([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fC(this.zoom,l["text-size"]),this.iconSizeData=fC(this.zoom,l["icon-size"]);const p=this.layers[0].layout,g=p.get("symbol-sort-key"),_=p.get("symbol-z-order");this.canOverlap=g_(p,"text-overlap","text-allow-overlap")!=="never"||g_(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=o.sourceID}createArrays(){this.text=new v_(new Wu(this.layers,this.zoom,o=>/^text/.test(o))),this.icon=new v_(new Wu(this.layers,this.zoom,o=>/^icon/.test(o))),this.glyphOffsetArray=new Yn,this.lineVertexArray=new li,this.symbolInstances=new en,this.textAnchorOffsets=new Jn}calculateGlyphDependencies(o,l,p,g,_){for(let x=0;x<o.length;x++)if(l[o.charCodeAt(x)]=!0,(p||g)&&_){const S=Up[o.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(o,l,p){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),E=_.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof Ki&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,$=_.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const U=l.iconDependencies,H=l.glyphDependencies,Y=l.availableImages,J=new Kn(this.zoom);for(const{feature:ue,id:fe,index:Te,sourceLayerIndex:_e}of o){const Ee=g._featureFilter.needGeometry,ze=Hu(ue,Ee);if(!g._featureFilter.filter(J,ze,p))continue;let We,ut;if(Ee||(ze.geometry=qu(ue)),A){const st=g.getValueAndResolveTokens("text-field",ze,p,Y),tt=Ki.factory(st),wt=this.hasRTLText=this.hasRTLText||KL(tt);(!wt||Qi.getRTLTextPluginStatus()==="unavailable"||wt&&Qi.isParsed())&&(We=PL(tt,g,ze))}if(L){const st=g.getValueAndResolveTokens("icon-image",ze,p,Y);ut=st instanceof Yi?st:Yi.fromString(st)}if(!We&&!ut)continue;const Pt=this.sortFeaturesByKey?$.evaluate(ze,{},p):void 0;if(this.features.push({id:fe,text:We,icon:ut,index:Te,sourceLayerIndex:_e,geometry:ze.geometry,properties:ue.properties,type:GL[ue.type],sortKey:Pt}),ut&&(U[ut.name]=!0),We){const st=x.evaluate(ze,{},p).join(","),tt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const wt of We.sections)if(wt.image)U[wt.image.name]=!0;else{const gt=Tp(We.toString()),dt=wt.fontStack||st,Fe=H[dt]=H[dt]||{};this.calculateGlyphDependencies(wt.text,Fe,tt,this.allowVerticalPlacement,gt)}}}_.get("symbol-placement")==="line"&&(this.features=function(ue){const fe={},Te={},_e=[];let Ee=0;function ze(st){_e.push(ue[st]),Ee++}function We(st,tt,wt){const gt=Te[st];return delete Te[st],Te[tt]=gt,_e[gt].geometry[0].pop(),_e[gt].geometry[0]=_e[gt].geometry[0].concat(wt[0]),gt}function ut(st,tt,wt){const gt=fe[tt];return delete fe[tt],fe[st]=gt,_e[gt].geometry[0].shift(),_e[gt].geometry[0]=wt[0].concat(_e[gt].geometry[0]),gt}function Pt(st,tt,wt){const gt=wt?tt[0][tt[0].length-1]:tt[0][0];return`${st}:${gt.x}:${gt.y}`}for(let st=0;st<ue.length;st++){const tt=ue[st],wt=tt.geometry,gt=tt.text?tt.text.toString():null;if(!gt){ze(st);continue}const dt=Pt(gt,wt),Fe=Pt(gt,wt,!0);if(dt in Te&&Fe in fe&&Te[dt]!==fe[Fe]){const kt=ut(dt,Fe,wt),xt=We(dt,Fe,_e[kt].geometry);delete fe[dt],delete Te[Fe],Te[Pt(gt,_e[xt].geometry,!0)]=xt,_e[kt].geometry=null}else dt in Te?We(dt,Fe,wt):Fe in fe?ut(dt,Fe,wt):(ze(st),fe[dt]=Ee-1,Te[Fe]=Ee-1)}return _e.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ue,fe)=>ue.sortKey-fe.sortKey)}update(o,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(o,l,this.layers,p),this.icon.programConfigurations.updatePaintArrays(o,l,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,l){const p=this.lineVertexArray.length;if(o.segment!==void 0){let g=o.dist(l[o.segment+1]),_=o.dist(l[o.segment]);const x={};for(let S=o.segment+1;S<l.length;S++)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:g},S<l.length-1&&(g+=l[S+1].dist(l[S]));for(let S=o.segment||0;S>=0;S--)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const E=x[S];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,l,p,g,_,x,S,E,A,L,$,U){const H=o.indexArray,Y=o.layoutVertexArray,J=o.segments.prepareSegment(4*l.length,Y,H,this.canOverlap?x.sortKey:void 0),ue=this.glyphOffsetArray.length,fe=J.vertexLength,Te=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,_e=x.text&&x.text.sections;for(let Ee=0;Ee<l.length;Ee++){const{tl:ze,tr:We,bl:ut,br:Pt,tex:st,pixelOffsetTL:tt,pixelOffsetBR:wt,minFontScaleX:gt,minFontScaleY:dt,glyphOffset:Fe,isSDF:kt,sectionIndex:xt}=l[Ee],Bt=J.vertexLength,Un=Fe[1];Wg(Y,E.x,E.y,ze.x,Un+ze.y,st.x,st.y,p,kt,tt.x,tt.y,gt,dt),Wg(Y,E.x,E.y,We.x,Un+We.y,st.x+st.w,st.y,p,kt,wt.x,tt.y,gt,dt),Wg(Y,E.x,E.y,ut.x,Un+ut.y,st.x,st.y+st.h,p,kt,tt.x,wt.y,gt,dt),Wg(Y,E.x,E.y,Pt.x,Un+Pt.y,st.x+st.w,st.y+st.h,p,kt,wt.x,wt.y,gt,dt),y_(o.dynamicLayoutVertexArray,E,Te),H.emplaceBack(Bt,Bt+1,Bt+2),H.emplaceBack(Bt+1,Bt+2,Bt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Fe[0]),Ee!==l.length-1&&xt===l[Ee+1].sectionIndex||o.programConfigurations.populatePaintArrays(Y.length,x,x.index,{},U,_e&&_e[xt])}o.placedSymbolArray.emplaceBack(E.x,E.y,ue,this.glyphOffsetArray.length-ue,fe,A,L,E.segment,p?p[0]:0,p?p[1]:0,g[0],g[1],S,0,!1,0,$)}_addCollisionDebugVertex(o,l,p,g,_,x){return l.emplaceBack(0,0),o.emplaceBack(p.x,p.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(o,l,p,g,_,x,S){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),A=E.vertexLength,L=_.layoutVertexArray,$=_.collisionVertexArray,U=S.anchorX,H=S.anchorY;this._addCollisionDebugVertex(L,$,x,U,H,new k(o,l)),this._addCollisionDebugVertex(L,$,x,U,H,new k(p,l)),this._addCollisionDebugVertex(L,$,x,U,H,new k(p,g)),this._addCollisionDebugVertex(L,$,x,U,H,new k(o,g)),E.vertexLength+=4;const Y=_.indexArray;Y.emplaceBack(A,A+1),Y.emplaceBack(A+1,A+2),Y.emplaceBack(A+2,A+3),Y.emplaceBack(A+3,A),E.primitiveLength+=4}addDebugCollisionBoxes(o,l,p,g){for(let _=o;_<l;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new __(bo,YS.members,ei),this.iconCollisionBox=new __(bo,YS.members,ei);for(let o=0;o<this.symbolInstances.length;o++){const l=this.symbolInstances.get(o);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(o,l,p,g,_,x,S,E,A){const L={};for(let $=l;$<p;$++){const U=o.get($);L.textBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.textFeatureIndex=U.featureIndex;break}for(let $=g;$<_;$++){const U=o.get($);L.verticalTextBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalTextFeatureIndex=U.featureIndex;break}for(let $=x;$<S;$++){const U=o.get($);L.iconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.iconFeatureIndex=U.featureIndex;break}for(let $=E;$<A;$++){const U=o.get($);L.verticalIconBox={x1:U.x1,y1:U.y1,x2:U.x2,y2:U.y2,anchorPointX:U.anchorPointX,anchorPointY:U.anchorPointY},L.verticalIconFeatureIndex=U.featureIndex;break}return L}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(o,l){const p=o.placedSymbolArray.get(l),g=p.vertexStartIndex+4*p.numGlyphs;for(let _=p.vertexStartIndex;_<g;_+=4)o.indexArray.emplaceBack(_,_+1,_+2),o.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(o),p=Math.cos(o),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const E=this.symbolInstances.get(S);g.push(0|Math.round(l*E.anchorX+p*E.anchorY)),_.push(E.featureIndex)}return x.sort((S,E)=>g[S]-g[E]||_[E]-_[S]),x}addToSortKeyRanges(o,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mC,gC;mt("SymbolBucket",wh,{omit:["layers","collisionBoxArray","features","compareText"]}),wh.MAX_GLYPHS=65535,wh.addDynamicAttributes=y_;var x_={get paint(){return gC=gC||new v({"icon-opacity":new At(Se.paint_symbol["icon-opacity"]),"icon-color":new At(Se.paint_symbol["icon-color"]),"icon-halo-color":new At(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new At(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new At(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new At(Se.paint_symbol["text-opacity"]),"text-color":new At(Se.paint_symbol["text-color"],{runtimeType:cn,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new At(Se.paint_symbol["text-halo-color"]),"text-halo-width":new At(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new At(Se.paint_symbol["text-halo-blur"]),"text-translate":new vt(Se.paint_symbol["text-translate"]),"text-translate-anchor":new vt(Se.paint_symbol["text-translate-anchor"])})},get layout(){return mC=mC||new v({"symbol-placement":new vt(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new At(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new At(Se.layout_symbol["icon-size"]),"icon-text-fit":new vt(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new At(Se.layout_symbol["icon-image"]),"icon-rotate":new At(Se.layout_symbol["icon-rotate"]),"icon-padding":new At(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new At(Se.layout_symbol["icon-offset"]),"icon-anchor":new At(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(Se.layout_symbol["text-rotation-alignment"]),"text-field":new At(Se.layout_symbol["text-field"]),"text-font":new At(Se.layout_symbol["text-font"]),"text-size":new At(Se.layout_symbol["text-size"]),"text-max-width":new At(Se.layout_symbol["text-max-width"]),"text-line-height":new vt(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new At(Se.layout_symbol["text-letter-spacing"]),"text-justify":new At(Se.layout_symbol["text-justify"]),"text-radial-offset":new At(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new At(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new At(Se.layout_symbol["text-anchor"]),"text-max-angle":new vt(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(Se.layout_symbol["text-writing-mode"]),"text-rotate":new At(Se.layout_symbol["text-rotate"]),"text-padding":new vt(Se.layout_symbol["text-padding"]),"text-keep-upright":new vt(Se.layout_symbol["text-keep-upright"]),"text-transform":new At(Se.layout_symbol["text-transform"]),"text-offset":new At(Se.layout_symbol["text-offset"]),"text-allow-overlap":new vt(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(Se.layout_symbol["text-ignore-placement"]),"text-optional":new vt(Se.layout_symbol["text-optional"])})}};class yC{constructor(o){if(o.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=o.property.overrides?o.property.overrides.runtimeType:Lr,this.defaultValue=o}evaluate(o){if(o.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(o.formattedSection))return l.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mt("FormatSectionOverride",yC,{omit:["defaultValue"]});class qg extends h{constructor(o){super(o,x_)}recalculate(o,l){if(super.recalculate(o,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const g=[];for(const _ of p)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(o,l,p,g){const _=this.layout.get(o).evaluate(l,{},p,g),x=this._unevaluatedLayout._values[o];return x.isDataDriven()||Kc(x.value)||!_?_:function(S,E){return E.replace(/{([^{}]+)}/g,(A,L)=>S&&L in S?String(S[L]):"")}(l.properties,_)}createBucket(o){return new wh(o)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const o of x_.paint.overridableProperties){if(!qg.hasPaintOverride(this.layout,o))continue;const l=this.paint.get(o),p=new yC(l),g=new Zc(p,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new Cl("source",g):new kl("composite",g,l.value.zoomStops),this.paint._values[o]=new sa(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(o,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&qg.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,l){const p=o.get("text-field"),g=x_.paint.properties[l];let _=!1;const x=S=>{for(const E of S)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Ki)x(p.value.value.sections);else if(p.value.kind==="source"){const S=A=>{_||(A instanceof Ao&&Dr(A.value)===Mo?x(A.value.sections):A instanceof Bc?x(A.sections):A.eachChild(S))},E=p.value;E._styleExpression&&S(E._styleExpression.expression)}return _}}let vC;var XL={get paint(){return vC=vC||new v({"background-color":new vt(Se.paint_background["background-color"]),"background-pattern":new lh(Se.paint_background["background-pattern"]),"background-opacity":new vt(Se.paint_background["background-opacity"])})}};class YL extends h{constructor(o){super(o,XL)}}let _C;var JL={get paint(){return _C=_C||new v({"raster-opacity":new vt(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(Se.paint_raster["raster-saturation"]),"raster-contrast":new vt(Se.paint_raster["raster-contrast"]),"raster-resampling":new vt(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(Se.paint_raster["raster-fade-duration"])})}};class QL extends h{constructor(o){super(o,JL)}}class ez extends h{constructor(o){super(o,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=o}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class tz{constructor(o){this._methodToThrottle=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const b_=63710088e-1;class Vl{constructor(o,l){if(isNaN(o)||isNaN(l))throw new Error(`Invalid LngLat object: (${o}, ${l})`);if(this.lng=+o,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Vl(oe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const l=Math.PI/180,p=this.lat*l,g=o.lat*l,_=Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos((o.lng-this.lng)*l);return b_*Math.acos(Math.min(_,1))}static convert(o){if(o instanceof Vl)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new Vl(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new Vl(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xC=2*Math.PI*b_;function bC(s){return xC*Math.cos(s*Math.PI/180)}function wC(s){return(180+s)/360}function SC(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function CC(s,o){return s/bC(o)}function w_(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Hp{constructor(o,l,p=0){this.x=+o,this.y=+l,this.z=+p}static fromLngLat(o,l=0){const p=Vl.convert(o);return new Hp(wC(p.lng),SC(p.lat),CC(l,p.lat))}toLngLat(){return new Vl(360*this.x-180,w_(this.y))}toAltitude(){return this.z*bC(w_(this.y))}meterInMercatorCoordinateUnits(){return 1/xC*(o=w_(this.y),1/Math.cos(o*Math.PI/180));var o}}function kC(s,o,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[s*p-2*Math.PI*6378137/2,o*p-2*Math.PI*6378137/2]}class S_{constructor(o,l,p){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(o,l,p))throw new Error(`x=${l}, y=${p}, z=${o} outside of bounds. 0<=x<${Math.pow(2,o)}, 0<=y<${Math.pow(2,o)} 0<=z<=25 `);this.z=o,this.x=l,this.y=p,this.key=Gp(0,o,o,l,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,l,p){const g=(x=this.y,S=this.z,E=kC(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),A=kC(256*(_+1),256*(x+1),S),E[0]+","+E[1]+","+A[0]+","+A[1]);var _,x,S,E,A;const L=function($,U,H){let Y,J="";for(let ue=$;ue>0;ue--)Y=1<<ue-1,J+=(U&Y?1:0)+(H&Y?2:0);return J}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,g)}isChildOf(o){const l=this.z-o.z;return l>0&&o.x===this.x>>l&&o.y===this.y>>l}getTilePoint(o){const l=Math.pow(2,this.z);return new k((o.x*l-this.x)*$r,(o.y*l-this.y)*$r)}toString(){return`${this.z}/${this.x}/${this.y}`}}class EC{constructor(o,l){this.wrap=o,this.canonical=l,this.key=Gp(o,l.z,l.z,l.x,l.y)}}class Bo{constructor(o,l,p,g,_){if(o<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${o}; z = ${p}`);this.overscaledZ=o,this.wrap=l,this.canonical=new S_(p,+g,+_),this.key=Gp(l,o,p,g,_)}clone(){return new Bo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-o;return o>this.canonical.z?new Bo(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Bo(o,this.wrap,o,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(o,l){if(o>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${o}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-o;return o>this.canonical.z?Gp(this.wrap*+l,o,this.canonical.z,this.canonical.x,this.canonical.y):Gp(this.wrap*+l,o,o,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(o){if(o.wrap!==this.wrap)return!1;const l=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.x===this.canonical.x>>l&&o.canonical.y===this.canonical.y>>l}children(o){if(this.overscaledZ>=o)return[new Bo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,g=2*this.canonical.y;return[new Bo(l,this.wrap,l,p,g),new Bo(l,this.wrap,l,p+1,g),new Bo(l,this.wrap,l,p,g+1),new Bo(l,this.wrap,l,p+1,g+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Bo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Bo(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new EC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(o){return this.canonical.getTilePoint(new Hp(o.x-this.wrap,o.y))}}function Gp(s,o,l,p,g){(s*=2)<0&&(s=-1*s-1);const _=1<<l;return(_*_*s+_*g+p).toString(36)+l.toString(36)+o.toString(36)}mt("CanonicalTileID",S_),mt("OverscaledTileID",Bo,{omit:["posMatrix"]});class TC{constructor(o,l,p,g=1,_=1,x=1,S=0){if(this.uid=o,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void $e(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const E=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<E;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(E,A)]=this.data[this._idx(E-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,E)]=this.data[this._idx(A,E-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(E,-1)]=this.data[this._idx(E-1,0)],this.data[this._idx(-1,E)]=this.data[this._idx(0,E-1)],this.data[this._idx(E,E)]=this.data[this._idx(E-1,E-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<E;A++)for(let L=0;L<E;L++){const $=this.get(A,L);$>this.max&&(this.max=$),$<this.min&&(this.min=$)}}get(o,l){const p=new Uint8Array(this.data.buffer),g=4*this._idx(o,l);return this.unpack(p[g],p[g+1],p[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(o,l){if(o<-1||o>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(o+1)}unpack(o,l,p){return o*this.redFactor+l*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Fo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(o,l,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,_=l*this.dim+this.dim,x=p*this.dim,S=p*this.dim+this.dim;switch(l){case-1:g=_-1;break;case 1:_=g+1}switch(p){case-1:x=S-1;break;case 1:S=x+1}const E=-l*this.dim,A=-p*this.dim;for(let L=x;L<S;L++)for(let $=g;$<_;$++)this.data[this._idx($,L)]=o.data[this._idx($+E,L+A)]}}mt("DEMData",TC);class IC{constructor(o){this._stringToNumber={},this._numberToString=[];for(let l=0;l<o.length;l++){const p=o[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(o){return this._stringToNumber[o]}decode(o){if(o>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${o} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[o]}}class PC{constructor(o,l,p,g,_){this.type="Feature",this._vectorTileFeature=o,o._z=l,o._x=p,o._y=g,this.properties=o.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(o[l]=this[l]);return o}}class MC{constructor(o,l){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new Pl($r,16,0),this.grid3D=new Pl($r,16,0),this.featureIndexArray=new bi,this.promoteId=l}insert(o,l,p,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,g,_);const E=x?this.grid3D:this.grid;for(let A=0;A<l.length;A++){const L=l[A],$=[1/0,1/0,-1/0,-1/0];for(let U=0;U<L.length;U++){const H=L[U];$[0]=Math.min($[0],H.x),$[1]=Math.min($[1],H.y),$[2]=Math.max($[2],H.x),$[3]=Math.max($[3],H.y)}$[0]<$r&&$[1]<$r&&$[2]>=0&&$[3]>=0&&E.insert(S,$[0],$[1],$[2],$[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Nl.VectorTile(new h_(this.rawTileData)).layers,this.sourceLayerCoder=new IC(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(o,l,p,g){this.loadVTLayers();const _=o.params||{},x=$r/o.tileSize/o.scale,S=dp(_.filter),E=o.queryGeometry,A=o.queryPadding*x,L=LC(E),$=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),U=LC(o.cameraQueryGeometry),H=this.grid3D.query(U.minX-A,U.minY-A,U.maxX+A,U.maxY+A,(ue,fe,Te,_e)=>function(Ee,ze,We,ut,Pt){for(const tt of Ee)if(ze<=tt.x&&We<=tt.y&&ut>=tt.x&&Pt>=tt.y)return!0;const st=[new k(ze,We),new k(ze,Pt),new k(ut,Pt),new k(ut,We)];if(Ee.length>2){for(const tt of st)if(mh(Ee,tt))return!0}for(let tt=0;tt<Ee.length-1;tt++)if(D4(Ee[tt],Ee[tt+1],st))return!0;return!1}(o.cameraQueryGeometry,ue-A,fe-A,Te+A,_e+A));for(const ue of H)$.push(ue);$.sort(nz);const Y={};let J;for(let ue=0;ue<$.length;ue++){const fe=$[ue];if(fe===J)continue;J=fe;const Te=this.featureIndexArray.get(fe);let _e=null;this.loadMatchingFeature(Y,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,S,_.layers,_.availableImages,l,p,g,(Ee,ze,We)=>(_e||(_e=qu(Ee)),ze.queryIntersectsFeature(E,Ee,We,_e,this.z,o.transform,x,o.pixelPosMatrix)))}return Y}loadMatchingFeature(o,l,p,g,_,x,S,E,A,L,$){const U=this.bucketLayerIDs[l];if(x&&!function(ue,fe){for(let Te=0;Te<ue.length;Te++)if(fe.indexOf(ue[Te])>=0)return!0;return!1}(x,U))return;const H=this.sourceLayerCoder.decode(p),Y=this.vtLayers[H].feature(g);if(_.needGeometry){const ue=Hu(Y,!0);if(!_.filter(new Kn(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!_.filter(new Kn(this.tileID.overscaledZ),Y))return;const J=this.getId(Y,H);for(let ue=0;ue<U.length;ue++){const fe=U[ue];if(x&&x.indexOf(fe)<0)continue;const Te=E[fe];if(!Te)continue;let _e={};J&&L&&(_e=L.getState(Te.sourceLayer||"_geojsonTileLayer",J));const Ee=ae({},A[fe]);Ee.paint=AC(Ee.paint,Te.paint,Y,_e,S),Ee.layout=AC(Ee.layout,Te.layout,Y,_e,S);const ze=!$||$(Y,Te,_e);if(!ze)continue;const We=new PC(Y,this.z,this.x,this.y,J);We.layer=Ee;let ut=o[fe];ut===void 0&&(ut=o[fe]=[]),ut.push({featureIndex:g,feature:We,intersectionZ:ze})}}lookupSymbolFeatures(o,l,p,g,_,x,S,E){const A={};this.loadVTLayers();const L=dp(_);for(const $ of o)this.loadMatchingFeature(A,p,g,$,L,x,S,E,l);return A}hasLayer(o){for(const l of this.bucketLayerIDs)for(const p of l)if(o===p)return!0;return!1}getId(o,l){let p=o.id;return this.promoteId&&(p=o.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof p=="boolean"&&(p=Number(p))),p}}function AC(s,o,l,p,g){return Me(s,(_,x)=>{const S=o instanceof ju?o.get(x):null;return S&&S.evaluate?S.evaluate(l,p,g):S})}function LC(s){let o=1/0,l=1/0,p=-1/0,g=-1/0;for(const _ of s)o=Math.min(o,_.x),l=Math.min(l,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return{minX:o,minY:l,maxX:p,maxY:g}}function nz(s,o){return o-s}function zC(s,o,l,p,g){const _=[];for(let x=0;x<s.length;x++){const S=s[x];let E;for(let A=0;A<S.length-1;A++){let L=S[A],$=S[A+1];L.x<o&&$.x<o||(L.x<o?L=new k(o,L.y+(o-L.x)/($.x-L.x)*($.y-L.y))._round():$.x<o&&($=new k(o,L.y+(o-L.x)/($.x-L.x)*($.y-L.y))._round()),L.y<l&&$.y<l||(L.y<l?L=new k(L.x+(l-L.y)/($.y-L.y)*($.x-L.x),l)._round():$.y<l&&($=new k(L.x+(l-L.y)/($.y-L.y)*($.x-L.x),l)._round()),L.x>=p&&$.x>=p||(L.x>=p?L=new k(p,L.y+(p-L.x)/($.x-L.x)*($.y-L.y))._round():$.x>=p&&($=new k(p,L.y+(p-L.x)/($.x-L.x)*($.y-L.y))._round()),L.y>=g&&$.y>=g||(L.y>=g?L=new k(L.x+(g-L.y)/($.y-L.y)*($.x-L.x),g)._round():$.y>=g&&($=new k(L.x+(g-L.y)/($.y-L.y)*($.x-L.x),g)._round()),E&&L.equals(E[E.length-1])||(E=[L],_.push(E)),E.push($)))))}}return _}mt("FeatureIndex",MC,{omit:["rawTileData","sourceLayerCoder"]});class Wl extends k{constructor(o,l,p,g){super(o,l),this.angle=p,g!==void 0&&(this.segment=g)}clone(){return new Wl(this.x,this.y,this.angle,this.segment)}}function RC(s,o,l,p,g){if(o.segment===void 0||l===0)return!0;let _=o,x=o.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=s[x].dist(_),_=s[x]}S+=s[x].dist(s[x+1]),x++;const E=[];let A=0;for(;S<l/2;){const L=s[x],$=s[x+1];if(!$)return!1;let U=s[x-1].angleTo(L)-L.angleTo($);for(U=Math.abs((U+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:S,angleDelta:U}),A+=U;S-E[0].distance>p;)A-=E.shift().angleDelta;if(A>g)return!1;x++,S+=L.dist($)}return!0}function DC(s){let o=0;for(let l=0;l<s.length-1;l++)o+=s[l].dist(s[l+1]);return o}function $C(s,o,l){return s?.6*o*l:0}function OC(s,o){return Math.max(s?s.right-s.left:0,o?o.right-o.left:0)}function rz(s,o,l,p,g,_){const x=$C(l,g,_),S=OC(l,p)*_;let E=0;const A=DC(s)/2;for(let L=0;L<s.length-1;L++){const $=s[L],U=s[L+1],H=$.dist(U);if(E+H>A){const Y=(A-E)/H,J=Li.number($.x,U.x,Y),ue=Li.number($.y,U.y,Y),fe=new Wl(J,ue,U.angleTo($),L);return fe._round(),!x||RC(s,fe,S,x,o)?fe:void 0}E+=H}}function iz(s,o,l,p,g,_,x,S,E){const A=$C(p,_,x),L=OC(p,g),$=L*x,U=s[0].x===0||s[0].x===E||s[0].y===0||s[0].y===E;return o-$<o/4&&(o=$+o/4),FC(s,U?o/2*S%o:(L/2+2*_)*x*S%o,o,A,l,$,U,!1,E)}function FC(s,o,l,p,g,_,x,S,E){const A=_/2,L=DC(s);let $=0,U=o-l,H=[];for(let Y=0;Y<s.length-1;Y++){const J=s[Y],ue=s[Y+1],fe=J.dist(ue),Te=ue.angleTo(J);for(;U+l<$+fe;){U+=l;const _e=(U-$)/fe,Ee=Li.number(J.x,ue.x,_e),ze=Li.number(J.y,ue.y,_e);if(Ee>=0&&Ee<E&&ze>=0&&ze<E&&U-A>=0&&U+A<=L){const We=new Wl(Ee,ze,Te,Y);We._round(),p&&!RC(s,We,_,p,g)||H.push(We)}}$+=fe}return S||H.length||x||(H=FC(s,$/2,l,p,g,_,x,!0,E)),H}mt("Anchor",Wl);const Sh=to;function BC(s,o,l,p){const g=[],_=s.image,x=_.pixelRatio,S=_.paddedRect.w-2*Sh,E=_.paddedRect.h-2*Sh;let A={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const L=_.stretchX||[[0,S]],$=_.stretchY||[[0,E]],U=(Fe,kt)=>Fe+kt[1]-kt[0],H=L.reduce(U,0),Y=$.reduce(U,0),J=S-H,ue=E-Y;let fe=0,Te=H,_e=0,Ee=Y,ze=0,We=J,ut=0,Pt=ue;if(_.content&&p){const Fe=_.content,kt=Fe[2]-Fe[0],xt=Fe[3]-Fe[1];(_.textFitWidth||_.textFitHeight)&&(A=dC(s)),fe=Hg(L,0,Fe[0]),_e=Hg($,0,Fe[1]),Te=Hg(L,Fe[0],Fe[2]),Ee=Hg($,Fe[1],Fe[3]),ze=Fe[0]-fe,ut=Fe[1]-_e,We=kt-Te,Pt=xt-Ee}const st=A.x1,tt=A.y1,wt=A.x2-st,gt=A.y2-tt,dt=(Fe,kt,xt,Bt)=>{const Un=Gg(Fe.stretch-fe,Te,wt,st),Rn=Zg(Fe.fixed-ze,We,Fe.stretch,H),Gr=Gg(kt.stretch-_e,Ee,gt,tt),ua=Zg(kt.fixed-ut,Pt,kt.stretch,Y),di=Gg(xt.stretch-fe,Te,wt,st),Zr=Zg(xt.fixed-ze,We,xt.stretch,H),$i=Gg(Bt.stretch-_e,Ee,gt,tt),Oi=Zg(Bt.fixed-ut,Pt,Bt.stretch,Y),Fi=new k(Un,Gr),br=new k(di,Gr),Kr=new k(di,$i),Si=new k(Un,$i),pi=new k(Rn/x,ua/x),Bi=new k(Zr/x,Oi/x),fi=o*Math.PI/180;if(fi){const vn=Math.sin(fi),Wn=Math.cos(fi),Qn=[Wn,-vn,vn,Wn];Fi._matMult(Qn),br._matMult(Qn),Si._matMult(Qn),Kr._matMult(Qn)}const No=Fe.stretch+Fe.fixed,no=kt.stretch+kt.fixed;return{tl:Fi,tr:br,bl:Si,br:Kr,tex:{x:_.paddedRect.x+Sh+No,y:_.paddedRect.y+Sh+no,w:xt.stretch+xt.fixed-No,h:Bt.stretch+Bt.fixed-no},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:pi,pixelOffsetBR:Bi,minFontScaleX:We/x/wt,minFontScaleY:Pt/x/gt,isSDF:l}};if(p&&(_.stretchX||_.stretchY)){const Fe=NC(L,J,H),kt=NC($,ue,Y);for(let xt=0;xt<Fe.length-1;xt++){const Bt=Fe[xt],Un=Fe[xt+1];for(let Rn=0;Rn<kt.length-1;Rn++)g.push(dt(Bt,kt[Rn],Un,kt[Rn+1]))}}else g.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:E+1}));return g}function Hg(s,o,l){let p=0;for(const g of s)p+=Math.max(o,Math.min(l,g[1]))-Math.max(o,Math.min(l,g[0]));return p}function NC(s,o,l){const p=[{fixed:-Sh,stretch:0}];for(const[g,_]of s){const x=p[p.length-1];p.push({fixed:g-x.stretch,stretch:x.stretch}),p.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return p.push({fixed:o+Sh,stretch:l}),p}function Gg(s,o,l,p){return s/o*l+p}function Zg(s,o,l,p){return s-o*l/p}class Kg{constructor(o,l,p,g,_,x,S,E,A,L){var $;if(this.boxStartIndex=o.length,A){let U=x.top,H=x.bottom;const Y=x.collisionPadding;Y&&(U-=Y[1],H+=Y[3]);let J=H-U;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const U=!(($=x.image)===null||$===void 0)&&$.content&&(x.image.textFitWidth||x.image.textFitHeight)?dC(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};U.y1=U.y1*S-E[0],U.y2=U.y2*S+E[2],U.x1=U.x1*S-E[3],U.x2=U.x2*S+E[1];const H=x.collisionPadding;if(H&&(U.x1-=H[0]*S,U.y1-=H[1]*S,U.x2+=H[2]*S,U.y2+=H[3]*S),L){const Y=new k(U.x1,U.y1),J=new k(U.x2,U.y1),ue=new k(U.x1,U.y2),fe=new k(U.x2,U.y2),Te=L*Math.PI/180;Y._rotate(Te),J._rotate(Te),ue._rotate(Te),fe._rotate(Te),U.x1=Math.min(Y.x,J.x,ue.x,fe.x),U.x2=Math.max(Y.x,J.x,ue.x,fe.x),U.y1=Math.min(Y.y,J.y,ue.y,fe.y),U.y2=Math.max(Y.y,J.y,ue.y,fe.y)}o.emplaceBack(l.x,l.y,U.x1,U.y1,U.x2,U.y2,p,g,_)}this.boxEndIndex=o.length}}class oz{constructor(o=[],l=(p,g)=>p<g?-1:p>g?1:0){if(this.data=o,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:l,compare:p}=this,g=l[o];for(;o>0;){const _=o-1>>1,x=l[_];if(p(g,x)>=0)break;l[o]=x,o=_}l[o]=g}_down(o){const{data:l,compare:p}=this,g=this.length>>1,_=l[o];for(;o<g;){let x=1+(o<<1);const S=x+1;if(S<this.length&&p(l[S],l[x])<0&&(x=S),p(l[x],_)>=0)break;l[o]=l[x],o=x}l[o]=_}}function az(s,o=1,l=!1){let p=1/0,g=1/0,_=-1/0,x=-1/0;const S=s[0];for(let H=0;H<S.length;H++){const Y=S[H];(!H||Y.x<p)&&(p=Y.x),(!H||Y.y<g)&&(g=Y.y),(!H||Y.x>_)&&(_=Y.x),(!H||Y.y>x)&&(x=Y.y)}const E=Math.min(_-p,x-g);let A=E/2;const L=new oz([],sz);if(E===0)return new k(p,g);for(let H=p;H<_;H+=E)for(let Y=g;Y<x;Y+=E)L.push(new Ch(H+A,Y+A,A,s));let $=function(H){let Y=0,J=0,ue=0;const fe=H[0];for(let Te=0,_e=fe.length,Ee=_e-1;Te<_e;Ee=Te++){const ze=fe[Te],We=fe[Ee],ut=ze.x*We.y-We.x*ze.y;J+=(ze.x+We.x)*ut,ue+=(ze.y+We.y)*ut,Y+=3*ut}return new Ch(J/Y,ue/Y,0,H)}(s),U=L.length;for(;L.length;){const H=L.pop();(H.d>$.d||!$.d)&&($=H,l&&console.log("found best %d after %d probes",Math.round(1e4*H.d)/1e4,U)),H.max-$.d<=o||(A=H.h/2,L.push(new Ch(H.p.x-A,H.p.y-A,A,s)),L.push(new Ch(H.p.x+A,H.p.y-A,A,s)),L.push(new Ch(H.p.x-A,H.p.y+A,A,s)),L.push(new Ch(H.p.x+A,H.p.y+A,A,s)),U+=4)}return l&&(console.log(`num probes: ${U}`),console.log(`best distance: ${$.d}`)),$.p}function sz(s,o){return o.max-s.max}function Ch(s,o,l,p){this.p=new k(s,o),this.h=l,this.d=function(g,_){let x=!1,S=1/0;for(let E=0;E<_.length;E++){const A=_[E];for(let L=0,$=A.length,U=$-1;L<$;U=L++){const H=A[L],Y=A[U];H.y>g.y!=Y.y>g.y&&g.x<(Y.x-H.x)*(g.y-H.y)/(Y.y-H.y)+H.x&&(x=!x),S=Math.min(S,SS(g,H,Y))}}return(x?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var hi;d.aq=void 0,(hi=d.aq||(d.aq={}))[hi.center=1]="center",hi[hi.left=2]="left",hi[hi.right=3]="right",hi[hi.top=4]="top",hi[hi.bottom=5]="bottom",hi[hi["top-left"]=6]="top-left",hi[hi["top-right"]=7]="top-right",hi[hi["bottom-left"]=8]="bottom-left",hi[hi["bottom-right"]=9]="bottom-right";const ql=7,C_=Number.POSITIVE_INFINITY;function jC(s,o){return o[1]!==C_?function(l,p,g){let _=0,x=0;switch(p=Math.abs(p),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-ql;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+ql}switch(l){case"top-right":case"bottom-right":case"right":_=-p;break;case"top-left":case"bottom-left":case"left":_=p}return[_,x]}(s,o[0],o[1]):function(l,p){let g=0,_=0;p<0&&(p=0);const x=p/Math.SQRT2;switch(l){case"top-right":case"top-left":_=x-ql;break;case"bottom-right":case"bottom-left":_=-x+ql;break;case"bottom":_=-p+ql;break;case"top":_=p-ql}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=p;break;case"right":g=-p}return[g,_]}(s,o[0])}function UC(s,o,l){var p;const g=s.layout,_=(p=g.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(o,{},l);if(_){const S=_.values,E=[];for(let A=0;A<S.length;A+=2){const L=E[A]=S[A],$=S[A+1].map(U=>U*jr);L.startsWith("top")?$[1]-=ql:L.startsWith("bottom")&&($[1]+=ql),E[A+1]=$}return new mo(E)}const x=g.get("text-variable-anchor");if(x){let S;S=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(o,{},l)*jr,C_]:g.get("text-offset").evaluate(o,{},l).map(A=>A*jr);const E=[];for(const A of x)E.push(A,jC(A,S));return new mo(E)}return null}function k_(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function lz(s,o,l,p,g,_,x,S,E,A,L){let $=_.textMaxSize.evaluate(o,{});$===void 0&&($=x);const U=s.layers[0].layout,H=U.get("icon-offset").evaluate(o,{},L),Y=WC(l.horizontal),J=x/24,ue=s.tilePixelRatio*J,fe=s.tilePixelRatio*$/24,Te=s.tilePixelRatio*S,_e=s.tilePixelRatio*U.get("symbol-spacing"),Ee=U.get("text-padding")*s.tilePixelRatio,ze=function(Fe,kt,xt,Bt=1){const Un=Fe.get("icon-padding").evaluate(kt,{},xt),Rn=Un&&Un.values;return[Rn[0]*Bt,Rn[1]*Bt,Rn[2]*Bt,Rn[3]*Bt]}(U,o,L,s.tilePixelRatio),We=U.get("text-max-angle")/180*Math.PI,ut=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",Pt=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",st=U.get("symbol-placement"),tt=_e/2,wt=U.get("icon-text-fit");let gt;p&&wt!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(gt=pC(p,l.vertical,wt,U.get("icon-text-fit-padding"),H,J)),Y&&(p=pC(p,Y,wt,U.get("icon-text-fit-padding"),H,J)));const dt=(Fe,kt)=>{kt.x<0||kt.x>=$r||kt.y<0||kt.y>=$r||function(xt,Bt,Un,Rn,Gr,ua,di,Zr,$i,Oi,Fi,br,Kr,Si,pi,Bi,fi,No,no,vn,Wn,Qn,wo,dr,kh){const is=xt.addToLineVertexArray(Bt,Un);let os,ca,jo,ti,Vs=0,Xp=0,ZC=0,KC=0,z_=-1,R_=-1;const Ws={};let XC=hh("");if(xt.allowVerticalPlacement&&Rn.vertical){const Ci=Zr.layout.get("text-rotate").evaluate(Wn,{},dr)+90;jo=new Kg($i,Bt,Oi,Fi,br,Rn.vertical,Kr,Si,pi,Ci),di&&(ti=new Kg($i,Bt,Oi,Fi,br,di,fi,No,pi,Ci))}if(Gr){const Ci=Zr.layout.get("icon-rotate").evaluate(Wn,{}),Uo=Zr.layout.get("icon-text-fit")!=="none",Zu=BC(Gr,Ci,wo,Uo),$a=di?BC(di,Ci,wo,Uo):void 0;ca=new Kg($i,Bt,Oi,Fi,br,Gr,fi,No,!1,Ci),Vs=4*Zu.length;const Ku=xt.iconSizeData;let as=null;Ku.kind==="source"?(as=[rs*Zr.layout.get("icon-size").evaluate(Wn,{})],as[0]>Ul&&$e(`${xt.layerIds[0]}: Value for "icon-size" is >= ${qp}. Reduce your "icon-size".`)):Ku.kind==="composite"&&(as=[rs*Qn.compositeIconSizes[0].evaluate(Wn,{},dr),rs*Qn.compositeIconSizes[1].evaluate(Wn,{},dr)],(as[0]>Ul||as[1]>Ul)&&$e(`${xt.layerIds[0]}: Value for "icon-size" is >= ${qp}. Reduce your "icon-size".`)),xt.addSymbols(xt.icon,Zu,as,vn,no,Wn,d.ah.none,Bt,is.lineStartIndex,is.lineLength,-1,dr),z_=xt.icon.placedSymbolArray.length-1,$a&&(Xp=4*$a.length,xt.addSymbols(xt.icon,$a,as,vn,no,Wn,d.ah.vertical,Bt,is.lineStartIndex,is.lineLength,-1,dr),R_=xt.icon.placedSymbolArray.length-1)}const YC=Object.keys(Rn.horizontal);for(const Ci of YC){const Uo=Rn.horizontal[Ci];if(!os){XC=hh(Uo.text);const $a=Zr.layout.get("text-rotate").evaluate(Wn,{},dr);os=new Kg($i,Bt,Oi,Fi,br,Uo,Kr,Si,pi,$a)}const Zu=Uo.positionedLines.length===1;if(ZC+=VC(xt,Bt,Uo,ua,Zr,pi,Wn,Bi,is,Rn.vertical?d.ah.horizontal:d.ah.horizontalOnly,Zu?YC:[Ci],Ws,z_,Qn,dr),Zu)break}Rn.vertical&&(KC+=VC(xt,Bt,Rn.vertical,ua,Zr,pi,Wn,Bi,is,d.ah.vertical,["vertical"],Ws,R_,Qn,dr));const hz=os?os.boxStartIndex:xt.collisionBoxArray.length,dz=os?os.boxEndIndex:xt.collisionBoxArray.length,pz=jo?jo.boxStartIndex:xt.collisionBoxArray.length,fz=jo?jo.boxEndIndex:xt.collisionBoxArray.length,mz=ca?ca.boxStartIndex:xt.collisionBoxArray.length,gz=ca?ca.boxEndIndex:xt.collisionBoxArray.length,yz=ti?ti.boxStartIndex:xt.collisionBoxArray.length,vz=ti?ti.boxEndIndex:xt.collisionBoxArray.length;let Da=-1;const Yg=(Ci,Uo)=>Ci&&Ci.circleDiameter?Math.max(Ci.circleDiameter,Uo):Uo;Da=Yg(os,Da),Da=Yg(jo,Da),Da=Yg(ca,Da),Da=Yg(ti,Da);const JC=Da>-1?1:0;JC&&(Da*=kh/jr),xt.glyphOffsetArray.length>=wh.MAX_GLYPHS&&$e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Wn.sortKey!==void 0&&xt.addToSortKeyRanges(xt.symbolInstances.length,Wn.sortKey);const _z=UC(Zr,Wn,dr),[xz,bz]=function(Ci,Uo){const Zu=Ci.length,$a=Uo==null?void 0:Uo.values;if(($a==null?void 0:$a.length)>0)for(let Ku=0;Ku<$a.length;Ku+=2){const as=$a[Ku+1];Ci.emplaceBack(d.aq[$a[Ku]],as[0],as[1])}return[Zu,Ci.length]}(xt.textAnchorOffsets,_z);xt.symbolInstances.emplaceBack(Bt.x,Bt.y,Ws.right>=0?Ws.right:-1,Ws.center>=0?Ws.center:-1,Ws.left>=0?Ws.left:-1,Ws.vertical||-1,z_,R_,XC,hz,dz,pz,fz,mz,gz,yz,vz,Oi,ZC,KC,Vs,Xp,JC,0,Kr,Da,xz,bz)}(s,kt,Fe,l,p,g,gt,s.layers[0],s.collisionBoxArray,o.index,o.sourceLayerIndex,s.index,ue,[Ee,Ee,Ee,Ee],ut,E,Te,ze,Pt,H,o,_,A,L,x)};if(st==="line")for(const Fe of zC(o.geometry,0,0,$r,$r)){const kt=iz(Fe,_e,We,l.vertical||Y,p,24,fe,s.overscaling,$r);for(const xt of kt)Y&&uz(s,Y.text,tt,xt)||dt(Fe,xt)}else if(st==="line-center"){for(const Fe of o.geometry)if(Fe.length>1){const kt=rz(Fe,We,l.vertical||Y,p,24,fe);kt&&dt(Fe,kt)}}else if(o.type==="Polygon")for(const Fe of jc(o.geometry,0)){const kt=az(Fe,16);dt(Fe[0],new Wl(kt.x,kt.y,0))}else if(o.type==="LineString")for(const Fe of o.geometry)dt(Fe,new Wl(Fe[0].x,Fe[0].y,0));else if(o.type==="Point")for(const Fe of o.geometry)for(const kt of Fe)dt([kt],new Wl(kt.x,kt.y,0))}function VC(s,o,l,p,g,_,x,S,E,A,L,$,U,H,Y){const J=function(Te,_e,Ee,ze,We,ut,Pt,st){const tt=ze.layout.get("text-rotate").evaluate(ut,{})*Math.PI/180,wt=[];for(const gt of _e.positionedLines)for(const dt of gt.positionedGlyphs){if(!dt.rect)continue;const Fe=dt.rect||{};let kt=oC+1,xt=!0,Bt=1,Un=0;const Rn=(We||st)&&dt.vertical,Gr=dt.metrics.advance*dt.scale/2;if(st&&_e.verticalizable&&(Un=gt.lineOffset/2-(dt.imageName?-(jr-dt.metrics.width*dt.scale)/2:(dt.scale-1)*jr)),dt.imageName){const vn=Pt[dt.imageName];xt=vn.sdf,Bt=vn.pixelRatio,kt=to/Bt}const ua=We?[dt.x+Gr,dt.y]:[0,0];let di=We?[0,0]:[dt.x+Gr+Ee[0],dt.y+Ee[1]-Un],Zr=[0,0];Rn&&(Zr=di,di=[0,0]);const $i=dt.metrics.isDoubleResolution?2:1,Oi=(dt.metrics.left-kt)*dt.scale-Gr+di[0],Fi=(-dt.metrics.top-kt)*dt.scale+di[1],br=Oi+Fe.w/$i*dt.scale/Bt,Kr=Fi+Fe.h/$i*dt.scale/Bt,Si=new k(Oi,Fi),pi=new k(br,Fi),Bi=new k(Oi,Kr),fi=new k(br,Kr);if(Rn){const vn=new k(-Gr,Gr-Vp),Wn=-Math.PI/2,Qn=jr/2-Gr,wo=new k(5-Vp-Qn,-(dt.imageName?Qn:0)),dr=new k(...Zr);Si._rotateAround(Wn,vn)._add(wo)._add(dr),pi._rotateAround(Wn,vn)._add(wo)._add(dr),Bi._rotateAround(Wn,vn)._add(wo)._add(dr),fi._rotateAround(Wn,vn)._add(wo)._add(dr)}if(tt){const vn=Math.sin(tt),Wn=Math.cos(tt),Qn=[Wn,-vn,vn,Wn];Si._matMult(Qn),pi._matMult(Qn),Bi._matMult(Qn),fi._matMult(Qn)}const No=new k(0,0),no=new k(0,0);wt.push({tl:Si,tr:pi,bl:Bi,br:fi,tex:Fe,writingMode:_e.writingMode,glyphOffset:ua,sectionIndex:dt.sectionIndex,isSDF:xt,pixelOffsetTL:No,pixelOffsetBR:no,minFontScaleX:0,minFontScaleY:0})}return wt}(0,l,S,g,_,x,p,s.allowVerticalPlacement),ue=s.textSizeData;let fe=null;ue.kind==="source"?(fe=[rs*g.layout.get("text-size").evaluate(x,{})],fe[0]>Ul&&$e(`${s.layerIds[0]}: Value for "text-size" is >= ${qp}. Reduce your "text-size".`)):ue.kind==="composite"&&(fe=[rs*H.compositeTextSizes[0].evaluate(x,{},Y),rs*H.compositeTextSizes[1].evaluate(x,{},Y)],(fe[0]>Ul||fe[1]>Ul)&&$e(`${s.layerIds[0]}: Value for "text-size" is >= ${qp}. Reduce your "text-size".`)),s.addSymbols(s.text,J,fe,S,_,x,A,o,E.lineStartIndex,E.lineLength,U,Y);for(const Te of L)$[Te]=s.text.placedSymbolArray.length-1;return 4*J.length}function WC(s){for(const o in s)return s[o];return null}function uz(s,o,l,p){const g=s.compareText;if(o in g){const _=g[o];for(let x=_.length-1;x>=0;x--)if(p.dist(_[x])<l)return!0}else g[o]=[];return g[o].push(p),!1}const qC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class E_{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(o,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=p>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=qC[15&p];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(o,2,1),[S]=new Uint32Array(o,4,1);return new E_(S,x,_,o)}constructor(o,l=64,p=Float64Array,g){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const _=qC.indexOf(this.ArrayType),x=2*o*this.ArrayType.BYTES_PER_ELEMENT,S=o*this.IndexArrayType.BYTES_PER_ELEMENT,E=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${p}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+E),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+S+E,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=o)}add(o,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=l,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return T_(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,l,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,E=[0,_.length-1,0],A=[];for(;E.length;){const L=E.pop()||0,$=E.pop()||0,U=E.pop()||0;if($-U<=S){for(let ue=U;ue<=$;ue++){const fe=x[2*ue],Te=x[2*ue+1];fe>=o&&fe<=p&&Te>=l&&Te<=g&&A.push(_[ue])}continue}const H=U+$>>1,Y=x[2*H],J=x[2*H+1];Y>=o&&Y<=p&&J>=l&&J<=g&&A.push(_[H]),(L===0?o<=Y:l<=J)&&(E.push(U),E.push(H-1),E.push(1-L)),(L===0?p>=Y:g>=J)&&(E.push(H+1),E.push($),E.push(1-L))}return A}within(o,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],E=[],A=p*p;for(;S.length;){const L=S.pop()||0,$=S.pop()||0,U=S.pop()||0;if($-U<=x){for(let ue=U;ue<=$;ue++)GC(_[2*ue],_[2*ue+1],o,l)<=A&&E.push(g[ue]);continue}const H=U+$>>1,Y=_[2*H],J=_[2*H+1];GC(Y,J,o,l)<=A&&E.push(g[H]),(L===0?o-p<=Y:l-p<=J)&&(S.push(U),S.push(H-1),S.push(1-L)),(L===0?o+p>=Y:l+p>=J)&&(S.push(H+1),S.push($),S.push(1-L))}return E}}function T_(s,o,l,p,g,_){if(g-p<=l)return;const x=p+g>>1;HC(s,o,x,p,g,_),T_(s,o,l,p,x-1,1-_),T_(s,o,l,x+1,g,1-_)}function HC(s,o,l,p,g,_){for(;g>p;){if(g-p>600){const A=g-p+1,L=l-p+1,$=Math.log(A),U=.5*Math.exp(2*$/3),H=.5*Math.sqrt($*U*(A-U)/A)*(L-A/2<0?-1:1);HC(s,o,l,Math.max(p,Math.floor(l-L*U/A+H)),Math.min(g,Math.floor(l+(A-L)*U/A+H)),_)}const x=o[2*l+_];let S=p,E=g;for(Zp(s,o,p,l),o[2*g+_]>x&&Zp(s,o,p,g);S<E;){for(Zp(s,o,S,E),S++,E--;o[2*S+_]<x;)S++;for(;o[2*E+_]>x;)E--}o[2*p+_]===x?Zp(s,o,p,E):(E++,Zp(s,o,E,g)),E<=l&&(p=E+1),l<=E&&(g=E-1)}}function Zp(s,o,l,p){I_(s,l,p),I_(o,2*l,2*p),I_(o,2*l+1,2*p+1)}function I_(s,o,l){const p=s[o];s[o]=s[l],s[l]=p}function GC(s,o,l,p){const g=s-l,_=o-p;return g*g+_*_}var P_;d.bg=void 0,(P_=d.bg||(d.bg={})).create="create",P_.load="load",P_.fullLoad="fullLoad";let Xg=null,Kp=[];const M_=1e3/60,A_="loadTime",L_="fullLoadTime",cz={mark(s){performance.mark(s)},frame(s){const o=s;Xg!=null&&Kp.push(o-Xg),Xg=o},clearMetrics(){Xg=null,Kp=[],performance.clearMeasures(A_),performance.clearMeasures(L_);for(const s in d.bg)performance.clearMarks(d.bg[s])},getPerformanceMetrics(){performance.measure(A_,d.bg.create,d.bg.load),performance.measure(L_,d.bg.create,d.bg.fullLoad);const s=performance.getEntriesByName(A_)[0].duration,o=performance.getEntriesByName(L_)[0].duration,l=Kp.length,p=1/(Kp.reduce((_,x)=>_+x,0)/l/1e3),g=Kp.filter(_=>_>M_).reduce((_,x)=>_+(x-M_)/M_,0);return{loadTime:s,fullLoadTime:o,fps:p,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=class extends O{},d.A=gh,d.B=N1,d.C=function(s){if(He==null){const o=s.navigator?s.navigator.userAgent:null;He=!!s.safari||!(!o||!(/\b(iPad|iPhone|iPod)\b/.test(o)||o.match("Safari")&&!o.match("Chrome")))}return He},d.D=vt,d.E=Rt,d.F=class{constructor(s,o){this.target=s,this.mapId=o,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new tz(()=>this.process()),this.subscription=function(l,p,g,_){return l.addEventListener(p,g,!1),{unsubscribe:()=>{l.removeEventListener(p,g,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=Oe(self)?s:window}registerMessageHandler(s,o){this.messageHandlers[s]=o}sendAsync(s,o){return new Promise((l,p)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:l,reject:p},o&&o.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Ml(s.data,_)});this.target.postMessage(x,{transfer:_})})}receive(s){const o=s.data,l=o.id;if(!(o.origin!=="file://"&&location.origin!=="file://"&&o.origin!=="resource://android"&&location.origin!=="resource://android"&&o.origin!==location.origin||o.targetMapId&&this.mapId!==o.targetMapId)){if(o.type==="<cancel>"){delete this.tasks[l];const p=this.abortControllers[l];return delete this.abortControllers[l],void(p&&p.abort())}if(Oe(self)||o.mustQueue)return this.tasks[l]=o,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,o)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),o=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),o&&this.processTask(s,o)}processTask(s,o){return u(this,void 0,void 0,function*(){if(o.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(o.error?g.reject(Al(o.error)):g.resolve(Al(o.data))):void 0}if(!this.messageHandlers[o.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${o.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=Al(o.data),p=new AbortController;this.abortControllers[s]=p;try{const g=yield this.messageHandlers[o.type](o.sourceMapId,l,p);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,o,l){const p=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:o?Ml(o):null,data:Ml(l,p)};this.target.postMessage(g,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=dn,d.H=function(){var s=new gh(16);return gh!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},d.I=p_,d.J=function(s,o,l){var p,g,_,x,S,E,A,L,$,U,H,Y,J=l[0],ue=l[1],fe=l[2];return o===s?(s[12]=o[0]*J+o[4]*ue+o[8]*fe+o[12],s[13]=o[1]*J+o[5]*ue+o[9]*fe+o[13],s[14]=o[2]*J+o[6]*ue+o[10]*fe+o[14],s[15]=o[3]*J+o[7]*ue+o[11]*fe+o[15]):(g=o[1],_=o[2],x=o[3],S=o[4],E=o[5],A=o[6],L=o[7],$=o[8],U=o[9],H=o[10],Y=o[11],s[0]=p=o[0],s[1]=g,s[2]=_,s[3]=x,s[4]=S,s[5]=E,s[6]=A,s[7]=L,s[8]=$,s[9]=U,s[10]=H,s[11]=Y,s[12]=p*J+S*ue+$*fe+o[12],s[13]=g*J+E*ue+U*fe+o[13],s[14]=_*J+A*ue+H*fe+o[14],s[15]=x*J+L*ue+Y*fe+o[15]),s},d.K=function(s,o,l){var p=l[0],g=l[1],_=l[2];return s[0]=o[0]*p,s[1]=o[1]*p,s[2]=o[2]*p,s[3]=o[3]*p,s[4]=o[4]*g,s[5]=o[5]*g,s[6]=o[6]*g,s[7]=o[7]*g,s[8]=o[8]*_,s[9]=o[9]*_,s[10]=o[10]*_,s[11]=o[11]*_,s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},d.L=TS,d.M=function(s,o){const l={};for(let p=0;p<o.length;p++){const g=o[p];g in s&&(l[g]=s[g])}return l},d.N=Vl,d.O=wC,d.P=k,d.Q=SC,d.R=Fo,d.S=Bo,d.T=ah,d.U=D,d.V=B,d.W=qe,d.X=$r,d.Y=C,d.Z=Hp,d._=u,d.a=zt,d.a$=function(s,o){var l=s[0],p=s[1],g=s[2],_=s[3],x=s[4],S=s[5],E=s[6],A=s[7],L=s[8],$=s[9],U=s[10],H=s[11],Y=s[12],J=s[13],ue=s[14],fe=s[15],Te=o[0],_e=o[1],Ee=o[2],ze=o[3],We=o[4],ut=o[5],Pt=o[6],st=o[7],tt=o[8],wt=o[9],gt=o[10],dt=o[11],Fe=o[12],kt=o[13],xt=o[14],Bt=o[15];return Math.abs(l-Te)<=Di*Math.max(1,Math.abs(l),Math.abs(Te))&&Math.abs(p-_e)<=Di*Math.max(1,Math.abs(p),Math.abs(_e))&&Math.abs(g-Ee)<=Di*Math.max(1,Math.abs(g),Math.abs(Ee))&&Math.abs(_-ze)<=Di*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(x-We)<=Di*Math.max(1,Math.abs(x),Math.abs(We))&&Math.abs(S-ut)<=Di*Math.max(1,Math.abs(S),Math.abs(ut))&&Math.abs(E-Pt)<=Di*Math.max(1,Math.abs(E),Math.abs(Pt))&&Math.abs(A-st)<=Di*Math.max(1,Math.abs(A),Math.abs(st))&&Math.abs(L-tt)<=Di*Math.max(1,Math.abs(L),Math.abs(tt))&&Math.abs($-wt)<=Di*Math.max(1,Math.abs($),Math.abs(wt))&&Math.abs(U-gt)<=Di*Math.max(1,Math.abs(U),Math.abs(gt))&&Math.abs(H-dt)<=Di*Math.max(1,Math.abs(H),Math.abs(dt))&&Math.abs(Y-Fe)<=Di*Math.max(1,Math.abs(Y),Math.abs(Fe))&&Math.abs(J-kt)<=Di*Math.max(1,Math.abs(J),Math.abs(kt))&&Math.abs(ue-xt)<=Di*Math.max(1,Math.abs(ue),Math.abs(xt))&&Math.abs(fe-Bt)<=Di*Math.max(1,Math.abs(fe),Math.abs(Bt))},d.a0=on,d.a1=S_,d.a2=Ge,d.a3=s=>{const o=window.document.createElement("video");return o.muted=!0,new Promise(l=>{o.onloadstart=()=>{l(o)};for(const p of s){const g=window.document.createElement("source");Vt(p)||(o.crossOrigin="Anonymous"),g.src=p,o.appendChild(g)}})},d.a4=function(){return de++},d.a5=lt,d.a6=wh,d.a7=dp,d.a8=Hu,d.a9=PC,d.aA=function(s){if(s.type==="custom")return new ez(s);switch(s.type){case"background":return new YL(s);case"circle":return new F4(s);case"fill":return new tL(s);case"fill-extrusion":return new gL(s);case"heatmap":return new N4(s);case"hillshade":return new U4(s);case"line":return new CL(s);case"raster":return new QL(s);case"symbol":return new qg(s)}},d.aB=Ie,d.aC=function(s,o){if(!s)return[{command:"setStyle",args:[o]}];let l=[];try{if(!ht(s.version,o.version))return[{command:"setStyle",args:[o]}];ht(s.center,o.center)||l.push({command:"setCenter",args:[o.center]}),ht(s.zoom,o.zoom)||l.push({command:"setZoom",args:[o.zoom]}),ht(s.bearing,o.bearing)||l.push({command:"setBearing",args:[o.bearing]}),ht(s.pitch,o.pitch)||l.push({command:"setPitch",args:[o.pitch]}),ht(s.sprite,o.sprite)||l.push({command:"setSprite",args:[o.sprite]}),ht(s.glyphs,o.glyphs)||l.push({command:"setGlyphs",args:[o.glyphs]}),ht(s.transition,o.transition)||l.push({command:"setTransition",args:[o.transition]}),ht(s.light,o.light)||l.push({command:"setLight",args:[o.light]}),ht(s.terrain,o.terrain)||l.push({command:"setTerrain",args:[o.terrain]}),ht(s.sky,o.sky)||l.push({command:"setSky",args:[o.sky]}),ht(s.projection,o.projection)||l.push({command:"setProjection",args:[o.projection]});const p={},g=[];(function(x,S,E,A){let L;for(L in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(S,L)||ir(L,E,A));for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&(Object.prototype.hasOwnProperty.call(x,L)?ht(x[L],S[L])||(x[L].type==="geojson"&&S[L].type==="geojson"&&An(x,S,L)?qt(E,{command:"setGeoJSONSourceData",args:[L,S[L].data]}):bt(L,S,E,A)):un(L,S,E))})(s.sources,o.sources,g,p);const _=[];s.layers&&s.layers.forEach(x=>{"source"in x&&p[x.source]?l.push({command:"removeLayer",args:[x.id]}):_.push(x)}),l=l.concat(g),function(x,S,E){S=S||[];const A=(x=x||[]).map(Jr),L=S.map(Jr),$=x.reduce(vr,{}),U=S.reduce(vr,{}),H=A.slice(),Y=Object.create(null);let J,ue,fe,Te,_e;for(let Ee=0,ze=0;Ee<A.length;Ee++)J=A[Ee],Object.prototype.hasOwnProperty.call(U,J)?ze++:(qt(E,{command:"removeLayer",args:[J]}),H.splice(H.indexOf(J,ze),1));for(let Ee=0,ze=0;Ee<L.length;Ee++)J=L[L.length-1-Ee],H[H.length-1-Ee]!==J&&(Object.prototype.hasOwnProperty.call($,J)?(qt(E,{command:"removeLayer",args:[J]}),H.splice(H.lastIndexOf(J,H.length-ze),1)):ze++,Te=H[H.length-Ee],qt(E,{command:"addLayer",args:[U[J],Te]}),H.splice(H.length-Ee,0,J),Y[J]=!0);for(let Ee=0;Ee<L.length;Ee++)if(J=L[Ee],ue=$[J],fe=U[J],!Y[J]&&!ht(ue,fe))if(ht(ue.source,fe.source)&&ht(ue["source-layer"],fe["source-layer"])&&ht(ue.type,fe.type)){for(_e in yr(ue.layout,fe.layout,E,J,null,"setLayoutProperty"),yr(ue.paint,fe.paint,E,J,null,"setPaintProperty"),ht(ue.filter,fe.filter)||qt(E,{command:"setFilter",args:[J,fe.filter]}),ht(ue.minzoom,fe.minzoom)&&ht(ue.maxzoom,fe.maxzoom)||qt(E,{command:"setLayerZoomRange",args:[J,fe.minzoom,fe.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?yr(ue[_e],fe[_e],E,J,_e.slice(6),"setPaintProperty"):ht(ue[_e],fe[_e])||qt(E,{command:"setLayerProperty",args:[J,_e,fe[_e]]}));for(_e in fe)Object.prototype.hasOwnProperty.call(fe,_e)&&!Object.prototype.hasOwnProperty.call(ue,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?yr(ue[_e],fe[_e],E,J,_e.slice(6),"setPaintProperty"):ht(ue[_e],fe[_e])||qt(E,{command:"setLayerProperty",args:[J,_e,fe[_e]]}))}else qt(E,{command:"removeLayer",args:[J]}),Te=H[H.lastIndexOf(J)+1],qt(E,{command:"addLayer",args:[fe,Te]})}(_,o.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:"setStyle",args:[o]}]}return l},d.aD=function(s){const o=[],l=s.id;return l===void 0&&o.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&o.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&o.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),o},d.aE=function s(o,l){if(Array.isArray(o)){if(!Array.isArray(l)||o.length!==l.length)return!1;for(let p=0;p<o.length;p++)if(!s(o[p],l[p]))return!1;return!0}if(typeof o=="object"&&o!==null&&l!==null){if(typeof l!="object"||Object.keys(o).length!==Object.keys(l).length)return!1;for(const p in o)if(!s(o[p],l[p]))return!1;return!0}return o===l},d.aF=Me,d.aG=Z,d.aH=class extends Vu{constructor(s,o){super(s,o),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},d.aI=Lg,d.aJ=class extends Vu{constructor(s,o){super(s,o),this.current=M4}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let o=1;o<16;o++)if(s[o]!==this.current[o]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},d.aK=gS,d.aL=yS,d.aM=In,d.aN=class extends Vu{constructor(s,o){super(s,o),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},d.aO=class extends Vu{constructor(s,o){super(s,o),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},d.aP=function(s,o,l,p,g,_,x){var S=1/(o-l),E=1/(p-g),A=1/(_-x);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*E,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(o+l)*S,s[13]=(g+p)*E,s[14]=(x+_)*A,s[15]=1,s},d.aQ=O4,d.aR=class extends xe{},d.aS=IL,d.aT=class extends Pe{},d.aU=t_,d.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},d.aW=LS,d.aX=ui,d.aY=Oo,d.aZ=class extends _t{},d.a_=function(s,o){return s[0]===o[0]&&s[1]===o[1]&&s[2]===o[2]&&s[3]===o[3]&&s[4]===o[4]&&s[5]===o[5]&&s[6]===o[6]&&s[7]===o[7]&&s[8]===o[8]&&s[9]===o[9]&&s[10]===o[10]&&s[11]===o[11]&&s[12]===o[12]&&s[13]===o[13]&&s[14]===o[14]&&s[15]===o[15]},d.aa=function(s){const o={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,p,g,_)=>{const x=g||_;return o[p]=!x||x.toLowerCase(),""}),o["max-age"]){const l=parseInt(o["max-age"],10);isNaN(l)?delete o["max-age"]:o["max-age"]=l}return o},d.ab=function(s,o){const l=[];for(const p in s)p in o||l.push(p);return l},d.ac=te,d.ad=function(s,o,l){var p=Math.sin(l),g=Math.cos(l),_=o[0],x=o[1],S=o[2],E=o[3],A=o[4],L=o[5],$=o[6],U=o[7];return o!==s&&(s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[0]=_*g+A*p,s[1]=x*g+L*p,s[2]=S*g+$*p,s[3]=E*g+U*p,s[4]=A*g-_*p,s[5]=L*g-x*p,s[6]=$*g-S*p,s[7]=U*g-E*p,s},d.ae=function(s){var o=new gh(16);return o[0]=s[0],o[1]=s[1],o[2]=s[2],o[3]=s[3],o[4]=s[4],o[5]=s[5],o[6]=s[6],o[7]=s[7],o[8]=s[8],o[9]=s[9],o[10]=s[10],o[11]=s[11],o[12]=s[12],o[13]=s[13],o[14]=s[14],o[15]=s[15],o},d.af=$g,d.ag=function(s,o){let l=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=s,S=g?te(zi.interpolationFactor(g,o,_,x),0,1):0;s.kind==="camera"?p=Li.number(s.minSize,s.maxSize,S):l=S}return{uSizeT:l,uSize:p}},d.ai=function(s,{uSize:o,uSizeT:l},{lowerSize:p,upperSize:g}){return s.kind==="source"?p/rs:s.kind==="composite"?Li.number(p/rs,g/rs,l):o},d.aj=y_,d.ak=function(s,o,l,p){const g=o.y-s.y,_=o.x-s.x,x=p.y-l.y,S=p.x-l.x,E=x*_-S*g;if(E===0)return null;const A=(S*(s.y-l.y)-x*(s.x-l.x))/E;return new k(s.x+A*_,s.y+A*g)},d.al=zC,d.am=bS,d.an=J1,d.ao=function(s){let o=1/0,l=1/0,p=-1/0,g=-1/0;for(const _ of s)o=Math.min(o,_.x),l=Math.min(l,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return[o,l,p,g]},d.ap=jr,d.ar=g_,d.as=function(s,o){var l=o[0],p=o[1],g=o[2],_=o[3],x=o[4],S=o[5],E=o[6],A=o[7],L=o[8],$=o[9],U=o[10],H=o[11],Y=o[12],J=o[13],ue=o[14],fe=o[15],Te=l*S-p*x,_e=l*E-g*x,Ee=l*A-_*x,ze=p*E-g*S,We=p*A-_*S,ut=g*A-_*E,Pt=L*J-$*Y,st=L*ue-U*Y,tt=L*fe-H*Y,wt=$*ue-U*J,gt=$*fe-H*J,dt=U*fe-H*ue,Fe=Te*dt-_e*gt+Ee*wt+ze*tt-We*st+ut*Pt;return Fe?(s[0]=(S*dt-E*gt+A*wt)*(Fe=1/Fe),s[1]=(g*gt-p*dt-_*wt)*Fe,s[2]=(J*ut-ue*We+fe*ze)*Fe,s[3]=(U*We-$*ut-H*ze)*Fe,s[4]=(E*tt-x*dt-A*st)*Fe,s[5]=(l*dt-g*tt+_*st)*Fe,s[6]=(ue*Ee-Y*ut-fe*_e)*Fe,s[7]=(L*ut-U*Ee+H*_e)*Fe,s[8]=(x*gt-S*tt+A*Pt)*Fe,s[9]=(p*tt-l*gt-_*Pt)*Fe,s[10]=(Y*We-J*Ee+fe*Te)*Fe,s[11]=($*Ee-L*We-H*Te)*Fe,s[12]=(S*st-x*wt-E*Pt)*Fe,s[13]=(l*wt-p*st+g*Pt)*Fe,s[14]=(J*_e-Y*ze-ue*Te)*Fe,s[15]=(L*ze-$*_e+U*Te)*Fe,s):null},d.at=k_,d.au=m_,d.av=E_,d.aw=function(){const s={},o=Se.$version;for(const l in Se.$root){const p=Se.$root[l];if(p.required){let g=null;g=l==="version"?o:p.type==="array"?[]:{},g!=null&&(s[l]=g)}}return s},d.ax=Ep,d.ay=jn,d.az=function(s){s=s.slice();const o=Object.create(null);for(let l=0;l<s.length;l++)o[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=gn(s[l],o[s[l].ref]));return s},d.b=at,d.b0=function(s,o){return s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[4]=o[4],s[5]=o[5],s[6]=o[6],s[7]=o[7],s[8]=o[8],s[9]=o[9],s[10]=o[10],s[11]=o[11],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15],s},d.b1=function(s,o,l){return s[0]=o[0]*l[0],s[1]=o[1]*l[1],s[2]=o[2]*l[2],s[3]=o[3]*l[3],s},d.b2=function(s,o){return s[0]*o[0]+s[1]*o[1]+s[2]*o[2]+s[3]*o[3]},d.b3=oe,d.b4=EC,d.b5=CC,d.b6=function(s,o,l,p,g){var _,x=1/Math.tan(o/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+p)*(_=1/(p-g)),s[14]=2*g*p*_):(s[10]=-1,s[14]=-2*p),s},d.b7=function(s,o,l){var p=Math.sin(l),g=Math.cos(l),_=o[4],x=o[5],S=o[6],E=o[7],A=o[8],L=o[9],$=o[10],U=o[11];return o!==s&&(s[0]=o[0],s[1]=o[1],s[2]=o[2],s[3]=o[3],s[12]=o[12],s[13]=o[13],s[14]=o[14],s[15]=o[15]),s[4]=_*g+A*p,s[5]=x*g+L*p,s[6]=S*g+$*p,s[7]=E*g+U*p,s[8]=A*g-_*p,s[9]=L*g-x*p,s[10]=$*g-S*p,s[11]=U*g-E*p,s},d.b8=j,d.b9=G,d.bA=JS,d.bB=function(s){return s.message===Lt},d.bC=Sl,d.bD=Qi,d.ba=function(s){return s*Math.PI/180},d.bb=function(s,o){const{x:l,y:p}=Hp.fromLngLat(o);return!(s<0||s>25||p<0||p>=1||l<0||l>=1)},d.bc=function(s,o){return s[0]=o[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=o[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=o[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},d.bd=class extends z{},d.be=b_,d.bf=cz,d.bh=tn,d.bi=function(s,o){zt.REGISTERED_PROTOCOLS[s]=o},d.bj=function(s){delete zt.REGISTERED_PROTOCOLS[s]},d.bk=function(s,o){const l={};for(let g=0;g<s.length;g++){const _=o&&o[s[g].id]||xg(s[g]);o&&(o[s[g].id]=_);let x=l[_];x||(x=l[_]=[]),x.push(s[g])}const p=[];for(const g in l)p.push(l[g]);return p},d.bl=mt,d.bm=IC,d.bn=MC,d.bo=sC,d.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=$r/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const o=s.bucket.layers[0],l=o.layout,p=o._unevaluatedLayout._values,g={layoutIconSize:p["icon-size"].possiblyEvaluate(new Kn(s.bucket.zoom+1),s.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new Kn(s.bucket.zoom+1),s.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new Kn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.textSizeData;g.compositeTextSizes=[p["text-size"].possiblyEvaluate(new Kn(A),s.canonical),p["text-size"].possiblyEvaluate(new Kn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.iconSizeData;g.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new Kn(A),s.canonical),p["icon-size"].possiblyEvaluate(new Kn(L),s.canonical)]}const _=l.get("text-line-height")*jr,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),E=l.get("text-size");for(const A of s.bucket.features){const L=l.get("text-font").evaluate(A,{},s.canonical).join(","),$=E.evaluate(A,{},s.canonical),U=g.layoutTextSize.evaluate(A,{},s.canonical),H=g.layoutIconSize.evaluate(A,{},s.canonical),Y={horizontal:{},vertical:void 0},J=A.text;let ue,fe=[0,0];if(J){const Ee=J.toString(),ze=l.get("text-letter-spacing").evaluate(A,{},s.canonical)*jr,We=j1(Ee)?ze:0,ut=l.get("text-anchor").evaluate(A,{},s.canonical),Pt=UC(o,A,s.canonical);if(!Pt){const gt=l.get("text-radial-offset").evaluate(A,{},s.canonical);fe=gt?jC(ut,[gt*jr,C_]):l.get("text-offset").evaluate(A,{},s.canonical).map(dt=>dt*jr)}let st=x?"center":l.get("text-justify").evaluate(A,{},s.canonical);const tt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(A,{},s.canonical)*jr:1/0,wt=()=>{s.bucket.allowVerticalPlacement&&Tp(Ee)&&(Y.vertical=Ug(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,ut,"left",We,fe,d.ah.vertical,!0,U,$))};if(!x&&Pt){const gt=new Set;if(st==="auto")for(let Fe=0;Fe<Pt.values.length;Fe+=2)gt.add(k_(Pt.values[Fe]));else gt.add(st);let dt=!1;for(const Fe of gt)if(!Y.horizontal[Fe])if(dt)Y.horizontal[Fe]=Y.horizontal[0];else{const kt=Ug(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,"center",Fe,We,fe,d.ah.horizontal,!1,U,$);kt&&(Y.horizontal[Fe]=kt,dt=kt.positionedLines.length===1)}wt()}else{st==="auto"&&(st=k_(ut));const gt=Ug(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,ut,st,We,fe,d.ah.horizontal,!1,U,$);gt&&(Y.horizontal[st]=gt),wt(),Tp(Ee)&&x&&S&&(Y.vertical=Ug(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,ut,st,We,fe,d.ah.vertical,!1,U,$))}}let Te=!1;if(A.icon&&A.icon.name){const Ee=s.imageMap[A.icon.name];Ee&&(ue=HL(s.imagePositions[A.icon.name],l.get("icon-offset").evaluate(A,{},s.canonical),l.get("icon-anchor").evaluate(A,{},s.canonical)),Te=!!Ee.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Te:s.bucket.sdfIcons!==Te&&$e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const _e=WC(Y.horizontal)||Y.vertical;s.bucket.iconsInText=!!_e&&_e.iconsInText,(_e||ue)&&lz(s.bucket,A,Y,ue,s.imageMap,g,U,H,fe,Te,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},d.bq=u_,d.br=a_,d.bs=l_,d.bt=Nl,d.bu=h_,d.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},d.bw=function(s,o,l,p,g){return u(this,void 0,void 0,function*(){if(B())try{return yield qe(s,o,l,p,g)}catch{}return function(_,x,S,E,A){const L=_.width,$=_.height;pt&&Ct||(pt=new OffscreenCanvas(L,$),Ct=pt.getContext("2d",{willReadFrequently:!0})),pt.width=L,pt.height=$,Ct.drawImage(_,0,0,L,$);const U=Ct.getImageData(x,S,E,A);return Ct.clearRect(0,0,L,$),U.data}(s,o,l,p,g)})},d.bx=TC,d.by=b,d.bz=w,d.c=jt,d.d=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const o=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(o)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=ae,d.f=s=>new Promise((o,l)=>{const p=new Image;p.onload=()=>{o(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=De})},p.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});p.src=s.byteLength?URL.createObjectURL(g):De}),d.g=Kt,d.h=(s,o)=>kn(ae(s,{type:"json"}),o),d.i=Oe,d.j=yt,d.k=_n,d.l=(s,o)=>kn(ae(s,{type:"arrayBuffer"}),o),d.m=kn,d.n=function(s){return new h_(s).readFields(BL,[])},d.o=$p,d.p=aC,d.q=v,d.r=B1,d.s=Vt,d.t=Cp,d.u=Bs,d.v=Se,d.w=$e,d.x=function([s,o,l]){return o+=90,o*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(o)*Math.sin(l),y:s*Math.sin(o)*Math.sin(l),z:s*Math.cos(l)}},d.y=Li,d.z=Kn}),a("worker",["./shared"],function(d){class u{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,W){for(const le of q){this._layerConfigs[le.id]=le;const ve=this._layers[le.id]=d.aA(le);ve._featureFilter=d.a7(ve.filter),this.keyCache[le.id]&&delete this.keyCache[le.id]}for(const le of W)delete this.keyCache[le],delete this._layerConfigs[le],delete this._layers[le];this.familiesBySource={};const Q=d.bk(Object.values(this._layerConfigs),this.keyCache);for(const le of Q){const ve=le.map(Ce=>this._layers[Ce.id]),we=ve[0];if(we.visibility==="none")continue;const ne=we.source||"";let he=this.familiesBySource[ne];he||(he=this.familiesBySource[ne]={});const Ae=we.sourceLayer||"_geojsonTileLayer";let Re=he[Ae];Re||(Re=he[Ae]=[]),Re.push(ve)}}}class b{constructor(q){const W={},Q=[];for(const ne in q){const he=q[ne],Ae=W[ne]={};for(const Re in he){const Ce=he[+Re];if(!Ce||Ce.bitmap.width===0||Ce.bitmap.height===0)continue;const Ue={x:0,y:0,w:Ce.bitmap.width+2,h:Ce.bitmap.height+2};Q.push(Ue),Ae[Re]={rect:Ue,metrics:Ce.metrics}}}const{w:le,h:ve}=d.p(Q),we=new d.o({width:le||1,height:ve||1});for(const ne in q){const he=q[ne];for(const Ae in he){const Re=he[+Ae];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const Ce=W[ne][Ae].rect;d.o.copy(Re.bitmap,we,{x:0,y:0},{x:Ce.x+1,y:Ce.y+1},Re.bitmap)}}this.image=we,this.positions=W}}d.bl("GlyphAtlas",b);class w{constructor(q){this.tileID=new d.S(q.tileID.overscaledZ,q.tileID.wrap,q.tileID.canonical.z,q.tileID.canonical.x,q.tileID.canonical.y),this.uid=q.uid,this.zoom=q.zoom,this.pixelRatio=q.pixelRatio,this.tileSize=q.tileSize,this.source=q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=q.showCollisionBoxes,this.collectResourceTiming=!!q.collectResourceTiming,this.returnDependencies=!!q.returnDependencies,this.promoteId=q.promoteId,this.inFlightDependencies=[]}parse(q,W,Q,le){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=q,this.collisionBoxArray=new d.a5;const ve=new d.bm(Object.keys(q.layers).sort()),we=new d.bn(this.tileID,this.promoteId);we.bucketLayerIDs=[];const ne={},he={featureIndex:we,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},Ae=W.familiesBySource[this.source];for(const Gt in Ae){const Tn=q.layers[Gt];if(!Tn)continue;Tn.version===1&&d.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const or=ve.encode(Gt),Hr=[];for(let Qr=0;Qr<Tn.length;Qr++){const xi=Tn.feature(Qr),dl=we.getId(xi,Gt);Hr.push({feature:xi,id:dl,index:Qr,sourceLayerIndex:or})}for(const Qr of Ae[Gt]){const xi=Qr[0];xi.source!==this.source&&d.w(`layer.source = ${xi.source} does not equal this.source = ${this.source}`),xi.minzoom&&this.zoom<Math.floor(xi.minzoom)||xi.maxzoom&&this.zoom>=xi.maxzoom||xi.visibility!=="none"&&(I(Qr,this.zoom,Q),(ne[xi.id]=xi.createBucket({index:we.bucketLayerIDs.length,layers:Qr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:or,sourceID:this.source})).populate(Hr,he,this.tileID.canonical),we.bucketLayerIDs.push(Qr.map(dl=>dl.id)))}}const Re=d.aF(he.glyphDependencies,Gt=>Object.keys(Gt).map(Number));this.inFlightDependencies.forEach(Gt=>Gt==null?void 0:Gt.abort()),this.inFlightDependencies=[];let Ce=Promise.resolve({});if(Object.keys(Re).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Ce=le.sendAsync({type:"GG",data:{stacks:Re,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const Ue=Object.keys(he.iconDependencies);let ft=Promise.resolve({});if(Ue.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),ft=le.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const Tt=Object.keys(he.patternDependencies);let Jt=Promise.resolve({});if(Tt.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Jt=le.sendAsync({type:"GI",data:{icons:Tt,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const[Ot,pn,Qt]=yield Promise.all([Ce,ft,Jt]),Rr=new b(Ot),hr=new d.bo(pn,Qt);for(const Gt in ne){const Tn=ne[Gt];Tn instanceof d.a6?(I(Tn.layers,this.zoom,Q),d.bp({bucket:Tn,glyphMap:Ot,glyphPositions:Rr.positions,imageMap:pn,imagePositions:hr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tn.hasPattern&&(Tn instanceof d.bq||Tn instanceof d.br||Tn instanceof d.bs)&&(I(Tn.layers,this.zoom,Q),Tn.addFeatures(he,this.tileID.canonical,hr.patternPositions))}return this.status="done",{buckets:Object.values(ne).filter(Gt=>!Gt.isEmpty()),featureIndex:we,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Rr.image,imageAtlas:hr,glyphMap:this.returnDependencies?Ot:null,iconMap:this.returnDependencies?pn:null,glyphPositions:this.returnDependencies?Rr.positions:null}})}}function I(pe,q,W){const Q=new d.z(q);for(const le of pe)le.recalculate(Q,W)}class k{constructor(q,W,Q){this.actor=q,this.layerIndex=W,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(q,W){return d._(this,void 0,void 0,function*(){const Q=yield d.l(q.request,W);try{return{vectorTile:new d.bt.VectorTile(new d.bu(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(le){const ve=new Uint8Array(Q.data);let we=`Unable to parse the tile at ${q.request.url}, `;throw we+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${le.message}`,new Error(we)}})}loadTile(q){return d._(this,void 0,void 0,function*(){const W=q.uid,Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new d.bv(q.request),le=new w(q);this.loading[W]=le;const ve=new AbortController;le.abort=ve;try{const we=yield this.loadVectorTile(q,ve);if(delete this.loading[W],!we)return null;const ne=we.rawData,he={};we.expires&&(he.expires=we.expires),we.cacheControl&&(he.cacheControl=we.cacheControl);const Ae={};if(Q){const Ce=Q.finish();Ce&&(Ae.resourceTiming=JSON.parse(JSON.stringify(Ce)))}le.vectorTile=we.vectorTile;const Re=le.parse(we.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=le,this.fetching[W]={rawTileData:ne,cacheControl:he,resourceTiming:Ae};try{const Ce=yield Re;return d.e({rawTileData:ne.slice(0)},Ce,he,Ae)}finally{delete this.fetching[W]}}catch(we){throw delete this.loading[W],le.status="done",this.loaded[W]=le,we}})}reloadTile(q){return d._(this,void 0,void 0,function*(){const W=q.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[W];if(Q.showCollisionBoxes=q.showCollisionBoxes,Q.status==="parsing"){const le=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[W]){const{rawTileData:we,cacheControl:ne,resourceTiming:he}=this.fetching[W];delete this.fetching[W],ve=d.e({rawTileData:we.slice(0)},le,ne,he)}else ve=le;return ve}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(q){return d._(this,void 0,void 0,function*(){const W=this.loading,Q=q.uid;W&&W[Q]&&W[Q].abort&&(W[Q].abort.abort(),delete W[Q])})}removeTile(q){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[q.uid]&&delete this.loaded[q.uid]})}}class P{constructor(){this.loaded={}}loadTile(q){return d._(this,void 0,void 0,function*(){const{uid:W,encoding:Q,rawImageData:le,redFactor:ve,greenFactor:we,blueFactor:ne,baseShift:he}=q,Ae=le.width+2,Re=le.height+2,Ce=d.b(le)?new d.R({width:Ae,height:Re},yield d.bw(le,-1,-1,Ae,Re)):le,Ue=new d.bx(W,Ce,Q,ve,we,ne,he);return this.loaded=this.loaded||{},this.loaded[W]=Ue,Ue})}removeTile(q){const W=this.loaded,Q=q.uid;W&&W[Q]&&delete W[Q]}}function R(pe,q){if(pe.length!==0){N(pe[0],q);for(var W=1;W<pe.length;W++)N(pe[W],!q)}}function N(pe,q){for(var W=0,Q=0,le=0,ve=pe.length,we=ve-1;le<ve;we=le++){var ne=(pe[le][0]-pe[we][0])*(pe[we][1]+pe[le][1]),he=W+ne;Q+=Math.abs(W)>=Math.abs(ne)?W-he+ne:ne-he+W,W=he}W+Q>=0!=!!q&&pe.reverse()}var V=d.by(function pe(q,W){var Q,le=q&&q.type;if(le==="FeatureCollection")for(Q=0;Q<q.features.length;Q++)pe(q.features[Q],W);else if(le==="GeometryCollection")for(Q=0;Q<q.geometries.length;Q++)pe(q.geometries[Q],W);else if(le==="Feature")pe(q.geometry,W);else if(le==="Polygon")R(q.coordinates,W);else if(le==="MultiPolygon")for(Q=0;Q<q.coordinates.length;Q++)R(q.coordinates[Q],W);return q});const X=d.bt.VectorTileFeature.prototype.toGeoJSON;var D={exports:{}},B=d.bz,j=d.bt.VectorTileFeature,G=te;function te(pe,q){this.options=q||{},this.features=pe,this.length=pe.length}function oe(pe,q){this.id=typeof pe.id=="number"?pe.id:void 0,this.type=pe.type,this.rawGeometry=pe.type===1?[pe.geometry]:pe.geometry,this.properties=pe.tags,this.extent=q||4096}te.prototype.feature=function(pe){return new oe(this.features[pe],this.options.extent)},oe.prototype.loadGeometry=function(){var pe=this.rawGeometry;this.geometry=[];for(var q=0;q<pe.length;q++){for(var W=pe[q],Q=[],le=0;le<W.length;le++)Q.push(new B(W[le][0],W[le][1]));this.geometry.push(Q)}return this.geometry},oe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var pe=this.geometry,q=1/0,W=-1/0,Q=1/0,le=-1/0,ve=0;ve<pe.length;ve++)for(var we=pe[ve],ne=0;ne<we.length;ne++){var he=we[ne];q=Math.min(q,he.x),W=Math.max(W,he.x),Q=Math.min(Q,he.y),le=Math.max(le,he.y)}return[q,Q,W,le]},oe.prototype.toGeoJSON=j.prototype.toGeoJSON;var ae=d.bA,de=G;function Me(pe){var q=new ae;return function(W,Q){for(var le in W.layers)Q.writeMessage(3,Z,W.layers[le])}(pe,q),q.finish()}function Z(pe,q){var W;q.writeVarintField(15,pe.version||1),q.writeStringField(1,pe.name||""),q.writeVarintField(5,pe.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<pe.length;W++)Q.feature=pe.feature(W),q.writeMessage(2,Ie,Q);var le=Q.keys;for(W=0;W<le.length;W++)q.writeStringField(3,le[W]);var ve=Q.values;for(W=0;W<ve.length;W++)q.writeMessage(4,He,ve[W])}function Ie(pe,q){var W=pe.feature;W.id!==void 0&&q.writeVarintField(1,W.id),q.writeMessage(2,je,pe),q.writeVarintField(3,W.type),q.writeMessage(4,Oe,W)}function je(pe,q){var W=pe.feature,Q=pe.keys,le=pe.values,ve=pe.keycache,we=pe.valuecache;for(var ne in W.properties){var he=W.properties[ne],Ae=ve[ne];if(he!==null){Ae===void 0&&(Q.push(ne),ve[ne]=Ae=Q.length-1),q.writeVarint(Ae);var Re=typeof he;Re!=="string"&&Re!=="boolean"&&Re!=="number"&&(he=JSON.stringify(he));var Ce=Re+":"+he,Ue=we[Ce];Ue===void 0&&(le.push(he),we[Ce]=Ue=le.length-1),q.writeVarint(Ue)}}}function $e(pe,q){return(q<<3)+(7&pe)}function Le(pe){return pe<<1^pe>>31}function Oe(pe,q){for(var W=pe.loadGeometry(),Q=pe.type,le=0,ve=0,we=W.length,ne=0;ne<we;ne++){var he=W[ne],Ae=1;Q===1&&(Ae=he.length),q.writeVarint($e(1,Ae));for(var Re=Q===3?he.length-1:he.length,Ce=0;Ce<Re;Ce++){Ce===1&&Q!==1&&q.writeVarint($e(2,Re-1));var Ue=he[Ce].x-le,ft=he[Ce].y-ve;q.writeVarint(Le(Ue)),q.writeVarint(Le(ft)),le+=Ue,ve+=ft}Q===3&&q.writeVarint($e(7,1))}}function He(pe,q){var W=typeof pe;W==="string"?q.writeStringField(1,pe):W==="boolean"?q.writeBooleanField(7,pe):W==="number"&&(pe%1!=0?q.writeDoubleField(3,pe):pe<0?q.writeSVarintField(6,pe):q.writeVarintField(5,pe))}D.exports=Me,D.exports.fromVectorTileJs=Me,D.exports.fromGeojsonVt=function(pe,q){q=q||{};var W={};for(var Q in pe)W[Q]=new de(pe[Q].features,q),W[Q].name=Q,W[Q].version=q.version,W[Q].extent=q.extent;return Me({layers:W})},D.exports.GeoJSONWrapper=de;var at=d.by(D.exports);const De={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pe=>pe},qe=Math.fround||(pt=new Float32Array(1),pe=>(pt[0]=+pe,pt[0]));var pt;const Ct=3,Lt=5,jt=6;class zt{constructor(q){this.options=Object.assign(Object.create(De),q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(q){const{log:W,minZoom:Q,maxZoom:le}=this.options;W&&console.time("total time");const ve=`prepare ${q.length} points`;W&&console.time(ve),this.points=q;const we=[];for(let he=0;he<q.length;he++){const Ae=q[he];if(!Ae.geometry)continue;const[Re,Ce]=Ae.geometry.coordinates,Ue=qe(tn(Re)),ft=qe(jn(Ce));we.push(Ue,ft,1/0,he,-1,1),this.options.reduce&&we.push(0)}let ne=this.trees[le+1]=this._createTree(we);W&&console.timeEnd(ve);for(let he=le;he>=Q;he--){const Ae=+Date.now();ne=this.trees[he]=this._createTree(this._cluster(ne,he)),W&&console.log("z%d: %d clusters in %dms",he,ne.numItems,+Date.now()-Ae)}return W&&console.timeEnd("total time"),this}getClusters(q,W){let Q=((q[0]+180)%360+360)%360-180;const le=Math.max(-90,Math.min(90,q[1]));let ve=q[2]===180?180:((q[2]+180)%360+360)%360-180;const we=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)Q=-180,ve=180;else if(Q>ve){const Ce=this.getClusters([Q,le,180,we],W),Ue=this.getClusters([-180,le,ve,we],W);return Ce.concat(Ue)}const ne=this.trees[this._limitZoom(W)],he=ne.range(tn(Q),jn(we),tn(ve),jn(le)),Ae=ne.data,Re=[];for(const Ce of he){const Ue=this.stride*Ce;Re.push(Ae[Ue+Lt]>1?Kt(Ae,Ue,this.clusterProps):this.points[Ae[Ue+Ct]])}return Re}getChildren(q){const W=this._getOriginId(q),Q=this._getOriginZoom(q),le="No cluster with the specified id.",ve=this.trees[Q];if(!ve)throw new Error(le);const we=ve.data;if(W*this.stride>=we.length)throw new Error(le);const ne=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),he=ve.within(we[W*this.stride],we[W*this.stride+1],ne),Ae=[];for(const Re of he){const Ce=Re*this.stride;we[Ce+4]===q&&Ae.push(we[Ce+Lt]>1?Kt(we,Ce,this.clusterProps):this.points[we[Ce+Ct]])}if(Ae.length===0)throw new Error(le);return Ae}getLeaves(q,W,Q){const le=[];return this._appendLeaves(le,q,W=W||10,Q=Q||0,0),le}getTile(q,W,Q){const le=this.trees[this._limitZoom(q)],ve=Math.pow(2,q),{extent:we,radius:ne}=this.options,he=ne/we,Ae=(Q-he)/ve,Re=(Q+1+he)/ve,Ce={features:[]};return this._addTileFeatures(le.range((W-he)/ve,Ae,(W+1+he)/ve,Re),le.data,W,Q,ve,Ce),W===0&&this._addTileFeatures(le.range(1-he/ve,Ae,1,Re),le.data,ve,Q,ve,Ce),W===ve-1&&this._addTileFeatures(le.range(0,Ae,he/ve,Re),le.data,-1,Q,ve,Ce),Ce.features.length?Ce:null}getClusterExpansionZoom(q){let W=this._getOriginZoom(q)-1;for(;W<=this.options.maxZoom;){const Q=this.getChildren(q);if(W++,Q.length!==1)break;q=Q[0].properties.cluster_id}return W}_appendLeaves(q,W,Q,le,ve){const we=this.getChildren(W);for(const ne of we){const he=ne.properties;if(he&&he.cluster?ve+he.point_count<=le?ve+=he.point_count:ve=this._appendLeaves(q,he.cluster_id,Q,le,ve):ve<le?ve++:q.push(ne),q.length===Q)break}return ve}_createTree(q){const W=new d.av(q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<q.length;Q+=this.stride)W.add(q[Q],q[Q+1]);return W.finish(),W.data=q,W}_addTileFeatures(q,W,Q,le,ve,we){for(const ne of q){const he=ne*this.stride,Ae=W[he+Lt]>1;let Re,Ce,Ue;if(Ae)Re=dn(W,he,this.clusterProps),Ce=W[he],Ue=W[he+1];else{const Jt=this.points[W[he+Ct]];Re=Jt.properties;const[Ot,pn]=Jt.geometry.coordinates;Ce=tn(Ot),Ue=jn(pn)}const ft={type:1,geometry:[[Math.round(this.options.extent*(Ce*ve-Q)),Math.round(this.options.extent*(Ue*ve-le))]],tags:Re};let Tt;Tt=Ae||this.options.generateId?W[he+Ct]:this.points[W[he+Ct]].id,Tt!==void 0&&(ft.id=Tt),we.features.push(ft)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,W){const{radius:Q,extent:le,reduce:ve,minPoints:we}=this.options,ne=Q/(le*Math.pow(2,W)),he=q.data,Ae=[],Re=this.stride;for(let Ce=0;Ce<he.length;Ce+=Re){if(he[Ce+2]<=W)continue;he[Ce+2]=W;const Ue=he[Ce],ft=he[Ce+1],Tt=q.within(he[Ce],he[Ce+1],ne),Jt=he[Ce+Lt];let Ot=Jt;for(const pn of Tt){const Qt=pn*Re;he[Qt+2]>W&&(Ot+=he[Qt+Lt])}if(Ot>Jt&&Ot>=we){let pn,Qt=Ue*Jt,Rr=ft*Jt,hr=-1;const Gt=((Ce/Re|0)<<5)+(W+1)+this.points.length;for(const Tn of Tt){const or=Tn*Re;if(he[or+2]<=W)continue;he[or+2]=W;const Hr=he[or+Lt];Qt+=he[or]*Hr,Rr+=he[or+1]*Hr,he[or+4]=Gt,ve&&(pn||(pn=this._map(he,Ce,!0),hr=this.clusterProps.length,this.clusterProps.push(pn)),ve(pn,this._map(he,or)))}he[Ce+4]=Gt,Ae.push(Qt/Ot,Rr/Ot,1/0,Gt,-1,Ot),ve&&Ae.push(hr)}else{for(let pn=0;pn<Re;pn++)Ae.push(he[Ce+pn]);if(Ot>1)for(const pn of Tt){const Qt=pn*Re;if(!(he[Qt+2]<=W)){he[Qt+2]=W;for(let Rr=0;Rr<Re;Rr++)Ae.push(he[Qt+Rr])}}}}return Ae}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,W,Q){if(q[W+Lt]>1){const we=this.clusterProps[q[W+jt]];return Q?Object.assign({},we):we}const le=this.points[q[W+Ct]].properties,ve=this.options.map(le);return Q&&ve===le?Object.assign({},ve):ve}}function Kt(pe,q,W){return{type:"Feature",id:pe[q+Ct],properties:dn(pe,q,W),geometry:{type:"Point",coordinates:[(Q=pe[q],360*(Q-.5)),kn(pe[q+1])]}};var Q}function dn(pe,q,W){const Q=pe[q+Lt],le=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,ve=pe[q+jt],we=ve===-1?{}:Object.assign({},W[ve]);return Object.assign(we,{cluster:!0,cluster_id:pe[q+Ct],point_count:Q,point_count_abbreviated:le})}function tn(pe){return pe/360+.5}function jn(pe){const q=Math.sin(pe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function kn(pe){const q=(180-360*pe)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function Vt(pe,q,W,Q){let le=Q;const ve=q+(W-q>>1);let we,ne=W-q;const he=pe[q],Ae=pe[q+1],Re=pe[W],Ce=pe[W+1];for(let Ue=q+3;Ue<W;Ue+=3){const ft=nn(pe[Ue],pe[Ue+1],he,Ae,Re,Ce);if(ft>le)we=Ue,le=ft;else if(ft===le){const Tt=Math.abs(Ue-ve);Tt<ne&&(we=Ue,ne=Tt)}}le>Q&&(we-q>3&&Vt(pe,q,we,Q),pe[we+2]=le,W-we>3&&Vt(pe,we,W,Q))}function nn(pe,q,W,Q,le,ve){let we=le-W,ne=ve-Q;if(we!==0||ne!==0){const he=((pe-W)*we+(q-Q)*ne)/(we*we+ne*ne);he>1?(W=le,Q=ve):he>0&&(W+=we*he,Q+=ne*he)}return we=pe-W,ne=q-Q,we*we+ne*ne}function Wt(pe,q,W,Q){const le={id:pe??null,type:q,geometry:W,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(q==="Point"||q==="MultiPoint"||q==="LineString")_n(le,W);else if(q==="Polygon")_n(le,W[0]);else if(q==="MultiLineString")for(const ve of W)_n(le,ve);else if(q==="MultiPolygon")for(const ve of W)_n(le,ve[0]);return le}function _n(pe,q){for(let W=0;W<q.length;W+=3)pe.minX=Math.min(pe.minX,q[W]),pe.minY=Math.min(pe.minY,q[W+1]),pe.maxX=Math.max(pe.maxX,q[W]),pe.maxY=Math.max(pe.maxY,q[W+1])}function yt(pe,q,W,Q){if(!q.geometry)return;const le=q.geometry.coordinates;if(le&&le.length===0)return;const ve=q.geometry.type,we=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2);let ne=[],he=q.id;if(W.promoteId?he=q.properties[W.promoteId]:W.generateId&&(he=Q||0),ve==="Point")Rt(le,ne);else if(ve==="MultiPoint")for(const Ae of le)Rt(Ae,ne);else if(ve==="LineString")Se(le,ne,we,!1);else if(ve==="MultiLineString"){if(W.lineMetrics){for(const Ae of le)ne=[],Se(Ae,ne,we,!1),pe.push(Wt(he,"LineString",ne,q.properties));return}ur(le,ne,we,!1)}else if(ve==="Polygon")ur(le,ne,we,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Ae of q.geometry.geometries)yt(pe,{id:he,geometry:Ae,properties:q.properties},W,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ae of le){const Re=[];ur(Ae,Re,we,!0),ne.push(Re)}}pe.push(Wt(he,ve,ne,q.properties))}function Rt(pe,q){q.push(gn(pe[0]),ht(pe[1]),0)}function Se(pe,q,W,Q){let le,ve,we=0;for(let he=0;he<pe.length;he++){const Ae=gn(pe[he][0]),Re=ht(pe[he][1]);q.push(Ae,Re,0),he>0&&(we+=Q?(le*Re-Ae*ve)/2:Math.sqrt(Math.pow(Ae-le,2)+Math.pow(Re-ve,2))),le=Ae,ve=Re}const ne=q.length-3;q[2]=1,Vt(q,0,ne,W),q[ne+2]=1,q.size=Math.abs(we),q.start=0,q.end=q.size}function ur(pe,q,W,Q){for(let le=0;le<pe.length;le++){const ve=[];Se(pe[le],ve,W,Q),q.push(ve)}}function gn(pe){return pe/360+.5}function ht(pe){const q=Math.sin(pe*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function qt(pe,q,W,Q,le,ve,we,ne){if(Q/=q,ve>=(W/=q)&&we<Q)return pe;if(we<W||ve>=Q)return null;const he=[];for(const Ae of pe){const Re=Ae.geometry;let Ce=Ae.type;const Ue=le===0?Ae.minX:Ae.minY,ft=le===0?Ae.maxX:Ae.maxY;if(Ue>=W&&ft<Q){he.push(Ae);continue}if(ft<W||Ue>=Q)continue;let Tt=[];if(Ce==="Point"||Ce==="MultiPoint")un(Re,Tt,W,Q,le);else if(Ce==="LineString")ir(Re,Tt,W,Q,le,!1,ne.lineMetrics);else if(Ce==="MultiLineString")An(Re,Tt,W,Q,le,!1);else if(Ce==="Polygon")An(Re,Tt,W,Q,le,!0);else if(Ce==="MultiPolygon")for(const Jt of Re){const Ot=[];An(Jt,Ot,W,Q,le,!0),Ot.length&&Tt.push(Ot)}if(Tt.length){if(ne.lineMetrics&&Ce==="LineString"){for(const Jt of Tt)he.push(Wt(Ae.id,Ce,Jt,Ae.tags));continue}Ce!=="LineString"&&Ce!=="MultiLineString"||(Tt.length===1?(Ce="LineString",Tt=Tt[0]):Ce="MultiLineString"),Ce!=="Point"&&Ce!=="MultiPoint"||(Ce=Tt.length===3?"Point":"MultiPoint"),he.push(Wt(Ae.id,Ce,Tt,Ae.tags))}}return he.length?he:null}function un(pe,q,W,Q,le){for(let ve=0;ve<pe.length;ve+=3){const we=pe[ve+le];we>=W&&we<=Q&&yr(q,pe[ve],pe[ve+1],pe[ve+2])}}function ir(pe,q,W,Q,le,ve,we){let ne=bt(pe);const he=le===0?Jr:vr;let Ae,Re,Ce=pe.start;for(let Ot=0;Ot<pe.length-3;Ot+=3){const pn=pe[Ot],Qt=pe[Ot+1],Rr=pe[Ot+2],hr=pe[Ot+3],Gt=pe[Ot+4],Tn=le===0?pn:Qt,or=le===0?hr:Gt;let Hr=!1;we&&(Ae=Math.sqrt(Math.pow(pn-hr,2)+Math.pow(Qt-Gt,2))),Tn<W?or>W&&(Re=he(ne,pn,Qt,hr,Gt,W),we&&(ne.start=Ce+Ae*Re)):Tn>Q?or<Q&&(Re=he(ne,pn,Qt,hr,Gt,Q),we&&(ne.start=Ce+Ae*Re)):yr(ne,pn,Qt,Rr),or<W&&Tn>=W&&(Re=he(ne,pn,Qt,hr,Gt,W),Hr=!0),or>Q&&Tn<=Q&&(Re=he(ne,pn,Qt,hr,Gt,Q),Hr=!0),!ve&&Hr&&(we&&(ne.end=Ce+Ae*Re),q.push(ne),ne=bt(pe)),we&&(Ce+=Ae)}let Ue=pe.length-3;const ft=pe[Ue],Tt=pe[Ue+1],Jt=le===0?ft:Tt;Jt>=W&&Jt<=Q&&yr(ne,ft,Tt,pe[Ue+2]),Ue=ne.length-3,ve&&Ue>=3&&(ne[Ue]!==ne[0]||ne[Ue+1]!==ne[1])&&yr(ne,ne[0],ne[1],ne[2]),ne.length&&q.push(ne)}function bt(pe){const q=[];return q.size=pe.size,q.start=pe.start,q.end=pe.end,q}function An(pe,q,W,Q,le,ve){for(const we of pe)ir(we,q,W,Q,le,ve,!1)}function yr(pe,q,W,Q){pe.push(q,W,Q)}function Jr(pe,q,W,Q,le,ve){const we=(ve-q)/(Q-q);return yr(pe,ve,W+(le-W)*we,1),we}function vr(pe,q,W,Q,le,ve){const we=(ve-W)/(le-W);return yr(pe,q+(Q-q)*we,ve,1),we}function Ge(pe,q){const W=[];for(let Q=0;Q<pe.length;Q++){const le=pe[Q],ve=le.type;let we;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")we=cr(le.geometry,q);else if(ve==="MultiLineString"||ve==="Polygon"){we=[];for(const ne of le.geometry)we.push(cr(ne,q))}else if(ve==="MultiPolygon"){we=[];for(const ne of le.geometry){const he=[];for(const Ae of ne)he.push(cr(Ae,q));we.push(he)}}W.push(Wt(le.id,ve,we,le.tags))}return W}function cr(pe,q){const W=[];W.size=pe.size,pe.start!==void 0&&(W.start=pe.start,W.end=pe.end);for(let Q=0;Q<pe.length;Q+=3)W.push(pe[Q]+q,pe[Q+1],pe[Q+2]);return W}function Zn(pe,q){if(pe.transformed)return pe;const W=1<<pe.z,Q=pe.x,le=pe.y;for(const ve of pe.features){const we=ve.geometry,ne=ve.type;if(ve.geometry=[],ne===1)for(let he=0;he<we.length;he+=2)ve.geometry.push(an(we[he],we[he+1],q,W,Q,le));else for(let he=0;he<we.length;he++){const Ae=[];for(let Re=0;Re<we[he].length;Re+=2)Ae.push(an(we[he][Re],we[he][Re+1],q,W,Q,le));ve.geometry.push(Ae)}}return pe.transformed=!0,pe}function an(pe,q,W,Q,le,ve){return[Math.round(W*(pe*Q-le)),Math.round(W*(q*Q-ve))]}function Lr(pe,q,W,Q,le){const ve=q===le.maxZoom?0:le.tolerance/((1<<q)*le.extent),we={features:[],numPoints:0,numSimplified:0,numFeatures:pe.length,source:null,x:W,y:Q,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ne of pe)Ke(we,ne,ve,le);return we}function Ke(pe,q,W,Q){const le=q.geometry,ve=q.type,we=[];if(pe.minX=Math.min(pe.minX,q.minX),pe.minY=Math.min(pe.minY,q.minY),pe.maxX=Math.max(pe.maxX,q.maxX),pe.maxY=Math.max(pe.maxY,q.maxY),ve==="Point"||ve==="MultiPoint")for(let ne=0;ne<le.length;ne+=3)we.push(le[ne],le[ne+1]),pe.numPoints++,pe.numSimplified++;else if(ve==="LineString")Xe(we,le,pe,W,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let ne=0;ne<le.length;ne++)Xe(we,le[ne],pe,W,ve==="Polygon",ne===0);else if(ve==="MultiPolygon")for(let ne=0;ne<le.length;ne++){const he=le[ne];for(let Ae=0;Ae<he.length;Ae++)Xe(we,he[Ae],pe,W,!0,Ae===0)}if(we.length){let ne=q.tags||null;if(ve==="LineString"&&Q.lineMetrics){ne={};for(const Ae in q.tags)ne[Ae]=q.tags[Ae];ne.mapbox_clip_start=le.start/le.size,ne.mapbox_clip_end=le.end/le.size}const he={geometry:we,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ne};q.id!==null&&(he.id=q.id),pe.features.push(he)}}function Xe(pe,q,W,Q,le,ve){const we=Q*Q;if(Q>0&&q.size<(le?we:Q))return void(W.numPoints+=q.length/3);const ne=[];for(let he=0;he<q.length;he+=3)(Q===0||q[he+2]>we)&&(W.numSimplified++,ne.push(q[he],q[he+1])),W.numPoints++;le&&function(he,Ae){let Re=0;for(let Ce=0,Ue=he.length,ft=Ue-2;Ce<Ue;ft=Ce,Ce+=2)Re+=(he[Ce]-he[ft])*(he[Ce+1]+he[ft+1]);if(Re>0===Ae)for(let Ce=0,Ue=he.length;Ce<Ue/2;Ce+=2){const ft=he[Ce],Tt=he[Ce+1];he[Ce]=he[Ue-2-Ce],he[Ce+1]=he[Ue-1-Ce],he[Ue-2-Ce]=ft,he[Ue-1-Ce]=Tt}}(ne,ve),pe.push(ne)}const it={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class cn{constructor(q,W){const Q=(W=this.options=function(ve,we){for(const ne in we)ve[ne]=we[ne];return ve}(Object.create(it),W)).debug;if(Q&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let le=function(ve,we){const ne=[];if(ve.type==="FeatureCollection")for(let he=0;he<ve.features.length;he++)yt(ne,ve.features[he],we,he);else yt(ne,ve.type==="Feature"?ve:{geometry:ve},we);return ne}(q,W);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(ve,we){const ne=we.buffer/we.extent;let he=ve;const Ae=qt(ve,1,-1-ne,ne,0,-1,2,we),Re=qt(ve,1,1-ne,2+ne,0,-1,2,we);return(Ae||Re)&&(he=qt(ve,1,-ne,1+ne,0,-1,2,we)||[],Ae&&(he=Ge(Ae,1).concat(he)),Re&&(he=he.concat(Ge(Re,-1)))),he}(le,W),le.length&&this.splitTile(le,0,0,0),Q&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(q,W,Q,le,ve,we,ne){const he=[q,W,Q,le],Ae=this.options,Re=Ae.debug;for(;he.length;){le=he.pop(),Q=he.pop(),W=he.pop(),q=he.pop();const Ce=1<<W,Ue=zr(W,Q,le);let ft=this.tiles[Ue];if(!ft&&(Re>1&&console.time("creation"),ft=this.tiles[Ue]=Lr(q,W,Q,le,Ae),this.tileCoords.push({z:W,x:Q,y:le}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Q,le,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));const Hr=`z${W}`;this.stats[Hr]=(this.stats[Hr]||0)+1,this.total++}if(ft.source=q,ve==null){if(W===Ae.indexMaxZoom||ft.numPoints<=Ae.indexMaxPoints)continue}else{if(W===Ae.maxZoom||W===ve)continue;if(ve!=null){const Hr=ve-W;if(Q!==we>>Hr||le!==ne>>Hr)continue}}if(ft.source=null,q.length===0)continue;Re>1&&console.time("clipping");const Tt=.5*Ae.buffer/Ae.extent,Jt=.5-Tt,Ot=.5+Tt,pn=1+Tt;let Qt=null,Rr=null,hr=null,Gt=null,Tn=qt(q,Ce,Q-Tt,Q+Ot,0,ft.minX,ft.maxX,Ae),or=qt(q,Ce,Q+Jt,Q+pn,0,ft.minX,ft.maxX,Ae);q=null,Tn&&(Qt=qt(Tn,Ce,le-Tt,le+Ot,1,ft.minY,ft.maxY,Ae),Rr=qt(Tn,Ce,le+Jt,le+pn,1,ft.minY,ft.maxY,Ae),Tn=null),or&&(hr=qt(or,Ce,le-Tt,le+Ot,1,ft.minY,ft.maxY,Ae),Gt=qt(or,Ce,le+Jt,le+pn,1,ft.minY,ft.maxY,Ae),or=null),Re>1&&console.timeEnd("clipping"),he.push(Qt||[],W+1,2*Q,2*le),he.push(Rr||[],W+1,2*Q,2*le+1),he.push(hr||[],W+1,2*Q+1,2*le),he.push(Gt||[],W+1,2*Q+1,2*le+1)}}getTile(q,W,Q){q=+q,W=+W,Q=+Q;const le=this.options,{extent:ve,debug:we}=le;if(q<0||q>24)return null;const ne=1<<q,he=zr(q,W=W+ne&ne-1,Q);if(this.tiles[he])return Zn(this.tiles[he],ve);we>1&&console.log("drilling down to z%d-%d-%d",q,W,Q);let Ae,Re=q,Ce=W,Ue=Q;for(;!Ae&&Re>0;)Re--,Ce>>=1,Ue>>=1,Ae=this.tiles[zr(Re,Ce,Ue)];return Ae&&Ae.source?(we>1&&(console.log("found parent tile z%d-%d-%d",Re,Ce,Ue),console.time("drilling down")),this.splitTile(Ae.source,Re,Ce,Ue,q,W,Q),we>1&&console.timeEnd("drilling down"),this.tiles[he]?Zn(this.tiles[he],ve):null):null}}function zr(pe,q,W){return 32*((1<<pe)*W+q)+pe}function Dt(pe,q){return q?pe.properties[q]:pe.id}function po(pe,q){if(pe==null)return!0;if(pe.type==="Feature")return Dt(pe,q)!=null;if(pe.type==="FeatureCollection"){const W=new Set;for(const Q of pe.features){const le=Dt(Q,q);if(le==null||W.has(le))return!1;W.add(le)}return!0}return!1}function Mo(pe,q){const W=new Map;if(pe!=null)if(pe.type==="Feature")W.set(Dt(pe,q),pe);else for(const Q of pe.features)W.set(Dt(Q,q),Q);return W}class ia extends k{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(q,W){return d._(this,void 0,void 0,function*(){const Q=q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const le=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!le)return null;const ve=new class{constructor(ne){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=ne.length,this._features=ne}feature(ne){return new class{constructor(he){this._feature=he,this.extent=d.X,this.type=he.type,this.properties=he.tags,"id"in he&&!isNaN(he.id)&&(this.id=parseInt(he.id,10))}loadGeometry(){if(this._feature.type===1){const he=[];for(const Ae of this._feature.geometry)he.push([new d.P(Ae[0],Ae[1])]);return he}{const he=[];for(const Ae of this._feature.geometry){const Re=[];for(const Ce of Ae)Re.push(new d.P(Ce[0],Ce[1]));he.push(Re)}return he}}toGeoJSON(he,Ae,Re){return X.call(this,he,Ae,Re)}}(this._features[ne])}}(le.features);let we=at(ve);return we.byteOffset===0&&we.byteLength===we.buffer.byteLength||(we=new Uint8Array(we)),{vectorTile:ve,rawData:we.buffer}})}loadData(q){return d._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();const Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new d.bv(q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(q,this._pendingRequest),this._geoJSONIndex=q.cluster?new zt(function({superclusterOptions:we,clusterProperties:ne}){if(!ne||!we)return we;const he={},Ae={},Re={accumulated:null,zoom:0},Ce={properties:null},Ue=Object.keys(ne);for(const ft of Ue){const[Tt,Jt]=ne[ft],Ot=d.bC(Jt),pn=d.bC(typeof Tt=="string"?[Tt,["accumulated"],["get",ft]]:Tt);he[ft]=Ot.value,Ae[ft]=pn.value}return we.map=ft=>{Ce.properties=ft;const Tt={};for(const Jt of Ue)Tt[Jt]=he[Jt].evaluate(Re,Ce);return Tt},we.reduce=(ft,Tt)=>{Ce.properties=Tt;for(const Jt of Ue)Re.accumulated=ft[Jt],ft[Jt]=Ae[Jt].evaluate(Re,Ce)},we}(q)).load((yield this._pendingData).features):(le=yield this._pendingData,new cn(le,q.geojsonVtOptions)),this.loaded={};const ve={};if(Q){const we=Q.finish();we&&(ve.resourceTiming={},ve.resourceTiming[q.source]=JSON.parse(JSON.stringify(we)))}return ve}catch(ve){if(delete this._pendingRequest,d.bB(ve))return{abandoned:!0};throw ve}var le})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(q){const W=this.loaded;return W&&W[q.uid]?super.reloadTile(q):this.loadTile(q)}loadAndProcessGeoJSON(q,W){return d._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON(q,W);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(V(Q,!0),q.filter){const le=d.bC(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(we=>`${we.key}: ${we.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(we=>le.value.evaluate({zoom:0},we))}}return Q})}loadGeoJSON(q,W){return d._(this,void 0,void 0,function*(){const{promoteId:Q}=q;if(q.request){const le=yield d.h(q.request,W);return this._dataUpdateable=po(le.data,Q)?Mo(le.data,Q):void 0,le.data}if(typeof q.data=="string")try{const le=JSON.parse(q.data);return this._dataUpdateable=po(le,Q)?Mo(le,Q):void 0,le}catch{throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`)}if(!q.dataDiff)throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${q.source}`);return function(le,ve,we){var ne,he,Ae,Re;if(ve.removeAll&&le.clear(),ve.remove)for(const Ce of ve.remove)le.delete(Ce);if(ve.add)for(const Ce of ve.add){const Ue=Dt(Ce,we);Ue!=null&&le.set(Ue,Ce)}if(ve.update)for(const Ce of ve.update){let Ue=le.get(Ce.id);if(Ue==null)continue;const ft=!Ce.removeAllProperties&&(((ne=Ce.removeProperties)===null||ne===void 0?void 0:ne.length)>0||((he=Ce.addOrUpdateProperties)===null||he===void 0?void 0:he.length)>0);if((Ce.newGeometry||Ce.removeAllProperties||ft)&&(Ue=Object.assign({},Ue),le.set(Ce.id,Ue),ft&&(Ue.properties=Object.assign({},Ue.properties))),Ce.newGeometry&&(Ue.geometry=Ce.newGeometry),Ce.removeAllProperties)Ue.properties={};else if(((Ae=Ce.removeProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(const Tt of Ce.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,Tt)&&delete Ue.properties[Tt];if(((Re=Ce.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0)for(const{key:Tt,value:Jt}of Ce.addOrUpdateProperties)Ue.properties[Tt]=Jt}}(this._dataUpdateable,q.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(q){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(q){return this._geoJSONIndex.getClusterExpansionZoom(q.clusterId)}getClusterChildren(q){return this._geoJSONIndex.getChildren(q.clusterId)}getClusterLeaves(q){return this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset)}}class fo{constructor(q){this.self=q,this.actor=new d.F(q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,Q)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=Q},this.self.addProtocol=d.bi,this.self.removeProtocol=d.bj,this.self.registerRTLTextPlugin=W=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,Q)=>this._getDEMWorkerSource(W,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(W,Q)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(W,Q)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][Q.type]||!this.workerSources[W][Q.type][Q.source])return;const le=this.workerSources[W][Q.type][Q.source];delete this.workerSources[W][Q.type][Q.source],le.removeSource!==void 0&&le.removeSource(Q)})),this.actor.registerMessageHandler("RM",W=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,Q)=>d._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(W,Q)=>this._syncRTLPluginState(W,Q)),this.actor.registerMessageHandler("IS",(W,Q)=>d._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(W,Q)=>this._setImages(W,Q)),this.actor.registerMessageHandler("UL",(W,Q)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(W,Q)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(Q)}))}_setImages(q,W){return d._(this,void 0,void 0,function*(){this.availableImages[q]=W;for(const Q in this.workerSources[q]){const le=this.workerSources[q][Q];for(const ve in le)le[ve].availableImages=W}})}_syncRTLPluginState(q,W){return d._(this,void 0,void 0,function*(){if(d.bD.isParsed())return d.bD.getState();if(W.pluginStatus!=="loading")return d.bD.setState(W),W;const Q=W.pluginURL;if(this.self.importScripts(Q),d.bD.isParsed()){const le={pluginStatus:"loaded",pluginURL:Q};return d.bD.setState(le),le}throw d.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Q}`)})}_getAvailableImages(q){let W=this.availableImages[q];return W||(W=[]),W}_getLayerIndex(q){let W=this.layerIndexes[q];return W||(W=this.layerIndexes[q]=new u),W}_getWorkerSource(q,W,Q){if(this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][W]||(this.workerSources[q][W]={}),!this.workerSources[q][W][Q]){const le={sendAsync:(ve,we)=>(ve.targetMapId=q,this.actor.sendAsync(ve,we))};switch(W){case"vector":this.workerSources[q][W][Q]=new k(le,this._getLayerIndex(q),this._getAvailableImages(q));break;case"geojson":this.workerSources[q][W][Q]=new ia(le,this._getLayerIndex(q),this._getAvailableImages(q));break;default:this.workerSources[q][W][Q]=new this.externalWorkerSourceTypes[W](le,this._getLayerIndex(q),this._getAvailableImages(q))}}return this.workerSources[q][W][Q]}_getDEMWorkerSource(q,W){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][W]||(this.demWorkerSources[q][W]=new P),this.demWorkerSources[q][W]}}return d.i(self)&&(self.worker=new fo(self)),fo}),a("index",["exports","./shared"],function(d,u){var b="4.7.1";let w,I;const k={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,h)=>{const f=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),h(u.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),h=r.getContext("2d",{willReadFrequently:!0});if(!h)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,h.drawImage(v,0,0,v.width,v.height),h},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class P{static testProp(r){if(!P.docStyle)return r[0];for(let h=0;h<r.length;h++)if(r[h]in P.docStyle)return r[h];return r[0]}static create(r,h,f){const m=window.document.createElement(r);return h!==void 0&&(m.className=h),f&&f.appendChild(m),m}static createNS(r,h){return window.document.createElementNS(r,h)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(r,h){r.style[P.transformProp]=h}static addEventListener(r,h,f,m={}){r.addEventListener(h,f,"passive"in m?m:m.capture)}static removeEventListener(r,h,f,m={}){r.removeEventListener(h,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static getScale(r){const h=r.getBoundingClientRect();return{x:h.width/r.offsetWidth||1,y:h.height/r.offsetHeight||1,boundingClientRect:h}}static getPoint(r,h,f){const m=h.boundingClientRect;return new u.P((f.clientX-m.left)/h.x-r.clientLeft,(f.clientY-m.top)/h.y-r.clientTop)}static mousePos(r,h){const f=P.getScale(r);return P.getPoint(r,f,h)}static touchPos(r,h){const f=[],m=P.getScale(r);for(let y=0;y<h.length;y++)f.push(P.getPoint(r,m,h[y]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!X&&V&&(D?B(v):N=v)}};let N,V,X=!1,D=!1;function B(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,V),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(r),X=!0}var j;typeof document<"u"&&(V=document.createElement("img"),V.onload=()=>{N&&B(N),N=null,D=!0},V.onerror=()=>{X=!0,N=null},V.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,h,f,m;v.resetRequestQueue=()=>{r=[],h=0,f=0,m={}},v.addThrottleControl=M=>{const z=f++;return m[z]=M,z},v.removeThrottleControl=M=>{delete m[M],C()},v.getImage=(M,z,O=!0)=>new Promise((F,K)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),r.push({abortController:z,requestParameters:M,supportImageRefresh:O,state:"queued",onError:ee=>{K(ee)},onSuccess:ee=>{F(ee)}}),C()});const y=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:O,onError:F,onSuccess:K,abortController:ee}=M,re=O===!1&&!u.i(self)&&!u.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((ge,ye)=>ge&&ye==="accept",!0));h++;const ce=re?T(z,ee):u.m(z,ee);try{const ge=yield ce;delete M.abortController,M.state="completed",ge.data instanceof HTMLImageElement||u.b(ge.data)?K(ge):ge.data&&K({data:yield(me=ge.data,typeof createImageBitmap=="function"?u.d(me):u.f(me)),cacheControl:ge.cacheControl,expires:ge.expires})}catch(ge){delete M.abortController,F(ge)}finally{h--,C()}var me}),C=()=>{const M=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=h;z<M&&r.length>0;z++){const O=r.shift();O.abortController.signal.aborted?z--:y(O)}},T=(M,z)=>new Promise((O,F)=>{const K=new Image,ee=M.url,re=M.credentials;re&&re==="include"?K.crossOrigin="use-credentials":(re&&re==="same-origin"||!u.s(ee))&&(K.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{K.src="",F(u.c())}),K.fetchPriority="high",K.onload=()=>{K.onerror=K.onload=null,O({data:K})},K.onerror=()=>{K.onerror=K.onload=null,z.signal.aborted||F(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},K.src=ee})}(j||(j={})),j.resetRequestQueue();class G{constructor(r){this._transformRequestFn=r}transformRequest(r,h){return this._transformRequestFn&&this._transformRequestFn(r,h)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function te(v){var r=new u.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var oe,ae=function(v,r,h){return v[0]=r[0]-h[0],v[1]=r[1]-h[1],v[2]=r[2]-h[2],v};oe=new u.A(3),u.A!=Float32Array&&(oe[0]=0,oe[1]=0,oe[2]=0);var de=function(v){var r=v[0],h=v[1];return r*r+h*h};function Me(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const h=[];for(const{id:f,url:m}of v){const y=`${f}${m}`;h.indexOf(y)===-1&&(h.push(y),r.push({id:f,url:m}))}}return r}function Z(v,r,h){const f=v.split("?");return f[0]+=`${r}${h}`,f.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Ie{constructor(r,h,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(h,m)}update(r,h,f){const{width:m,height:y}=r,C=!(this.size&&this.size[0]===m&&this.size[1]===y||f),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(h&&h.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!h||h.premultiply!==!1)),C)this.size=[m,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,y,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:z,y:O}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,z,O,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,z,O,m,y,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,h,f){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),f!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,f||r),this.filter=r),h!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,h),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,h),this.wrap=h)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function je(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class $e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:h,promiseResolve:f}of this.requestors)f(this._getImagesForIds(h));this.requestors=[]}}getImage(r){const h=this.images[r];if(h&&!h.data&&h.spriteData){const f=h.spriteData;h.data=new u.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),h.spriteData=null}return h}addImage(r,h){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,h)&&(this.images[r]=h)}_validate(r,h){let f=!0;const m=h.data||h.spriteData;return this._validateStretch(h.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(h.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(h.content,h)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,h){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||h<m[1])return!1;f=m[1]}return!0}_validateContent(r,h){if(!r)return!0;if(r.length!==4)return!1;const f=h.spriteData,m=f&&f.width||h.data.width,y=f&&f.height||h.data.height;return!(r[0]<0||m<r[0]||r[1]<0||y<r[1]||r[2]<0||m<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,h,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==h.data.width||m.data.height!==h.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${h.data.width}x${h.data.height}).`);h.version=m.version+1,this.images[r]=h,this.updatedImages[r]=!0}removeImage(r){const h=this.images[r];delete this.images[r],delete this.patterns[r],h.userImage&&h.userImage.onRemove&&h.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((h,f)=>{let m=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(m=!1);this.isLoaded()||m?h(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:h})})}_getImagesForIds(r){const h={};for(const f of r){let m=this.getImage(f);m||(this.fire(new u.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?h[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return h}getPixelSize(){const{width:r,height:h}=this.atlasImage;return{width:r,height:h}}getPattern(r){const h=this.patterns[r],f=this.getImage(r);if(!f)return null;if(h&&h.position.version===f.version)return h.position;if(h)h.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},y=new u.I(m,f);this.patterns[r]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const h=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ie(r,this.atlasImage,h.RGBA),this.atlasTexture.bind(h.LINEAR,h.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:h,h:f}=u.p(r),m=this.atlasImage;m.resize({width:h||1,height:f||1});for(const y in this.patterns){const{bin:C}=this.patterns[y],T=C.x+1,M=C.y+1,z=this.getImage(y).data,O=z.width,F=z.height;u.R.copy(z,m,{x:0,y:0},{x:T,y:M},{width:O,height:F}),u.R.copy(z,m,{x:0,y:F-1},{x:T,y:M-1},{width:O,height:1}),u.R.copy(z,m,{x:0,y:0},{x:T,y:M+F},{width:O,height:1}),u.R.copy(z,m,{x:O-1,y:0},{x:T-1,y:M},{width:1,height:F}),u.R.copy(z,m,{x:0,y:0},{x:T+O,y:M},{width:1,height:F})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const h of r){if(this.callbackDispatchedThisFrame[h])continue;this.callbackDispatchedThisFrame[h]=!0;const f=this.getImage(h);f||u.w(`Image with ID: "${h}" was not found`),je(f)&&this.updateImage(h,f)}}}const Le=1e20;function Oe(v,r,h,f,m,y,C,T,M){for(let z=r;z<r+f;z++)He(v,h*y+z,y,m,C,T,M);for(let z=h;z<h+m;z++)He(v,z*y+r,1,f,C,T,M)}function He(v,r,h,f,m,y,C){y[0]=0,C[0]=-Le,C[1]=Le,m[0]=v[r];for(let T=1,M=0,z=0;T<f;T++){m[T]=v[r+T*h];const O=T*T;do{const F=y[M];z=(m[T]-m[F]+O-F*F)/(T-F)/2}while(z<=C[M]&&--M>-1);M++,y[M]=T,C[M]=z,C[M+1]=Le}for(let T=0,M=0;T<f;T++){for(;C[M+1]<T;)M++;const z=y[M],O=T-z;v[r+T*h]=m[z]+O*O}}class at{constructor(r,h){this.requestManager=r,this.localIdeographFontFamily=h,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const h=[];for(const y in r)for(const C of r[y])h.push(this._getAndCacheGlyphsPromise(y,C));const f=yield Promise.all(h),m={};for(const{stack:y,id:C,glyph:T}of f)m[y]||(m[y]={}),m[y][C]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return m})}_getAndCacheGlyphsPromise(r,h){return u._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[h];if(m!==void 0)return{stack:r,id:h,glyph:m};if(m=this._tinySDF(f,r,h),m)return f.glyphs[h]=m,{stack:r,id:h,glyph:m};const y=Math.floor(h/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[y])return{stack:r,id:h,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[y]){const T=at.loadGlyphRange(r,y,this.url,this.requestManager);f.requests[y]=T}const C=yield f.requests[y];for(const T in C)this._doesCharSupportLocalGlyph(+T)||(f.glyphs[+T]=C[+T]);return f.ranges[y]=!0,{stack:r,id:h,glyph:C[h]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,h,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let y=r.tinySDF;if(!y){let T="400";/bold/i.test(h)?T="900":/medium/i.test(h)?T="500":/light/i.test(h)&&(T="200"),y=r.tinySDF=new at.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:T})}const C=y.draw(String.fromCharCode(f));return{id:f,bitmap:new u.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}at.loadGlyphRange=function(v,r,h,f){return u._(this,void 0,void 0,function*(){const m=256*r,y=m+255,C=f.transformRequest(h.replace("{fontstack}",v).replace("{range}",`${m}-${y}`),"Glyphs"),T=yield u.l(C,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${y}`);const M={};for(const z of u.n(T.data))M[z.id]=z;return M})},at.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:h=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=h;const T=this.size=v+4*r,M=this._createCanvas(T),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${C} ${y} ${v}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:h,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(v),C=Math.ceil(h),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),M=Math.min(this.size-this.buffer,C+Math.ceil(f)),z=T+2*this.buffer,O=M+2*this.buffer,F=Math.max(z*O,0),K=new Uint8ClampedArray(F),ee={data:K,width:z,height:O,glyphWidth:T,glyphHeight:M,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(T===0||M===0)return ee;const{ctx:re,buffer:ce,gridInner:me,gridOuter:ge}=this;re.clearRect(ce,ce,T,M),re.fillText(v,ce,ce+C);const ye=re.getImageData(ce,ce,T,M);ge.fill(Le,0,F),me.fill(0,0,F);for(let se=0;se<M;se++)for(let xe=0;xe<T;xe++){const ke=ye.data[4*(se*T+xe)+3]/255;if(ke===0)continue;const Pe=(se+ce)*z+xe+ce;if(ke===1)ge[Pe]=0,me[Pe]=Le;else{const Ne=.5-ke;ge[Pe]=Ne>0?Ne*Ne:0,me[Pe]=Ne<0?Ne*Ne:0}}Oe(ge,0,0,z,O,z,this.f,this.v,this.z),Oe(me,ce,ce,T,M,z,this.f,this.v,this.z);for(let se=0;se<F;se++){const xe=Math.sqrt(ge[se])-Math.sqrt(me[se]);K[se]=Math.round(255-255*(xe/this.radius+this.cutoff))}return ee}};class De{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,h){return u.x(r.expression.evaluate(h))}interpolate(r,h,f){return{x:u.y.number(r.x,h.x,f),y:u.y.number(r.y,h.y,f),z:u.y.number(r.z,h.z,f)}}}let qe;class pt extends u.E{constructor(r){super(),qe=qe||new u.q({anchor:new u.D(u.v.light.anchor),position:new De,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(qe),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,h={}){if(!this._validate(u.r,r,h))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,h,f){return(!f||f.validate!==!1)&&u.t(this,r.call(u.u,{value:h,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Ct=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Lt extends u.E{constructor(r){super(),this._transitionable=new u.T(Ct),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(r,h={}){if(!this._validate(u.B,r,h)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,h,f={}){return(f==null?void 0:f.validate)!==!1&&u.t(this,r.call(u.u,u.e({value:h,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class jt{constructor(r,h){this.width=r,this.height=h,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,h){const f=r.join(",")+String(h);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,h)),this.dashEntry[f]}getDashRanges(r,h,f){const m=[];let y=r.length%2==1?-r[r.length-1]*f:0,C=r[0]*f,T=!0;m.push({left:y,right:C,isDash:T,zeroLength:r[0]===0});let M=r[0];for(let z=1;z<r.length;z++){T=!T;const O=r[z];y=M*f,M+=O,C=M*f,m.push({left:y,right:C,isDash:T,zeroLength:O===0})}return m}addRoundDash(r,h,f){const m=h/2;for(let y=-f;y<=f;y++){const C=this.width*(this.nextRow+f+y);let T=0,M=r[T];for(let z=0;z<this.width;z++){z/M.right>1&&(M=r[++T]);const O=Math.abs(z-M.left),F=Math.abs(z-M.right),K=Math.min(O,F);let ee;const re=y/f*(m+1);if(M.isDash){const ce=m-Math.abs(re);ee=Math.sqrt(K*K+ce*ce)}else ee=m-Math.sqrt(K*K+re*re);this.data[C+z]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(r){for(let T=r.length-1;T>=0;--T){const M=r[T],z=r[T+1];M.zeroLength?r.splice(T,1):z&&z.isDash===M.isDash&&(z.left=M.left,r.splice(T,1))}const h=r[0],f=r[r.length-1];h.isDash===f.isDash&&(h.left=f.left-this.width,f.right=h.right+this.width);const m=this.width*this.nextRow;let y=0,C=r[y];for(let T=0;T<this.width;T++){T/C.right>1&&(C=r[++y]);const M=Math.abs(T-C.left),z=Math.abs(T-C.right),O=Math.min(M,z);this.data[m+T]=Math.max(0,Math.min(255,(C.isDash?O:-O)+128))}}addDash(r,h){const f=h?7:0,m=2*f+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let T=0;T<r.length;T++)y+=r[T];if(y!==0){const T=this.width/y,M=this.getDashRanges(r,this.width,T);h?this.addRoundDash(M,T,f):this.addRegularDash(M)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:y};return this.nextRow+=m,this.dirty=!0,C}bind(r){const h=r.gl;this.texture?(h.bindTexture(h.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.width,this.height,h.ALPHA,h.UNSIGNED_BYTE,this.data))):(this.texture=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.texture),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,h.LINEAR),h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.LINEAR),h.texImage2D(h.TEXTURE_2D,0,h.ALPHA,this.width,this.height,0,h.ALPHA,h.UNSIGNED_BYTE,this.data))}}const zt="maplibre_preloaded_worker_pool";class Kt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Kt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(h=>{h.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zt]}numActive(){return Object.keys(this.active).length}}const dn=Math.floor(k.hardwareConcurrency/2);let tn,jn;function kn(){return tn||(tn=new Kt),tn}Kt.workerCount=u.C(globalThis)?Math.max(Math.min(dn,3),1):1;class Vt{constructor(r,h){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=h;const f=this.workerPool.acquire(h);for(let m=0;m<f.length;m++){const y=new u.F(f[m],h);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,h){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:r,data:h}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(h=>{h.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,h){for(const f of this.actors)f.registerMessageHandler(r,h)}}function nn(){return jn||(jn=new Vt(kn(),u.G),jn.registerMessageHandler("GR",(v,r,h)=>u.m(r,h))),jn}function Wt(v,r){const h=u.H();return u.J(h,h,[1,1,0]),u.K(h,h,[.5*v.width,.5*v.height,1]),u.L(h,h,v.calculatePosMatrix(r.toUnwrapped()))}function _n(v,r,h,f,m,y){const C=function(F,K,ee){if(F)for(const re of F){const ce=K[re];if(ce&&ce.source===ee&&ce.type==="fill-extrusion")return!0}else for(const re in K){const ce=K[re];if(ce.source===ee&&ce.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,v.id),T=y.maxPitchScaleFactor(),M=v.tilesIn(f,T,C);M.sort(yt);const z=[];for(const F of M)z.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(r,h,v._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,y,T,Wt(v.transform,F.tileID))});const O=function(F){const K={},ee={};for(const re of F){const ce=re.queryResults,me=re.wrappedTileID,ge=ee[me]=ee[me]||{};for(const ye in ce){const se=ce[ye],xe=ge[ye]=ge[ye]||{},ke=K[ye]=K[ye]||[];for(const Pe of se)xe[Pe.featureIndex]||(xe[Pe.featureIndex]=!0,ke.push(Pe))}}return K}(z);for(const F in O)O[F].forEach(K=>{const ee=K.feature,re=v.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=re});return O}function yt(v,r){const h=v.tileID,f=r.tileID;return h.overscaledZ-f.overscaledZ||h.canonical.y-f.canonical.y||h.wrap-f.wrap||h.canonical.x-f.canonical.x}function Rt(v,r,h){return u._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield u.h(r.transformRequest(v.url,"Source"),h)).data:yield k.frameAsync(h),!f)return null;const m=u.M(u.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(y=>y.id)),m})}class Se{constructor(r,h){r&&(h?this.setSouthWest(r).setNorthEast(h):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const h=this._sw,f=this._ne;let m,y;if(r instanceof u.N)m=r,y=r;else{if(!(r instanceof Se))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Se.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(m=r._sw,y=r._ne,!m||!y)return this}return h||f?(h.lng=Math.min(m.lng,h.lng),h.lat=Math.min(m.lat,h.lat),f.lng=Math.max(y.lng,f.lng),f.lat=Math.max(y.lat,f.lat)):(this._sw=new u.N(m.lng,m.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:h,lat:f}=u.N.convert(r);let m=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof Se?r:r&&new Se(r)}static fromLngLat(r,h=0){const f=360*h/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new Se(new u.N(r.lng-m,r.lat-f),new u.N(r.lng+m,r.lat+f))}adjustAntiMeridian(){const r=new u.N(this._sw.lng,this._sw.lat),h=new u.N(this._ne.lng,this._ne.lat);return new Se(r,r.lng>h.lng?new u.N(h.lng+360,h.lat):h)}}class ur{constructor(r,h,f){this.bounds=Se.convert(this.validateBounds(r)),this.minzoom=h||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const h=Math.pow(2,r.z),f=Math.floor(u.O(this.bounds.getWest())*h),m=Math.floor(u.Q(this.bounds.getNorth())*h),y=Math.ceil(u.O(this.bounds.getEast())*h),C=Math.ceil(u.Q(this.bounds.getSouth())*h);return r.x>=f&&r.x<y&&r.y>=m&&r.y<C}}class gn extends u.E{constructor(r,h,f,m){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(h,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},h),this._collectResourceTiming=h.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new ur(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(h,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,C)=>{r.reloadPromise={resolve:y,reject:C}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:m,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,h){if(h&&h.resourceTiming&&(r.resourceTiming=h.resourceTiming),h&&this.map._refreshExpiredTiles&&r.setExpiryData(h),r.loadVectorData(h,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ht extends u.E{constructor(r,h,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},h),u.e(this,u.M(h,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield Rt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new ur(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield j.getImage(this.map._requestManager.transformRequest(h,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,y=m.gl,C=f.data;r.texture=this.map.painter.getTileTexture(C.width),r.texture?r.texture.update(C,{useMipmap:!0}):(r.texture=new Ie(m,C,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class qt extends ht{constructor(r,h,f,m){super(r,h,f,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},h),this.encoding=h.encoding||"mapbox",this.redFactor=h.redFactor,this.greenFactor=h.greenFactor,this.blueFactor=h.blueFactor,this.baseShift=h.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const h=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(h,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield j.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const C=u.b(y)&&u.U()?y:yield this.readImageNow(y),T={type:this.type,uid:r.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"LDT",data:T});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const h=r.width+2,f=r.height+2;try{return new u.R({width:h,height:f},yield u.W(r,-1,-1,h,f))}catch{}}return k.getImageData(r,1)})}_getNeighboringTiles(r){const h=r.canonical,f=Math.pow(2,h.z),m=(h.x-1+f)%f,y=h.x===0?r.wrap-1:r.wrap,C=(h.x+1+f)%f,T=h.x+1===f?r.wrap+1:r.wrap,M={};return M[new u.S(r.overscaledZ,y,h.z,m,h.y).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,h.z,C,h.y).key]={backfilled:!1},h.y>0&&(M[new u.S(r.overscaledZ,y,h.z,m,h.y-1).key]={backfilled:!1},M[new u.S(r.overscaledZ,r.wrap,h.z,h.x,h.y-1).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,h.z,C,h.y-1).key]={backfilled:!1}),h.y+1<f&&(M[new u.S(r.overscaledZ,y,h.z,m,h.y+1).key]={backfilled:!1},M[new u.S(r.overscaledZ,r.wrap,h.z,h.x,h.y+1).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,h.z,C,h.y+1).key]={backfilled:!1}),M}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class un extends u.E{constructor(r,h,f,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=h.data,this._options=u.e({},h),this._collectResourceTiming=h.collectResourceTiming,h.maxzoom!==void 0&&(this.maxzoom=h.maxzoom),h.type&&(this.type=h.type),h.attribution&&(this.attribution=h.attribution),this.promoteId=h.promoteId;const y=u.X/this.tileSize;h.clusterMaxZoom!==void 0&&this.maxzoom<=h.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${h.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:h.cluster||!1,geojsonVtOptions:{buffer:(h.buffer!==void 0?h.buffer:128)*y,tolerance:(h.tolerance!==void 0?h.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:h.lineMetrics||!1,generateId:h.generateId||!1},superclusterOptions:{maxZoom:h.clusterMaxZoom!==void 0?h.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,h.clusterMinPoints||2),extent:u.X,radius:(h.clusterRadius||50)*y,log:!1,generateId:h.generateId||!1},clusterProperties:h.clusterProperties,filter:h.filter},h.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,h,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:h,offset:f}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const h=u.e({type:this.type},this.workerOptions);r?h.dataDiff=r:typeof this._data=="string"?(h.request=this.map._requestManager.transformRequest(k.resolveURL(this._data),"Source"),h.request.collectResourceTiming=this._collectResourceTiming):h.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:h});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(y,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const h=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:h,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,h==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ir=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bt extends u.E{constructor(r,h,f,m){super(),this.id=r,this.dispatcher=f,this.coordinates=h.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=h}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const h=yield j.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,h&&h.data&&(this.image=h.data,r&&(this.coordinates=r),this._finishLoading())}catch(h){this._request=null,this._loaded=!0,this.fire(new u.j(h))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const h=r.map(u.Z.fromLngLat);this.tileID=function(m){let y=1/0,C=1/0,T=-1/0,M=-1/0;for(const K of m)y=Math.min(y,K.x),C=Math.min(C,K.y),T=Math.max(T,K.x),M=Math.max(M,K.y);const z=Math.max(T-y,M-C),O=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),F=Math.pow(2,O);return new u.a1(O,Math.floor((y+T)/2*F),Math.floor((C+M)/2*F))}(h),this.minzoom=this.maxzoom=this.tileID.z;const f=h.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,h=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ie(r,this.image,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class An extends bt{constructor(r,h,f,m){super(r,h,f,m),this.roundZoom=!0,this.type="video",this.options=h}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const h of r.urls)this.urls.push(this.map._requestManager.transformRequest(h,"Source").url);try{const h=yield u.a3(this.urls);if(this._loaded=!0,!h)return;this.video=h,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(h){this.fire(new u.j(h))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const h=this.video.seekable;r<h.start(0)||r>h.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${h.start(0)} and ${h.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,h=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE),h.texSubImage2D(h.TEXTURE_2D,0,0,0,h.RGBA,h.UNSIGNED_BYTE,this.video)):(this.texture=new Ie(r,this.video,h.RGBA),this.texture.bind(h.LINEAR,h.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class yr extends bt{constructor(r,h,f,m){super(r,h,f,m),h.coordinates?Array.isArray(h.coordinates)&&h.coordinates.length===4&&!h.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(C=>typeof C!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),h.animate&&typeof h.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),h.canvas?typeof h.canvas=="string"||h.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=h,this.animate=h.animate===void 0||h.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const h=this.map.painter.context,f=h.gl;this.boundsBuffer||(this.boundsBuffer=h.createVertexBuffer(this._boundsArray,ir.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ie(h,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Jr={},vr=v=>{switch(v){case"geojson":return un;case"image":return bt;case"raster":return ht;case"raster-dem":return qt;case"vector":return gn;case"video":return An;case"canvas":return yr}return Jr[v]},Ge="RTLPluginLoaded";class cr extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=nn()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(h=>{throw this.status="error",h})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(h,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=k.resolveURL(h),!this.url)throw new Error(`requested url ${h} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Ge))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Zn=null;function an(){return Zn||(Zn=new cr),Zn}class Lr{constructor(r,h){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const h=r+this.timeAdded;h<this.fadeEndTime||(this.fadeEndTime=h)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,h,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,y){const C={};if(!y)return C;for(const T of m){const M=T.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(z=>M.filter(O=>O.id===z)[0]));for(const z of M)C[z.id]=T}}return C}(r.buckets,h.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!f)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,an().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,h.style.getLayer(m).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const h=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ie(r,this.imageAtlas.image,h.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ie(r,this.glyphAtlasImage,h.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,h,f,m,y,C,T,M,z,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:C,tileSize:this.tileSize,pixelPosMatrix:O,transform:M,params:T,queryPadding:this.queryPadding*z},r,h,f):{}}querySourceFeatures(r,h){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),y=h&&h.sourceLayer?h.sourceLayer:"",C=m._geojsonTileLayer||m[y];if(!C)return;const T=u.a7(h&&h.filter),{z:M,x:z,y:O}=this.tileID.canonical,F={z:M,x:z,y:O};for(let K=0;K<C.length;K++){const ee=C.feature(K);if(T.needGeometry){const me=u.a8(ee,!0);if(!T.filter(new u.z(this.tileID.overscaledZ),me,this.tileID.canonical))continue}else if(!T.filter(new u.z(this.tileID.overscaledZ),ee))continue;const re=f.getId(ee,y),ce=new u.a9(ee,M,z,O,re);ce.tile=F,r.push(ce)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const h=this.expirationTime;if(r.cacheControl){const f=u.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(h)if(this.expirationTime<h)m=!0;else{const y=this.expirationTime-h;y?this.expirationTime=f+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,h){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!h.style.hasLayer(m))continue;const y=this.buckets[m],C=y.layers[0].sourceLayer||"_geojsonTileLayer",T=f[C],M=r[C];if(!T||!M||Object.keys(M).length===0)continue;y.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=h&&h.style&&h.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<k.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=k.now()+r}setDependencies(r,h){const f={};for(const m of h)f[m]=!0;this.dependencies[r]=f}hasDependency(r,h){for(const f of r){const m=this.dependencies[f];if(m){for(const y of h)if(m[y])return!0}}return!1}}class Ke{constructor(r,h){this.max=r,this.onRemove=h,this.reset()}reset(){for(const r in this.data)for(const h of this.data[r])h.timeout&&clearTimeout(h.timeout),this.onRemove(h.value);return this.data={},this.order=[],this}add(r,h,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:h,timeout:void 0};if(f!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},f)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const h=this.data[r].shift();return h.timeout&&clearTimeout(h.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),h.value}getByKey(r){const h=this.data[r];return h?h[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,h){if(!this.has(r))return this;const f=r.wrapped().key,m=h===void 0?0:this.data[f].indexOf(h),y=this.data[f][m];return this.data[f].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(y.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const h=this._getAndRemoveByKey(this.order[0]);h&&this.onRemove(h)}return this}filter(r){const h=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||h.push(m);for(const f of h)this.remove(f.value.tileID,f)}}class Xe{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,h,f){const m=String(h);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},u.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==m&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const y in this.state[r][m])f[y]||(this.deletedStates[r][m][y]=null)}else for(const y in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][y]===null&&delete this.deletedStates[r][m][y]}removeFeatureState(r,h,f){if(this.deletedStates[r]===null)return;const m=String(h);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&h!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(h!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,h){const f=String(h),m=u.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][h];if(y===null)return{};for(const C in y)delete m[C]}return m}initializeTileState(r,h){r.setFeatureState(this.state,h)}coalesceChanges(r,h){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),u.e(this.state[m][C],this.stateChanges[m][C]),y[C]=this.state[m][C];f[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const C in this.state[m])y[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const T of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][T];y[C]=this.state[m][C]}f[m]=f[m]||{},u.e(f[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,h)}}class it extends u.E{constructor(r,h,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,C,T)=>{const M=new(vr(y.type))(m,y,C,T);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,h,f,this),this._tiles={},this._cache=new Ke(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Xe,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const h=this._tiles[r];if(h.state!=="loaded"&&h.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,h,f){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,h,f)}catch(m){r.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const h in this._tiles){const f=this._tiles[h];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(cn).map(r=>r.key)}getRenderableIds(r){const h=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&h.push(this._tiles[f]);return r?h.sort((f,m)=>{const y=f.tileID,C=m.tileID,T=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new u.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-C.overscaledZ||M.y-T.y||M.x-T.x}).map(f=>f.tileID.key):h.map(f=>f.tileID).sort(cn).map(f=>f.key)}hasRenderableParent(r){const h=this.findLoadedParent(r,0);return!!h&&this._isIdRenderable(h.tileID.key)}_isIdRenderable(r,h){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(h||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,h){return u._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=h),yield this._loadTile(f,r,h))})}_tileLoaded(r,h,f){r.timeAdded=k.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(h,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const h=this.getRenderableIds();for(let m=0;m<h.length;m++){const y=h[m];if(r.neighboringTiles&&r.neighboringTiles[y]){const C=this.getTileByID(y);f(r,C),f(C,r)}}function f(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=y.tileID.canonical.x-m.tileID.canonical.x;const T=y.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),z=y.tileID.key;C===0&&T===0||Math.abs(T)>1||(Math.abs(C)>1&&(Math.abs(C+M)===1?C+=M:Math.abs(C-M)===1&&(C-=M)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,C,T),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,h,f,m){for(const y in this._tiles){let C=this._tiles[y];if(m[y]||!C.hasData()||C.tileID.overscaledZ<=h||C.tileID.overscaledZ>f)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>h+1;){const z=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[z.key],C&&C.hasData()&&(T=z)}let M=T;for(;M.overscaledZ>h;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){m[T.key]=T;break}}}findLoadedParent(r,h){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=h?f:null}for(let f=r.overscaledZ-1;f>=h;f--){const m=r.scaledTo(f),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const h=this._tiles[r.key];return h&&h.hasData()?h:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const h=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(h*f*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(r){const h=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,h){const f={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+h),f[y.tileID.key]=y}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,h,f,m,y,C){const T={},M={},z=Object.keys(r),O=k.now();for(const F of z){const K=r[F],ee=this._tiles[F];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=O)continue;const re=this.findLoadedParent(K,h),ce=this.findLoadedSibling(K),me=re||ce||null;me&&(this._addTile(me.tileID),T[me.tileID.key]=me.tileID),M[F]=K}this._retainLoadedChildren(M,m,f,r);for(const F in T)r[F]||(this._coveredTiles[F]=!0,r[F]=T[F]);if(C){const F={},K={};for(const ee of y)this._tiles[ee.key].hasData()?F[ee.key]=ee:K[ee.key]=ee;for(const ee in K){const re=K[ee].children(this._source.maxzoom);this._tiles[re[0].key]&&this._tiles[re[1].key]&&this._tiles[re[2].key]&&this._tiles[re[3].key]&&(F[re[0].key]=r[re[0].key]=re[0],F[re[1].key]=r[re[1].key]=re[1],F[re[2].key]=r[re[2].key]=re[2],F[re[3].key]=r[re[3].key]=re[3],delete K[ee])}for(const ee in K){const re=K[ee],ce=this.findLoadedParent(re,this._source.minzoom),me=this.findLoadedSibling(re),ge=ce||me||null;if(ge){F[ge.tileID.key]=r[ge.tileID.key]=ge.tileID;for(const ye in F)F[ye].isChildOf(ge.tileID)&&delete F[ye]}}for(const ee in this._tiles)F[ee]||(this._coveredTiles[ee]=!0)}}update(r,h){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=h,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new u.S(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:h}),this._source.hasTile&&(f=f.filter(O=>this._source.hasTile(O)))):f=[];const m=r.coveringZoomLevel(this._source),y=Math.max(m-it.maxOverzooming,this._source.minzoom),C=Math.max(m+it.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const F of f)if(F.canonical.z>this._source.minzoom){const K=F.scaledTo(F.canonical.z-1);O[K.key]=K;const ee=F.scaledTo(Math.max(this._source.minzoom,Math.min(F.canonical.z,5)));O[ee.key]=ee}f=f.concat(Object.values(O))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);zr(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,C,m,f,h);for(const O in M)this._tiles[O].clearFadeHold();const z=u.ab(this._tiles,M);for(const O of z){const F=this._tiles[O];F.hasSymbolBuckets&&!F.holdingForFade()?F.setHoldDuration(this.map._fadeDuration):F.hasSymbolBuckets&&!F.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,h){var f;const m={},y={},C=Math.max(h-it.maxOverzooming,this._source.minzoom),T=Math.max(h+it.maxUnderzooming,this._source.minzoom),M={};for(const z of r){const O=this._addTile(z);m[z.key]=z,O.hasData()||h<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,h,T,m);for(const z of r){let O=this._tiles[z.key];if(O.hasData())continue;if(h+1>this._source.maxzoom){const K=z.children(this._source.maxzoom)[0],ee=this.getTile(K);if(ee&&ee.hasData()){m[K.key]=K;continue}}else{const K=z.children(this._source.maxzoom);if(m[K[0].key]&&m[K[1].key]&&m[K[2].key]&&m[K[3].key])continue}let F=O.wasRequested();for(let K=z.overscaledZ-1;K>=C;--K){const ee=z.scaledTo(K);if(y[ee.key])break;if(y[ee.key]=!0,O=this.getTile(ee),!O&&F&&(O=this._addTile(ee)),O){const re=O.hasData();if((re||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||F)&&(m[ee.key]=ee),F=O.wasRequested(),re)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const h=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}h.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(y),f)break;m=y}for(const y of h)this._loadedParentTiles[y]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const h=this._tiles[r].tileID,f=this._getLoadedTile(h);this._loadedSiblingTiles[h.key]=f}}_addTile(r){let h=this._tiles[r.key];if(h)return h;h=this._cache.getAndRemove(r),h&&(this._setTileReloadTimer(r.key,h),h.tileID=r,this._state.initializeTileState(h,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,h)));const f=h;return h||(h=new Lr(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(h,r.key,h.state)),h.uses++,this._tiles[r.key]=h,f||this._source.fire(new u.k("dataloading",{tile:h,coord:h.tileID,dataType:"source"})),h}_setTileReloadTimer(r,h){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=h.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const h=this._tiles[r];h&&(h.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),h.uses>0||(h.hasData()&&h.state!=="reloading"?this._cache.add(h.tileID,h,h.getExpiryTimeout()):(h.aborted=!0,this._abortTile(h),this._unloadTile(h))))}_dataHandler(r){const h=r.sourceDataType;r.dataType==="source"&&h==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&h==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,h,f){const m=[],y=this.transform;if(!y)return m;const C=f?y.getCameraQueryGeometry(r):r,T=r.map(re=>y.pointCoordinate(re,this.terrain)),M=C.map(re=>y.pointCoordinate(re,this.terrain)),z=this.getIds();let O=1/0,F=1/0,K=-1/0,ee=-1/0;for(const re of M)O=Math.min(O,re.x),F=Math.min(F,re.y),K=Math.max(K,re.x),ee=Math.max(ee,re.y);for(let re=0;re<z.length;re++){const ce=this._tiles[z[re]];if(ce.holdingForFade())continue;const me=ce.tileID,ge=Math.pow(2,y.zoom-ce.tileID.overscaledZ),ye=h*ce.queryPadding*u.X/ce.tileSize/ge,se=[me.getTilePoint(new u.Z(O,F)),me.getTilePoint(new u.Z(K,ee))];if(se[0].x-ye<u.X&&se[0].y-ye<u.X&&se[1].x+ye>=0&&se[1].y+ye>=0){const xe=T.map(Pe=>me.getTilePoint(Pe)),ke=M.map(Pe=>me.getTilePoint(Pe));m.push({tile:ce,tileID:me,queryGeometry:xe,cameraQueryGeometry:ke,scale:ge})}}return m}getVisibleCoordinates(r){const h=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of h)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return h}hasTransition(){if(this._source.hasTransition())return!0;if(zr(this._source.type)){const r=k.now();for(const h in this._tiles)if(this._tiles[h].fadeEndTime>=r)return!0}return!1}setFeatureState(r,h,f){this._state.updateState(r=r||"_geojsonTileLayer",h,f)}removeFeatureState(r,h,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",h,f)}getFeatureState(r,h){return this._state.getState(r=r||"_geojsonTileLayer",h)}setDependencies(r,h,f){const m=this._tiles[r];m&&m.setDependencies(h,f)}reloadTilesForDependencies(r,h){for(const f in this._tiles)this._tiles[f].hasDependency(r,h)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,h))}}function cn(v,r){const h=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||f-h||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function zr(v){return v==="raster"||v==="image"||v==="video"}it.maxOverzooming=10,it.maxUnderzooming=3;class Dt{constructor(r,h){this.reset(r,h)}reset(r,h){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(h||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let h=1,f=this._distances[h];const m=r*this.paddedLength+this.padding;for(;f<m&&h<this._distances.length;)f=this._distances[++h];const y=h-1,C=this._distances[y],T=f-C,M=T>0?(m-C)/T:0;return this.points[y].mult(1-M).add(this.points[h].mult(M))}}function po(v,r){let h=!0;return v==="always"||v!=="never"&&r!=="never"||(h=!1),h}class Mo{constructor(r,h,f){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(h/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=h,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/h,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,h,f,m,y){this._forEachCell(h,f,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(r,h,f,m){this._forEachCell(h-m,f-m,h+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(h),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,h,f,m,y,C){this.boxCells[y].push(C)}_insertCircleCell(r,h,f,m,y,C){this.circleCells[y].push(C)}_query(r,h,f,m,y,C,T){if(f<0||r>this.width||m<0||h>this.height)return[];const M=[];if(r<=0&&h<=0&&this.width<=f&&this.height<=m){if(y)return[{key:null,x1:r,y1:h,x2:f,y2:m}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const O=this.circles[3*z],F=this.circles[3*z+1],K=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:O-K,y1:F-K,x2:O+K,y2:F+K})}}else this._forEachCell(r,h,f,m,this._queryCell,M,{hitTest:y,overlapMode:C,seenUids:{box:{},circle:{}}},T);return M}query(r,h,f,m){return this._query(r,h,f,m,!1,null)}hitTest(r,h,f,m,y,C){return this._query(r,h,f,m,!0,y,C).length>0}hitTestCircle(r,h,f,m,y){const C=r-f,T=r+f,M=h-f,z=h+f;if(T<0||C>this.width||z<0||M>this.height)return!1;const O=[];return this._forEachCell(C,M,T,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:r,y:h,radius:f},seenUids:{box:{},circle:{}}},y),O.length>0}_queryCell(r,h,f,m,y,C,T,M){const{seenUids:z,hitTest:O,overlapMode:F}=T,K=this.boxCells[y];if(K!==null){const re=this.bboxes;for(const ce of K)if(!z.box[ce]){z.box[ce]=!0;const me=4*ce,ge=this.boxKeys[ce];if(r<=re[me+2]&&h<=re[me+3]&&f>=re[me+0]&&m>=re[me+1]&&(!M||M(ge))&&(!O||!po(F,ge.overlapMode))&&(C.push({key:ge,x1:re[me],y1:re[me+1],x2:re[me+2],y2:re[me+3]}),O))return!0}}const ee=this.circleCells[y];if(ee!==null){const re=this.circles;for(const ce of ee)if(!z.circle[ce]){z.circle[ce]=!0;const me=3*ce,ge=this.circleKeys[ce];if(this._circleAndRectCollide(re[me],re[me+1],re[me+2],r,h,f,m)&&(!M||M(ge))&&(!O||!po(F,ge.overlapMode))){const ye=re[me],se=re[me+1],xe=re[me+2];if(C.push({key:ge,x1:ye-xe,y1:se-xe,x2:ye+xe,y2:se+xe}),O)return!0}}}return!1}_queryCellCircle(r,h,f,m,y,C,T,M){const{circle:z,seenUids:O,overlapMode:F}=T,K=this.boxCells[y];if(K!==null){const re=this.bboxes;for(const ce of K)if(!O.box[ce]){O.box[ce]=!0;const me=4*ce,ge=this.boxKeys[ce];if(this._circleAndRectCollide(z.x,z.y,z.radius,re[me+0],re[me+1],re[me+2],re[me+3])&&(!M||M(ge))&&!po(F,ge.overlapMode))return C.push(!0),!0}}const ee=this.circleCells[y];if(ee!==null){const re=this.circles;for(const ce of ee)if(!O.circle[ce]){O.circle[ce]=!0;const me=3*ce,ge=this.circleKeys[ce];if(this._circlesCollide(re[me],re[me+1],re[me+2],z.x,z.y,z.radius)&&(!M||M(ge))&&!po(F,ge.overlapMode))return C.push(!0),!0}}}_forEachCell(r,h,f,m,y,C,T,M){const z=this._convertToXCellCoord(r),O=this._convertToYCellCoord(h),F=this._convertToXCellCoord(f),K=this._convertToYCellCoord(m);for(let ee=z;ee<=F;ee++)for(let re=O;re<=K;re++)if(y.call(this,r,h,f,m,this.xCellCount*re+ee,C,T,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,h,f,m,y,C){const T=m-r,M=y-h,z=f+C;return z*z>T*T+M*M}_circleAndRectCollide(r,h,f,m,y,C,T){const M=(C-m)/2,z=Math.abs(r-(m+M));if(z>M+f)return!1;const O=(T-y)/2,F=Math.abs(h-(y+O));if(F>O+f)return!1;if(z<=M||F<=O)return!0;const K=z-M,ee=F-O;return K*K+ee*ee<=f*f}}function ia(v,r,h,f,m){const y=u.H();return r?(u.K(y,y,[1/m,1/m,1]),h||u.ad(y,y,f.angle)):u.L(y,f.labelPlaneMatrix,v),y}function fo(v,r,h,f,m){if(r){const y=u.ae(v);return u.K(y,y,[m,m,1]),h||u.ad(y,y,-f.angle),y}return f.glCoordMatrix}function pe(v,r,h,f){let m;f?(m=[v,r,f(v,r),1],u.af(m,m,h)):(m=[v,r,0,1],Jt(m,m,h));const y=m[3];return{point:new u.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function q(v,r){return .5+v/r*.5}function W(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function Q(v,r,h,f,m,y,C,T,M,z,O,F,K,ee,re){const ce=f?v.textSizeData:v.iconSizeData,me=u.ag(ce,h.transform.zoom),ge=[256/h.width*2+1,256/h.height*2+1],ye=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ye.clear();const se=v.lineVertexArray,xe=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,ke=h.transform.width/h.transform.height;let Pe=!1;for(let Ne=0;Ne<xe.length;Ne++){const Ze=xe.get(Ne);if(Ze.hidden||Ze.writingMode===u.ah.vertical&&!Pe){Tt(Ze.numGlyphs,ye);continue}Pe=!1;const nt=pe(Ze.anchorX,Ze.anchorY,r,re);if(!W(nt.point,ge)){Tt(Ze.numGlyphs,ye);continue}const ct=q(h.transform.cameraToCenterDistance,nt.signedDistanceFromCamera),Qe=u.ai(ce,me,Ze),Je=C?Qe/ct:Qe*ct,_t={getElevation:re,labelPlaneMatrix:m,lineVertexArray:se,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new u.P(Ze.anchorX,Ze.anchorY),unwrappedTileID:O,width:F,height:K,translation:ee},Nt=we(_t,Ze,Je,!1,T,r,y,v.glyphOffsetArray,ye,ke,M);Pe=Nt.useVertical,(Nt.notEnoughRoom||Pe||Nt.needsFlipping&&we(_t,Ze,Je,!0,T,r,y,v.glyphOffsetArray,ye,ke,M).notEnoughRoom)&&Tt(Ze.numGlyphs,ye)}f?v.text.dynamicLayoutVertexBuffer.updateData(ye):v.icon.dynamicLayoutVertexBuffer.updateData(ye)}function le(v,r,h,f,m,y,C,T){const M=y.glyphStartIndex+y.numGlyphs,z=y.lineStartIndex,O=y.lineStartIndex+y.lineLength,F=r.getoffsetX(y.glyphStartIndex),K=r.getoffsetX(M-1),ee=Ue(v*F,h,f,m,y.segment,z,O,T,C);if(!ee)return null;const re=Ue(v*K,h,f,m,y.segment,z,O,T,C);return re?T.projectionCache.anyProjectionOccluded?null:{first:ee,last:re}:null}function ve(v,r,h,f){return v===u.ah.horizontal&&Math.abs(h.y-r.y)>Math.abs(h.x-r.x)*f?{useVertical:!0}:(v===u.ah.vertical?r.y<h.y:r.x>h.x)?{needsFlipping:!0}:null}function we(v,r,h,f,m,y,C,T,M,z,O){const F=h/24,K=r.lineOffsetX*F,ee=r.lineOffsetY*F;let re;if(r.numGlyphs>1){const ce=r.glyphStartIndex+r.numGlyphs,me=r.lineStartIndex,ge=r.lineStartIndex+r.lineLength,ye=le(F,T,K,ee,f,r,O,v);if(!ye)return{notEnoughRoom:!0};const se=pe(ye.first.point.x,ye.first.point.y,C,v.getElevation).point,xe=pe(ye.last.point.x,ye.last.point.y,C,v.getElevation).point;if(m&&!f){const ke=ve(r.writingMode,se,xe,z);if(ke)return ke}re=[ye.first];for(let ke=r.glyphStartIndex+1;ke<ce-1;ke++)re.push(Ue(F*T.getoffsetX(ke),K,ee,f,r.segment,me,ge,v,O));re.push(ye.last)}else{if(m&&!f){const me=pe(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,ge=r.lineStartIndex+r.segment+1,ye=new u.P(v.lineVertexArray.getx(ge),v.lineVertexArray.gety(ge)),se=pe(ye.x,ye.y,y,v.getElevation),xe=se.signedDistanceFromCamera>0?se.point:function(Pe,Ne,Ze,nt,ct,Qe){return ne(Pe,Ne,Ze,1,ct,Qe)}(v.tileAnchorPoint,ye,me,0,y,v),ke=ve(r.writingMode,me,xe,z);if(ke)return ke}const ce=Ue(F*T.getoffsetX(r.glyphStartIndex),K,ee,f,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,O);if(!ce||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};re=[ce]}for(const ce of re)u.aj(M,ce.point,ce.angle);return{}}function ne(v,r,h,f,m,y){const C=v.add(v.sub(r)._unit()),T=m!==void 0?pe(C.x,C.y,m,y.getElevation).point:Ae(C.x,C.y,y).point,M=h.sub(T);return h.add(M._mult(f/M.mag()))}function he(v,r,h){const f=r.projectionCache;if(f.projections[v])return f.projections[v];const m=new u.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),y=Ae(m.x,m.y,r);if(y.signedDistanceFromCamera>0)return f.projections[v]=y.point,f.anyProjectionOccluded=f.anyProjectionOccluded||y.isOccluded,y.point;const C=v-h.direction;return function(T,M,z,O,F){return ne(T,M,z,O,void 0,F)}(h.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(C),r.lineVertexArray.gety(C)),m,h.previousVertex,h.absOffsetX-h.distanceFromAnchor+1,r)}function Ae(v,r,h){const f=v+h.translation[0],m=r+h.translation[1];let y;return!h.pitchWithMap&&h.projection.useSpecialProjectionForSymbols?(y=h.projection.projectTileCoordinates(f,m,h.unwrappedTileID,h.getElevation),y.point.x=(.5*y.point.x+.5)*h.width,y.point.y=(.5*-y.point.y+.5)*h.height):(y=pe(f,m,h.labelPlaneMatrix,h.getElevation),y.isOccluded=!1),y}function Re(v,r,h){return v._unit()._perp()._mult(r*h)}function Ce(v,r,h,f,m,y,C,T,M){if(T.projectionCache.offsets[v])return T.projectionCache.offsets[v];const z=h.add(r);if(v+M.direction<f||v+M.direction>=m)return T.projectionCache.offsets[v]=z,z;const O=he(v+M.direction,T,M),F=Re(O.sub(h),C,M.direction),K=h.add(F),ee=O.add(F);return T.projectionCache.offsets[v]=u.ak(y,z,K,ee)||z,T.projectionCache.offsets[v]}function Ue(v,r,h,f,m,y,C,T,M){const z=f?v-r:v+r;let O=z>0?1:-1,F=0;f&&(O*=-1,F=Math.PI),O<0&&(F+=Math.PI);let K,ee=O>0?y+m:y+m+1;T.projectionCache.cachedAnchorPoint?K=T.projectionCache.cachedAnchorPoint:(K=Ae(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=K);let re,ce,me=K,ge=K,ye=0,se=0;const xe=Math.abs(z),ke=[];let Pe;for(;ye+se<=xe;){if(ee+=O,ee<y||ee>=C)return null;ye+=se,ge=me,ce=re;const nt={absOffsetX:xe,direction:O,distanceFromAnchor:ye,previousVertex:ge};if(me=he(ee,T,nt),h===0)ke.push(ge),Pe=me.sub(ge);else{let ct;const Qe=me.sub(ge);ct=Qe.mag()===0?Re(he(ee+O,T,nt).sub(me),h,O):Re(Qe,h,O),ce||(ce=ge.add(ct)),re=Ce(ee,ct,me,y,C,ce,h,T,nt),ke.push(ce),Pe=re.sub(ce)}se=Pe.mag()}const Ne=Pe._mult((xe-ye)/se)._add(ce||ge),Ze=F+Math.atan2(me.y-ge.y,me.x-ge.x);return ke.push(Ne),{point:Ne,angle:M?Ze:0,path:ke}}const ft=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Tt(v,r){for(let h=0;h<v;h++){const f=r.length;r.resize(f+4),r.float32.set(ft,3*f)}}function Jt(v,r,h){const f=r[0],m=r[1];return v[0]=h[0]*f+h[4]*m+h[12],v[1]=h[1]*f+h[5]*m+h[13],v[3]=h[3]*f+h[7]*m+h[15],v}const Ot=100;class pn{constructor(r,h,f=new Mo(r.width+200,r.height+200,25),m=new Mo(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=h,this.grid=f,this.ignoredGrid=m,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Ot,this.screenBottomBoundary=r.height+Ot,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,h,f,m,y,C,T,M,z,O,F){const K=r.anchorPointX+M[0],ee=r.anchorPointY+M[1],re=this.projectAndGetPerspectiveRatio(m,K,ee,y,O),ce=f*re.perspectiveRatio;let me;if(C||T)me=this._projectCollisionBox(r,ce,m,y,C,T,M,re,O,F);else{const ke=re.point.x+(F?F.x*ce:0),Pe=re.point.y+(F?F.y*ce:0);me={allPointsOccluded:!1,box:[ke+r.x1*ce,Pe+r.y1*ce,ke+r.x2*ce,Pe+r.y2*ce]}}const[ge,ye,se,xe]=me.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?me.allPointsOccluded:this.mapProjection.isOccluded(K,ee,y))||re.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ge,ye,se,xe)||h!=="always"&&this.grid.hitTest(ge,ye,se,xe,h,z)?{box:[ge,ye,se,xe],placeable:!1,offscreen:!1}:{box:[ge,ye,se,xe],placeable:!0,offscreen:this.isOffscreen(ge,ye,se,xe)}}placeCollisionCircles(r,h,f,m,y,C,T,M,z,O,F,K,ee,re,ce,me){const ge=[],ye=new u.P(h.anchorX,h.anchorY),se=this.getPerspectiveRatio(C,ye.x,ye.y,T,me),xe=(F?y/se:y*se)/u.ap,ke={getElevation:me,labelPlaneMatrix:M,lineVertexArray:f,pitchWithMap:F,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ce},Pe=le(xe,m,h.lineOffsetX*xe,h.lineOffsetY*xe,!1,h,!1,ke);let Ne=!1,Ze=!1,nt=!0;if(Pe){const ct=.5*ee*se+re,Qe=new u.P(-100,-100),Je=new u.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new Dt,Nt=Pe.first,et=Pe.last;let lt=[];for(let Ht=Nt.path.length-1;Ht>=1;Ht--)lt.push(Nt.path[Ht]);for(let Ht=1;Ht<et.path.length;Ht++)lt.push(et.path[Ht]);const Ft=2.5*ct;if(z){const Ht=this.projectPathToScreenSpace(lt,ke,z);lt=Ht.some(en=>en.signedDistanceFromCamera<=0)?[]:Ht.map(en=>en.point)}let Xn=[];if(lt.length>0){const Ht=lt[0].clone(),en=lt[0].clone();for(let Yn=1;Yn<lt.length;Yn++)Ht.x=Math.min(Ht.x,lt[Yn].x),Ht.y=Math.min(Ht.y,lt[Yn].y),en.x=Math.max(en.x,lt[Yn].x),en.y=Math.max(en.y,lt[Yn].y);Xn=Ht.x>=Qe.x&&en.x<=Je.x&&Ht.y>=Qe.y&&en.y<=Je.y?[lt]:en.x<Qe.x||Ht.x>Je.x||en.y<Qe.y||Ht.y>Je.y?[]:u.al([lt],Qe.x,Qe.y,Je.x,Je.y)}for(const Ht of Xn){_t.reset(Ht,.25*ct);let en=0;en=_t.length<=.5*ct?1:Math.ceil(_t.paddedLength/Ft)+1;for(let Yn=0;Yn<en;Yn++){const li=Yn/Math.max(en-1,1),$o=_t.lerp(li),Jn=$o.x+Ot,Ri=$o.y+Ot;ge.push(Jn,Ri,ct,0);const bi=Jn-ct,ui=Ri-ct,wi=Jn+ct,la=Ri+ct;if(nt=nt&&this.isOffscreen(bi,ui,wi,la),Ze=Ze||this.isInsideGrid(bi,ui,wi,la),r!=="always"&&this.grid.hitTestCircle(Jn,Ri,ct,r,K)&&(Ne=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!O&&Ne||!Ze||se<this.perspectiveRatioCutoff?[]:ge,offscreen:nt,collisionDetected:Ne}}projectPathToScreenSpace(r,h,f){return r.map(m=>pe(m.x,m.y,f,h.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const h=[];let f=1/0,m=1/0,y=-1/0,C=-1/0;for(const O of r){const F=new u.P(O.x+Ot,O.y+Ot);f=Math.min(f,F.x),m=Math.min(m,F.y),y=Math.max(y,F.x),C=Math.max(C,F.y),h.push(F)}const T=this.grid.query(f,m,y,C).concat(this.ignoredGrid.query(f,m,y,C)),M={},z={};for(const O of T){const F=O.key;if(M[F.bucketInstanceId]===void 0&&(M[F.bucketInstanceId]={}),M[F.bucketInstanceId][F.featureIndex])continue;const K=[new u.P(O.x1,O.y1),new u.P(O.x2,O.y1),new u.P(O.x2,O.y2),new u.P(O.x1,O.y2)];u.am(h,K)&&(M[F.bucketInstanceId][F.featureIndex]=!0,z[F.bucketInstanceId]===void 0&&(z[F.bucketInstanceId]=[]),z[F.bucketInstanceId].push(F.featureIndex))}return z}insertCollisionBox(r,h,f,m,y,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:h},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,h,f,m,y,C){const T=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:h};for(let z=0;z<r.length;z+=4)T.insertCircle(M,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,h,f,m,y){let C;y?(C=[h,f,y(h,f),1],u.af(C,C,r)):(C=[h,f,0,1],Jt(C,C,r));const T=C[3];return{point:new u.P((C[0]/T+1)/2*this.transform.width+Ot,(-C[1]/T+1)/2*this.transform.height+Ot),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}getPerspectiveRatio(r,h,f,m,y){const C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(h,f,m,y):pe(h,f,r,y);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(r,h,f,m){return f<Ot||r>=this.screenRightBoundary||m<Ot||h>this.screenBottomBoundary}isInsideGrid(r,h,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&h<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,h,f,m,y,C,T,M,z,O){let F=new u.P(1,0),K=new u.P(0,1);const ee=new u.P(r.anchorPointX+T[0],r.anchorPointY+T[1]);if(C&&!y){const nt=this.projectAndGetPerspectiveRatio(f,ee.x+1,ee.y,m,z).point.sub(M.point).unit(),ct=Math.atan(nt.y/nt.x)+(nt.x<0?Math.PI:0),Qe=Math.sin(ct),Je=Math.cos(ct);F=new u.P(Je,Qe),K=new u.P(-Qe,Je)}else if(!C&&y){const nt=-this.transform.angle,ct=Math.sin(nt),Qe=Math.cos(nt);F=new u.P(Qe,ct),K=new u.P(-ct,Qe)}let re=M.point,ce=h;if(y){re=ee;const nt=this.transform.zoom-Math.floor(this.transform.zoom);ce=Math.pow(2,-nt),ce*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,m),O||(ce*=u.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}O&&(re=re.add(F.mult(O.x*ce)).add(K.mult(O.y*ce)));const me=r.x1*ce,ge=r.x2*ce,ye=(me+ge)/2,se=r.y1*ce,xe=r.y2*ce,ke=(se+xe)/2,Pe=[{offsetX:me,offsetY:se},{offsetX:ye,offsetY:se},{offsetX:ge,offsetY:se},{offsetX:ge,offsetY:ke},{offsetX:ge,offsetY:xe},{offsetX:ye,offsetY:xe},{offsetX:me,offsetY:xe},{offsetX:me,offsetY:ke}];let Ne=[];for(const{offsetX:nt,offsetY:ct}of Pe)Ne.push(new u.P(re.x+F.x*nt+K.x*ct,re.y+F.y*nt+K.y*ct));let Ze=!1;if(y){const nt=Ne.map(ct=>this.projectAndGetPerspectiveRatio(f,ct.x,ct.y,m,z));Ze=nt.some(ct=>!ct.isOccluded),Ne=nt.map(ct=>ct.point)}else Ze=!0;return{box:u.ao(Ne),allPointsOccluded:!Ze}}}function Qt(v,r,h){return r*(u.X/(v.tileSize*Math.pow(2,h-v.tileID.overscaledZ)))}class Rr{constructor(r,h,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?h:-h))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class hr{constructor(r,h,f,m,y){this.text=new Rr(r?r.text:null,h,f,y),this.icon=new Rr(r?r.icon:null,h,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gt{constructor(r,h,f){this.text=r,this.icon=h,this.skipFade=f}}class Tn{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class or{constructor(r,h,f,m,y){this.bucketInstanceId=r,this.featureIndex=h,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=y}}class Hr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const h=++this.maxGroupID;this.collisionGroups[r]={ID:h,predicate:f=>f.collisionGroupID===h}}return this.collisionGroups[r]}}function Qr(v,r,h,f,m){const{horizontalAlign:y,verticalAlign:C}=u.au(v);return new u.P(-(y-.5)*r+f[0]*m,-(C-.5)*h+f[1]*m)}class xi{constructor(r,h,f,m,y,C){this.transform=r.clone(),this.terrain=f,this.collisionIndex=new pn(this.transform,h),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Hr(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const h=this.terrain;return h?(f,m)=>h.getElevation(r,f,m):null}getBucketParts(r,h,f,m){const y=f.getBucket(h),C=f.latestFeatureIndex;if(!y||!C||h.id!==y.layerIds[0])return;const T=f.collisionBoxArray,M=y.layers[0].layout,z=y.layers[0].paint,O=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),F=f.tileSize/u.X,K=f.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(K),re=M.get("text-pitch-alignment")==="map",ce=M.get("text-rotation-alignment")==="map",me=Qt(f,1,this.transform.zoom),ge=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),se=ia(ee,re,ce,this.transform,me);let xe=null;if(re){const Pe=fo(ee,re,ce,this.transform,me);xe=u.L([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[y.bucketInstanceId]=new or(y.bucketInstanceId,C,y.sourceLayerIndex,y.index,f.tileID);const ke={bucket:y,layout:M,translationText:ge,translationIcon:ye,posMatrix:ee,unwrappedTileID:K,textLabelPlaneMatrix:se,labelToScreenMatrix:xe,scale:O,textPixelRatio:F,holdingForFade:f.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const Pe of y.sortKeyRanges){const{sortKey:Ne,symbolInstanceStart:Ze,symbolInstanceEnd:nt}=Pe;r.push({sortKey:Ne,symbolInstanceStart:Ze,symbolInstanceEnd:nt,parameters:ke})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:ke})}attemptAnchorPlacement(r,h,f,m,y,C,T,M,z,O,F,K,ee,re,ce,me,ge,ye,se){const xe=u.aq[r.textAnchor],ke=[r.textOffset0,r.textOffset1],Pe=Qr(xe,f,m,ke,y),Ne=this.collisionIndex.placeCollisionBox(h,K,M,z,O,T,C,me,F.predicate,se,Pe);if((!ye||this.collisionIndex.placeCollisionBox(ye,K,M,z,O,T,C,ge,F.predicate,se,Pe).placeable)&&Ne.placeable){let Ze;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Ze=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:ke,width:f,height:m,anchor:xe,textBoxScale:y,prevAnchor:Ze},this.markUsedJustification(re,xe,ee,ce),re.allowVerticalPlacement&&(this.markUsedOrientation(re,ce,ee),this.placedOrientations[ee.crossTileID]=ce),{shift:Pe,placedGlyphBoxes:Ne}}}placeLayerBucketPart(r,h,f){const{bucket:m,layout:y,translationText:C,translationIcon:T,posMatrix:M,unwrappedTileID:z,textLabelPlaneMatrix:O,labelToScreenMatrix:F,textPixelRatio:K,holdingForFade:ee,collisionBoxArray:re,partiallyEvaluatedTextSize:ce,collisionGroup:me}=r.parameters,ge=y.get("text-optional"),ye=y.get("icon-optional"),se=u.ar(y,"text-overlap","text-allow-overlap"),xe=se==="always",ke=u.ar(y,"icon-overlap","icon-allow-overlap"),Pe=ke==="always",Ne=y.get("text-rotation-alignment")==="map",Ze=y.get("text-pitch-alignment")==="map",nt=y.get("icon-text-fit")!=="none",ct=y.get("symbol-z-order")==="viewport-y",Qe=xe&&(Pe||!m.hasIconData()||ye),Je=Pe&&(xe||!m.hasTextData()||ge);!m.collisionArrays&&re&&m.deserializeCollisionBoxes(re);const _t=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Nt=(et,lt,Ft)=>{var Xn,Ht;if(h[et.crossTileID])return;if(ee)return void(this.placements[et.crossTileID]=new Gt(!1,!1,!1));let en=!1,Yn=!1,li=!0,$o=null,Jn={box:null,placeable:!1,offscreen:null},Ri={box:null,placeable:!1,offscreen:null},bi=null,ui=null,wi=null,la=0,Rl=0,uh=0;lt.textFeatureIndex?la=lt.textFeatureIndex:et.useRuntimeCollisionCircles&&(la=et.featureIndex),lt.verticalTextFeatureIndex&&(Rl=lt.verticalTextFeatureIndex);const Dl=lt.textBox;if(Dl){const xo=ei=>{let ci=u.ah.horizontal;if(m.allowVerticalPlacement&&!ei&&this.prevPlacement){const eo=this.prevPlacement.placedOrientations[et.crossTileID];eo&&(this.placedOrientations[et.crossTileID]=eo,ci=eo,this.markUsedOrientation(m,ci,et))}return ci},bo=(ei,ci)=>{if(m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&lt.verticalTextBox){for(const eo of m.writingModes)if(eo===u.ah.vertical?(Jn=ci(),Ri=Jn):Jn=ei(),Jn&&Jn.placeable)break}else Jn=ei()},ts=et.textAnchorOffsetStartIndex,Oo=et.textAnchorOffsetEndIndex;if(Oo===ts){const ei=(ci,eo)=>{const on=this.collisionIndex.placeCollisionBox(ci,se,K,M,z,Ze,Ne,C,me.predicate,_t);return on&&on.placeable&&(this.markUsedOrientation(m,eo,et),this.placedOrientations[et.crossTileID]=eo),on};bo(()=>ei(Dl,u.ah.horizontal),()=>{const ci=lt.verticalTextBox;return m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&ci?ei(ci,u.ah.vertical):{box:null,offscreen:null}}),xo(Jn&&Jn.placeable)}else{let ei=u.aq[(Ht=(Xn=this.prevPlacement)===null||Xn===void 0?void 0:Xn.variableOffsets[et.crossTileID])===null||Ht===void 0?void 0:Ht.anchor];const ci=(on,Ns,$l)=>{const Ol=on.x2-on.x1,Pg=on.y2-on.y1,H1=et.textBoxScale,Mg=nt&&ke==="never"?Ns:null;let ns=null,Ag=se==="never"?1:2,hh="never";ei&&Ag++;for(let Uu=0;Uu<Ag;Uu++){for(let dh=ts;dh<Oo;dh++){const ph=m.textAnchorOffsets.get(dh);if(ei&&ph.textAnchor!==ei)continue;const Fl=this.attemptAnchorPlacement(ph,on,Ol,Pg,H1,Ne,Ze,K,M,z,me,hh,et,m,$l,C,T,Mg,_t);if(Fl&&(ns=Fl.placedGlyphBoxes,ns&&ns.placeable))return en=!0,$o=Fl.shift,ns}ei?ei=null:hh=se}return f&&!ns&&(ns={box:this.collisionIndex.placeCollisionBox(Dl,"always",K,M,z,Ze,Ne,C,me.predicate,_t,new u.P(0,0)).box,offscreen:!1,placeable:!1}),ns};bo(()=>ci(Dl,lt.iconBox,u.ah.horizontal),()=>{const on=lt.verticalTextBox;return m.allowVerticalPlacement&&(!Jn||!Jn.placeable)&&et.numVerticalGlyphVertices>0&&on?ci(on,lt.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Jn&&(en=Jn.placeable,li=Jn.offscreen);const eo=xo(Jn&&Jn.placeable);if(!en&&this.prevPlacement){const on=this.prevPlacement.variableOffsets[et.crossTileID];on&&(this.variableOffsets[et.crossTileID]=on,this.markUsedJustification(m,on.anchor,et,eo))}}}if(bi=Jn,en=bi&&bi.placeable,li=bi&&bi.offscreen,et.useRuntimeCollisionCircles){const xo=m.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),bo=u.ai(m.textSizeData,ce,xo),ts=y.get("text-padding");ui=this.collisionIndex.placeCollisionCircles(se,xo,m.lineVertexArray,m.glyphOffsetArray,bo,M,z,O,F,f,Ze,me.predicate,et.collisionCircleDiameter,ts,C,_t),ui.circles.length&&ui.collisionDetected&&!f&&u.w("Collisions detected, but collision boxes are not shown"),en=xe||ui.circles.length>0&&!ui.collisionDetected,li=li&&ui.offscreen}if(lt.iconFeatureIndex&&(uh=lt.iconFeatureIndex),lt.iconBox){const xo=bo=>this.collisionIndex.placeCollisionBox(bo,ke,K,M,z,Ze,Ne,T,me.predicate,_t,nt&&$o?$o:void 0);Ri&&Ri.placeable&&lt.verticalIconBox?(wi=xo(lt.verticalIconBox),Yn=wi.placeable):(wi=xo(lt.iconBox),Yn=wi.placeable),li=li&&wi.offscreen}const _o=ge||et.numHorizontalGlyphVertices===0&&et.numVerticalGlyphVertices===0,ch=ye||et.numIconVertices===0;_o||ch?ch?_o||(Yn=Yn&&en):en=Yn&&en:Yn=en=Yn&&en;const Lp=Yn&&wi.placeable;if(en&&bi.placeable&&this.collisionIndex.insertCollisionBox(bi.box,se,y.get("text-ignore-placement"),m.bucketInstanceId,Ri&&Ri.placeable&&Rl?Rl:la,me.ID),Lp&&this.collisionIndex.insertCollisionBox(wi.box,ke,y.get("icon-ignore-placement"),m.bucketInstanceId,uh,me.ID),ui&&en&&this.collisionIndex.insertCollisionCircles(ui.circles,se,y.get("text-ignore-placement"),m.bucketInstanceId,la,me.ID),f&&this.storeCollisionData(m.bucketInstanceId,Ft,lt,bi,wi,ui),et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[et.crossTileID]=new Gt(en||Qe,Yn||Je,li||m.justReloaded),h[et.crossTileID]=!0};if(ct){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const et=m.getSortedSymbolIndexes(this.transform.angle);for(let lt=et.length-1;lt>=0;--lt){const Ft=et[lt];Nt(m.symbolInstances.get(Ft),m.collisionArrays[Ft],Ft)}}else for(let et=r.symbolInstanceStart;et<r.symbolInstanceEnd;et++)Nt(m.symbolInstances.get(et),m.collisionArrays[et],et);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[m.bucketInstanceId];u.as(et.invProjMatrix,M),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(r,h,f,m,y,C){if(f.textBox||f.iconBox){let T,M;this.collisionBoxArrays.has(r)?T=this.collisionBoxArrays.get(r):(T=new Map,this.collisionBoxArrays.set(r,T)),T.has(h)?M=T.get(h):(M={text:null,icon:null},T.set(h,M)),f.textBox&&(M.text=m.box),f.iconBox&&(M.icon=y.box)}if(C){let T=this.collisionCircleArrays[r];T===void 0&&(T=this.collisionCircleArrays[r]=new Tn);for(let M=0;M<C.circles.length;M+=4)T.circles.push(C.circles[M+0]),T.circles.push(C.circles[M+1]),T.circles.push(C.circles[M+2]),T.circles.push(C.collisionDetected?1:0)}}markUsedJustification(r,h,f,m){let y;y=m===u.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.at(h)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(r.text.placedSymbolArray.get(T).crossTileID=y>=0&&T!==y?0:f.crossTileID)}markUsedOrientation(r,h,f){const m=h===u.ah.horizontal||h===u.ah.horizontalOnly?h:0,y=h===u.ah.vertical?h:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const T of C)r.text.placedSymbolArray.get(T).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const h=this.prevPlacement;let f=!1;this.prevZoomAdjustment=h?h.zoomAdjustment(this.transform.zoom):0;const m=h?h.symbolFadeChange(r):1,y=h?h.opacities:{},C=h?h.variableOffsets:{},T=h?h.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],O=y[M];O?(this.opacities[M]=new hr(O,m,z.text,z.icon),f=f||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[M]=new hr(null,m,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const M in y){const z=y[M];if(!this.opacities[M]){const O=new hr(z,m,!1,!1);O.isHidden()||(this.opacities[M]=O,f=f||z.text.placed||z.icon.placed)}}for(const M in C)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=C[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(h&&h.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=h?h.lastPlacementChangeTime:r)}updateLayerOpacities(r,h){const f={};for(const m of h){const y=m.getBucket(r);y&&m.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,f,m.collisionBoxArray)}}updateBucketOpacities(r,h,f,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],C=y.layout,T=new hr(null,0,!1,!1,!0),M=C.get("text-allow-overlap"),z=C.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),F=C.get("text-rotation-alignment")==="map",K=C.get("text-pitch-alignment")==="map",ee=C.get("icon-text-fit")!=="none",re=new hr(null,0,M&&(z||!r.hasIconData()||C.get("icon-optional")),z&&(M||!r.hasTextData()||C.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ce=(ge,ye,se)=>{for(let xe=0;xe<ye/4;xe++)ge.opacityVertexArray.emplaceBack(se);ge.hasVisibleVertices=ge.hasVisibleVertices||se!==pl},me=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ge=0;ge<r.symbolInstances.length;ge++){const ye=r.symbolInstances.get(ge),{numHorizontalGlyphVertices:se,numVerticalGlyphVertices:xe,crossTileID:ke}=ye;let Pe=this.opacities[ke];f[ke]?Pe=T:Pe||(Pe=re,this.opacities[ke]=Pe),f[ke]=!0;const Ne=ye.numIconVertices>0,Ze=this.placedOrientations[ye.crossTileID],nt=Ze===u.ah.vertical,ct=Ze===u.ah.horizontal||Ze===u.ah.horizontalOnly;if(se>0||xe>0){const Je=Yi(Pe.text);ce(r.text,se,nt?pl:Je),ce(r.text,xe,ct?pl:Je);const _t=Pe.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(lt=>{lt>=0&&(r.text.placedSymbolArray.get(lt).hidden=_t||nt?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=_t||ct?1:0);const Nt=this.variableOffsets[ye.crossTileID];Nt&&this.markUsedJustification(r,Nt.anchor,ye,Ze);const et=this.placedOrientations[ye.crossTileID];et&&(this.markUsedJustification(r,"left",ye,et),this.markUsedOrientation(r,et,ye))}if(Ne){const Je=Yi(Pe.icon),_t=!(ee&&ye.verticalPlacedIconSymbolIndex&&nt);ye.placedIconSymbolIndex>=0&&(ce(r.icon,ye.numIconVertices,_t?Je:pl),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(ce(r.icon,ye.numVerticalIconVertices,_t?pl:Je),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const Qe=me&&me.has(ge)?me.get(ge):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Je=r.collisionArrays[ge];if(Je){let _t=new u.P(0,0);if(Je.textBox||Je.verticalTextBox){let Nt=!0;if(O){const et=this.variableOffsets[ke];et?(_t=Qr(et.anchor,et.width,et.height,et.textOffset,et.textBoxScale),F&&_t._rotate(K?this.transform.angle:-this.transform.angle)):Nt=!1}if(Je.textBox||Je.verticalTextBox){let et;Je.textBox&&(et=nt),Je.verticalTextBox&&(et=ct),dl(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Nt||et,Qe.text,_t.x,_t.y)}}if(Je.iconBox||Je.verticalIconBox){const Nt=!!(!ct&&Je.verticalIconBox);let et;Je.iconBox&&(et=Nt),Je.verticalIconBox&&(et=!Nt),dl(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,et,Qe.icon,ee?_t.x:0,ee?_t.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const ge=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ge.invProjMatrix,r.placementViewportMatrix=ge.viewportMatrix,r.collisionCircleArray=ge.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,h){const f=this.zoomAtLastRecencyCheck===h?1-this.zoomAdjustment(h):1;return this.zoomAtLastRecencyCheck=h,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function dl(v,r,h,f,m,y){f&&f.length!==0||(f=[0,0,0,0]);const C=f[0]-Ot,T=f[1]-Ot,M=f[2]-Ot,z=f[3]-Ot;v.emplaceBack(r?1:0,h?1:0,m||0,y||0,C,T),v.emplaceBack(r?1:0,h?1:0,m||0,y||0,M,T),v.emplaceBack(r?1:0,h?1:0,m||0,y||0,M,z),v.emplaceBack(r?1:0,h?1:0,m||0,y||0,C,z)}const In=Math.pow(2,25),Vd=Math.pow(2,24),Wd=Math.pow(2,17),Ki=Math.pow(2,16),Xi=Math.pow(2,9),x1=Math.pow(2,8),mo=Math.pow(2,1);function Yi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,h=Math.floor(127*v.opacity);return h*In+r*Vd+h*Wd+r*Ki+h*Xi+r*x1+h*mo+r}const pl=0;function Is(){return{isOccluded:(v,r,h)=>!1,getPitchedTextCorrection:(v,r,h)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,h,f){throw new Error("Not implemented.")},translatePosition:(v,r,h,f)=>function(m,y,C,T,M=!1){if(!C[0]&&!C[1])return[0,0];const z=M?T==="map"?m.angle:0:T==="viewport"?-m.angle:0;if(z){const O=Math.sin(z),F=Math.cos(z);C=[C[0]*F-C[1]*O,C[0]*O+C[1]*F]}return[M?C[0]:Qt(y,C[0],m.zoom),M?C[1]:Qt(y,C[1],m.zoom)]}(v,r,h,f),getCircleRadiusCorrection:v=>1}}class Dr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,h,f,m,y){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(h.getBucketParts(C,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<C.length;)if(h.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,y())return!0;return!1}}class Cu{constructor(r,h,f,m,y,C,T,M){this.placement=new xi(r,Is(),h,C,T,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,h,f){const m=k.now(),y=()=>!this._forceFullPlacement&&k.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=h[r[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Dr(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Ao=512/u.X/2;class Tr{constructor(r,h,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let y=0;y<h.length;y++){const C=h.get(y),T=C.key,M=m.get(T);M?M.push(C):m.set(T,[C])}for(const[y,C]of m){const T={positions:C.map(M=>({x:Math.floor(M.anchorX*Ao),y:Math.floor(M.anchorY*Ao)})),crossTileIDs:C.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new u.av(T.positions.length,16,Uint16Array);for(const{x:z,y:O}of T.positions)M.add(z,O);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[y]=T}}getScaledCoordinates(r,h){const{x:f,y:m,z:y}=this.tileID.canonical,{x:C,y:T,z:M}=h.canonical,z=Ao/Math.pow(2,M-y),O=(T*u.X+r.anchorY)*z,F=m*u.X*Ao;return{x:Math.floor((C*u.X+r.anchorX)*z-f*u.X*Ao),y:Math.floor(O-F)}}findMatches(r,h,f){const m=this.tileID.canonical.z<h.canonical.z?1:Math.pow(2,this.tileID.canonical.z-h.canonical.z);for(let y=0;y<r.length;y++){const C=r.get(y);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const M=this.getScaledCoordinates(C,h);if(T.index){const z=T.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const O of z){const F=T.crossTileIDs[O];if(!f[F]){f[F]=!0,C.crossTileID=F;break}}}else if(T.positions)for(let z=0;z<T.positions.length;z++){const O=T.positions[z],F=T.crossTileIDs[z];if(Math.abs(O.x-M.x)<=m&&Math.abs(O.y-M.y)<=m&&!f[F]){f[F]=!0,C.crossTileID=F;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Lc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Lo{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const h=Math.round((r-this.lng)/360);if(h!==0)for(const f in this.indexes){const m=this.indexes[f],y={};for(const C in m){const T=m[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+h),y[T.tileID.key]=T}this.indexes[f]=y}this.lng=r}addBucket(r,h,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===h.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<h.symbolInstances.length;y++)h.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const C=this.indexes[y];if(Number(y)>r.overscaledZ)for(const T in C){const M=C[T];M.tileID.isChildOf(r)&&M.findMatches(h.symbolInstances,r,m)}else{const T=C[r.scaledTo(Number(y)).key];T&&T.findMatches(h.symbolInstances,r,m)}}for(let y=0;y<h.symbolInstances.length;y++){const C=h.symbolInstances.get(y);C.crossTileID||(C.crossTileID=f.generate(),m[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Tr(r,h.symbolInstances,h.bucketInstanceId),!0}removeBucketCrossTileIDs(r,h){for(const f of h.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let h=!1;for(const f in this.indexes){const m=this.indexes[f];for(const y in m)r[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[y]),delete m[y],h=!0)}return h}}class qd{constructor(){this.layerIndexes={},this.crossTileIDs=new Lc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,h,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new Lo);let y=!1;const C={};m.handleWrapJump(f);for(const T of h){const M=T.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(T.tileID,M,this.crossTileIDs)&&(y=!0),C[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(y=!0),y}pruneUnusedLayers(r){const h={};r.forEach(f=>{h[f]=!0});for(const f in this.layerIndexes)h[f]||delete this.layerIndexes[f]}}const zo=(v,r)=>u.t(v,r&&r.filter(h=>h.identifier!=="source.canvas")),b1=u.aw();class zc extends u.E{constructor(r,h={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new Vt(kn(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("GI",(f,m)=>this.getImages(f,m)),this.imageManager=new $e,this.imageManager.setEventedParent(this),this.glyphManager=new at(r._requestManager,h.localIdeographFontFamily),this.lineAtlas=new jt(256,512),this.crossTileSymbolIndex=new qd,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),an().on(Ge,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const C in this._layers){const T=this._layers[C];T.source===y.id&&this._validateLayer(T)}})}loadURL(r,h={},f){this.fire(new u.k("dataloading",{dataType:"style"})),h.validate=typeof h.validate!="boolean"||h.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(m,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,h,f)}).catch(C=>{this._loadStyleRequest=null,C&&!y.signal.aborted&&this.fire(new u.j(C))})}loadJSON(r,h={},f){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,h.validate=h.validate!==!1,this._load(r,h,f)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(b1,{validate:!1})}_load(r,h,f){var m;const y=h.transformStyle?h.transformStyle(f,r):r;if(!h.validate||!zo(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const C in y.sources)this.addSource(C,y.sources[C],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new pt(this.stylesheet.light),this.sky=new Lt(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(h=>h.id),this._layers={},this._serializedLayers=null;for(const h of r){const f=u.aA(h);f.setEventedParent(this,{layer:{id:h.id}}),this._layers[h.id]=f}}_loadSprite(r,h=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,C,T,M){return u._(this,void 0,void 0,function*(){const z=Me(y),O=T>1?"@2x":"",F={},K={};for(const{id:ee,url:re}of z){const ce=C.transformRequest(Z(re,O,".json"),"SpriteJSON");F[ee]=u.h(ce,M);const me=C.transformRequest(Z(re,O,".png"),"SpriteImage");K[ee]=j.getImage(me,M)}return yield Promise.all([...Object.values(F),...Object.values(K)]),function(ee,re){return u._(this,void 0,void 0,function*(){const ce={};for(const me in ee){ce[me]={};const ge=k.getImageCanvasContext((yield re[me]).data),ye=(yield ee[me]).data;for(const se in ye){const{width:xe,height:ke,x:Pe,y:Ne,sdf:Ze,pixelRatio:nt,stretchX:ct,stretchY:Qe,content:Je,textFitWidth:_t,textFitHeight:Nt}=ye[se];ce[me][se]={data:null,pixelRatio:nt,sdf:Ze,stretchX:ct,stretchY:Qe,content:Je,textFitWidth:_t,textFitHeight:Nt,spriteData:{width:xe,height:ke,x:Pe,y:Ne,context:ge}}}}return ce})}(F,K)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const C in y){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(M=>!(M in y)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[C]){const z=C==="default"?M:`${C}:${M}`;this._spritesImagesIds[C].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,y[C][M],!1):this.imageManager.addImage(z,y[C][M]),h&&(this._changedImages[z]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),h&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const h=this.sourceCaches[r.source];if(!h)return;const f=r.sourceLayer;if(!f)return;const m=h.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,h=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(h?u.aB(f):f);const m=[];for(const y of r)if(f[y]){const C=h?u.aB(f[y]):f[y];m.push(C)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const h=Object.keys(this._layers);for(const f of h){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const h=this._changed;if(h){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const C in this._updatedSources){const T=this._updatedSources[C];if(T==="reload")this._reloadSource(C);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];f[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in f){const y=this.sourceCaches[m];!!f[m]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,h&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const h in this.sourceCaches)this.sourceCaches[h].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,h){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:h})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,h={}){var f;this._checkLoaded();const m=this.serialize();if(r=h.transformStyle?h.transformStyle(m,r):r,((f=h.validate)===null||f===void 0||f)&&zo(this,u.u(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const y=u.aC(m,r),C=this._getOperationsToPerform(y);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const T of C.operations)T();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const h=[],f=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":h.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":h.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":h.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":h.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":h.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":h.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":h.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":h.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":h.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":h.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":h.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":h.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":h.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":h.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":h.push(()=>{});break;default:f.push(m.command)}return{operations:h,unimplemented:f}}addImage(r,h){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,h),this._afterImageUpdated(r)}updateImage(r,h){this.imageManager.updateImage(r,h)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,h,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!h.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(h).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(h.type)>=0&&this._validate(u.u.source,`sources.${r}`,h,null,f))return;this.map&&this.map._collectResourceTiming&&(h.collectResourceTiming=!0);const m=this.sourceCaches[r]=new it(r,h,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const h=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],h.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),h.setEventedParent(null),h.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,h){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(h),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,h,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(r.type==="custom"){if(zo(this,u.aD(r)))return;y=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=u.aB(r),r=u.e(r,{source:m})),this._validate(u.u.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;y=u.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const C=h?this._order.indexOf(h):this._order.length;if(h&&C===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${h}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const T=this._removedLayers[m];delete this._removedLayers[m],T.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,h){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===h)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=h?this._order.indexOf(h):this._order.length;h&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${h}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const h=this._layers[r];if(!h)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));h.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=h,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],h.onRemove&&h.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,h,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===h&&m.maxzoom===f||(h!=null&&(m.minzoom=h),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,h,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!u.aE(m.filter,h))return h==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.u.filter,`layers.${m.id}.filter`,h,null,f)||(m.filter=u.aB(h),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,h,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getLayoutProperty(h),f)||(y.setLayoutProperty(h,f,m),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,h){const f=this.getLayer(r);if(f)return f.getLayoutProperty(h);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,h,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getPaintProperty(h),f)||(y.setPaintProperty(h,f,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,h){return this.getLayer(r).getPaintProperty(h)}setFeatureState(r,h){this._checkLoaded();const f=r.source,m=r.sourceLayer,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=y.getSource().type;C==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,r.id,h)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,h){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const y=m.getSource().type,C=y==="vector"?r.sourceLayer:void 0;y!=="vector"||C?h&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,r.id,h):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const h=r.source,f=r.sourceLayer,m=this.sourceCaches[h];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${h}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,y=>y.serialize()),h=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:h,terrain:f},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const h=C=>this._layers[C].type==="fill-extrusion",f={},m=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(h(T)){f[T]=C;for(const M of r){const z=M[T];if(z)for(const O of z)m.push(O)}}}m.sort((C,T)=>T.intersectionZ-C.intersectionZ);const y=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(h(T))for(let M=m.length-1;M>=0;M--){const z=m[M].feature;if(f[z.layer.id]<C)break;y.push(z),m.pop()}else for(const M of r){const z=M[T];if(z)for(const O of z)y.push(O.feature)}}return y}queryRenderedFeatures(r,h,f){h&&h.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",h.filter,null,h);const m={};if(h&&h.layers){if(!Array.isArray(h.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const T of h.layers){const M=this._layers[T];if(!M)return this.fire(new u.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const y=[];h.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)h.layers&&!m[T]||y.push(_n(this.sourceCaches[T],this._layers,C,r,h,f));return this.placement&&y.push(function(T,M,z,O,F,K,ee){const re={},ce=K.queryRenderedSymbols(O),me=[];for(const ge of Object.keys(ce).map(Number))me.push(ee[ge]);me.sort(yt);for(const ge of me){const ye=ge.featureIndex.lookupSymbolFeatures(ce[ge.bucketInstanceId],M,ge.bucketIndex,ge.sourceLayerIndex,F.filter,F.layers,F.availableImages,T);for(const se in ye){const xe=re[se]=re[se]||[],ke=ye[se];ke.sort((Pe,Ne)=>{const Ze=ge.featureSortOrder;if(Ze){const nt=Ze.indexOf(Pe.featureIndex);return Ze.indexOf(Ne.featureIndex)-nt}return Ne.featureIndex-Pe.featureIndex});for(const Pe of ke)xe.push(Pe)}}for(const ge in re)re[ge].forEach(ye=>{const se=ye.feature,xe=z[T[ge].source].getFeatureState(se.layer["source-layer"],se.id);se.source=se.layer.source,se.layer["source-layer"]&&(se.sourceLayer=se.layer["source-layer"]),se.state=xe});return re}(this._layers,C,this.sourceCaches,r,h,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,h){h&&h.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",h.filter,null,h);const f=this.sourceCaches[r];return f?function(m,y){const C=m.getRenderableIds().map(z=>m.getTileByID(z)),T=[],M={};for(let z=0;z<C.length;z++){const O=C[z],F=O.tileID.canonical.key;M[F]||(M[F]=!0,O.querySourceFeatures(T,y))}return T}(f,h):[]}getLight(){return this.light.getLight()}setLight(r,h={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const C in r)if(!u.aE(r[C],f[C])){m=!0;break}if(!m)return;const y={now:k.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,h),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,h={}){const f=this.getSky();let m=!1;if(!r&&!f)return;if(r&&!f)m=!0;else if(!r&&f)m=!0;else for(const C in r)if(!u.aE(r[C],f[C])){m=!0;break}if(!m)return;const y={now:k.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,h),this.sky.updateTransitions(y)}_validate(r,h,f,m,y={}){return(!y||y.validate!==!1)&&zo(this,r.call(u.u,u.e({key:h,style:this.serialize(),value:f,styleSpec:u.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),an().off(Ge,this._rtlPluginLoaded);for(const h in this._layers)this._layers[h].setEventedParent(null);for(const h in this.sourceCaches){const f=this.sourceCaches[h];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const h in this.sourceCaches)this.sourceCaches[h].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,h,f,m,y=!1){let C=!1,T=!1;const M={};for(const z of this._order){const O=this._layers[z];if(O.type!=="symbol")continue;if(!M[O.source]){const K=this.sourceCaches[O.source];M[O.source]=K.getRenderableIds(!0).map(ee=>K.getTileByID(ee)).sort((ee,re)=>re.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(re.tileID)?-1:1))}const F=this.crossTileSymbolIndex.addLayer(O,M[O.source],r.center.lng);C=C||F}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(k.now(),r.zoom))&&(this.pauseablePlacement=new Cu(r,this.map.terrain,this._order,y,h,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(k.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const z of this._order){const O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,M[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(k.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,h){return u._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(h.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[h.source];return m&&m.setDependencies(h.tileID.key,h.type,h.icons),f})}getGlyphs(r,h){return u._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(h.stacks),m=this.sourceCaches[h.source];return m&&m.setDependencies(h.tileID.key,h.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,h={}){this._checkLoaded(),r&&this._validate(u.u.glyphs,"glyphs",r,null,h)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,h,f={},m){this._checkLoaded();const y=[{id:r,url:h}],C=[...Me(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(y,!0,m))}removeSprite(r){this._checkLoaded();const h=Me(this.stylesheet.sprite);if(h.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;h.splice(h.findIndex(f=>f.id===r),1),this.stylesheet.sprite=h.length>0?h:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Me(this.stylesheet.sprite)}setSprite(r,h={},f){this._checkLoaded(),r&&this._validate(u.u.sprite,"sprite",r,null,h)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var Ps=u.Y([{name:"a_pos",type:"Int16",components:2}]);const Qa={prelude:xn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:xn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:xn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:xn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:xn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:xn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:xn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:xn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:xn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:xn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:xn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:xn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:xn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:xn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:xn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:xn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:xn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:xn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:xn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:xn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:xn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:xn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:xn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:xn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:xn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:xn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:xn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function xn(v,r){const h=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=y?y.concat(m):m,T={};return{fragmentSource:v=v.replace(h,(M,z,O,F,K)=>(T[K]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${O} ${F} ${K};
#else
uniform ${O} ${F} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${O} ${F} ${K} = u_${K};
#endif
`)),vertexSource:r=r.replace(h,(M,z,O,F,K)=>{const ee=F==="float"?"vec2":"vec4",re=K.match(/color/)?"color":ee;return T[K]?z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${O} ${ee} a_${K};
varying ${O} ${F} ${K};
#else
uniform ${O} ${F} u_${K};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${O} ${F} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${re}(a_${K}, u_${K}_t);
#else
    ${O} ${F} ${K} = u_${K};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${O} ${ee} a_${K};
#else
uniform ${O} ${F} u_${K};
#endif
`:re==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${O} ${F} ${K} = a_${K};
#else
    ${O} ${F} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${O} ${F} ${K} = unpack_mix_${re}(a_${K}, u_${K}_t);
#else
    ${O} ${F} ${K} = u_${K};
#endif
`}),staticAttributes:f,staticUniforms:C}}class Hd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,h,f,m,y,C,T,M,z){this.context=r;let O=this.boundPaintVertexBuffers.length!==m.length;for(let F=0;!O&&F<m.length;F++)this.boundPaintVertexBuffers[F]!==m[F]&&(O=!0);!this.vao||this.boundProgram!==h||this.boundLayoutVertexBuffer!==f||O||this.boundIndexBuffer!==y||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(h,f,m,y,C,T,M,z):(r.bindVertexArray.set(this.vao),T&&T.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),z&&z.bind())}freshBind(r,h,f,m,y,C,T,M){const z=r.numAttributes,O=this.context,F=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=h,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,h.enableAttributes(F,r);for(const K of f)K.enableAttributes(F,r);C&&C.enableAttributes(F,r),T&&T.enableAttributes(F,r),M&&M.enableAttributes(F,r),h.bind(),h.setVertexAttribPointers(F,r,y);for(const K of f)K.bind(),K.setVertexAttribPointers(F,r,y);C&&(C.bind(),C.setVertexAttribPointers(F,r,y)),m&&m.bind(),T&&(T.bind(),T.setVertexAttribPointers(F,r,y)),M&&(M.bind(),M.setVertexAttribPointers(F,r,y)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Gd=(v,r,h,f,m)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:h,u_fog_color:f?f.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(m):0,u_horizon_color:f?f.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function fl(v){const r=[];for(let h=0;h<v.length;h++){if(v[h]===null)continue;const f=v[h].split(" ");r.push(f.pop())}return r}class Zd{constructor(r,h,f,m,y,C){const T=r.gl;this.program=T.createProgram();const M=fl(h.staticAttributes),z=f?f.getBinderAttributes():[],O=M.concat(z),F=Qa.prelude.staticUniforms?fl(Qa.prelude.staticUniforms):[],K=h.staticUniforms?fl(h.staticUniforms):[],ee=f?f.getBinderUniforms():[],re=F.concat(K).concat(ee),ce=[];for(const Pe of re)ce.indexOf(Pe)<0&&ce.push(Pe);const me=f?f.defines():[];y&&me.push("#define OVERDRAW_INSPECTOR;"),C&&me.push("#define TERRAIN3D;");const ge=me.concat(Qa.prelude.fragmentSource,h.fragmentSource).join(`
`),ye=me.concat(Qa.prelude.vertexSource,h.vertexSource).join(`
`),se=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(se,ge),T.compileShader(se),!T.getShaderParameter(se,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(se)}`);T.attachShader(this.program,se);const xe=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(xe,ye),T.compileShader(xe),!T.getShaderParameter(xe,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(xe)}`);T.attachShader(this.program,xe),this.attributes={};const ke={};this.numAttributes=O.length;for(let Pe=0;Pe<this.numAttributes;Pe++)O[Pe]&&(T.bindAttribLocation(this.program,Pe,O[Pe]),this.attributes[O[Pe]]=Pe);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(xe),T.deleteShader(se);for(let Pe=0;Pe<ce.length;Pe++){const Ne=ce[Pe];if(Ne&&!ke[Ne]){const Ze=T.getUniformLocation(this.program,Ne);Ze&&(ke[Ne]=Ze)}}this.fixedUniforms=m(r,ke),this.terrainUniforms=((Pe,Ne)=>({u_depth:new u.aH(Pe,Ne.u_depth),u_terrain:new u.aH(Pe,Ne.u_terrain),u_terrain_dim:new u.aI(Pe,Ne.u_terrain_dim),u_terrain_matrix:new u.aJ(Pe,Ne.u_terrain_matrix),u_terrain_unpack:new u.aK(Pe,Ne.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Pe,Ne.u_terrain_exaggeration)}))(r,ke),this.binderUniforms=f?f.getUniforms(r,ke):[]}draw(r,h,f,m,y,C,T,M,z,O,F,K,ee,re,ce,me,ge,ye){const se=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(y),r.setCullFace(C),M){r.activeTexture.set(se.TEXTURE2),se.bindTexture(se.TEXTURE_2D,M.depthTexture),r.activeTexture.set(se.TEXTURE3),se.bindTexture(se.TEXTURE_2D,M.texture);for(const ke in this.terrainUniforms)this.terrainUniforms[ke].set(M[ke])}for(const ke in this.fixedUniforms)this.fixedUniforms[ke].set(T[ke]);ce&&ce.setUniforms(r,this.binderUniforms,ee,{zoom:re});let xe=0;switch(h){case se.LINES:xe=2;break;case se.TRIANGLES:xe=3;break;case se.LINE_STRIP:xe=1}for(const ke of K.get()){const Pe=ke.vaos||(ke.vaos={});(Pe[z]||(Pe[z]=new Hd)).bind(r,this,O,ce?ce.getPaintVertexBuffers():[],F,ke.vertexOffset,me,ge,ye),se.drawElements(h,ke.primitiveLength*xe,se.UNSIGNED_SHORT,ke.primitiveOffset*xe*2)}}}function Rc(v,r,h){const f=1/Qt(h,1,r.transform.tileZoom),m=Math.pow(2,h.tileID.overscaledZ),y=h.tileSize*Math.pow(2,r.transform.tileZoom)/m,C=y*(h.tileID.canonical.x+h.tileID.wrap*m),T=y*h.tileID.canonical.y;return{u_image:0,u_texsize:h.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const ku=(v,r,h,f)=>{const m=r.style.light,y=m.properties.get("position"),C=[y.x,y.y,y.z],T=function(){var z=new u.A(9);return u.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,O){var F=Math.sin(O),K=Math.cos(O);z[0]=K,z[1]=F,z[2]=0,z[3]=-F,z[4]=K,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(T,-r.transform.angle),function(z,O,F){var K=O[0],ee=O[1],re=O[2];z[0]=K*F[0]+ee*F[3]+re*F[6],z[1]=K*F[1]+ee*F[4]+re*F[7],z[2]=K*F[2]+ee*F[5]+re*F[8]}(C,C,T);const M=m.properties.get("color");return{u_matrix:v,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+h,u_opacity:f}},Dc=(v,r,h,f,m,y,C)=>u.e(ku(v,r,h,f),Rc(y,r,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),ml=v=>({u_matrix:v}),Xm=(v,r,h,f)=>u.e(ml(v),Rc(h,r,f)),w1=(v,r)=>({u_matrix:v,u_world:r}),Ym=(v,r,h,f,m)=>u.e(Xm(v,r,h,f),{u_world:m}),S1=(v,r,h,f)=>{const m=v.transform;let y,C;if(f.paint.get("circle-pitch-alignment")==="map"){const T=Qt(h,1,m.zoom);y=!0,C=[T,T]}else y=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,h,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:C}},Ms=(v,r,h)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:h.cameraToCenterDistance,u_viewport_size:[h.width,h.height]}),Eu=(v,r,h=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:h}),Li=v=>({u_matrix:v}),zi=(v,r,h,f)=>({u_matrix:v,u_extrude_scale:Qt(r,1,h),u_intensity:f}),$c=(v,r,h,f)=>{const m=u.H();u.aP(m,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:h,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}};function Oc(v,r){const h=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new u.Z(0,f/h).toLngLat().lat,new u.Z(0,(f+1)/h).toLngLat().lat]}const Fc=(v,r,h,f)=>{const m=v.transform;return{u_matrix:eg(v,r,h,f),u_ratio:1/Qt(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Jm=(v,r,h,f,m)=>u.e(Fc(v,r,h,m),{u_image:0,u_image_height:f}),gl=(v,r,h,f,m)=>{const y=v.transform,C=Qm(r,y);return{u_matrix:eg(v,r,h,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Qt(r,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},C1=(v,r,h,f,m,y)=>{const C=v.lineAtlas,T=Qm(r,v.transform),M=h.layout.get("line-cap")==="round",z=C.getDash(f.from,M),O=C.getDash(f.to,M),F=z.width*m.fromScale,K=O.width*m.toScale;return u.e(Fc(v,r,h,y),{u_patternscale_a:[T/F,-z.height/2],u_patternscale_b:[T/K,-O.height/2],u_sdfgamma:C.width/(256*Math.min(F,K)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:O.y,u_mix:m.t})};function Qm(v,r){return 1/Qt(v,1,r.tileZoom)}function eg(v,r,h,f){return v.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,h.paint.get("line-translate"),h.paint.get("line-translate-anchor"))}const k1=(v,r,h,f,m)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:h,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:E1(m.paint.get("raster-hue-rotate"))};var y,C};function E1(v){v*=Math.PI/180;const r=Math.sin(v),h=Math.cos(v);return[(2*h+1)/3,(-Math.sqrt(3)*r-h+1)/3,(Math.sqrt(3)*r-h+1)/3]}const tg=(v,r,h,f,m,y,C,T,M,z,O,F,K,ee)=>{const re=C.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:re.cameraToCenterDistance,u_pitch:re.pitch/360*2*Math.PI,u_rotate_symbol:+h,u_aspect_ratio:re.width/re.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:M,u_coord_matrix:z,u_is_text:+F,u_pitch_with_map:+f,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:K,u_texture:0,u_translation:O,u_pitched_scale:ee}},Tu=(v,r,h,f,m,y,C,T,M,z,O,F,K,ee,re)=>{const ce=C.transform;return u.e(tg(v,r,h,f,m,y,C,T,M,z,O,F,K,re),{u_gamma_scale:f?Math.cos(ce._pitch)*ce.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+ee})},Kd=(v,r,h,f,m,y,C,T,M,z,O,F,K,ee)=>u.e(Tu(v,r,h,f,m,y,C,T,M,z,O,!0,F,!0,ee),{u_texsize_icon:K,u_texture_icon:1}),Bc=(v,r,h)=>({u_matrix:v,u_opacity:r,u_color:h}),Xd=(v,r,h,f,m,y)=>u.e(function(C,T,M,z){const O=M.imageManager.getPattern(C.from.toString()),F=M.imageManager.getPattern(C.to.toString()),{width:K,height:ee}=M.imageManager.getPixelSize(),re=Math.pow(2,z.tileID.overscaledZ),ce=z.tileSize*Math.pow(2,M.transform.tileZoom)/re,me=ce*(z.tileID.canonical.x+z.tileID.wrap*re),ge=ce*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[K,ee],u_mix:T.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/Qt(z,1,M.transform.tileZoom),u_pixel_coord_upper:[me>>16,ge>>16],u_pixel_coord_lower:[65535&me,65535&ge]}}(f,y,h,m),{u_matrix:v,u_opacity:r}),Yd={fillExtrusion:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_lightpos:new u.aN(v,r.u_lightpos),u_lightintensity:new u.aI(v,r.u_lightintensity),u_lightcolor:new u.aN(v,r.u_lightcolor),u_vertical_gradient:new u.aI(v,r.u_vertical_gradient),u_opacity:new u.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_lightpos:new u.aN(v,r.u_lightpos),u_lightintensity:new u.aI(v,r.u_lightintensity),u_lightcolor:new u.aN(v,r.u_lightcolor),u_vertical_gradient:new u.aI(v,r.u_vertical_gradient),u_height_factor:new u.aI(v,r.u_height_factor),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade),u_opacity:new u.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(v,r.u_scale_with_map),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_extrude_scale:new u.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_matrix:new u.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_pixel_extrude_scale:new u.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_inv_matrix:new u.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_viewport_size:new u.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new u.aL(v,r.u_color),u_matrix:new u.aJ(v,r.u_matrix),u_overlay:new u.aH(v,r.u_overlay),u_overlay_scale:new u.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new u.aI(v,r.u_extrude_scale),u_intensity:new u.aI(v,r.u_intensity),u_matrix:new u.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world),u_image:new u.aH(v,r.u_image),u_color_ramp:new u.aH(v,r.u_color_ramp),u_opacity:new u.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_latrange:new u.aO(v,r.u_latrange),u_light:new u.aO(v,r.u_light),u_shadow:new u.aL(v,r.u_shadow),u_highlight:new u.aL(v,r.u_highlight),u_accent:new u.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_dimension:new u.aO(v,r.u_dimension),u_zoom:new u.aI(v,r.u_zoom),u_unpack:new u.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_image:new u.aH(v,r.u_image),u_image_height:new u.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texsize:new u.aO(v,r.u_texsize),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_image:new u.aH(v,r.u_image),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_patternscale_a:new u.aO(v,r.u_patternscale_a),u_patternscale_b:new u.aO(v,r.u_patternscale_b),u_sdfgamma:new u.aI(v,r.u_sdfgamma),u_image:new u.aH(v,r.u_image),u_tex_y_a:new u.aI(v,r.u_tex_y_a),u_tex_y_b:new u.aI(v,r.u_tex_y_b),u_mix:new u.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_tl_parent:new u.aO(v,r.u_tl_parent),u_scale_parent:new u.aI(v,r.u_scale_parent),u_buffer_scale:new u.aI(v,r.u_buffer_scale),u_fade_t:new u.aI(v,r.u_fade_t),u_opacity:new u.aI(v,r.u_opacity),u_image0:new u.aH(v,r.u_image0),u_image1:new u.aH(v,r.u_image1),u_brightness_low:new u.aI(v,r.u_brightness_low),u_brightness_high:new u.aI(v,r.u_brightness_high),u_saturation_factor:new u.aI(v,r.u_saturation_factor),u_contrast_factor:new u.aI(v,r.u_contrast_factor),u_spin_weights:new u.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texture:new u.aH(v,r.u_texture),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texture:new u.aH(v,r.u_texture),u_gamma_scale:new u.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_is_halo:new u.aH(v,r.u_is_halo),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texsize_icon:new u.aO(v,r.u_texsize_icon),u_texture:new u.aH(v,r.u_texture),u_texture_icon:new u.aH(v,r.u_texture_icon),u_gamma_scale:new u.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_is_halo:new u.aH(v,r.u_is_halo),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_opacity:new u.aI(v,r.u_opacity),u_color:new u.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_opacity:new u.aI(v,r.u_opacity),u_image:new u.aH(v,r.u_image),u_pattern_tl_a:new u.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new u.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new u.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new u.aO(v,r.u_pattern_br_b),u_texsize:new u.aO(v,r.u_texsize),u_mix:new u.aI(v,r.u_mix),u_pattern_size_a:new u.aO(v,r.u_pattern_size_a),u_pattern_size_b:new u.aO(v,r.u_pattern_size_b),u_scale_a:new u.aI(v,r.u_scale_a),u_scale_b:new u.aI(v,r.u_scale_b),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texture:new u.aH(v,r.u_texture),u_ele_delta:new u.aI(v,r.u_ele_delta),u_fog_matrix:new u.aJ(v,r.u_fog_matrix),u_fog_color:new u.aL(v,r.u_fog_color),u_fog_ground_blend:new u.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(v,r.u_horizon_color),u_horizon_fog_blend:new u.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ele_delta:new u.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texture:new u.aH(v,r.u_texture),u_terrain_coords_id:new u.aI(v,r.u_terrain_coords_id),u_ele_delta:new u.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new u.aL(v,r.u_sky_color),u_horizon_color:new u.aL(v,r.u_horizon_color),u_horizon:new u.aI(v,r.u_horizon),u_sky_horizon_blend:new u.aI(v,r.u_sky_horizon_blend)})};class oa{constructor(r,h,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const h=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),h.bufferSubData(h.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const T1={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Jd{constructor(r,h,f,m){this.length=h.length,this.attributes=f,this.itemSize=h.bytesPerElement,this.dynamicDraw=m,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,h.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete h.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const h=this.context.gl;this.bind(),h.bufferSubData(h.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,h){for(let f=0;f<this.attributes.length;f++){const m=h.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,h,f){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],C=h.attributes[y.name];C!==void 0&&r.vertexAttribPointer(C,y.components,r[T1[y.type]],!1,this.itemSize,y.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const As=new WeakMap;function es(v){var r;if(As.has(v))return As.get(v);{const h=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return As.set(v,h),h}}class Sn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Nc extends Sn{getDefault(){return u.aM.transparent}set(r){const h=this.current;(r.r!==h.r||r.g!==h.g||r.b!==h.b||r.a!==h.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class I1 extends Sn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class yl extends Sn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class P1 extends Sn{getDefault(){return[!0,!0,!0,!0]}set(r){const h=this.current;(r[0]!==h[0]||r[1]!==h[1]||r[2]!==h[2]||r[3]!==h[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class ng extends Sn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class M1 extends Sn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class rg extends Sn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const h=this.current;(r.func!==h.func||r.ref!==h.ref||r.mask!==h.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Qd extends Sn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const h=this.current;(r[0]!==h[0]||r[1]!==h[1]||r[2]!==h[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class ig extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;r?h.enable(h.STENCIL_TEST):h.disable(h.STENCIL_TEST),this.current=r,this.dirty=!1}}class og extends Sn{getDefault(){return[0,1]}set(r){const h=this.current;(r[0]!==h[0]||r[1]!==h[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class ag extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;r?h.enable(h.DEPTH_TEST):h.disable(h.DEPTH_TEST),this.current=r,this.dirty=!1}}class sg extends Sn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class Ls extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;r?h.enable(h.BLEND):h.disable(h.BLEND),this.current=r,this.dirty=!1}}class lg extends Sn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const h=this.current;(r[0]!==h[0]||r[1]!==h[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class A1 extends Sn{getDefault(){return u.aM.transparent}set(r){const h=this.current;(r.r!==h.r||r.g!==h.g||r.b!==h.b||r.a!==h.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class ug extends Sn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Iu extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;r?h.enable(h.CULL_FACE):h.disable(h.CULL_FACE),this.current=r,this.dirty=!1}}class L1 extends Sn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class jc extends Sn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class z1 extends Sn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class R1 extends Sn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class cg extends Sn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const h=this.current;(r[0]!==h[0]||r[1]!==h[1]||r[2]!==h[2]||r[3]!==h[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class hg extends Sn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.bindFramebuffer(h.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class dg extends Sn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.bindRenderbuffer(h.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ep extends Sn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.bindTexture(h.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class pg extends Sn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.bindBuffer(h.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Uc extends Sn{getDefault(){return null}set(r){const h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class La extends Sn{getDefault(){return null}set(r){var h;if(r===this.current&&!this.dirty)return;const f=this.gl;es(f)?f.bindVertexArray(r):(h=f.getExtension("OES_vertex_array_object"))===null||h===void 0||h.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class tp extends Sn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class np extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class rp extends Sn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const h=this.gl;h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Vc extends Sn{constructor(r,h){super(r),this.context=r,this.parent=h}getDefault(){return null}}class ip extends Vc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class zs extends Vc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_ATTACHMENT,h.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class op extends Vc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const h=this.gl;h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class D1{constructor(r,h,f,m,y){this.context=r,this.width=h,this.height=f;const C=r.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new ip(r,T),m)this.depthAttachment=y?new op(r,T):new zs(r,T);else if(y)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,h=this.colorAttachment.get();if(h&&r.deleteTexture(h),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class _r{constructor(r,h,f){this.blendFunction=r,this.blendColor=h,this.mask=f}}_r.Replace=[1,0],_r.disabled=new _r(_r.Replace,u.aM.transparent,[!1,!1,!1,!1]),_r.unblended=new _r(_r.Replace,u.aM.transparent,[!0,!0,!0,!0]),_r.alphaBlended=new _r([1,771],u.aM.transparent,[!0,!0,!0,!0]);class $1{constructor(r){var h,f;if(this.gl=r,this.clearColor=new Nc(this),this.clearDepth=new I1(this),this.clearStencil=new yl(this),this.colorMask=new P1(this),this.depthMask=new ng(this),this.stencilMask=new M1(this),this.stencilFunc=new rg(this),this.stencilOp=new Qd(this),this.stencilTest=new ig(this),this.depthRange=new og(this),this.depthTest=new ag(this),this.depthFunc=new sg(this),this.blend=new Ls(this),this.blendFunc=new lg(this),this.blendColor=new A1(this),this.blendEquation=new ug(this),this.cullFace=new Iu(this),this.cullFaceSide=new L1(this),this.frontFace=new jc(this),this.program=new z1(this),this.activeTexture=new R1(this),this.viewport=new cg(this),this.bindFramebuffer=new hg(this),this.bindRenderbuffer=new dg(this),this.bindTexture=new ep(this),this.bindVertexBuffer=new pg(this),this.bindElementBuffer=new Uc(this),this.bindVertexArray=new La(this),this.pixelStoreUnpack=new tp(this),this.pixelStoreUnpackPremultiplyAlpha=new np(this),this.pixelStoreUnpackFlipY=new rp(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),es(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(h=r.RGBA16F)!==null&&h!==void 0?h:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,h){return new oa(this,r,h)}createVertexBuffer(r,h,f){return new Jd(this,r,h,f)}createRenderbuffer(r,h,f){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,r,h,f),this.bindRenderbuffer.set(null),y}createFramebuffer(r,h,f,m){return new D1(this,r,h,f,m)}clear({color:r,depth:h,stencil:f}){const m=this.gl;let y=0;r&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),h!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(h),this.depthMask.set(!0)),f!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,_r.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return es(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var h;return es(this.gl)?this.gl.deleteVertexArray(r):(h=this.gl.getExtension("OES_vertex_array_object"))===null||h===void 0?void 0:h.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Zt{constructor(r,h,f){this.func=r,this.mask=h,this.range=f}}Zt.ReadOnly=!1,Zt.ReadWrite=!0,Zt.disabled=new Zt(519,Zt.ReadOnly,[0,1]);const Wc=7680;class Vn{constructor(r,h,f,m,y,C){this.test=r,this.ref=h,this.mask=f,this.fail=m,this.depthFail=y,this.pass=C}}Vn.disabled=new Vn({func:519,mask:0},0,0,Wc,Wc,Wc);class Ln{constructor(r,h,f){this.enable=r,this.mode=h,this.frontFace=f}}let Rs;function Pu(v,r,h,f,m){const y=v.context,C=y.gl,T=v.useProgram("collisionBox"),M=[];let z=0,O=0;for(let ge=0;ge<f.length;ge++){const ye=f[ge],se=r.getTile(ye).getBucket(h);if(!se)continue;const xe=m?se.textCollisionBox:se.iconCollisionBox,ke=se.collisionCircleArray;if(ke.length>0){const Pe=u.H();u.aQ(Pe,se.placementInvProjMatrix,v.transform.glCoordMatrix),u.aQ(Pe,Pe,se.placementViewportMatrix),M.push({circleArray:ke,circleOffset:O,transform:ye.posMatrix,invTransform:Pe,coord:ye}),z+=ke.length/4,O=z}xe&&T.draw(y,C.LINES,Zt.disabled,Vn.disabled,v.colorModeForRenderPass(),Ln.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(F=v.transform).width,1/F.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),h.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,v.transform.zoom,null,null,xe.collisionVertexBuffer)}var F;if(!m||!M.length)return;const K=v.useProgram("collisionCircle"),ee=new u.aR;ee.resize(4*z),ee._trim();let re=0;for(const ge of M)for(let ye=0;ye<ge.circleArray.length/4;ye++){const se=4*ye,xe=ge.circleArray[se+0],ke=ge.circleArray[se+1],Pe=ge.circleArray[se+2],Ne=ge.circleArray[se+3];ee.emplace(re++,xe,ke,Pe,Ne,0),ee.emplace(re++,xe,ke,Pe,Ne,1),ee.emplace(re++,xe,ke,Pe,Ne,2),ee.emplace(re++,xe,ke,Pe,Ne,3)}(!Rs||Rs.length<2*z)&&(Rs=function(ge){const ye=2*ge,se=new u.aT;se.resize(ye),se._trim();for(let xe=0;xe<ye;xe++){const ke=6*xe;se.uint16[ke+0]=4*xe+0,se.uint16[ke+1]=4*xe+1,se.uint16[ke+2]=4*xe+2,se.uint16[ke+3]=4*xe+2,se.uint16[ke+4]=4*xe+3,se.uint16[ke+5]=4*xe+0}return se}(z));const ce=y.createIndexBuffer(Rs,!0),me=y.createVertexBuffer(ee,u.aS.members,!0);for(const ge of M){const ye=Ms(ge.transform,ge.invTransform,v.transform);K.draw(y,C.TRIANGLES,Zt.disabled,Vn.disabled,v.colorModeForRenderPass(),Ln.disabled,ye,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ge.coord),h.id,me,ce,u.a0.simpleSegment(0,2*ge.circleOffset,ge.circleArray.length,ge.circleArray.length/2),null,v.transform.zoom,null,null,null)}me.destroy(),ce.destroy()}Ln.disabled=new Ln(!1,1029,2305),Ln.backCCW=new Ln(!0,1029,2305);const Mu=u.an(new Float32Array(16));function ap(v,r,h,f,m,y){const{horizontalAlign:C,verticalAlign:T}=u.au(v);return new u.P((-(C-.5)*r/m+f[0])*y,(-(T-.5)*h/m+f[1])*y)}function Ds(v,r,h,f,m,y){const C=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let T=f.mult(y);h||(T=T.rotate(-m));const M=C.add(T);return pe(M.x,M.y,r.labelPlaneMatrix,r.getElevation).point}if(h){const T=Ae(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),M=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return v.add(f.rotate(M))}return v.add(f)}function vl(v,r,h,f,m,y,C,T,M,z,O,F,K,ee){const re=v.text.placedSymbolArray,ce=v.text.dynamicLayoutVertexArray,me=v.icon.dynamicLayoutVertexArray,ge={};ce.clear();for(let ye=0;ye<re.length;ye++){const se=re.get(ye),xe=se.hidden||!se.crossTileID||v.allowVerticalPlacement&&!se.placedOrientation?null:f[se.crossTileID];if(xe){const ke=new u.P(se.anchorX,se.anchorY),Pe={getElevation:ee,width:m.width,height:m.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:h,projection:O,projectionCache:null,tileAnchorPoint:ke,translation:F,unwrappedTileID:K},Ne=h?pe(ke.x,ke.y,C,ee):Ae(ke.x,ke.y,Pe),Ze=q(m.cameraToCenterDistance,Ne.signedDistanceFromCamera);let nt=u.ai(v.textSizeData,M,se)*Ze/u.ap;h&&(nt*=v.tilePixelRatio/T);const{width:ct,height:Qe,anchor:Je,textOffset:_t,textBoxScale:Nt}=xe,et=ap(Je,ct,Qe,_t,Nt,nt),lt=O.getPitchedTextCorrection(m,ke.add(new u.P(F[0],F[1])),K),Ft=Ds(Ne.point,Pe,r,et,m.angle,lt),Xn=v.allowVerticalPlacement&&se.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let Ht=0;Ht<se.numGlyphs;Ht++)u.aj(ce,Ft,Xn);z&&se.associatedIconIndex>=0&&(ge[se.associatedIconIndex]={shiftedAnchor:Ft,angle:Xn})}else Tt(se.numGlyphs,ce)}if(z){me.clear();const ye=v.icon.placedSymbolArray;for(let se=0;se<ye.length;se++){const xe=ye.get(se);if(xe.hidden)Tt(xe.numGlyphs,me);else{const ke=ge[se];if(ke)for(let Pe=0;Pe<xe.numGlyphs;Pe++)u.aj(me,ke.shiftedAnchor,ke.angle);else Tt(xe.numGlyphs,me)}}v.icon.dynamicLayoutVertexBuffer.updateData(me)}v.text.dynamicLayoutVertexBuffer.updateData(ce)}function go(v,r,h){return h.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function sp(v,r,h,f,m,y,C,T,M,z,O,F){const K=v.context,ee=K.gl,re=v.transform,ce=Is(),me=T==="map",ge=M==="map",ye=T!=="viewport"&&h.layout.get("symbol-placement")!=="point",se=me&&!ge&&!ye,xe=!ge&&ye,ke=!h.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ne=v.depthModeForSublayer(0,Zt.ReadOnly),Ze=h._unevaluatedLayout.hasValue("text-variable-anchor")||h._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nt=[],ct=ce.getCircleRadiusCorrection(re);for(const Qe of f){const Je=r.getTile(Qe),_t=Je.getBucket(h);if(!_t)continue;const Nt=m?_t.text:_t.icon;if(!Nt||!Nt.segments.get().length||!Nt.hasVisibleVertices)continue;const et=Nt.programConfigurations.get(h.id),lt=m||_t.sdfIcons,Ft=m?_t.textSizeData:_t.iconSizeData,Xn=ge||re.pitch!==0,Ht=v.useProgram(go(lt,m,_t),et),en=u.ag(Ft,re.zoom),Yn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Qe);let li,$o,Jn,Ri,bi=[0,0],ui=null;if(m)$o=Je.glyphAtlasTexture,Jn=ee.LINEAR,li=Je.glyphAtlasTexture.size,_t.iconsInText&&(bi=Je.imageAtlasTexture.size,ui=Je.imageAtlasTexture,Ri=Xn||v.options.rotating||v.options.zooming||Ft.kind==="composite"||Ft.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const on=h.layout.get("icon-size").constantOr(0)!==1||_t.iconsNeedLinear;$o=Je.imageAtlasTexture,Jn=lt||v.options.rotating||v.options.zooming||on||Xn?ee.LINEAR:ee.NEAREST,li=Je.imageAtlasTexture.size}const wi=Qt(Je,1,v.transform.zoom),la=xe?Qe.posMatrix:Mu,Rl=ia(la,ge,me,v.transform,wi),uh=fo(la,ge,me,v.transform,wi),Dl=fo(Qe.posMatrix,ge,me,v.transform,wi),_o=ce.translatePosition(v.transform,Je,y,C),ch=Ze&&_t.hasTextData(),Lp=h.layout.get("icon-text-fit")!=="none"&&ch&&_t.hasIconData();if(ye){const on=v.style.map.terrain?($l,Ol)=>v.style.map.terrain.getElevation(Qe,$l,Ol):null,Ns=h.layout.get("text-rotation-alignment")==="map";Q(_t,Qe.posMatrix,v,m,Rl,Dl,ge,z,Ns,ce,Qe.toUnwrapped(),re.width,re.height,_o,on)}const xo=Qe.posMatrix,bo=m&&Ze||Lp,ts=ye||bo?Mu:Rl,Oo=uh,ei=lt&&h.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ci;ci=lt?_t.iconsInText?Kd(Ft.kind,en,se,ge,ye,bo,v,xo,ts,Oo,_o,li,bi,ct):Tu(Ft.kind,en,se,ge,ye,bo,v,xo,ts,Oo,_o,m,li,!0,ct):tg(Ft.kind,en,se,ge,ye,bo,v,xo,ts,Oo,_o,m,li,ct);const eo={program:Ht,buffers:Nt,uniformValues:ci,atlasTexture:$o,atlasTextureIcon:ui,atlasInterpolation:Jn,atlasInterpolationIcon:Ri,isSDF:lt,hasHalo:ei};if(ke&&_t.canOverlap){Pe=!0;const on=Nt.segments.get();for(const Ns of on)nt.push({segments:new u.a0([Ns]),sortKey:Ns.sortKey,state:eo,terrainData:Yn})}else nt.push({segments:Nt.segments,sortKey:0,state:eo,terrainData:Yn})}Pe&&nt.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of nt){const Je=Qe.state;if(K.activeTexture.set(ee.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ee.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(K.activeTexture.set(ee.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Je.isSDF){const _t=Je.uniformValues;Je.hasHalo&&(_t.u_is_halo=1,lp(Je.buffers,Qe.segments,h,v,Je.program,Ne,O,F,_t,Qe.terrainData)),_t.u_is_halo=0}lp(Je.buffers,Qe.segments,h,v,Je.program,Ne,O,F,Je.uniformValues,Qe.terrainData)}}function lp(v,r,h,f,m,y,C,T,M,z){const O=f.context;m.draw(O,O.gl.TRIANGLES,y,C,T,Ln.disabled,M,z,h.id,v.layoutVertexBuffer,v.indexBuffer,r,h.paint,f.transform.zoom,v.programConfigurations.get(h.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function up(v,r,h,f){const m=v.context,y=m.gl,C=Vn.disabled,T=new _r([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),M=r.getBucket(h);if(!M)return;const z=f.key;let O=h.heatmapFbos.get(z);O||(O=Au(m,r.tileSize,r.tileSize),h.heatmapFbos.set(z,O)),m.bindFramebuffer.set(O.framebuffer),m.viewport.set([0,0,r.tileSize,r.tileSize]),m.clear({color:u.aM.transparent});const F=M.programConfigurations.get(h.id),K=v.useProgram("heatmap",F),ee=v.style.map.terrain.getTerrainData(f);K.draw(m,y.TRIANGLES,Zt.disabled,C,T,Ln.disabled,zi(f.posMatrix,r,v.transform.zoom,h.paint.get("heatmap-intensity")),ee,h.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,h.paint,v.transform.zoom,F)}function $s(v,r,h){const f=v.context,m=f.gl;f.setColorMode(v.colorModeForRenderPass());const y=Lu(f,r),C=h.key,T=r.heatmapFbos.get(C);T&&(f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,T.colorAttachment.get()),f.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,m.TRIANGLES,Zt.disabled,Vn.disabled,v.colorModeForRenderPass(),Ln.disabled,$c(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),T.destroy(),r.heatmapFbos.delete(C))}function Au(v,r,h){var f,m;const y=v.gl,C=y.createTexture();y.bindTexture(y.TEXTURE_2D,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const T=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:y.UNSIGNED_BYTE,M=(m=v.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,r,h,0,y.RGBA,T,null);const z=v.createFramebuffer(r,h,!1,!1);return z.colorAttachment.set(C),z}function Lu(v,r){return r.colorRampTexture||(r.colorRampTexture=new Ie(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function _l(v,r,h,f,m){if(!h||!f||!f.imageAtlas)return;const y=f.imageAtlas.patternPositions;let C=y[h.to.toString()],T=y[h.from.toString()];if(!C&&T&&(C=T),!T&&C&&(T=C),!C||!T){const M=m.getPaintProperty(r);C=y[M],T=y[M]}C&&T&&v.setConstantPatternPositions(C,T)}function zu(v,r,h,f,m,y,C){const T=v.context.gl,M="fill-pattern",z=h.paint.get(M),O=z&&z.constantOr(1),F=h.getCrossfadeParameters();let K,ee,re,ce,me;C?(ee=O&&!h.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",K=T.LINES):(ee=O?"fillPattern":"fill",K=T.TRIANGLES);const ge=z.constantOr(null);for(const ye of f){const se=r.getTile(ye);if(O&&!se.patternsLoaded())continue;const xe=se.getBucket(h);if(!xe)continue;const ke=xe.programConfigurations.get(h.id),Pe=v.useProgram(ee,ke),Ne=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye);O&&(v.context.activeTexture.set(T.TEXTURE0),se.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),ke.updatePaintBuffers(F)),_l(ke,M,ge,se,h);const Ze=Ne?ye:null,nt=v.translatePosMatrix(Ze?Ze.posMatrix:ye.posMatrix,se,h.paint.get("fill-translate"),h.paint.get("fill-translate-anchor"));if(C){ce=xe.indexBuffer2,me=xe.segments2;const ct=[T.drawingBufferWidth,T.drawingBufferHeight];re=ee==="fillOutlinePattern"&&O?Ym(nt,v,F,se,ct):w1(nt,ct)}else ce=xe.indexBuffer,me=xe.segments,re=O?Xm(nt,v,F,se):ml(nt);Pe.draw(v.context,K,m,v.stencilModeForClipping(ye),y,Ln.disabled,re,Ne,h.id,xe.layoutVertexBuffer,ce,me,h.paint,v.transform.zoom,ke)}}function qc(v,r,h,f,m,y,C){const T=v.context,M=T.gl,z="fill-extrusion-pattern",O=h.paint.get(z),F=O.constantOr(1),K=h.getCrossfadeParameters(),ee=h.paint.get("fill-extrusion-opacity"),re=O.constantOr(null);for(const ce of f){const me=r.getTile(ce),ge=me.getBucket(h);if(!ge)continue;const ye=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ce),se=ge.programConfigurations.get(h.id),xe=v.useProgram(F?"fillExtrusionPattern":"fillExtrusion",se);F&&(v.context.activeTexture.set(M.TEXTURE0),me.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),se.updatePaintBuffers(K)),_l(se,z,re,me,h);const ke=v.translatePosMatrix(ce.posMatrix,me,h.paint.get("fill-extrusion-translate"),h.paint.get("fill-extrusion-translate-anchor")),Pe=h.paint.get("fill-extrusion-vertical-gradient"),Ne=F?Dc(ke,v,Pe,ee,ce,K,me):ku(ke,v,Pe,ee);xe.draw(T,T.gl.TRIANGLES,m,y,C,Ln.backCCW,Ne,ye,h.id,ge.layoutVertexBuffer,ge.indexBuffer,ge.segments,h.paint,v.transform.zoom,se,v.style.map.terrain&&ge.centroidVertexBuffer)}}function xl(v,r,h,f,m,y,C){const T=v.context,M=T.gl,z=h.fbo;if(!z)return;const O=v.useProgram("hillshade"),F=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,z.colorAttachment.get()),O.draw(T,M.TRIANGLES,m,y,C,Ln.disabled,((K,ee,re,ce)=>{const me=re.paint.get("hillshade-shadow-color"),ge=re.paint.get("hillshade-highlight-color"),ye=re.paint.get("hillshade-accent-color");let se=re.paint.get("hillshade-illumination-direction")*(Math.PI/180);re.paint.get("hillshade-illumination-anchor")==="viewport"&&(se-=K.transform.angle);const xe=!K.options.moving;return{u_matrix:ce?ce.posMatrix:K.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),xe),u_image:0,u_latrange:Oc(0,ee.tileID),u_light:[re.paint.get("hillshade-exaggeration"),se],u_shadow:me,u_highlight:ge,u_accent:ye}})(v,h,f,F?r:null),F,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function bl(v,r,h,f,m,y){const C=v.context,T=C.gl,M=r.dem;if(M&&M.data){const z=M.dim,O=M.stride,F=M.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(O),r.demTexture){const ee=r.demTexture;ee.update(F,{premultiply:!1}),ee.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else r.demTexture=new Ie(C,F,T.RGBA,{premultiply:!1}),r.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let K=r.fbo;if(!K){const ee=new Ie(C,{width:z,height:z,data:null},T.RGBA);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),K=r.fbo=C.createFramebuffer(z,z,!0,!1),K.colorAttachment.set(ee.texture)}C.bindFramebuffer.set(K.framebuffer),C.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,f,m,y,Ln.disabled,((ee,re)=>{const ce=re.stride,me=u.H();return u.aP(me,0,u.X,-u.X,0,0,1),u.J(me,me,[0,-u.X,0]),{u_matrix:me,u_image:1,u_dimension:[ce,ce],u_zoom:ee.overscaledZ,u_unpack:re.getUnpackVector()}})(r.tileID,M),null,h.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function fg(v,r,h,f,m,y){const C=f.paint.get("raster-fade-duration");if(!y&&C>0){const T=k.now(),M=(T-v.timeAdded)/C,z=r?(T-r.timeAdded)/C:-1,O=h.getSource(),F=m.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),K=!r||Math.abs(r.tileID.overscaledZ-F)>Math.abs(v.tileID.overscaledZ-F),ee=K&&v.refreshedUponExpiration?1:u.ac(K?M:1-z,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const cp=new u.aM(1,0,0,1),yn=new u.aM(0,1,0,1),Hc=new u.aM(0,0,1,1),O1=new u.aM(1,0,1,1),mg=new u.aM(0,1,1,1);function wl(v,r,h,f){Gc(v,0,r+h/2,v.transform.width,h,f)}function gg(v,r,h,f){Gc(v,r-h/2,0,h,v.transform.height,f)}function Gc(v,r,h,f,m,y){const C=v.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(r*v.pixelRatio,h*v.pixelRatio,f*v.pixelRatio,m*v.pixelRatio),C.clear({color:y}),T.disable(T.SCISSOR_TEST)}function yg(v,r,h){const f=v.context,m=f.gl,y=h.posMatrix,C=v.useProgram("debug"),T=Zt.disabled,M=Vn.disabled,z=v.colorModeForRenderPass(),O="$debug",F=v.style.map.terrain&&v.style.map.terrain.getTerrainData(h);f.activeTexture.set(m.TEXTURE0);const K=r.getTileByID(h.key).latestRawTileData,ee=Math.floor((K&&K.byteLength||0)/1024),re=r.getTile(h).tileSize,ce=512/Math.min(re,512)*(h.overscaledZ/v.transform.zoom)*.5;let me=h.canonical.toString();h.overscaledZ!==h.canonical.z&&(me+=` => ${h.overscaledZ}`),function(ge,ye){ge.initDebugOverlayCanvas();const se=ge.debugOverlayCanvas,xe=ge.context.gl,ke=ge.debugOverlayCanvas.getContext("2d");ke.clearRect(0,0,se.width,se.height),ke.shadowColor="white",ke.shadowBlur=2,ke.lineWidth=1.5,ke.strokeStyle="white",ke.textBaseline="top",ke.font="bold 36px Open Sans, sans-serif",ke.fillText(ye,5,5),ke.strokeText(ye,5,5),ge.debugOverlayTexture.update(se),ge.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(v,`${me} ${ee}kB`),C.draw(f,m.TRIANGLES,T,M,_r.alphaBlended,Ln.disabled,Eu(y,u.aM.transparent,ce),null,O,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),C.draw(f,m.LINE_STRIP,T,M,z,Ln.disabled,Eu(y,u.aM.red),F,O,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function vg(v,r,h){const f=v.context,m=f.gl,y=v.colorModeForRenderPass(),C=new Zt(m.LEQUAL,Zt.ReadWrite,v.depthRangeFor3D),T=v.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(const z of h){const O=v.renderToTexture.getTexture(z),F=r.getTerrainData(z.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,O.texture);const K=v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),ee=r.getMeshFrameDelta(v.transform.zoom),re=v.transform.calculateFogMatrix(z.tileID.toUnwrapped()),ce=Gd(K,ee,re,v.style.sky,v.transform.pitch);T.draw(f,m.TRIANGLES,C,Vn.disabled,y,Ln.backCCW,ce,F,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Zc{constructor(r,h,f){this.vertexBuffer=r,this.indexBuffer=h,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Kc{constructor(r,h){this.context=new $1(r),this.transform=h,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=it.maxUnderzooming+it.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qd}resize(r,h,f){if(this.width=Math.floor(r*f),this.height=Math.floor(h*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,h=new u.aX;h.emplaceBack(0,0),h.emplaceBack(u.X,0),h.emplaceBack(0,u.X),h.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(h,Ps.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const f=new u.aX;f.emplaceBack(0,0),f.emplaceBack(u.X,0),f.emplaceBack(0,u.X),f.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(f,Ps.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const m=new u.$;m.emplaceBack(0,0,0,0),m.emplaceBack(u.X,0,u.X,0),m.emplaceBack(0,u.X,0,u.X),m.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(m,ir.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,Ps.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const C=new u.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const T=new u.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new Vn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,h=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.H();u.aP(f,0,this.width,this.height,0,0,1),u.K(f,f,[h.drawingBufferWidth,h.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,h.TRIANGLES,Zt.disabled,this.stencilClearMode,_r.disabled,Ln.disabled,Li(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,h){if(this.currentStencilSource===r.source||!r.isTileClipped()||!h||!h.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+h.length>256&&this.clearStencil(),f.setColorMode(_r.disabled),f.setDepthMode(Zt.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of h){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);y.draw(f,m.TRIANGLES,Zt.disabled,new Vn({func:m.ALWAYS,mask:0},T,255,m.KEEP,m.KEEP,m.REPLACE),_r.disabled,Ln.disabled,Li(C.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,h=this.context.gl;return new Vn({func:h.NOTEQUAL,mask:255},r,255,h.KEEP,h.KEEP,h.REPLACE)}stencilModeForClipping(r){const h=this.context.gl;return new Vn({func:h.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,h.KEEP,h.KEEP,h.REPLACE)}stencilConfigForOverlap(r){const h=this.context.gl,f=r.sort((C,T)=>T.overscaledZ-C.overscaledZ),m=f[f.length-1].overscaledZ,y=f[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const C={};for(let T=0;T<y;T++)C[T+m]=new Vn({func:h.GEQUAL,mask:255},T+this.nextStencilID,255,h.KEEP,h.KEEP,h.REPLACE);return this.nextStencilID+=y,[C,f]}return[{[m]:Vn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new _r([r.CONSTANT_COLOR,r.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?_r.unblended:_r.alphaBlended}depthModeForSublayer(r,h,f){if(!this.opaquePassEnabledForLayer())return Zt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Zt(f||this.context.gl.LEQUAL,h,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,h){this.style=r,this.options=h,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(k.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,y={},C={},T={};for(const M in m){const z=m[M];z.used&&z.prepare(this.context),y[M]=z.getVisibleCoordinates(),C[M]=y[M].slice().reverse(),T[M]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of f){const z=this.style._layers[M];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const O=C[z.source];(z.type==="custom"||O.length)&&this.renderLayer(this,m[z.source],z,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:h.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(M,z){const O=M.context,F=O.gl,K=((ge,ye,se)=>({u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*se,u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*ye.height/2*se}))(z,M.style.map.transform,M.pixelRatio),ee=new Zt(F.LEQUAL,Zt.ReadWrite,[0,1]),re=Vn.disabled,ce=M.colorModeForRenderPass(),me=M.useProgram("sky");if(!z.mesh){const ge=new u.aX;ge.emplaceBack(-1,-1),ge.emplaceBack(1,-1),ge.emplaceBack(1,1),ge.emplaceBack(-1,1);const ye=new u.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),z.mesh=new Zc(O.createVertexBuffer(ge,Ps.members),O.createIndexBuffer(ye),u.a0.simpleSegment(0,0,ge.length,ye.length))}me.draw(O,F.TRIANGLES,ee,re,ce,Ln.disabled,K,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=h.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],z=m[M.source],O=y[M.source];this._renderTileClippingMasks(M,O),this.renderLayer(this,z,M,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],z=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const O=(M.type==="symbol"?T:C)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,z,M,O)}if(this.options.showTileBoundaries){const M=function(z,O){let F=null;const K=Object.values(z._layers).flatMap(me=>me.source&&!me.isHidden(O)?[z.sourceCaches[me.source]]:[]),ee=K.filter(me=>me.getSource().type==="vector"),re=K.filter(me=>me.getSource().type!=="vector"),ce=me=>{(!F||F.getSource().maxzoom<me.getSource().maxzoom)&&(F=me)};return ee.forEach(me=>ce(me)),F||re.forEach(me=>ce(me)),F}(this.style,this.transform.zoom);M&&function(z,O,F){for(let K=0;K<F.length;K++)yg(z,O,F[K])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const z=M.transform.padding;wl(M,M.transform.height-(z.top||0),3,cp),wl(M,z.bottom||0,3,yn),gg(M,z.left||0,3,Hc),gg(M,M.transform.width-(z.right||0),3,O1);const O=M.transform.centerPoint;(function(F,K,ee,re){Gc(F,K-1,ee-10,2,20,re),Gc(F,K-10,ee-1,20,2,re)})(M,O.x,M.transform.height-O.y,mg)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const h=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!u.a_(h,f):!u.a$(h,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.b0(h,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,C){const T=y.context,M=T.gl,z=_r.unblended,O=new Zt(M.LEQUAL,Zt.ReadWrite,[0,1]),F=C.getTerrainMesh(),K=C.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainDepth");T.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:u.aM.transparent,depth:1});for(const re of K){const ce=C.getTerrainData(re.tileID),me={u_matrix:y.transform.calculatePosMatrix(re.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};ee.draw(T,M.TRIANGLES,O,Vn.disabled,z,Ln.backCCW,me,ce,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,C){const T=y.context,M=T.gl,z=_r.unblended,O=new Zt(M.LEQUAL,Zt.ReadWrite,[0,1]),F=C.getTerrainMesh(),K=C.getCoordsTexture(),ee=C.sourceCache.getRenderableTiles(),re=y.useProgram("terrainCoords");T.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:u.aM.transparent,depth:1}),C.coordsIndex=[];for(const ce of ee){const me=C.getTerrainData(ce.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,K.texture);const ge={u_matrix:y.transform.calculatePosMatrix(ce.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};re.draw(T,M.TRIANGLES,O,Vn.disabled,z,Ln.backCCW,ge,me,"terrain",F.vertexBuffer,F.indexBuffer,F.segments),C.coordsIndex.push(ce.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,h,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(y,C,T,M,z){if(y.renderPass!=="translucent")return;const O=Vn.disabled,F=y.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(K,ee,re,ce,me,ge,ye,se,xe){const ke=ee.transform,Pe=Is(),Ne=me==="map",Ze=ge==="map";for(const nt of K){const ct=ce.getTile(nt),Qe=ct.getBucket(re);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const Je=u.ag(Qe.textSizeData,ke.zoom),_t=Qt(ct,1,ee.transform.zoom),Nt=ia(nt.posMatrix,Ze,Ne,ee.transform,_t),et=re.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(Je){const lt=Math.pow(2,ke.zoom-ct.tileID.overscaledZ),Ft=ee.style.map.terrain?(Ht,en)=>ee.style.map.terrain.getElevation(nt,Ht,en):null,Xn=Pe.translatePosition(ke,ct,ye,se);vl(Qe,Ne,Ze,xe,ke,Nt,nt.posMatrix,lt,Je,et,Pe,Xn,nt.toUnwrapped(),Ft)}}}(M,y,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),z),T.paint.get("icon-opacity").constantOr(1)!==0&&sp(y,C,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),O,F),T.paint.get("text-opacity").constantOr(1)!==0&&sp(y,C,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),O,F),C.map.showCollisionBoxes&&(Pu(y,C,T,M,!0),Pu(y,C,T,M,!1))})(r,h,f,m,this.style.placement.variableOffsets);break;case"circle":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("circle-opacity"),O=T.paint.get("circle-stroke-width"),F=T.paint.get("circle-stroke-opacity"),K=!T.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(O.constantOr(1)===0||F.constantOr(1)===0))return;const ee=y.context,re=ee.gl,ce=y.depthModeForSublayer(0,Zt.ReadOnly),me=Vn.disabled,ge=y.colorModeForRenderPass(),ye=[];for(let se=0;se<M.length;se++){const xe=M[se],ke=C.getTile(xe),Pe=ke.getBucket(T);if(!Pe)continue;const Ne=Pe.programConfigurations.get(T.id),Ze=y.useProgram("circle",Ne),nt=Pe.layoutVertexBuffer,ct=Pe.indexBuffer,Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),Je={programConfiguration:Ne,program:Ze,layoutVertexBuffer:nt,indexBuffer:ct,uniformValues:S1(y,xe,ke,T),terrainData:Qe};if(K){const _t=Pe.segments.get();for(const Nt of _t)ye.push({segments:new u.a0([Nt]),sortKey:Nt.sortKey,state:Je})}else ye.push({segments:Pe.segments,sortKey:0,state:Je})}K&&ye.sort((se,xe)=>se.sortKey-xe.sortKey);for(const se of ye){const{programConfiguration:xe,program:ke,layoutVertexBuffer:Pe,indexBuffer:Ne,uniformValues:Ze,terrainData:nt}=se.state;ke.draw(ee,re.TRIANGLES,ce,me,ge,Ln.disabled,Ze,nt,T.id,Pe,Ne,se.segments,T.paint,y.transform.zoom,xe)}})(r,h,f,m);break;case"heatmap":(function(y,C,T,M){if(T.paint.get("heatmap-opacity")===0)return;const z=y.context;if(y.style.map.terrain){for(const O of M){const F=C.getTile(O);C.hasRenderableParent(O)||(y.renderPass==="offscreen"?up(y,F,T,O):y.renderPass==="translucent"&&$s(y,T,O))}z.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(O,F,K,ee){const re=O.context,ce=re.gl,me=Vn.disabled,ge=new _r([ce.ONE,ce.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(ye,se,xe){const ke=ye.gl;ye.activeTexture.set(ke.TEXTURE1),ye.viewport.set([0,0,se.width/4,se.height/4]);let Pe=xe.heatmapFbos.get(u.aU);Pe?(ke.bindTexture(ke.TEXTURE_2D,Pe.colorAttachment.get()),ye.bindFramebuffer.set(Pe.framebuffer)):(Pe=Au(ye,se.width/4,se.height/4),xe.heatmapFbos.set(u.aU,Pe))})(re,O,K),re.clear({color:u.aM.transparent});for(let ye=0;ye<ee.length;ye++){const se=ee[ye];if(F.hasRenderableParent(se))continue;const xe=F.getTile(se),ke=xe.getBucket(K);if(!ke)continue;const Pe=ke.programConfigurations.get(K.id),Ne=O.useProgram("heatmap",Pe),{zoom:Ze}=O.transform;Ne.draw(re,ce.TRIANGLES,Zt.disabled,me,ge,Ln.disabled,zi(se.posMatrix,xe,Ze,K.paint.get("heatmap-intensity")),null,K.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,K.paint,O.transform.zoom,Pe)}re.viewport.set([0,0,O.width,O.height])}(y,C,T,M):y.renderPass==="translucent"&&function(O,F){const K=O.context,ee=K.gl;K.setColorMode(O.colorModeForRenderPass());const re=F.heatmapFbos.get(u.aU);re&&(K.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,re.colorAttachment.get()),K.activeTexture.set(ee.TEXTURE1),Lu(K,F).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw(K,ee.TRIANGLES,Zt.disabled,Vn.disabled,O.colorModeForRenderPass(),Ln.disabled,$c(O,F,0,1),null,F.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,F.paint,O.transform.zoom))}(y,T)})(r,h,f,m);break;case"line":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("line-opacity"),O=T.paint.get("line-width");if(z.constantOr(1)===0||O.constantOr(1)===0)return;const F=y.depthModeForSublayer(0,Zt.ReadOnly),K=y.colorModeForRenderPass(),ee=T.paint.get("line-dasharray"),re=T.paint.get("line-pattern"),ce=re.constantOr(1),me=T.paint.get("line-gradient"),ge=T.getCrossfadeParameters(),ye=ce?"linePattern":ee?"lineSDF":me?"lineGradient":"line",se=y.context,xe=se.gl;let ke=!0;for(const Pe of M){const Ne=C.getTile(Pe);if(ce&&!Ne.patternsLoaded())continue;const Ze=Ne.getBucket(T);if(!Ze)continue;const nt=Ze.programConfigurations.get(T.id),ct=y.context.program.get(),Qe=y.useProgram(ye,nt),Je=ke||Qe.program!==ct,_t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Nt=re.constantOr(null);if(Nt&&Ne.imageAtlas){const Ft=Ne.imageAtlas,Xn=Ft.patternPositions[Nt.to.toString()],Ht=Ft.patternPositions[Nt.from.toString()];Xn&&Ht&&nt.setConstantPatternPositions(Xn,Ht)}const et=_t?Pe:null,lt=ce?gl(y,Ne,T,ge,et):ee?C1(y,Ne,T,ee,ge,et):me?Jm(y,Ne,T,Ze.lineClipsArray.length,et):Fc(y,Ne,T,et);if(ce)se.activeTexture.set(xe.TEXTURE0),Ne.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),nt.updatePaintBuffers(ge);else if(ee&&(Je||y.lineAtlas.dirty))se.activeTexture.set(xe.TEXTURE0),y.lineAtlas.bind(se);else if(me){const Ft=Ze.gradients[T.id];let Xn=Ft.texture;if(T.gradientVersion!==Ft.version){let Ht=256;if(T.stepInterpolant){const en=C.getSource().maxzoom,Yn=Pe.canonical.z===en?Math.ceil(1<<y.transform.maxZoom-Pe.canonical.z):1;Ht=u.ac(u.aV(Ze.maxLineLength/u.X*1024*Yn),256,se.maxTextureSize)}Ft.gradient=u.aW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:Ht,image:Ft.gradient||void 0,clips:Ze.lineClipsArray}),Ft.texture?Ft.texture.update(Ft.gradient):Ft.texture=new Ie(se,Ft.gradient,xe.RGBA),Ft.version=T.gradientVersion,Xn=Ft.texture}se.activeTexture.set(xe.TEXTURE0),Xn.bind(T.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}Qe.draw(se,xe.TRIANGLES,F,y.stencilModeForClipping(Pe),K,Ln.disabled,lt,_t,T.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,T.paint,y.transform.zoom,nt,Ze.layoutVertexBuffer2),ke=!1}})(r,h,f,m);break;case"fill":(function(y,C,T,M){const z=T.paint.get("fill-color"),O=T.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const F=y.colorModeForRenderPass(),K=T.paint.get("fill-pattern"),ee=y.opaquePassEnabledForLayer()&&!K.constantOr(1)&&z.constantOr(u.aM.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ee){const re=y.depthModeForSublayer(1,y.renderPass==="opaque"?Zt.ReadWrite:Zt.ReadOnly);zu(y,C,T,M,re,F,!1)}if(y.renderPass==="translucent"&&T.paint.get("fill-antialias")){const re=y.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Zt.ReadOnly);zu(y,C,T,M,re,F,!0)}})(r,h,f,m);break;case"fill-extrusion":(function(y,C,T,M){const z=T.paint.get("fill-extrusion-opacity");if(z!==0&&y.renderPass==="translucent"){const O=new Zt(y.context.gl.LEQUAL,Zt.ReadWrite,y.depthRangeFor3D);if(z!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))qc(y,C,T,M,O,Vn.disabled,_r.disabled),qc(y,C,T,M,O,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const F=y.colorModeForRenderPass();qc(y,C,T,M,O,Vn.disabled,F)}}})(r,h,f,m);break;case"hillshade":(function(y,C,T,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const z=y.context,O=y.depthModeForSublayer(0,Zt.ReadOnly),F=y.colorModeForRenderPass(),[K,ee]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(const re of ee){const ce=C.getTile(re);ce.needsHillshadePrepare!==void 0&&ce.needsHillshadePrepare&&y.renderPass==="offscreen"?bl(y,ce,T,O,Vn.disabled,F):y.renderPass==="translucent"&&xl(y,re,ce,T,O,K[re.overscaledZ],F)}z.viewport.set([0,0,y.width,y.height])})(r,h,f,m);break;case"raster":(function(y,C,T,M){if(y.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!M.length)return;const z=y.context,O=z.gl,F=C.getSource(),K=y.useProgram("raster"),ee=y.colorModeForRenderPass(),[re,ce]=F instanceof bt?[{},M]:y.stencilConfigForOverlap(M),me=ce[ce.length-1].overscaledZ,ge=!y.options.moving;for(const ye of ce){const se=y.depthModeForSublayer(ye.overscaledZ-me,T.paint.get("raster-opacity")===1?Zt.ReadWrite:Zt.ReadOnly,O.LESS),xe=C.getTile(ye);xe.registerFadeDuration(T.paint.get("raster-fade-duration"));const ke=C.findLoadedParent(ye,0),Pe=C.findLoadedSibling(ye),Ne=fg(xe,ke||Pe||null,C,T,y.transform,y.style.map.terrain);let Ze,nt;const ct=T.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;z.activeTexture.set(O.TEXTURE0),xe.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(O.TEXTURE1),ke?(ke.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),Ze=Math.pow(2,ke.tileID.overscaledZ-xe.tileID.overscaledZ),nt=[xe.tileID.canonical.x*Ze%1,xe.tileID.canonical.y*Ze%1]):xe.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&z.extTextureFilterAnisotropic&&y.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),Je=Qe?ye:null,_t=Je?Je.posMatrix:y.transform.calculatePosMatrix(ye.toUnwrapped(),ge),Nt=k1(_t,nt||[0,0],Ze||1,Ne,T);F instanceof bt?K.draw(z,O.TRIANGLES,se,Vn.disabled,ee,Ln.disabled,Nt,Qe,T.id,F.boundsBuffer,y.quadTriangleIndexBuffer,F.boundsSegments):K.draw(z,O.TRIANGLES,se,re[ye.overscaledZ],ee,Ln.disabled,Nt,Qe,T.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,h,f,m);break;case"background":(function(y,C,T,M){const z=T.paint.get("background-color"),O=T.paint.get("background-opacity");if(O===0)return;const F=y.context,K=F.gl,ee=y.transform,re=ee.tileSize,ce=T.paint.get("background-pattern");if(y.isPatternMissing(ce))return;const me=!ce&&z.a===1&&O===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==me)return;const ge=Vn.disabled,ye=y.depthModeForSublayer(0,me==="opaque"?Zt.ReadWrite:Zt.ReadOnly),se=y.colorModeForRenderPass(),xe=y.useProgram(ce?"backgroundPattern":"background"),ke=M||ee.coveringTiles({tileSize:re,terrain:y.style.map.terrain});ce&&(F.activeTexture.set(K.TEXTURE0),y.imageManager.bind(y.context));const Pe=T.getCrossfadeParameters();for(const Ne of ke){const Ze=M?Ne.posMatrix:y.transform.calculatePosMatrix(Ne.toUnwrapped()),nt=ce?Xd(Ze,O,y,ce,{tileID:Ne,tileSize:re},Pe):Bc(Ze,O,z),ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);xe.draw(F,K.TRIANGLES,ye,ge,se,Ln.disabled,nt,ct,T.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(y,C,T){const M=y.context,z=T.implementation;if(y.renderPass==="offscreen"){const O=z.prerender;O&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),O.call(z,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Vn.disabled);const O=z.renderingMode==="3d"?new Zt(y.context.gl.LEQUAL,Zt.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Zt.ReadOnly);M.setDepthMode(O),z.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,h,f,m,y){if(!f[0]&&!f[1])return r;const C=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),O=Math.cos(C);f=[f[0]*O-f[1]*z,f[0]*z+f[1]*O]}const T=[y?f[0]:Qt(h,f[0],this.transform.zoom),y?f[1]:Qt(h,f[1],this.transform.zoom),0],M=new Float32Array(16);return u.J(M,r,T),M}saveTileTexture(r){const h=this._tileTextures[r.size[0]];h?h.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const h=this._tileTextures[r];return h&&h.length>0?h.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const h=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!h||!f}useProgram(r,h){this.cache=this.cache||{};const f=r+(h?h.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Zd(this.context,Qa[r],h,Yd[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ie(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:h}=this.context.gl;return this.width!==r||this.height!==h}}class Sl{constructor(r,h){this.points=r,this.planes=h}static fromInvProjectionMatrix(r,h,f){const m=Math.pow(2,f),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const M=1/(T=u.af([],T,r))[3]/h*m;return u.b1(T,T,[M,M,1/T[3],M])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const M=function(K,ee){var re=ee[0],ce=ee[1],me=ee[2],ge=re*re+ce*ce+me*me;return ge>0&&(ge=1/Math.sqrt(ge)),K[0]=ee[0]*ge,K[1]=ee[1]*ge,K[2]=ee[2]*ge,K}([],function(K,ee,re){var ce=ee[0],me=ee[1],ge=ee[2],ye=re[0],se=re[1],xe=re[2];return K[0]=me*xe-ge*se,K[1]=ge*ye-ce*xe,K[2]=ce*se-me*ye,K}([],ae([],y[T[0]],y[T[1]]),ae([],y[T[2]],y[T[1]]))),z=-((O=M)[0]*(F=y[T[1]])[0]+O[1]*F[1]+O[2]*F[2]);var O,F;return M.concat(z)});return new Sl(y,C)}}class Cl{constructor(r,h){this.min=r,this.max=h,this.center=function(f,m,y){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,y){return f[0]=m[0]+y[0],f[1]=m[1]+y[1],f[2]=m[2]+y[2],f}([],this.min,this.max))}quadrant(r){const h=[r%2==0,r<2],f=te(this.min),m=te(this.max);for(let y=0;y<h.length;y++)f[y]=h[y]?this.min[y]:this.center[y],m[y]=h[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Cl(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const h=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const y=r.planes[m];let C=0;for(let T=0;T<h.length;T++)u.b2(y,h[T])>=0&&C++;if(C===0)return 0;C!==h.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<r.points.length;T++){const M=r.points[T][m]-this.min[m];y=Math.min(y,M),C=Math.max(C,M)}if(C<0||y>this.max[m]-this.min[m])return 0}return 1}}class kl{constructor(r=0,h=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(h)||h<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=h,this.left=f,this.right=m}interpolate(r,h,f){return h.top!=null&&r.top!=null&&(this.top=u.y.number(r.top,h.top,f)),h.bottom!=null&&r.bottom!=null&&(this.bottom=u.y.number(r.bottom,h.bottom,f)),h.left!=null&&r.left!=null&&(this.left=u.y.number(r.left,h.left,f)),h.right!=null&&r.right!=null&&(this.right=u.y.number(r.right,h.right,f)),this}getCenter(r,h){const f=u.ac((this.left+r-this.right)/2,0,r),m=u.ac((this.top+h-this.bottom)/2,0,h);return new u.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new kl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const hp=85.051129;class El{constructor(r,h,f,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=h||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new kl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new El(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const h=-u.b3(r,-180,180)*Math.PI/180;this.angle!==h&&(this._unmodified=!1,this.angle=h,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.A(4);return u.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,y){var C=m[0],T=m[1],M=m[2],z=m[3],O=Math.sin(y),F=Math.cos(y);f[0]=C*F+M*O,f[1]=T*F+z*O,f[2]=C*-O+M*F,f[3]=T*-O+z*F}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const h=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==h&&(this._unmodified=!1,this._pitch=h,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const h=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==h&&(this._unmodified=!1,this._zoom=h,this.tileZoom=Math.max(0,Math.floor(h)),this.scale=this.zoomScale(h),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,h,f){this._unmodified=!1,this._edgeInsets.interpolate(r,h,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const h=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,h)}getVisibleUnwrappedCoordinates(r){const h=[new u.b4(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),C=this.pointCoordinate(new u.P(0,this.height)),T=Math.floor(Math.min(f.x,m.x,y.x,C.x)),M=Math.floor(Math.max(f.x,m.x,y.x,C.x)),z=1;for(let O=T-z;O<=M+z;O++)O!==0&&h.push(new u.b4(O,r))}return h}coveringTiles(r){var h,f;let m=this.coveringZoomLevel(r);const y=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=u.Z.fromLngLat(this.center),M=Math.pow(2,m),z=[M*C.x,M*C.y,0],O=[M*T.x,M*T.y,0],F=Sl.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let K=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=m);const ee=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,re=se=>({aabb:new Cl([se*M,0,0],[(se+1)*M,M,0]),zoom:0,x:0,y:0,wrap:se,fullyVisible:!1}),ce=[],me=[],ge=m,ye=r.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let se=1;se<=3;se++)ce.push(re(-se)),ce.push(re(se));for(ce.push(re(0));ce.length>0;){const se=ce.pop(),xe=se.x,ke=se.y;let Pe=se.fullyVisible;if(!Pe){const Qe=se.aabb.intersects(F);if(Qe===0)continue;Pe=Qe===2}const Ne=r.terrain?z:O,Ze=se.aabb.distanceX(Ne),nt=se.aabb.distanceY(Ne),ct=Math.max(Math.abs(Ze),Math.abs(nt));if(se.zoom===ge||ct>ee+(1<<ge-se.zoom)-2&&se.zoom>=K){const Qe=ge-se.zoom,Je=z[0]-.5-(xe<<Qe),_t=z[1]-.5-(ke<<Qe);me.push({tileID:new u.S(se.zoom===ge?ye:se.zoom,se.wrap,se.zoom,xe,ke),distanceSq:de([O[0]-.5-xe,O[1]-.5-ke]),tileDistanceToCamera:Math.sqrt(Je*Je+_t*_t)})}else for(let Qe=0;Qe<4;Qe++){const Je=(xe<<1)+Qe%2,_t=(ke<<1)+(Qe>>1),Nt=se.zoom+1;let et=se.aabb.quadrant(Qe);if(r.terrain){const lt=new u.S(Nt,se.wrap,Nt,Je,_t),Ft=r.terrain.getMinMaxElevation(lt),Xn=(h=Ft.minElevation)!==null&&h!==void 0?h:this.elevation,Ht=(f=Ft.maxElevation)!==null&&f!==void 0?f:this.elevation;et=new Cl([et.min[0],et.min[1],Xn],[et.max[0],et.max[1],Ht])}ce.push({aabb:et,zoom:Nt,x:Je,y:_t,wrap:se.wrap,fullyVisible:Pe})}}return me.sort((se,xe)=>se.distanceSq-xe.distanceSq).map(se=>se.tileID)}resize(r,h){this.width=r,this.height=h,this.pixelsToGLUnits=[2/r,-2/h],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const h=u.ac(r.lat,-85.051129,hp);return new u.P(u.O(r.lng)*this.worldSize,u.Q(h)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const h=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const C=f+h-y,T=Math.cos(this._pitch)*this.cameraToCenterDistance/C/u.b5(1,m.lat),M=this.scaleZoom(T/this.tileSize);this._elevation=y,this._center=m,this.zoom=M}setLocationAtPoint(r,h){const f=this.pointCoordinate(h),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),C=new u.Z(y.x-(f.x-m.x),y.y-(f.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,h){return h?this.coordinatePoint(this.locationCoordinate(r),h.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,h){return this.coordinateLocation(this.pointCoordinate(r,h))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,h){if(h){const K=h.pointCoordinate(r);if(K!=null)return K}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];u.af(f,f,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const y=f[3],C=m[3],T=f[1]/y,M=m[1]/C,z=f[2]/y,O=m[2]/C,F=z===O?0:(0-z)/(O-z);return new u.Z(u.y.number(f[0]/y,m[0]/C,F)/this.worldSize,u.y.number(T,M,F)/this.worldSize)}coordinatePoint(r,h=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,h,1];return u.af(m,m,f),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new Se().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Se([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,hp])}calculateTileMatrix(r){const h=r.canonical,f=this.worldSize/this.zoomScale(h.z),m=h.x+Math.pow(2,h.z)*r.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[m*f,h.y*f,0]),u.K(y,y,[f/u.X,f/u.X,1]),y}calculatePosMatrix(r,h=!1){const f=r.key,m=h?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const y=this.calculateTileMatrix(r);return u.L(y,h?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[f]=new Float32Array(y),m[f]}calculateFogMatrix(r){const h=r.key,f=this._fogMatrixCache;if(f[h])return f[h];const m=this.calculateTileMatrix(r);return u.L(m,this.fogMatrix,m),f[h]=new Float32Array(m),f[h]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,h){h=u.ac(+h,this.minZoom,this.maxZoom);const f={center:new u.N(r.lng,r.lat),zoom:h};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const se=179.9999999999;m=[-se,se]}const y=this.tileSize*this.zoomScale(f.zoom);let C=0,T=y,M=0,z=y,O=0,F=0;const{x:K,y:ee}=this.size;if(this.latRange){const se=this.latRange;C=u.Q(se[1])*y,T=u.Q(se[0])*y,T-C<ee&&(O=ee/(T-C))}m&&(M=u.b3(u.O(m[0])*y,0,y),z=u.b3(u.O(m[1])*y,0,y),z<M&&(z+=y),z-M<K&&(F=K/(z-M)));const{x:re,y:ce}=this.project.call({worldSize:y},r);let me,ge;const ye=Math.max(F||0,O||0);if(ye){const se=new u.P(F?(z+M)/2:re,O?(T+C)/2:ce);return f.center=this.unproject.call({worldSize:y},se).wrap(),f.zoom+=this.scaleZoom(ye),f}if(this.latRange){const se=ee/2;ce-se<C&&(ge=C+se),ce+se>T&&(ge=T-se)}if(m){const se=(M+z)/2;let xe=re;this._renderWorldCopies&&(xe=u.b3(re,se-y/2,se+y/2));const ke=K/2;xe-ke<M&&(me=M+ke),xe+ke>z&&(me=z-ke)}if(me!==void 0||ge!==void 0){const se=new u.P(me??re,ge??ce);f.center=this.unproject.call({worldSize:y},se).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:h,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=h,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,h=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.K(m,m,[this.width/2,-this.height/2,1]),u.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.K(m,m,[1,-1,1]),u.J(m,m,[-1,-1,0]),u.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),T=y-C*this._pixelPerMeter/Math.cos(this._pitch),M=C<0?T:y,z=Math.PI/2+this._pitch,O=this._fov*(.5+r.y/this.height),F=Math.sin(O)*M/Math.sin(u.ac(Math.PI-z-O,.01,Math.PI-.01)),K=this.getHorizon(),ee=2*Math.atan(K/this.cameraToCenterDistance)*(.5+r.y/(2*K)),re=Math.sin(ee)*M/Math.sin(u.ac(Math.PI-z-ee,.01,Math.PI-.01)),ce=Math.min(F,re);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ce+M),this.nearZ=this.height/50,m=new Float64Array(16),u.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,this.projectionMatrix=u.ae(m),u.K(m,m,[1,-1,1]),u.J(m,m,[0,0,-this.cameraToCenterDistance]),u.b7(m,m,this._pitch),u.ad(m,m,this.angle),u.J(m,m,[-h,-f,0]),this.mercatorMatrix=u.K([],m,[this.worldSize,this.worldSize,this.worldSize]),u.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,m),u.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=u.as([],m),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-h,-f,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,m);const me=this.width%2/2,ge=this.height%2/2,ye=Math.cos(this.angle),se=Math.sin(this.angle),xe=h-Math.round(h)+ye*me+se*ge,ke=f-Math.round(f)+ye*ge+se*me,Pe=new Float64Array(m);if(u.J(Pe,Pe,[xe>.5?xe-1:xe,ke>.5?ke-1:ke,0]),this.alignedModelViewProjectionMatrix=Pe,m=u.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),h=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(h,h,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const h=this.getCameraPoint();if(r.length===1)return[r[0],h];{let f=h.x,m=h.y,y=h.x,C=h.y;for(const T of r)f=Math.min(f,T.x),m=Math.min(m,T.y),y=Math.max(y,T.x),C=Math.max(C,T.y);return[new u.P(f,m),new u.P(y,m),new u.P(y,C),new u.P(f,C),new u.P(f,m)]}}lngLatToCameraDepth(r,h){const f=this.locationCoordinate(r),m=[f.x*this.worldSize,f.y*this.worldSize,h,1];return u.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Ru(v,r){let h,f=!1,m=null,y=null;const C=()=>{m=null,f&&(v.apply(y,h),m=setTimeout(C,r),f=!1)};return(...T)=>(f=!0,y=this,h=T,m||C(),m)}class Xc{constructor(r){this._getCurrentHash=()=>{const h=window.location.hash.replace("#","");if(this._hashName){let f;return h.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return h.split("/")},this._onHashChange=()=>{const h=this._getCurrentHash();if(h.length>=3&&!h.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(h[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+h[2],+h[1]],zoom:+h[0],bearing:f,pitch:+(h[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const h=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,h)},this._removeHash=()=>{const h=this._getCurrentHash();if(h.length===0)return;const f=h.join("/");let m=f;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${f}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let C=window.location.href.replace(/(#.+)?$/,y);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=Ru(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const h=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),C=Math.round(h.lng*y)/y,T=Math.round(h.lat*y)/y,M=this._map.getBearing(),z=this._map.getPitch();let O="";if(O+=r?`/${C}/${T}/${f}`:`${f}/${T}/${C}`,(M||z)&&(O+="/"+Math.round(10*M)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){const F=this._hashName;let K=!1;const ee=window.location.hash.slice(1).split("&").map(re=>{const ce=re.split("=")[0];return ce===F?(K=!0,`${ce}=${O}`):re}).filter(re=>re);return K||ee.push(`${F}=${O}`),`#${ee.join("&")}`}return`#${O}`}}const Yc={linearity:.3,easing:u.b8(0,0,.3,1)},dp=u.e({deceleration:2500,maxSpeed:1400},Yc),F1=u.e({deceleration:20,maxSpeed:1400},Yc),_g=u.e({deceleration:1e3,maxSpeed:360},Yc),Jc=u.e({deceleration:1e3,maxSpeed:90},Yc);class pp{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:k.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,h=k.now();for(;r.length>0&&h-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const h={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)h.zoom+=y.zoomDelta||0,h.bearing+=y.bearingDelta||0,h.pitch+=y.pitchDelta||0,y.panDelta&&h.pan._add(y.panDelta),y.around&&(h.around=y.around),y.pinchAround&&(h.pinchAround=y.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(h.pan.mag()){const y=$u(h.pan.mag(),f,u.e({},dp,r||{}));m.offset=h.pan.mult(y.amount/h.pan.mag()),m.center=this._map.transform.center,Du(m,y)}if(h.zoom){const y=$u(h.zoom,f,F1);m.zoom=this._map.transform.zoom+y.amount,Du(m,y)}if(h.bearing){const y=$u(h.bearing,f,_g);m.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),Du(m,y)}if(h.pitch){const y=$u(h.pitch,f,Jc);m.pitch=this._map.transform.pitch+y.amount,Du(m,y)}if(m.zoom||m.bearing){const y=h.pinchAround===void 0?h.around:h.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function Du(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function $u(v,r,h){const{maxSpeed:f,linearity:m,deceleration:y}=h,C=u.ac(v*m/(r/1e3),-f,f),T=Math.abs(C)/(y*m);return{easing:h.easing,duration:1e3*T,amount:C*(T/2)}}class si extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,h,f,m={}){const y=P.mousePos(h.getCanvas(),f),C=h.unproject(y);super(r,u.e({point:y,lngLat:C,originalEvent:f},m)),this._defaultPrevented=!1,this.target=h}}class Os extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,h,f){const m=r==="touchend"?f.changedTouches:f.touches,y=P.touchPos(h.getCanvasContainer(),m),C=y.map(M=>h.unproject(M)),T=y.reduce((M,z,O,F)=>M.add(z.div(F.length)),new u.P(0,0));super(r,{points:y,point:T,lngLats:C,lngLat:h.unproject(T),originalEvent:f}),this._defaultPrevented=!1}}class xg extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,h,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class bg{constructor(r,h){this._map=r,this._clickTolerance=h.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new xg(r.type,this._map,r))}mousedown(r,h){return this._mousedownPos=h,this._firePreventable(new si(r.type,this._map,r))}mouseup(r){this._map.fire(new si(r.type,this._map,r))}click(r,h){this._mousedownPos&&this._mousedownPos.dist(h)>=this._clickTolerance||this._map.fire(new si(r.type,this._map,r))}dblclick(r){return this._firePreventable(new si(r.type,this._map,r))}mouseover(r){this._map.fire(new si(r.type,this._map,r))}mouseout(r){this._map.fire(new si(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Os(r.type,this._map,r))}touchmove(r){this._map.fire(new Os(r.type,this._map,r))}touchend(r){this._map.fire(new Os(r.type,this._map,r))}touchcancel(r){this._map.fire(new Os(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class xr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new si(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new si(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ro{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Ji{constructor(r,h){this._map=r,this._tr=new Ro(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=h.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,h){this.isEnabled()&&r.shiftKey&&r.button===0&&(P.disableDrag(),this._startPos=this._lastPos=h,this._active=!0)}mousemoveWindow(r,h){if(!this._active)return;const f=h;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=P.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(m.x,f.x),C=Math.max(m.x,f.x),T=Math.min(m.y,f.y),M=Math.max(m.y,f.y);P.setTransform(this._box,`translate(${y}px,${T}px)`),this._box.style.width=C-y+"px",this._box.style.height=M-T+"px"}mouseupWindow(r,h){if(!this._active||r.button!==0)return;const f=this._startPos,m=h;if(this.reset(),P.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,h){return this._map.fire(new u.k(r,{originalEvent:h}))}}function Ou(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const h={};for(let f=0;f<v.length;f++)h[v[f].identifier]=r[f];return h}class fp{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,h,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const y=new u.P(0,0);for(const C of m)y._add(C);return y.div(m.length)}(h),this.touches=Ou(f,h)))}touchmove(r,h,f){if(this.aborted||!this.centroid)return;const m=Ou(f,h);for(const y in this.touches){const C=m[y];(!C||C.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,h,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Qc{constructor(r){this.singleTap=new fp(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,h,f){this.singleTap.touchstart(r,h,f)}touchmove(r,h,f){this.singleTap.touchmove(r,h,f)}touchend(r,h,f){const m=this.singleTap.touchend(r,h,f);if(m){const y=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(y&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Tl{constructor(r){this._tr=new Ro(r),this._zoomIn=new Qc({numTouches:1,numTaps:2}),this._zoomOut=new Qc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,h,f){this._zoomIn.touchstart(r,h,f),this._zoomOut.touchstart(r,h,f)}touchmove(r,h,f){this._zoomIn.touchmove(r,h,f),this._zoomOut.touchmove(r,h,f)}touchend(r,h,f){const m=this._zoomIn.touchend(r,h,f),y=this._zoomOut.touchend(r,h,f),C=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class za{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const h=this._moveFunction(...r);if(h.bearingDelta||h.pitchDelta||h.around||h.panDelta)return this._active=!0,h}dragStart(r,h){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=h.length?h[0]:h,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,h){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=h.length?h[0]:h;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&P.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const mp={0:1,2:2};class eh{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const h=P.mouseButton(r);this._eventButton=h}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(h,f){const m=mp[f];return h.buttons===void 0||(h.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return P.mouseButton(r)===this._eventButton}}class gp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const th=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},yp=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:h=.8})=>{const f=new eh({checkCorrectEvent:m=>P.mouseButton(m)===0&&m.ctrlKey||P.mouseButton(m)===2});return new za({clickTolerance:r,move:(m,y)=>({bearingDelta:(y.x-m.x)*h}),moveStateManager:f,enable:v,assignEvents:th})},vp=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:h=-.5})=>{const f=new eh({checkCorrectEvent:m=>P.mouseButton(m)===0&&m.ctrlKey||P.mouseButton(m)===2});return new za({clickTolerance:r,move:(m,y)=>({pitchDelta:(y.y-m.y)*h}),moveStateManager:f,enable:v,assignEvents:th})};class Fs{constructor(r,h){this._clickTolerance=r.clickTolerance||1,this._map=h,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,h,f){return this._calculateTransform(r,h,f)}touchmove(r,h,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,h,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,h,f){this._calculateTransform(r,h,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,h,f){f.length>0&&(this._active=!0);const m=Ou(f,h),y=new u.P(0,0),C=new u.P(0,0);let T=0;for(const z in m){const O=m[z],F=this._touches[z];F&&(y._add(O),C._add(O.sub(F)),T++,m[z]=O)}if(this._touches=m,this._shouldBePrevented(T)||!C.mag())return;const M=C.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nh{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,h,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([h[0],h[1]]))}touchmove(r,h,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,y]=this._firstTwoTouches,C=Fu(f,h,m),T=Fu(f,h,y);if(!C||!T)return;const M=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],M,r)}touchend(r,h,f){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,C=Fu(f,h,m),T=Fu(f,h,y);C&&T||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Fu(v,r,h){for(let f=0;f<v.length;f++)if(v[f].identifier===h)return r[f]}function _p(v,r){return Math.log(v/r)/Math.LN2}class xp extends nh{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,h){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(_p(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:_p(this._distance,f),pinchAround:h}}}function bp(v,r){return 180*v.angleWith(r)/Math.PI}class wp extends nh{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,h,f){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:bp(this._vector,m),pinchAround:h}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const h=25/(Math.PI*this._minDiameter)*360,f=bp(r,this._startVector);return Math.abs(f)<h}}function rh(v){return Math.abs(v.y)>Math.abs(v.x)}class Il extends nh{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,h,f){super.touchstart(r,h,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,rh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,h,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,h,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,y=h.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=r.y>0==h.y>0;return rh(r)&&rh(h)&&C}}const wg={panStep:100,bearingStep:15,pitchStep:10};class yo{constructor(r){this._tr=new Ro(r);const h=wg;this._panStep=h.panStep,this._bearingStep=h.bearingStep,this._pitchStep=h.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let h=0,f=0,m=0,y=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:h=1;break;case 189:case 109:case 173:h=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:aa,zoom:h?Math.round(M.zoom)+h*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-y*this._panStep,-C*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function aa(v){return v*(2-v)}const Sp=4.000244140625;class Do{constructor(r,h){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Ro(r),this._triggerRenderFrame=h,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let h=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=k.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,h!==0&&h%Sp==0?this._type="wheel":h!==0&&Math.abs(h)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=h,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*h)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,h+=this._lastValue)),r.shiftKey&&h&&(h/=4),this._type&&(this._lastWheelEvent=r,this._delta-=h,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const h=P.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=h.y>f.transform.height/2-f.transform.getHorizon()?u.N.convert(this._aroundCenter?f.center:f.unproject(h)):u.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Sp?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&z!==0&&(z=1/z);const O=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(O*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const h=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let y,C=!1;const T=k.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&m&&T){const M=Math.min(T/200,1),z=m(M);y=u.y.number(f,h,z),M<1?this._frameId||(this._frameId=!0):C=!0}else y=h,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let h=u.b9;if(this._prevEase){const f=this._prevEase,m=(k.now()-f.start)/f.duration,y=f.easing(m+.01)-f.easing(m),C=.27/Math.sqrt(y*y+1e-4)*.01,T=Math.sqrt(.0729-C*C);h=u.b8(C,T,.25,1)}return this._prevEase={start:k.now(),duration:r,easing:h},h}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Bs{constructor(r,h){this._clickZoom=r,this._tapZoom=h}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class B1{constructor(r){this._tr=new Ro(r),this.reset()}reset(){this._active=!1}dblclick(r,h){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(h)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class N1{constructor(){this._tap=new Qc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,h,f){if(!this._swipePoint)if(this._tapTime){const m=h[0],y=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;y&&C?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,h,f)}touchmove(r,h,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=h[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,h,f)}touchend(r,h,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,h,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Sg{constructor(r,h,f){this._el=r,this._mousePan=h,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Cg{constructor(r,h,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=h,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Cp{constructor(r,h,f,m){this._el=r,this._touchZoom=h,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Pl{constructor(r,h){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=h,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=P.create("div","maplibregl-cooperative-gesture-screen",r);let h=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(h=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=h,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=f,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(P.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,h){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:h})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const vo=v=>v.zoom||v.drag||v.pitch||v.rotate;class mt extends u.k{}function ih(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class kp{constructor(r,h){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,T={needsRenderFrame:!1},M={},z={},O=m.touches,F=O?this._getMapTouches(O):void 0,K=F?P.touchPos(this._map.getCanvas(),F):P.mousePos(this._map.getCanvas(),m);for(const{handlerName:ce,handler:me,allowed:ge}of this._handlers){if(!me.isEnabled())continue;let ye;this._blockedByActive(z,ge,ce)?me.reset():me[y||m.type]&&(ye=me[y||m.type](m,K,F),this.mergeHandlerResult(T,M,ye,ce,C),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||me.isActive())&&(z[ce]=me)}const ee={};for(const ce in this._previousActiveHandlers)z[ce]||(ee[ce]=C);this._previousActiveHandlers=z,(Object.keys(ee).length||ih(T))&&(this._changes.push([T,M,ee]),this._triggerRenderFrame()),(Object.keys(z).length||ih(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:re}=T;re&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],re(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new pp(r),this._bearingSnap=h.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(h);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,C]of this._listeners)P.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,h,f]of this._listeners)P.removeEventListener(r,h,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const h=this._map,f=h.getCanvasContainer();this._add("mapEvent",new bg(h,r));const m=h.boxZoom=new Ji(h,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const y=h.cooperativeGestures=new Pl(h,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const C=new Tl(h),T=new B1(h);h.doubleClickZoom=new Bs(T,C),this._add("tapZoom",C),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&h.doubleClickZoom.enable();const M=new N1;this._add("tapDragZoom",M);const z=h.touchPitch=new Il(h);this._add("touchPitch",z),r.interactive&&r.touchPitch&&h.touchPitch.enable(r.touchPitch);const O=yp(r),F=vp(r);h.dragRotate=new Cg(r,O,F),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",F,["mouseRotate"]),r.interactive&&r.dragRotate&&h.dragRotate.enable();const K=(({enable:ye,clickTolerance:se})=>{const xe=new eh({checkCorrectEvent:ke=>P.mouseButton(ke)===0&&!ke.ctrlKey});return new za({clickTolerance:se,move:(ke,Pe)=>({around:Pe,panDelta:Pe.sub(ke)}),activateOnStart:!0,moveStateManager:xe,enable:ye,assignEvents:th})})(r),ee=new Fs(r,h);h.dragPan=new Sg(f,K,ee),this._add("mousePan",K),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&h.dragPan.enable(r.dragPan);const re=new wp,ce=new xp;h.touchZoomRotate=new Cp(f,ce,re,M),this._add("touchRotate",re,["touchPan","touchZoom"]),this._add("touchZoom",ce,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&h.touchZoomRotate.enable(r.touchZoomRotate);const me=h.scrollZoom=new Do(h,()=>this._triggerRenderFrame());this._add("scrollZoom",me,["mousePan"]),r.interactive&&r.scrollZoom&&h.scrollZoom.enable(r.scrollZoom);const ge=h.keyboard=new yo(h);this._add("keyboard",ge),r.interactive&&r.keyboard&&h.keyboard.enable(),this._add("blockableMapEvent",new xr(h))}_add(r,h,f){this._handlers.push({handlerName:r,handler:h,allowed:f}),this._handlersById[r]=h}stop(r){if(!this._updatingCamera){for(const{handler:h}of this._handlers)h.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vo(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,h,f){for(const m in r)if(m!==f&&(!h||h.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const h=[];for(const f of r)this._el.contains(f.target)&&h.push(f);return h}mergeHandlerResult(r,h,f,m,y){if(!f)return;u.e(r,f);const C={handlerName:m,originalEvent:f.originalEvent||y};f.zoomDelta!==void 0&&(h.zoom=C),f.panDelta!==void 0&&(h.drag=C),f.pitchDelta!==void 0&&(h.pitch=C),f.bearingDelta!==void 0&&(h.rotate=C)}_applyChanges(){const r={},h={},f={};for(const[m,y,C]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),u.e(h,y),u.e(f,C);this._updateMapTransform(r,h,f),this._changes=[]}_updateMapTransform(r,h,f){const m=this._map,y=m._getTransformForUpdate(),C=m.terrain;if(!(ih(r)||C&&this._terrainMovement))return this._fireEvents(h,f,!0);let{panDelta:T,zoomDelta:M,bearingDelta:z,pitchDelta:O,around:F,pinchAround:K}=r;K!==void 0&&(F=K),m._stop(!0),F=F||m.transform.centerPoint;const ee=y.pointLocation(T?F.sub(T):F);z&&(y.bearing+=z),O&&(y.pitch+=O),M&&(y.zoom+=M),C?this._terrainMovement||!h.drag&&!h.zoom?h.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(T)):y.setLocationAtPoint(ee,F):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ee,F)):y.setLocationAtPoint(ee,F),m._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(h,f,!0)}_fireEvents(r,h,f){const m=vo(this._eventsInProgress),y=vo(r),C={};for(const F in r){const{originalEvent:K}=r[F];this._eventsInProgress[F]||(C[`${F}start`]=K),this._eventsInProgress[F]=r[F]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const F in C)this._fireEvent(F,C[F]);y&&this._fireEvent("move",y.originalEvent);for(const F in r){const{originalEvent:K}=r[F];this._fireEvent(F,K)}const T={};let M;for(const F in this._eventsInProgress){const{handlerName:K,originalEvent:ee}=this._eventsInProgress[F];this._handlersById[K].isActive()||(delete this._eventsInProgress[F],M=h[K]||ee,T[`${F}end`]=M)}for(const F in T)this._fireEvent(F,T[F]);const z=vo(this._eventsInProgress),O=(m||y)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const F=this._map._getTransformForUpdate();F.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(F)}if(f&&O){this._updatingCamera=!0;const F=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),K=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!F||!F.essential&&k.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),K(this._map.getBearing())&&this._map.resetNorth()):(K(F.bearing||this._map.getBearing())&&(F.bearing=0),F.freezeElevation=!0,this._map.easeTo(F,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,h){this._map.fire(new u.k(r,h?{originalEvent:h}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new mt("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class kg extends u.E{constructor(r,h){super(),this._renderFrameCallback=()=>{const f=Math.min((k.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=h.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,h){return this.jumpTo({center:r},h)}panBy(r,h,f){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},h),f)}panTo(r,h,f){return this.easeTo(u.e({center:r},h),f)}getZoom(){return this.transform.zoom}setZoom(r,h){return this.jumpTo({zoom:r},h),this}zoomTo(r,h,f){return this.easeTo(u.e({zoom:r},h),f)}zoomIn(r,h){return this.zoomTo(this.getZoom()+1,r,h),this}zoomOut(r,h){return this.zoomTo(this.getZoom()-1,r,h),this}getBearing(){return this.transform.bearing}setBearing(r,h){return this.jumpTo({bearing:r},h),this}getPadding(){return this.transform.padding}setPadding(r,h){return this.jumpTo({padding:r},h),this}rotateTo(r,h,f){return this.easeTo(u.e({bearing:r},h),f)}resetNorth(r,h){return this.rotateTo(0,u.e({duration:1e3},r),h),this}resetNorthPitch(r,h){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),h),this}snapToNorth(r,h){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,h):this}getPitch(){return this.transform.pitch}setPitch(r,h){return this.jumpTo({pitch:r},h),this}cameraForBounds(r,h){r=Se.convert(r).adjustAntiMeridian();const f=h&&h.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,h)}_cameraForBoxAndBearing(r,h,f,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Qe=m.padding;m.padding={top:Qe,bottom:Qe,right:Qe,left:Qe}}m.padding=u.e(y,m.padding);const C=this.transform,T=C.padding,M=new Se(r,h),z=C.project(M.getNorthWest()),O=C.project(M.getNorthEast()),F=C.project(M.getSouthEast()),K=C.project(M.getSouthWest()),ee=u.ba(-f),re=z.rotate(ee),ce=O.rotate(ee),me=F.rotate(ee),ge=K.rotate(ee),ye=new u.P(Math.max(re.x,ce.x,ge.x,me.x),Math.max(re.y,ce.y,ge.y,me.y)),se=new u.P(Math.min(re.x,ce.x,ge.x,me.x),Math.min(re.y,ce.y,ge.y,me.y)),xe=ye.sub(se),ke=(C.width-(T.left+T.right+m.padding.left+m.padding.right))/xe.x,Pe=(C.height-(T.top+T.bottom+m.padding.top+m.padding.bottom))/xe.y;if(Pe<0||ke<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ne=Math.min(C.scaleZoom(C.scale*Math.min(ke,Pe)),m.maxZoom),Ze=u.P.convert(m.offset),nt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.ba(f)),ct=Ze.add(nt).mult(C.scale/C.zoomScale(Ne));return{center:C.unproject(z.add(F).div(2).sub(ct)),zoom:Ne,bearing:f}}fitBounds(r,h,f){return this._fitInternal(this.cameraForBounds(r,h),h,f)}fitScreenCoordinates(r,h,f,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(h)),f,m),m,y)}_fitInternal(r,h,f){return r?(delete(h=u.e(r,h)).padding,h.linear?this.easeTo(h,f):this.flyTo(h,f)):this}jumpTo(r,h){this.stop();const f=this._getTransformForUpdate();let m=!1,y=!1,C=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.N.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(y=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(C=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new u.k("movestart",h)).fire(new u.k("move",h)),m&&this.fire(new u.k("zoomstart",h)).fire(new u.k("zoom",h)).fire(new u.k("zoomend",h)),y&&this.fire(new u.k("rotatestart",h)).fire(new u.k("rotate",h)).fire(new u.k("rotateend",h)),C&&this.fire(new u.k("pitchstart",h)).fire(new u.k("pitch",h)).fire(new u.k("pitchend",h)),this.fire(new u.k("moveend",h))}calculateCameraOptionsFromTo(r,h,f,m=0){const y=u.Z.fromLngLat(r,h),C=u.Z.fromLngLat(f,m),T=C.x-y.x,M=C.y-y.y,z=C.z-y.z,O=Math.hypot(T,M,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");const F=Math.hypot(T,M),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),ee=180*Math.atan2(T,-M)/Math.PI;let re=180*Math.acos(F/O)/Math.PI;return re=z<0?90-re:90+re,{center:C.toLngLat(),zoom:K,pitch:re,bearing:ee}}easeTo(r,h){var f;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&k.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,C):C,O="pitch"in r?+r.pitch:T,F="padding"in r?r.padding:m.padding,K=u.P.convert(r.offset);let ee=m.centerPoint.add(K);const re=m.pointLocation(ee),{center:ce,zoom:me}=m.getConstrained(u.N.convert(r.center||re),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ce,m);const ge=m.project(re),ye=m.project(ce).sub(ge),se=m.zoomScale(me-y);let xe,ke;r.around&&(xe=u.N.convert(r.around),ke=m.locationPoint(xe));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||me!==y,this._rotating=this._rotating||C!==z,this._pitching=this._pitching||O!==T,this._padding=!m.isPaddingEqual(F),this._easeId=r.easeId,this._prepareEase(h,r.noMoveStart,Pe),this.terrain&&this._prepareElevation(ce),this._ease(Ne=>{if(this._zooming&&(m.zoom=u.y.number(y,me,Ne)),this._rotating&&(m.bearing=u.y.number(C,z,Ne)),this._pitching&&(m.pitch=u.y.number(T,O,Ne)),this._padding&&(m.interpolatePadding(M,F,Ne),ee=m.centerPoint.add(K)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ne),xe)m.setLocationAtPoint(xe,ke);else{const Ze=m.zoomScale(m.zoom-y),nt=me>y?Math.min(2,se):Math.max(.5,se),ct=Math.pow(nt,1-Ne),Qe=m.unproject(ge.add(ye.mult(Ne*ct)).mult(Ze));m.setLocationAtPoint(m.renderWorldCopies?Qe.wrap():Qe,ee)}this._applyUpdatedTransform(m),this._fireMoveEvents(h)},Ne=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(h,Ne)},r),this}_prepareEase(r,h,f={}){this._moving=!0,h||f.moving||this.fire(new u.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const h=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&h!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(h-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=h}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const h=r.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(h.lngLat,r.zoom);if(h.altitude<f){const m=this.calculateCameraOptionsFromTo(h.lngLat,f,r.center,r.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(r){const h=[];if(this.terrain&&h.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&h.push(m=>this.transformCameraUpdate(m)),!h.length)return;const f=r.clone();for(const m of h){const y=f.clone(),{center:C,zoom:T,pitch:M,bearing:z,elevation:O}=m(y);C&&(y.center=C),T!==void 0&&(y.zoom=T),M!==void 0&&(y.pitch=M),z!==void 0&&(y.bearing=z),O!==void 0&&(y.elevation=O),f.apply(y)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,h){if(this._easeId&&h&&this._easeId===h)return;delete this._easeId;const f=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.k("zoomend",r)),m&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,h){var f;if(!r.essential&&k.prefersReducedMotion){const lt=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(lt,h)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,C):C,O="pitch"in r?+r.pitch:T,F="padding"in r?r.padding:m.padding,K=u.P.convert(r.offset);let ee=m.centerPoint.add(K);const re=m.pointLocation(ee),{center:ce,zoom:me}=m.getConstrained(u.N.convert(r.center||re),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ce,m);const ge=m.zoomScale(me-y),ye=m.project(re),se=m.project(ce).sub(ye);let xe=r.curve;const ke=Math.max(m.width,m.height),Pe=ke/ge,Ne=se.mag();if("minZoom"in r){const lt=u.ac(Math.min(r.minZoom,y,me),m.minZoom,m.maxZoom),Ft=ke/m.zoomScale(lt-y);xe=Math.sqrt(Ft/Ne*2)}const Ze=xe*xe;function nt(lt){const Ft=(Pe*Pe-ke*ke+(lt?-1:1)*Ze*Ze*Ne*Ne)/(2*(lt?Pe:ke)*Ze*Ne);return Math.log(Math.sqrt(Ft*Ft+1)-Ft)}function ct(lt){return(Math.exp(lt)-Math.exp(-lt))/2}function Qe(lt){return(Math.exp(lt)+Math.exp(-lt))/2}const Je=nt(!1);let _t=function(lt){return Qe(Je)/Qe(Je+xe*lt)},Nt=function(lt){return ke*((Qe(Je)*(ct(Ft=Je+xe*lt)/Qe(Ft))-ct(Je))/Ze)/Ne;var Ft},et=(nt(!0)-Je)/xe;if(Math.abs(Ne)<1e-6||!isFinite(et)){if(Math.abs(ke-Pe)<1e-6)return this.easeTo(r,h);const lt=Pe<ke?-1:1;et=Math.abs(Math.log(Pe/ke))/xe,Nt=()=>0,_t=Ft=>Math.exp(lt*xe*Ft)}return r.duration="duration"in r?+r.duration:1e3*et/("screenSpeed"in r?+r.screenSpeed/xe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=C!==z,this._pitching=O!==T,this._padding=!m.isPaddingEqual(F),this._prepareEase(h,!1),this.terrain&&this._prepareElevation(ce),this._ease(lt=>{const Ft=lt*et,Xn=1/_t(Ft);m.zoom=lt===1?me:y+m.scaleZoom(Xn),this._rotating&&(m.bearing=u.y.number(C,z,lt)),this._pitching&&(m.pitch=u.y.number(T,O,lt)),this._padding&&(m.interpolatePadding(M,F,lt),ee=m.centerPoint.add(K)),this.terrain&&!r.freezeElevation&&this._updateElevation(lt);const Ht=lt===1?ce:m.unproject(ye.add(se.mult(Nt(Ft))).mult(Xn));m.setLocationAtPoint(m.renderWorldCopies?Ht.wrap():Ht,ee),this._applyUpdatedTransform(m),this._fireMoveEvents(h)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(h)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,h){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,h)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,h,f){f.animate===!1||f.duration===0?(r(1),h()):(this._easeStart=k.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=h,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,h){r=u.b3(r,-180,180);const f=Math.abs(r-h);return Math.abs(r-360-h)<f&&(r-=360),Math.abs(r+360-h)<f&&(r+=360),r}_normalizeCenter(r,h){if(!h.renderWorldCopies||h.lngRange)return;const f=r.lng-h.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const Ml={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Al{constructor(r=Ml){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=h=>{!h||h.sourceDataType!=="metadata"&&h.sourceDataType!=="visibility"&&h.dataType!=="style"&&h.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,h){const f=this._map._getUIString(`AttributionControl.${h}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const h=this._map.style.sourceCaches;for(const m in h){const y=h[m];if(y.used||y.usedForTerrain){const C=y.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,y)=>m.length-y.length),r=r.filter((m,y)=>{for(let C=y+1;C<r.length;C++)if(r[C].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Ep{constructor(r={}){this._updateCompact=()=>{const h=this._container.children;if(h.length){const f=h[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl");const h=P.create("a","maplibregl-ctrl-logo");return h.target="_blank",h.rel="noopener nofollow",h.href="https://maplibre.org/",h.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),h.setAttribute("rel","noopener nofollow"),this._container.appendChild(h),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class rn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const h=++this._id;return this._queue.push({callback:r,id:h,cancelled:!1}),h}remove(r){const h=this._currentlyRunning,f=h?this._queue.concat(h):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const h=this._currentlyRunning=this._queue;this._queue=[];for(const f of h)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Tp=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class j1 extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,h){this.sourceCache.update(r,h),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:h}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aP(m.posMatrix,0,u.X,0,u.X,0,1),this._tiles[m.key]=new Lr(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const h in this._tiles){const f=this._tiles[h];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const h={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),h[f]=y}else if(m.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const C=m.canonical.z-r.canonical.z,T=m.canonical.x-(m.canonical.x>>C<<C),M=m.canonical.y-(m.canonical.y>>C<<C),z=u.X>>C;u.aP(y.posMatrix,0,z,0,z,0,1),u.J(y.posMatrix,y.posMatrix,[-T*z,-M*z,0]),h[f]=y}else if(r.canonical.isChildOf(m.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const C=r.canonical.z-m.canonical.z,T=r.canonical.x-(r.canonical.x>>C<<C),M=r.canonical.y-(r.canonical.y>>C<<C),z=u.X>>C;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[T*z,M*z,0]),u.K(y.posMatrix,y.posMatrix,[1/2**C,1/2**C,0]),h[f]=y}}return h}getSourceTile(r,h){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&h)for(;m>=f.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(m--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(h=>h.timeAdded>=r)}}class Ip{constructor(r,h,f){this.painter=r,this.sourceCache=new j1(h),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,h,f,m=u.X){var y;if(!(h>=0&&h<m&&f>=0&&f<m))return 0;const C=this.getTerrainData(r),T=(y=C.tile)===null||y===void 0?void 0:y.dem;if(!T)return 0;const M=function(re,ce,me){var ge=ce[0],ye=ce[1];return re[0]=me[0]*ge+me[4]*ye+me[12],re[1]=me[1]*ge+me[5]*ye+me[13],re}([],[h/m*u.X,f/m*u.X],C.u_terrain_matrix),z=[M[0]*T.dim,M[1]*T.dim],O=Math.floor(z[0]),F=Math.floor(z[1]),K=z[0]-O,ee=z[1]-F;return T.get(O,F)*(1-K)*(1-ee)+T.get(O+1,F)*K*(1-ee)+T.get(O,F+1)*(1-K)*ee+T.get(O+1,F+1)*K*ee}getElevationForLngLatZoom(r,h){if(!u.bb(h,r.wrap()))return 0;const{tileID:f,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,h);return this.getElevation(f,m%u.X,y%u.X,u.X)}getElevation(r,h,f,m=u.X){return this.getDEMElevation(r,h,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ie(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ie(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const h=this.sourceCache.getSourceTile(r,!0);if(h&&h.dem&&(!h.demTexture||h.needsTerrainPrepare)){const m=this.painter.context;h.demTexture=this.painter.getTileTexture(h.dem.stride),h.demTexture?h.demTexture.update(h.dem.getPixels(),{premultiply:!1}):h.demTexture=new Ie(m,h.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),h.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),h.needsTerrainPrepare=!1}const f=h&&h+h.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-h.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?y=r.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>y<<y),T=r.canonical.y-(r.canonical.y>>y<<y),M=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(M,M,[C*u.X,T*u.X,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:h&&h.dem&&h.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:h&&h.dem&&h.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(h&&h.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:h}}getFramebuffer(r){const h=this.painter,f=h.width/devicePixelRatio,m=h.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ie(h.context,{width:f,height:m,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ie(h.context,{width:f,height:m,data:null},h.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(h.context.gl.NEAREST,h.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=h.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(h.context.createRenderbuffer(h.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const h=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,C=0;y<this._coordsTextureSize;y++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)h[C+0]=255&T,h[C+1]=255&y,h[C+2]=T>>8<<4|y>>8,h[C+3]=0;const f=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(h.buffer)),m=new Ie(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const h=new Uint8Array(4),f=this.painter.context,m=f.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,T-C-1,1,1,m.RGBA,m.UNSIGNED_BYTE,h),f.bindFramebuffer.set(null);const M=h[0]+(h[2]>>4<<8),z=h[1]+((15&h[2])<<8),O=this.coordsIndex[255-h[3]],F=O&&this.sourceCache.getTileByID(O);if(!F)return null;const K=this._coordsTextureSize,ee=(1<<F.tileID.canonical.z)*K;return new u.Z((F.tileID.canonical.x*K+M)/ee+F.tileID.wrap,(F.tileID.canonical.y*K+z)/ee,this.getElevation(F.tileID,M,z,K))}depthAtPoint(r){const h=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,h),f.bindFramebuffer.set(null),(h[0]/16777216+h[1]/65536+h[2]/256+h[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,h=new u.bd,f=new u.aY,m=this.meshSize,y=u.X/m,C=m*m;for(let F=0;F<=m;F++)for(let K=0;K<=m;K++)h.emplaceBack(K*y,F*y,0);for(let F=0;F<C;F+=m+1)for(let K=0;K<m;K++)f.emplaceBack(K+F,m+K+F+1,m+K+F+2),f.emplaceBack(K+F,m+K+F+2,K+F+1);const T=h.length,M=T+2*(m+1);for(const F of[0,1])for(let K=0;K<=m;K++)for(const ee of[0,1])h.emplaceBack(K*y,F*u.X,ee);for(let F=0;F<2*m;F+=2)f.emplaceBack(M+F,M+F+1,M+F+3),f.emplaceBack(M+F,M+F+3,M+F+2),f.emplaceBack(T+F,T+F+3,T+F+1),f.emplaceBack(T+F,T+F+2,T+F+3);const z=h.length,O=z+2*(m+1);for(const F of[0,1])for(let K=0;K<=m;K++)for(const ee of[0,1])h.emplaceBack(F*u.X,K*y,ee);for(let F=0;F<2*m;F+=2)f.emplaceBack(z+F,z+F+1,z+F+3),f.emplaceBack(z+F,z+F+3,z+F+2),f.emplaceBack(O+F,O+F+3,O+F+1),f.emplaceBack(O+F,O+F+2,O+F+3);return this._mesh=new Zc(r.createVertexBuffer(h,Tp.members),r.createIndexBuffer(f),u.a0.simpleSegment(0,0,h.length,f.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,h){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,h);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const h=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return h&&h.dem&&(f.minElevation=h.dem.min*this.exaggeration,f.maxElevation=h.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,h){const f=u.Z.fromLngLat(r.wrap()),m=(1<<h)*u.X,y=f.x*m,C=f.y*m,T=Math.floor(y/u.X),M=Math.floor(C/u.X);return{tileID:new u.S(h,0,h,T,M),mercatorX:y,mercatorY:C}}}class U1{constructor(r,h,f){this._context=r,this._size=h,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const h=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ie(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),h.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),h.colorAttachment.set(f.texture),{id:r,fbo:h,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(h=>r.id!==h),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const h of this._recentlyUsed)if(!this._objects[h].inUse)return this._objects[h];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const Ll={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Eg{constructor(r,h){this.painter=r,this.terrain=h,this.pool=new U1(r.context,30,h.sourceCache.tileSize*h.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,h){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(h)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const y of m){const C=this.terrain.sourceCache.getTerrainCoords(y);for(const T in C)this._coordsDescendingInv[f][T]||(this._coordsDescendingInv[f][T]=[]),this._coordsDescendingInv[f][T].push(C[T])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],y=m.source;if(Ll[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const C in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][C]=this._coordsDescendingInv[y][C].map(T=>T.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][f.tileID.key];y&&y!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const h=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ll[h]&&(this._prevType&&Ll[this._prevType]||this._stacks.push([]),this._prevType=h,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(Ll[this._prevType]||Ll[h]&&m){this._prevType=h;const y=this._stacks.length-1,C=this._stacks[y]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(vg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[y]){const z=this.pool.getObjectForId(T.rtt[y].id);if(z.stamp===T.rtt[y].stamp){this.pool.useObject(z);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),T.rtt[y]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:u.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let z=0;z<C.length;z++){const O=f.style._layers[C[z]],F=O.source?this._coordsDescendingInv[O.source][T.tileID.key]:[T.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(O,F),f.renderLayer(f,f.style.sourceCaches[O.source],O,F),O.source&&(T.rttCoords[O.source]=this._coordsDescendingInvStr[O.source][T.tileID.key])}}return vg(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Ll[h]}return!1}}const Pp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Tg=b,V1={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ml,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Mp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},W1={showCompass:!0,showZoom:!0,visualizePitch:!1};class q1{constructor(r,h,f=!1){this.mousedown=C=>{this.startMouse(u.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),P.mousePos(this.element,C)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,P.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),P.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=h,this.mouseRotate=yp({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:M=.8})=>{const z=new gp;return new za({clickTolerance:T,move:(O,F)=>({bearingDelta:(F.x-O.x)*M}),moveStateManager:z,enable:C,assignEvents:Mp})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=vp({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:M=-.5})=>{const z=new gp;return new za({clickTolerance:T,move:(O,F)=>({pitchDelta:(F.y-O.y)*M}),moveStateManager:z,enable:C,assignEvents:Mp})})({clickTolerance:y,enable:!0})),P.addEventListener(h,"mousedown",this.mousedown),P.addEventListener(h,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(h,"touchcancel",this.reset)}startMouse(r,h){this.mouseRotate.dragStart(r,h),this.mousePitch&&this.mousePitch.dragStart(r,h),P.disableDrag()}startTouch(r,h){this.touchRotate.dragStart(r,h),this.touchPitch&&this.touchPitch.dragStart(r,h),P.disableDrag()}moveMouse(r,h){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,h)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,h)||{};y&&f.setPitch(f.getPitch()+y)}}moveTouch(r,h){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,h)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,h)||{};y&&f.setPitch(f.getPitch()+y)}}off(){const r=this.element;P.removeEventListener(r,"mousedown",this.mousedown),P.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend),P.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup),P.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),P.removeEventListener(window,"touchend",this.touchend)}}let Qi;function Kn(v,r,h){const f=new u.N(v.lng,v.lat);if(v=new u.N(v.lng,v.lat),r){const m=new u.N(v.lng-360,v.lat),y=new u.N(v.lng+360,v.lat),C=h.locationPoint(v).distSqr(r);h.locationPoint(m).distSqr(r)<C?v=m:h.locationPoint(y).distSqr(r)<C&&(v=y)}for(;Math.abs(v.lng-h.center.lng)>180;){const m=h.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=h.width&&m.y<=h.height)break;v.lng>h.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&h.locationPoint(v).y>h.height/2-h.getHorizon()?v:f}const zl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function oh(v,r,h){const f=v.classList;for(const m in zl)f.remove(`maplibregl-${h}-anchor-${m}`);f.add(`maplibregl-${h}-anchor-${r}`)}class ah extends u.E{constructor(r){if(super(),this._onKeyPress=h=>{const f=h.code,m=h.charCode||h.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=h=>{const f=h.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=h=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((h==null?void 0:h.type)==="terrain"||(h==null?void 0:h.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Kn(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||h&&h.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${zl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${y}`),k.frameAsync(new AbortController).then(()=>{this._updateOpacity(h&&h.type==="moveend")}).catch(()=>{})},this._onMove=h=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=h.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=h.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=h=>{this._element.contains(h.originalEvent.target)&&(h.preventDefault(),this._positionDelta=h.point.sub(this._pos).add(this._offset),this._pointerdownPos=h.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div");const h=P.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;h.setAttributeNS(null,"display","block"),h.setAttributeNS(null,"height",`${f}px`),h.setAttributeNS(null,"width",`${m}px`),h.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const y=P.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const C=P.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=P.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const ge of M){const ye=P.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",ge.rx),ye.setAttributeNS(null,"ry",ge.ry),T.appendChild(ye)}const z=P.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const O=P.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);const F=P.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"opacity","0.25"),F.setAttributeNS(null,"fill","#000000");const K=P.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),F.appendChild(K);const ee=P.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const re=P.createNS("http://www.w3.org/2000/svg","g");re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=P.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const me=P.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#FFFFFF"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962"),re.appendChild(ce),re.appendChild(me),C.appendChild(T),C.appendChild(z),C.appendChild(F),C.appendChild(ee),C.appendChild(re),h.appendChild(C),h.setAttributeNS(null,"height",f*this._scale+"px"),h.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(h),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",h=>{h.preventDefault()}),this._element.addEventListener("mousedown",h=>{h.preventDefault()}),oh(this._element,this._anchor,"marker"),r&&r.className)for(const h of r.className.split(" "))this._element.classList.add(h);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var h,f;if(!(!((h=this._map)===null||h===void 0)&&h.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),C=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,C)-y<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*T,z=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),O=m.transform.lngLatToCameraDepth(this._lngLat,C+M)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,h){return r===void 0&&h===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),h!==void 0&&(this._opacityWhenCovered=h),this._map&&this._updateOpacity(!0),this}}const Ig={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Bu=0,Nu=!1;const sa={maxWidth:100,unit:"metric"};function ju(v,r,h){const f=h&&h.maxWidth||100,m=v._container.clientHeight/2,y=v.unproject([0,m]),C=v.unproject([f,m]),T=y.distanceTo(C);if(h&&h.unit==="imperial"){const M=3.2808*T;M>5280?vt(r,f,M/5280,v._getUIString("ScaleControl.Miles")):vt(r,f,M,v._getUIString("ScaleControl.Feet"))}else h&&h.unit==="nautical"?vt(r,f,T/1852,v._getUIString("ScaleControl.NauticalMiles")):T>=1e3?vt(r,f,T/1e3,v._getUIString("ScaleControl.Kilometers")):vt(r,f,T,v._getUIString("ScaleControl.Meters"))}function vt(v,r,h,f){const m=function(y){const C=Math.pow(10,`${Math.floor(y)}`.length-1);let T=y/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(T),C*T}(h);v.style.width=r*(m/h)+"px",v.innerHTML=`${m}&nbsp;${f}`}const At={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},sh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function lh(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-v),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const r=u.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return lh(new u.P(0,0))}const Ap=b;d.AJAXError=u.bh,d.Evented=u.E,d.LngLat=u.N,d.MercatorCoordinate=u.Z,d.Point=u.P,d.addProtocol=u.bi,d.config=u.a,d.removeProtocol=u.bj,d.AttributionControl=Al,d.BoxZoomHandler=Ji,d.CanvasSource=yr,d.CooperativeGesturesHandler=Pl,d.DoubleClickZoomHandler=Bs,d.DragPanHandler=Sg,d.DragRotateHandler=Cg,d.EdgeInsets=kl,d.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let h=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=h==null?void 0:h.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)h=h.shadowRoot.fullscreenElement;h===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=un,d.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const h=new u.N(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),y=u.e({bearing:m},this.options.fitBoundsOptions),C=Se.fromLngLat(h,f);this._map.fitBounds(C,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const h=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(h).addTo(this._map),this._userLocationDotMarker.setLngLat(h).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Nu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const h=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}else{const h=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=h,this._geolocateButton.setAttribute("aria-label",h)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new ah({element:this._dotElement}),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ah({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",h=>{h.geolocateSource||this._watchState!=="ACTIVE_LOCK"||h.originalEvent&&h.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},Ig,v)}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(Qi!==void 0&&!r)return Qi;if(window.navigator.permissions===void 0)return Qi=!!window.navigator.geolocation,Qi;try{Qi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Qi=!!window.navigator.geolocation}return Qi})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Bu=0,Nu=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),h=v.coords;return r&&(h.longitude<r.getWest()||h.longitude>r.getEast()||h.latitude<r.getSouth()||h.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),h=v.getNorthEast(),f=r.distanceTo(h),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Bu--,Nu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Bu++,Bu>1?(v={maximumAge:6e5,timeout:0},Nu=!0):(v=this.options.positionOptions,Nu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=Xc,d.ImageSource=bt,d.KeyboardHandler=yo,d.LngLatBounds=Se,d.LogoControl=Ep,d.Map=class extends kg{constructor(v){u.bf.mark(u.bg.create);const r=Object.assign(Object.assign({},V1),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new El(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new rn,this._controls=[],this._mapId=u.a4(),this._contextLost=h=>{h.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:h}))},this._contextRestored=h=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:h}))},this._onMapScroll=h=>{if(h.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Pp),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=j.addThrottleControl(()=>this.isMoving()),this._requestManager=new G(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let h=!1;const f=Ru(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{h?f(m):h=!0}),this._resizeObserver.observe(this._container)}this.handlers=new kp(this,r),this._hash=r.hash&&new Xc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new Al(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Ep,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",h=>{this._update(h.dataType==="style"),this.fire(new u.k(`${h.dataType}data`,h))}),this.on("dataloading",h=>{this.fire(new u.k(`${h.dataType}dataloading`,h))}),this.on("dataabort",h=>{this.fire(new u.k("sourcedataabort",h))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const h=v.onAdd(this);this._controls.push(v);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(h,f.firstChild):f.appendChild(h),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,h,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(h,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,h,f)}resize(v){var r;const h=this._containerDimensions(),f=h[0],m=h[1],y=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,y),this.painter.resize(f,m,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const C=!this._moving;return C&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),C&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:h,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),y=v*m,C=r*m;return Math.min(y>h?h/y:1,C>f?f/C:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Se.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,h){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:r,listener:h,delegates:{mousemove:y=>{const C=r.filter(M=>this.getLayer(M)),T=C.length!==0?this.queryRenderedFeatures(y.point,{layers:C}):[];T.length?f||(f=!0,h.call(this,new si(v,this,y.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:r,listener:h,delegates:{mousemove:C=>{const T=r.filter(M=>this.getLayer(M));(T.length!==0?this.queryRenderedFeatures(C.point,{layers:T}):[]).length?f=!0:f&&(f=!1,h.call(this,new si(v,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,h.call(this,new si(v,this,C.originalEvent)))}}}}{const f=m=>{const y=r.filter(T=>this.getLayer(T)),C=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];C.length&&(m.features=C,h.call(this,m),delete m.features)};return{layers:r,listener:h,delegates:{[v]:f}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,h){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const f=this._delegatedListeners[v];for(let m=0;m<f.length;m++){const y=f[m];if(y.listener===h&&y.layers.length===r.length&&y.layers.every(C=>r.includes(C))){for(const C in y.delegates)this.off(C,y.delegates[C]);return void f.splice(m,1)}}}on(v,r,h){if(h===void 0)return super.on(v,r);const f=this._createDelegatedListener(v,typeof r=="string"?[r]:r,h);this._saveDelegatedListener(v,f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(v,r,h){if(h===void 0)return super.once(v,r);const f=typeof r=="string"?[r]:r,m=this._createDelegatedListener(v,f,h);for(const y in m.delegates){const C=m.delegates[y];m.delegates[y]=(...T)=>{this._removeDelegatedListener(v,f,h),C(...T)}}this._saveDelegatedListener(v,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(v,r,h){return h===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,h),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let h;const f=v instanceof u.P||Array.isArray(v),m=f?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:v)||{},m instanceof u.P||typeof m[0]=="number")h=[u.P.convert(m)];else{const y=u.P.convert(m[0]),C=u.P.convert(m[1]);h=[y,new u.P(C.x,y.y),C,new u.P(y.x,C.y),y]}return this.style.queryRenderedFeatures(h,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const h=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new zc(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,h):this.style.loadJSON(v,r,h),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new zc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const h=this._requestManager.transformRequest(v,"Style");u.h(h,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new u.j(f))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(h){u.w(`Unable to perform style diff: ${h.message||h.error||h}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const h in this.style._layers){const f=this.style._layers[h];f.type==="hillshade"&&f.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ip(this.painter,r,v),this.painter.renderToTexture=new Eg(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=h=>{h.dataType==="style"?this.terrain.sourceCache.freeRtt():h.dataType==="source"&&h.tile&&(h.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(h.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const h=v[r]._tiles;for(const f in h){const m=h[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,h={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z}=h;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:F,data:K}=r,ee=r;return this.style.addImage(v,{data:new u.R({width:O,height:F},new Uint8Array(K)),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,v),this}}{const{width:O,height:F,data:K}=k.getImageData(r);this.style.addImage(v,{data:new u.R({width:O,height:F},K),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0})}}updateImage(v,r){const h=this.style.getImage(v);if(!h)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||u.b(r)?k.getImageData(r):r,{width:m,height:y,data:C}=f;if(m===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==h.data.width||y!==h.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(r instanceof HTMLImageElement||u.b(r));return h.data.replace(C,T),this.style.updateImage(v,h),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return j.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,h){return this.style.setLayerZoomRange(v,r,h),this._update(!0)}setFilter(v,r,h={}){return this.style.setFilter(v,r,h),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,h,f={}){return this.style.setPaintProperty(v,r,h,f),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,h,f={}){return this.style.setLayoutProperty(v,r,h,f),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,h={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,h,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,h=>{h||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=P.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const h=this._containerDimensions(),f=this._getClampedPixelRatio(h[0],h[1]);this._resizeCanvas(h[0],h[1],f);const m=this._controlContainer=P.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{y[C]=P.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,h){this._canvas.width=Math.floor(h*v),this._canvas.height=Math.floor(h*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:v},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const h=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!h){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Kc(h,this.transform),R.testSupport(h)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let h=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=k.now();this.style.zoomHistory.update(m,y);const C=new u.z(m,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();T===1&&T===this._crossFadingFactor||(h=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||h)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const h of this._controls)h.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),j.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,k.frameAsync(this._frameRequest).then(v=>{u.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Tg}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=si,d.MapTouchEvent=Os,d.MapWheelEvent=xg,d.Marker=ah,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),h=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=h,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",h.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,h)=>{const f=this._map._getUIString(`NavigationControl.${h}`);r.title=f,r.setAttribute("aria-label",f)},this.options=u.e({},W1,v),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),P.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),P.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new q1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const h=P.create("button",v,this._container);return h.type="button",h.addEventListener("click",r),h}},d.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var h;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=P.create("div","maplibregl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Kn(this._lngLat,this._flatPos,this._map.transform):(h=this._lngLat)===null||h===void 0?void 0:h.wrap(),this._trackPointer&&!r)return;const f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=lh(this.options.offset);if(!m){const T=this._container.offsetWidth,M=this._container.offsetHeight;let z;z=f.y+y.bottom.y<M?["top"]:f.y>this._map.transform.height-M?["bottom"]:[],f.x<T/2?z.push("left"):f.x>this._map.transform.width-T/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let C=f.add(y[m]);this.options.subpixelPositioning||(C=C.round()),P.setTransform(this._container,`${zl[m]} translate(${C.x}px,${C.y}px)`),oh(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(At),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),h=document.createElement("body");let f;for(h.innerHTML=v;f=h.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(sh);v&&v.focus()}},d.RasterDEMTileSource=qt,d.RasterTileSource=ht,d.ScaleControl=class{constructor(v){this._onMove=()=>{ju(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,ju(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},sa),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Do,d.Style=zc,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Il,d.TwoFingersTouchRotateHandler=wp,d.TwoFingersTouchZoomHandler=xp,d.TwoFingersTouchZoomRotateHandler=Cp,d.VectorTileSource=gn,d.VideoSource=An,d.addSourceType=(v,r)=>u._(void 0,void 0,void 0,function*(){if(vr(v))throw new Error(`A source type called "${v}" already exists.`);((h,f)=>{Jr[h]=f})(v,r)}),d.clearPrewarmedResources=function(){const v=tn;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(zt),tn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return an().getRTLTextPluginStatus()},d.getVersion=function(){return Ap},d.getWorkerCount=function(){return Kt.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(v){return nn().broadcast("IS",v)},d.prewarm=function(){kn().acquire(zt)},d.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,r){return an().setRTLTextPlugin(v,r)},d.setWorkerCount=function(v){Kt.workerCount=v},d.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var c=n;return c})})(p3);var m3=p3.exports;const It=Mm(m3),VD=W5({__proto__:null,default:It},[m3]);function WD(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class qD{constructor(){this._apiKey="",this._fetch=WD(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const ld=new qD,$m={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!1},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!1},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!1},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!1},WELSH:{code:"cy",flag:"name:cy",name:"WELSH",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!1},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!1},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!1},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!1},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!1},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!1},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!1},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!1},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!1},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!1},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!1}};function HD(e,t=$m){return e in t?e[e]:null}function Pb(e,t=$m){for(const n of Object.values(t))if(n.code===e)return n;return null}function Mb(e,t=$m){for(const n of Object.values(t))if(n.flag===e)return n;return null}function GD(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function vE(e,t=$m){return GD(e)?Mb(e.flag,t):typeof e!="string"?null:HD(e,t)||Pb(e,t)||Mb(e,t)||null}async function ZD(e,t={}){if(ld.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return ld.fetch(e,t)}const g3={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(g3);class KD extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const _E={403:"Key is missing, invalid or restricted"};async function XD(e={}){const t=new URL("geolocation/ip.json",g3.maptilerApiURL);t.searchParams.set("key",e.apiKey??ld.apiKey);const n=t.toString(),i=await ZD(n);if(!i.ok)throw new KD(i,i.status in _E?_E[i.status]:"");return await i.json()}const xE={info:XD};function y3(e){const t=/^maptiler:\/\/(.*)/;let n;const i=e.trim();let a;return i.startsWith("http://")||i.startsWith("https://")?a=i:(n=t.exec(i))!==null?a=`https://api.maptiler.com/maps/${n[1]}/style.json`:a=`https://api.maptiler.com/maps/${i}/style.json`,a}class v3{constructor(t,n,i,a,c,d){this.name=t,this.variantType=n,this.id=i,this.referenceStyle=a,this.description=c,this.imageURL=d}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return y3(this.getId())}}class _3{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const Bf=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function YD(e){return new Proxy(e,{get(t,n,i){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,i)}})}function JD(){const e={};for(let t=0;t<Bf.length;t+=1){const n=Bf[t],i=YD(new _3(n.name,n.referenceStyleID));for(let a=0;a<n.variants.length;a+=1){const c=n.variants[a],d=new v3(c.name,c.variantType,c.id,i,c.description,c.imageURL);i.addVariant(d)}e[n.referenceStyleID]=i}return e}const ud=JD();var v2={exports:{}},cd=typeof Reflect=="object"?Reflect:null,bE=cd&&typeof cd.apply=="function"?cd.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},Vy;cd&&typeof cd.ownKeys=="function"?Vy=cd.ownKeys:Object.getOwnPropertySymbols?Vy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Vy=function(t){return Object.getOwnPropertyNames(t)};function QD(e){console&&console.warn&&console.warn(e)}var x3=Number.isNaN||function(t){return t!==t};function nr(){nr.init.call(this)}v2.exports=nr;v2.exports.once=r$;nr.EventEmitter=nr;nr.prototype._events=void 0;nr.prototype._eventsCount=0;nr.prototype._maxListeners=void 0;var wE=10;function _v(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(nr,"defaultMaxListeners",{enumerable:!0,get:function(){return wE},set:function(e){if(typeof e!="number"||e<0||x3(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");wE=e}});nr.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nr.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||x3(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function b3(e){return e._maxListeners===void 0?nr.defaultMaxListeners:e._maxListeners}nr.prototype.getMaxListeners=function(){return b3(this)};nr.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var a=t==="error",c=this._events;if(c!==void 0)a=a&&c.error===void 0;else if(!a)return!1;if(a){var d;if(n.length>0&&(d=n[0]),d instanceof Error)throw d;var u=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw u.context=d,u}var b=c[t];if(b===void 0)return!1;if(typeof b=="function")bE(b,this,n);else for(var w=b.length,I=E3(b,w),i=0;i<w;++i)bE(I[i],this,n);return!0};function w3(e,t,n,i){var a,c,d;if(_v(n),c=e._events,c===void 0?(c=e._events=Object.create(null),e._eventsCount=0):(c.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),c=e._events),d=c[t]),d===void 0)d=c[t]=n,++e._eventsCount;else if(typeof d=="function"?d=c[t]=i?[n,d]:[d,n]:i?d.unshift(n):d.push(n),a=b3(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=d.length,QD(u)}return e}nr.prototype.addListener=function(t,n){return w3(this,t,n,!1)};nr.prototype.on=nr.prototype.addListener;nr.prototype.prependListener=function(t,n){return w3(this,t,n,!0)};function e$(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S3(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=e$.bind(i);return a.listener=n,i.wrapFn=a,a}nr.prototype.once=function(t,n){return _v(n),this.on(t,S3(this,t,n)),this};nr.prototype.prependOnceListener=function(t,n){return _v(n),this.prependListener(t,S3(this,t,n)),this};nr.prototype.removeListener=function(t,n){var i,a,c,d,u;if(_v(n),a=this._events,a===void 0)return this;if(i=a[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(c=-1,d=i.length-1;d>=0;d--)if(i[d]===n||i[d].listener===n){u=i[d].listener,c=d;break}if(c<0)return this;c===0?i.shift():t$(i,c),i.length===1&&(a[t]=i[0]),a.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};nr.prototype.off=nr.prototype.removeListener;nr.prototype.removeAllListeners=function(t){var n,i,a;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var c=Object.keys(i),d;for(a=0;a<c.length;++a)d=c[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function C3(e,t,n){var i=e._events;if(i===void 0)return[];var a=i[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?n$(a):E3(a,a.length)}nr.prototype.listeners=function(t){return C3(this,t,!0)};nr.prototype.rawListeners=function(t){return C3(this,t,!1)};nr.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):k3.call(e,t)};nr.prototype.listenerCount=k3;function k3(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}nr.prototype.eventNames=function(){return this._eventsCount>0?Vy(this._events):[]};function E3(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function t$(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function n$(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function r$(e,t){return new Promise(function(n,i){function a(d){e.removeListener(t,c),i(d)}function c(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}T3(e,t,c,{once:!0}),t!=="error"&&i$(e,a,{once:!0})})}function i$(e,t,n){typeof e.on=="function"&&T3(e,"error",t,n)}function T3(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(c){i.once&&e.removeEventListener(t,a),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var o$=v2.exports;const a$=Mm(o$);let gy;const s$=new Uint8Array(16);function l$(){if(!gy&&(gy=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!gy))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return gy(s$)}const ki=[];for(let e=0;e<256;++e)ki.push((e+256).toString(16).slice(1));function u$(e,t=0){return ki[e[t+0]]+ki[e[t+1]]+ki[e[t+2]]+ki[e[t+3]]+"-"+ki[e[t+4]]+ki[e[t+5]]+"-"+ki[e[t+6]]+ki[e[t+7]]+"-"+ki[e[t+8]]+ki[e[t+9]]+"-"+ki[e[t+10]]+ki[e[t+11]]+ki[e[t+12]]+ki[e[t+13]]+ki[e[t+14]]+ki[e[t+15]]}const c$=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),SE={randomUUID:c$};function h$(e,t,n){if(SE.randomUUID&&!t&&!e)return SE.randomUUID();e=e||{};const i=e.random||(e.rng||l$)();return i[6]=i[6]&15|64,i[8]=i[8]&63|128,u$(i)}const I3="3.7.7",d$=I3,Dd=typeof Buffer=="function",CE=typeof TextDecoder=="function"?new TextDecoder:void 0,kE=typeof TextEncoder=="function"?new TextEncoder:void 0,p$="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Cf=Array.prototype.slice.call(p$),yy=(e=>{let t={};return e.forEach((n,i)=>t[n]=i),t})(Cf),f$=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Ti=String.fromCharCode.bind(String),EE=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),P3=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),M3=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),A3=e=>{let t,n,i,a,c="";const d=e.length%3;for(let u=0;u<e.length;){if((n=e.charCodeAt(u++))>255||(i=e.charCodeAt(u++))>255||(a=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=n<<16|i<<8|a,c+=Cf[t>>18&63]+Cf[t>>12&63]+Cf[t>>6&63]+Cf[t&63]}return d?c.slice(0,d-3)+"===".substring(d):c},_2=typeof btoa=="function"?e=>btoa(e):Dd?e=>Buffer.from(e,"binary").toString("base64"):A3,Ab=Dd?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let i=0,a=e.length;i<a;i+=4096)n.push(Ti.apply(null,e.subarray(i,i+4096)));return _2(n.join(""))},Wy=(e,t=!1)=>t?P3(Ab(e)):Ab(e),m$=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?Ti(192|t>>>6)+Ti(128|t&63):Ti(224|t>>>12&15)+Ti(128|t>>>6&63)+Ti(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return Ti(240|t>>>18&7)+Ti(128|t>>>12&63)+Ti(128|t>>>6&63)+Ti(128|t&63)}},g$=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,L3=e=>e.replace(g$,m$),TE=Dd?e=>Buffer.from(e,"utf8").toString("base64"):kE?e=>Ab(kE.encode(e)):e=>_2(L3(e)),hd=(e,t=!1)=>t?P3(TE(e)):TE(e),IE=e=>hd(e,!0),y$=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,v$=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return Ti((n>>>10)+55296)+Ti((n&1023)+56320);case 3:return Ti((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return Ti((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},z3=e=>e.replace(y$,v$),R3=e=>{if(e=e.replace(/\s+/g,""),!f$.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",i,a;for(let c=0;c<e.length;)t=yy[e.charAt(c++)]<<18|yy[e.charAt(c++)]<<12|(i=yy[e.charAt(c++)])<<6|(a=yy[e.charAt(c++)]),n+=i===64?Ti(t>>16&255):a===64?Ti(t>>16&255,t>>8&255):Ti(t>>16&255,t>>8&255,t&255);return n},x2=typeof atob=="function"?e=>atob(M3(e)):Dd?e=>Buffer.from(e,"base64").toString("binary"):R3,D3=Dd?e=>EE(Buffer.from(e,"base64")):e=>EE(x2(e).split("").map(t=>t.charCodeAt(0))),$3=e=>D3(O3(e)),_$=Dd?e=>Buffer.from(e,"base64").toString("utf8"):CE?e=>CE.decode(D3(e)):e=>z3(x2(e)),O3=e=>M3(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Lb=e=>_$(O3(e)),x$=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},F3=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),B3=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,F3(n));e("fromBase64",function(){return Lb(this)}),e("toBase64",function(t){return hd(this,t)}),e("toBase64URI",function(){return hd(this,!0)}),e("toBase64URL",function(){return hd(this,!0)}),e("toUint8Array",function(){return $3(this)})},N3=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,F3(n));e("toBase64",function(t){return Wy(this,t)}),e("toBase64URI",function(){return Wy(this,!0)}),e("toBase64URL",function(){return Wy(this,!0)})},b$=()=>{B3(),N3()},w$={version:I3,VERSION:d$,atob:x2,atobPolyfill:R3,btoa:_2,btoaPolyfill:A3,fromBase64:Lb,toBase64:hd,encode:hd,encodeURI:IE,encodeURL:IE,utob:L3,btou:z3,decode:Lb,isValid:x$,fromUint8Array:Wy,toUint8Array:$3,extendString:B3,extendUint8Array:N3,extendBuiltins:b$};var S$=Object.defineProperty,j3=e=>{throw TypeError(e)},C$=(e,t,n)=>t in e?S$(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,On=(e,t,n)=>C$(e,typeof t!="symbol"?t+"":t,n),b2=(e,t,n)=>t.has(e)||j3("Cannot "+n),bn=(e,t,n)=>(b2(e,t,"read from private field"),n?n.call(e):t.get(e)),Xu=(e,t,n)=>t.has(e)?j3("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$h=(e,t,n,i)=>(b2(e,t,"write to private field"),t.set(e,n),n),Vo=(e,t,n)=>(b2(e,t,"access private method"),n);const Cn={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...$m};function PE(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Pb(e)||Cn.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>Pb(e)).filter(e=>e)[0]??Cn.LOCAL}const So={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:Cn.STYLE,secondaryLanguage:Cn.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(So);const U3=h$();class k$ extends a${constructor(){super(...arguments),On(this,"primaryLanguage",So.primaryLanguage),On(this,"secondaryLanguage"),On(this,"session",!0),On(this,"caching",!0),On(this,"_unit","metric"),On(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,ld.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){ld.fetch=t}get fetch(){return ld.fetch}}const ao=new k$,{addProtocol:ME}=It,zb="localcache_source",Rb="localcache",E$="maptiler_sdk",T$=1e3,I$=100,Db=typeof caches<"u";function P$(e,t){if(Db&&ao.caching&&ao.session&&e.host===So.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${zb}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${Rb}://`)}return e.href}let lx;async function V3(){return lx||(lx=await caches.open(E$)),lx}let AE=0;async function M$(){const e=await V3(),t=await e.keys(),n=t.slice(0,Math.max(t.length-T$,0));for(const i of n)e.delete(i)}function A$(){ME(zb,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${zb}://`,"https://");const n=e;n.signal=t.signal;const i=await fetch(e.url,n),a=await i.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${i.headers.get("Last-Modified")}`),{data:a,cacheControl:i.headers.get("Cache-Control"),expires:i.headers.get("Expires")}}),ME(Rb,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Rb}://`,"https://");const n=new URL(e.url),i=new URL(n);i.searchParams.delete("mtsid"),i.searchParams.delete("key");const a=i.toString(),c=new URL(n);c.searchParams.delete("last-modified");const d=c.toString(),u=async P=>({data:await P.arrayBuffer(),cacheControl:P.headers.get("Cache-Control"),expires:P.headers.get("Expires")}),b=await V3(),w=await b.match(a);if(w)return u(w);const I=e;I.signal=t.signal;const k=await fetch(d,I);return k.status>=200&&k.status<300&&(b.put(a,k.clone()).catch(()=>{}),++AE>I$&&(M$(),AE=0)),u(k)})}function L$(){if(typeof window>"u")return;const e=It.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{It.setRTLTextPlugin(So.rtlPluginURL,!0)}catch{}}function z$(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function dd(e,t,n){const i=window.document.createElement(e);return t!==void 0&&(i.className=t),n&&n.appendChild(i),i}function W3(e){e.parentNode&&e.parentNode.removeChild(e)}function LE(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===So.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",ao.apiKey),ao.session&&n.searchParams.append("mtsid",U3)),{url:P$(n,t)}}function zE(e){return(t,n)=>{if(e!=null){const i=e(t,n),a=LE((i==null?void 0:i.url)??"",n);return{...i,...a}}return LE(t,n)}}function R$(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function D$(e){const t=R$();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const i=document.createElement("div");throw i.innerHTML=t,i.classList.add("webgl-warning-div"),n.appendChild(i),new Error(t)}function $$(e){const t="The WebGL context was lost.";let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const i=document.createElement("div");i.innerHTML=t,i.classList.add("webgl-warning-div"),n.appendChild(i)}let sf=class extends It.Marker{addTo(e){return super.addTo(e)}};class lf extends It.Popup{addTo(t){return super.addTo(t)}}class HH extends It.Style{constructor(t,n={}){super(t,n)}}class GH extends It.CanvasSource{onAdd(t){super.onAdd(t)}}class ZH extends It.GeoJSONSource{onAdd(t){super.onAdd(t)}}class KH extends It.ImageSource{onAdd(t){super.onAdd(t)}}class XH extends It.RasterTileSource{onAdd(t){super.onAdd(t)}}class YH extends It.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class JH extends It.VectorTileSource{onAdd(t){super.onAdd(t)}}class QH extends It.VideoSource{onAdd(t){super.onAdd(t)}}class O$ extends It.NavigationControl{onAdd(t){return super.onAdd(t)}}class F$ extends It.GeolocateControl{onAdd(t){return super.onAdd(t)}}class eG extends It.AttributionControl{onAdd(t){return super.onAdd(t)}}class B$ extends It.LogoControl{onAdd(t){return super.onAdd(t)}}class N$ extends It.ScaleControl{onAdd(t){return super.onAdd(t)}}class j$ extends It.FullscreenControl{onAdd(t){return super.onAdd(t)}}class tG extends It.TerrainControl{onAdd(t){return super.onAdd(t)}}class nG extends It.BoxZoomHandler{constructor(t,n){super(t,n)}}class rG extends It.ScrollZoomHandler{constructor(t,n){super(t,n)}}class iG extends It.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class oG extends It.KeyboardHandler{constructor(t){super(t)}}class aG extends It.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class sG extends It.MapWheelEvent{constructor(t,n,i){super(t,n,i)}}class lG extends It.MapTouchEvent{constructor(t,n,i){super(t,n,i)}}class uG extends It.MapMouseEvent{constructor(t,n,i,a={}){super(t,n,i,a)}}let RE=class extends B${constructor(t={}){super(t),On(this,"logoURL",""),On(this,"linkURL",""),this.logoURL=t.logoURL??So.maptilerLogoURL,this.linkURL=t.linkURL??So.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}};var U$=8,V$={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},W$={"*":{type:"source"}},q$=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],H$={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},G$={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},Z$={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},K$={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},X$={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Y$={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},J$={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Q$=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],eO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},tO={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},nO={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},rO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},iO={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oO={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},aO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},sO={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},lO={type:"array",value:"*"},uO={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},cO={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},hO={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},dO={type:"array",value:"*",minimum:1},pO={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},fO={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},mO={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},gO={type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},yO=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],vO={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},_O={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},xO={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},bO={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wO={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},SO={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},CO={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},kO={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},EO={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},TO={"*":{type:"string"}},IO={$version:U$,$root:V$,sources:W$,source:q$,source_vector:H$,source_raster:G$,source_raster_dem:Z$,source_geojson:K$,source_video:X$,source_image:Y$,layer:J$,layout:Q$,layout_background:eO,layout_fill:tO,layout_circle:nO,layout_heatmap:rO,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:iO,layout_symbol:oO,layout_raster:aO,layout_hillshade:sO,filter:lO,filter_operator:uO,geometry_type:cO,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:hO,expression:dO,light:pO,sky:fO,terrain:mO,projection:gO,paint:yO,paint_fill:vO,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:_O,paint_circle:xO,paint_heatmap:bO,paint_symbol:wO,paint_raster:SO,paint_hillshade:CO,paint_background:kO,transition:EO,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:TO};let rt=class{constructor(t,n,i,a){this.message=(t?`${t}: `:"")+i,a&&(this.identifier=a),n!=null&&n.__line__&&(this.line=n.__line__)}};function P0(e,...t){for(const n of t)for(const i in n)e[i]=n[i];return e}let ms=class extends Error{constructor(t,n){super(n),this.message=n,this.key=t}},PO=class q3{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[i,a]of n)this.bindings[i]=a}concat(t){return new q3(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}};const xv={kind:"null"},ot={kind:"number"},ln={kind:"string"},Xt={kind:"boolean"},bs={kind:"color"},pd={kind:"object"},Yt={kind:"value"},MO={kind:"error"},bv={kind:"collator"},wv={kind:"formatted"},Sv={kind:"padding"},Om={kind:"resolvedImage"},Cv={kind:"variableAnchorOffsetCollection"};function Go(e,t){return{kind:"array",itemType:e,N:t}}function Cr(e){if(e.kind==="array"){const t=Cr(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const AO=[xv,ot,ln,Xt,bs,wv,pd,Go(Yt),Sv,Om,Cv];function pm(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!pm(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of AO)if(!pm(n,t))return null}}return`Expected ${Cr(e)} but found ${Cr(t)} instead.`}function w2(e,t){return t.some(n=>n.kind===e.kind)}function gc(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function uf(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const H3=.96422,G3=1,Z3=.82521,K3=4/29,fd=6/29,X3=3*fd*fd,LO=fd*fd*fd,zO=Math.PI/180,RO=180/Math.PI;function Y3(e){return e=e%360,e<0&&(e+=360),e}function J3([e,t,n,i]){e=ux(e),t=ux(t),n=ux(n);let a,c;const d=cx((.2225045*e+.7168786*t+.0606169*n)/G3);e===t&&t===n?a=c=d:(a=cx((.4360747*e+.3850649*t+.1430804*n)/H3),c=cx((.0139322*e+.0971045*t+.7141733*n)/Z3));const u=116*d-16;return[u<0?0:u,500*(a-d),200*(d-c),i]}function ux(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function cx(e){return e>LO?Math.pow(e,1/3):e/X3+K3}function Q3([e,t,n,i]){let a=(e+16)/116,c=isNaN(t)?a:a+t/500,d=isNaN(n)?a:a-n/200;return a=G3*dx(a),c=H3*dx(c),d=Z3*dx(d),[hx(3.1338561*c-1.6168667*a-.4906146*d),hx(-.9787684*c+1.9161415*a+.033454*d),hx(.0719453*c-.2289914*a+1.4052427*d),i]}function hx(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function dx(e){return e>fd?e*e*e:X3*(e-K3)}function DO(e){const[t,n,i,a]=J3(e),c=Math.sqrt(n*n+i*i);return[Math.round(c*1e4)?Y3(Math.atan2(i,n)*RO):NaN,c,t,a]}function $O([e,t,n,i]){return e=isNaN(e)?0:e*zO,Q3([n,Math.cos(e)*t,Math.sin(e)*t,i])}function OO([e,t,n,i]){e=Y3(e),t/=100,n/=100;function a(c){const d=(c+e/30)%12,u=t*Math.min(n,1-n);return n-u*Math.max(-1,Math.min(d-3,9-d,1))}return[a(0),a(8),a(4),i]}function FO(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=BO[e];if(t){const[a,c,d]=t;return[a/255,c/255,d/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const a=e.length<6?1:2;let c=1;return[vy(e.slice(c,c+=a)),vy(e.slice(c,c+=a)),vy(e.slice(c,c+=a)),vy(e.slice(c,c+a)||"ff")]}if(e.startsWith("rgb")){const a=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,c=e.match(a);if(c){const[d,u,b,w,I,k,P,R,N,V,X,D]=c,B=[w||" ",P||" ",V].join("");if(B==="  "||B==="  /"||B===",,"||B===",,,"){const j=[b,k,N].join(""),G=j==="%%%"?100:j===""?255:0;if(G){const te=[Oh(+u/G,0,1),Oh(+I/G,0,1),Oh(+R/G,0,1),X?DE(+X,D):1];if($E(te))return te}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,i=e.match(n);if(i){const[a,c,d,u,b,w,I,k,P]=i,R=[d||" ",b||" ",I].join("");if(R==="  "||R==="  /"||R===",,"||R===",,,"){const N=[+c,Oh(+u,0,100),Oh(+w,0,100),k?DE(+k,P):1];if($E(N))return OO(N)}}}function vy(e){return parseInt(e.padEnd(2,e),16)/255}function DE(e,t){return Oh(t?e/100:e,0,1)}function Oh(e,t,n){return Math.min(Math.max(t,e),n)}function $E(e){return!e.some(Number.isNaN)}const BO={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class kr{constructor(t,n,i,a=1,c=!0){this.r=t,this.g=n,this.b=i,this.a=a,c||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[t,n,i,a]))}static parse(t){if(t instanceof kr)return t;if(typeof t!="string")return;const n=FO(t);if(n)return new kr(...n,!1)}get rgb(){const{r:t,g:n,b:i,a}=this,c=a||1/0;return this.overwriteGetter("rgb",[t/c,n/c,i/c,a])}get hcl(){return this.overwriteGetter("hcl",DO(this.rgb))}get lab(){return this.overwriteGetter("lab",J3(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,i,a]=this.rgb;return`rgba(${[t,n,i].map(c=>Math.round(c*255)).join(",")},${a})`}}kr.black=new kr(0,0,0,1);kr.white=new kr(1,1,1,1);kr.transparent=new kr(0,0,0,0);kr.red=new kr(1,0,0,1);let S2=class{constructor(t,n,i){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},$b=class{constructor(t,n,i,a,c){this.text=t,this.image=n,this.scale=i,this.fontStack=a,this.textColor=c}},Fm=class qy{constructor(t){this.sections=t}static fromString(t){return new qy([new $b(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof qy?t:qy.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}};class ws{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof ws)return t;if(typeof t=="number")return new ws([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new ws(t)}}toString(){return JSON.stringify(this.values)}}const NO=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class il{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof il)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const i=t[n],a=t[n+1];if(typeof i!="string"||!NO.has(i)||!Array.isArray(a)||a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")return}return new il(t)}}toString(){return JSON.stringify(this.values)}}let $d=class eM{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new eM({name:t,available:!1}):null}};function tM(e,t,n,i){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof i>"u"||typeof i=="number"&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof i=="number"?[e,t,n,i]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fm(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof kr||e instanceof S2||e instanceof Fm||e instanceof ws||e instanceof il||e instanceof $d)return!0;if(Array.isArray(e)){for(const t of e)if(!fm(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!fm(e[t]))return!1;return!0}else return!1}function oi(e){if(e===null)return xv;if(typeof e=="string")return ln;if(typeof e=="boolean")return Xt;if(typeof e=="number")return ot;if(e instanceof kr)return bs;if(e instanceof S2)return bv;if(e instanceof Fm)return wv;if(e instanceof ws)return Sv;if(e instanceof il)return Cv;if(e instanceof $d)return Om;if(Array.isArray(e)){const t=e.length;let n;for(const i of e){const a=oi(i);if(!n)n=a;else{if(n===a)continue;n=Yt;break}}return Go(n||Yt,t)}else return pd}function Nf(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof kr||e instanceof Fm||e instanceof ws||e instanceof il||e instanceof $d?e.toString():JSON.stringify(e)}class Ed{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!fm(t[1]))return n.error("invalid value");const i=t[1];let a=oi(i);const c=n.expectedType;return a.kind==="array"&&a.N===0&&c&&c.kind==="array"&&(typeof c.N!="number"||c.N===0)&&(a=c),new Ed(a,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Wr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const _y={string:ln,number:ot,boolean:Xt,object:pd};class Wa{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let i=1,a;const c=t[0];if(c==="array"){let u;if(t.length>2){const w=t[1];if(typeof w!="string"||!(w in _y)||w==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);u=_y[w],i++}else u=Yt;let b;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);b=t[2],i++}a=Go(u,b)}else{if(!_y[c])throw new Error(`Types doesn't contain name = ${c}`);a=_y[c]}const d=[];for(;i<t.length;i++){const u=n.parse(t[i],i,Yt);if(!u)return null;d.push(u)}return new Wa(a,d)}evaluate(t){for(let n=0;n<this.args.length;n++){const i=this.args[n].evaluate(t);if(pm(this.type,oi(i))){if(n===this.args.length-1)throw new Wr(`Expected value to be of type ${Cr(this.type)}, but found ${Cr(oi(i))} instead.`)}else return i}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const OE={"to-boolean":Xt,"to-color":bs,"to-number":ot,"to-string":ln};let ed=class nM{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[0];if(!OE[i])throw new Error(`Can't parse ${i} as it is not part of the known types`);if((i==="to-boolean"||i==="to-string")&&t.length!==2)return n.error("Expected one argument.");const a=OE[i],c=[];for(let d=1;d<t.length;d++){const u=n.parse(t[d],d,Yt);if(!u)return null;c.push(u)}return new nM(a,c)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,i;for(const a of this.args){if(n=a.evaluate(t),i=null,n instanceof kr)return n;if(typeof n=="string"){const c=t.parseColor(n);if(c)return c}else if(Array.isArray(n)&&(n.length<3||n.length>4?i=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:i=tM(n[0],n[1],n[2],n[3]),!i))return new kr(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Wr(i||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const i of this.args){n=i.evaluate(t);const a=ws.parse(n);if(a)return a}throw new Wr(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const i of this.args){n=i.evaluate(t);const a=il.parse(n);if(a)return a}throw new Wr(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const i of this.args){if(n=i.evaluate(t),n===null)return 0;const a=Number(n);if(!isNaN(a))return a}throw new Wr(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return Fm.fromString(Nf(this.args[0].evaluate(t)));case"resolvedImage":return $d.fromString(Nf(this.args[0].evaluate(t)));default:return Nf(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};const jO=["Unknown","Point","LineString","Polygon"];let rM=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?jO[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=kr.parse(t)),n}},iM=class oM{constructor(t,n,i=[],a,c=new PO,d=[]){this.registry=t,this.path=i,this.key=i.map(u=>`[${u}]`).join(""),this.scope=c,this.errors=d,this.expectedType=a,this._isConstant=n}parse(t,n,i,a,c={}){return n?this.concat(n,i,a)._parse(t,c):this._parse(t,c)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function i(a,c,d){return d==="assert"?new Wa(c,[a]):d==="coerce"?new ed(c,[a]):a}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=t[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const c=this.registry[a];if(c){let d=c.parse(t,this);if(!d)return null;if(this.expectedType){const u=this.expectedType,b=d.type;if((u.kind==="string"||u.kind==="number"||u.kind==="boolean"||u.kind==="object"||u.kind==="array")&&b.kind==="value")d=i(d,u,n.typeAnnotation||"assert");else if((u.kind==="color"||u.kind==="formatted"||u.kind==="resolvedImage")&&(b.kind==="value"||b.kind==="string"))d=i(d,u,n.typeAnnotation||"coerce");else if(u.kind==="padding"&&(b.kind==="value"||b.kind==="number"||b.kind==="array"))d=i(d,u,n.typeAnnotation||"coerce");else if(u.kind==="variableAnchorOffsetCollection"&&(b.kind==="value"||b.kind==="array"))d=i(d,u,n.typeAnnotation||"coerce");else if(this.checkSubtype(u,b))return null}if(!(d instanceof Ed)&&d.type.kind!=="resolvedImage"&&this._isConstant(d)){const u=new rM;try{d=new Ed(d.type,d.evaluate(u))}catch(b){return this.error(b.message),null}}return d}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,i){const a=typeof t=="number"?this.path.concat(t):this.path,c=i?this.scope.concat(i):this.scope;return new oM(this.registry,this._isConstant,a,n||null,c,this.errors)}error(t,...n){const i=`${this.key}${n.map(a=>`[${a}]`).join("")}`;this.errors.push(new ms(i,t))}checkSubtype(t,n){const i=pm(t,n);return i&&this.error(i),i}},aM=class sM{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const i=[];for(let c=1;c<t.length-1;c+=2){const d=t[c];if(typeof d!="string")return n.error(`Expected string, but found ${typeof d} instead.`,c);if(/[^a-zA-Z0-9_]/.test(d))return n.error("Variable names must contain only alphanumeric characters or '_'.",c);const u=n.parse(t[c+1],c+1);if(!u)return null;i.push([d,u])}const a=n.parse(t[t.length-1],t.length-1,n.expectedType,i);return a?new sM(i,a):null}outputDefined(){return this.result.outputDefined()}},lM=class uM{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const i=t[1];return n.scope.has(i)?new uM(i,n.scope.get(i)):n.error(`Unknown variable "${i}". Make sure "${i}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}},UO=class cM{constructor(t,n,i){this.type=t,this.index=n,this.input=i}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,ot),a=n.parse(t[2],2,Go(n.expectedType||Yt));if(!i||!a)return null;const c=a.type;return new cM(c.itemType,i,a)}evaluate(t){const n=this.index.evaluate(t),i=this.input.evaluate(t);if(n<0)throw new Wr(`Array index out of bounds: ${n} < 0.`);if(n>=i.length)throw new Wr(`Array index out of bounds: ${n} > ${i.length-1}.`);if(n!==Math.floor(n))throw new Wr(`Array index must be an integer, but found ${n} instead.`);return i[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}},VO=class hM{constructor(t,n){this.type=Xt,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,Yt),a=n.parse(t[2],2,Yt);return!i||!a?null:w2(i.type,[Xt,ln,ot,xv,Yt])?new hM(i,a):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(i.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!i)return!1;if(!gc(n,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(oi(n))} instead.`);if(!gc(i,["string","array"]))throw new Wr(`Expected second argument to be of type array or string, but found ${Cr(oi(i))} instead.`);return i.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}},WO=class Ob{constructor(t,n,i){this.type=ot,this.needle=t,this.haystack=n,this.fromIndex=i}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,Yt),a=n.parse(t[2],2,Yt);if(!i||!a)return null;if(!w2(i.type,[Xt,ln,ot,xv,Yt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(i.type)} instead`);if(t.length===4){const c=n.parse(t[3],3,ot);return c?new Ob(i,a,c):null}else return new Ob(i,a)}evaluate(t){const n=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!gc(n,["boolean","string","number","null"]))throw new Wr(`Expected first argument to be of type boolean, string, number or null, but found ${Cr(oi(n))} instead.`);let a;if(this.fromIndex&&(a=this.fromIndex.evaluate(t)),gc(i,["string"])){const c=i.indexOf(n,a);return c===-1?-1:[...i.slice(0,c)].length}else{if(gc(i,["array"]))return i.indexOf(n,a);throw new Wr(`Expected second argument to be of type array or string, but found ${Cr(oi(i))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}},qO=class dM{constructor(t,n,i,a,c,d){this.inputType=t,this.type=n,this.input=i,this.cases=a,this.outputs=c,this.otherwise=d}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let i,a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);const c={},d=[];for(let w=2;w<t.length-1;w+=2){let I=t[w];const k=t[w+1];Array.isArray(I)||(I=[I]);const P=n.concat(w);if(I.length===0)return P.error("Expected at least one branch label.");for(const N of I){if(typeof N!="number"&&typeof N!="string")return P.error("Branch labels must be numbers or strings.");if(typeof N=="number"&&Math.abs(N)>Number.MAX_SAFE_INTEGER)return P.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof N=="number"&&Math.floor(N)!==N)return P.error("Numeric branch labels must be integer values.");if(!i)i=oi(N);else if(P.checkSubtype(i,oi(N)))return null;if(typeof c[String(N)]<"u")return P.error("Branch labels must be unique.");c[String(N)]=d.length}const R=n.parse(k,w,a);if(!R)return null;a=a||R.type,d.push(R)}const u=n.parse(t[1],1,Yt);if(!u)return null;const b=n.parse(t[t.length-1],t.length-1,a);return!b||u.type.kind!=="value"&&n.concat(1).checkSubtype(i,u.type)?null:new dM(i,a,u,c,d,b)}evaluate(t){const n=this.input.evaluate(t);return(oi(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}},HO=class pM{constructor(t,n,i){this.type=t,this.branches=n,this.otherwise=i}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let i;n.expectedType&&n.expectedType.kind!=="value"&&(i=n.expectedType);const a=[];for(let d=1;d<t.length-1;d+=2){const u=n.parse(t[d],d,Xt);if(!u)return null;const b=n.parse(t[d+1],d+1,i);if(!b)return null;a.push([u,b]),i=i||b.type}const c=n.parse(t[t.length-1],t.length-1,i);if(!c)return null;if(!i)throw new Error("Can't infer output type");return new pM(i,a,c)}evaluate(t){for(const[n,i]of this.branches)if(n.evaluate(t))return i.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,i]of this.branches)t(n),t(i);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}},GO=class Fb{constructor(t,n,i,a){this.type=t,this.input=n,this.beginIndex=i,this.endIndex=a}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const i=n.parse(t[1],1,Yt),a=n.parse(t[2],2,ot);if(!i||!a)return null;if(!w2(i.type,[Go(Yt),ln,Yt]))return n.error(`Expected first argument to be of type array or string, but found ${Cr(i.type)} instead`);if(t.length===4){const c=n.parse(t[3],3,ot);return c?new Fb(i.type,i,a,c):null}else return new Fb(i.type,i,a)}evaluate(t){const n=this.input.evaluate(t),i=this.beginIndex.evaluate(t);let a;if(this.endIndex&&(a=this.endIndex.evaluate(t)),gc(n,["string"]))return[...n].slice(i,a).join("");if(gc(n,["array"]))return n.slice(i,a);throw new Wr(`Expected first argument to be of type array or string, but found ${Cr(oi(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}};function fM(e,t){const n=e.length-1;let i=0,a=n,c=0,d,u;for(;i<=a;)if(c=Math.floor((i+a)/2),d=e[c],u=e[c+1],d<=t){if(c===n||t<u)return c;i=c+1}else if(d>t)a=c-1;else throw new Wr("Input is not a number.");return 0}let mM=class gM{constructor(t,n,i){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[a,c]of i)this.labels.push(a),this.outputs.push(c)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const i=n.parse(t[1],1,ot);if(!i)return null;const a=[];let c=null;n.expectedType&&n.expectedType.kind!=="value"&&(c=n.expectedType);for(let d=1;d<t.length;d+=2){const u=d===1?-1/0:t[d],b=t[d+1],w=d,I=d+1;if(typeof u!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(a.length&&a[a.length-1][0]>=u)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',w);const k=n.parse(b,I,c);if(!k)return null;c=c||k.type,a.push([u,k])}return new gM(c,i,a)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return i[0].evaluate(t);const c=n.length;if(a>=n[c-1])return i[c-1].evaluate(t);const d=fM(n,a);return i[d].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function ZO(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var KO=yM;function yM(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}yM.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var a=this.sampleCurveX(n)-e;if(Math.abs(a)<t)return n;var c=this.sampleCurveDerivativeX(n);if(Math.abs(c)<1e-6)break;n=n-a/c}var d=0,u=1;for(n=e,i=0;i<20&&(a=this.sampleCurveX(n),!(Math.abs(a-e)<t));i++)e>a?d=n:u=n,n=(u-d)*.5+d;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var XO=ZO(KO);function yc(e,t,n){return e+n*(t-e)}function YO(e,t,n,i="rgb"){switch(i){case"rgb":{const[a,c,d,u]=M0(e.rgb,t.rgb,n);return new kr(a,c,d,u,!1)}case"hcl":{const[a,c,d,u]=e.hcl,[b,w,I,k]=t.hcl;let P,R;if(!isNaN(a)&&!isNaN(b)){let B=b-a;b>a&&B>180?B-=360:b<a&&a-b>180&&(B+=360),P=a+n*B}else isNaN(a)?isNaN(b)?P=NaN:(P=b,(d===1||d===0)&&(R=w)):(P=a,(I===1||I===0)&&(R=c));const[N,V,X,D]=$O([P,R??yc(c,w,n),yc(d,I,n),yc(u,k,n)]);return new kr(N,V,X,D,!1)}case"lab":{const[a,c,d,u]=Q3(M0(e.lab,t.lab,n));return new kr(a,c,d,u,!1)}}}function M0(e,t,n){return e.map((i,a)=>yc(i,t[a],n))}function JO(e,t,n){return new ws(M0(e.values,t.values,n))}function QO(e,t,n){const i=e.values,a=t.values;if(i.length!==a.length)throw new Wr(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const c=[];for(let d=0;d<i.length;d+=2){if(i[d]!==a[d])throw new Wr(`Cannot interpolate values containing mismatched anchors. from[${d}]: ${i[d]}, to[${d}]: ${a[d]}`);c.push(i[d]);const[u,b]=i[d+1],[w,I]=a[d+1];c.push([yc(u,w,n),yc(b,I,n)])}return new il(c)}const px={number:yc,color:YO,array:M0,padding:JO,variableAnchorOffsetCollection:QO};let vc=class Bb{constructor(t,n,i,a,c){this.type=t,this.operator=n,this.interpolation=i,this.input=a,this.labels=[],this.outputs=[];for(const[d,u]of c)this.labels.push(d),this.outputs.push(u)}static interpolationFactor(t,n,i,a){let c=0;if(t.name==="exponential")c=fx(n,t.base,i,a);else if(t.name==="linear")c=fx(n,1,i,a);else if(t.name==="cubic-bezier"){const d=t.controlPoints;c=new XO(d[0],d[1],d[2],d[3]).solve(fx(n,1,i,a))}return c}static parse(t,n){let[i,a,c,...d]=t;if(!Array.isArray(a)||a.length===0)return n.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const w=a[1];if(typeof w!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:w}}else if(a[0]==="cubic-bezier"){const w=a.slice(1);if(w.length!==4||w.some(I=>typeof I!="number"||I<0||I>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:w}}else return n.error(`Unknown interpolation type ${String(a[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(c=n.parse(c,2,ot),!c)return null;const u=[];let b=null;i==="interpolate-hcl"||i==="interpolate-lab"?b=bs:n.expectedType&&n.expectedType.kind!=="value"&&(b=n.expectedType);for(let w=0;w<d.length;w+=2){const I=d[w],k=d[w+1],P=w+3,R=w+4;if(typeof I!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',P);if(u.length&&u[u.length-1][0]>=I)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',P);const N=n.parse(k,R,b);if(!N)return null;b=b||N.type,u.push([I,N])}return!uf(b,ot)&&!uf(b,bs)&&!uf(b,Sv)&&!uf(b,Cv)&&!uf(b,Go(ot))?n.error(`Type ${Cr(b)} is not interpolatable.`):new Bb(b,i,a,c,u)}evaluate(t){const n=this.labels,i=this.outputs;if(n.length===1)return i[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return i[0].evaluate(t);const c=n.length;if(a>=n[c-1])return i[c-1].evaluate(t);const d=fM(n,a),u=n[d],b=n[d+1],w=Bb.interpolationFactor(this.interpolation,a,u,b),I=i[d].evaluate(t),k=i[d+1].evaluate(t);switch(this.operator){case"interpolate":return px[this.type.kind](I,k,w);case"interpolate-hcl":return px.color(I,k,w,"hcl");case"interpolate-lab":return px.color(I,k,w,"lab")}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function fx(e,t,n,i){const a=i-n,c=e-n;return a===0?0:t===1?c/a:(Math.pow(t,c)-1)/(Math.pow(t,a)-1)}let vM=class Nb{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expectected at least one argument.");let i=null;const a=n.expectedType;a&&a.kind!=="value"&&(i=a);const c=[];for(const d of t.slice(1)){const u=n.parse(d,1+c.length,i,void 0,{typeAnnotation:"omit"});if(!u)return null;i=i||u.type,c.push(u)}if(!i)throw new Error("No output type");return a&&c.some(d=>pm(a,d.type))?new Nb(Yt,c):new Nb(i,c)}evaluate(t){let n=null,i=0,a;for(const c of this.args)if(i++,n=c.evaluate(t),n&&n instanceof $d&&!n.available&&(a||(a=n.name),n=null,i===this.args.length&&(n=a)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};function FE(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function e8(e,t,n){return t===n}function t8(e,t,n){return t!==n}function n8(e,t,n){return t<n}function r8(e,t,n){return t>n}function i8(e,t,n){return t<=n}function o8(e,t,n){return t>=n}function _M(e,t,n,i){return i.compare(t,n)===0}function a8(e,t,n,i){return!_M(e,t,n,i)}function s8(e,t,n,i){return i.compare(t,n)<0}function l8(e,t,n,i){return i.compare(t,n)>0}function u8(e,t,n,i){return i.compare(t,n)<=0}function c8(e,t,n,i){return i.compare(t,n)>=0}function Od(e,t,n){const i=e!=="=="&&e!=="!=";return class xM{constructor(c,d,u){this.type=Xt,this.lhs=c,this.rhs=d,this.collator=u,this.hasUntypedArgument=c.type.kind==="value"||d.type.kind==="value"}static parse(c,d){if(c.length!==3&&c.length!==4)return d.error("Expected two or three arguments.");const u=c[0];let b=d.parse(c[1],1,Yt);if(!b)return null;if(!FE(u,b.type))return d.concat(1).error(`"${u}" comparisons are not supported for type '${Cr(b.type)}'.`);let w=d.parse(c[2],2,Yt);if(!w)return null;if(!FE(u,w.type))return d.concat(2).error(`"${u}" comparisons are not supported for type '${Cr(w.type)}'.`);if(b.type.kind!==w.type.kind&&b.type.kind!=="value"&&w.type.kind!=="value")return d.error(`Cannot compare types '${Cr(b.type)}' and '${Cr(w.type)}'.`);i&&(b.type.kind==="value"&&w.type.kind!=="value"?b=new Wa(w.type,[b]):b.type.kind!=="value"&&w.type.kind==="value"&&(w=new Wa(b.type,[w])));let I=null;if(c.length===4){if(b.type.kind!=="string"&&w.type.kind!=="string"&&b.type.kind!=="value"&&w.type.kind!=="value")return d.error("Cannot use collator to compare non-string types.");if(I=d.parse(c[3],3,bv),!I)return null}return new xM(b,w,I)}evaluate(c){const d=this.lhs.evaluate(c),u=this.rhs.evaluate(c);if(i&&this.hasUntypedArgument){const b=oi(d),w=oi(u);if(b.kind!==w.kind||!(b.kind==="string"||b.kind==="number"))throw new Wr(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${b.kind}, ${w.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const b=oi(d),w=oi(u);if(b.kind!=="string"||w.kind!=="string")return t(c,d,u)}return this.collator?n(c,d,u,this.collator.evaluate(c)):t(c,d,u)}eachChild(c){c(this.lhs),c(this.rhs),this.collator&&c(this.collator)}outputDefined(){return!0}}}const h8=Od("==",e8,_M),d8=Od("!=",t8,a8),p8=Od("<",n8,s8),f8=Od(">",r8,l8),m8=Od("<=",i8,u8),g8=Od(">=",o8,c8);let bM=class wM{constructor(t,n,i){this.type=bv,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const i=t[1];if(typeof i!="object"||Array.isArray(i))return n.error("Collator options argument must be an object.");const a=n.parse(i["case-sensitive"]===void 0?!1:i["case-sensitive"],1,Xt);if(!a)return null;const c=n.parse(i["diacritic-sensitive"]===void 0?!1:i["diacritic-sensitive"],1,Xt);if(!c)return null;let d=null;return i.locale&&(d=n.parse(i.locale,1,ln),!d)?null:new wM(a,c,d)}evaluate(t){return new S2(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}},y8=class SM{constructor(t,n,i,a,c){this.type=ln,this.number=t,this.locale=n,this.currency=i,this.minFractionDigits=a,this.maxFractionDigits=c}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const i=n.parse(t[1],1,ot);if(!i)return null;const a=t[2];if(typeof a!="object"||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");let c=null;if(a.locale&&(c=n.parse(a.locale,1,ln),!c))return null;let d=null;if(a.currency&&(d=n.parse(a.currency,1,ln),!d))return null;let u=null;if(a["min-fraction-digits"]&&(u=n.parse(a["min-fraction-digits"],1,ot),!u))return null;let b=null;return a["max-fraction-digits"]&&(b=n.parse(a["max-fraction-digits"],1,ot),!b)?null:new SM(i,c,d,u,b)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}},v8=class CM{constructor(t){this.type=wv,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const i=t[1];if(!Array.isArray(i)&&typeof i=="object")return n.error("First argument must be an image or text section.");const a=[];let c=!1;for(let d=1;d<=t.length-1;++d){const u=t[d];if(c&&typeof u=="object"&&!Array.isArray(u)){c=!1;let b=null;if(u["font-scale"]&&(b=n.parse(u["font-scale"],1,ot),!b))return null;let w=null;if(u["text-font"]&&(w=n.parse(u["text-font"],1,Go(ln)),!w))return null;let I=null;if(u["text-color"]&&(I=n.parse(u["text-color"],1,bs),!I))return null;const k=a[a.length-1];k.scale=b,k.font=w,k.textColor=I}else{const b=n.parse(t[d],1,Yt);if(!b)return null;const w=b.type.kind;if(w!=="string"&&w!=="value"&&w!=="null"&&w!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");c=!0,a.push({content:b,scale:null,font:null,textColor:null})}}return new CM(a)}evaluate(t){const n=i=>{const a=i.content.evaluate(t);return oi(a)===Om?new $b("",a,null,null,null):new $b(Nf(a),null,i.scale?i.scale.evaluate(t):null,i.font?i.font.evaluate(t).join(","):null,i.textColor?i.textColor.evaluate(t):null)};return new Fm(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}outputDefined(){return!1}},_8=class kM{constructor(t){this.type=Om,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const i=n.parse(t[1],1,ln);return i?new kM(i):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),i=$d.fromString(n);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(n)>-1),i}eachChild(t){t(this.input)}outputDefined(){return!1}},x8=class EM{constructor(t){this.type=ot,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const i=n.parse(t[1],1);return i?i.type.kind!=="array"&&i.type.kind!=="string"&&i.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${Cr(i.type)} instead.`):new EM(i):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Wr(`Expected value to be of type string or array, but found ${Cr(oi(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}};const Ss=8192;function b8(e,t){const n=w8(e[0]),i=C8(e[1]),a=Math.pow(2,t.z);return[Math.round(n*a*Ss),Math.round(i*a*Ss)]}function C2(e,t){const n=Math.pow(2,t.z),i=(e[0]/Ss+t.x)/n,a=(e[1]/Ss+t.y)/n;return[S8(i),k8(a)]}function w8(e){return(180+e)/360}function S8(e){return e*360-180}function C8(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function k8(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function Bm(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function mm(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function E8(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function T8(e,t,n){const i=e[0]-t[0],a=e[1]-t[1],c=e[0]-n[0],d=e[1]-n[1];return i*d-c*a===0&&i*c<=0&&a*d<=0}function kv(e,t,n,i){const a=[t[0]-e[0],t[1]-e[1]],c=[i[0]-n[0],i[1]-n[1]];return A8(c,a)===0?!1:!!(BE(e,t,n,i)&&BE(n,i,e,t))}function I8(e,t,n){for(const i of n)for(let a=0;a<i.length-1;++a)if(kv(e,t,i[a],i[a+1]))return!0;return!1}function Fd(e,t,n=!1){let i=!1;for(const a of t)for(let c=0;c<a.length-1;c++){if(T8(e,a[c],a[c+1]))return n;E8(e,a[c],a[c+1])&&(i=!i)}return i}function P8(e,t){for(const n of t)if(Fd(e,n))return!0;return!1}function TM(e,t){for(const n of e)if(!Fd(n,t))return!1;for(let n=0;n<e.length-1;++n)if(I8(e[n],e[n+1],t))return!1;return!0}function M8(e,t){for(const n of t)if(TM(e,n))return!0;return!1}function A8(e,t){return e[0]*t[1]-e[1]*t[0]}function BE(e,t,n,i){const a=e[0]-n[0],c=e[1]-n[1],d=t[0]-n[0],u=t[1]-n[1],b=i[0]-n[0],w=i[1]-n[1],I=a*w-b*c,k=d*w-b*u;return I>0&&k<0||I<0&&k>0}function k2(e,t,n){const i=[];for(let a=0;a<e.length;a++){const c=[];for(let d=0;d<e[a].length;d++){const u=b8(e[a][d],n);Bm(t,u),c.push(u)}i.push(c)}return i}function IM(e,t,n){const i=[];for(let a=0;a<e.length;a++){const c=k2(e[a],t,n);i.push(c)}return i}function PM(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const a=i*.5;let c=e[0]-n[0]>a?-i:n[0]-e[0]>a?i:0;c===0&&(c=e[0]-n[2]>a?-i:n[2]-e[0]>a?i:0),e[0]+=c}Bm(t,e)}function L8(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function NE(e,t,n,i){const a=Math.pow(2,i.z)*Ss,c=[i.x*Ss,i.y*Ss],d=[];for(const u of e)for(const b of u){const w=[b.x+c[0],b.y+c[1]];PM(w,t,n,a),d.push(w)}return d}function jE(e,t,n,i){const a=Math.pow(2,i.z)*Ss,c=[i.x*Ss,i.y*Ss],d=[];for(const u of e){const b=[];for(const w of u){const I=[w.x+c[0],w.y+c[1]];Bm(t,I),b.push(I)}d.push(b)}if(t[2]-t[0]<=a/2){L8(t);for(const u of d)for(const b of u)PM(b,t,n,a)}return d}function z8(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const c=k2(t.coordinates,i,a),d=NE(e.geometry(),n,i,a);if(!mm(n,i))return!1;for(const u of d)if(!Fd(u,c))return!1}if(t.type==="MultiPolygon"){const c=IM(t.coordinates,i,a),d=NE(e.geometry(),n,i,a);if(!mm(n,i))return!1;for(const u of d)if(!P8(u,c))return!1}return!0}function R8(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const c=k2(t.coordinates,i,a),d=jE(e.geometry(),n,i,a);if(!mm(n,i))return!1;for(const u of d)if(!TM(u,c))return!1}if(t.type==="MultiPolygon"){const c=IM(t.coordinates,i,a),d=jE(e.geometry(),n,i,a);if(!mm(n,i))return!1;for(const u of d)if(!M8(u,c))return!1}return!0}class _c{constructor(t,n){this.type=Xt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fm(t[1])){const i=t[1];if(i.type==="FeatureCollection"){const a=[];for(const c of i.features){const{type:d,coordinates:u}=c.geometry;d==="Polygon"&&a.push(u),d==="MultiPolygon"&&a.push(...u)}if(a.length){const c={type:"MultiPolygon",coordinates:a};return new _c(i,c)}}else if(i.type==="Feature"){const a=i.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new _c(i,i.geometry)}else if(i.type==="Polygon"||i.type==="MultiPolygon")return new _c(i,i)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return z8(t,this.geometries);if(t.geometryType()==="LineString")return R8(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let MM=class{constructor(t=[],n=(i,a)=>i<a?-1:i>a?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:i}=this,a=n[t];for(;t>0;){const c=t-1>>1,d=n[c];if(i(a,d)>=0)break;n[t]=d,t=c}n[t]=a}_down(t){const{data:n,compare:i}=this,a=this.length>>1,c=n[t];for(;t<a;){let d=(t<<1)+1;const u=d+1;if(u<this.length&&i(n[u],n[d])<0&&(d=u),i(n[d],c)>=0)break;n[t]=n[d],t=d}n[t]=c}};function D8(e,t){if(e.length<=1)return[e];const n=[];let i,a;for(const c of e){const d=$8(c);d!==0&&(c.area=Math.abs(d),a===void 0&&(a=d<0),a===d<0?(i&&n.push(i),i=[c]):i.push(c))}return i&&n.push(i),n}function $8(e){let t=0;for(let n=0,i=e.length,a=i-1,c,d;n<i;a=n++)c=e[n],d=e[a],t+=(d.x-c.x)*(c.y+d.y);return t}const O8=6378.137,UE=1/298.257223563,VE=UE*(2-UE),WE=Math.PI/180;let E2=class{constructor(t){const n=WE*O8*1e3,i=Math.cos(t*WE),a=1/(1-VE*(1-i*i)),c=Math.sqrt(a);this.kx=n*c*i,this.ky=n*c*a*(1-VE)}distance(t,n){const i=this.wrap(t[0]-n[0])*this.kx,a=(t[1]-n[1])*this.ky;return Math.sqrt(i*i+a*a)}pointOnLine(t,n){let i=1/0,a,c,d,u;for(let b=0;b<t.length-1;b++){let w=t[b][0],I=t[b][1],k=this.wrap(t[b+1][0]-w)*this.kx,P=(t[b+1][1]-I)*this.ky,R=0;(k!==0||P!==0)&&(R=(this.wrap(n[0]-w)*this.kx*k+(n[1]-I)*this.ky*P)/(k*k+P*P),R>1?(w=t[b+1][0],I=t[b+1][1]):R>0&&(w+=k/this.kx*R,I+=P/this.ky*R)),k=this.wrap(n[0]-w)*this.kx,P=(n[1]-I)*this.ky;const N=k*k+P*P;N<i&&(i=N,a=w,c=I,d=b,u=R)}return{point:[a,c],index:d,t:Math.max(0,Math.min(1,u))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}};const jb=100,Ub=50;function AM(e,t){return t[0]-e[0]}function A0(e){return e[1]-e[0]+1}function ol(e,t){return e[1]>=e[0]&&e[1]<t}function Vb(e,t){if(e[0]>e[1])return[null,null];const n=A0(e);if(t){if(n===2)return[e,null];const a=Math.floor(n/2);return[[e[0],e[0]+a],[e[0]+a,e[1]]]}if(n===1)return[e,null];const i=Math.floor(n/2)-1;return[[e[0],e[0]+i],[e[0]+i+1,e[1]]]}function Wb(e,t){if(!ol(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=t[0];i<=t[1];++i)Bm(n,e[i]);return n}function qb(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const i of n)Bm(t,i);return t}function qE(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function T2(e,t,n){if(!qE(e)||!qE(t))return NaN;let i=0,a=0;return e[2]<t[0]&&(i=t[0]-e[2]),e[0]>t[2]&&(i=e[0]-t[2]),e[1]>t[3]&&(a=e[1]-t[3]),e[3]<t[1]&&(a=t[1]-e[3]),n.distance([0,0],[i,a])}function cc(e,t,n){const i=n.pointOnLine(t,e);return n.distance(e,i.point)}function I2(e,t,n,i,a){const c=Math.min(cc(e,[n,i],a),cc(t,[n,i],a)),d=Math.min(cc(n,[e,t],a),cc(i,[e,t],a));return Math.min(c,d)}function F8(e,t,n,i,a){if(!(ol(t,e.length)&&ol(i,n.length)))return 1/0;let c=1/0;for(let d=t[0];d<t[1];++d){const u=e[d],b=e[d+1];for(let w=i[0];w<i[1];++w){const I=n[w],k=n[w+1];if(kv(u,b,I,k))return 0;c=Math.min(c,I2(u,b,I,k,a))}}return c}function B8(e,t,n,i,a){if(!(ol(t,e.length)&&ol(i,n.length)))return NaN;let c=1/0;for(let d=t[0];d<=t[1];++d)for(let u=i[0];u<=i[1];++u)if(c=Math.min(c,a.distance(e[d],n[u])),c===0)return c;return c}function N8(e,t,n){if(Fd(e,t,!0))return 0;let i=1/0;for(const a of t){const c=a[0],d=a[a.length-1];if(c!==d&&(i=Math.min(i,cc(e,[d,c],n)),i===0))return i;const u=n.pointOnLine(a,e);if(i=Math.min(i,n.distance(e,u.point)),i===0)return i}return i}function j8(e,t,n,i){if(!ol(t,e.length))return NaN;for(let c=t[0];c<=t[1];++c)if(Fd(e[c],n,!0))return 0;let a=1/0;for(let c=t[0];c<t[1];++c){const d=e[c],u=e[c+1];for(const b of n)for(let w=0,I=b.length,k=I-1;w<I;k=w++){const P=b[k],R=b[w];if(kv(d,u,P,R))return 0;a=Math.min(a,I2(d,u,P,R,i))}}return a}function HE(e,t){for(const n of e)for(const i of n)if(Fd(i,t,!0))return!0;return!1}function U8(e,t,n,i=1/0){const a=qb(e),c=qb(t);if(i!==1/0&&T2(a,c,n)>=i)return i;if(mm(a,c)){if(HE(e,t))return 0}else if(HE(t,e))return 0;let d=1/0;for(const u of e)for(let b=0,w=u.length,I=w-1;b<w;I=b++){const k=u[I],P=u[b];for(const R of t)for(let N=0,V=R.length,X=V-1;N<V;X=N++){const D=R[X],B=R[N];if(kv(k,P,D,B))return 0;d=Math.min(d,I2(k,P,D,B,n))}}return d}function GE(e,t,n,i,a,c){if(!c)return;const d=T2(Wb(i,c),a,n);d<t&&e.push([d,c,[0,0]])}function xy(e,t,n,i,a,c,d){if(!c||!d)return;const u=T2(Wb(i,c),Wb(a,d),n);u<t&&e.push([u,c,d])}function L0(e,t,n,i,a=1/0){let c=Math.min(i.distance(e[0],n[0][0]),a);if(c===0)return c;const d=new MM([[0,[0,e.length-1],[0,0]]],AM),u=qb(n);for(;d.length>0;){const b=d.pop();if(b[0]>=c)continue;const w=b[1],I=t?Ub:jb;if(A0(w)<=I){if(!ol(w,e.length))return NaN;if(t){const k=j8(e,w,n,i);if(isNaN(k)||k===0)return k;c=Math.min(c,k)}else for(let k=w[0];k<=w[1];++k){const P=N8(e[k],n,i);if(c=Math.min(c,P),c===0)return 0}}else{const k=Vb(w,t);GE(d,c,i,e,u,k[0]),GE(d,c,i,e,u,k[1])}}return c}function z0(e,t,n,i,a,c=1/0){let d=Math.min(c,a.distance(e[0],n[0]));if(d===0)return d;const u=new MM([[0,[0,e.length-1],[0,n.length-1]]],AM);for(;u.length>0;){const b=u.pop();if(b[0]>=d)continue;const w=b[1],I=b[2],k=t?Ub:jb,P=i?Ub:jb;if(A0(w)<=k&&A0(I)<=P){if(!ol(w,e.length)&&ol(I,n.length))return NaN;let R;if(t&&i)R=F8(e,w,n,I,a),d=Math.min(d,R);else if(t&&!i){const N=e.slice(w[0],w[1]+1);for(let V=I[0];V<=I[1];++V)if(R=cc(n[V],N,a),d=Math.min(d,R),d===0)return d}else if(!t&&i){const N=n.slice(I[0],I[1]+1);for(let V=w[0];V<=w[1];++V)if(R=cc(e[V],N,a),d=Math.min(d,R),d===0)return d}else R=B8(e,w,n,I,a),d=Math.min(d,R)}else{const R=Vb(w,t),N=Vb(I,i);xy(u,d,a,e,n,R[0],N[0]),xy(u,d,a,e,n,R[0],N[1]),xy(u,d,a,e,n,R[1],N[0]),xy(u,d,a,e,n,R[1],N[1])}}return d}function V8(e,t){const n=e.geometry(),i=n.flat().map(d=>C2([d.x,d.y],e.canonical));if(n.length===0)return NaN;const a=new E2(i[0][1]);let c=1/0;for(const d of t){switch(d.type){case"Point":c=Math.min(c,z0(i,!1,[d.coordinates],!1,a,c));break;case"LineString":c=Math.min(c,z0(i,!1,d.coordinates,!0,a,c));break;case"Polygon":c=Math.min(c,L0(i,!1,d.coordinates,a,c));break}if(c===0)return c}return c}function W8(e,t){const n=e.geometry(),i=n.flat().map(d=>C2([d.x,d.y],e.canonical));if(n.length===0)return NaN;const a=new E2(i[0][1]);let c=1/0;for(const d of t){switch(d.type){case"Point":c=Math.min(c,z0(i,!0,[d.coordinates],!1,a,c));break;case"LineString":c=Math.min(c,z0(i,!0,d.coordinates,!0,a,c));break;case"Polygon":c=Math.min(c,L0(i,!0,d.coordinates,a,c));break}if(c===0)return c}return c}function q8(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const i=D8(n).map(d=>d.map(u=>u.map(b=>C2([b.x,b.y],e.canonical)))),a=new E2(i[0][0][0][1]);let c=1/0;for(const d of t)for(const u of i){switch(d.type){case"Point":c=Math.min(c,L0([d.coordinates],!1,u,a,c));break;case"LineString":c=Math.min(c,L0(d.coordinates,!0,u,a,c));break;case"Polygon":c=Math.min(c,U8(u,d.coordinates,a,c));break}if(c===0)return c}return c}function mx(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}let P2=class Hy{constructor(t,n){this.type=ot,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(fm(t[1])){const i=t[1];if(i.type==="FeatureCollection")return new Hy(i,i.features.map(a=>mx(a.geometry)).flat());if(i.type==="Feature")return new Hy(i,mx(i.geometry));if("type"in i&&"coordinates"in i)return new Hy(i,mx(i))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return V8(t,this.geometries);if(t.geometryType()==="LineString")return W8(t,this.geometries);if(t.geometryType()==="Polygon")return q8(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}};const M2={"==":h8,"!=":d8,">":f8,"<":p8,">=":g8,"<=":m8,array:Wa,at:UO,boolean:Wa,case:HO,coalesce:vM,collator:bM,format:v8,image:_8,in:VO,"index-of":WO,interpolate:vc,"interpolate-hcl":vc,"interpolate-lab":vc,length:x8,let:aM,literal:Ed,match:qO,number:Wa,"number-format":y8,object:Wa,slice:GO,step:mM,string:Wa,"to-boolean":ed,"to-color":ed,"to-number":ed,"to-string":ed,var:lM,within:_c,distance:P2};class qa{constructor(t,n,i,a){this.name=t,this.type=n,this._evaluate=i,this.args=a}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const i=t[0],a=qa.definitions[i];if(!a)return n.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0);const c=Array.isArray(a)?a[0]:a.type,d=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=d.filter(([w])=>!Array.isArray(w)||w.length===t.length-1);let b=null;for(const[w,I]of u){b=new iM(n.registry,R0,n.path,null,n.scope);const k=[];let P=!1;for(let R=1;R<t.length;R++){const N=t[R],V=Array.isArray(w)?w[R-1]:w.type,X=b.parse(N,1+k.length,V);if(!X){P=!0;break}k.push(X)}if(!P){if(Array.isArray(w)&&w.length!==k.length){b.error(`Expected ${w.length} arguments, but found ${k.length} instead.`);continue}for(let R=0;R<k.length;R++){const N=Array.isArray(w)?w[R]:w.type,V=k[R];b.concat(R+1).checkSubtype(N,V.type)}if(b.errors.length===0)return new qa(i,c,I,k)}}if(u.length===1)n.errors.push(...b.errors);else{const w=(u.length?u:d).map(([k])=>G8(k)).join(" | "),I=[];for(let k=1;k<t.length;k++){const P=n.parse(t[k],1+I.length);if(!P)return null;I.push(Cr(P.type))}n.error(`Expected arguments of type ${w}, but found (${I.join(", ")}) instead.`)}return null}static register(t,n){qa.definitions=n;for(const i in n)t[i]=qa}}function ZE(e,[t,n,i,a]){t=t.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const c=a?a.evaluate(e):1,d=tM(t,n,i,c);if(d)throw new Wr(d);return new kr(t/255,n/255,i/255,c,!1)}function KE(e,t){return e in t}function gx(e,t){const n=t[e];return typeof n>"u"?null:n}function H8(e,t,n,i){for(;n<=i;){const a=n+i>>1;if(t[a]===e)return!0;t[a]>e?i=a-1:n=a+1}return!1}function Yu(e){return{type:e}}qa.register(M2,{error:[MO,[ln],(e,[t])=>{throw new Wr(t.evaluate(e))}],typeof:[ln,[Yt],(e,[t])=>Cr(oi(t.evaluate(e)))],"to-rgba":[Go(ot,4),[bs],(e,[t])=>{const[n,i,a,c]=t.evaluate(e).rgb;return[n*255,i*255,a*255,c]}],rgb:[bs,[ot,ot,ot],ZE],rgba:[bs,[ot,ot,ot,ot],ZE],has:{type:Xt,overloads:[[[ln],(e,[t])=>KE(t.evaluate(e),e.properties())],[[ln,pd],(e,[t,n])=>KE(t.evaluate(e),n.evaluate(e))]]},get:{type:Yt,overloads:[[[ln],(e,[t])=>gx(t.evaluate(e),e.properties())],[[ln,pd],(e,[t,n])=>gx(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Yt,[ln],(e,[t])=>gx(t.evaluate(e),e.featureState||{})],properties:[pd,[],e=>e.properties()],"geometry-type":[ln,[],e=>e.geometryType()],id:[Yt,[],e=>e.id()],zoom:[ot,[],e=>e.globals.zoom],"heatmap-density":[ot,[],e=>e.globals.heatmapDensity||0],"line-progress":[ot,[],e=>e.globals.lineProgress||0],accumulated:[Yt,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[ot,Yu(ot),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[ot,Yu(ot),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:ot,overloads:[[[ot,ot],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ot],(e,[t])=>-t.evaluate(e)]]},"/":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ot,[ot],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))],log2:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ot,[ot],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ot,[ot],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ot,[ot],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ot,[ot],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ot,[ot],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ot,[ot],(e,[t])=>Math.atan(t.evaluate(e))],min:[ot,Yu(ot),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[ot,Yu(ot),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[ot,[ot],(e,[t])=>Math.abs(t.evaluate(e))],round:[ot,[ot],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ot,[ot],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ot,[ot],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Xt,[ln,Yt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Xt,[Yt],(e,[t])=>e.id()===t.value],"filter-type-==":[Xt,[ln],(e,[t])=>e.geometryType()===t.value],"filter-<":[Xt,[ln,Yt],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<a}],"filter-id-<":[Xt,[Yt],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<i}],"filter->":[Xt,[ln,Yt],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>a}],"filter-id->":[Xt,[Yt],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>i}],"filter-<=":[Xt,[ln,Yt],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[Xt,[Yt],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<=i}],"filter->=":[Xt,[ln,Yt],(e,[t,n])=>{const i=e.properties()[t.value],a=n.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[Xt,[Yt],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>=i}],"filter-has":[Xt,[Yt],(e,[t])=>t.value in e.properties()],"filter-has-id":[Xt,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Xt,[Go(ln)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Xt,[Go(Yt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Xt,[ln,Go(Yt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Xt,[ln,Go(Yt)],(e,[t,n])=>H8(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Xt,overloads:[[[Xt,Xt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Yu(Xt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Yu(Xt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Xt,[Xt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Xt,[ln],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[ln,[ln],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[ln,[ln],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[ln,Yu(Yt),(e,t)=>t.map(n=>Nf(n.evaluate(e))).join("")],"resolved-locale":[ln,[bv],(e,[t])=>t.evaluate(e).resolvedLocale()]});function G8(e){return Array.isArray(e)?`(${e.map(Cr).join(", ")})`:`(${Cr(e.type)}...)`}function R0(e){if(e instanceof lM)return R0(e.boundExpression);if(e instanceof qa&&e.name==="error"||e instanceof bM||e instanceof _c||e instanceof P2)return!1;const t=e instanceof ed||e instanceof Wa;let n=!0;return e.eachChild(i=>{t?n=n&&R0(i):n=n&&i instanceof Ed}),n?Ev(e)&&Tv(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ev(e){if(e instanceof qa&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof _c||e instanceof P2)return!1;let t=!0;return e.eachChild(n=>{t&&!Ev(n)&&(t=!1)}),t}function gm(e){if(e instanceof qa&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!gm(n)&&(t=!1)}),t}function Tv(e,t){if(e instanceof qa&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(i=>{n&&!Tv(i,t)&&(n=!1)}),n}function Hb(e){return{result:"success",value:e}}function Fh(e){return{result:"error",value:e}}function D0(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function LM(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function zM(e){return!!e.expression&&e.expression.interpolated}function Fn(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function A2(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class Z8{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new rM,this._defaultValue=n?Y8(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,i,a,c,d){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=i,this._evaluator.canonical=a,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)}evaluate(t,n,i,a,c,d){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=i||null,this._evaluator.canonical=a,this._evaluator.availableImages=c||null,this._evaluator.formattedSection=d||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Wr(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"&&console.warn(u.message)),this._defaultValue}}}function RM(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in M2}function DM(e,t){const n=new iM(M2,R0,[],t?X8(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return i?Hb(new Z8(i,t)):Fh(n.errors)}class XE{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!gm(n.expression)}evaluateWithoutErrorHandling(t,n,i,a,c,d){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,a,c,d)}evaluate(t,n,i,a,c,d){return this._styleExpression.evaluate(t,n,i,a,c,d)}}let YE=class{constructor(t,n,i,a){this.kind=t,this.zoomStops=i,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!gm(n.expression),this.interpolationType=a}evaluateWithoutErrorHandling(t,n,i,a,c,d){return this._styleExpression.evaluateWithoutErrorHandling(t,n,i,a,c,d)}evaluate(t,n,i,a,c,d){return this._styleExpression.evaluate(t,n,i,a,c,d)}interpolationFactor(t,n,i){return this.interpolationType?vc.interpolationFactor(this.interpolationType,t,n,i):0}};function K8(e,t){const n=DM(e,t);if(n.result==="error")return n;const i=n.value.expression,a=Ev(i);if(!a&&!D0(t))return Fh([new ms("","data expressions not supported")]);const c=Tv(i,["zoom"]);if(!c&&!LM(t))return Fh([new ms("","zoom expressions not supported")]);const d=Gy(i);if(!d&&!c)return Fh([new ms("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(d instanceof ms)return Fh([d]);if(d instanceof vc&&!zM(t))return Fh([new ms("",'"interpolate" expressions cannot be used with this property')]);if(!d)return Hb(a?new XE("constant",n.value):new XE("source",n.value));const u=d instanceof vc?d.interpolation:void 0;return Hb(a?new YE("camera",n.value,d.labels,u):new YE("composite",n.value,d.labels,u))}function Gy(e){let t=null;if(e instanceof aM)t=Gy(e.result);else if(e instanceof vM){for(const n of e.args)if(t=Gy(n),t)break}else(e instanceof mM||e instanceof vc)&&e.input instanceof qa&&e.input.name==="zoom"&&(t=e);return t instanceof ms||e.eachChild(n=>{const i=Gy(n);i instanceof ms?t=i:!t&&i?t=new ms("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new ms("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function X8(e){const t={color:bs,string:ln,number:ot,enum:ln,boolean:Xt,formatted:wv,padding:Sv,resolvedImage:Om,variableAnchorOffsetCollection:Cv};return e.type==="array"?Go(t[e.value]||Yt,e.length):t[e.type]}function Y8(e){return e.type==="color"&&A2(e.default)?new kr(0,0,0,0):e.type==="color"?kr.parse(e.default)||null:e.type==="padding"?ws.parse(e.default)||null:e.type==="variableAnchorOffsetCollection"?il.parse(e.default)||null:e.default===void 0?null:e.default}function $M(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!$M(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function OM(e){const t=e.key,n=e.value;return n?[new rt(t,n,"constants have been deprecated as of v8")]:[]}function Nr(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Ec(e){if(Array.isArray(e))return e.map(Ec);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Ec(e[n]);return t}return Nr(e)}function wa(e){const t=e.key,n=e.value,i=e.valueSpec||{},a=e.objectElementValidators||{},c=e.style,d=e.styleSpec,u=e.validateSpec;let b=[];const w=Fn(n);if(w!=="object")return[new rt(t,n,`object expected, ${w} found`)];for(const I in n){const k=I.split(".")[0],P=i[k]||i["*"];let R;if(a[k])R=a[k];else if(i[k])R=u;else if(a["*"])R=a["*"];else if(i["*"])R=u;else{b.push(new rt(t,n[I],`unknown property "${I}"`));continue}b=b.concat(R({key:(t&&`${t}.`)+I,value:n[I],valueSpec:P,style:c,styleSpec:d,object:n,objectKey:I,validateSpec:u},n))}for(const I in i)a[I]||i[I].required&&i[I].default===void 0&&n[I]===void 0&&b.push(new rt(t,n,`missing required property "${I}"`));return b}function L2(e){const t=e.value,n=e.valueSpec,i=e.validateSpec,a=e.style,c=e.styleSpec,d=e.key,u=e.arrayElementValidator||i;if(Fn(t)!=="array")return[new rt(d,t,`array expected, ${Fn(t)} found`)];if(n.length&&t.length!==n.length)return[new rt(d,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new rt(d,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let b={type:n.value,values:n.values};c.$version<7&&(b.function=n.function),Fn(n.value)==="object"&&(b=n.value);let w=[];for(let I=0;I<t.length;I++)w=w.concat(u({array:t,arrayIndex:I,value:t[I],valueSpec:b,validateSpec:e.validateSpec,style:a,styleSpec:c,key:`${d}[${I}]`}));return w}function z2(e){const t=e.key,n=e.value,i=e.valueSpec;let a=Fn(n);return a==="number"&&n!==n&&(a="NaN"),a!=="number"?[new rt(t,n,`number expected, ${a} found`)]:"minimum"in i&&n<i.minimum?[new rt(t,n,`${n} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&n>i.maximum?[new rt(t,n,`${n} is greater than the maximum value ${i.maximum}`)]:[]}function FM(e){const t=e.valueSpec,n=Nr(e.value.type);let i,a={},c,d;const u=n!=="categorical"&&e.value.property===void 0,b=!u,w=Fn(e.value.stops)==="array"&&Fn(e.value.stops[0])==="array"&&Fn(e.value.stops[0][0])==="object",I=wa({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:k,default:N}});return n==="identity"&&u&&I.push(new rt(e.key,e.value,'missing required property "property"')),n!=="identity"&&!e.value.stops&&I.push(new rt(e.key,e.value,'missing required property "stops"')),n==="exponential"&&e.valueSpec.expression&&!zM(e.valueSpec)&&I.push(new rt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(b&&!D0(e.valueSpec)?I.push(new rt(e.key,e.value,"property functions not supported")):u&&!LM(e.valueSpec)&&I.push(new rt(e.key,e.value,"zoom functions not supported"))),(n==="categorical"||w)&&e.value.property===void 0&&I.push(new rt(e.key,e.value,'"property" property is required')),I;function k(V){if(n==="identity")return[new rt(V.key,V.value,'identity function may not have a "stops" property')];let X=[];const D=V.value;return X=X.concat(L2({key:V.key,value:D,valueSpec:V.valueSpec,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,arrayElementValidator:P})),Fn(D)==="array"&&D.length===0&&X.push(new rt(V.key,D,"array must have at least one stop")),X}function P(V){let X=[];const D=V.value,B=V.key;if(Fn(D)!=="array")return[new rt(B,D,`array expected, ${Fn(D)} found`)];if(D.length!==2)return[new rt(B,D,`array length 2 expected, length ${D.length} found`)];if(w){if(Fn(D[0])!=="object")return[new rt(B,D,`object expected, ${Fn(D[0])} found`)];if(D[0].zoom===void 0)return[new rt(B,D,"object stop key must have zoom")];if(D[0].value===void 0)return[new rt(B,D,"object stop key must have value")];if(d&&d>Nr(D[0].zoom))return[new rt(B,D[0].zoom,"stop zoom values must appear in ascending order")];Nr(D[0].zoom)!==d&&(d=Nr(D[0].zoom),c=void 0,a={}),X=X.concat(wa({key:`${B}[0]`,value:D[0],valueSpec:{zoom:{}},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec,objectElementValidators:{zoom:z2,value:R}}))}else X=X.concat(R({key:`${B}[0]`,value:D[0],valueSpec:{},validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec},D));return RM(Ec(D[1]))?X.concat([new rt(`${B}[1]`,D[1],"expressions are not allowed in function stops.")]):X.concat(V.validateSpec({key:`${B}[1]`,value:D[1],valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec}))}function R(V,X){const D=Fn(V.value),B=Nr(V.value),j=V.value!==null?V.value:X;if(!i)i=D;else if(D!==i)return[new rt(V.key,j,`${D} stop domain type must match previous stop domain type ${i}`)];if(D!=="number"&&D!=="string"&&D!=="boolean")return[new rt(V.key,j,"stop domain value must be a number, string, or boolean")];if(D!=="number"&&n!=="categorical"){let G=`number expected, ${D} found`;return D0(t)&&n===void 0&&(G+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(V.key,j,G)]}return n==="categorical"&&D==="number"&&(!isFinite(B)||Math.floor(B)!==B)?[new rt(V.key,j,`integer expected, found ${B}`)]:n!=="categorical"&&D==="number"&&c!==void 0&&B<c?[new rt(V.key,j,"stop domain values must appear in ascending order")]:(c=B,n==="categorical"&&B in a?[new rt(V.key,j,"stop domain values must be unique")]:(a[B]=!0,[]))}function N(V){return V.validateSpec({key:V.key,value:V.value,valueSpec:t,validateSpec:V.validateSpec,style:V.style,styleSpec:V.styleSpec})}}function Td(e){const t=(e.expressionContext==="property"?K8:DM)(Ec(e.value),e.valueSpec);if(t.result==="error")return t.value.map(i=>new rt(`${e.key}${i.key}`,e.value,i.message));const n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new rt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!gm(n))return[new rt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!gm(n))return[new rt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!Tv(n,["zoom","feature-state"]))return[new rt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Ev(n))return[new rt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function J8(e){const t=e.value,n=e.key,i=Fn(t);return i!=="boolean"?[new rt(n,t,`boolean expected, ${i} found`)]:[]}function Q8(e){const t=e.key,n=e.value,i=Fn(n);return i!=="string"?[new rt(t,n,`color expected, ${i} found`)]:kr.parse(String(n))?[]:[new rt(t,n,`color expected, "${n}" found`)]}function ym(e){const t=e.key,n=e.value,i=e.valueSpec,a=[];return Array.isArray(i.values)?i.values.indexOf(Nr(n))===-1&&a.push(new rt(t,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(i.values).indexOf(Nr(n))===-1&&a.push(new rt(t,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),a}function R2(e){return $M(Ec(e.value))?Td(P0({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):BM(e)}function BM(e){const t=e.value,n=e.key;if(Fn(t)!=="array")return[new rt(n,t,`array expected, ${Fn(t)} found`)];const i=e.styleSpec;let a,c=[];if(t.length<1)return[new rt(n,t,"filter array must have at least 1 element")];switch(c=c.concat(ym({key:`${n}[0]`,value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),Nr(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&Nr(t[1])==="$type"&&c.push(new rt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&c.push(new rt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(a=Fn(t[1]),a!=="string"&&c.push(new rt(`${n}[1]`,t[1],`string expected, ${a} found`)));for(let d=2;d<t.length;d++)a=Fn(t[d]),Nr(t[1])==="$type"?c=c.concat(ym({key:`${n}[${d}]`,value:t[d],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):a!=="string"&&a!=="number"&&a!=="boolean"&&c.push(new rt(`${n}[${d}]`,t[d],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let d=1;d<t.length;d++)c=c.concat(BM({key:`${n}[${d}]`,value:t[d],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=Fn(t[1]),t.length!==2?c.push(new rt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):a!=="string"&&c.push(new rt(`${n}[1]`,t[1],`string expected, ${a} found`));break}return c}function NM(e,t){const n=e.key,i=e.validateSpec,a=e.style,c=e.styleSpec,d=e.value,u=e.objectKey,b=c[`${t}_${e.layerType}`];if(!b)return[];const w=u.match(/^(.*)-transition$/);if(t==="paint"&&w&&b[w[1]]&&b[w[1]].transition)return i({key:n,value:d,valueSpec:c.transition,style:a,styleSpec:c});const I=e.valueSpec||b[u];if(!I)return[new rt(n,d,`unknown property "${u}"`)];let k;if(Fn(d)==="string"&&D0(I)&&!I.tokens&&(k=/^{([^}]+)}$/.exec(d)))return[new rt(n,d,`"${u}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(k[1])} }\`.`)];const P=[];return e.layerType==="symbol"&&(u==="text-field"&&a&&!a.glyphs&&P.push(new rt(n,d,'use of "text-field" requires a style "glyphs" property')),u==="text-font"&&A2(Ec(d))&&Nr(d.type)==="identity"&&P.push(new rt(n,d,'"text-font" does not support identity functions'))),P.concat(i({key:e.key,value:d,valueSpec:I,style:a,styleSpec:c,expressionContext:"property",propertyType:t,propertyKey:u}))}function jM(e){return NM(e,"paint")}function UM(e){return NM(e,"layout")}function VM(e){let t=[];const n=e.value,i=e.key,a=e.style,c=e.styleSpec;!n.type&&!n.ref&&t.push(new rt(i,n,'either "type" or "ref" is required'));let d=Nr(n.type);const u=Nr(n.ref);if(n.id){const b=Nr(n.id);for(let w=0;w<e.arrayIndex;w++){const I=a.layers[w];Nr(I.id)===b&&t.push(new rt(i,n.id,`duplicate layer id "${n.id}", previously used at line ${I.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(w=>{w in n&&t.push(new rt(i,n[w],`"${w}" is prohibited for ref layers`))});let b;a.layers.forEach(w=>{Nr(w.id)===u&&(b=w)}),b?b.ref?t.push(new rt(i,n.ref,"ref cannot reference another ref layer")):d=Nr(b.type):t.push(new rt(i,n.ref,`ref layer "${u}" not found`))}else if(d!=="background")if(!n.source)t.push(new rt(i,n,'missing required property "source"'));else{const b=a.sources&&a.sources[n.source],w=b&&Nr(b.type);b?w==="vector"&&d==="raster"?t.push(new rt(i,n.source,`layer "${n.id}" requires a raster source`)):w!=="raster-dem"&&d==="hillshade"?t.push(new rt(i,n.source,`layer "${n.id}" requires a raster-dem source`)):w==="raster"&&d!=="raster"?t.push(new rt(i,n.source,`layer "${n.id}" requires a vector source`)):w==="vector"&&!n["source-layer"]?t.push(new rt(i,n,`layer "${n.id}" must specify a "source-layer"`)):w==="raster-dem"&&d!=="hillshade"?t.push(new rt(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):d==="line"&&n.paint&&n.paint["line-gradient"]&&(w!=="geojson"||!b.lineMetrics)&&t.push(new rt(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new rt(i,n.source,`source "${n.source}" not found`))}return t=t.concat(wa({key:i,value:n,valueSpec:c.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${i}.type`,value:n.type,valueSpec:c.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"})},filter:R2,layout(b){return wa({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return UM(P0({layerType:d},w))}}})},paint(b){return wa({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return jM(P0({layerType:d},w))}}})}}})),t}function Tc(e){const t=e.value,n=e.key,i=Fn(t);return i!=="string"?[new rt(n,t,`string expected, ${i} found`)]:[]}function eF(e){var t;const n=(t=e.sourceName)!==null&&t!==void 0?t:"",i=e.value,a=e.styleSpec,c=a.source_raster_dem,d=e.style;let u=[];const b=Fn(i);if(i===void 0)return u;if(b!=="object")return u.push(new rt("source_raster_dem",i,`object expected, ${b} found`)),u;const w=Nr(i.encoding)==="custom",I=["redFactor","greenFactor","blueFactor","baseShift"],k=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const P in i)!w&&I.includes(P)?u.push(new rt(P,i[P],`In "${n}": "${P}" is only valid when "encoding" is set to "custom". ${k} encoding found`)):c[P]?u=u.concat(e.validateSpec({key:P,value:i[P],valueSpec:c[P],validateSpec:e.validateSpec,style:d,styleSpec:a})):u.push(new rt(P,i[P],`unknown property "${P}"`));return u}const JE={promoteId:tF};function WM(e){const t=e.value,n=e.key,i=e.styleSpec,a=e.style,c=e.validateSpec;if(!t.type)return[new rt(n,t,'"type" is required')];const d=Nr(t.type);let u;switch(d){case"vector":case"raster":return u=wa({key:n,value:t,valueSpec:i[`source_${d.replace("-","_")}`],style:e.style,styleSpec:i,objectElementValidators:JE,validateSpec:c}),u;case"raster-dem":return u=eF({sourceName:n,value:t,style:e.style,styleSpec:i,validateSpec:c}),u;case"geojson":if(u=wa({key:n,value:t,valueSpec:i.source_geojson,style:a,styleSpec:i,validateSpec:c,objectElementValidators:JE}),t.cluster)for(const b in t.clusterProperties){const[w,I]=t.clusterProperties[b],k=typeof w=="string"?[w,["accumulated"],["get",b]]:w;u.push(...Td({key:`${n}.${b}.map`,value:I,validateSpec:c,expressionContext:"cluster-map"})),u.push(...Td({key:`${n}.${b}.reduce`,value:k,validateSpec:c,expressionContext:"cluster-reduce"}))}return u;case"video":return wa({key:n,value:t,valueSpec:i.source_video,style:a,validateSpec:c,styleSpec:i});case"image":return wa({key:n,value:t,valueSpec:i.source_image,style:a,validateSpec:c,styleSpec:i});case"canvas":return[new rt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ym({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,validateSpec:c,styleSpec:i})}}function tF({key:e,value:t}){if(Fn(t)==="string")return Tc({key:e,value:t});{const n=[];for(const i in t)n.push(...Tc({key:`${e}.${i}`,value:t[i]}));return n}}function qM(e){const t=e.value,n=e.styleSpec,i=n.light,a=e.style;let c=[];const d=Fn(t);if(t===void 0)return c;if(d!=="object")return c=c.concat([new rt("light",t,`object expected, ${d} found`)]),c;for(const u in t){const b=u.match(/^(.*)-transition$/);b&&i[b[1]]&&i[b[1]].transition?c=c.concat(e.validateSpec({key:u,value:t[u],valueSpec:n.transition,validateSpec:e.validateSpec,style:a,styleSpec:n})):i[u]?c=c.concat(e.validateSpec({key:u,value:t[u],valueSpec:i[u],validateSpec:e.validateSpec,style:a,styleSpec:n})):c=c.concat([new rt(u,t[u],`unknown property "${u}"`)])}return c}function HM(e){const t=e.value,n=e.styleSpec,i=n.sky,a=e.style,c=Fn(t);if(t===void 0)return[];if(c!=="object")return[new rt("sky",t,`object expected, ${c} found`)];let d=[];for(const u in t)i[u]?d=d.concat(e.validateSpec({key:u,value:t[u],valueSpec:i[u],style:a,styleSpec:n})):d=d.concat([new rt(u,t[u],`unknown property "${u}"`)]);return d}function GM(e){const t=e.value,n=e.styleSpec,i=n.terrain,a=e.style;let c=[];const d=Fn(t);if(t===void 0)return c;if(d!=="object")return c=c.concat([new rt("terrain",t,`object expected, ${d} found`)]),c;for(const u in t)i[u]?c=c.concat(e.validateSpec({key:u,value:t[u],valueSpec:i[u],validateSpec:e.validateSpec,style:a,styleSpec:n})):c=c.concat([new rt(u,t[u],`unknown property "${u}"`)]);return c}function nF(e){return Tc(e).length===0?[]:Td(e)}function rF(e){return Tc(e).length===0?[]:Td(e)}function iF(e){const t=e.key,n=e.value;if(Fn(n)==="array"){if(n.length<1||n.length>4)return[new rt(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const i={type:"number"};let a=[];for(let c=0;c<n.length;c++)a=a.concat(e.validateSpec({key:`${t}[${c}]`,value:n[c],validateSpec:e.validateSpec,valueSpec:i}));return a}else return z2({key:t,value:n,valueSpec:{}})}function oF(e){const t=e.key,n=e.value,i=Fn(n),a=e.styleSpec;if(i!=="array"||n.length<1||n.length%2!==0)return[new rt(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let c=[];for(let d=0;d<n.length;d+=2)c=c.concat(ym({key:`${t}[${d}]`,value:n[d],valueSpec:a.layout_symbol["text-anchor"]})),c=c.concat(L2({key:`${t}[${d+1}]`,value:n[d+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:a}));return c}function ZM(e){let t=[];const n=e.value,i=e.key;if(Array.isArray(n)){const a=[],c=[];for(const d in n){n[d].id&&a.includes(n[d].id)&&t.push(new rt(i,n,`all the sprites' ids must be unique, but ${n[d].id} is duplicated`)),a.push(n[d].id),n[d].url&&c.includes(n[d].url)&&t.push(new rt(i,n,`all the sprites' URLs must be unique, but ${n[d].url} is duplicated`)),c.push(n[d].url);const u={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(wa({key:`${i}[${d}]`,value:n[d],valueSpec:u,validateSpec:e.validateSpec}))}return t}else return Tc({key:i,value:n})}function aF(e){const t=e.value,n=e.styleSpec,i=n.projection,a=e.style,c=Fn(t);if(t===void 0)return[];if(c!=="object")return[new rt("projection",t,`object expected, ${c} found`)];let d=[];for(const u in t)i[u]?d=d.concat(e.validateSpec({key:u,value:t[u],valueSpec:i[u],style:a,styleSpec:n})):d=d.concat([new rt(u,t[u],`unknown property "${u}"`)]);return d}const QE={"*"(){return[]},array:L2,boolean:J8,number:z2,color:Q8,constants:OM,enum:ym,filter:R2,function:FM,layer:VM,object:wa,source:WM,light:qM,sky:HM,terrain:GM,projection:aF,string:Tc,formatted:nF,resolvedImage:rF,padding:iF,variableAnchorOffsetCollection:oF,sprite:ZM};function jf(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return e.validateSpec=jf,n.expression&&A2(Nr(t))?FM(e):n.expression&&RM(Ec(t))?Td(e):n.type&&QE[n.type]?QE[n.type](e):wa(P0({},e,{valueSpec:n.type?i[n.type]:n}))}function KM(e){const t=e.value,n=e.key,i=Tc(e);return i.length||(t.indexOf("{fontstack}")===-1&&i.push(new rt(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&i.push(new rt(n,t,'"glyphs" url must include a "{range}" token'))),i}function Ia(e,t=IO){let n=[];return n=n.concat(jf({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:jf,objectElementValidators:{glyphs:KM,"*"(){return[]}}})),e.constants&&(n=n.concat(OM({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:jf}))),XM(n)}Ia.source=Es(ks(WM));Ia.sprite=Es(ks(ZM));Ia.glyphs=Es(ks(KM));Ia.light=Es(ks(qM));Ia.sky=Es(ks(HM));Ia.terrain=Es(ks(GM));Ia.layer=Es(ks(VM));Ia.filter=Es(ks(R2));Ia.paintProperty=Es(ks(jM));Ia.layoutProperty=Es(ks(UM));function ks(e){return function(t){return e({...t,validateSpec:jf})}}function XM(e){return[].concat(e).sort((t,n)=>t.line-n.line)}function Es(e){return function(...t){return XM(e.apply(this,t))}}function eT(e){if(!e)return{style:ud[Bf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=lF(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:ud[Bf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:sF(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:y3(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof v3?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof _3?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:Ia(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:ud[Bf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function sF(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function lF(e){try{const t=JSON.parse(e),n=Ia(t);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}class uF{constructor(){On(this,"_map"),On(this,"_container"),On(this,"_terrainButton"),z$(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=dd("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=dd("button","maplibregl-ctrl-terrain",this._container),dd("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){W3(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class cF extends O${constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),On(this,"_rotateCompassArrow",()=>{const n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const i=super._createButton(t,n);return i.clickFunction=n,i}}const tT=It.Marker,nT=It.LngLat,hF=It.LngLatBounds;class dF extends F${constructor(){super(...arguments),On(this,"lastUpdatedCenter",new nT(0,0)),On(this,"_updateCamera",t=>{var n,i;const a=new nT(t.coords.longitude,t.coords.latitude),c=t.coords.accuracy,d={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},u=this._map.getZoom();u>(((i=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:i.maxZoom)??30)&&(d.zoom=u),this._map.fitBounds(hF.fromLngLat(a,c),d,{geolocateSource:!0});let b=!1;const w=()=>{b=!0};this._map.once("click",w),this._map.once("dblclick",w),this._map.once("dragstart",w),this._map.once("mousedown",w),this._map.once("touchstart",w),this._map.once("wheel",w),this._map.once("moveend",()=>{this._map.off("click",w),this._map.off("dblclick",w),this._map.off("dragstart",w),this._map.off("mousedown",w),this._map.off("touchstart",w),this._map.off("wheel",w),!b&&(this.lastUpdatedCenter=this._map.getCenter())})}),On(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=dd("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new tT({element:this._dotElement}),this._circleElement=dd("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tT({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const i=n.originalEvent&&n.originalEvent.type==="resize",a=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!i&&a>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),On(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),i=this._map.unproject([n.x,n.y]),a=this._map.unproject([n.x+20,n.y]),c=i.distanceTo(a)/20,d=Math.ceil(2*this._accuracy/c);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}}var Wo,hs,nc,rc,ha,Zy,oo,YM,pa,JM;class yx{constructor(t,n){Xu(this,oo),Xu(this,Wo),On(this,"map"),Xu(this,hs),Xu(this,nc),Xu(this,rc),Xu(this,ha,!1),Xu(this,Zy),t.style!==void 0&&$h(this,ha,!0),$h(this,Wo,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(bn(this,Wo).minZoom=t.lockZoom,bn(this,Wo).maxZoom=t.lockZoom)}setStyle(t,n){bn(this,ha)||this.map.setStyle(t,n),Vo(this,oo,pa).call(this)}addLayer(t,n){return bn(this,ha)||this.map.addLayer(t,n),Vo(this,oo,pa).call(this),this.map}moveLayer(t,n){return bn(this,ha)||this.map.moveLayer(t,n),Vo(this,oo,pa).call(this),this.map}removeLayer(t){return bn(this,ha)||this.map.removeLayer(t),Vo(this,oo,pa).call(this),this}setLayerZoomRange(t,n,i){return bn(this,ha)||this.map.setLayerZoomRange(t,n,i),Vo(this,oo,pa).call(this),this}setFilter(t,n,i){return bn(this,ha)||this.map.setFilter(t,n,i),Vo(this,oo,pa).call(this),this}setPaintProperty(t,n,i,a){return bn(this,ha)||this.map.setPaintProperty(t,n,i,a),Vo(this,oo,pa).call(this),this}setLayoutProperty(t,n,i,a){return bn(this,ha)||this.map.setLayoutProperty(t,n,i,a),Vo(this,oo,pa).call(this),this}setGlyphs(t,n){return bn(this,ha)||this.map.setGlyphs(t,n),Vo(this,oo,pa).call(this),this}onAdd(t){$h(this,hs,t),$h(this,nc,dd("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,i]of Object.entries(bn(this,Wo).containerStyle))bn(this,nc).style.setProperty(n,i);return bn(this,Wo).container=bn(this,nc),bn(this,Wo).zoom=t.getZoom()+bn(this,Wo).zoomAdjust,this.map=new QM(bn(this,Wo)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{Vo(this,oo,YM).call(this,bn(this,Wo).parentRect),$h(this,Zy,Vo(this,oo,JM).call(this))}),bn(this,nc)}onRemove(){var t;(t=bn(this,Zy))==null||t.call(this),W3(bn(this,nc))}}Wo=new WeakMap,hs=new WeakMap,nc=new WeakMap,rc=new WeakMap,ha=new WeakMap,Zy=new WeakMap,oo=new WeakSet,YM=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||($h(this,rc,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:bn(this,rc)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),Vo(this,oo,pa).call(this))},pa=function(){if(bn(this,rc)===void 0)return;const{devicePixelRatio:e}=window,t=bn(this,hs).getCanvas(),n=t.width/e,i=t.height/e,a=bn(this,hs).unproject.bind(bn(this,hs)),c=a([0,0]),d=a([n,0]),u=a([0,i]),b=a([n,i]);bn(this,rc).geometry.coordinates=[[u.toArray(),b.toArray(),d.toArray(),c.toArray(),u.toArray()]],this.map.getSource("parentRect").setData(bn(this,rc))},JM=function(){const{pitchAdjust:e}=bn(this,Wo),t=()=>{c("parent")},n=()=>{c("minimap")},i=()=>{bn(this,hs).on("move",t),this.map.on("move",n)},a=()=>{bn(this,hs).off("move",t),this.map.off("move",n)},c=d=>{a();const u=d==="parent"?bn(this,hs):this.map,b=d==="parent"?this.map:bn(this,hs),w=u.getCenter(),I=u.getZoom()+bn(this,Wo).zoomAdjust*(d==="parent"?1:-1),k=u.getBearing(),P=u.getPitch();b.jumpTo({center:w,zoom:I,bearing:k,pitch:e?P:0}),Vo(this,oo,pa).call(this),i()};return i(),()=>{a()}};const pF={POINT:"POINT",COUNTRY:"COUNTRY"};class QM extends It.Map{constructor(t){D$(t.container),t.apiKey&&(ao.apiKey=t.apiKey);const{style:n,requiresUrlMonitoring:i,isFallback:a}=eT(t.style);a&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),ao.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const c=location.hash;let d={compact:!1};t.customAttribution?d.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(d={...d,...t.attributionControl});const u={...t,style:n,maplibreLogo:!1,transformRequest:zE(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:d};delete u.style,super(u),On(this,"isTerrainEnabled",!1),On(this,"terrainExaggeration",1),On(this,"primaryLanguage"),On(this,"terrainGrowing",!1),On(this,"terrainFlattening",!1),On(this,"minimap"),On(this,"forceLanguageUpdate"),On(this,"languageAlwaysBeenStyle"),On(this,"isReady",!1),On(this,"terrainAnimationDuration",1e3),On(this,"monitoredStyleUrls"),On(this,"styleInProcess",!1),this.setStyle(n),i&&this.monitorStyleUrl(n);const b=()=>{let R="The distant style could not be loaded.";this.getStyle()?R+="Leaving the style as is.":(this.setStyle(ud.STREETS),R+=`Loading default MapTiler Cloud style "${ud.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(R)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",R=>{if(R.error instanceof It.AJAXError){const N=R.error.url,V=new URL(N);V.search="";const X=V.href;this.monitoredStyleUrls.has(X)&&(this.monitoredStyleUrls.delete(X),b());return}if(this.styleInProcess)return b()}),ao.caching&&!Db&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),ao.caching&&Db&&A$(),typeof t.language>"u")this.primaryLanguage=ao.primaryLanguage;else{const R=vE(t.language,Cn);this.primaryLanguage=R??ao.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===Cn.STYLE||this.primaryLanguage===Cn.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===Cn.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&c)return;try{if(t.geolocate===pF.COUNTRY){await this.fitToIpBounds();return}}catch(N){console.warn(N.message)}let R;try{await this.centerOnIpPoint(t.zoom),R=this.getCameraHash()}catch(N){console.warn(N.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(N=>{R===this.getCameraHash()&&(this.terrain?this.easeTo({center:[N.coords.longitude,N.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[N.coords.longitude,N.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let R={logo:null};try{const N=Object.keys(this.style.sourceCaches).map(X=>this.getSource(X)).filter(X=>X&&"url"in X&&typeof X.url=="string"&&(X==null?void 0:X.url.includes("tiles.json"))),V=new URL(N[0].url);V.searchParams.has("key")||V.searchParams.append("key",ao.apiKey),R=await(await fetch(V.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in R&&R.logo){const N=R.logo;this.addControl(new RE({logoURL:N}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new RE,t.logoPosition);if(t.scaleControl){const N=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,V=new N$({unit:ao.unit});this.addControl(V,N),ao.on("unit",X=>{V.setUnit(X)})}if(t.navigationControl!==!1){const N=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new cF,N)}if(t.geolocateControl!==!1){const N=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new dF({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),N)}if(t.terrainControl){const N=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new uF,N)}if(t.fullscreenControl){const N=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new j$({}),N)}this.isReady=!0,this.fire("ready",{target:this})});let w=!1,I=!1,k;this.once("ready",()=>{w=!0,I&&this.fire("loadWithTerrain",k)}),this.once("style.load",()=>{const{minimap:R}=t;if(typeof R=="object"){const{zoom:N,center:V,style:X,language:D,apiKey:B,maptilerLogo:j,antialias:G,refreshExpiredTiles:te,maxBounds:oe,scrollZoom:ae,minZoom:de,maxZoom:Me,boxZoom:Z,locale:Ie,fadeDuration:je,crossSourceCollisions:$e,clickTolerance:Le,bounds:Oe,fitBoundsOptions:He,pixelRatio:at,validateStyle:De}=t;this.minimap=new yx(R,{zoom:N,center:V,style:X,language:D,apiKey:B,container:"null",maptilerLogo:j,antialias:G,refreshExpiredTiles:te,maxBounds:oe,scrollZoom:ae,minZoom:de,maxZoom:Me,boxZoom:Z,locale:Ie,fadeDuration:je,crossSourceCollisions:$e,clickTolerance:Le,bounds:Oe,fitBoundsOptions:He,pixelRatio:at,validateStyle:De}),this.addControl(this.minimap,R.position??"bottom-left")}else R===!0?(this.minimap=new yx({},t),this.addControl(this.minimap,"bottom-left")):R!==void 0&&R!==!1&&(this.minimap=new yx({},t),this.addControl(this.minimap,R))});const P=R=>{R.terrain&&(I=!0,k={type:"loadWithTerrain",target:this,terrain:R.terrain},this.off("terrain",P),w&&this.fire("loadWithTerrain",k))};this.on("terrain",P),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",R=>{console.warn(R),$$(t.container),this.fire("webglContextLost",{error:R})})})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(t);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(t,n){var i;(i=this.minimap)==null||i.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const a=eT(t);if(a.requiresUrlMonitoring&&this.monitorStyleUrl(a.style),a.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(a.style,n),this}addLayer(t,n){var i;return(i=this.minimap)==null||i.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var i;return(i=this.minimap)==null||i.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,i){var a;return(a=this.minimap)==null||a.setLayerZoomRange(t,n,i),super.setLayerZoomRange(t,n,i)}setFilter(t,n,i){var a;return(a=this.minimap)==null||a.setFilter(t,n,i),super.setFilter(t,n,i)}setPaintProperty(t,n,i,a){var c;return(c=this.minimap)==null||c.setPaintProperty(t,n,i,a),super.setPaintProperty(t,n,i,a)}setLayoutProperty(t,n,i,a){var c;return(c=this.minimap)==null||c.setLayoutProperty(t,n,i,a),super.setLayoutProperty(t,n,i,a)}setGlyphs(t,n){var i;return(i=this.minimap)==null||i.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?Mb(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n,i;(i=(n=this.minimap)==null?void 0:n.map)==null||i.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),i=vE(t,Cn);if(!i){console.warn(`The language "${i}" is not supported.`);return}if(!(i.flag===Cn.STYLE.flag&&n&&(n.flag===Cn.AUTO.flag||n.flag===Cn.VISITOR.flag))&&(i.flag!==Cn.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===i&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===Cn.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=i;let a=i;if(i.flag===Cn.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}a=n}let c=Cn.LOCAL.flag,d=`{${c}}`;a.flag===Cn.VISITOR.flag?(c=PE().flag,d=["case",["all",["has",c],["has",Cn.LOCAL.flag]],["case",["==",["get",c],["get",Cn.LOCAL.flag]],["get",Cn.LOCAL.flag],["format",["get",c],{"font-scale":.8},`
`,["get",Cn.LOCAL.flag],{"font-scale":1.1}]],["get",Cn.LOCAL.flag]]):a.flag===Cn.VISITOR_ENGLISH.flag?(c=Cn.ENGLISH.flag,d=["case",["all",["has",c],["has",Cn.LOCAL.flag]],["case",["==",["get",c],["get",Cn.LOCAL.flag]],["get",Cn.LOCAL.flag],["format",["get",c],{"font-scale":.8},`
`,["get",Cn.LOCAL.flag],{"font-scale":1.1}]],["get",Cn.LOCAL.flag]]):a.flag===Cn.AUTO.flag?(c=PE().flag,d=["case",["has",c],["get",c],["get",Cn.LOCAL.flag]]):a===Cn.LOCAL?(c=Cn.LOCAL.flag,d=`{${c}}`):(c=a.flag,d=["case",["has",c],["get",c],["get",Cn.LOCAL.flag]]);const{layers:u}=this.getStyle();for(const b of u){if(b.type!=="symbol")continue;const w=b,I=this.getSource(w.source);if(!I||!("url"in I&&typeof I.url=="string")||new URL(I.url).host!==So.maptilerApiHost)continue;const{id:k,layout:P}=w;if(!P||!("text-field"in P))continue;const R=this.getLayoutProperty(k,"text-field");typeof R=="string"&&(R.toLowerCase().includes("ref")||R.toLowerCase().includes("housenumber"))||this.setLayoutProperty(k,"text-field",d)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const n=performance.now(),i=this.terrain.exaggeration,a=t-i,c=()=>{if(!this.terrain||this.terrainFlattening)return;const d=(performance.now()-n)/this.terrainAnimationDuration;if(d<.99){const u=1-(1-d)**4,b=i+u*a;this.terrain.exaggeration=b,requestAnimationFrame(c)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(c)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=async a=>{!this.terrain||a.type!=="data"||a.dataType!=="source"||!("source"in a)||a.sourceId!=="maptiler-terrain"||a.source.type!=="raster-dem"||a.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},i=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(So.terrainSourceId,{type:"raster-dem",url:So.terrainSourceURL}),this.setTerrain({source:So.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?i():this.once("load",()=>{this.getTerrain()&&this.getSource(So.terrainSourceId)||i()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),n=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;const a=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,a<.99){const c=(1-a)**4,d=n*c;this.terrain.exaggeration=d,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(So.terrainSourceId)&&this.removeSource(So.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await xE.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await xE.info();this.jumpTo({center:[(n==null?void 0:n.longitude)??0,(n==null?void 0:n.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),w$.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return ao}getMaptilerSessionId(){return U3}setTransformRequest(t){return super.setTransformRequest(zE(t)),this}}function by(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function fF(e){return`#${by(e[0])}${by(e[1])}${by(e[2])}${e.length===4?by(e[3]):""}`}class $t extends Array{constructor(t={}){super(),On(this,"min",0),On(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new $t({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const i=n.clone?this.clone():this;i.length=0;let a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;for(let d=0;d<t.length;d+=1)a=Math.min(a,t[d].value),c=Math.max(c,t[d].value),i.push({value:t[d].value,color:t[d].color.slice()});return i.sort((d,u)=>d.value<u.value?-1:1),this.min=a,this.max=c,i}scale(t,n,i={clone:!0}){const a=i.clone,c=this[0].value,d=this.at(-1).value-c,u=n-t,b=[];for(let w=0;w<this.length;w+=1){const I=(this[w].value-c)/d*u+t;a?b.push({value:I,color:this[w].color.slice()}):this[w].value=I}return a?new $t({stops:b}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new $t({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let i=0;i<~~(n.length/2);i+=1){const a=n[i].color;n[i].color=n.at(-(i+1)).color,n.at(-(i+1)).color=a}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let i=0;i<this.length-1;i+=1){if(t>this[i+1].value)continue;const a=this[i].color;if(!n.smooth)return a.slice();const c=this[i].value,d=this[i+1].value,u=this[i+1].color,b=(d-t)/(d-c);return a.map((w,I)=>Math.round(w*b+u[I]*(1-b)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return fF(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const i=this.getBounds();return this.getColor(i.min+t*(i.max-i.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const i=n.getContext("2d");if(!i)throw new Error("Canvs context is missing");const a=i.getImageData(0,0,n.width,n.height),c=a.data,d=t.size,u=this[0].value,b=(this.at(-1).value-u)/d;for(let w=0;w<d;w+=1){const I=this.getColor(u+w*b,{smooth:t.smooth});c[w*4]=I[0],c[w*4+1]=I[1],c[w*4+2]=I[2],c[w*4+3]=I.length>3?I[3]:255}return i.putImageData(a,0,0),n}resample(t,n=15){const i=this.getBounds(),a=this.scale(0,1),c=1/(n-1);let d;if(t==="ease-in-square")d=Array.from({length:n},(u,b)=>{const w=b*c,I=w**2,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-square")d=Array.from({length:n},(u,b)=>{const w=b*c,I=1-(1-w)**2,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-sqrt")d=Array.from({length:n},(u,b)=>{const w=b*c,I=w**.5,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-in-sqrt")d=Array.from({length:n},(u,b)=>{const w=b*c,I=1-(1-w)**.5,k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-out-exp")d=Array.from({length:n},(u,b)=>{const w=b*c,I=1-2**(-10*w),k=a.getColor(I);return{value:w,color:k}});else if(t==="ease-in-exp")d=Array.from({length:n},(u,b)=>{const w=b*c,I=2**(10*w-10),k=a.getColor(I);return{value:w,color:k}});else throw new Error("Invalid ressampling method.");return new $t({stops:d}).scale(i.min,i.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new $t({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new $t({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new $t({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new $t({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new $t({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new $t({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new $t({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new $t({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new $t({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new $t({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new $t({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new $t({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new $t({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new $t({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new $t({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new $t({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new $t({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new $t({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new $t({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new $t({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new $t({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new $t({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new $t({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new $t({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new $t({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new $t({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new $t({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new $t({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new $t({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new $t({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new $t({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new $t({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new $t({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new $t({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new $t({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new $t({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new $t({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new $t({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new $t({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new $t({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new $t({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new $t({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new $t({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});L$();It.Map;It.Marker;It.Popup;It.Style;It.CanvasSource;It.GeoJSONSource;It.ImageSource;It.RasterTileSource;It.RasterDEMTileSource;It.VectorTileSource;It.VideoSource;It.NavigationControl;It.GeolocateControl;It.AttributionControl;It.LogoControl;It.ScaleControl;It.FullscreenControl;It.TerrainControl;It.BoxZoomHandler;It.ScrollZoomHandler;It.CooperativeGesturesHandler;It.KeyboardHandler;It.TwoFingersTouchPitchHandler;It.MapWheelEvent;It.MapTouchEvent;It.MapMouseEvent;It.config;It.getVersion;var eA={},mF=Object.defineProperty,tA=e=>{throw TypeError(e)},gF=(e,t,n)=>t in e?mF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rT=(e,t,n)=>gF(e,typeof t!="symbol"?t+"":t,n),nA=(e,t,n)=>t.has(e)||tA("Cannot "+n),Fa=(e,t,n)=>(nA(e,t,"read from private field"),t.get(e)),iT=(e,t,n)=>t.has(e)?tA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vx=(e,t,n,i)=>(nA(e,t,"write to private field"),t.set(e,n),n);function mr(){}function yF(e,t){for(const n in t)e[n]=t[n];return e}function rA(e){return e()}function oT(){return Object.create(null)}function hl(e){e.forEach(rA)}function iA(e){return typeof e=="function"}function bu(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let wy;function Zi(e,t){return e===t?!0:(wy||(wy=document.createElement("a")),wy.href=t,e===wy.href)}function vF(e){return Object.keys(e).length===0}function _F(e,t,n,i){if(e){const a=oA(e,t,n,i);return e[0](a)}}function oA(e,t,n,i){return e[1]&&i?yF(n.ctx.slice(),e[1](i(t))):n.ctx}function xF(e,t,n,i){if(e[2]&&i){const a=e[2](i(n));if(t.dirty===void 0)return a;if(typeof a=="object"){const c=[],d=Math.max(t.dirty.length,a.length);for(let u=0;u<d;u+=1)c[u]=t.dirty[u]|a[u];return c}return t.dirty|a}return t.dirty}function bF(e,t,n,i,a,c){if(a){const d=oA(t,n,i,c);e.p(d,a)}}function wF(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function aT(e){return e??""}function wn(e,t){e.appendChild(t)}function Er(e,t,n){e.insertBefore(t,n||null)}function gr(e){e.parentNode&&e.parentNode.removeChild(e)}function er(e){return document.createElement(e)}function Xa(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function fu(e){return document.createTextNode(e)}function Ho(){return fu(" ")}function SF(){return fu("")}function lo(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function CF(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ve(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function kF(e){return Array.from(e.childNodes)}function vm(e,t){t=""+t,e.data!==t&&(e.data=t)}function sT(e,t){e.value=t??""}function Sa(e,t,n){e.classList.toggle(t,!!n)}function EF(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}let _m;function Uf(e){_m=e}function aA(){if(!_m)throw new Error("Function called outside component initialization");return _m}function TF(e){aA().$$.on_destroy.push(e)}function IF(){const e=aA();return(t,n,{cancelable:i=!1}={})=>{const a=e.$$.callbacks[t];if(a){const c=EF(t,n,{cancelable:i});return a.slice().forEach(d=>{d.call(e,c)}),!c.defaultPrevented}return!0}}function lT(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Bh=[],Gb=[];let md=[];const uT=[],PF=Promise.resolve();let Zb=!1;function MF(){Zb||(Zb=!0,PF.then(sA))}function Kb(e){md.push(e)}const _x=new Set;let Th=0;function sA(){if(Th!==0)return;const e=_m;do{try{for(;Th<Bh.length;){const t=Bh[Th];Th++,Uf(t),AF(t.$$)}}catch(t){throw Bh.length=0,Th=0,t}for(Uf(null),Bh.length=0,Th=0;Gb.length;)Gb.pop()();for(let t=0;t<md.length;t+=1){const n=md[t];_x.has(n)||(_x.add(n),n())}md.length=0}while(Bh.length);for(;uT.length;)uT.pop()();Zb=!1,_x.clear(),Uf(e)}function AF(e){if(e.fragment!==null){e.update(),hl(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Kb)}}function LF(e){const t=[],n=[];md.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),md=t}const Ky=new Set;let hc;function Xy(){hc={r:0,c:[],p:hc}}function Yy(){hc.r||hl(hc.c),hc=hc.p}function Ur(e,t){e&&e.i&&(Ky.delete(e),e.i(t))}function mi(e,t,n,i){if(e&&e.o){if(Ky.has(e))return;Ky.add(e),hc.c.push(()=>{Ky.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}function cT(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function zF(e,t){mi(e,1,1,()=>{t.delete(e.key)})}function RF(e,t,n,i,a,c,d,u,b,w,I,k){let P=e.length,R=c.length,N=P;const V={};for(;N--;)V[e[N].key]=N;const X=[],D=new Map,B=new Map,j=[];for(N=R;N--;){const ae=k(a,c,N),de=n(ae);let Me=d.get(de);Me?j.push(()=>Me.p(ae,t)):(Me=w(de,ae),Me.c()),D.set(de,X[N]=Me),de in V&&B.set(de,Math.abs(N-V[de]))}const G=new Set,te=new Set;function oe(ae){Ur(ae,1),ae.m(u,I),d.set(ae.key,ae),I=ae.first,R--}for(;P&&R;){const ae=X[R-1],de=e[P-1],Me=ae.key,Z=de.key;ae===de?(I=ae.first,P--,R--):D.has(Z)?!d.has(Me)||G.has(Me)?oe(ae):te.has(Z)?P--:B.get(Me)>B.get(Z)?(te.add(Me),oe(ae)):(G.add(Z),P--):(b(de,d),P--)}for(;P--;){const ae=e[P];D.has(ae.key)||b(ae,d)}for(;R;)oe(X[R-1]);return hl(j),X}function mu(e){e&&e.c()}function al(e,t,n){const{fragment:i,after_update:a}=e.$$;i&&i.m(t,n),Kb(()=>{const c=e.$$.on_mount.map(rA).filter(iA);e.$$.on_destroy?e.$$.on_destroy.push(...c):hl(c),e.$$.on_mount=[]}),a.forEach(Kb)}function sl(e,t){const n=e.$$;n.fragment!==null&&(LF(n.after_update),hl(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function DF(e,t){e.$$.dirty[0]===-1&&(Bh.push(e),MF(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function wu(e,t,n,i,a,c,d=null,u=[-1]){const b=_m;Uf(e);const w=e.$$={fragment:null,ctx:[],props:c,update:mr,not_equal:a,bound:oT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:oT(),dirty:u,skip_bound:!1,root:t.target||b.$$.root};d&&d(w.root);let I=!1;if(w.ctx=n?n(e,t.props||{},(k,P,...R)=>{const N=R.length?R[0]:P;return w.ctx&&a(w.ctx[k],w.ctx[k]=N)&&(!w.skip_bound&&w.bound[k]&&w.bound[k](N),I&&DF(e,k)),P}):[],w.update(),I=!0,hl(w.before_update),w.fragment=i?i(w.ctx):!1,t.target){if(t.hydrate){const k=kF(t.target);w.fragment&&w.fragment.l(k),k.forEach(gr)}else w.fragment&&w.fragment.c();t.intro&&Ur(e.$$.fragment),al(e,t.target,t.anchor),sA()}Uf(b)}class Su{constructor(){rT(this,"$$"),rT(this,"$$set")}$destroy(){sl(this,1),this.$destroy=mr}$on(t,n){if(!iA(n))return mr;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const a=i.indexOf(n);a!==-1&&i.splice(a,1)}}$set(t){this.$$set&&!vF(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const $F="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add($F);function OF(e){let t,n;return{c(){t=Xa("svg"),n=Xa("path"),Ve(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),Ve(t,"viewBox","0 0 14 14"),Ve(t,"width","13"),Ve(t,"height","13"),Ve(t,"class","svelte-en2qvf")},m(i,a){Er(i,t,a),wn(t,n)},p:mr,i:mr,o:mr,d(i){i&&gr(t)}}}class lA extends Su{constructor(t){super(),wu(this,t,null,OF,bu,{})}}function FF(e){let t,n;return{c(){t=Xa("svg"),n=Xa("path"),Ve(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),Ve(t,"viewBox","0 0 30 30"),Ve(t,"fill","none"),Ve(t,"xmlns","http://www.w3.org/2000/svg"),Ve(t,"class","svelte-d2loi5")},m(i,a){Er(i,t,a),wn(t,n)},p:mr,i:mr,o:mr,d(i){i&&gr(t)}}}class uA extends Su{constructor(t){super(),wu(this,t,null,FF,bu,{})}}function BF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"area.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"area.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function NF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"reverse.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"reverse.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function jF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"poi.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"poi.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function UF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"postal_code.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"postal_code.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function VF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"street.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"street.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function WF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"road.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"road.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function qF(e){let t,n;return{c(){t=er("img"),Zi(t.src,n=e[3]+"housenumber.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(i,a){Er(i,t,a)},p(i,a){a&8&&!Zi(t.src,n=i[3]+"housenumber.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",i[6])},d(i){i&&gr(t)}}}function HF(e){let t,n,i,a;return{c(){t=er("img"),Zi(t.src,n=e[5])||Ve(t,"src",n),Ve(t,"alt",e[4]),Ve(t,"class","svelte-ltkwvy")},m(c,d){Er(c,t,d),i||(a=lo(t,"error",e[14]),i=!0)},p(c,d){d&32&&!Zi(t.src,n=c[5])&&Ve(t,"src",n),d&16&&Ve(t,"alt",c[4])},d(c){c&&gr(t),i=!1,a()}}}function hT(e){let t,n;return{c(){t=er("span"),n=fu(e[6]),Ve(t,"class","secondary svelte-ltkwvy")},m(i,a){Er(i,t,a),wn(t,n)},p(i,a){a&64&&vm(n,i[6])},d(i){i&&gr(t)}}}function GF(e){let t,n,i,a,c,d,u,b,w,I=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",k,P,R=e[2]==="always"||e[2]&&!e[0].address&&!e[0].id.startsWith("road.")&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],N,V,X=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",D,B,j;function G(de,Me){return Me&1&&(n=null),Me&1&&(i=null),Me&1&&(a=null),Me&1&&(c=null),de[5]?HF:de[0].address?qF:(n==null&&(n=!!de[0].id.startsWith("road.")),n?WF:(i==null&&(i=!!de[0].id.startsWith("address.")),i?VF:(a==null&&(a=!!de[0].id.startsWith("postal_code.")),a?UF:(c==null&&(c=!!de[0].id.startsWith("poi.")),c?jF:de[7]?NF:BF))))}let te=G(e,-1),oe=te(e),ae=R&&hT(e);return{c(){t=er("li"),oe.c(),d=Ho(),u=er("span"),b=er("span"),w=er("span"),k=fu(I),P=Ho(),ae&&ae.c(),N=Ho(),V=er("span"),D=fu(X),Ve(w,"class","primary svelte-ltkwvy"),Ve(b,"class","svelte-ltkwvy"),Ve(V,"class","line2 svelte-ltkwvy"),Ve(u,"class","texts svelte-ltkwvy"),Ve(t,"tabindex","0"),Ve(t,"data-selected",e[1]),Ve(t,"class","svelte-ltkwvy"),Sa(t,"selected",e[1])},m(de,Me){Er(de,t,Me),oe.m(t,null),wn(t,d),wn(t,u),wn(u,b),wn(b,w),wn(w,k),wn(b,P),ae&&ae.m(b,null),wn(u,N),wn(u,V),wn(V,D),B||(j=[lo(t,"mouseenter",e[12]),lo(t,"focus",e[13])],B=!0)},p(de,[Me]){te===(te=G(de,Me))&&oe?oe.p(de,Me):(oe.d(1),oe=te(de),oe&&(oe.c(),oe.m(t,d))),Me&1&&I!==(I=(de[7]?de[0].place_name:de[0].place_name.replace(/,.*/,""))+"")&&vm(k,I),Me&37&&(R=de[2]==="always"||de[2]&&!de[0].address&&!de[0].id.startsWith("road.")&&!de[0].id.startsWith("address.")&&!de[0].id.startsWith("postal_code.")&&(!de[0].id.startsWith("poi.")||!de[5])&&!de[7]),R?ae?ae.p(de,Me):(ae=hT(de),ae.c(),ae.m(b,null)):ae&&(ae.d(1),ae=null),Me&1&&X!==(X=(de[7]?"":de[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&vm(D,X),Me&2&&Ve(t,"data-selected",de[1]),Me&2&&Sa(t,"selected",de[1])},i:mr,o:mr,d(de){de&&gr(t),oe.d(),ae&&ae.d(),B=!1,hl(j)}}}function ZF(e,t,n){var i;let a,c,{feature:d}=t,{selected:u=!1}=t,{showPlaceType:b}=t,{missingIconsCache:w}=t,{iconsBaseUrl:I}=t;const k=(i=d.properties)==null?void 0:i.categories;let P,R,N=0,V=d.place_type[0]==="reverse";function X(){R&&w.add(R),n(10,N++,N)}function D(G){lT.call(this,e,G)}function B(G){lT.call(this,e,G)}const j=()=>X();return e.$$set=G=>{"feature"in G&&n(0,d=G.feature),"selected"in G&&n(1,u=G.selected),"showPlaceType"in G&&n(2,b=G.showPlaceType),"missingIconsCache"in G&&n(9,w=G.missingIconsCache),"iconsBaseUrl"in G&&n(3,I=G.iconsBaseUrl)},e.$$.update=()=>{var G,te,oe,ae;if(e.$$.dirty&3640)do n(11,a--,a),n(4,P=k==null?void 0:k[a]),n(5,R=P?I+P.replace(/ /g,"_")+".svg":void 0);while(a>-1&&(!R||w.has(R)));e.$$.dirty&1&&n(6,c=((te=(G=d.properties)==null?void 0:G.categories)==null?void 0:te.join(", "))??((ae=(oe=d.properties)==null?void 0:oe.place_type_name)==null?void 0:ae[0])??d.place_type[0])},n(11,a=(k==null?void 0:k.length)??0),[d,u,b,I,P,R,c,V,X,w,N,a,D,B,j]}class KF extends Su{constructor(t){super(),wu(this,t,ZF,GF,bu,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function XF(e){let t;return{c(){t=er("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',Ve(t,"class","svelte-7cmwmc")},m(n,i){Er(n,t,i)},p:mr,i:mr,o:mr,d(n){n&&gr(t)}}}class YF extends Su{constructor(t){super(),wu(this,t,null,XF,bu,{})}}function JF(e){let t,n,i;return{c(){t=Xa("svg"),n=Xa("path"),Ve(n,"stroke-width","4"),Ve(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),Ve(n,"class","svelte-gzo3ar"),Ve(t,"width",i=e[0]==="list"?20:void 0),Ve(t,"viewBox","0 0 70 85"),Ve(t,"fill","none"),Ve(t,"class","svelte-gzo3ar"),Sa(t,"in-map",e[0]!=="list"),Sa(t,"list-icon",e[0]==="list")},m(a,c){Er(a,t,c),wn(t,n)},p(a,[c]){c&1&&i!==(i=a[0]==="list"?20:void 0)&&Ve(t,"width",i),c&1&&Sa(t,"in-map",a[0]!=="list"),c&1&&Sa(t,"list-icon",a[0]==="list")},i:mr,o:mr,d(a){a&&gr(t)}}}function QF(e,t,n){let{displayIn:i}=t;return e.$$set=a=>{"displayIn"in a&&n(0,i=a.displayIn)},[i]}class eB extends Su{constructor(t){super(),wu(this,t,QF,JF,bu,{displayIn:0})}}function tB(e){let t,n;return{c(){t=Xa("svg"),n=Xa("path"),Ve(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),Ve(t,"viewBox","0 0 60.006 21.412"),Ve(t,"width","14"),Ve(t,"height","20"),Ve(t,"class","svelte-en2qvf")},m(i,a){Er(i,t,a),wn(t,n)},p:mr,i:mr,o:mr,d(i){i&&gr(t)}}}class nB extends Su{constructor(t){super(),wu(this,t,null,tB,bu,{})}}function rB(e){let t,n,i;return{c(){t=Xa("svg"),n=Xa("circle"),i=Xa("path"),Ve(n,"cx","4.789"),Ve(n,"cy","4.787"),Ve(n,"r","3.85"),Ve(n,"class","svelte-1aq105l"),Ve(i,"d","M12.063 12.063 7.635 7.635"),Ve(i,"class","svelte-1aq105l"),Ve(t,"xmlns","http://www.w3.org/2000/svg"),Ve(t,"width","13"),Ve(t,"height","13"),Ve(t,"viewBox","0 0 13 13"),Ve(t,"class","svelte-1aq105l")},m(a,c){Er(a,t,c),wn(t,n),wn(t,i)},p:mr,i:mr,o:mr,d(a){a&&gr(t)}}}class iB extends Su{constructor(t){super(),wu(this,t,null,rB,bu,{})}}function oB(e,t,n){const i=t[1],a=t[0],c=i-a;return e===i&&n?e:((e-a)%c+c)%c+a}function $0(e){const t=[...e];return t[2]<t[0]&&(Math.abs((t[0]+t[2]+360)/2)>Math.abs((t[0]-360+t[2])/2)?t[0]-=360:t[2]+=360),t}let cf;async function aB(e,t,n){const i=e==null?void 0:e.getCenterAndZoom();for(const a of t??[])if(!(i&&(a.minZoom!=null&&a.minZoom>i[0]||a.maxZoom!=null&&a.maxZoom<i[0]))){if(a.type==="fixed")return a.coordinates.join(",");e:if(a.type==="client-geolocation"){if(cf&&a.cachedLocationExpiry&&cf.time+a.cachedLocationExpiry>Date.now()){if(!cf.coords)break e;return cf.coords}let c;try{return c=await new Promise((d,u)=>{n.signal.addEventListener("abort",()=>{u(Error("aborted"))}),navigator.geolocation.getCurrentPosition(b=>{d([b.coords.longitude,b.coords.latitude].map(w=>w.toFixed(6)).join(","))},b=>{u(b)},a)}),c}catch{}finally{a.cachedLocationExpiry&&(cf={time:Date.now(),coords:c})}if(n.signal.aborted)return}if(a.type==="server-geolocation")return"ip";if(i&&a.type==="map-center")return i[1].toFixed(6)+","+i[2].toFixed(6)}}const sB=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,dT=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,pT=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([]?)[\s]*(EAST|WEST|[EW])?$/i,fT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,mT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,gT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''||||["\.])?\s*(EAST|WEST|[EW])?$/i;function lB(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(R=>Number(R.trim())),n=Number(t[0]),i=Number(t[1]),a=Math.abs(n),c=Math.abs(i),d=n>0?"N":"S",u=i>0?"E":"W";let b;e=="DD"&&(b=`${a} ${d}, ${c} ${u}`);const w=Math.floor(a),I=Math.floor(c),k=(a-w)*60,P=(c-I)*60;if(e=="DM"){let R=yT(k,3).toFixed(3).padStart(6,"0"),N=yT(P,3).toFixed(3).padStart(6,"0");R.endsWith(".000")&&N.endsWith(".000")&&(R=R.replace(/\.000$/,""),N=N.replace(/\.000$/,"")),b=`${w} ${R}' ${d}, ${I} ${N}' ${u}`}if(e=="DMS"){const R=Math.floor(k),N=Math.floor(P);let V=((k-R)*60).toFixed(1).padStart(4,"0"),X=((P-N)*60).toFixed(1).padStart(4,"0");const D=R.toString().padStart(2,"0"),B=N.toString().padStart(2,"0");V.endsWith(".0")&&X.endsWith(".0")&&(V=V.replace(/\.0$/,""),X=X.replace(/\.0$/,"")),b=`${w} ${D}' ${V}" ${d}, ${I} ${B}' ${X}" ${u}`}return b}else throw new Error("no decimal coordinates to convert")}function yT(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function D2(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,i=null,a="",c="",d=null,u=[],b=!1;if(sB.test(e))throw new Error("invalid coordinate value");if(dT.test(e))if(u=dT.exec(e),b=hf(u),b)n=Math.abs(u[1])+u[2]/60,Number(u[1])<0&&(n*=-1),i=Math.abs(u[3])+u[4]/60,Number(u[3])<0&&(i*=-1),d="DM";else throw new Error("invalid coordinate format");else if(pT.test(e))if(u=pT.exec(e),b=hf(u),b){if(n=u[2],i=u[6],n.includes(",")&&(n=n.replace(",",".")),i.includes(",")&&(i=i.replace(",",".")),d="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(i))==Number(i))throw new Error("integer only coordinate provided");u[1]?(a=u[1],c=u[5]):u[4]&&(a=u[4],c=u[8])}else throw new Error("invalid decimal coordinate format");else if(fT.test(e))if(u=fT.exec(e),b=hf(u),b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60,d="DM"),u[6]&&(n+=u[6].replace(",",".")/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),i=Math.abs(parseInt(u[9])),u[11]&&(i+=u[11]/60),u[13]&&(i+=u[13].replace(",",".")/3600),parseInt(u[9])<0&&(i=-1*i),u[1]?(a=u[1],c=u[8]):u[7]&&(a=u[7],c=u[14]);else throw new Error("invalid DMS coordinates format");else if(mT.test(e))if(u=mT.exec(e),b=hf(u),b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60,d="DM"),u[6]&&(n+=u[6]/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),i=Math.abs(parseInt(u[10])),u[12]&&(i+=u[12]/60),u[14]&&(i+=u[14]/3600),parseInt(u[10])<0&&(i=-1*i),u[1]?(a=u[1],c=u[9]):u[8]&&(a=u[8],c=u[16]);else throw new Error("invalid DMS coordinates format");else if(gT.test(e)){if(u=gT.exec(e),b=hf(u),u.filter(w=>w).length<=5)throw new Error("invalid coordinates format");if(b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4].replace(",",".")/60,d="DM"),u[6]&&(n+=u[6].replace(",",".")/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),i=Math.abs(parseInt(u[10])),u[12]&&(i+=u[12].replace(",",".")/60),u[14]&&(i+=u[14].replace(",",".")/3600),parseInt(u[10])<0&&(i=-1*i),u[1]?(a=u[1],c=u[9]):u[8]&&(a=u[8],c=u[16]);else throw new Error("invalid coordinates format")}if(b){if(Math.abs(i)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(a&&!c||!a&&c)throw new Error("invalid coordinates value");if(a&&a==c)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),i.toString().includes(",")&&(i=i.replace(",","."));let w=/S|SOUTH/i;w.test(a)&&n>0&&(n=-1*n),w=/W|WEST/i,w.test(c)&&i>0&&(i=-1*i);const I=u[0].trim();let k,P;const R=/[,/;\u0020]/g,N=I.match(R);if(N==null){const D=Math.floor(e.length/2);k=I.substring(0,D).trim(),P=I.substring(D).trim()}else{let D;N.length%2==1?D=Math.floor(N.length/2):D=N.length/2-1;let B=0;if(D==0)B=I.indexOf(N[0]),k=I.substring(0,B).trim(),P=I.substring(B+1).trim();else{let j=0,G=0;for(;j<=D;)B=I.indexOf(N[j],G),G=B+1,j++;k=I.substring(0,B).trim(),P=I.substring(B+1).trim()}}const V=k.split(".");if(V.length==2&&V[1]==0&&V[1].length!=2)throw new Error("invalid coordinates format");const X=P.split(".");if(X.length==2&&X[1]==0&&X[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(k)||/^\d+$/.test(P))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),i=Number(Number(i).toFixed(t)),Object.freeze({verbatimCoordinates:I,verbatimLatitude:k,verbatimLongitude:P,decimalLatitude:n,decimalLongitude:i,decimalCoordinates:`${n},${i}`,originalFormat:d,closeEnough:uB,toCoordinateFormat:lB})}else throw new Error("coordinates pattern match failed")}function hf(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,i=/[eastsouthnorthwest]+/i,a=t.length/2;for(let c=0;c<a;c++){const d=t[c],u=t[c+a],b=n.test(d)&&n.test(u),w=i.test(d)&&i.test(u),I=d==u;if(!(d==null&&u==null)){if(d==null||u==null)return!1;if(b||w||I)continue;return!1}}return!0}function vT(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function uB(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return vT(this.decimalLatitude,Number(t[0]))&&vT(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const cB=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});D2.to=cB;const hB=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:"40.123 N 74.123 W",verbatimLatitude:"40.123 N",verbatimLongitude:"74.123 W"},{verbatimCoordinates:'40 7 22.8" N 74 7 22.8" W',verbatimLatitude:'40 7 22.8" N',verbatimLongitude:'74 7 22.8" W'},{verbatimCoordinates:"40 7.38 , -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"N40722.8, W74722.8",verbatimLatitude:"N40722.8",verbatimLongitude:"W74722.8"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:`407'22.8"N, 747'22.8"W`,verbatimLatitude:`407'22.8"N`,verbatimLongitude:`747'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123,-74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40722.8"N, 74722.8"W',verbatimLatitude:'40722.8"N',verbatimLongitude:'74722.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40723"N 74723"W',verbatimLatitude:'40723"N',verbatimLongitude:'74723"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40723"S 74723"E',verbatimLatitude:'40723"S',verbatimLongitude:'74723"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40723" -74723"',verbatimLatitude:'40723"',verbatimLongitude:'-74723"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7 23" N 74d 7 23" W',verbatimLatitude:'40d 7 23" N',verbatimLongitude:'74d 7 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7.38, -74 7.38",verbatimLatitude:"40 7.38",verbatimLongitude:"-74 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],dB={decimalLatitude:40.123,decimalLongitude:-74.123},pB=[{verbatimCoordinates:`504'17.698"south, 1424'2.826"east`,verbatimLatitude:`504'17.698"south`,verbatimLongitude:`1424'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"402647N 795836W",verbatimLatitude:"402647N",verbatimLongitude:"795836W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26 47 N 79d 58 36 W",verbatimLatitude:"40d 26 47 N",verbatimLongitude:"79d 58 36 W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195 79,948862",verbatimLatitude:"40,446195",verbatimLongitude:"79,948862",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40 26.7717, -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"1824S 2245E",verbatimLatitude:"1824S",verbatimLongitude:"2245E",decimalLatitude:-18.4,decimalLongitude:22.75}],fB=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245 S / 28.2344 E",verbatimLatitude:"-23.3245 S",verbatimLongitude:"28.2344 E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40 26.7717 -79 56.93172",verbatimLatitude:"40 26.7717",verbatimLongitude:"-79 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563   E22.45634 ",verbatimLatitude:"S23.43563 ",verbatimLongitude:"E22.45634 ",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372 S 23,07771 E",verbatimLatitude:"27,71372 S",verbatimLongitude:"23,07771 E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48 30,6410', E 18 57,4583'",verbatimLatitude:"N 48 30,6410'",verbatimLongitude:"E 18 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function mB(){const e=[];return hB.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...dB})}),[...e,...pB,...fB]}const gB=mB();D2.formats=gB.map(e=>e.verbatimCoordinates);const yB=D2;function _T(e,t,n){const i=e.slice();return i[83]=t[n],i[85]=n,i}function xT(e){let t,n;return t=new YF({}),{c(){mu(t.$$.fragment)},m(i,a){al(t,i,a),n=!0},i(i){n||(Ur(t.$$.fragment,i),n=!0)},o(i){mi(t.$$.fragment,i),n=!1},d(i){sl(t,i)}}}function bT(e){let t,n,i,a,c;return n=new nB({}),{c(){t=er("button"),mu(n.$$.fragment),Ve(t,"type","button"),Ve(t,"title",e[9]),Ve(t,"class","svelte-qnu791"),Sa(t,"active",e[0])},m(d,u){Er(d,t,u),al(n,t,null),i=!0,a||(c=lo(t,"click",e[68]),a=!0)},p(d,u){(!i||u[0]&512)&&Ve(t,"title",d[9]),(!i||u[0]&1)&&Sa(t,"active",d[0])},i(d){i||(Ur(n.$$.fragment,d),i=!0)},o(d){mi(n.$$.fragment,d),i=!1},d(d){d&&gr(t),sl(n),a=!1,c()}}}function vB(e){let t,n=[],i=new Map,a,c,d,u=cT(e[14]);const b=w=>w[83].id+(w[83].address?","+w[83].address:"");for(let w=0;w<u.length;w+=1){let I=_T(e,u,w),k=b(I);i.set(k,n[w]=wT(k,I))}return{c(){t=er("ul");for(let w=0;w<n.length;w+=1)n[w].c();Ve(t,"class","svelte-qnu791")},m(w,I){Er(w,t,I);for(let k=0;k<n.length;k+=1)n[k]&&n[k].m(t,null);a=!0,c||(d=[lo(t,"mouseleave",e[72]),lo(t,"blur",e[73])],c=!0)},p(w,I){I[0]&17880064&&(u=cT(w[14]),Xy(),n=RF(n,I,b,1,w,u,i,t,zF,wT,null,_T),Yy())},i(w){if(!a){for(let I=0;I<u.length;I+=1)Ur(n[I]);a=!0}},o(w){for(let I=0;I<n.length;I+=1)mi(n[I]);a=!1},d(w){w&&gr(t);for(let I=0;I<n.length;I+=1)n[I].d();c=!1,hl(d)}}}function _B(e){let t,n,i,a,c,d;return n=new uA({}),{c(){t=er("div"),mu(n.$$.fragment),i=Ho(),a=er("div"),c=fu(e[7]),Ve(a,"class","svelte-qnu791"),Ve(t,"class","no-results svelte-qnu791")},m(u,b){Er(u,t,b),al(n,t,null),wn(t,i),wn(t,a),wn(a,c),d=!0},p(u,b){(!d||b[0]&128)&&vm(c,u[7])},i(u){d||(Ur(n.$$.fragment,u),d=!0)},o(u){mi(n.$$.fragment,u),d=!1},d(u){u&&gr(t),sl(n)}}}function xB(e){let t="",n;return{c(){n=fu(t)},m(i,a){Er(i,n,a)},p:mr,i:mr,o:mr,d(i){i&&gr(n)}}}function bB(e){let t,n,i,a,c,d,u,b,w,I,k;return n=new uA({}),b=new lA({}),{c(){t=er("div"),mu(n.$$.fragment),i=Ho(),a=er("div"),c=fu(e[6]),d=Ho(),u=er("button"),mu(b.$$.fragment),Ve(a,"class","svelte-qnu791"),Ve(u,"class","svelte-qnu791"),Ve(t,"class","error svelte-qnu791")},m(P,R){Er(P,t,R),al(n,t,null),wn(t,i),wn(t,a),wn(a,c),wn(t,d),wn(t,u),al(b,u,null),w=!0,I||(k=lo(u,"click",e[69]),I=!0)},p(P,R){(!w||R[0]&64)&&vm(c,P[6])},i(P){w||(Ur(n.$$.fragment,P),Ur(b.$$.fragment,P),w=!0)},o(P){mi(n.$$.fragment,P),mi(b.$$.fragment,P),w=!1},d(P){P&&gr(t),sl(n),sl(b),I=!1,k()}}}function wT(e,t){let n,i,a;function c(){return t[70](t[85])}function d(){return t[71](t[83])}return i=new KF({props:{feature:t[83],showPlaceType:t[10],selected:t[15]===t[85],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),i.$on("mouseenter",c),i.$on("focus",d),{key:e,first:null,c(){n=SF(),mu(i.$$.fragment),this.first=n},m(u,b){Er(u,n,b),al(i,u,b),a=!0},p(u,b){t=u;const w={};b[0]&16384&&(w.feature=t[83]),b[0]&1024&&(w.showPlaceType=t[10]),b[0]&49152&&(w.selected=t[15]===t[85]),b[0]&4096&&(w.iconsBaseUrl=t[12]),i.$set(w)},i(u){a||(Ur(i.$$.fragment,u),a=!0)},o(u){mi(i.$$.fragment,u),a=!1},d(u){u&&gr(n),sl(i,u)}}}function wB(e){let t,n,i,a,c,d,u,b,w,I,k,P,R,N,V,X,D,B,j,G,te,oe=!1;c=new iB({}),k=new lA({});let ae=e[19]&&xT(),de=e[5]===!0&&bT(e);const Me=e[60].default,Z=_F(Me,e,e[59],null),Ie=[bB,xB,_B,vB],je=[];function $e(Le,Oe){var He,at;return Le[18]?0:Le[16]?((He=Le[14])==null?void 0:He.length)===0?2:Le[16]&&(at=Le[14])!=null&&at.length?3:-1:1}return~(X=$e(e))&&(D=je[X]=Ie[X](e)),{c(){t=Ho(),n=er("form"),i=er("div"),a=er("button"),mu(c.$$.fragment),d=Ho(),u=er("input"),b=Ho(),w=er("div"),I=er("button"),mu(k.$$.fragment),P=Ho(),ae&&ae.c(),R=Ho(),de&&de.c(),N=Ho(),Z&&Z.c(),V=Ho(),D&&D.c(),Ve(a,"class","search-button svelte-qnu791"),Ve(a,"type","button"),Ve(u,"placeholder",e[8]),Ve(u,"aria-label",e[8]),Ve(u,"class","svelte-qnu791"),Ve(I,"type","button"),Ve(I,"title",e[3]),Ve(I,"class","svelte-qnu791"),Ve(w,"class","clear-button-container svelte-qnu791"),Sa(w,"displayable",e[1]!==""),Ve(i,"class","input-group svelte-qnu791"),Ve(n,"tabindex","0"),Ve(n,"class",B=aT(e[2])+" svelte-qnu791"),Sa(n,"can-collapse",e[4]&&e[1]==="")},m(Le,Oe){Er(Le,t,Oe),Er(Le,n,Oe),wn(n,i),wn(i,a),al(c,a,null),wn(i,d),wn(i,u),e[62](u),sT(u,e[1]),wn(i,b),wn(i,w),wn(w,I),al(k,I,null),wn(w,P),ae&&ae.m(w,null),wn(i,R),de&&de.m(i,null),wn(i,N),Z&&Z.m(i,null),wn(n,V),~X&&je[X].m(n,null),j=!0,G||(te=[lo(a,"click",e[61]),lo(u,"input",e[63]),lo(u,"focus",e[64]),lo(u,"blur",e[65]),lo(u,"keydown",e[22]),lo(u,"input",e[66]),lo(I,"click",e[67]),lo(n,"submit",CF(e[21]))],G=!0)},p(Le,Oe){(!j||Oe[0]&256)&&Ve(u,"placeholder",Le[8]),(!j||Oe[0]&256)&&Ve(u,"aria-label",Le[8]),Oe[0]&2&&u.value!==Le[1]&&sT(u,Le[1]),(!j||Oe[0]&8)&&Ve(I,"title",Le[3]),Le[19]?ae?Oe[0]&524288&&Ur(ae,1):(ae=xT(),ae.c(),Ur(ae,1),ae.m(w,null)):ae&&(Xy(),mi(ae,1,1,()=>{ae=null}),Yy()),(!j||Oe[0]&2)&&Sa(w,"displayable",Le[1]!==""),Le[5]===!0?de?(de.p(Le,Oe),Oe[0]&32&&Ur(de,1)):(de=bT(Le),de.c(),Ur(de,1),de.m(i,N)):de&&(Xy(),mi(de,1,1,()=>{de=null}),Yy()),Z&&Z.p&&(!j||Oe[1]&268435456)&&bF(Z,Me,Le,Le[59],j?xF(Me,Le[59],Oe,null):wF(Le[59]),null);let He=X;X=$e(Le),X===He?~X&&je[X].p(Le,Oe):(D&&(Xy(),mi(je[He],1,1,()=>{je[He]=null}),Yy()),~X?(D=je[X],D?D.p(Le,Oe):(D=je[X]=Ie[X](Le),D.c()),Ur(D,1),D.m(n,null)):D=null),(!j||Oe[0]&4&&B!==(B=aT(Le[2])+" svelte-qnu791"))&&Ve(n,"class",B),(!j||Oe[0]&22)&&Sa(n,"can-collapse",Le[4]&&Le[1]==="")},i(Le){j||(Ur(oe),Ur(c.$$.fragment,Le),Ur(k.$$.fragment,Le),Ur(ae),Ur(de),Ur(Z,Le),Ur(D),j=!0)},o(Le){mi(oe),mi(c.$$.fragment,Le),mi(k.$$.fragment,Le),mi(ae),mi(de),mi(Z,Le),mi(D),j=!1},d(Le){Le&&(gr(t),gr(n)),sl(c),e[62](null),sl(k),ae&&ae.d(),de&&de.d(),Z&&Z.d(Le),~X&&je[X].d(),G=!1,hl(te)}}}function SB(e,t,n){let i,{$$slots:a={},$$scope:c}=t;const d={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:u=void 0}=t,{apiKey:b}=t,{bbox:w=void 0}=t,{clearButtonTitle:I="clear"}=t,{clearOnBlur:k=!1}=t,{collapsed:P=!1}=t,{country:R=void 0}=t,{debounceSearch:N=200}=t,{enableReverse:V=!1}=t,{errorMessage:X="Something went wrong"}=t,{filter:D=()=>!0}=t,{flyTo:B=!0}=t,{fuzzyMatch:j=!0}=t,{language:G=void 0}=t,{limit:te=void 0}=t,{mapController:oe=void 0}=t,{minLength:ae=2}=t,{noResultsMessage:de="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:Me="Search"}=t,{proximity:Z=[{type:"server-geolocation"}]}=t,{reverseActive:Ie=V==="always"}=t,{reverseButtonTitle:je="toggle reverse geocoding"}=t,{searchValue:$e=""}=t,{showFullGeometry:Le=!0}=t,{showPlaceType:Oe="ifNeeded"}=t,{showResultsWhileTyping:He=!0}=t,{selectFirst:at=!0}=t,{flyToSelected:De=!1}=t,{markerOnSelected:qe=!0}=t,{types:pt=void 0}=t,{excludeTypes:Ct=!1}=t,{zoom:Lt=d}=t,{maxZoom:jt=void 0}=t,{apiUrl:zt="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Kt={}}=t,{iconsBaseUrl:dn="https://cdn.maptiler.com/maptiler-geocoding-control/v1.4.1/icons/"}=t,{adjustUrlQuery:tn=()=>{}}=t;function jn(){gn.focus()}function kn(){gn.blur()}function Vt(ne,he=!0,Ae=!1){n(1,$e=ne),he?(n(15,ht=-1),Ge()):(it(!Ae,Ae),setTimeout(()=>{gn.focus(),gn.select()}))}function nn(){n(14,yt=void 0),n(56,Se=void 0),n(15,ht=-1)}function Wt(){n(55,Rt=[]),n(56,Se=void 0)}let _n=!1,yt,Rt,Se,ur="",gn,ht=-1,qt,un=[],ir,bt,An,yr;const Jr=new Set,vr=IF();TF(()=>{oe&&(oe.setEventHandler(void 0),oe.indicateReverse(!1),oe.setSelectedMarker(-1),oe.setMarkers(void 0,void 0))});function Ge(ne){if(bt&&(clearTimeout(bt),bt=void 0),ht>-1&&yt)n(56,Se=yt[ht]),n(1,$e=Se.place_type[0]==="reverse"?Se.place_name:Se.place_name.replace(/,.*/,"")),n(18,qt=void 0),n(55,Rt=void 0),n(15,ht=-1);else if($e){const he=ne||!cr($e);Zn($e,{exact:!0}).then(()=>{n(55,Rt=yt),n(56,Se=void 0),he&&an()}).catch(Ae=>n(18,qt=Ae))}}function cr(ne){try{return yB(ne,6)}catch{return!1}}async function Zn(ne,{byId:he=!1,exact:Ae=!1}={}){n(18,qt=void 0),ir==null||ir.abort();const Re=new AbortController;n(19,ir=Re);try{const Ce=cr(ne),Ue=new URLSearchParams;if(G!==void 0&&Ue.set("language",Array.isArray(G)?G.join(","):G??""),pt&&Ue.set("types",pt.join(",")),Ct&&Ue.set("excludeTypes",String(Ct)),w&&Ue.set("bbox",w.map(Ot=>Ot.toFixed(6)).join(",")),R&&Ue.set("country",Array.isArray(R)?R.join(","):R),!he&&!Ce){const Ot=await aB(oe,Z,Re);Ot&&Ue.set("proximity",Ot),(Ae||!He)&&Ue.set("autocomplete","false"),Ue.set("fuzzyMatch",String(j))}te!==void 0&&(!Ce||(pt==null?void 0:pt.length)===1)&&Ue.set("limit",String(te)),Ue.set("key",b),tn(Ue);const ft=zt+"/"+encodeURIComponent(Ce?Ce.decimalLongitude+","+Ce.decimalLatitude:ne)+".json?"+Ue.toString();if(ft===ur){he?(n(14,yt=void 0),n(56,Se=un[0])):n(14,yt=un);return}ur=ft;const Tt=await fetch(ft,{signal:Re.signal,...Kt});if(!Tt.ok)throw new Error(await Tt.text());const Jt=await Tt.json();vr("response",{url:ft,featureCollection:Jt}),he?(n(14,yt=void 0),n(56,Se=Jt.features[0]),un=[Se]):(n(14,yt=Jt.features.filter(D)),Ce&&yt.unshift({type:"Feature",properties:{},id:"reverse_"+Ce.decimalLongitude+"_"+Ce.decimalLatitude,text:Ce.decimalLatitude+", "+Ce.decimalLongitude,place_name:Ce.decimalLatitude+", "+Ce.decimalLongitude,place_type:["reverse"],center:[Ce.decimalLongitude,Ce.decimalLatitude],bbox:[Ce.decimalLongitude,Ce.decimalLatitude,Ce.decimalLongitude,Ce.decimalLatitude],geometry:{type:"Point",coordinates:[Ce.decimalLongitude,Ce.decimalLatitude]}}),un=yt,Ce&&gn.focus())}catch(Ce){if(Ce&&typeof Ce=="object"&&"name"in Ce&&Ce.name==="AbortError")return;throw Ce}finally{Re===ir&&n(19,ir=void 0)}}function an(){var ne;if(!(Rt!=null&&Rt.length)||!B)return;const he=[180,90,-180,-90],Ae=!Rt.some(Ce=>!Ce.matching_text);let Re;for(const Ce of Rt){const Ue=Lr(Ce);if(Re=jt??(Re===void 0?Ue:Ue===void 0?Re:Math.max(Re,Ue)),Ae||!Ce.matching_text)for(const ft of[0,1,2,3])he[ft]=Math[ft<2?"min":"max"](he[ft],((ne=Ce.bbox)==null?void 0:ne[ft])??Ce.center[ft%2])}oe&&Rt.length>0&&(Se&&he[0]===he[2]&&he[1]===he[3]?oe.flyTo(Se.center,Lr(Se)):oe.fitBounds($0(he),50,Re))}function Lr(ne){var he;if(!ne.bbox||ne.bbox[0]!==ne.bbox[2]&&ne.bbox[1]!==ne.bbox[3])return;if(typeof Lt=="number")return ne.id.startsWith("poi.")||ne.id.startsWith("address.")?jt:Lt;const Ae=ne.id.replace(/\..*/,"");return(Array.isArray((he=ne.properties)==null?void 0:he.categories)?ne.properties.categories.reduce((Re,Ce)=>{const Ue=Lt[Ae+"."+Ce];return Re===void 0?Ue:Ue===void 0?Re:Math.max(Re,Ue)},void 0):void 0)??Lt[Ae]}function Ke(ne){n(0,Ie=V==="always"),n(14,yt=void 0),n(56,Se=void 0),n(15,ht=-1),Vt(ne[1].toFixed(6)+", "+oB(ne[0],[-180,180],!0).toFixed(6),!1,!0)}function Xe(ne){if(!yt)return;let he=ne.key==="ArrowDown"?1:ne.key==="ArrowUp"?-1:0;he&&(ht===(at?0:-1)&&he===-1&&n(15,ht=yt.length),n(15,ht+=he),ht>=yt.length&&n(15,ht=-1),ht<0&&at&&n(15,ht=0),ne.preventDefault())}function it(ne=!0,he=!1){if(n(18,qt=void 0),He||he){if(bt&&clearTimeout(bt),$e.length<ae)return;const Ae=$e;bt=window.setTimeout(()=>{Zn(Ae).catch(Re=>n(18,qt=Re))},ne?N:0)}else n(14,yt=void 0),n(18,qt=void 0)}function cn(ne){n(56,Se=ne),n(1,$e=ne.place_name),n(15,ht=-1)}const zr=()=>gn.focus();function Dt(ne){Gb[ne?"unshift":"push"](()=>{gn=ne,n(17,gn)})}function po(){$e=this.value,n(1,$e),n(13,_n),n(28,k)}const Mo=()=>n(13,_n=!0),ia=()=>n(13,_n=!1),fo=()=>it(),pe=()=>{n(1,$e=""),gn.focus()},q=()=>n(0,Ie=!Ie),W=()=>n(18,qt=void 0),Q=ne=>n(15,ht=ne),le=ne=>cn(ne),ve=()=>{at||n(15,ht=-1)},we=()=>{};return e.$$set=ne=>{"class"in ne&&n(2,u=ne.class),"apiKey"in ne&&n(26,b=ne.apiKey),"bbox"in ne&&n(27,w=ne.bbox),"clearButtonTitle"in ne&&n(3,I=ne.clearButtonTitle),"clearOnBlur"in ne&&n(28,k=ne.clearOnBlur),"collapsed"in ne&&n(4,P=ne.collapsed),"country"in ne&&n(29,R=ne.country),"debounceSearch"in ne&&n(30,N=ne.debounceSearch),"enableReverse"in ne&&n(5,V=ne.enableReverse),"errorMessage"in ne&&n(6,X=ne.errorMessage),"filter"in ne&&n(31,D=ne.filter),"flyTo"in ne&&n(32,B=ne.flyTo),"fuzzyMatch"in ne&&n(33,j=ne.fuzzyMatch),"language"in ne&&n(34,G=ne.language),"limit"in ne&&n(35,te=ne.limit),"mapController"in ne&&n(36,oe=ne.mapController),"minLength"in ne&&n(37,ae=ne.minLength),"noResultsMessage"in ne&&n(7,de=ne.noResultsMessage),"placeholder"in ne&&n(8,Me=ne.placeholder),"proximity"in ne&&n(38,Z=ne.proximity),"reverseActive"in ne&&n(0,Ie=ne.reverseActive),"reverseButtonTitle"in ne&&n(9,je=ne.reverseButtonTitle),"searchValue"in ne&&n(1,$e=ne.searchValue),"showFullGeometry"in ne&&n(39,Le=ne.showFullGeometry),"showPlaceType"in ne&&n(10,Oe=ne.showPlaceType),"showResultsWhileTyping"in ne&&n(40,He=ne.showResultsWhileTyping),"selectFirst"in ne&&n(11,at=ne.selectFirst),"flyToSelected"in ne&&n(41,De=ne.flyToSelected),"markerOnSelected"in ne&&n(42,qe=ne.markerOnSelected),"types"in ne&&n(43,pt=ne.types),"excludeTypes"in ne&&n(44,Ct=ne.excludeTypes),"zoom"in ne&&n(45,Lt=ne.zoom),"maxZoom"in ne&&n(46,jt=ne.maxZoom),"apiUrl"in ne&&n(47,zt=ne.apiUrl),"fetchParameters"in ne&&n(48,Kt=ne.fetchParameters),"iconsBaseUrl"in ne&&n(12,dn=ne.iconsBaseUrl),"adjustUrlQuery"in ne&&n(49,tn=ne.adjustUrlQuery),"$$scope"in ne&&n(59,c=ne.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&32&&n(0,Ie=V==="always"),e.$$.dirty[0]&268443648&&setTimeout(()=>{n(16,An=_n),k&&!_n&&n(1,$e="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&64&&$e.length<ae&&(n(56,Se=void 0),n(14,yt=void 0),n(18,qt=void 0),n(55,Rt=yt)),e.$$.dirty[1]&33554688&&Le&&Se&&!Se.address&&Se.geometry.type==="Point"&&Se.place_type[0]!=="reverse"&&Zn(Se.id,{byId:!0}).catch(ne=>n(18,qt=ne)),e.$$.dirty[1]&100663330&&(oe&&Se&&Se.id!==yr&&B&&(!Se.bbox||Se.bbox[0]===Se.bbox[2]&&Se.bbox[1]===Se.bbox[3]?oe.flyTo(Se.center,Lr(Se)):oe.fitBounds($0(Se.bbox),50,Lr(Se)),n(14,yt=void 0),n(55,Rt=void 0),n(15,ht=-1)),n(57,yr=Se==null?void 0:Se.id)),e.$$.dirty[0]&18432&&at&&yt!=null&&yt.length&&n(15,ht=0),e.$$.dirty[0]&2050&&(at||n(15,ht=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&16777216&&Rt!==yt&&n(55,Rt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&16777248&&oe&&oe.setEventHandler(ne=>{switch(ne.type){case"mapClick":Ie&&Ke(ne.coordinates);break;case"markerClick":{const he=yt==null?void 0:yt.find(Ae=>Ae.id===ne.id);he&&cn(he)}break;case"markerMouseEnter":Rt&&n(15,ht=An?(yt==null?void 0:yt.findIndex(he=>he.id===ne.id))??-1:-1);break;case"markerMouseLeave":Rt&&n(15,ht=-1);break}}),e.$$.dirty[0]&49152&&n(58,i=yt==null?void 0:yt[ht]),e.$$.dirty[1]&134218786&&oe&&i&&B&&De&&oe.flyTo(i.center,Lr(i)),e.$$.dirty[1]&2080&&(qe||oe==null||oe.setMarkers(void 0,void 0)),e.$$.dirty[1]&150997024&&oe&&qe&&!Rt&&(oe.setMarkers(i?[i]:void 0,void 0),oe.setSelectedMarker(i?0:-1)),e.$$.dirty[1]&50331680&&oe&&oe.setMarkers(Rt,Se),e.$$.dirty[0]&32768|e.$$.dirty[1]&16777248&&Rt&&oe&&oe.setSelectedMarker(ht),e.$$.dirty[0]&2|e.$$.dirty[1]&32&&oe){const ne=cr($e);oe.setReverseMarker(ne?[ne.decimalLongitude,ne.decimalLatitude]:void 0)}e.$$.dirty[1]&134217728&&vr("select",i),e.$$.dirty[1]&33554432&&vr("pick",Se),e.$$.dirty[0]&81920&&vr("optionsVisibilityChange",An&&!!yt),e.$$.dirty[0]&16384&&vr("featuresListed",yt),e.$$.dirty[1]&16777216&&vr("featuresMarked",Rt),e.$$.dirty[0]&1&&vr("reverseToggle",Ie),e.$$.dirty[0]&2&&vr("queryChange",$e),e.$$.dirty[0]&1|e.$$.dirty[1]&32&&oe&&oe.indicateReverse(Ie)},[Ie,$e,u,I,P,V,X,de,Me,je,Oe,at,dn,_n,yt,ht,An,gn,qt,ir,Jr,Ge,Xe,it,cn,d,b,w,k,R,N,D,B,j,G,te,oe,ae,Z,Le,He,De,qe,pt,Ct,Lt,jt,zt,Kt,tn,jn,kn,Vt,nn,Wt,Rt,Se,yr,i,c,a,zr,Dt,po,Mo,ia,fo,pe,q,W,Q,le,ve,we]}let CB=class extends Su{constructor(e){super(),wu(this,e,SB,wB,bu,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,excludeTypes:44,zoom:45,maxZoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}};function xm(e,t,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function $2(e,t,n={}){for(const i of e){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}return xm({type:"Polygon",coordinates:e},t,n)}function bm(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function cA(e,t,n={}){return xm({type:"MultiPolygon",coordinates:e},t,n)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function kB(e,t){var n={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},i,a,c,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(w){return function(I){return b([w,I])}}function b(w){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,a&&(c=w[0]&2?a.return:w[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,w[1])).done)return c;switch(a=0,c&&(w=[w[0]&2,c.value]),w[0]){case 0:case 1:c=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(c=n.trys,!(c=c.length>0&&c[c.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!c||w[1]>c[0]&&w[1]<c[3])){n.label=w[1];break}if(w[0]===6&&n.label<c[1]){n.label=c[1],c=w;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(w);break}c[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(I){w=[6,I],a=0}finally{i=c=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var gu=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function EB(e,t){return e>t?1:e<t?-1:0}function Jl(e,t,n){for(var i=new gu(null,null),a=i,c=i;;){var d=n(e,t.key);if(d<0){if(t.left===null)break;if(n(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}c.left=t,c=t,t=t.left}else if(d>0){if(t.right===null)break;if(n(e,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}a.right=t,a=t,t=t.right}else break}return a.right=t.left,c.left=t.right,t.left=i.right,t.right=i.left,t}function xx(e,t,n,i){var a=new gu(e,t);if(n===null)return a.left=a.right=null,a;n=Jl(e,n,i);var c=i(e,n.key);return c<0?(a.left=n.left,a.right=n,n.left=null):c>=0&&(a.right=n.right,a.left=n,n.right=null),a}function ST(e,t,n){var i=null,a=null;if(t){t=Jl(e,t,n);var c=n(t.key,e);c===0?(i=t.left,a=t.right):c<0?(a=t.right,t.right=null,i=t):(i=t.left,t.left=null,a=t)}return{left:i,right:a}}function TB(e,t,n){return t===null?e:(e===null||(t=Jl(e.key,t,n),t.left=e),t)}function Xb(e,t,n,i,a){if(e){i(""+t+(n?" ":" ")+a(e)+`
`);var c=t+(n?"    ":"   ");e.left&&Xb(e.left,c,!1,i,a),e.right&&Xb(e.right,c,!0,i,a)}}var O2=function(){function e(t){t===void 0&&(t=EB),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=xx(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var i=new gu(t,n);this._root===null&&(i.left=i.right=null,this._size++,this._root=i);var a=this._comparator,c=Jl(t,this._root,a),d=a(t,c.key);return d===0?this._root=c:(d<0?(i.left=c.left,i.right=c,c.left=null):d>0&&(i.right=c.right,i.left=c,c.right=null),this._size++,this._root=i),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,i){var a;if(n===null)return null;n=Jl(t,n,i);var c=i(t,n.key);return c===0?(n.left===null?a=n.right:(a=Jl(t,n.left,i),a.right=n.right),this._size--,a):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Jl(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,i=this._comparator;n;){var a=i(t,n.key);if(a===0)return n;a<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Jl(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,i=this._comparator;n;){var a=i(t,n.key);if(a===0)return!0;a<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var i=this._root,a=[],c=!1;!c;)i!==null?(a.push(i),i=i.left):a.length!==0?(i=a.pop(),t.call(n,i),i=i.right):c=!0;return this},e.prototype.range=function(t,n,i,a){for(var c=[],d=this._comparator,u=this._root,b;c.length!==0||u;)if(u)c.push(u),u=u.left;else{if(u=c.pop(),b=d(u.key,n),b>0)break;if(d(u.key,t)>=0&&i.call(a,u))return this;u=u.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var i=n.key;return t.push(i)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var i=n.data;return t.push(i)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,i=!1,a=0,c=[];!i;)if(n)c.push(n),n=n.left;else if(c.length>0){if(n=c.pop(),a===t)return n;a++,n=n.right}else i=!0;return null},e.prototype.next=function(t){var n=this._root,i=null;if(t.right){for(i=t.right;i.left;)i=i.left;return i}for(var a=this._comparator;n;){var c=a(t.key,n.key);if(c===0)break;c<0?(i=n,n=n.left):n=n.right}return i},e.prototype.prev=function(t){var n=this._root,i=null;if(t.left!==null){for(i=t.left;i.right;)i=i.right;return i}for(var a=this._comparator;n;){var c=a(t.key,n.key);if(c===0)break;c<0?n=n.left:(i=n,n=n.right)}return i},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return PB(this._root)},e.prototype.load=function(t,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1);var a=t.length,c=this._comparator;if(i&&Qb(t,n,0,a-1,c),this._root===null)this._root=Yb(t,n,0,a),this._size=a;else{var d=MB(this.toList(),IB(t,n),c);a=this._size+a,this._root=Jb({head:d},0,a)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(i){return String(i.key)});var n=[];return Xb(this._root,"",!0,function(i){return n.push(i)},t),n.join("")},e.prototype.update=function(t,n,i){var a=this._comparator,c=ST(t,this._root,a),d=c.left,u=c.right;a(t,n)<0?u=xx(n,i,u,a):d=xx(n,i,d,a),this._root=TB(d,u,a)},e.prototype.split=function(t){return ST(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,i;return kB(this,function(a){switch(a.label){case 0:t=this._root,n=[],i=!1,a.label=1;case 1:return i?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return a.sent(),t=t.right,[3,5];case 4:i=!0,a.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function Yb(e,t,n,i){var a=i-n;if(a>0){var c=n+Math.floor(a/2),d=e[c],u=t[c],b=new gu(d,u);return b.left=Yb(e,t,n,c),b.right=Yb(e,t,c+1,i),b}return null}function IB(e,t){for(var n=new gu(null,null),i=n,a=0;a<e.length;a++)i=i.next=new gu(e[a],t[a]);return i.next=null,n.next}function PB(e){for(var t=e,n=[],i=!1,a=new gu(null,null),c=a;!i;)t?(n.push(t),t=t.left):n.length>0?(t=c=c.next=n.pop(),t=t.right):i=!0;return c.next=null,a.next}function Jb(e,t,n){var i=n-t;if(i>0){var a=t+Math.floor(i/2),c=Jb(e,t,a),d=e.head;return d.left=c,e.head=e.head.next,d.right=Jb(e,a+1,n),d}return null}function MB(e,t,n){for(var i=new gu(null,null),a=i,c=e,d=t;c!==null&&d!==null;)n(c.key,d.key)<0?(a.next=c,c=c.next):(a.next=d,d=d.next),a=a.next;return c!==null?a.next=c:d!==null&&(a.next=d),i.next}function Qb(e,t,n,i,a){if(!(n>=i)){for(var c=e[n+i>>1],d=n-1,u=i+1;;){do d++;while(a(e[d],c)<0);do u--;while(a(e[u],c)>0);if(d>=u)break;var b=e[d];e[d]=e[u],e[u]=b,b=t[d],t[d]=t[u],t[u]=b}Qb(e,t,n,u,a),Qb(e,t,u+1,i,a)}}const Qs=11102230246251565e-32,Ui=134217729,AB=(3+8*Qs)*Qs;function bx(e,t,n,i,a){let c,d,u,b,w=t[0],I=i[0],k=0,P=0;I>w==I>-w?(c=w,w=t[++k]):(c=I,I=i[++P]);let R=0;if(k<e&&P<n)for(I>w==I>-w?(d=w+c,u=c-(d-w),w=t[++k]):(d=I+c,u=c-(d-I),I=i[++P]),c=d,u!==0&&(a[R++]=u);k<e&&P<n;)I>w==I>-w?(d=c+w,b=d-c,u=c-(d-b)+(w-b),w=t[++k]):(d=c+I,b=d-c,u=c-(d-b)+(I-b),I=i[++P]),c=d,u!==0&&(a[R++]=u);for(;k<e;)d=c+w,b=d-c,u=c-(d-b)+(w-b),w=t[++k],c=d,u!==0&&(a[R++]=u);for(;P<n;)d=c+I,b=d-c,u=c-(d-b)+(I-b),I=i[++P],c=d,u!==0&&(a[R++]=u);return(c!==0||R===0)&&(a[R++]=c),R}function LB(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Nm(e){return new Float64Array(e)}const zB=(3+16*Qs)*Qs,RB=(2+12*Qs)*Qs,DB=(9+64*Qs)*Qs*Qs,Ih=Nm(4),CT=Nm(8),kT=Nm(12),ET=Nm(16),ro=Nm(4);function $B(e,t,n,i,a,c,d){let u,b,w,I,k,P,R,N,V,X,D,B,j,G,te,oe,ae,de;const Me=e-a,Z=n-a,Ie=t-c,je=i-c;G=Me*je,P=Ui*Me,R=P-(P-Me),N=Me-R,P=Ui*je,V=P-(P-je),X=je-V,te=N*X-(G-R*V-N*V-R*X),oe=Ie*Z,P=Ui*Ie,R=P-(P-Ie),N=Ie-R,P=Ui*Z,V=P-(P-Z),X=Z-V,ae=N*X-(oe-R*V-N*V-R*X),D=te-ae,k=te-D,Ih[0]=te-(D+k)+(k-ae),B=G+D,k=B-G,j=G-(B-k)+(D-k),D=j-oe,k=j-D,Ih[1]=j-(D+k)+(k-oe),de=B+D,k=de-B,Ih[2]=B-(de-k)+(D-k),Ih[3]=de;let $e=LB(4,Ih),Le=RB*d;if($e>=Le||-$e>=Le||(k=e-Me,u=e-(Me+k)+(k-a),k=n-Z,w=n-(Z+k)+(k-a),k=t-Ie,b=t-(Ie+k)+(k-c),k=i-je,I=i-(je+k)+(k-c),u===0&&b===0&&w===0&&I===0)||(Le=DB*d+AB*Math.abs($e),$e+=Me*I+je*u-(Ie*w+Z*b),$e>=Le||-$e>=Le))return $e;G=u*je,P=Ui*u,R=P-(P-u),N=u-R,P=Ui*je,V=P-(P-je),X=je-V,te=N*X-(G-R*V-N*V-R*X),oe=b*Z,P=Ui*b,R=P-(P-b),N=b-R,P=Ui*Z,V=P-(P-Z),X=Z-V,ae=N*X-(oe-R*V-N*V-R*X),D=te-ae,k=te-D,ro[0]=te-(D+k)+(k-ae),B=G+D,k=B-G,j=G-(B-k)+(D-k),D=j-oe,k=j-D,ro[1]=j-(D+k)+(k-oe),de=B+D,k=de-B,ro[2]=B-(de-k)+(D-k),ro[3]=de;const Oe=bx(4,Ih,4,ro,CT);G=Me*I,P=Ui*Me,R=P-(P-Me),N=Me-R,P=Ui*I,V=P-(P-I),X=I-V,te=N*X-(G-R*V-N*V-R*X),oe=Ie*w,P=Ui*Ie,R=P-(P-Ie),N=Ie-R,P=Ui*w,V=P-(P-w),X=w-V,ae=N*X-(oe-R*V-N*V-R*X),D=te-ae,k=te-D,ro[0]=te-(D+k)+(k-ae),B=G+D,k=B-G,j=G-(B-k)+(D-k),D=j-oe,k=j-D,ro[1]=j-(D+k)+(k-oe),de=B+D,k=de-B,ro[2]=B-(de-k)+(D-k),ro[3]=de;const He=bx(Oe,CT,4,ro,kT);G=u*I,P=Ui*u,R=P-(P-u),N=u-R,P=Ui*I,V=P-(P-I),X=I-V,te=N*X-(G-R*V-N*V-R*X),oe=b*w,P=Ui*b,R=P-(P-b),N=b-R,P=Ui*w,V=P-(P-w),X=w-V,ae=N*X-(oe-R*V-N*V-R*X),D=te-ae,k=te-D,ro[0]=te-(D+k)+(k-ae),B=G+D,k=B-G,j=G-(B-k)+(D-k),D=j-oe,k=j-D,ro[1]=j-(D+k)+(k-oe),de=B+D,k=de-B,ro[2]=B-(de-k)+(D-k),ro[3]=de;const at=bx(He,kT,4,ro,ET);return ET[at-1]}function OB(e,t,n,i,a,c){const d=(t-c)*(n-a),u=(e-a)*(i-c),b=d-u,w=Math.abs(d+u);return Math.abs(b)>=zB*w?b:-$B(e,t,n,i,a,c,w)}const df=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,ew=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,i=e.ur.x<t.ur.x?e.ur.x:t.ur.x,a=e.ll.y<t.ll.y?t.ll.y:e.ll.y,c=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:a},ur:{x:i,y:c}}};let nu=Number.EPSILON;nu===void 0&&(nu=Math.pow(2,-52));const FB=nu*nu,TT=(e,t)=>{if(-nu<e&&e<nu&&-nu<t&&t<nu)return 0;const n=e-t;return n*n<FB*e*t?0:e<t?-1:1};class BB{constructor(){this.reset()}reset(){this.xRounder=new IT,this.yRounder=new IT}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class IT{constructor(){this.tree=new O2,this.round(0)}round(t){const n=this.tree.add(t),i=this.tree.prev(n);if(i!==null&&TT(n.key,i.key)===0)return this.tree.remove(t),i.key;const a=this.tree.next(n);return a!==null&&TT(n.key,a.key)===0?(this.tree.remove(t),a.key):t}}const wm=new BB,Jy=(e,t)=>e.x*t.y-e.y*t.x,hA=(e,t)=>e.x*t.x+e.y*t.y,PT=(e,t,n)=>{const i=OB(e.x,e.y,t.x,t.y,n.x,n.y);return i>0?-1:i<0?1:0},O0=e=>Math.sqrt(hA(e,e)),NB=(e,t,n)=>{const i={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return Jy(a,i)/O0(a)/O0(i)},jB=(e,t,n)=>{const i={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return hA(a,i)/O0(a)/O0(i)},MT=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},AT=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},UB=(e,t,n,i)=>{if(t.x===0)return AT(n,i,e.x);if(i.x===0)return AT(e,t,n.x);if(t.y===0)return MT(n,i,e.y);if(i.y===0)return MT(e,t,n.y);const a=Jy(t,i);if(a==0)return null;const c={x:n.x-e.x,y:n.y-e.y},d=Jy(c,t)/a,u=Jy(c,i)/a,b=e.x+u*t.x,w=n.x+d*i.x,I=e.y+u*t.y,k=n.y+d*i.y,P=(b+w)/2,R=(I+k)/2;return{x:P,y:R}};class fa{static compare(t,n){const i=fa.comparePoints(t.point,n.point);return i!==0?i:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:hu.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let i=0,a=n.length;i<a;i++){const c=n[i];this.point.events.push(c),c.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const i=this.point.events[n];if(i.segment.consumedBy===void 0)for(let a=n+1;a<t;a++){const c=this.point.events[a];c.consumedBy===void 0&&i.otherSE.point.events===c.otherSE.point.events&&i.segment.consume(c.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,i=this.point.events.length;n<i;n++){const a=this.point.events[n];a!==this&&!a.segment.ringOut&&a.segment.isInResult()&&t.push(a)}return t}getLeftmostComparator(t){const n=new Map,i=a=>{const c=a.otherSE;n.set(a,{sine:NB(this.point,t.point,c.point),cosine:jB(this.point,t.point,c.point)})};return(a,c)=>{n.has(a)||i(a),n.has(c)||i(c);const{sine:d,cosine:u}=n.get(a),{sine:b,cosine:w}=n.get(c);return d>=0&&b>=0?u<w?1:u>w?-1:0:d<0&&b<0?u<w?-1:u>w?1:0:b<d?-1:b>d?1:0}}}let VB=0;class hu{static compare(t,n){const i=t.leftSE.point.x,a=n.leftSE.point.x,c=t.rightSE.point.x,d=n.rightSE.point.x;if(d<i)return 1;if(c<a)return-1;const u=t.leftSE.point.y,b=n.leftSE.point.y,w=t.rightSE.point.y,I=n.rightSE.point.y;if(i<a){if(b<u&&b<w)return 1;if(b>u&&b>w)return-1;const k=t.comparePoint(n.leftSE.point);if(k<0)return 1;if(k>0)return-1;const P=n.comparePoint(t.rightSE.point);return P!==0?P:-1}if(i>a){if(u<b&&u<I)return-1;if(u>b&&u>I)return 1;const k=n.comparePoint(t.leftSE.point);if(k!==0)return k;const P=t.comparePoint(n.rightSE.point);return P<0?1:P>0?-1:1}if(u<b)return-1;if(u>b)return 1;if(c<d){const k=n.comparePoint(t.rightSE.point);if(k!==0)return k}if(c>d){const k=t.comparePoint(n.rightSE.point);if(k<0)return 1;if(k>0)return-1}if(c!==d){const k=w-u,P=c-i,R=I-b,N=d-a;if(k>P&&R<N)return 1;if(k<P&&R>N)return-1}return c>d?1:c<d||w<I?-1:w>I?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,i,a){this.id=++VB,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=i,this.windings=a}static fromRing(t,n,i){let a,c,d;const u=fa.comparePoints(t,n);if(u<0)a=t,c=n,d=1;else if(u>0)a=n,c=t,d=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const b=new fa(a,!0),w=new fa(c,!1);return new hu(b,w,[i],[d])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,i=this.rightSE.point,a=this.vector();if(n.x===i.x)return t.x===n.x?0:t.x<n.x?1:-1;const c=(t.y-n.y)/a.y,d=n.x+c*a.x;if(t.x===d)return 0;const u=(t.x-n.x)/a.x,b=n.y+u*a.y;return t.y===b?0:t.y<b?-1:1}getIntersection(t){const n=this.bbox(),i=t.bbox(),a=ew(n,i);if(a===null)return null;const c=this.leftSE.point,d=this.rightSE.point,u=t.leftSE.point,b=t.rightSE.point,w=df(n,u)&&this.comparePoint(u)===0,I=df(i,c)&&t.comparePoint(c)===0,k=df(n,b)&&this.comparePoint(b)===0,P=df(i,d)&&t.comparePoint(d)===0;if(I&&w)return P&&!k?d:!P&&k?b:null;if(I)return k&&c.x===b.x&&c.y===b.y?null:c;if(w)return P&&d.x===u.x&&d.y===u.y?null:u;if(P&&k)return null;if(P)return d;if(k)return b;const R=UB(c,this.vector(),u,t.vector());return R===null||!df(a,R)?null:wm.round(R.x,R.y)}split(t){const n=[],i=t.events!==void 0,a=new fa(t,!0),c=new fa(t,!1),d=this.rightSE;this.replaceRightSE(c),n.push(c),n.push(a);const u=new hu(a,d,this.rings.slice(),this.windings.slice());return fa.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),fa.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(a.checkForConsuming(),c.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}consume(t){let n=this,i=t;for(;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;const a=hu.compare(n,i);if(a!==0){if(a>0){const c=n;n=i,i=c}if(n.prev===i){const c=n;n=i,i=c}for(let c=0,d=i.rings.length;c<d;c++){const u=i.rings[c],b=i.windings[c],w=n.rings.indexOf(u);w===-1?(n.rings.push(u),n.windings.push(b)):n.windings[w]+=b}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,i=this._afterState.windings,a=this._afterState.multiPolys;for(let u=0,b=this.rings.length;u<b;u++){const w=this.rings[u],I=this.windings[u],k=n.indexOf(w);k===-1?(n.push(w),i.push(I)):i[k]+=I}const c=[],d=[];for(let u=0,b=n.length;u<b;u++){if(i[u]===0)continue;const w=n[u],I=w.poly;if(d.indexOf(I)===-1)if(w.isExterior)c.push(I);else{d.indexOf(I)===-1&&d.push(I);const k=c.indexOf(w.poly);k!==-1&&c.splice(k,1)}}for(let u=0,b=c.length;u<b;u++){const w=c[u].multiPoly;a.indexOf(w)===-1&&a.push(w)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Ha.type){case"union":{const i=t.length===0,a=n.length===0;this._isInResult=i!==a;break}case"intersection":{let i,a;t.length<n.length?(i=t.length,a=n.length):(i=n.length,a=t.length),this._isInResult=a===Ha.numMultiPolys&&i<a;break}case"xor":{const i=Math.abs(t.length-n.length);this._isInResult=i%2===1;break}case"difference":{const i=a=>a.length===1&&a[0].isSubject;this._isInResult=i(t)!==i(n);break}default:throw new Error(`Unrecognized operation type found ${Ha.type}`)}return this._isInResult}}class LT{constructor(t,n,i){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=i,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=wm.round(t[0][0],t[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};let c=a;for(let d=1,u=t.length;d<u;d++){if(typeof t[d][0]!="number"||typeof t[d][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=wm.round(t[d][0],t[d][1]);b.x===c.x&&b.y===c.y||(this.segments.push(hu.fromRing(c,b,this)),b.x<this.bbox.ll.x&&(this.bbox.ll.x=b.x),b.y<this.bbox.ll.y&&(this.bbox.ll.y=b.y),b.x>this.bbox.ur.x&&(this.bbox.ur.x=b.x),b.y>this.bbox.ur.y&&(this.bbox.ur.y=b.y),c=b)}(a.x!==c.x||a.y!==c.y)&&this.segments.push(hu.fromRing(c,a,this))}getSweepEvents(){const t=[];for(let n=0,i=this.segments.length;n<i;n++){const a=this.segments[n];t.push(a.leftSE),t.push(a.rightSE)}return t}}class WB{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new LT(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let i=1,a=t.length;i<a;i++){const c=new LT(t[i],this,!1);c.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=c.bbox.ur.y),this.interiorRings.push(c)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,i=this.interiorRings.length;n<i;n++){const a=this.interiorRings[n].getSweepEvents();for(let c=0,d=a.length;c<d;c++)t.push(a[c])}return t}}class zT{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let i=0,a=t.length;i<a;i++){const c=new WB(t[i],this);c.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=c.bbox.ll.x),c.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=c.bbox.ll.y),c.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=c.bbox.ur.x),c.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=c.bbox.ur.y),this.polys.push(c)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,i=this.polys.length;n<i;n++){const a=this.polys[n].getSweepEvents();for(let c=0,d=a.length;c<d;c++)t.push(a[c])}return t}}class F0{static factory(t){const n=[];for(let i=0,a=t.length;i<a;i++){const c=t[i];if(!c.isInResult()||c.ringOut)continue;let d=null,u=c.leftSE,b=c.rightSE;const w=[u],I=u.point,k=[];for(;d=u,u=b,w.push(u),u.point!==I;)for(;;){const P=u.getAvailableLinkedEvents();if(P.length===0){const V=w[0].point,X=w[w.length-1].point;throw new Error(`Unable to complete output ring starting at [${V.x}, ${V.y}]. Last matching segment found ends at [${X.x}, ${X.y}].`)}if(P.length===1){b=P[0].otherSE;break}let R=null;for(let V=0,X=k.length;V<X;V++)if(k[V].point===u.point){R=V;break}if(R!==null){const V=k.splice(R)[0],X=w.splice(V.index);X.unshift(X[0].otherSE),n.push(new F0(X.reverse()));continue}k.push({index:w.length,point:u.point});const N=u.getLeftmostComparator(d);b=P.sort(N)[0].otherSE;break}n.push(new F0(w))}return n}constructor(t){this.events=t;for(let n=0,i=t.length;n<i;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let w=1,I=this.events.length-1;w<I;w++){const k=this.events[w].point,P=this.events[w+1].point;PT(k,t,P)!==0&&(n.push(k),t=k)}if(n.length===1)return null;const i=n[0],a=n[1];PT(i,t,a)===0&&n.shift(),n.push(n[0]);const c=this.isExteriorRing()?1:-1,d=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,b=[];for(let w=d;w!=u;w+=c)b.push([n[w].x,n[w].y]);return b}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let a=1,c=this.events.length;a<c;a++){const d=this.events[a];fa.compare(t,d)>0&&(t=d)}let n=t.segment.prevInResult(),i=n?n.prevInResult():null;for(;;){if(!n)return null;if(!i)return n.ringOut;if(i.ringOut!==n.ringOut)return i.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=i.prevInResult(),i=n?n.prevInResult():null}}}class RT{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,i=this.interiorRings.length;n<i;n++){const a=this.interiorRings[n].getGeom();a!==null&&t.push(a)}return t}}class qB{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,i=this.polys.length;n<i;n++){const a=this.polys[n].getGeom();a!==null&&t.push(a)}return t}_composePolys(t){const n=[];for(let i=0,a=t.length;i<a;i++){const c=t[i];if(!c.poly)if(c.isExteriorRing())n.push(new RT(c));else{const d=c.enclosingRing();d.poly||n.push(new RT(d)),d.poly.addInterior(c)}}return n}}class HB{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:hu.compare;this.queue=t,this.tree=new O2(n),this.segments=[]}process(t){const n=t.segment,i=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),i;const a=t.isLeft?this.tree.add(n):this.tree.find(n);if(!a)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let c=a,d=a,u,b;for(;u===void 0;)c=this.tree.prev(c),c===null?u=null:c.key.consumedBy===void 0&&(u=c.key);for(;b===void 0;)d=this.tree.next(d),d===null?b=null:d.key.consumedBy===void 0&&(b=d.key);if(t.isLeft){let w=null;if(u){const k=u.getIntersection(n);if(k!==null&&(n.isAnEndpoint(k)||(w=k),!u.isAnEndpoint(k))){const P=this._splitSafely(u,k);for(let R=0,N=P.length;R<N;R++)i.push(P[R])}}let I=null;if(b){const k=b.getIntersection(n);if(k!==null&&(n.isAnEndpoint(k)||(I=k),!b.isAnEndpoint(k))){const P=this._splitSafely(b,k);for(let R=0,N=P.length;R<N;R++)i.push(P[R])}}if(w!==null||I!==null){let k=null;w===null?k=I:I===null?k=w:k=fa.comparePoints(w,I)<=0?w:I,this.queue.remove(n.rightSE),i.push(n.rightSE);const P=n.split(k);for(let R=0,N=P.length;R<N;R++)i.push(P[R])}i.length>0?(this.tree.remove(n),i.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&b){const w=u.getIntersection(b);if(w!==null){if(!u.isAnEndpoint(w)){const I=this._splitSafely(u,w);for(let k=0,P=I.length;k<P;k++)i.push(I[k])}if(!b.isAnEndpoint(w)){const I=this._splitSafely(b,w);for(let k=0,P=I.length;k<P;k++)i.push(I[k])}}}this.tree.remove(n)}return i}_splitSafely(t,n){this.tree.remove(t);const i=t.rightSE;this.queue.remove(i);const a=t.split(n);return a.push(i),t.consumedBy===void 0&&this.tree.add(t),a}}const DT=typeof process<"u"&&eA.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,GB=typeof process<"u"&&eA.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class ZB{run(t,n,i){Ha.type=t,wm.reset();const a=[new zT(n,!0)];for(let I=0,k=i.length;I<k;I++)a.push(new zT(i[I],!1));if(Ha.numMultiPolys=a.length,Ha.type==="difference"){const I=a[0];let k=1;for(;k<a.length;)ew(a[k].bbox,I.bbox)!==null?k++:a.splice(k,1)}if(Ha.type==="intersection")for(let I=0,k=a.length;I<k;I++){const P=a[I];for(let R=I+1,N=a.length;R<N;R++)if(ew(P.bbox,a[R].bbox)===null)return[]}const c=new O2(fa.compare);for(let I=0,k=a.length;I<k;I++){const P=a[I].getSweepEvents();for(let R=0,N=P.length;R<N;R++)if(c.insert(P[R]),c.size>DT)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const d=new HB(c);let u=c.size,b=c.pop();for(;b;){const I=b.key;if(c.size===u){const P=I.segment;throw new Error(`Unable to pop() ${I.isLeft?"left":"right"} SweepEvent [${I.point.x}, ${I.point.y}] from segment #${P.id} [${P.leftSE.point.x}, ${P.leftSE.point.y}] -> [${P.rightSE.point.x}, ${P.rightSE.point.y}] from queue.`)}if(c.size>DT)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(d.segments.length>GB)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const k=d.process(I);for(let P=0,R=k.length;P<R;P++){const N=k[P];N.consumedBy===void 0&&c.insert(N)}u=c.size,b=c.pop()}wm.reset();const w=F0.factory(d.segments);return new qB(w).getGeom()}}const Ha=new ZB,KB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ha.run("union",e,n)},XB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ha.run("intersection",e,n)},YB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ha.run("xor",e,n)},JB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ha.run("difference",e,n)};var dA={union:KB,intersection:XB,xor:YB,difference:JB};function pA(e,t,n){if(e!==null)for(var i,a,c,d,u,b,w,I=0,k=0,P,R=e.type,N=R==="FeatureCollection",V=R==="Feature",X=N?e.features.length:1,D=0;D<X;D++){w=N?e.features[D].geometry:V?e.geometry:e,P=w?w.type==="GeometryCollection":!1,u=P?w.geometries.length:1;for(var B=0;B<u;B++){var j=0,G=0;if(d=P?w.geometries[B]:w,d!==null){b=d.coordinates;var te=d.type;switch(I=0,te){case null:break;case"Point":if(t(b,k,D,j,G)===!1)return!1;k++,j++;break;case"LineString":case"MultiPoint":for(i=0;i<b.length;i++){if(t(b[i],k,D,j,G)===!1)return!1;k++,te==="MultiPoint"&&j++}te==="LineString"&&j++;break;case"Polygon":case"MultiLineString":for(i=0;i<b.length;i++){for(a=0;a<b[i].length-I;a++){if(t(b[i][a],k,D,j,G)===!1)return!1;k++}te==="MultiLineString"&&j++,te==="Polygon"&&G++}te==="Polygon"&&j++;break;case"MultiPolygon":for(i=0;i<b.length;i++){for(G=0,a=0;a<b[i].length;a++){for(c=0;c<b[i][a].length-I;c++){if(t(b[i][a][c],k,D,j,G)===!1)return!1;k++}G++}j++}break;case"GeometryCollection":for(i=0;i<d.geometries.length;i++)if(pA(d.geometries[i],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function F2(e,t){var n,i,a,c,d,u,b,w,I,k,P=0,R=e.type==="FeatureCollection",N=e.type==="Feature",V=R?e.features.length:1;for(n=0;n<V;n++){for(u=R?e.features[n].geometry:N?e.geometry:e,w=R?e.features[n].properties:N?e.properties:{},I=R?e.features[n].bbox:N?e.bbox:void 0,k=R?e.features[n].id:N?e.id:void 0,b=u?u.type==="GeometryCollection":!1,d=b?u.geometries.length:1,a=0;a<d;a++){if(c=b?u.geometries[a]:u,c===null){if(t(null,P,w,I,k)===!1)return!1;continue}switch(c.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(c,P,w,I,k)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<c.geometries.length;i++)if(t(c.geometries[i],P,w,I,k)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}P++}}function QB(e,t){F2(e,function(n,i,a,c,d){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(xm(n,a,{bbox:c,id:d}),i,0)===!1?!1:void 0}var b;switch(u){case"MultiPoint":b="Point";break;case"MultiLineString":b="LineString";break;case"MultiPolygon":b="Polygon";break}for(var w=0;w<n.coordinates.length;w++){var I=n.coordinates[w],k={type:b,coordinates:I};if(t(xm(k,a),i,w)===!1)return!1}})}function eN(e,t={}){const n=[];if(F2(e,a=>{n.push(a.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const i=dA.union(n[0],...n.slice(1));return i.length===0?null:i.length===1?$2(i[0],t.properties):cA(i,t.properties)}var fA=eN;function tN(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return pA(e,i=>{n[0]>i[0]&&(n[0]=i[0]),n[1]>i[1]&&(n[1]=i[1]),n[2]<i[0]&&(n[2]=i[0]),n[3]<i[1]&&(n[3]=i[1])}),n}var $T=tN;function nN(e){const t=[];if(F2(e,a=>{t.push(a.coordinates)}),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},i=dA.difference(t[0],...t.slice(1));return i.length===0?null:i.length===1?$2(i[0],n):cA(i,n)}var rN=nN;function iN(e){if(!e)throw new Error("geojson is required");var t=[];return QB(e,function(n){t.push(n)}),bm(t)}var oN=iN;function OT(e,t){const n=rN(bm([$2([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),e]));if(!n)return;n.properties={isMask:!0};const i=$0($T(e)),a=(i[2]-i[0])/360/1e3,c=i[0]<-180,d=i[2]>180,u=oN(e);if(u.features.length>1&&(c||d))for(const b of u.features){const w=$0($T(b));if(d&&w[0]<-180+a)for(const I of b.geometry.coordinates)for(const k of I)k[0]+=360-a;if(c&&w[2]>180-a)for(const I of b.geometry.coordinates)for(const k of I)k[0]-=360-a}t(bm([u.features.length<2?e:fA(u)??e,n]))}const FT=bm([]);function aN(e,t,n=!0,i=!0,a={},c={},d={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let u;const b=[];let w,I,k;function P(){!e.getSource("full-geom")&&(d!=null&&d.fill||d!=null&&d.line)&&e.addSource("full-geom",{type:"geojson",data:FT}),!e.getLayer("full-geom-fill")&&d!=null&&d.fill&&e.addLayer({...d==null?void 0:d.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),!e.getLayer("full-geom-line")&&d!=null&&d.line&&e.addLayer({...d==null?void 0:d.line,id:"full-geom-line",type:"line",source:"full-geom"}),k&&V(k)}e.loaded()?P():e.once("load",()=>{P()}),e.on("styledata",()=>{P()});const R=X=>{u==null||u({type:"mapClick",coordinates:[X.lngLat.lng,X.lngLat.lat]})};function N(X=!1){if(!t)throw new Error;const D=document.createElement("div");return X&&D.classList.add("marker-interactive"),new eB({props:{displayIn:"maplibre"},target:D}),new t.Marker({element:D,offset:[1,-13]})}function V(X){var D;k=X,X&&((D=e.getSource("full-geom"))==null||D.setData(X))}return{setEventHandler(X){X?(u=X,e.on("click",R)):(u=void 0,e.off("click",R))},flyTo(X,D){e.flyTo({center:X,...D?{zoom:D}:{},...a})},fitBounds(X,D,B){e.fitBounds([[X[0],X[1]],[X[2],X[3]]],{padding:D,...B?{maxZoom:B}:{},...c})},indicateReverse(X){e.getCanvasContainer().style.cursor=X?"crosshair":""},setReverseMarker(X){!t||!n||(I?X?I.setLngLat(X):(I.remove(),I=void 0):X&&(I=(typeof n=="object"?new t.Marker(n):N()).setLngLat(X).addTo(e),I.getElement().classList.add("marker-reverse")))},setMarkers(X,D){if(n){for(const B of b)B.remove();if(b.length=0,V(FT),!!t){if(D){let B=!1;if(D.geometry.type==="GeometryCollection"){const j=D.geometry.geometries.filter(G=>G.type==="Polygon"||G.type==="MultiPolygon");e:if(j.length>0){const G=fA(bm(j.map(te=>xm(te))));if(!G)break e;OT({...D,geometry:G.geometry},V),B=!0}else{const G=D.geometry.geometries.filter(te=>te.type==="LineString"||te.type==="MultiLineString");G.length>0&&(V({...D,geometry:{type:"GeometryCollection",geometries:G}}),B=!0)}}if(!B){if(D.geometry.type==="Polygon"||D.geometry.type==="MultiPolygon")OT(D,V);else if(D.geometry.type==="LineString"||D.geometry.type==="MultiLineString"){V(D);return}}n&&b.push((typeof n=="object"?new t.Marker(n):N()).setLngLat(D.center).addTo(e))}if(i)for(const B of X??[]){if(B===D)continue;const j=(typeof i=="object"?new t.Marker(i):N(!0)).setLngLat(B.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(B.place_type[0]==="reverse"?B.place_name:B.place_name.replace(/,.*/,""))).addTo(e),G=j.getElement();G.addEventListener("click",te=>{te.stopPropagation(),u==null||u({type:"markerClick",id:B.id})}),G.addEventListener("mouseenter",()=>{u==null||u({type:"markerMouseEnter",id:B.id}),j.togglePopup()}),G.addEventListener("mouseleave",()=>{u==null||u({type:"markerMouseLeave",id:B.id}),j.togglePopup()}),b.push(j)}}}},setSelectedMarker(X){w&&w.getElement().classList.toggle("marker-selected",!1),w=X>-1?b[X]:void 0,w==null||w.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const X=e.getCenter();return[e.getZoom(),X.lng,X.lat]}}}var da,Nh;class sN extends EventTarget{constructor(t={}){super(),iT(this,da),iT(this,Nh),vx(this,Nh,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:i,showResultMarkers:a,flyTo:c,fullGeometryStyle:d,...u}=Fa(this,Nh),b=typeof c=="boolean"?{}:c,w=this.getExtraProps(t,n),I={mapController:aN(t,this.getMapLibreGl(),i,a,b,b,d),flyTo:c===void 0?!0:!!c,apiKey:"",...w,...u};if(!I.apiKey)throw new Error("no apiKey provided");vx(this,da,new CB({target:n,props:I}));for(const k of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])Fa(this,da).$on(k,P=>this.dispatchEvent(P));return n}setOptions(t){var n;vx(this,Nh,t);const{marker:i,showResultMarkers:a,flyTo:c,fullGeometryStyle:d,...u}=Fa(this,Nh);(n=Fa(this,da))==null||n.$set(u)}setQuery(t,n=!0){var i;(i=Fa(this,da))==null||i.setQuery(t,n)}clearMap(){var t;(t=Fa(this,da))==null||t.clearMap()}clearList(){var t;(t=Fa(this,da))==null||t.clearList()}setReverseMode(t){var n;(n=Fa(this,da))==null||n.$set({reverseActive:t})}focus(){var t;(t=Fa(this,da))==null||t.focus()}blur(){var t;(t=Fa(this,da))==null||t.blur()}onRemove(){var t;(t=Fa(this,da))==null||t.$destroy()}}da=new WeakMap,Nh=new WeakMap;class lN extends sN{getMapLibreGl(){return VD}onAdd(t){return super.onAddInt(t)}getExtraProps(){return{}}}function uN(){const e=ie.useRef(null),t=ie.useRef(null),n={lng:139.753,lat:35.6844},i=15;return ao.apiKey="0RIdnIp4oGo6HhkfVfWj",ie.useEffect(()=>{if(t.current)return;t.current=new QM({container:e.current,style:ud.STREETS,center:[n.lng,n.lat],zoom:i}),new sf({color:"#2CDA9D"}).setLngLat([139.7525,35.6846]).setPopup(new lf().setHTML("Approved: Traditional Tea Sets Anzuri")).addTo(t.current),new sf({color:"#2CDA9D"}).setLngLat([139.74,35.69]).setPopup(new lf().setHTML("Approved: Tokyo Souvenir Mimoto")).addTo(t.current),new sf({color:"#2C4443"}).setLngLat([139.71,35.71]).setPopup(new lf().setHTML("Community: SHIBUYA Souvenirs")).addTo(t.current),new sf({color:"#2C4443"}).setLngLat([139.74,35.68]).setPopup(new lf().setHTML("Community: KYOTOTO")).addTo(t.current),new sf({color:"#2CDA9D"}).setLngLat([8.432436222,47.14508040683401]).setPopup(new lf().setHTML("Cool HSLU store")).addTo(t.current);const a=new lN({apiKey:"0RIdnIp4oGo6HhkfVfWj",maplibregl:It,flyTo:!0,color:"red"});t.current.addControl(a,"top-left")},[n.lng,n.lat,i]),be.jsx("div",{className:"map-wrap",children:be.jsx("div",{ref:e,className:"map"})})}const Sm={black:"#000",white:"#fff"},Ph={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Mh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ah={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Lh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},zh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},pf={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},cN={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function ll(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(i=>n.searchParams.append("args[]",i)),`Minified MUI error #${e}; visit ${n} for the full message.`}const Iv="$$material";function B0(){return B0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},B0.apply(null,arguments)}function mA(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var hN=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,dN=mA(function(e){return hN.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),pN=!1;function fN(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function mN(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var gN=function(){function e(n){var i=this;this._insertTag=function(a){var c;i.tags.length===0?i.insertionPoint?c=i.insertionPoint.nextSibling:i.prepend?c=i.container.firstChild:c=i.before:c=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(a,c),i.tags.push(a)},this.isSpeedy=n.speedy===void 0?!pN:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(mN(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=fN(a);try{c.insertRule(i,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){var a;return(a=i.parentNode)==null?void 0:a.removeChild(i)}),this.tags=[],this.ctr=0},e}(),Vi="-ms-",N0="-moz-",Dn="-webkit-",gA="comm",B2="rule",N2="decl",yN="@import",yA="@keyframes",vN="@layer",_N=Math.abs,Pv=String.fromCharCode,xN=Object.assign;function bN(e,t){return Ii(e,0)^45?(((t<<2^Ii(e,0))<<2^Ii(e,1))<<2^Ii(e,2))<<2^Ii(e,3):0}function vA(e){return e.trim()}function wN(e,t){return(e=t.exec(e))?e[0]:e}function $n(e,t,n){return e.replace(t,n)}function tw(e,t){return e.indexOf(t)}function Ii(e,t){return e.charCodeAt(t)|0}function Cm(e,t,n){return e.slice(t,n)}function ds(e){return e.length}function j2(e){return e.length}function Sy(e,t){return t.push(e),e}function SN(e,t){return e.map(t).join("")}var Mv=1,Id=1,_A=0,Po=0,Xr=0,Bd="";function Av(e,t,n,i,a,c,d){return{value:e,root:t,parent:n,type:i,props:a,children:c,line:Mv,column:Id,length:d,return:""}}function ff(e,t){return xN(Av("",null,null,"",null,null,0),e,{length:-e.length},t)}function CN(){return Xr}function kN(){return Xr=Po>0?Ii(Bd,--Po):0,Id--,Xr===10&&(Id=1,Mv--),Xr}function Jo(){return Xr=Po<_A?Ii(Bd,Po++):0,Id++,Xr===10&&(Id=1,Mv++),Xr}function Cs(){return Ii(Bd,Po)}function Qy(){return Po}function jm(e,t){return Cm(Bd,e,t)}function km(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function xA(e){return Mv=Id=1,_A=ds(Bd=e),Po=0,[]}function bA(e){return Bd="",e}function e0(e){return vA(jm(Po-1,nw(e===91?e+2:e===40?e+1:e)))}function EN(e){for(;(Xr=Cs())&&Xr<33;)Jo();return km(e)>2||km(Xr)>3?"":" "}function TN(e,t){for(;--t&&Jo()&&!(Xr<48||Xr>102||Xr>57&&Xr<65||Xr>70&&Xr<97););return jm(e,Qy()+(t<6&&Cs()==32&&Jo()==32))}function nw(e){for(;Jo();)switch(Xr){case e:return Po;case 34:case 39:e!==34&&e!==39&&nw(Xr);break;case 40:e===41&&nw(e);break;case 92:Jo();break}return Po}function IN(e,t){for(;Jo()&&e+Xr!==57;)if(e+Xr===84&&Cs()===47)break;return"/*"+jm(t,Po-1)+"*"+Pv(e===47?e:Jo())}function PN(e){for(;!km(Cs());)Jo();return jm(e,Po)}function MN(e){return bA(t0("",null,null,null,[""],e=xA(e),0,[0],e))}function t0(e,t,n,i,a,c,d,u,b){for(var w=0,I=0,k=d,P=0,R=0,N=0,V=1,X=1,D=1,B=0,j="",G=a,te=c,oe=i,ae=j;X;)switch(N=B,B=Jo()){case 40:if(N!=108&&Ii(ae,k-1)==58){tw(ae+=$n(e0(B),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:ae+=e0(B);break;case 9:case 10:case 13:case 32:ae+=EN(N);break;case 92:ae+=TN(Qy()-1,7);continue;case 47:switch(Cs()){case 42:case 47:Sy(AN(IN(Jo(),Qy()),t,n),b);break;default:ae+="/"}break;case 123*V:u[w++]=ds(ae)*D;case 125*V:case 59:case 0:switch(B){case 0:case 125:X=0;case 59+I:D==-1&&(ae=$n(ae,/\f/g,"")),R>0&&ds(ae)-k&&Sy(R>32?NT(ae+";",i,n,k-1):NT($n(ae," ","")+";",i,n,k-2),b);break;case 59:ae+=";";default:if(Sy(oe=BT(ae,t,n,w,I,a,u,j,G=[],te=[],k),c),B===123)if(I===0)t0(ae,t,oe,oe,G,c,k,u,te);else switch(P===99&&Ii(ae,3)===110?100:P){case 100:case 108:case 109:case 115:t0(e,oe,oe,i&&Sy(BT(e,oe,oe,0,0,a,u,j,a,G=[],k),te),a,te,k,u,i?G:te);break;default:t0(ae,oe,oe,oe,[""],te,0,u,te)}}w=I=R=0,V=D=1,j=ae="",k=d;break;case 58:k=1+ds(ae),R=N;default:if(V<1){if(B==123)--V;else if(B==125&&V++==0&&kN()==125)continue}switch(ae+=Pv(B),B*V){case 38:D=I>0?1:(ae+="\f",-1);break;case 44:u[w++]=(ds(ae)-1)*D,D=1;break;case 64:Cs()===45&&(ae+=e0(Jo())),P=Cs(),I=k=ds(j=ae+=PN(Qy())),B++;break;case 45:N===45&&ds(ae)==2&&(V=0)}}return c}function BT(e,t,n,i,a,c,d,u,b,w,I){for(var k=a-1,P=a===0?c:[""],R=j2(P),N=0,V=0,X=0;N<i;++N)for(var D=0,B=Cm(e,k+1,k=_N(V=d[N])),j=e;D<R;++D)(j=vA(V>0?P[D]+" "+B:$n(B,/&\f/g,P[D])))&&(b[X++]=j);return Av(e,t,n,a===0?B2:u,b,w,I)}function AN(e,t,n){return Av(e,t,n,gA,Pv(CN()),Cm(e,2,-2),0)}function NT(e,t,n,i){return Av(e,t,n,N2,Cm(e,0,i),Cm(e,i+1,-1),i)}function gd(e,t){for(var n="",i=j2(e),a=0;a<i;a++)n+=t(e[a],a,e,t)||"";return n}function LN(e,t,n,i){switch(e.type){case vN:if(e.children.length)break;case yN:case N2:return e.return=e.return||e.value;case gA:return"";case yA:return e.return=e.value+"{"+gd(e.children,i)+"}";case B2:e.value=e.props.join(",")}return ds(n=gd(e.children,i))?e.return=e.value+"{"+n+"}":""}function zN(e){var t=j2(e);return function(n,i,a,c){for(var d="",u=0;u<t;u++)d+=e[u](n,i,a,c)||"";return d}}function RN(e){return function(t){t.root||(t=t.return)&&e(t)}}var DN=function(t,n,i){for(var a=0,c=0;a=c,c=Cs(),a===38&&c===12&&(n[i]=1),!km(c);)Jo();return jm(t,Po)},$N=function(t,n){var i=-1,a=44;do switch(km(a)){case 0:a===38&&Cs()===12&&(n[i]=1),t[i]+=DN(Po-1,n,i);break;case 2:t[i]+=e0(a);break;case 4:if(a===44){t[++i]=Cs()===58?"&\f":"",n[i]=t[i].length;break}default:t[i]+=Pv(a)}while(a=Jo());return t},ON=function(t,n){return bA($N(xA(t),n))},jT=new WeakMap,FN=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,i=t.parent,a=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!jT.get(i))&&!a){jT.set(t,!0);for(var c=[],d=ON(n,c),u=i.props,b=0,w=0;b<d.length;b++)for(var I=0;I<u.length;I++,w++)t.props[w]=c[b]?d[b].replace(/&\f/g,u[I]):u[I]+" "+d[b]}}},BN=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function wA(e,t){switch(bN(e,t)){case 5103:return Dn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Dn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Dn+e+N0+e+Vi+e+e;case 6828:case 4268:return Dn+e+Vi+e+e;case 6165:return Dn+e+Vi+"flex-"+e+e;case 5187:return Dn+e+$n(e,/(\w+).+(:[^]+)/,Dn+"box-$1$2"+Vi+"flex-$1$2")+e;case 5443:return Dn+e+Vi+"flex-item-"+$n(e,/flex-|-self/,"")+e;case 4675:return Dn+e+Vi+"flex-line-pack"+$n(e,/align-content|flex-|-self/,"")+e;case 5548:return Dn+e+Vi+$n(e,"shrink","negative")+e;case 5292:return Dn+e+Vi+$n(e,"basis","preferred-size")+e;case 6060:return Dn+"box-"+$n(e,"-grow","")+Dn+e+Vi+$n(e,"grow","positive")+e;case 4554:return Dn+$n(e,/([^-])(transform)/g,"$1"+Dn+"$2")+e;case 6187:return $n($n($n(e,/(zoom-|grab)/,Dn+"$1"),/(image-set)/,Dn+"$1"),e,"")+e;case 5495:case 3959:return $n(e,/(image-set\([^]*)/,Dn+"$1$`$1");case 4968:return $n($n(e,/(.+:)(flex-)?(.*)/,Dn+"box-pack:$3"+Vi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Dn+e+e;case 4095:case 3583:case 4068:case 2532:return $n(e,/(.+)-inline(.+)/,Dn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ds(e)-1-t>6)switch(Ii(e,t+1)){case 109:if(Ii(e,t+4)!==45)break;case 102:return $n(e,/(.+:)(.+)-([^]+)/,"$1"+Dn+"$2-$3$1"+N0+(Ii(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~tw(e,"stretch")?wA($n(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ii(e,t+1)!==115)break;case 6444:switch(Ii(e,ds(e)-3-(~tw(e,"!important")&&10))){case 107:return $n(e,":",":"+Dn)+e;case 101:return $n(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Dn+(Ii(e,14)===45?"inline-":"")+"box$3$1"+Dn+"$2$3$1"+Vi+"$2box$3")+e}break;case 5936:switch(Ii(e,t+11)){case 114:return Dn+e+Vi+$n(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Dn+e+Vi+$n(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Dn+e+Vi+$n(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Dn+e+Vi+e+e}return e}var NN=function(t,n,i,a){if(t.length>-1&&!t.return)switch(t.type){case N2:t.return=wA(t.value,t.length);break;case yA:return gd([ff(t,{value:$n(t.value,"@","@"+Dn)})],a);case B2:if(t.length)return SN(t.props,function(c){switch(wN(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return gd([ff(t,{props:[$n(c,/:(read-\w+)/,":"+N0+"$1")]})],a);case"::placeholder":return gd([ff(t,{props:[$n(c,/:(plac\w+)/,":"+Dn+"input-$1")]}),ff(t,{props:[$n(c,/:(plac\w+)/,":"+N0+"$1")]}),ff(t,{props:[$n(c,/:(plac\w+)/,Vi+"input-$1")]})],a)}return""})}},jN=[NN],UN=function(t){var n=t.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(V){var X=V.getAttribute("data-emotion");X.indexOf(" ")!==-1&&(document.head.appendChild(V),V.setAttribute("data-s",""))})}var a=t.stylisPlugins||jN,c={},d,u=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(V){for(var X=V.getAttribute("data-emotion").split(" "),D=1;D<X.length;D++)c[X[D]]=!0;u.push(V)});var b,w=[FN,BN];{var I,k=[LN,RN(function(V){I.insert(V)})],P=zN(w.concat(a,k)),R=function(X){return gd(MN(X),P)};b=function(X,D,B,j){I=B,R(X?X+"{"+D.styles+"}":D.styles),j&&(N.inserted[D.name]=!0)}}var N={key:n,sheet:new gN({key:n,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:c,registered:{},insert:b};return N.sheet.hydrate(u),N},SA={exports:{}},Gn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _i=typeof Symbol=="function"&&Symbol.for,U2=_i?Symbol.for("react.element"):60103,V2=_i?Symbol.for("react.portal"):60106,Lv=_i?Symbol.for("react.fragment"):60107,zv=_i?Symbol.for("react.strict_mode"):60108,Rv=_i?Symbol.for("react.profiler"):60114,Dv=_i?Symbol.for("react.provider"):60109,$v=_i?Symbol.for("react.context"):60110,W2=_i?Symbol.for("react.async_mode"):60111,Ov=_i?Symbol.for("react.concurrent_mode"):60111,Fv=_i?Symbol.for("react.forward_ref"):60112,Bv=_i?Symbol.for("react.suspense"):60113,VN=_i?Symbol.for("react.suspense_list"):60120,Nv=_i?Symbol.for("react.memo"):60115,jv=_i?Symbol.for("react.lazy"):60116,WN=_i?Symbol.for("react.block"):60121,qN=_i?Symbol.for("react.fundamental"):60117,HN=_i?Symbol.for("react.responder"):60118,GN=_i?Symbol.for("react.scope"):60119;function na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case U2:switch(e=e.type,e){case W2:case Ov:case Lv:case Rv:case zv:case Bv:return e;default:switch(e=e&&e.$$typeof,e){case $v:case Fv:case jv:case Nv:case Dv:return e;default:return t}}case V2:return t}}}function CA(e){return na(e)===Ov}Gn.AsyncMode=W2;Gn.ConcurrentMode=Ov;Gn.ContextConsumer=$v;Gn.ContextProvider=Dv;Gn.Element=U2;Gn.ForwardRef=Fv;Gn.Fragment=Lv;Gn.Lazy=jv;Gn.Memo=Nv;Gn.Portal=V2;Gn.Profiler=Rv;Gn.StrictMode=zv;Gn.Suspense=Bv;Gn.isAsyncMode=function(e){return CA(e)||na(e)===W2};Gn.isConcurrentMode=CA;Gn.isContextConsumer=function(e){return na(e)===$v};Gn.isContextProvider=function(e){return na(e)===Dv};Gn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===U2};Gn.isForwardRef=function(e){return na(e)===Fv};Gn.isFragment=function(e){return na(e)===Lv};Gn.isLazy=function(e){return na(e)===jv};Gn.isMemo=function(e){return na(e)===Nv};Gn.isPortal=function(e){return na(e)===V2};Gn.isProfiler=function(e){return na(e)===Rv};Gn.isStrictMode=function(e){return na(e)===zv};Gn.isSuspense=function(e){return na(e)===Bv};Gn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Lv||e===Ov||e===Rv||e===zv||e===Bv||e===VN||typeof e=="object"&&e!==null&&(e.$$typeof===jv||e.$$typeof===Nv||e.$$typeof===Dv||e.$$typeof===$v||e.$$typeof===Fv||e.$$typeof===qN||e.$$typeof===HN||e.$$typeof===GN||e.$$typeof===WN)};Gn.typeOf=na;SA.exports=Gn;var ZN=SA.exports,kA=ZN,KN={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},XN={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},EA={};EA[kA.ForwardRef]=KN;EA[kA.Memo]=XN;var YN=!0;function JN(e,t,n){var i="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(i+=a+" ")}),i}var TA=function(t,n,i){var a=t.key+"-"+n.name;(i===!1||YN===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},IA=function(t,n,i){TA(t,n,i);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var c=n;do t.insert(n===c?"."+a:"",c,t.sheet,!0),c=c.next;while(c!==void 0)}};function QN(e){for(var t=0,n,i=0,a=e.length;a>=4;++i,a-=4)n=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var e7={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},t7=!1,n7=/[A-Z]|^ms/g,r7=/_EMO_([^_]+?)_([^]*?)_EMO_/g,PA=function(t){return t.charCodeAt(1)===45},UT=function(t){return t!=null&&typeof t!="boolean"},wx=mA(function(e){return PA(e)?e:e.replace(n7,"-$&").toLowerCase()}),VT=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(r7,function(i,a,c){return ps={name:a,styles:c,next:ps},a})}return e7[t]!==1&&!PA(t)&&typeof n=="number"&&n!==0?n+"px":n},i7="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Em(e,t,n){if(n==null)return"";var i=n;if(i.__emotion_styles!==void 0)return i;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return ps={name:a.name,styles:a.styles,next:ps},a.name;var c=n;if(c.styles!==void 0){var d=c.next;if(d!==void 0)for(;d!==void 0;)ps={name:d.name,styles:d.styles,next:ps},d=d.next;var u=c.styles+";";return u}return o7(e,t,n)}case"function":{if(e!==void 0){var b=ps,w=n(e);return ps=b,Em(e,t,w)}break}}var I=n;if(t==null)return I;var k=t[I];return k!==void 0?k:I}function o7(e,t,n){var i="";if(Array.isArray(n))for(var a=0;a<n.length;a++)i+=Em(e,t,n[a])+";";else for(var c in n){var d=n[c];if(typeof d!="object"){var u=d;t!=null&&t[u]!==void 0?i+=c+"{"+t[u]+"}":UT(u)&&(i+=wx(c)+":"+VT(c,u)+";")}else{if(c==="NO_COMPONENT_SELECTOR"&&t7)throw new Error(i7);if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var b=0;b<d.length;b++)UT(d[b])&&(i+=wx(c)+":"+VT(c,d[b])+";");else{var w=Em(e,t,d);switch(c){case"animation":case"animationName":{i+=wx(c)+":"+w+";";break}default:i+=c+"{"+w+"}"}}}}return i}var WT=/label:\s*([^\s;{]+)\s*(;|$)/g,ps;function Uv(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,a="";ps=void 0;var c=e[0];if(c==null||c.raw===void 0)i=!1,a+=Em(n,t,c);else{var d=c;a+=d[0]}for(var u=1;u<e.length;u++)if(a+=Em(n,t,e[u]),i){var b=c;a+=b[u]}WT.lastIndex=0;for(var w="",I;(I=WT.exec(a))!==null;)w+="-"+I[1];var k=QN(a)+w;return{name:k,styles:a,next:ps}}var a7=function(t){return t()},MA=r0.useInsertionEffect?r0.useInsertionEffect:!1,s7=MA||a7,qT=MA||ie.useLayoutEffect,AA=ie.createContext(typeof HTMLElement<"u"?UN({key:"css"}):null);AA.Provider;var LA=function(t){return ie.forwardRef(function(n,i){var a=ie.useContext(AA);return t(n,a,i)})},q2=ie.createContext({}),l7=LA(function(e,t){var n=e.styles,i=Uv([n],void 0,ie.useContext(q2)),a=ie.useRef();return qT(function(){var c=t.key+"-global",d=new t.sheet.constructor({key:c,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,b=document.querySelector('style[data-emotion="'+c+" "+i.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),b!==null&&(u=!0,b.setAttribute("data-emotion",c),d.hydrate([b])),a.current=[d,u],function(){d.flush()}},[t]),qT(function(){var c=a.current,d=c[0],u=c[1];if(u){c[1]=!1;return}if(i.next!==void 0&&IA(t,i.next,!0),d.tags.length){var b=d.tags[d.tags.length-1].nextElementSibling;d.before=b,d.flush()}t.insert("",i,d,!1)},[t,i.name]),null});function u7(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Uv(t)}var H2=function(){var t=u7.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},c7=dN,h7=function(t){return t!=="theme"},HT=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?c7:h7},GT=function(t,n,i){var a;if(n){var c=n.shouldForwardProp;a=t.__emotion_forwardProp&&c?function(d){return t.__emotion_forwardProp(d)&&c(d)}:c}return typeof a!="function"&&i&&(a=t.__emotion_forwardProp),a},d7=!1,p7=function(t){var n=t.cache,i=t.serialized,a=t.isStringTag;return TA(n,i,a),s7(function(){return IA(n,i,a)}),null},f7=function e(t,n){var i=t.__emotion_real===t,a=i&&t.__emotion_base||t,c,d;n!==void 0&&(c=n.label,d=n.target);var u=GT(t,n,i),b=u||HT(a),w=!b("as");return function(){var I=arguments,k=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(c!==void 0&&k.push("label:"+c+";"),I[0]==null||I[0].raw===void 0)k.push.apply(k,I);else{k.push(I[0][0]);for(var P=I.length,R=1;R<P;R++)k.push(I[R],I[0][R])}var N=LA(function(V,X,D){var B=w&&V.as||a,j="",G=[],te=V;if(V.theme==null){te={};for(var oe in V)te[oe]=V[oe];te.theme=ie.useContext(q2)}typeof V.className=="string"?j=JN(X.registered,G,V.className):V.className!=null&&(j=V.className+" ");var ae=Uv(k.concat(G),X.registered,te);j+=X.key+"-"+ae.name,d!==void 0&&(j+=" "+d);var de=w&&u===void 0?HT(B):b,Me={};for(var Z in V)w&&Z==="as"||de(Z)&&(Me[Z]=V[Z]);return Me.className=j,D&&(Me.ref=D),ie.createElement(ie.Fragment,null,ie.createElement(p7,{cache:X,serialized:ae,isStringTag:typeof B=="string"}),ie.createElement(B,Me))});return N.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",N.defaultProps=t.defaultProps,N.__emotion_real=N,N.__emotion_base=a,N.__emotion_styles=k,N.__emotion_forwardProp=u,Object.defineProperty(N,"toString",{value:function(){return d===void 0&&d7?"NO_COMPONENT_SELECTOR":"."+d}}),N.withComponent=function(V,X){return e(V,B0({},n,X,{shouldForwardProp:GT(N,X,!0)})).apply(void 0,k)},N}},m7=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],rw=f7.bind();m7.forEach(function(e){rw[e]=rw(e)});var zA={exports:{}},g7="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",y7=g7,v7=y7;function RA(){}function DA(){}DA.resetWarningCache=RA;var _7=function(){function e(i,a,c,d,u,b){if(b!==v7){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:DA,resetWarningCache:RA};return n.PropTypes=n,n};zA.exports=_7();var $A=zA.exports;const qs=Mm($A);function x7(e){return e==null||Object.keys(e).length===0}function b7(e){const{styles:t,defaultTheme:n={}}=e,i=typeof t=="function"?a=>t(x7(a)?n:a):t;return be.jsx(l7,{styles:i})}/**
 * @mui/styled-engine v6.1.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function OA(e,t){return rw(e,t)}function w7(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const ZT=[];function KT(e){return ZT[0]=e,Uv(ZT)}function gs(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function FA(e){if(!gs(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=FA(e[n])}),t}function Hi(e,t,n={clone:!0}){const i=n.clone?{...e}:e;return gs(e)&&gs(t)&&Object.keys(t).forEach(a=>{gs(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&gs(e[a])?i[a]=Hi(e[a],t[a],n):n.clone?i[a]=gs(t[a])?FA(t[a]):t[a]:i[a]=t[a]}),i}const S7=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,i)=>n.val-i.val),t.reduce((n,i)=>({...n,[i.key]:i.val}),{})};function C7(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:i=5,...a}=e,c=S7(t),d=Object.keys(c);function u(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n})`}function b(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-i/100}${n})`}function w(P,R){const N=d.indexOf(R);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${n}) and (max-width:${(N!==-1&&typeof t[d[N]]=="number"?t[d[N]]:R)-i/100}${n})`}function I(P){return d.indexOf(P)+1<d.length?w(P,d[d.indexOf(P)+1]):u(P)}function k(P){const R=d.indexOf(P);return R===0?u(d[1]):R===d.length-1?b(d[R]):w(P,d[d.indexOf(P)+1]).replace("@media","@media not all and")}return{keys:d,values:c,up:u,down:b,between:w,only:I,not:k,unit:n,...a}}function k7(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(i=>i.startsWith("@container")).sort((i,a)=>{var d,u;const c=/min-width:\s*([0-9.]+)/;return+(((d=i.match(c))==null?void 0:d[1])||0)-+(((u=a.match(c))==null?void 0:u[1])||0)});return n.length?n.reduce((i,a)=>{const c=t[a];return delete i[a],i[a]=c,i},{...t}):t}function E7(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function T7(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,i,a]=n,c=Number.isNaN(+i)?i||0:+i;return e.containerQueries(a).up(c)}function I7(e){const t=(c,d)=>c.replace("@media",d?`@container ${d}`:"@container");function n(c,d){c.up=(...u)=>t(e.breakpoints.up(...u),d),c.down=(...u)=>t(e.breakpoints.down(...u),d),c.between=(...u)=>t(e.breakpoints.between(...u),d),c.only=(...u)=>t(e.breakpoints.only(...u),d),c.not=(...u)=>{const b=t(e.breakpoints.not(...u),d);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const i={},a=c=>(n(i,c),i);return n(a),{...e,containerQueries:a}}const P7={borderRadius:4};function Vf(e,t){return t?Hi(e,t,{clone:!1}):e}const Vv={xs:0,sm:600,md:900,lg:1200,xl:1536},XT={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Vv[e]}px)`},M7={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:Vv[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function Ta(e,t,n){const i=e.theme||{};if(Array.isArray(t)){const c=i.breakpoints||XT;return t.reduce((d,u,b)=>(d[c.up(c.keys[b])]=n(t[b]),d),{})}if(typeof t=="object"){const c=i.breakpoints||XT;return Object.keys(t).reduce((d,u)=>{if(E7(c.keys,u)){const b=T7(i.containerQueries?i:M7,u);b&&(d[b]=n(t[u],u))}else if(Object.keys(c.values||Vv).includes(u)){const b=c.up(u);d[b]=n(t[u],u)}else{const b=u;d[b]=t[b]}return d},{})}return n(t)}function A7(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((i,a)=>{const c=e.up(a);return i[c]={},i},{}))||{}}function L7(e,t){return e.reduce((n,i)=>{const a=n[i];return(!a||Object.keys(a).length===0)&&delete n[i],n},t)}function z7(e,t){if(typeof e!="object")return{};const n={},i=Object.keys(t);return Array.isArray(e)?i.forEach((a,c)=>{c<e.length&&(n[a]=!0)}):i.forEach(a=>{e[a]!=null&&(n[a]=!0)}),n}function Wv({values:e,breakpoints:t,base:n}){const i=n||z7(e,t),a=Object.keys(i);if(a.length===0)return e;let c;return a.reduce((d,u,b)=>(Array.isArray(e)?(d[u]=e[b]!=null?e[b]:e[c],c=b):typeof e=="object"?(d[u]=e[u]!=null?e[u]:e[c],c=u):d[u]=e,d),{})}function St(e){if(typeof e!="string")throw new Error(ll(7));return e.charAt(0).toUpperCase()+e.slice(1)}function qv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const i=`vars.${t}`.split(".").reduce((a,c)=>a&&a[c]?a[c]:null,e);if(i!=null)return i}return t.split(".").reduce((i,a)=>i&&i[a]!=null?i[a]:null,e)}function j0(e,t,n,i=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||i:a=qv(e,n)||i,t&&(a=t(a,i,e)),a}function qr(e){const{prop:t,cssProperty:n=e.prop,themeKey:i,transform:a}=e,c=d=>{if(d[t]==null)return null;const u=d[t],b=d.theme,w=qv(b,i)||{};return Ta(d,u,k=>{let P=j0(w,a,k);return k===P&&typeof k=="string"&&(P=j0(w,a,`${t}${k==="default"?"":St(k)}`,k)),n===!1?P:{[n]:P}})};return c.propTypes={},c.filterProps=[t],c}function R7(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const D7={m:"margin",p:"padding"},$7={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},YT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},O7=R7(e=>{if(e.length>2)if(YT[e])e=YT[e];else return[e];const[t,n]=e.split(""),i=D7[t],a=$7[n]||"";return Array.isArray(a)?a.map(c=>i+c):[i+a]}),G2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Z2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...G2,...Z2];function Um(e,t,n,i){const a=qv(e,t,!0)??n;return typeof a=="number"||typeof a=="string"?c=>typeof c=="string"?c:typeof a=="string"?`calc(${c} * ${a})`:a*c:Array.isArray(a)?c=>{if(typeof c=="string")return c;const d=Math.abs(c),u=a[d];return c>=0?u:typeof u=="number"?-u:`-${u}`}:typeof a=="function"?a:()=>{}}function K2(e){return Um(e,"spacing",8)}function Vm(e,t){return typeof t=="string"||t==null?t:e(t)}function F7(e,t){return n=>e.reduce((i,a)=>(i[a]=Vm(t,n),i),{})}function B7(e,t,n,i){if(!t.includes(n))return null;const a=O7(n),c=F7(a,i),d=e[n];return Ta(e,d,c)}function BA(e,t){const n=K2(e.theme);return Object.keys(e).map(i=>B7(e,t,i,n)).reduce(Vf,{})}function Or(e){return BA(e,G2)}Or.propTypes={};Or.filterProps=G2;function Fr(e){return BA(e,Z2)}Fr.propTypes={};Fr.filterProps=Z2;function NA(e=8,t=K2({spacing:e})){if(e.mui)return e;const n=(...i)=>(i.length===0?[1]:i).map(c=>{const d=t(c);return typeof d=="number"?`${d}px`:d}).join(" ");return n.mui=!0,n}function Hv(...e){const t=e.reduce((i,a)=>(a.filterProps.forEach(c=>{i[c]=a}),i),{}),n=i=>Object.keys(i).reduce((a,c)=>t[c]?Vf(a,t[c](i)):a,{});return n.propTypes={},n.filterProps=e.reduce((i,a)=>i.concat(a.filterProps),[]),n}function va(e){return typeof e!="number"?e:`${e}px solid`}function Pa(e,t){return qr({prop:e,themeKey:"borders",transform:t})}const N7=Pa("border",va),j7=Pa("borderTop",va),U7=Pa("borderRight",va),V7=Pa("borderBottom",va),W7=Pa("borderLeft",va),q7=Pa("borderColor"),H7=Pa("borderTopColor"),G7=Pa("borderRightColor"),Z7=Pa("borderBottomColor"),K7=Pa("borderLeftColor"),X7=Pa("outline",va),Y7=Pa("outlineColor"),Gv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Um(e.theme,"shape.borderRadius",4),n=i=>({borderRadius:Vm(t,i)});return Ta(e,e.borderRadius,n)}return null};Gv.propTypes={};Gv.filterProps=["borderRadius"];Hv(N7,j7,U7,V7,W7,q7,H7,G7,Z7,K7,Gv,X7,Y7);const Zv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Um(e.theme,"spacing",8),n=i=>({gap:Vm(t,i)});return Ta(e,e.gap,n)}return null};Zv.propTypes={};Zv.filterProps=["gap"];const Kv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Um(e.theme,"spacing",8),n=i=>({columnGap:Vm(t,i)});return Ta(e,e.columnGap,n)}return null};Kv.propTypes={};Kv.filterProps=["columnGap"];const Xv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Um(e.theme,"spacing",8),n=i=>({rowGap:Vm(t,i)});return Ta(e,e.rowGap,n)}return null};Xv.propTypes={};Xv.filterProps=["rowGap"];const J7=qr({prop:"gridColumn"}),Q7=qr({prop:"gridRow"}),e9=qr({prop:"gridAutoFlow"}),t9=qr({prop:"gridAutoColumns"}),n9=qr({prop:"gridAutoRows"}),r9=qr({prop:"gridTemplateColumns"}),i9=qr({prop:"gridTemplateRows"}),o9=qr({prop:"gridTemplateAreas"}),a9=qr({prop:"gridArea"});Hv(Zv,Kv,Xv,J7,Q7,e9,t9,n9,r9,i9,o9,a9);function yd(e,t){return t==="grey"?t:e}const s9=qr({prop:"color",themeKey:"palette",transform:yd}),l9=qr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:yd}),u9=qr({prop:"backgroundColor",themeKey:"palette",transform:yd});Hv(s9,l9,u9);function Zo(e){return e<=1&&e!==0?`${e*100}%`:e}const c9=qr({prop:"width",transform:Zo}),X2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,c,d,u,b;const i=((d=(c=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:c.values)==null?void 0:d[n])||Vv[n];return i?((b=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Zo(n)}};return Ta(e,e.maxWidth,t)}return null};X2.filterProps=["maxWidth"];const h9=qr({prop:"minWidth",transform:Zo}),d9=qr({prop:"height",transform:Zo}),p9=qr({prop:"maxHeight",transform:Zo}),f9=qr({prop:"minHeight",transform:Zo});qr({prop:"size",cssProperty:"width",transform:Zo});qr({prop:"size",cssProperty:"height",transform:Zo});const m9=qr({prop:"boxSizing"});Hv(c9,X2,h9,d9,p9,f9,m9);const Wm={border:{themeKey:"borders",transform:va},borderTop:{themeKey:"borders",transform:va},borderRight:{themeKey:"borders",transform:va},borderBottom:{themeKey:"borders",transform:va},borderLeft:{themeKey:"borders",transform:va},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:va},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Gv},color:{themeKey:"palette",transform:yd},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:yd},backgroundColor:{themeKey:"palette",transform:yd},p:{style:Fr},pt:{style:Fr},pr:{style:Fr},pb:{style:Fr},pl:{style:Fr},px:{style:Fr},py:{style:Fr},padding:{style:Fr},paddingTop:{style:Fr},paddingRight:{style:Fr},paddingBottom:{style:Fr},paddingLeft:{style:Fr},paddingX:{style:Fr},paddingY:{style:Fr},paddingInline:{style:Fr},paddingInlineStart:{style:Fr},paddingInlineEnd:{style:Fr},paddingBlock:{style:Fr},paddingBlockStart:{style:Fr},paddingBlockEnd:{style:Fr},m:{style:Or},mt:{style:Or},mr:{style:Or},mb:{style:Or},ml:{style:Or},mx:{style:Or},my:{style:Or},margin:{style:Or},marginTop:{style:Or},marginRight:{style:Or},marginBottom:{style:Or},marginLeft:{style:Or},marginX:{style:Or},marginY:{style:Or},marginInline:{style:Or},marginInlineStart:{style:Or},marginInlineEnd:{style:Or},marginBlock:{style:Or},marginBlockStart:{style:Or},marginBlockEnd:{style:Or},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Zv},rowGap:{style:Xv},columnGap:{style:Kv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Zo},maxWidth:{style:X2},minWidth:{transform:Zo},height:{transform:Zo},maxHeight:{transform:Zo},minHeight:{transform:Zo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function g9(...e){const t=e.reduce((i,a)=>i.concat(Object.keys(a)),[]),n=new Set(t);return e.every(i=>n.size===Object.keys(i).length)}function y9(e,t){return typeof e=="function"?e(t):e}function v9(){function e(n,i,a,c){const d={[n]:i,theme:a},u=c[n];if(!u)return{[n]:i};const{cssProperty:b=n,themeKey:w,transform:I,style:k}=u;if(i==null)return null;if(w==="typography"&&i==="inherit")return{[n]:i};const P=qv(a,w)||{};return k?k(d):Ta(d,i,N=>{let V=j0(P,I,N);return N===V&&typeof N=="string"&&(V=j0(P,I,`${n}${N==="default"?"":St(N)}`,N)),b===!1?V:{[b]:V}})}function t(n){const{sx:i,theme:a={}}=n||{};if(!i)return null;const c=a.unstable_sxConfig??Wm;function d(u){let b=u;if(typeof u=="function")b=u(a);else if(typeof u!="object")return u;if(!b)return null;const w=A7(a.breakpoints),I=Object.keys(w);let k=w;return Object.keys(b).forEach(P=>{const R=y9(b[P],a);if(R!=null)if(typeof R=="object")if(c[P])k=Vf(k,e(P,R,a,c));else{const N=Ta({theme:a},R,V=>({[P]:V}));g9(N,R)?k[P]=t({sx:R,theme:a}):k=Vf(k,N)}else k=Vf(k,e(P,R,a,c))}),k7(a,L7(I,k))}return Array.isArray(i)?i.map(d):d(i)}return t}const Ic=v9();Ic.filterProps=["sx"];function _9(e,t){var i;const n=this;if(n.vars){if(!((i=n.colorSchemes)!=null&&i[e])||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return n.palette.mode===e?t:{}}function Yv(e={},...t){const{breakpoints:n={},palette:i={},spacing:a,shape:c={},...d}=e,u=C7(n),b=NA(a);let w=Hi({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...i},spacing:b,shape:{...P7,...c}},d);return w=I7(w),w.applyStyles=_9,w=t.reduce((I,k)=>Hi(I,k),w),w.unstable_sxConfig={...Wm,...d==null?void 0:d.unstable_sxConfig},w.unstable_sx=function(k){return Ic({sx:k,theme:this})},w}function x9(e){return Object.keys(e).length===0}function b9(e=null){const t=ie.useContext(q2);return!t||x9(t)?e:t}const w9=Yv();function Jv(e=w9){return b9(e)}function S9({styles:e,themeId:t,defaultTheme:n={}}){const i=Jv(n),a=typeof e=="function"?e(t&&i[t]||i):e;return be.jsx(b7,{styles:a})}const C9=e=>{var i;const t={systemProps:{},otherProps:{}},n=((i=e==null?void 0:e.theme)==null?void 0:i.unstable_sxConfig)??Wm;return Object.keys(e).forEach(a=>{n[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function Y2(e){const{sx:t,...n}=e,{systemProps:i,otherProps:a}=C9(n);let c;return Array.isArray(t)?c=[i,...t]:typeof t=="function"?c=(...d)=>{const u=t(...d);return gs(u)?{...i,...u}:i}:c={...i,...t},{...a,sx:c}}const JT=e=>e,k9=()=>{let e=JT;return{configure(t){e=t},generate(t){return e(t)},reset(){e=JT}}},jA=k9();function UA(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=UA(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Ut(){for(var e,t,n=0,i="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=UA(e))&&(i&&(i+=" "),i+=t);return i}function E9(e={}){const{themeId:t,defaultTheme:n,defaultClassName:i="MuiBox-root",generateClassName:a}=e,c=OA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(Ic);return ie.forwardRef(function(b,w){const I=Jv(n),{className:k,component:P="div",...R}=Y2(b);return be.jsx(c,{as:P,ref:w,className:Ut(k,a?a(i):i),theme:t&&I[t]||I,...R})})}const T9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function Pn(e,t,n="Mui"){const i=T9[t];return i?`${n}-${i}`:`${jA.generate(e)}-${t}`}function Mn(e,t,n="Mui"){const i={};return t.forEach(a=>{i[a]=Pn(e,a,n)}),i}function VA(e){const{variants:t,...n}=e,i={variants:t,style:KT(n),isProcessed:!0};return i.style===n||t&&t.forEach(a=>{typeof a.style!="function"&&(a.style=KT(a.style))}),i}const I9=Yv();function Sx(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function P9(e){return e?(t,n)=>n[e]:null}function M9(e,t,n){e.theme=L9(e.theme)?n:e.theme[t]||e.theme}function n0(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(i=>n0(e,i));if(Array.isArray(n==null?void 0:n.variants)){let i;if(n.isProcessed)i=n.style;else{const{variants:a,...c}=n;i=c}return WA(e,n.variants,[i])}return n!=null&&n.isProcessed?n.style:n}function WA(e,t,n=[]){var a;let i;e:for(let c=0;c<t.length;c+=1){const d=t[c];if(typeof d.props=="function"){if(i??(i={...e,...e.ownerState,ownerState:e.ownerState}),!d.props(i))continue}else for(const u in d.props)if(e[u]!==d.props[u]&&((a=e.ownerState)==null?void 0:a[u])!==d.props[u])continue e;typeof d.style=="function"?(i??(i={...e,...e.ownerState,ownerState:e.ownerState}),n.push(d.style(i))):n.push(d.style)}return n}function qA(e={}){const{themeId:t,defaultTheme:n=I9,rootShouldForwardProp:i=Sx,slotShouldForwardProp:a=Sx}=e;function c(u){M9(u,t,n)}return(u,b={})=>{w7(u,te=>te.filter(oe=>oe!==Ic));const{name:w,slot:I,skipVariantsResolver:k,skipSx:P,overridesResolver:R=P9(R9(I)),...N}=b,V=k!==void 0?k:I&&I!=="Root"&&I!=="root"||!1,X=P||!1;let D=Sx;I==="Root"||I==="root"?D=i:I?D=a:z9(u)&&(D=void 0);const B=OA(u,{shouldForwardProp:D,label:A9(),...N}),j=te=>{if(typeof te=="function"&&te.__emotion_real!==te)return function(ae){return n0(ae,te)};if(gs(te)){const oe=VA(te);return oe.variants?function(de){return n0(de,oe)}:oe.style}return te},G=(...te)=>{const oe=[],ae=te.map(j),de=[];if(oe.push(c),w&&R&&de.push(function(je){var He,at;const Le=(at=(He=je.theme.components)==null?void 0:He[w])==null?void 0:at.styleOverrides;if(!Le)return null;const Oe={};for(const De in Le)Oe[De]=n0(je,Le[De]);return R(je,Oe)}),w&&!V&&de.push(function(je){var Oe,He;const $e=je.theme,Le=(He=(Oe=$e==null?void 0:$e.components)==null?void 0:Oe[w])==null?void 0:He.variants;return Le?WA(je,Le):null}),X||de.push(Ic),Array.isArray(ae[0])){const Ie=ae.shift(),je=new Array(oe.length).fill(""),$e=new Array(de.length).fill("");let Le;Le=[...je,...Ie,...$e],Le.raw=[...je,...Ie.raw,...$e],oe.unshift(Le)}const Me=[...oe,...ae,...de],Z=B(...Me);return u.muiName&&(Z.muiName=u.muiName),Z};return B.withConfig&&(G.withConfig=B.withConfig),G}}function A9(e,t){return void 0}function L9(e){for(const t in e)return!1;return!0}function z9(e){return typeof e=="string"&&e.charCodeAt(0)>96}function R9(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const D9=qA();function Tm(e,t){const n={...t};for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const a=i;if(a==="components"||a==="slots")n[a]={...e[a],...n[a]};else if(a==="componentsProps"||a==="slotProps"){const c=e[a],d=t[a];if(!d)n[a]=c||{};else if(!c)n[a]=d;else{n[a]={...d};for(const u in c)if(Object.prototype.hasOwnProperty.call(c,u)){const b=u;n[a][b]=Tm(c[b],d[b])}}}else n[a]===void 0&&(n[a]=e[a])}return n}function $9(e){const{theme:t,name:n,props:i}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?i:Tm(t.components[n].defaultProps,i)}function O9({props:e,name:t,defaultTheme:n,themeId:i}){let a=Jv(n);return i&&(a=a[i]||a),$9({theme:a,name:t,props:e})}const Pc=typeof window<"u"?ie.useLayoutEffect:ie.useEffect;function F9(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function J2(e,t=0,n=1){return F9(e,t,n)}function B9(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(i=>i+i)),n?`rgb${n.length===4?"a":""}(${n.map((i,a)=>a<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function yu(e){if(e.type)return e;if(e.charAt(0)==="#")return yu(B9(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(ll(9,e));let i=e.substring(t+1,e.length-1),a;if(n==="color"){if(i=i.split(" "),a=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(ll(10,a))}else i=i.split(",");return i=i.map(c=>parseFloat(c)),{type:n,values:i,colorSpace:a}}const N9=e=>{const t=yu(e);return t.values.slice(0,3).map((n,i)=>t.type.includes("hsl")&&i!==0?`${n}%`:n).join(" ")},kf=(e,t)=>{try{return N9(e)}catch{return e}};function Qv(e){const{type:t,colorSpace:n}=e;let{values:i}=e;return t.includes("rgb")?i=i.map((a,c)=>c<3?parseInt(a,10):a):t.includes("hsl")&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.includes("color")?i=`${n} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function HA(e){e=yu(e);const{values:t}=e,n=t[0],i=t[1]/100,a=t[2]/100,c=i*Math.min(a,1-a),d=(w,I=(w+n/30)%12)=>a-c*Math.max(Math.min(I-3,9-I,1),-1);let u="rgb";const b=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(u+="a",b.push(t[3])),Qv({type:u,values:b})}function iw(e){e=yu(e);let t=e.type==="hsl"||e.type==="hsla"?yu(HA(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function j9(e,t){const n=iw(e),i=iw(t);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function ni(e,t){return e=yu(e),t=J2(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Qv(e)}function Cy(e,t,n){try{return ni(e,t)}catch{return e}}function Q2(e,t){if(e=yu(e),t=J2(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Qv(e)}function ar(e,t,n){try{return Q2(e,t)}catch{return e}}function eS(e,t){if(e=yu(e),t=J2(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Qv(e)}function sr(e,t,n){try{return eS(e,t)}catch{return e}}function U9(e,t=.15){return iw(e)>.5?Q2(e,t):eS(e,t)}function ky(e,t,n){try{return U9(e,t)}catch{return e}}function QT(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function GA(e,t=166){let n;function i(...a){const c=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(c,t)}return i.clear=()=>{clearTimeout(n)},i}function Cx(e,t){var n,i,a;return ie.isValidElement(e)&&t.indexOf(e.type.muiName??((a=(i=(n=e.type)==null?void 0:n._payload)==null?void 0:i.value)==null?void 0:a.muiName))!==-1}function Ja(e){return e&&e.ownerDocument||document}function ul(e){return Ja(e).defaultView||window}function ow(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let e5=0;function V9(e){const[t,n]=ie.useState(e),i=e||t;return ie.useEffect(()=>{t==null&&(e5+=1,n(`mui-${e5}`))},[t]),i}const W9={...r0},t5=W9.useId;function ZA(e){if(t5!==void 0){const t=t5();return e??t}return V9(e)}function n5({controlled:e,default:t,name:n,state:i="value"}){const{current:a}=ie.useRef(e!==void 0),[c,d]=ie.useState(t),u=a?e:c,b=ie.useCallback(w=>{a||d(w)},[]);return[u,b]}function td(e){const t=ie.useRef(e);return Pc(()=>{t.current=e}),ie.useRef((...n)=>(0,t.current)(...n)).current}function Ai(...e){return ie.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{ow(n,t)})},e)}const r5={};function KA(e,t){const n=ie.useRef(r5);return n.current===r5&&(n.current=e(t)),n}const q9=[];function H9(e){ie.useEffect(e,q9)}class tS{constructor(){Yp(this,"currentId",null);Yp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Yp(this,"disposeEffect",()=>this.clear)}static create(){return new tS}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function XA(){const e=KA(tS.create).current;return H9(e.disposeEffect),e}function i5(e){try{return e.matches(":focus-visible")}catch{}return!1}function YA(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function Bn(e,t,n=void 0){const i={};for(const a in e){const c=e[a];let d="",u=!0;for(let b=0;b<c.length;b+=1){const w=c[b];w&&(d+=(u===!0?"":" ")+t(w),u=!1,n&&n[w]&&(d+=" "+n[w]))}i[a]=d}return i}function G9(e){return typeof e=="string"}function JA(e,t,n){return e===void 0||G9(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function QA(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(i=>i.match(/^on[A-Z]/)&&typeof e[i]=="function"&&!t.includes(i)).forEach(i=>{n[i]=e[i]}),n}function o5(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function e4(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:i,externalForwardedProps:a,className:c}=e;if(!t){const R=Ut(n==null?void 0:n.className,c,a==null?void 0:a.className,i==null?void 0:i.className),N={...n==null?void 0:n.style,...a==null?void 0:a.style,...i==null?void 0:i.style},V={...n,...a,...i};return R.length>0&&(V.className=R),Object.keys(N).length>0&&(V.style=N),{props:V,internalRef:void 0}}const d=QA({...a,...i}),u=o5(i),b=o5(a),w=t(d),I=Ut(w==null?void 0:w.className,n==null?void 0:n.className,c,a==null?void 0:a.className,i==null?void 0:i.className),k={...w==null?void 0:w.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...i==null?void 0:i.style},P={...w,...n,...b,...u};return I.length>0&&(P.className=I),Object.keys(k).length>0&&(P.style=k),{props:P,internalRef:w.ref}}function t4(e,t,n){return typeof e=="function"?e(t,n):e}function a5(e){var k;const{elementType:t,externalSlotProps:n,ownerState:i,skipResolvingSlotProps:a=!1,...c}=e,d=a?{}:t4(n,i),{props:u,internalRef:b}=e4({...c,externalSlotProps:d}),w=Ai(b,d==null?void 0:d.ref,(k=e.additionalProps)==null?void 0:k.ref);return JA(t,{...u,ref:w},i)}function qm(e){var t;return parseInt(ie.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const Z9=ie.createContext(),K9=()=>ie.useContext(Z9)??!1,X9=ie.createContext(void 0);function Y9(e){const{theme:t,name:n,props:i}=e;if(!t||!t.components||!t.components[n])return i;const a=t.components[n];return a.defaultProps?Tm(a.defaultProps,i):!a.styleOverrides&&!a.variants?Tm(a,i):i}function J9({props:e,name:t}){const n=ie.useContext(X9);return Y9({props:e,name:t,theme:{components:n}})}const s5={theme:void 0};function Q9(e){let t,n;return function(a){let c=t;return(c===void 0||a.theme!==n)&&(s5.theme=a.theme,c=VA(e(s5)),t=c,n=a.theme),c}}function ej(e=""){function t(...i){if(!i.length)return"";const a=i[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...i.slice(1))})`:`, ${a}`}return(i,...a)=>`var(--${e?`${e}-`:""}${i}${t(...a)})`}const l5=(e,t,n,i=[])=>{let a=e;t.forEach((c,d)=>{d===t.length-1?Array.isArray(a)?a[Number(c)]=n:a&&typeof a=="object"&&(a[c]=n):a&&typeof a=="object"&&(a[c]||(a[c]=i.includes(c)?[]:{}),a=a[c])})},tj=(e,t,n)=>{function i(a,c=[],d=[]){Object.entries(a).forEach(([u,b])=>{(!n||n&&!n([...c,u]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?i(b,[...c,u],Array.isArray(b)?[...d,u]:d):t([...c,u],b,d))})}i(e)},nj=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(i=>e.includes(i))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function kx(e,t){const{prefix:n,shouldSkipGeneratingVar:i}=t||{},a={},c={},d={};return tj(e,(u,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!i||!i(u,b))){const I=`--${n?`${n}-`:""}${u.join("-")}`,k=nj(u,b);Object.assign(a,{[I]:k}),l5(c,u,`var(${I})`,w),l5(d,u,`var(${I}, ${k})`,w)}},u=>u[0]==="vars"),{css:a,vars:c,varsWithDefaults:d}}function rj(e,t={}){const{getSelector:n=X,disableCssColorScheme:i,colorSchemeSelector:a}=t,{colorSchemes:c={},components:d,defaultColorScheme:u="light",...b}=e,{vars:w,css:I,varsWithDefaults:k}=kx(b,t);let P=k;const R={},{[u]:N,...V}=c;if(Object.entries(V||{}).forEach(([j,G])=>{const{vars:te,css:oe,varsWithDefaults:ae}=kx(G,t);P=Hi(P,ae),R[j]={css:oe,vars:te}}),N){const{css:j,vars:G,varsWithDefaults:te}=kx(N,t);P=Hi(P,te),R[u]={css:j,vars:G}}function X(j,G){var oe,ae;let te=a;if(a==="class"&&(te=".%s"),a==="data"&&(te="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(te=`[${a}="%s"]`),j){if(te==="media")return e.defaultColorScheme===j?":root":{[`@media (prefers-color-scheme: ${((ae=(oe=c[j])==null?void 0:oe.palette)==null?void 0:ae.mode)||j})`]:{":root":G}};if(te)return e.defaultColorScheme===j?`:root, ${te.replace("%s",String(j))}`:te.replace("%s",String(j))}return":root"}return{vars:P,generateThemeVars:()=>{let j={...w};return Object.entries(R).forEach(([,{vars:G}])=>{j=Hi(j,G)}),j},generateStyleSheets:()=>{var de,Me;const j=[],G=e.defaultColorScheme||"light";function te(Z,Ie){Object.keys(Ie).length&&j.push(typeof Z=="string"?{[Z]:{...Ie}}:Z)}te(n(void 0,{...I}),I);const{[G]:oe,...ae}=R;if(oe){const{css:Z}=oe,Ie=(Me=(de=c[G])==null?void 0:de.palette)==null?void 0:Me.mode,je=!i&&Ie?{colorScheme:Ie,...Z}:{...Z};te(n(G,{...je}),je)}return Object.entries(ae).forEach(([Z,{css:Ie}])=>{var Le,Oe;const je=(Oe=(Le=c[Z])==null?void 0:Le.palette)==null?void 0:Oe.mode,$e=!i&&je?{colorScheme:je,...Ie}:{...Ie};te(n(Z,{...$e}),$e)}),j}}}function ij(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const oj=Yv(),aj=D9("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${St(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),sj=e=>O9({props:e,name:"MuiContainer",defaultTheme:oj}),lj=(e,t)=>{const n=b=>Pn(t,b),{classes:i,fixed:a,disableGutters:c,maxWidth:d}=e,u={root:["root",d&&`maxWidth${St(String(d))}`,a&&"fixed",c&&"disableGutters"]};return Bn(u,n,i)};function uj(e={}){const{createStyledComponent:t=aj,useThemeProps:n=sj,componentName:i="MuiContainer"}=e,a=t(({theme:d,ownerState:u})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!u.disableGutters&&{paddingLeft:d.spacing(2),paddingRight:d.spacing(2),[d.breakpoints.up("sm")]:{paddingLeft:d.spacing(3),paddingRight:d.spacing(3)}}}),({theme:d,ownerState:u})=>u.fixed&&Object.keys(d.breakpoints.values).reduce((b,w)=>{const I=w,k=d.breakpoints.values[I];return k!==0&&(b[d.breakpoints.up(I)]={maxWidth:`${k}${d.breakpoints.unit}`}),b},{}),({theme:d,ownerState:u})=>({...u.maxWidth==="xs"&&{[d.breakpoints.up("xs")]:{maxWidth:Math.max(d.breakpoints.values.xs,444)}},...u.maxWidth&&u.maxWidth!=="xs"&&{[d.breakpoints.up(u.maxWidth)]:{maxWidth:`${d.breakpoints.values[u.maxWidth]}${d.breakpoints.unit}`}}}));return ie.forwardRef(function(u,b){const w=n(u),{className:I,component:k="div",disableGutters:P=!1,fixed:R=!1,maxWidth:N="lg",classes:V,...X}=w,D={...w,component:k,disableGutters:P,fixed:R,maxWidth:N},B=lj(D,i);return be.jsx(a,{as:k,ownerState:D,className:Ut(B.root,I),ref:b,...X})})}function n4(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Sm.white,default:Sm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const cj=n4();function r4(){return{text:{primary:Sm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Sm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const u5=r4();function c5(e,t,n,i){const a=i.light||i,c=i.dark||i*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=eS(e.main,a):t==="dark"&&(e.dark=Q2(e.main,c)))}function hj(e="light"){return e==="dark"?{main:Ah[200],light:Ah[50],dark:Ah[400]}:{main:Ah[700],light:Ah[400],dark:Ah[800]}}function dj(e="light"){return e==="dark"?{main:Mh[200],light:Mh[50],dark:Mh[400]}:{main:Mh[500],light:Mh[300],dark:Mh[700]}}function pj(e="light"){return e==="dark"?{main:Ph[500],light:Ph[300],dark:Ph[700]}:{main:Ph[700],light:Ph[400],dark:Ph[800]}}function fj(e="light"){return e==="dark"?{main:Lh[400],light:Lh[300],dark:Lh[700]}:{main:Lh[700],light:Lh[500],dark:Lh[900]}}function mj(e="light"){return e==="dark"?{main:zh[400],light:zh[300],dark:zh[700]}:{main:zh[800],light:zh[500],dark:zh[900]}}function gj(e="light"){return e==="dark"?{main:pf[400],light:pf[300],dark:pf[700]}:{main:"#ed6c02",light:pf[500],dark:pf[900]}}function nS(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:i=.2,...a}=e,c=e.primary||hj(t),d=e.secondary||dj(t),u=e.error||pj(t),b=e.info||fj(t),w=e.success||mj(t),I=e.warning||gj(t);function k(V){return j9(V,u5.text.primary)>=n?u5.text.primary:cj.text.primary}const P=({color:V,name:X,mainShade:D=500,lightShade:B=300,darkShade:j=700})=>{if(V={...V},!V.main&&V[D]&&(V.main=V[D]),!V.hasOwnProperty("main"))throw new Error(ll(11,X?` (${X})`:"",D));if(typeof V.main!="string")throw new Error(ll(12,X?` (${X})`:"",JSON.stringify(V.main)));return c5(V,"light",B,i),c5(V,"dark",j,i),V.contrastText||(V.contrastText=k(V.main)),V};let R;return t==="light"?R=n4():t==="dark"&&(R=r4()),Hi({common:{...Sm},mode:t,primary:P({color:c,name:"primary"}),secondary:P({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:u,name:"error"}),warning:P({color:I,name:"warning"}),info:P({color:b,name:"info"}),success:P({color:w,name:"success"}),grey:cN,contrastThreshold:n,getContrastText:k,augmentColor:P,tonalOffset:i,...R},a)}function yj(e){const t={};return Object.entries(e).forEach(i=>{const[a,c]=i;typeof c=="object"&&(t[a]=`${c.fontStyle?`${c.fontStyle} `:""}${c.fontVariant?`${c.fontVariant} `:""}${c.fontWeight?`${c.fontWeight} `:""}${c.fontStretch?`${c.fontStretch} `:""}${c.fontSize||""}${c.lineHeight?`/${c.lineHeight} `:""}${c.fontFamily||""}`)}),t}function vj(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function _j(e){return Math.round(e*1e5)/1e5}const h5={textTransform:"uppercase"},d5='"Roboto", "Helvetica", "Arial", sans-serif';function xj(e,t){const{fontFamily:n=d5,fontSize:i=14,fontWeightLight:a=300,fontWeightRegular:c=400,fontWeightMedium:d=500,fontWeightBold:u=700,htmlFontSize:b=16,allVariants:w,pxToRem:I,...k}=typeof t=="function"?t(e):t,P=i/14,R=I||(X=>`${X/b*P}rem`),N=(X,D,B,j,G)=>({fontFamily:n,fontWeight:X,fontSize:R(D),lineHeight:B,...n===d5?{letterSpacing:`${_j(j/D)}em`}:{},...G,...w}),V={h1:N(a,96,1.167,-1.5),h2:N(a,60,1.2,-.5),h3:N(c,48,1.167,0),h4:N(c,34,1.235,.25),h5:N(c,24,1.334,0),h6:N(d,20,1.6,.15),subtitle1:N(c,16,1.75,.15),subtitle2:N(d,14,1.57,.1),body1:N(c,16,1.5,.15),body2:N(c,14,1.43,.15),button:N(d,14,1.75,.4,h5),caption:N(c,12,1.66,.4),overline:N(c,12,2.66,1,h5),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Hi({htmlFontSize:b,pxToRem:R,fontFamily:n,fontSize:i,fontWeightLight:a,fontWeightRegular:c,fontWeightMedium:d,fontWeightBold:u,...V},k,{clone:!1})}const bj=.2,wj=.14,Sj=.12;function wr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${bj})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${wj})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${Sj})`].join(",")}const Cj=["none",wr(0,2,1,-1,0,1,1,0,0,1,3,0),wr(0,3,1,-2,0,2,2,0,0,1,5,0),wr(0,3,3,-2,0,3,4,0,0,1,8,0),wr(0,2,4,-1,0,4,5,0,0,1,10,0),wr(0,3,5,-1,0,5,8,0,0,1,14,0),wr(0,3,5,-1,0,6,10,0,0,1,18,0),wr(0,4,5,-2,0,7,10,1,0,2,16,1),wr(0,5,5,-3,0,8,10,1,0,3,14,2),wr(0,5,6,-3,0,9,12,1,0,3,16,2),wr(0,6,6,-3,0,10,14,1,0,4,18,3),wr(0,6,7,-4,0,11,15,1,0,4,20,3),wr(0,7,8,-4,0,12,17,2,0,5,22,4),wr(0,7,8,-4,0,13,19,2,0,5,24,4),wr(0,7,9,-4,0,14,21,2,0,5,26,4),wr(0,8,9,-5,0,15,22,2,0,6,28,5),wr(0,8,10,-5,0,16,24,2,0,6,30,5),wr(0,8,11,-5,0,17,26,2,0,6,32,5),wr(0,9,11,-5,0,18,28,2,0,7,34,6),wr(0,9,12,-6,0,19,29,2,0,7,36,6),wr(0,10,13,-6,0,20,31,3,0,8,38,7),wr(0,10,13,-6,0,21,33,3,0,8,40,7),wr(0,10,14,-6,0,22,35,3,0,8,42,7),wr(0,11,14,-7,0,23,36,3,0,9,44,8),wr(0,11,15,-7,0,24,38,3,0,9,46,8)],kj={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Ej={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function p5(e){return`${Math.round(e)}ms`}function Tj(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function Ij(e){const t={...kj,...e.easing},n={...Ej,...e.duration};return{getAutoHeightDuration:Tj,create:(a=["all"],c={})=>{const{duration:d=n.standard,easing:u=t.easeInOut,delay:b=0,...w}=c;return(Array.isArray(a)?a:[a]).map(I=>`${I} ${typeof d=="string"?d:p5(d)} ${u} ${typeof b=="string"?b:p5(b)}`).join(",")},...e,easing:t,duration:n}}const Pj={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function Mj(e){return gs(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function i4(e={}){const t={...e};function n(i){const a=Object.entries(i);for(let c=0;c<a.length;c++){const[d,u]=a[c];!Mj(u)||d.startsWith("unstable_")?delete i[d]:gs(u)&&(i[d]={...u},n(i[d]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function aw(e={},...t){const{breakpoints:n,mixins:i={},spacing:a,palette:c={},transitions:d={},typography:u={},shape:b,...w}=e;if(e.vars)throw new Error(ll(20));const I=nS(c),k=Yv(e);let P=Hi(k,{mixins:vj(k.breakpoints,i),palette:I,shadows:Cj.slice(),typography:xj(I,u),transitions:Ij(d),zIndex:{...Pj}});return P=Hi(P,w),P=t.reduce((R,N)=>Hi(R,N),P),P.unstable_sxConfig={...Wm,...w==null?void 0:w.unstable_sxConfig},P.unstable_sx=function(N){return Ic({sx:N,theme:this})},P.toRuntimeSource=i4,P}function sw(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const Aj=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=sw(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function o4(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function a4(e){return e==="dark"?Aj:[]}function Lj(e){const{palette:t={mode:"light"},opacity:n,overlays:i,...a}=e,c=nS(t);return{palette:c,opacity:{...o4(c.mode),...n},overlays:i||a4(c.mode),...a}}function zj(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const Rj=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],Dj=e=>(t,n)=>{const i=e.rootSelector||":root",a=e.colorSchemeSelector;let c=a;if(a==="class"&&(c=".%s"),a==="data"&&(c="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(c=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const d={};return Rj(e.cssVarPrefix).forEach(u=>{d[u]=n[u],delete n[u]}),c==="media"?{[i]:n,"@media (prefers-color-scheme: dark)":{[i]:d}}:c?{[c.replace("%s",t)]:d,[`${i}, ${c.replace("%s",t)}`]:n}:{[i]:{...n,...d}}}if(c&&c!=="media")return`${i}, ${c.replace("%s",String(t))}`}else if(t){if(c==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[i]:n}};if(c)return c.replace("%s",String(t))}return i};function $j(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Be(e,t,n){!e[t]&&n&&(e[t]=n)}function Ef(e){return!e||!e.startsWith("hsl")?e:HA(e)}function Hs(e,t){`${t}Channel`in e||(e[`${t}Channel`]=kf(Ef(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function Oj(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const ls=e=>{try{return e()}catch{}},Fj=(e="mui")=>ej(e);function Ex(e,t,n,i){if(!t)return;t=t===!0?{}:t;const a=i==="dark"?"dark":"light";if(!n){e[i]=Lj({...t,palette:{mode:a,...t==null?void 0:t.palette}});return}const{palette:c,...d}=aw({...n,palette:{mode:a,...t==null?void 0:t.palette}});return e[i]={...t,palette:c,opacity:{...o4(a),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||a4(a)},d}function Bj(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:i,disableCssColorScheme:a=!1,cssVarPrefix:c="mui",shouldSkipGeneratingVar:d=zj,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:b=":root",...w}=e,I=Object.keys(n)[0],k=i||(n.light&&I!=="light"?"light":I),P=Fj(c),{[k]:R,light:N,dark:V,...X}=n,D={...X};let B=R;if((k==="dark"&&!("dark"in n)||k==="light"&&!("light"in n))&&(B=!0),!B)throw new Error(ll(21,k));const j=Ex(D,B,w,k);N&&!D.light&&Ex(D,N,void 0,"light"),V&&!D.dark&&Ex(D,V,void 0,"dark");let G={defaultColorScheme:k,...j,cssVarPrefix:c,colorSchemeSelector:u,rootSelector:b,getCssVar:P,colorSchemes:D,font:{...yj(j.typography),...j.font},spacing:Oj(w.spacing)};Object.keys(G.colorSchemes).forEach(Me=>{const Z=G.colorSchemes[Me].palette,Ie=je=>{const $e=je.split("-"),Le=$e[1],Oe=$e[2];return P(je,Z[Le][Oe])};if(Z.mode==="light"&&(Be(Z.common,"background","#fff"),Be(Z.common,"onBackground","#000")),Z.mode==="dark"&&(Be(Z.common,"background","#000"),Be(Z.common,"onBackground","#fff")),$j(Z,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),Z.mode==="light"){Be(Z.Alert,"errorColor",ar(Z.error.light,.6)),Be(Z.Alert,"infoColor",ar(Z.info.light,.6)),Be(Z.Alert,"successColor",ar(Z.success.light,.6)),Be(Z.Alert,"warningColor",ar(Z.warning.light,.6)),Be(Z.Alert,"errorFilledBg",Ie("palette-error-main")),Be(Z.Alert,"infoFilledBg",Ie("palette-info-main")),Be(Z.Alert,"successFilledBg",Ie("palette-success-main")),Be(Z.Alert,"warningFilledBg",Ie("palette-warning-main")),Be(Z.Alert,"errorFilledColor",ls(()=>Z.getContrastText(Z.error.main))),Be(Z.Alert,"infoFilledColor",ls(()=>Z.getContrastText(Z.info.main))),Be(Z.Alert,"successFilledColor",ls(()=>Z.getContrastText(Z.success.main))),Be(Z.Alert,"warningFilledColor",ls(()=>Z.getContrastText(Z.warning.main))),Be(Z.Alert,"errorStandardBg",sr(Z.error.light,.9)),Be(Z.Alert,"infoStandardBg",sr(Z.info.light,.9)),Be(Z.Alert,"successStandardBg",sr(Z.success.light,.9)),Be(Z.Alert,"warningStandardBg",sr(Z.warning.light,.9)),Be(Z.Alert,"errorIconColor",Ie("palette-error-main")),Be(Z.Alert,"infoIconColor",Ie("palette-info-main")),Be(Z.Alert,"successIconColor",Ie("palette-success-main")),Be(Z.Alert,"warningIconColor",Ie("palette-warning-main")),Be(Z.AppBar,"defaultBg",Ie("palette-grey-100")),Be(Z.Avatar,"defaultBg",Ie("palette-grey-400")),Be(Z.Button,"inheritContainedBg",Ie("palette-grey-300")),Be(Z.Button,"inheritContainedHoverBg",Ie("palette-grey-A100")),Be(Z.Chip,"defaultBorder",Ie("palette-grey-400")),Be(Z.Chip,"defaultAvatarColor",Ie("palette-grey-700")),Be(Z.Chip,"defaultIconColor",Ie("palette-grey-700")),Be(Z.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Be(Z.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Be(Z.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Be(Z.LinearProgress,"primaryBg",sr(Z.primary.main,.62)),Be(Z.LinearProgress,"secondaryBg",sr(Z.secondary.main,.62)),Be(Z.LinearProgress,"errorBg",sr(Z.error.main,.62)),Be(Z.LinearProgress,"infoBg",sr(Z.info.main,.62)),Be(Z.LinearProgress,"successBg",sr(Z.success.main,.62)),Be(Z.LinearProgress,"warningBg",sr(Z.warning.main,.62)),Be(Z.Skeleton,"bg",`rgba(${Ie("palette-text-primaryChannel")} / 0.11)`),Be(Z.Slider,"primaryTrack",sr(Z.primary.main,.62)),Be(Z.Slider,"secondaryTrack",sr(Z.secondary.main,.62)),Be(Z.Slider,"errorTrack",sr(Z.error.main,.62)),Be(Z.Slider,"infoTrack",sr(Z.info.main,.62)),Be(Z.Slider,"successTrack",sr(Z.success.main,.62)),Be(Z.Slider,"warningTrack",sr(Z.warning.main,.62));const je=ky(Z.background.default,.8);Be(Z.SnackbarContent,"bg",je),Be(Z.SnackbarContent,"color",ls(()=>Z.getContrastText(je))),Be(Z.SpeedDialAction,"fabHoverBg",ky(Z.background.paper,.15)),Be(Z.StepConnector,"border",Ie("palette-grey-400")),Be(Z.StepContent,"border",Ie("palette-grey-400")),Be(Z.Switch,"defaultColor",Ie("palette-common-white")),Be(Z.Switch,"defaultDisabledColor",Ie("palette-grey-100")),Be(Z.Switch,"primaryDisabledColor",sr(Z.primary.main,.62)),Be(Z.Switch,"secondaryDisabledColor",sr(Z.secondary.main,.62)),Be(Z.Switch,"errorDisabledColor",sr(Z.error.main,.62)),Be(Z.Switch,"infoDisabledColor",sr(Z.info.main,.62)),Be(Z.Switch,"successDisabledColor",sr(Z.success.main,.62)),Be(Z.Switch,"warningDisabledColor",sr(Z.warning.main,.62)),Be(Z.TableCell,"border",sr(Cy(Z.divider,1),.88)),Be(Z.Tooltip,"bg",Cy(Z.grey[700],.92))}if(Z.mode==="dark"){Be(Z.Alert,"errorColor",sr(Z.error.light,.6)),Be(Z.Alert,"infoColor",sr(Z.info.light,.6)),Be(Z.Alert,"successColor",sr(Z.success.light,.6)),Be(Z.Alert,"warningColor",sr(Z.warning.light,.6)),Be(Z.Alert,"errorFilledBg",Ie("palette-error-dark")),Be(Z.Alert,"infoFilledBg",Ie("palette-info-dark")),Be(Z.Alert,"successFilledBg",Ie("palette-success-dark")),Be(Z.Alert,"warningFilledBg",Ie("palette-warning-dark")),Be(Z.Alert,"errorFilledColor",ls(()=>Z.getContrastText(Z.error.dark))),Be(Z.Alert,"infoFilledColor",ls(()=>Z.getContrastText(Z.info.dark))),Be(Z.Alert,"successFilledColor",ls(()=>Z.getContrastText(Z.success.dark))),Be(Z.Alert,"warningFilledColor",ls(()=>Z.getContrastText(Z.warning.dark))),Be(Z.Alert,"errorStandardBg",ar(Z.error.light,.9)),Be(Z.Alert,"infoStandardBg",ar(Z.info.light,.9)),Be(Z.Alert,"successStandardBg",ar(Z.success.light,.9)),Be(Z.Alert,"warningStandardBg",ar(Z.warning.light,.9)),Be(Z.Alert,"errorIconColor",Ie("palette-error-main")),Be(Z.Alert,"infoIconColor",Ie("palette-info-main")),Be(Z.Alert,"successIconColor",Ie("palette-success-main")),Be(Z.Alert,"warningIconColor",Ie("palette-warning-main")),Be(Z.AppBar,"defaultBg",Ie("palette-grey-900")),Be(Z.AppBar,"darkBg",Ie("palette-background-paper")),Be(Z.AppBar,"darkColor",Ie("palette-text-primary")),Be(Z.Avatar,"defaultBg",Ie("palette-grey-600")),Be(Z.Button,"inheritContainedBg",Ie("palette-grey-800")),Be(Z.Button,"inheritContainedHoverBg",Ie("palette-grey-700")),Be(Z.Chip,"defaultBorder",Ie("palette-grey-700")),Be(Z.Chip,"defaultAvatarColor",Ie("palette-grey-300")),Be(Z.Chip,"defaultIconColor",Ie("palette-grey-300")),Be(Z.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Be(Z.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Be(Z.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Be(Z.LinearProgress,"primaryBg",ar(Z.primary.main,.5)),Be(Z.LinearProgress,"secondaryBg",ar(Z.secondary.main,.5)),Be(Z.LinearProgress,"errorBg",ar(Z.error.main,.5)),Be(Z.LinearProgress,"infoBg",ar(Z.info.main,.5)),Be(Z.LinearProgress,"successBg",ar(Z.success.main,.5)),Be(Z.LinearProgress,"warningBg",ar(Z.warning.main,.5)),Be(Z.Skeleton,"bg",`rgba(${Ie("palette-text-primaryChannel")} / 0.13)`),Be(Z.Slider,"primaryTrack",ar(Z.primary.main,.5)),Be(Z.Slider,"secondaryTrack",ar(Z.secondary.main,.5)),Be(Z.Slider,"errorTrack",ar(Z.error.main,.5)),Be(Z.Slider,"infoTrack",ar(Z.info.main,.5)),Be(Z.Slider,"successTrack",ar(Z.success.main,.5)),Be(Z.Slider,"warningTrack",ar(Z.warning.main,.5));const je=ky(Z.background.default,.98);Be(Z.SnackbarContent,"bg",je),Be(Z.SnackbarContent,"color",ls(()=>Z.getContrastText(je))),Be(Z.SpeedDialAction,"fabHoverBg",ky(Z.background.paper,.15)),Be(Z.StepConnector,"border",Ie("palette-grey-600")),Be(Z.StepContent,"border",Ie("palette-grey-600")),Be(Z.Switch,"defaultColor",Ie("palette-grey-300")),Be(Z.Switch,"defaultDisabledColor",Ie("palette-grey-600")),Be(Z.Switch,"primaryDisabledColor",ar(Z.primary.main,.55)),Be(Z.Switch,"secondaryDisabledColor",ar(Z.secondary.main,.55)),Be(Z.Switch,"errorDisabledColor",ar(Z.error.main,.55)),Be(Z.Switch,"infoDisabledColor",ar(Z.info.main,.55)),Be(Z.Switch,"successDisabledColor",ar(Z.success.main,.55)),Be(Z.Switch,"warningDisabledColor",ar(Z.warning.main,.55)),Be(Z.TableCell,"border",ar(Cy(Z.divider,1),.68)),Be(Z.Tooltip,"bg",Cy(Z.grey[700],.92))}Hs(Z.background,"default"),Hs(Z.background,"paper"),Hs(Z.common,"background"),Hs(Z.common,"onBackground"),Hs(Z,"divider"),Object.keys(Z).forEach(je=>{const $e=Z[je];$e&&typeof $e=="object"&&($e.main&&Be(Z[je],"mainChannel",kf(Ef($e.main))),$e.light&&Be(Z[je],"lightChannel",kf(Ef($e.light))),$e.dark&&Be(Z[je],"darkChannel",kf(Ef($e.dark))),$e.contrastText&&Be(Z[je],"contrastTextChannel",kf(Ef($e.contrastText))),je==="text"&&(Hs(Z[je],"primary"),Hs(Z[je],"secondary")),je==="action"&&($e.active&&Hs(Z[je],"active"),$e.selected&&Hs(Z[je],"selected")))})}),G=t.reduce((Me,Z)=>Hi(Me,Z),G);const te={prefix:c,disableCssColorScheme:a,shouldSkipGeneratingVar:d,getSelector:Dj(G)},{vars:oe,generateThemeVars:ae,generateStyleSheets:de}=rj(G,te);return G.vars=oe,Object.entries(G.colorSchemes[G.defaultColorScheme]).forEach(([Me,Z])=>{G[Me]=Z}),G.generateThemeVars=ae,G.generateStyleSheets=de,G.generateSpacing=function(){return NA(w.spacing,K2(this))},G.getColorSchemeSelector=ij(u),G.spacing=G.generateSpacing(),G.shouldSkipGeneratingVar=d,G.unstable_sxConfig={...Wm,...w==null?void 0:w.unstable_sxConfig},G.unstable_sx=function(Z){return Ic({sx:Z,theme:this})},G.toRuntimeSource=i4,G}function f5(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:nS({...n===!0?{}:n.palette,mode:t})})}function s4(e={},...t){const{palette:n,cssVariables:i=!1,colorSchemes:a=n?void 0:{light:!0},defaultColorScheme:c=n==null?void 0:n.mode,...d}=e,u=c||"light",b=a==null?void 0:a[u],w={...a,...n?{[u]:{...typeof b!="boolean"&&b,palette:n}}:void 0};if(i===!1){if(!("colorSchemes"in e))return aw(e,...t);let I=n;"palette"in e||w[u]&&(w[u]!==!0?I=w[u].palette:u==="dark"&&(I={mode:"dark"}));const k=aw({...e,palette:I},...t);return k.defaultColorScheme=u,k.colorSchemes=w,k.palette.mode==="light"&&(k.colorSchemes.light={...w.light!==!0&&w.light,palette:k.palette},f5(k,"dark",w.dark)),k.palette.mode==="dark"&&(k.colorSchemes.dark={...w.dark!==!0&&w.dark,palette:k.palette},f5(k,"light",w.light)),k}return!n&&!("light"in w)&&u==="light"&&(w.light=!0),Bj({...d,colorSchemes:w,defaultColorScheme:u,...typeof i!="boolean"&&i},...t)}const rS=s4();function e1(){const e=Jv(rS);return e[Iv]||e}function l4(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Ma=e=>l4(e)&&e!=="classes",Mt=qA({themeId:Iv,defaultTheme:rS,rootShouldForwardProp:Ma});function Nj(e){return be.jsx(S9,{...e,defaultTheme:rS,themeId:Iv})}function jj(e){return function(n){return be.jsx(Nj,{styles:typeof e=="function"?i=>e({theme:i,...n}):e})}}function Uj(){return Y2}const tr=Q9;function Nn(e){return J9(e)}function Vj(e){return Pn("MuiSvgIcon",e)}Mn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Wj=e=>{const{color:t,fontSize:n,classes:i}=e,a={root:["root",t!=="inherit"&&`color${St(t)}`,`fontSize${St(n)}`]};return Bn(a,Vj,i)},qj=Mt("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${St(n.color)}`],t[`fontSize${St(n.fontSize)}`]]}})(tr(({theme:e})=>{var t,n,i,a,c,d,u,b,w,I,k,P,R,N;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(a=(t=e.transitions)==null?void 0:t.create)==null?void 0:a.call(t,"fill",{duration:(i=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:i.shorter}),variants:[{props:V=>!V.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((d=(c=e.typography)==null?void 0:c.pxToRem)==null?void 0:d.call(c,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:b.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((I=(w=e.typography)==null?void 0:w.pxToRem)==null?void 0:I.call(w,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,V])=>V&&V.main).map(([V])=>{var X,D;return{props:{color:V},style:{color:(D=(X=(e.vars??e).palette)==null?void 0:X[V])==null?void 0:D.main}}}),{props:{color:"action"},style:{color:(P=(k=(e.vars??e).palette)==null?void 0:k.action)==null?void 0:P.active}},{props:{color:"disabled"},style:{color:(N=(R=(e.vars??e).palette)==null?void 0:R.action)==null?void 0:N.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),xc=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiSvgIcon"}),{children:a,className:c,color:d="inherit",component:u="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:I=!1,titleAccess:k,viewBox:P="0 0 24 24",...R}=i,N=ie.isValidElement(a)&&a.type==="svg",V={...i,color:d,component:u,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:I,viewBox:P,hasSvgAsChild:N},X={};I||(X.viewBox=P);const D=Wj(V);return be.jsxs(qj,{as:u,className:Ut(D.root,c),focusable:"false",color:w,"aria-hidden":k?void 0:!0,role:k?"img":void 0,ref:n,...X,...R,...N&&a.props,ownerState:V,children:[N?a.props.children:a,k?be.jsx("title",{children:k}):null]})});xc&&(xc.muiName="SvgIcon");function ra(e,t){function n(i,a){return be.jsx(xc,{"data-testid":`${t}Icon`,ref:a,...i,children:e})}return n.muiName=xc.muiName,ie.memo(ie.forwardRef(n))}var rr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iS=Symbol.for("react.element"),oS=Symbol.for("react.portal"),t1=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),r1=Symbol.for("react.profiler"),i1=Symbol.for("react.provider"),o1=Symbol.for("react.context"),Hj=Symbol.for("react.server_context"),a1=Symbol.for("react.forward_ref"),s1=Symbol.for("react.suspense"),l1=Symbol.for("react.suspense_list"),u1=Symbol.for("react.memo"),c1=Symbol.for("react.lazy"),Gj=Symbol.for("react.offscreen"),u4;u4=Symbol.for("react.module.reference");function Aa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iS:switch(e=e.type,e){case t1:case r1:case n1:case s1:case l1:return e;default:switch(e=e&&e.$$typeof,e){case Hj:case o1:case a1:case c1:case u1:case i1:return e;default:return t}}case oS:return t}}}rr.ContextConsumer=o1;rr.ContextProvider=i1;rr.Element=iS;rr.ForwardRef=a1;rr.Fragment=t1;rr.Lazy=c1;rr.Memo=u1;rr.Portal=oS;rr.Profiler=r1;rr.StrictMode=n1;rr.Suspense=s1;rr.SuspenseList=l1;rr.isAsyncMode=function(){return!1};rr.isConcurrentMode=function(){return!1};rr.isContextConsumer=function(e){return Aa(e)===o1};rr.isContextProvider=function(e){return Aa(e)===i1};rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iS};rr.isForwardRef=function(e){return Aa(e)===a1};rr.isFragment=function(e){return Aa(e)===t1};rr.isLazy=function(e){return Aa(e)===c1};rr.isMemo=function(e){return Aa(e)===u1};rr.isPortal=function(e){return Aa(e)===oS};rr.isProfiler=function(e){return Aa(e)===r1};rr.isStrictMode=function(e){return Aa(e)===n1};rr.isSuspense=function(e){return Aa(e)===s1};rr.isSuspenseList=function(e){return Aa(e)===l1};rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===t1||e===r1||e===n1||e===s1||e===l1||e===Gj||typeof e=="object"&&e!==null&&(e.$$typeof===c1||e.$$typeof===u1||e.$$typeof===i1||e.$$typeof===o1||e.$$typeof===a1||e.$$typeof===u4||e.getModuleId!==void 0)};rr.typeOf=Aa;function c4(e,t){if(e==null)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;n[i]=e[i]}return n}function lw(e,t){return lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},lw(e,t)}function h4(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,lw(e,t)}const m5={disabled:!1},U0=yi.createContext(null);var Zj=function(t){return t.scrollTop},Tf="unmounted",ic="exited",oc="entering",jh="entered",uw="exiting",Ts=function(e){h4(t,e);function t(i,a){var c;c=e.call(this,i,a)||this;var d=a,u=d&&!d.isMounting?i.enter:i.appear,b;return c.appearStatus=null,i.in?u?(b=ic,c.appearStatus=oc):b=jh:i.unmountOnExit||i.mountOnEnter?b=Tf:b=ic,c.state={status:b},c.nextCallback=null,c}t.getDerivedStateFromProps=function(a,c){var d=a.in;return d&&c.status===Tf?{status:ic}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var c=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==oc&&d!==jh&&(c=oc):(d===oc||d===jh)&&(c=uw)}this.updateStatus(!1,c)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,c,d,u;return c=d=u=a,a!=null&&typeof a!="number"&&(c=a.exit,d=a.enter,u=a.appear!==void 0?a.appear:d),{exit:c,enter:d,appear:u}},n.updateStatus=function(a,c){if(a===void 0&&(a=!1),c!==null)if(this.cancelNextCallback(),c===oc){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:my.findDOMNode(this);d&&Zj(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ic&&this.setState({status:Tf})},n.performEnter=function(a){var c=this,d=this.props.enter,u=this.context?this.context.isMounting:a,b=this.props.nodeRef?[u]:[my.findDOMNode(this),u],w=b[0],I=b[1],k=this.getTimeouts(),P=u?k.appear:k.enter;if(!a&&!d||m5.disabled){this.safeSetState({status:jh},function(){c.props.onEntered(w)});return}this.props.onEnter(w,I),this.safeSetState({status:oc},function(){c.props.onEntering(w,I),c.onTransitionEnd(P,function(){c.safeSetState({status:jh},function(){c.props.onEntered(w,I)})})})},n.performExit=function(){var a=this,c=this.props.exit,d=this.getTimeouts(),u=this.props.nodeRef?void 0:my.findDOMNode(this);if(!c||m5.disabled){this.safeSetState({status:ic},function(){a.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:uw},function(){a.props.onExiting(u),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:ic},function(){a.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,c){c=this.setNextCallback(c),this.setState(a,c)},n.setNextCallback=function(a){var c=this,d=!0;return this.nextCallback=function(u){d&&(d=!1,c.nextCallback=null,a(u))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(a,c){this.setNextCallback(c);var d=this.props.nodeRef?this.props.nodeRef.current:my.findDOMNode(this),u=a==null&&!this.props.addEndListener;if(!d||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],w=b[0],I=b[1];this.props.addEndListener(w,I)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===Tf)return null;var c=this.props,d=c.children;c.in,c.mountOnEnter,c.unmountOnExit,c.appear,c.enter,c.exit,c.timeout,c.addEndListener,c.onEnter,c.onEntering,c.onEntered,c.onExit,c.onExiting,c.onExited,c.nodeRef;var u=c4(c,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return yi.createElement(U0.Provider,{value:null},typeof d=="function"?d(a,u):yi.cloneElement(yi.Children.only(d),u))},t}(yi.Component);Ts.contextType=U0;Ts.propTypes={};function Rh(){}Ts.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Rh,onEntering:Rh,onEntered:Rh,onExit:Rh,onExiting:Rh,onExited:Rh};Ts.UNMOUNTED=Tf;Ts.EXITED=ic;Ts.ENTERING=oc;Ts.ENTERED=jh;Ts.EXITING=uw;function Kj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aS(e,t){var n=function(c){return t&&ie.isValidElement(c)?t(c):c},i=Object.create(null);return e&&ie.Children.map(e,function(a){return a}).forEach(function(a){i[a.key]=n(a)}),i}function Xj(e,t){e=e||{},t=t||{};function n(I){return I in t?t[I]:e[I]}var i=Object.create(null),a=[];for(var c in e)c in t?a.length&&(i[c]=a,a=[]):a.push(c);var d,u={};for(var b in t){if(i[b])for(d=0;d<i[b].length;d++){var w=i[b][d];u[i[b][d]]=n(w)}u[b]=n(b)}for(d=0;d<a.length;d++)u[a[d]]=n(a[d]);return u}function dc(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Yj(e,t){return aS(e.children,function(n){return ie.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:dc(n,"appear",e),enter:dc(n,"enter",e),exit:dc(n,"exit",e)})})}function Jj(e,t,n){var i=aS(e.children),a=Xj(t,i);return Object.keys(a).forEach(function(c){var d=a[c];if(ie.isValidElement(d)){var u=c in t,b=c in i,w=t[c],I=ie.isValidElement(w)&&!w.props.in;b&&(!u||I)?a[c]=ie.cloneElement(d,{onExited:n.bind(null,d),in:!0,exit:dc(d,"exit",e),enter:dc(d,"enter",e)}):!b&&u&&!I?a[c]=ie.cloneElement(d,{in:!1}):b&&u&&ie.isValidElement(w)&&(a[c]=ie.cloneElement(d,{onExited:n.bind(null,d),in:w.props.in,exit:dc(d,"exit",e),enter:dc(d,"enter",e)}))}}),a}var Qj=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},eU={component:"div",childFactory:function(t){return t}},sS=function(e){h4(t,e);function t(i,a){var c;c=e.call(this,i,a)||this;var d=c.handleExited.bind(Kj(c));return c.state={contextValue:{isMounting:!0},handleExited:d,firstRender:!0},c}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,c){var d=c.children,u=c.handleExited,b=c.firstRender;return{children:b?Yj(a,u):Jj(a,d,u),firstRender:!1}},n.handleExited=function(a,c){var d=aS(this.props.children);a.key in d||(a.props.onExited&&a.props.onExited(c),this.mounted&&this.setState(function(u){var b=B0({},u.children);return delete b[a.key],{children:b}}))},n.render=function(){var a=this.props,c=a.component,d=a.childFactory,u=c4(a,["component","childFactory"]),b=this.state.contextValue,w=Qj(this.state.children).map(d);return delete u.appear,delete u.enter,delete u.exit,c===null?yi.createElement(U0.Provider,{value:b},w):yi.createElement(U0.Provider,{value:b},yi.createElement(c,u,w))},t}(yi.Component);sS.propTypes={};sS.defaultProps=eU;const d4=e=>e.scrollTop;function V0(e,t){const{timeout:n,easing:i,style:a={}}=e;return{duration:a.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:a.transitionTimingFunction??(typeof i=="object"?i[t.mode]:i),delay:a.transitionDelay}}function tU(e){return Pn("MuiPaper",e)}Mn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const nU=e=>{const{square:t,elevation:n,variant:i,classes:a}=e,c={root:["root",i,!t&&"rounded",i==="elevation"&&`elevation${n}`]};return Bn(c,tU,a)},rU=Mt("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(tr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),h1=ie.forwardRef(function(t,n){var R;const i=Nn({props:t,name:"MuiPaper"}),a=e1(),{className:c,component:d="div",elevation:u=1,square:b=!1,variant:w="elevation",...I}=i,k={...i,component:d,elevation:u,square:b,variant:w},P=nU(k);return be.jsx(rU,{as:d,ownerState:k,className:Ut(P.root,c),ref:n,...I,style:{...w==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[u],...a.vars&&{"--Paper-overlay":(R=a.vars.overlays)==null?void 0:R[u]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${ni("#fff",sw(u))}, ${ni("#fff",sw(u))})`}},...I.style}})});function _a(e,t){const{className:n,elementType:i,ownerState:a,externalForwardedProps:c,getSlotOwnerState:d,internalForwardedProps:u,...b}=t,{component:w,slots:I={[e]:void 0},slotProps:k={[e]:void 0},...P}=c,R=I[e]||i,N=t4(k[e],a),{props:{component:V,...X},internalRef:D}=e4({className:n,...b,externalForwardedProps:e==="root"?P:void 0,externalSlotProps:N}),B=Ai(D,N==null?void 0:N.ref,t.ref),j=d?d(X):{},G={...a,...j},te=e==="root"?V||w:V,oe=JA(R,{...e==="root"&&!w&&!I[e]&&u,...e!=="root"&&!I[e]&&u,...X,...te&&{as:te},ref:B},G);return Object.keys(j).forEach(ae=>{delete oe[ae]}),[R,oe]}class W0{constructor(){Yp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new W0}static use(){const t=KA(W0.create).current,[n,i]=ie.useState(!1);return t.shouldMount=n,t.setShouldMount=i,ie.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=oU(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function iU(){return W0.use()}function oU(){let e,t;const n=new Promise((i,a)=>{e=i,t=a});return n.resolve=e,n.reject=t,n}function aU(e){const{className:t,classes:n,pulsate:i=!1,rippleX:a,rippleY:c,rippleSize:d,in:u,onExited:b,timeout:w}=e,[I,k]=ie.useState(!1),P=Ut(t,n.ripple,n.rippleVisible,i&&n.ripplePulsate),R={width:d,height:d,top:-(d/2)+c,left:-(d/2)+a},N=Ut(n.child,I&&n.childLeaving,i&&n.childPulsate);return!u&&!I&&k(!0),ie.useEffect(()=>{if(!u&&b!=null){const V=setTimeout(b,w);return()=>{clearTimeout(V)}}},[b,u,w]),be.jsx("span",{className:P,style:R,children:be.jsx("span",{className:N})})}const ma=Mn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),cw=550,sU=80,lU=H2`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,uU=H2`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,cU=H2`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,hU=Mt("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),dU=Mt(aU,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${ma.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${lU};
    animation-duration: ${cw}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${ma.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${ma.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${ma.childLeaving} {
    opacity: 0;
    animation-name: ${uU};
    animation-duration: ${cw}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${ma.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${cU};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,pU=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:c={},className:d,...u}=i,[b,w]=ie.useState([]),I=ie.useRef(0),k=ie.useRef(null);ie.useEffect(()=>{k.current&&(k.current(),k.current=null)},[b]);const P=ie.useRef(!1),R=XA(),N=ie.useRef(null),V=ie.useRef(null),X=ie.useCallback(G=>{const{pulsate:te,rippleX:oe,rippleY:ae,rippleSize:de,cb:Me}=G;w(Z=>[...Z,be.jsx(dU,{classes:{ripple:Ut(c.ripple,ma.ripple),rippleVisible:Ut(c.rippleVisible,ma.rippleVisible),ripplePulsate:Ut(c.ripplePulsate,ma.ripplePulsate),child:Ut(c.child,ma.child),childLeaving:Ut(c.childLeaving,ma.childLeaving),childPulsate:Ut(c.childPulsate,ma.childPulsate)},timeout:cw,pulsate:te,rippleX:oe,rippleY:ae,rippleSize:de},I.current)]),I.current+=1,k.current=Me},[c]),D=ie.useCallback((G={},te={},oe=()=>{})=>{const{pulsate:ae=!1,center:de=a||te.pulsate,fakeElement:Me=!1}=te;if((G==null?void 0:G.type)==="mousedown"&&P.current){P.current=!1;return}(G==null?void 0:G.type)==="touchstart"&&(P.current=!0);const Z=Me?null:V.current,Ie=Z?Z.getBoundingClientRect():{width:0,height:0,left:0,top:0};let je,$e,Le;if(de||G===void 0||G.clientX===0&&G.clientY===0||!G.clientX&&!G.touches)je=Math.round(Ie.width/2),$e=Math.round(Ie.height/2);else{const{clientX:Oe,clientY:He}=G.touches&&G.touches.length>0?G.touches[0]:G;je=Math.round(Oe-Ie.left),$e=Math.round(He-Ie.top)}if(de)Le=Math.sqrt((2*Ie.width**2+Ie.height**2)/3),Le%2===0&&(Le+=1);else{const Oe=Math.max(Math.abs((Z?Z.clientWidth:0)-je),je)*2+2,He=Math.max(Math.abs((Z?Z.clientHeight:0)-$e),$e)*2+2;Le=Math.sqrt(Oe**2+He**2)}G!=null&&G.touches?N.current===null&&(N.current=()=>{X({pulsate:ae,rippleX:je,rippleY:$e,rippleSize:Le,cb:oe})},R.start(sU,()=>{N.current&&(N.current(),N.current=null)})):X({pulsate:ae,rippleX:je,rippleY:$e,rippleSize:Le,cb:oe})},[a,X,R]),B=ie.useCallback(()=>{D({},{pulsate:!0})},[D]),j=ie.useCallback((G,te)=>{if(R.clear(),(G==null?void 0:G.type)==="touchend"&&N.current){N.current(),N.current=null,R.start(0,()=>{j(G,te)});return}N.current=null,w(oe=>oe.length>0?oe.slice(1):oe),k.current=te},[R]);return ie.useImperativeHandle(n,()=>({pulsate:B,start:D,stop:j}),[B,D,j]),be.jsx(hU,{className:Ut(ma.root,c.root,d),ref:V,...u,children:be.jsx(sS,{component:null,exit:!0,children:b})})});function fU(e){return Pn("MuiButtonBase",e)}const mU=Mn("MuiButtonBase",["root","disabled","focusVisible"]),gU=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:i,classes:a}=e,d=Bn({root:["root",t&&"disabled",n&&"focusVisible"]},fU,a);return n&&i&&(d.root+=` ${i}`),d},yU=Mt("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${mU.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Im=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:c=!1,children:d,className:u,component:b="button",disabled:w=!1,disableRipple:I=!1,disableTouchRipple:k=!1,focusRipple:P=!1,focusVisibleClassName:R,LinkComponent:N="a",onBlur:V,onClick:X,onContextMenu:D,onDragLeave:B,onFocus:j,onFocusVisible:G,onKeyDown:te,onKeyUp:oe,onMouseDown:ae,onMouseLeave:de,onMouseUp:Me,onTouchEnd:Z,onTouchMove:Ie,onTouchStart:je,tabIndex:$e=0,TouchRippleProps:Le,touchRippleRef:Oe,type:He,...at}=i,De=ie.useRef(null),qe=iU(),pt=Ai(qe.ref,Oe),[Ct,Lt]=ie.useState(!1);w&&Ct&&Lt(!1),ie.useImperativeHandle(a,()=>({focusVisible:()=>{Lt(!0),De.current.focus()}}),[]);const jt=qe.shouldMount&&!I&&!w;ie.useEffect(()=>{Ct&&P&&!I&&qe.pulsate()},[I,P,Ct,qe]);function zt(bt,An,yr=k){return td(Jr=>(An&&An(Jr),yr||qe[bt](Jr),!0))}const Kt=zt("start",ae),dn=zt("stop",D),tn=zt("stop",B),jn=zt("stop",Me),kn=zt("stop",bt=>{Ct&&bt.preventDefault(),de&&de(bt)}),Vt=zt("start",je),nn=zt("stop",Z),Wt=zt("stop",Ie),_n=zt("stop",bt=>{i5(bt.target)||Lt(!1),V&&V(bt)},!1),yt=td(bt=>{De.current||(De.current=bt.currentTarget),i5(bt.target)&&(Lt(!0),G&&G(bt)),j&&j(bt)}),Rt=()=>{const bt=De.current;return b&&b!=="button"&&!(bt.tagName==="A"&&bt.href)},Se=td(bt=>{P&&!bt.repeat&&Ct&&bt.key===" "&&qe.stop(bt,()=>{qe.start(bt)}),bt.target===bt.currentTarget&&Rt()&&bt.key===" "&&bt.preventDefault(),te&&te(bt),bt.target===bt.currentTarget&&Rt()&&bt.key==="Enter"&&!w&&(bt.preventDefault(),X&&X(bt))}),ur=td(bt=>{P&&bt.key===" "&&Ct&&!bt.defaultPrevented&&qe.stop(bt,()=>{qe.pulsate(bt)}),oe&&oe(bt),X&&bt.target===bt.currentTarget&&Rt()&&bt.key===" "&&!bt.defaultPrevented&&X(bt)});let gn=b;gn==="button"&&(at.href||at.to)&&(gn=N);const ht={};gn==="button"?(ht.type=He===void 0?"button":He,ht.disabled=w):(!at.href&&!at.to&&(ht.role="button"),w&&(ht["aria-disabled"]=w));const qt=Ai(n,De),un={...i,centerRipple:c,component:b,disabled:w,disableRipple:I,disableTouchRipple:k,focusRipple:P,tabIndex:$e,focusVisible:Ct},ir=gU(un);return be.jsxs(yU,{as:gn,className:Ut(ir.root,u),ownerState:un,onBlur:_n,onClick:X,onContextMenu:dn,onFocus:yt,onKeyDown:Se,onKeyUp:ur,onMouseDown:Kt,onMouseLeave:kn,onMouseUp:jn,onDragLeave:tn,onTouchEnd:nn,onTouchMove:Wt,onTouchStart:Vt,ref:qt,tabIndex:w?-1:$e,type:He,...ht,...at,children:[d,jt?be.jsx(pU,{ref:pt,center:c,...Le}):null]})});function vU(e){return typeof e.main=="string"}function _U(e,t=[]){if(!vU(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Ga(e=[]){return([,t])=>t&&_U(t,e)}function xU(e){return Pn("MuiTypography",e)}Mn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const bU={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},wU=Uj(),SU=e=>{const{align:t,gutterBottom:n,noWrap:i,paragraph:a,variant:c,classes:d}=e,u={root:["root",c,e.align!=="inherit"&&`align${St(t)}`,n&&"gutterBottom",i&&"noWrap",a&&"paragraph"]};return Bn(u,xU,d)},CU=Mt("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${St(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(tr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,i])=>n!=="inherit"&&i&&typeof i=="object").map(([n,i])=>({props:{variant:n},style:i})),...Object.entries(e.palette).filter(Ga()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${St(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),g5={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},xa=ie.forwardRef(function(t,n){const{color:i,...a}=Nn({props:t,name:"MuiTypography"}),c=!bU[i],d=wU({...a,...c&&{color:i}}),{align:u="inherit",className:b,component:w,gutterBottom:I=!1,noWrap:k=!1,paragraph:P=!1,variant:R="body1",variantMapping:N=g5,...V}=d,X={...d,align:u,color:i,className:b,component:w,gutterBottom:I,noWrap:k,paragraph:P,variant:R,variantMapping:N},D=w||(P?"p":N[R]||g5[R])||"span",B=SU(X);return be.jsx(CU,{as:D,ref:n,className:Ut(B.root,b),...V,ownerState:X,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...V.style}})});function kU(e){return typeof e=="function"?e():e}const EU=ie.forwardRef(function(t,n){const{children:i,container:a,disablePortal:c=!1}=t,[d,u]=ie.useState(null),b=Ai(ie.isValidElement(i)?qm(i):null,n);if(Pc(()=>{c||u(kU(a)||document.body)},[a,c]),Pc(()=>{if(d&&!c)return ow(n,d),()=>{ow(n,null)}},[n,d,c]),c){if(ie.isValidElement(i)){const w={ref:b};return ie.cloneElement(i,w)}return be.jsx(ie.Fragment,{children:i})}return be.jsx(ie.Fragment,{children:d&&f2.createPortal(i,d)})}),TU=ra(be.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function IU(e){return Pn("MuiChip",e)}const fn=Mn("MuiChip",["root","sizeSmall","sizeMedium","colorDefault","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),PU=e=>{const{classes:t,disabled:n,size:i,color:a,iconColor:c,onDelete:d,clickable:u,variant:b}=e,w={root:["root",b,n&&"disabled",`size${St(i)}`,`color${St(a)}`,u&&"clickable",u&&`clickableColor${St(a)}`,d&&"deletable",d&&`deletableColor${St(a)}`,`${b}${St(a)}`],label:["label",`label${St(i)}`],avatar:["avatar",`avatar${St(i)}`,`avatarColor${St(a)}`],icon:["icon",`icon${St(i)}`,`iconColor${St(c)}`],deleteIcon:["deleteIcon",`deleteIcon${St(i)}`,`deleteIconColor${St(a)}`,`deleteIcon${St(b)}Color${St(a)}`]};return Bn(w,IU,t)},MU=Mt("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:i,iconColor:a,clickable:c,onDelete:d,size:u,variant:b}=n;return[{[`& .${fn.avatar}`]:t.avatar},{[`& .${fn.avatar}`]:t[`avatar${St(u)}`]},{[`& .${fn.avatar}`]:t[`avatarColor${St(i)}`]},{[`& .${fn.icon}`]:t.icon},{[`& .${fn.icon}`]:t[`icon${St(u)}`]},{[`& .${fn.icon}`]:t[`iconColor${St(a)}`]},{[`& .${fn.deleteIcon}`]:t.deleteIcon},{[`& .${fn.deleteIcon}`]:t[`deleteIcon${St(u)}`]},{[`& .${fn.deleteIcon}`]:t[`deleteIconColor${St(i)}`]},{[`& .${fn.deleteIcon}`]:t[`deleteIcon${St(b)}Color${St(i)}`]},t.root,t[`size${St(u)}`],t[`color${St(i)}`],c&&t.clickable,c&&i!=="default"&&t[`clickableColor${St(i)})`],d&&t.deletable,d&&i!=="default"&&t[`deletableColor${St(i)}`],t[b],t[`${b}${St(i)}`]]}})(tr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return{maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${fn.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${fn.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:t,fontSize:e.typography.pxToRem(12)},[`& .${fn.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${fn.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${fn.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${fn.icon}`]:{marginLeft:5,marginRight:-6},[`& .${fn.deleteIcon}`]:{WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:ni(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:ni(e.palette.text.primary,.4)}},variants:[{props:{size:"small"},style:{height:24,[`& .${fn.icon}`]:{fontSize:18,marginLeft:4,marginRight:-4},[`& .${fn.deleteIcon}`]:{fontSize:16,marginRight:4,marginLeft:-4}}},...Object.entries(e.palette).filter(Ga(["contrastText"])).map(([n])=>({props:{color:n},style:{backgroundColor:(e.vars||e).palette[n].main,color:(e.vars||e).palette[n].contrastText,[`& .${fn.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].contrastTextChannel} / 0.7)`:ni(e.palette[n].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].contrastText}}}})),{props:n=>n.iconColor===n.color,style:{[`& .${fn.icon}`]:{color:e.vars?e.vars.palette.Chip.defaultIconColor:t}}},{props:n=>n.iconColor===n.color&&n.color!=="default",style:{[`& .${fn.icon}`]:{color:"inherit"}}},{props:{onDelete:!0},style:{[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ni(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}}},...Object.entries(e.palette).filter(Ga(["dark"])).map(([n])=>({props:{color:n,onDelete:!0},style:{[`&.${fn.focusVisible}`]:{background:(e.vars||e).palette[n].dark}}})),{props:{clickable:!0},style:{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:ni(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:ni(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}}},...Object.entries(e.palette).filter(Ga(["dark"])).map(([n])=>({props:{color:n,clickable:!0},style:{[`&:hover, &.${fn.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n].dark}}})),{props:{variant:"outlined"},style:{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${fn.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${fn.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${fn.avatar}`]:{marginLeft:4},[`& .${fn.avatarSmall}`]:{marginLeft:2},[`& .${fn.icon}`]:{marginLeft:4},[`& .${fn.iconSmall}`]:{marginLeft:2},[`& .${fn.deleteIcon}`]:{marginRight:5},[`& .${fn.deleteIconSmall}`]:{marginRight:3}}},...Object.entries(e.palette).filter(Ga()).map(([n])=>({props:{variant:"outlined",color:n},style:{color:(e.vars||e).palette[n].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ni(e.palette[n].main,.7)}`,[`&.${fn.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ni(e.palette[n].main,e.palette.action.hoverOpacity)},[`&.${fn.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n].mainChannel} / ${e.vars.palette.action.focusOpacity})`:ni(e.palette[n].main,e.palette.action.focusOpacity)},[`& .${fn.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[n].mainChannel} / 0.7)`:ni(e.palette[n].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[n].main}}}}))]}})),AU=Mt("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:i}=n;return[t.label,t[`label${St(i)}`]]}})({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap",variants:[{props:{variant:"outlined"},style:{paddingLeft:11,paddingRight:11}},{props:{size:"small"},style:{paddingLeft:8,paddingRight:8}},{props:{size:"small",variant:"outlined"},style:{paddingLeft:7,paddingRight:7}}]});function y5(e){return e.key==="Backspace"||e.key==="Delete"}const v5=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiChip"}),{avatar:a,className:c,clickable:d,color:u="default",component:b,deleteIcon:w,disabled:I=!1,icon:k,label:P,onClick:R,onDelete:N,onKeyDown:V,onKeyUp:X,size:D="medium",variant:B="filled",tabIndex:j,skipFocusWhenDisabled:G=!1,...te}=i,oe=ie.useRef(null),ae=Ai(oe,n),de=qe=>{qe.stopPropagation(),N&&N(qe)},Me=qe=>{qe.currentTarget===qe.target&&y5(qe)&&qe.preventDefault(),V&&V(qe)},Z=qe=>{qe.currentTarget===qe.target&&N&&y5(qe)&&N(qe),X&&X(qe)},Ie=d!==!1&&R?!0:d,je=Ie||N?Im:b||"div",$e={...i,component:je,disabled:I,size:D,color:u,iconColor:ie.isValidElement(k)&&k.props.color||u,onDelete:!!N,clickable:Ie,variant:B},Le=PU($e),Oe=je===Im?{component:b||"div",focusVisibleClassName:Le.focusVisible,...N&&{disableRipple:!0}}:{};let He=null;N&&(He=w&&ie.isValidElement(w)?ie.cloneElement(w,{className:Ut(w.props.className,Le.deleteIcon),onClick:de}):be.jsx(TU,{className:Ut(Le.deleteIcon),onClick:de}));let at=null;a&&ie.isValidElement(a)&&(at=ie.cloneElement(a,{className:Ut(Le.avatar,a.props.className)}));let De=null;return k&&ie.isValidElement(k)&&(De=ie.cloneElement(k,{className:Ut(Le.icon,k.props.className)})),be.jsxs(MU,{as:je,className:Ut(Le.root,c),disabled:Ie&&I?!0:void 0,onClick:R,onKeyDown:Me,onKeyUp:Z,ref:ae,tabIndex:G&&I?-1:j,ownerState:$e,...Oe,...te,children:[at||De,be.jsx(AU,{className:Ut(Le.label),ownerState:$e,children:P}),He]})});function Ey(e){return parseInt(e,10)||0}const LU={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function zU(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const RU=ie.forwardRef(function(t,n){const{onChange:i,maxRows:a,minRows:c=1,style:d,value:u,...b}=t,{current:w}=ie.useRef(u!=null),I=ie.useRef(null),k=Ai(n,I),P=ie.useRef(null),R=ie.useRef(null),N=ie.useCallback(()=>{const D=I.current,j=ul(D).getComputedStyle(D);if(j.width==="0px")return{outerHeightStyle:0,overflowing:!1};const G=R.current;G.style.width=j.width,G.value=D.value||t.placeholder||"x",G.value.slice(-1)===`
`&&(G.value+=" ");const te=j.boxSizing,oe=Ey(j.paddingBottom)+Ey(j.paddingTop),ae=Ey(j.borderBottomWidth)+Ey(j.borderTopWidth),de=G.scrollHeight;G.value="x";const Me=G.scrollHeight;let Z=de;c&&(Z=Math.max(Number(c)*Me,Z)),a&&(Z=Math.min(Number(a)*Me,Z)),Z=Math.max(Z,Me);const Ie=Z+(te==="border-box"?oe+ae:0),je=Math.abs(Z-de)<=1;return{outerHeightStyle:Ie,overflowing:je}},[a,c,t.placeholder]),V=ie.useCallback(()=>{const D=N();if(zU(D))return;const B=D.outerHeightStyle,j=I.current;P.current!==B&&(P.current=B,j.style.height=`${B}px`),j.style.overflow=D.overflowing?"hidden":""},[N]);Pc(()=>{const D=()=>{V()};let B;const j=GA(D),G=I.current,te=ul(G);te.addEventListener("resize",j);let oe;return typeof ResizeObserver<"u"&&(oe=new ResizeObserver(D),oe.observe(G)),()=>{j.clear(),cancelAnimationFrame(B),te.removeEventListener("resize",j),oe&&oe.disconnect()}},[N,V]),Pc(()=>{V()});const X=D=>{w||V(),i&&i(D)};return be.jsxs(ie.Fragment,{children:[be.jsx("textarea",{value:u,onChange:X,ref:k,rows:c,style:d,...b}),be.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:{...LU.shadow,...d,paddingTop:0,paddingBottom:0}})]})});function hw(e){return typeof e=="string"}function Nd({props:e,states:t,muiFormControl:n}){return t.reduce((i,a)=>(i[a]=e[a],n&&typeof e[a]>"u"&&(i[a]=n[a]),i),{})}const lS=ie.createContext(void 0);function jd(){return ie.useContext(lS)}function _5(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function q0(e,t=!1){return e&&(_5(e.value)&&e.value!==""||t&&_5(e.defaultValue)&&e.defaultValue!=="")}function DU(e){return e.startAdornment}function $U(e){return Pn("MuiInputBase",e)}const Pd=Mn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var x5;const d1=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${St(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},p1=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},OU=e=>{const{classes:t,color:n,disabled:i,error:a,endAdornment:c,focused:d,formControl:u,fullWidth:b,hiddenLabel:w,multiline:I,readOnly:k,size:P,startAdornment:R,type:N}=e,V={root:["root",`color${St(n)}`,i&&"disabled",a&&"error",b&&"fullWidth",d&&"focused",u&&"formControl",P&&P!=="medium"&&`size${St(P)}`,I&&"multiline",R&&"adornedStart",c&&"adornedEnd",w&&"hiddenLabel",k&&"readOnly"],input:["input",i&&"disabled",N==="search"&&"inputTypeSearch",I&&"inputMultiline",P==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",R&&"inputAdornedStart",c&&"inputAdornedEnd",k&&"readOnly"]};return Bn(V,$U,t)},f1=Mt("div",{name:"MuiInputBase",slot:"Root",overridesResolver:d1})(tr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Pd.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),m1=Mt("input",{name:"MuiInputBase",slot:"Input",overridesResolver:p1})(tr(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},i={opacity:"0 !important"},a=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Pd.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${Pd.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:c})=>!c.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:c})=>c.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),b5=jj({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),uS=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:c,autoFocus:d,className:u,color:b,components:w={},componentsProps:I={},defaultValue:k,disabled:P,disableInjectingGlobalStyles:R,endAdornment:N,error:V,fullWidth:X=!1,id:D,inputComponent:B="input",inputProps:j={},inputRef:G,margin:te,maxRows:oe,minRows:ae,multiline:de=!1,name:Me,onBlur:Z,onChange:Ie,onClick:je,onFocus:$e,onKeyDown:Le,onKeyUp:Oe,placeholder:He,readOnly:at,renderSuffix:De,rows:qe,size:pt,slotProps:Ct={},slots:Lt={},startAdornment:jt,type:zt="text",value:Kt,...dn}=i,tn=j.value!=null?j.value:Kt,{current:jn}=ie.useRef(tn!=null),kn=ie.useRef(),Vt=ie.useCallback(an=>{},[]),nn=Ai(kn,G,j.ref,Vt),[Wt,_n]=ie.useState(!1),yt=jd(),Rt=Nd({props:i,muiFormControl:yt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});Rt.focused=yt?yt.focused:Wt,ie.useEffect(()=>{!yt&&P&&Wt&&(_n(!1),Z&&Z())},[yt,P,Wt,Z]);const Se=yt&&yt.onFilled,ur=yt&&yt.onEmpty,gn=ie.useCallback(an=>{q0(an)?Se&&Se():ur&&ur()},[Se,ur]);Pc(()=>{jn&&gn({value:tn})},[tn,gn,jn]);const ht=an=>{$e&&$e(an),j.onFocus&&j.onFocus(an),yt&&yt.onFocus?yt.onFocus(an):_n(!0)},qt=an=>{Z&&Z(an),j.onBlur&&j.onBlur(an),yt&&yt.onBlur?yt.onBlur(an):_n(!1)},un=(an,...Lr)=>{if(!jn){const Ke=an.target||kn.current;if(Ke==null)throw new Error(ll(1));gn({value:Ke.value})}j.onChange&&j.onChange(an,...Lr),Ie&&Ie(an,...Lr)};ie.useEffect(()=>{gn(kn.current)},[]);const ir=an=>{kn.current&&an.currentTarget===an.target&&kn.current.focus(),je&&je(an)};let bt=B,An=j;de&&bt==="input"&&(qe?An={type:void 0,minRows:qe,maxRows:qe,...An}:An={type:void 0,maxRows:oe,minRows:ae,...An},bt=RU);const yr=an=>{gn(an.animationName==="mui-auto-fill-cancel"?kn.current:{value:"x"})};ie.useEffect(()=>{yt&&yt.setAdornedStart(!!jt)},[yt,jt]);const Jr={...i,color:Rt.color||"primary",disabled:Rt.disabled,endAdornment:N,error:Rt.error,focused:Rt.focused,formControl:yt,fullWidth:X,hiddenLabel:Rt.hiddenLabel,multiline:de,size:Rt.size,startAdornment:jt,type:zt},vr=OU(Jr),Ge=Lt.root||w.Root||f1,cr=Ct.root||I.root||{},Zn=Lt.input||w.Input||m1;return An={...An,...Ct.input??I.input},be.jsxs(ie.Fragment,{children:[!R&&typeof b5=="function"&&(x5||(x5=be.jsx(b5,{}))),be.jsxs(Ge,{...cr,ref:n,onClick:ir,...dn,...!hw(Ge)&&{ownerState:{...Jr,...cr.ownerState}},className:Ut(vr.root,cr.className,u,at&&"MuiInputBase-readOnly"),children:[jt,be.jsx(lS.Provider,{value:null,children:be.jsx(Zn,{"aria-invalid":Rt.error,"aria-describedby":a,autoComplete:c,autoFocus:d,defaultValue:k,disabled:Rt.disabled,id:D,onAnimationStart:yr,name:Me,placeholder:He,readOnly:at,required:Rt.required,rows:qe,value:tn,onKeyDown:Le,onKeyUp:Oe,type:zt,...An,...!hw(Zn)&&{as:bt,ownerState:{...Jr,...An.ownerState}},ref:nn,className:Ut(vr.input,An.className,at&&"MuiInputBase-readOnly"),onBlur:qt,onChange:un,onFocus:ht})}),N,De?De({...Rt,startAdornment:jt}):null]})]})});function FU(e){return Pn("MuiInput",e)}const mf={...Pd,...Mn("MuiInput",["root","underline","input"])};function BU(e){return Pn("MuiOutlinedInput",e)}const us={...Pd,...Mn("MuiOutlinedInput",["root","notchedOutline","input"])};function NU(e){return Pn("MuiFilledInput",e)}const Ju={...Pd,...Mn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},jU=ra(be.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),UU=ra(be.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function VU(e){return Pn("MuiAvatar",e)}Mn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const WU=e=>{const{classes:t,variant:n,colorDefault:i}=e;return Bn({root:["root",n,i&&"colorDefault"],img:["img"],fallback:["fallback"]},VU,t)},qU=Mt("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(tr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),HU=Mt("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),GU=Mt(UU,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function ZU({crossOrigin:e,referrerPolicy:t,src:n,srcSet:i}){const[a,c]=ie.useState(!1);return ie.useEffect(()=>{if(!n&&!i)return;c(!1);let d=!0;const u=new Image;return u.onload=()=>{d&&c("loaded")},u.onerror=()=>{d&&c("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=n,i&&(u.srcset=i),()=>{d=!1}},[e,t,n,i]),a}const p4=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiAvatar"}),{alt:a,children:c,className:d,component:u="div",slots:b={},slotProps:w={},imgProps:I,sizes:k,src:P,srcSet:R,variant:N="circular",...V}=i;let X=null;const D=ZU({...I,src:P,srcSet:R}),B=P||R,j=B&&D!=="error",G={...i,colorDefault:!j,component:u,variant:N};delete G.ownerState;const te=WU(G),[oe,ae]=_a("img",{className:te.img,elementType:HU,externalForwardedProps:{slots:b,slotProps:{img:{...I,...w.img}}},additionalProps:{alt:a,src:P,srcSet:R,sizes:k},ownerState:G});return j?X=be.jsx(oe,{...ae}):c||c===0?X=c:B&&a?X=a[0]:X=be.jsx(GU,{ownerState:G,className:te.fallback}),be.jsx(qU,{as:u,className:Ut(te.root,d),ref:n,...V,ownerState:G,children:X})}),KU={entering:{opacity:1},entered:{opacity:1}},XU=ie.forwardRef(function(t,n){const i=e1(),a={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:c,appear:d=!0,children:u,easing:b,in:w,onEnter:I,onEntered:k,onEntering:P,onExit:R,onExited:N,onExiting:V,style:X,timeout:D=a,TransitionComponent:B=Ts,...j}=t,G=ie.useRef(null),te=Ai(G,qm(u),n),oe=Le=>Oe=>{if(Le){const He=G.current;Oe===void 0?Le(He):Le(He,Oe)}},ae=oe(P),de=oe((Le,Oe)=>{d4(Le);const He=V0({style:X,timeout:D,easing:b},{mode:"enter"});Le.style.webkitTransition=i.transitions.create("opacity",He),Le.style.transition=i.transitions.create("opacity",He),I&&I(Le,Oe)}),Me=oe(k),Z=oe(V),Ie=oe(Le=>{const Oe=V0({style:X,timeout:D,easing:b},{mode:"exit"});Le.style.webkitTransition=i.transitions.create("opacity",Oe),Le.style.transition=i.transitions.create("opacity",Oe),R&&R(Le)}),je=oe(N),$e=Le=>{c&&c(G.current,Le)};return be.jsx(B,{appear:d,in:w,nodeRef:G,onEnter:de,onEntered:Me,onEntering:ae,onExit:Ie,onExited:je,onExiting:Z,addEndListener:$e,timeout:D,...j,children:(Le,Oe)=>ie.cloneElement(u,{style:{opacity:0,visibility:Le==="exited"&&!w?"hidden":void 0,...KU[Le],...X,...u.props.style},ref:te,...Oe})})});function YU(e){return Pn("MuiBackdrop",e)}Mn("MuiBackdrop",["root","invisible"]);const JU=e=>{const{ownerState:t,...n}=e;return n},QU=e=>{const{classes:t,invisible:n}=e;return Bn({root:["root",n&&"invisible"]},YU,t)},eV=Mt("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),tV=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiBackdrop"}),{children:a,className:c,component:d="div",invisible:u=!1,open:b,components:w={},componentsProps:I={},slotProps:k={},slots:P={},TransitionComponent:R,transitionDuration:N,...V}=i,X={...i,component:d,invisible:u},D=QU(X),B={transition:R,root:w.Root,...P},j={...I,...k},G={slots:B,slotProps:j},[te,oe]=_a("root",{elementType:eV,externalForwardedProps:G,className:Ut(D.root,c),ownerState:X}),[ae,de]=_a("transition",{elementType:XU,externalForwardedProps:G,ownerState:X}),Me=JU(de);return be.jsx(ae,{in:b,timeout:N,...V,...Me,children:be.jsx(te,{"aria-hidden":!0,...oe,classes:D,ref:n,children:a})})});function nV(e){return Pn("MuiBottomNavigation",e)}Mn("MuiBottomNavigation",["root"]);const rV=e=>{const{classes:t}=e;return Bn({root:["root"]},nV,t)},iV=Mt("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(tr(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper}))),oV=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiBottomNavigation"}),{children:a,className:c,component:d="div",onChange:u,showLabels:b=!1,value:w,...I}=i,k={...i,component:d,showLabels:b},P=rV(k);return be.jsx(iV,{as:d,className:Ut(P.root,c),ref:n,ownerState:k,...I,children:ie.Children.map(a,(R,N)=>{if(!ie.isValidElement(R))return null;const V=R.props.value===void 0?N:R.props.value;return ie.cloneElement(R,{selected:V===w,showLabel:R.props.showLabel!==void 0?R.props.showLabel:b,value:V,onChange:u})})})});function aV(e){return Pn("MuiBottomNavigationAction",e)}const f4=Mn("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),sV=e=>{const{classes:t,showLabel:n,selected:i}=e;return Bn({root:["root",!n&&!i&&"iconOnly",i&&"selected"],label:["label",!n&&!i&&"iconOnly",i&&"selected"]},aV,t)},lV=Mt(Im,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(tr(({theme:e})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${f4.selected}`]:{color:(e.vars||e).palette.primary.main},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{paddingTop:14}},{props:({showLabel:t,selected:n,label:i})=>!t&&!n&&!i,style:{paddingTop:0}}]}))),uV=Mt("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(tr(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${f4.selected}`]:{fontSize:e.typography.pxToRem(14)},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{opacity:0,transitionDelay:"0s"}}]}))),Tx=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiBottomNavigationAction"}),{className:a,icon:c,label:d,onChange:u,onClick:b,selected:w,showLabel:I,value:k,...P}=i,R=i,N=sV(R),V=X=>{u&&u(X,k),b&&b(X)};return be.jsxs(lV,{ref:n,className:Ut(N.root,a),focusRipple:!0,onClick:V,ownerState:R,...P,children:[c,be.jsx(uV,{className:N.label,ownerState:R,children:d})]})}),cV=Mn("MuiBox",["root"]),hV=s4(),vd=E9({themeId:Iv,defaultTheme:hV,defaultClassName:cV.root,generateClassName:jA.generate});function dV(e){return Pn("MuiButton",e)}const Dh=Mn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),pV=ie.createContext({}),fV=ie.createContext(void 0),mV=e=>{const{color:t,disableElevation:n,fullWidth:i,size:a,variant:c,classes:d}=e,u={root:["root",c,`${c}${St(t)}`,`size${St(a)}`,`${c}Size${St(a)}`,`color${St(t)}`,n&&"disableElevation",i&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${St(a)}`],endIcon:["icon","endIcon",`iconSize${St(a)}`]},b=Bn(u,dV,d);return{...d,...b}},m4=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],gV=Mt(Im,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${St(n.color)}`],t[`size${St(n.size)}`],t[`${n.variant}Size${St(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(tr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${Dh.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${Dh.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${Dh.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${Dh.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Ga()).map(([i])=>({props:{color:i},style:{"--variant-textColor":(e.vars||e).palette[i].main,"--variant-outlinedColor":(e.vars||e).palette[i].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[i].mainChannel} / 0.5)`:ni(e.palette[i].main,.5),"--variant-containedColor":(e.vars||e).palette[i].contrastText,"--variant-containedBg":(e.vars||e).palette[i].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[i].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[i].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ni(e.palette[i].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[i].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[i].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ni(e.palette[i].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ni(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:ni(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${Dh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${Dh.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),yV=Mt("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${St(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},...m4]}),vV=Mt("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${St(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},...m4]}),If=ie.forwardRef(function(t,n){const i=ie.useContext(pV),a=ie.useContext(fV),c=Tm(i,t),d=Nn({props:c,name:"MuiButton"}),{children:u,color:b="primary",component:w="button",className:I,disabled:k=!1,disableElevation:P=!1,disableFocusRipple:R=!1,endIcon:N,focusVisibleClassName:V,fullWidth:X=!1,size:D="medium",startIcon:B,type:j,variant:G="text",...te}=d,oe={...d,color:b,component:w,disabled:k,disableElevation:P,disableFocusRipple:R,fullWidth:X,size:D,type:j,variant:G},ae=mV(oe),de=B&&be.jsx(yV,{className:ae.startIcon,ownerState:oe,children:B}),Me=N&&be.jsx(vV,{className:ae.endIcon,ownerState:oe,children:N}),Z=a||"";return be.jsxs(gV,{ownerState:oe,className:Ut(i.className,ae.root,I,Z),component:w,disabled:k,focusRipple:!R,focusVisibleClassName:Ut(ae.focusVisible,V),ref:n,type:j,...te,classes:ae,children:[de,u,Me]})});function _V(e){return Pn("MuiCard",e)}Mn("MuiCard",["root"]);const xV=e=>{const{classes:t}=e;return Bn({root:["root"]},_V,t)},bV=Mt(h1,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),wV=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiCard"}),{className:a,raised:c=!1,...d}=i,u={...i,raised:c},b=xV(u);return be.jsx(bV,{className:Ut(b.root,a),elevation:c?8:void 0,ref:n,ownerState:u,...d})});function SV(e){return Pn("MuiCardContent",e)}Mn("MuiCardContent",["root"]);const CV=e=>{const{classes:t}=e;return Bn({root:["root"]},SV,t)},kV=Mt("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:16,"&:last-child":{paddingBottom:24}}),EV=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiCardContent"}),{className:a,component:c="div",...d}=i,u={...i,component:c},b=CV(u);return be.jsx(kV,{as:c,className:Ut(b.root,a),ownerState:u,ref:n,...d})}),TV=uj({createStyledComponent:Mt("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${St(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Nn({props:e,name:"MuiContainer"})});function IV(e){const t=Ja(e);return t.body===e?ul(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Wf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function w5(e){return parseInt(ul(e).getComputedStyle(e).paddingRight,10)||0}function PV(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),i=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||i}function S5(e,t,n,i,a){const c=[t,n,...i];[].forEach.call(e.children,d=>{const u=!c.includes(d),b=!PV(d);u&&b&&Wf(d,a)})}function Ix(e,t){let n=-1;return e.some((i,a)=>t(i)?(n=a,!0):!1),n}function MV(e,t){const n=[],i=e.container;if(!t.disableScrollLock){if(IV(i)){const d=YA(ul(i));n.push({value:i.style.paddingRight,property:"padding-right",el:i}),i.style.paddingRight=`${w5(i)+d}px`;const u=Ja(i).querySelectorAll(".mui-fixed");[].forEach.call(u,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${w5(b)+d}px`})}let c;if(i.parentNode instanceof DocumentFragment)c=Ja(i).body;else{const d=i.parentElement,u=ul(i);c=(d==null?void 0:d.nodeName)==="HTML"&&u.getComputedStyle(d).overflowY==="scroll"?d:i}n.push({value:c.style.overflow,property:"overflow",el:c},{value:c.style.overflowX,property:"overflow-x",el:c},{value:c.style.overflowY,property:"overflow-y",el:c}),c.style.overflow="hidden"}return()=>{n.forEach(({value:c,el:d,property:u})=>{c?d.style.setProperty(u,c):d.style.removeProperty(u)})}}function AV(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class LV{constructor(){this.modals=[],this.containers=[]}add(t,n){let i=this.modals.indexOf(t);if(i!==-1)return i;i=this.modals.length,this.modals.push(t),t.modalRef&&Wf(t.modalRef,!1);const a=AV(n);S5(n,t.mount,t.modalRef,a,!0);const c=Ix(this.containers,d=>d.container===n);return c!==-1?(this.containers[c].modals.push(t),i):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),i)}mount(t,n){const i=Ix(this.containers,c=>c.modals.includes(t)),a=this.containers[i];a.restore||(a.restore=MV(a,n))}remove(t,n=!0){const i=this.modals.indexOf(t);if(i===-1)return i;const a=Ix(this.containers,d=>d.modals.includes(t)),c=this.containers[a];if(c.modals.splice(c.modals.indexOf(t),1),this.modals.splice(i,1),c.modals.length===0)c.restore&&c.restore(),t.modalRef&&Wf(t.modalRef,n),S5(c.container,t.mount,t.modalRef,c.hiddenSiblings,!1),this.containers.splice(a,1);else{const d=c.modals[c.modals.length-1];d.modalRef&&Wf(d.modalRef,!1)}return i}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const zV=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function RV(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function DV(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=i=>e.ownerDocument.querySelector(`input[type="radio"]${i}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function $V(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||DV(e))}function OV(e){const t=[],n=[];return Array.from(e.querySelectorAll(zV)).forEach((i,a)=>{const c=RV(i);c===-1||!$V(i)||(c===0?t.push(i):n.push({documentOrder:a,tabIndex:c,node:i}))}),n.sort((i,a)=>i.tabIndex===a.tabIndex?i.documentOrder-a.documentOrder:i.tabIndex-a.tabIndex).map(i=>i.node).concat(t)}function FV(){return!0}function BV(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:i=!1,disableRestoreFocus:a=!1,getTabbable:c=OV,isEnabled:d=FV,open:u}=e,b=ie.useRef(!1),w=ie.useRef(null),I=ie.useRef(null),k=ie.useRef(null),P=ie.useRef(null),R=ie.useRef(!1),N=ie.useRef(null),V=Ai(qm(t),N),X=ie.useRef(null);ie.useEffect(()=>{!u||!N.current||(R.current=!n)},[n,u]),ie.useEffect(()=>{if(!u||!N.current)return;const j=Ja(N.current);return N.current.contains(j.activeElement)||(N.current.hasAttribute("tabIndex")||N.current.setAttribute("tabIndex","-1"),R.current&&N.current.focus()),()=>{a||(k.current&&k.current.focus&&(b.current=!0,k.current.focus()),k.current=null)}},[u]),ie.useEffect(()=>{if(!u||!N.current)return;const j=Ja(N.current),G=ae=>{X.current=ae,!(i||!d()||ae.key!=="Tab")&&j.activeElement===N.current&&ae.shiftKey&&(b.current=!0,I.current&&I.current.focus())},te=()=>{var Me,Z;const ae=N.current;if(ae===null)return;if(!j.hasFocus()||!d()||b.current){b.current=!1;return}if(ae.contains(j.activeElement)||i&&j.activeElement!==w.current&&j.activeElement!==I.current)return;if(j.activeElement!==P.current)P.current=null;else if(P.current!==null)return;if(!R.current)return;let de=[];if((j.activeElement===w.current||j.activeElement===I.current)&&(de=c(N.current)),de.length>0){const Ie=!!((Me=X.current)!=null&&Me.shiftKey&&((Z=X.current)==null?void 0:Z.key)==="Tab"),je=de[0],$e=de[de.length-1];typeof je!="string"&&typeof $e!="string"&&(Ie?$e.focus():je.focus())}else ae.focus()};j.addEventListener("focusin",te),j.addEventListener("keydown",G,!0);const oe=setInterval(()=>{j.activeElement&&j.activeElement.tagName==="BODY"&&te()},50);return()=>{clearInterval(oe),j.removeEventListener("focusin",te),j.removeEventListener("keydown",G,!0)}},[n,i,a,d,u,c]);const D=j=>{k.current===null&&(k.current=j.relatedTarget),R.current=!0,P.current=j.target;const G=t.props.onFocus;G&&G(j)},B=j=>{k.current===null&&(k.current=j.relatedTarget),R.current=!0};return be.jsxs(ie.Fragment,{children:[be.jsx("div",{tabIndex:u?0:-1,onFocus:B,ref:w,"data-testid":"sentinelStart"}),ie.cloneElement(t,{ref:V,onFocus:D}),be.jsx("div",{tabIndex:u?0:-1,onFocus:B,ref:I,"data-testid":"sentinelEnd"})]})}function NV(e){return typeof e=="function"?e():e}function jV(e){return e?e.props.hasOwnProperty("in"):!1}const Ty=new LV;function UV(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:i=!1,closeAfterTransition:a=!1,onTransitionEnter:c,onTransitionExited:d,children:u,onClose:b,open:w,rootRef:I}=e,k=ie.useRef({}),P=ie.useRef(null),R=ie.useRef(null),N=Ai(R,I),[V,X]=ie.useState(!w),D=jV(u);let B=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(B=!1);const j=()=>Ja(P.current),G=()=>(k.current.modalRef=R.current,k.current.mount=P.current,k.current),te=()=>{Ty.mount(G(),{disableScrollLock:i}),R.current&&(R.current.scrollTop=0)},oe=td(()=>{const Oe=NV(t)||j().body;Ty.add(G(),Oe),R.current&&te()}),ae=()=>Ty.isTopModal(G()),de=td(Oe=>{P.current=Oe,Oe&&(w&&ae()?te():R.current&&Wf(R.current,B))}),Me=ie.useCallback(()=>{Ty.remove(G(),B)},[B]);ie.useEffect(()=>()=>{Me()},[Me]),ie.useEffect(()=>{w?oe():(!D||!a)&&Me()},[w,Me,D,a,oe]);const Z=Oe=>He=>{var at;(at=Oe.onKeyDown)==null||at.call(Oe,He),!(He.key!=="Escape"||He.which===229||!ae())&&(n||(He.stopPropagation(),b&&b(He,"escapeKeyDown")))},Ie=Oe=>He=>{var at;(at=Oe.onClick)==null||at.call(Oe,He),He.target===He.currentTarget&&b&&b(He,"backdropClick")};return{getRootProps:(Oe={})=>{const He=QA(e);delete He.onTransitionEnter,delete He.onTransitionExited;const at={...He,...Oe};return{role:"presentation",...at,onKeyDown:Z(at),ref:N}},getBackdropProps:(Oe={})=>{const He=Oe;return{"aria-hidden":!0,...He,onClick:Ie(He),open:w}},getTransitionProps:()=>{const Oe=()=>{X(!1),c&&c()},He=()=>{X(!0),d&&d(),a&&Me()};return{onEnter:QT(Oe,u==null?void 0:u.props.onEnter),onExited:QT(He,u==null?void 0:u.props.onExited)}},rootRef:N,portalRef:de,isTopModal:ae,exited:V,hasTransition:D}}function VV(e){return Pn("MuiModal",e)}Mn("MuiModal",["root","hidden","backdrop"]);const WV=e=>{const{open:t,exited:n,classes:i}=e;return Bn({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},VV,i)},qV=Mt("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(tr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),HV=Mt(tV,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),GV=ie.forwardRef(function(t,n){const i=Nn({name:"MuiModal",props:t}),{BackdropComponent:a=HV,BackdropProps:c,classes:d,className:u,closeAfterTransition:b=!1,children:w,container:I,component:k,components:P={},componentsProps:R={},disableAutoFocus:N=!1,disableEnforceFocus:V=!1,disableEscapeKeyDown:X=!1,disablePortal:D=!1,disableRestoreFocus:B=!1,disableScrollLock:j=!1,hideBackdrop:G=!1,keepMounted:te=!1,onBackdropClick:oe,onClose:ae,onTransitionEnter:de,onTransitionExited:Me,open:Z,slotProps:Ie={},slots:je={},theme:$e,...Le}=i,Oe={...i,closeAfterTransition:b,disableAutoFocus:N,disableEnforceFocus:V,disableEscapeKeyDown:X,disablePortal:D,disableRestoreFocus:B,disableScrollLock:j,hideBackdrop:G,keepMounted:te},{getRootProps:He,getBackdropProps:at,getTransitionProps:De,portalRef:qe,isTopModal:pt,exited:Ct,hasTransition:Lt}=UV({...Oe,rootRef:n}),jt={...Oe,exited:Ct},zt=WV(jt),Kt={};if(w.props.tabIndex===void 0&&(Kt.tabIndex="-1"),Lt){const{onEnter:Wt,onExited:_n}=De();Kt.onEnter=Wt,Kt.onExited=_n}const dn={...Le,slots:{root:P.Root,backdrop:P.Backdrop,...je},slotProps:{...R,...Ie}},[tn,jn]=_a("root",{elementType:qV,externalForwardedProps:dn,getSlotProps:He,additionalProps:{ref:n,as:k},ownerState:jt,className:Ut(u,zt==null?void 0:zt.root,!jt.open&&jt.exited&&(zt==null?void 0:zt.hidden))}),[kn,Vt]=_a("backdrop",{elementType:a,externalForwardedProps:dn,additionalProps:c,getSlotProps:Wt=>at({...Wt,onClick:_n=>{oe&&oe(_n),Wt!=null&&Wt.onClick&&Wt.onClick(_n)}}),className:Ut(c==null?void 0:c.className,zt==null?void 0:zt.backdrop),ownerState:jt}),nn=Ai(c==null?void 0:c.ref,Vt.ref);return!te&&!Z&&(!Lt||Ct)?null:be.jsx(EU,{ref:qe,container:I,disablePortal:D,children:be.jsxs(tn,{...jn,children:[!G&&a?be.jsx(kn,{...Vt,ref:nn}):null,be.jsx(BV,{disableEnforceFocus:V,disableAutoFocus:N,disableRestoreFocus:B,isEnabled:pt,open:Z,children:ie.cloneElement(w,Kt)})]})})});function ZV(e){return Pn("MuiDivider",e)}Mn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const KV=e=>{const{absolute:t,children:n,classes:i,flexItem:a,light:c,orientation:d,textAlign:u,variant:b}=e;return Bn({root:["root",t&&"absolute",b,c&&"light",d==="vertical"&&"vertical",a&&"flexItem",n&&"withChildren",n&&d==="vertical"&&"withChildrenVertical",u==="right"&&d!=="vertical"&&"textAlignRight",u==="left"&&d!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",d==="vertical"&&"wrapperVertical"]},ZV,i)},XV=Mt("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(tr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:ni(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),YV=Mt("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(tr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),dw=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiDivider"}),{absolute:a=!1,children:c,className:d,orientation:u="horizontal",component:b=c||u==="vertical"?"div":"hr",flexItem:w=!1,light:I=!1,role:k=b!=="hr"?"separator":void 0,textAlign:P="center",variant:R="fullWidth",...N}=i,V={...i,absolute:a,component:b,flexItem:w,light:I,orientation:u,role:k,textAlign:P,variant:R},X=KV(V);return be.jsx(XV,{as:b,className:Ut(X.root,d),role:k,ref:n,ownerState:V,"aria-orientation":k==="separator"&&(b!=="hr"||u==="vertical")?u:void 0,...N,children:c?be.jsx(YV,{className:X.wrapper,ownerState:V,children:c}):null})});dw&&(dw.muiSkipListHighlight=!0);function JV(e){return Pn("MuiFab",e)}const C5=Mn("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),QV=e=>{const{color:t,variant:n,classes:i,size:a}=e,c={root:["root",n,`size${St(a)}`,t==="inherit"?"colorInherit":t]},d=Bn(c,JV,i);return{...i,...d}},eW=Mt(Im,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>Ma(e)||e==="classes",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${St(n.size)}`],n.color==="inherit"&&t.colorInherit,t[St(n.size)],t[n.color]]}})(tr(({theme:e})=>{var t,n;return{...e.typography.button,minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(n=(t=e.palette).getContrastText)==null?void 0:n.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${C5.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},variants:[{props:{size:"small"},style:{width:40,height:40}},{props:{size:"medium"},style:{width:48,height:48}},{props:{variant:"extended"},style:{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48}},{props:{variant:"extended",size:"small"},style:{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34}},{props:{variant:"extended",size:"medium"},style:{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40}},{props:{color:"inherit"},style:{color:"inherit"}}]}}),tr(({theme:e})=>({variants:[...Object.entries(e.palette).filter(Ga(["dark","contrastText"])).map(([t])=>({props:{color:t},style:{color:(e.vars||e).palette[t].contrastText,backgroundColor:(e.vars||e).palette[t].main,"&:hover":{backgroundColor:(e.vars||e).palette[t].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t].main}}}}))]})),tr(({theme:e})=>({[`&.${C5.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),tW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiFab"}),{children:a,className:c,color:d="default",component:u="button",disabled:b=!1,disableFocusRipple:w=!1,focusVisibleClassName:I,size:k="large",variant:P="circular",...R}=i,N={...i,color:d,component:u,disabled:b,disableFocusRipple:w,size:k,variant:P},V=QV(N);return be.jsx(eW,{className:Ut(V.root,c),component:u,disabled:b,focusRipple:!w,focusVisibleClassName:Ut(V.focusVisible,I),ownerState:N,ref:n,...R,classes:V,children:a})}),nW=e=>{const{classes:t,disableUnderline:n,startAdornment:i,endAdornment:a,size:c,hiddenLabel:d,multiline:u}=e,b={root:["root",!n&&"underline",i&&"adornedStart",a&&"adornedEnd",c==="small"&&`size${St(c)}`,d&&"hiddenLabel",u&&"multiline"],input:["input"]},w=Bn(b,NU,t);return{...t,...w}},rW=Mt(f1,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...d1(e,t),!n.disableUnderline&&t.underline]}})(tr(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",i=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",c=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i}},[`&.${Ju.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:i},[`&.${Ju.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:c},variants:[{props:({ownerState:d})=>!d.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Ju.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Ju.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Ju.disabled}, .${Ju.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${Ju.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ga()).map(([d])=>{var u;return{props:{disableUnderline:!1,color:d},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[d])==null?void 0:u.main}`}}}}),{props:({ownerState:d})=>d.startAdornment,style:{paddingLeft:12}},{props:({ownerState:d})=>d.endAdornment,style:{paddingRight:12}},{props:({ownerState:d})=>d.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:d,size:u})=>d.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel&&d.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),iW=Mt(m1,{name:"MuiFilledInput",slot:"Input",overridesResolver:p1})(tr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),H0=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:c={},componentsProps:d,fullWidth:u=!1,hiddenLabel:b,inputComponent:w="input",multiline:I=!1,slotProps:k,slots:P={},type:R="text",...N}=i,V={...i,disableUnderline:a,fullWidth:u,inputComponent:w,multiline:I,type:R},X=nW(i),D={root:{ownerState:V},input:{ownerState:V}},B=k??d?Hi(D,k??d):D,j=P.root??c.Root??rW,G=P.input??c.Input??iW;return be.jsx(uS,{slots:{root:j,input:G},componentsProps:B,fullWidth:u,inputComponent:w,multiline:I,ref:n,type:R,...N,classes:X})});H0&&(H0.muiName="Input");function oW(e){return Pn("MuiFormControl",e)}Mn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const aW=e=>{const{classes:t,margin:n,fullWidth:i}=e,a={root:["root",n!=="none"&&`margin${St(n)}`,i&&"fullWidth"]};return Bn(a,oW,t)},sW=Mt("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${St(e.margin)}`],...e.fullWidth&&t.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),lW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiFormControl"}),{children:a,className:c,color:d="primary",component:u="div",disabled:b=!1,error:w=!1,focused:I,fullWidth:k=!1,hiddenLabel:P=!1,margin:R="none",required:N=!1,size:V="medium",variant:X="outlined",...D}=i,B={...i,color:d,component:u,disabled:b,error:w,fullWidth:k,hiddenLabel:P,margin:R,required:N,size:V,variant:X},j=aW(B),[G,te]=ie.useState(()=>{let $e=!1;return a&&ie.Children.forEach(a,Le=>{if(!Cx(Le,["Input","Select"]))return;const Oe=Cx(Le,["Select"])?Le.props.input:Le;Oe&&DU(Oe.props)&&($e=!0)}),$e}),[oe,ae]=ie.useState(()=>{let $e=!1;return a&&ie.Children.forEach(a,Le=>{Cx(Le,["Input","Select"])&&(q0(Le.props,!0)||q0(Le.props.inputProps,!0))&&($e=!0)}),$e}),[de,Me]=ie.useState(!1);b&&de&&Me(!1);const Z=I!==void 0&&!b?I:de;let Ie;ie.useRef(!1);const je=ie.useMemo(()=>({adornedStart:G,setAdornedStart:te,color:d,disabled:b,error:w,filled:oe,focused:Z,fullWidth:k,hiddenLabel:P,size:V,onBlur:()=>{Me(!1)},onEmpty:()=>{ae(!1)},onFilled:()=>{ae(!0)},onFocus:()=>{Me(!0)},registerEffect:Ie,required:N,variant:X}),[G,d,b,w,oe,Z,k,P,Ie,N,V,X]);return be.jsx(lS.Provider,{value:je,children:be.jsx(sW,{as:u,ownerState:B,className:Ut(j.root,c),ref:n,...D,children:a})})});function uW(e){return Pn("MuiFormHelperText",e)}const k5=Mn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var E5;const cW=e=>{const{classes:t,contained:n,size:i,disabled:a,error:c,filled:d,focused:u,required:b}=e,w={root:["root",a&&"disabled",c&&"error",i&&`size${St(i)}`,n&&"contained",u&&"focused",d&&"filled",b&&"required"]};return Bn(w,uW,t)},hW=Mt("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${St(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${k5.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${k5.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),dW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiFormHelperText"}),{children:a,className:c,component:d="p",disabled:u,error:b,filled:w,focused:I,margin:k,required:P,variant:R,...N}=i,V=jd(),X=Nd({props:i,muiFormControl:V,states:["variant","size","disabled","error","filled","focused","required"]}),D={...i,component:d,contained:X.variant==="filled"||X.variant==="outlined",variant:X.variant,size:X.size,disabled:X.disabled,error:X.error,filled:X.filled,focused:X.focused,required:X.required};delete D.ownerState;const B=cW(D);return be.jsx(hW,{as:d,className:Ut(B.root,c),ref:n,...N,ownerState:D,children:a===" "?E5||(E5=be.jsx("span",{className:"notranslate",children:""})):a})});function pW(e){return Pn("MuiFormLabel",e)}const qf=Mn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),fW=e=>{const{classes:t,color:n,focused:i,disabled:a,error:c,filled:d,required:u}=e,b={root:["root",`color${St(n)}`,a&&"disabled",c&&"error",d&&"filled",i&&"focused",u&&"required"],asterisk:["asterisk",c&&"error"]};return Bn(b,pW,t)},mW=Mt("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(tr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Ga()).map(([t])=>({props:{color:t},style:{[`&.${qf.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${qf.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${qf.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),gW=Mt("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(tr(({theme:e})=>({[`&.${qf.error}`]:{color:(e.vars||e).palette.error.main}}))),yW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiFormLabel"}),{children:a,className:c,color:d,component:u="label",disabled:b,error:w,filled:I,focused:k,required:P,...R}=i,N=jd(),V=Nd({props:i,muiFormControl:N,states:["color","required","focused","disabled","error","filled"]}),X={...i,color:V.color||"primary",component:u,disabled:V.disabled,error:V.error,filled:V.filled,focused:V.focused,required:V.required},D=fW(X);return be.jsxs(mW,{as:u,ownerState:X,className:Ut(D.root,c),ref:n,...R,children:[a,V.required&&be.jsxs(gW,{ownerState:X,"aria-hidden":!0,className:D.asterisk,children:["","*"]})]})}),T5=ie.createContext();function vW(e){return Pn("MuiGrid",e)}const _W=[0,1,2,3,4,5,6,7,8,9,10],xW=["column-reverse","column","row-reverse","row"],bW=["nowrap","wrap-reverse","wrap"],gf=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Pm=Mn("MuiGrid",["root","container","item","zeroMinWidth",..._W.map(e=>`spacing-xs-${e}`),...xW.map(e=>`direction-xs-${e}`),...bW.map(e=>`wrap-xs-${e}`),...gf.map(e=>`grid-xs-${e}`),...gf.map(e=>`grid-sm-${e}`),...gf.map(e=>`grid-md-${e}`),...gf.map(e=>`grid-lg-${e}`),...gf.map(e=>`grid-xl-${e}`)]);function wW({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((i,a)=>{let c={};if(t[a]&&(n=t[a]),!n)return i;if(n===!0)c={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")c={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const d=Wv({values:t.columns,breakpoints:e.breakpoints.values}),u=typeof d=="object"?d[a]:d;if(u==null)return i;const b=`${Math.round(n/u*1e8)/1e6}%`;let w={};if(t.container&&t.item&&t.columnSpacing!==0){const I=e.spacing(t.columnSpacing);if(I!=="0px"){const k=`calc(${b} + ${I})`;w={flexBasis:k,maxWidth:k}}}c={flexBasis:b,flexGrow:0,maxWidth:b,...w}}return e.breakpoints.values[a]===0?Object.assign(i,c):i[e.breakpoints.up(a)]=c,i},{})}function SW({theme:e,ownerState:t}){const n=Wv({values:t.direction,breakpoints:e.breakpoints.values});return Ta({theme:e},n,i=>{const a={flexDirection:i};return i.startsWith("column")&&(a[`& > .${Pm.item}`]={maxWidth:"none"}),a})}function g4({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(a=>{n===""&&t[a]!==0&&(n=a)});const i=Object.keys(e).sort((a,c)=>e[a]-e[c]);return i.slice(0,i.indexOf(n))}function CW({theme:e,ownerState:t}){const{container:n,rowSpacing:i}=t;let a={};if(n&&i!==0){const c=Wv({values:i,breakpoints:e.breakpoints.values});let d;typeof c=="object"&&(d=g4({breakpoints:e.breakpoints.values,values:c})),a=Ta({theme:e},c,(u,b)=>{const w=e.spacing(u);return w!=="0px"?{marginTop:e.spacing(-u),[`& > .${Pm.item}`]:{paddingTop:w}}:d!=null&&d.includes(b)?{}:{marginTop:0,[`& > .${Pm.item}`]:{paddingTop:0}}})}return a}function kW({theme:e,ownerState:t}){const{container:n,columnSpacing:i}=t;let a={};if(n&&i!==0){const c=Wv({values:i,breakpoints:e.breakpoints.values});let d;typeof c=="object"&&(d=g4({breakpoints:e.breakpoints.values,values:c})),a=Ta({theme:e},c,(u,b)=>{const w=e.spacing(u);if(w!=="0px"){const I=e.spacing(-u);return{width:`calc(100% + ${w})`,marginLeft:I,[`& > .${Pm.item}`]:{paddingLeft:w}}}return d!=null&&d.includes(b)?{}:{width:"100%",marginLeft:0,[`& > .${Pm.item}`]:{paddingLeft:0}}})}return a}function EW(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const i=[];return t.forEach(a=>{const c=e[a];Number(c)>0&&i.push(n[`spacing-${a}-${String(c)}`])}),i}const TW=Mt("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:i,direction:a,item:c,spacing:d,wrap:u,zeroMinWidth:b,breakpoints:w}=n;let I=[];i&&(I=EW(d,w,t));const k=[];return w.forEach(P=>{const R=n[P];R&&k.push(t[`grid-${P}-${String(R)}`])}),[t.root,i&&t.container,c&&t.item,b&&t.zeroMinWidth,...I,a!=="row"&&t[`direction-xs-${String(a)}`],u!=="wrap"&&t[`wrap-xs-${String(u)}`],...k]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),SW,CW,kW,wW);function IW(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(i=>{const a=e[i];if(Number(a)>0){const c=`spacing-${i}-${String(a)}`;n.push(c)}}),n}const PW=e=>{const{classes:t,container:n,direction:i,item:a,spacing:c,wrap:d,zeroMinWidth:u,breakpoints:b}=e;let w=[];n&&(w=IW(c,b));const I=[];b.forEach(P=>{const R=e[P];R&&I.push(`grid-${P}-${String(R)}`)});const k={root:["root",n&&"container",a&&"item",u&&"zeroMinWidth",...w,i!=="row"&&`direction-xs-${String(i)}`,d!=="wrap"&&`wrap-xs-${String(d)}`,...I]};return Bn(k,vW,t)},I5=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiGrid"}),{breakpoints:a}=e1(),c=Y2(i),{className:d,columns:u,columnSpacing:b,component:w="div",container:I=!1,direction:k="row",item:P=!1,rowSpacing:R,spacing:N=0,wrap:V="wrap",zeroMinWidth:X=!1,...D}=c,B=R||N,j=b||N,G=ie.useContext(T5),te=I?u||12:G,oe={},ae={...D};a.keys.forEach(Z=>{D[Z]!=null&&(oe[Z]=D[Z],delete ae[Z])});const de={...c,columns:te,container:I,direction:k,item:P,rowSpacing:B,columnSpacing:j,wrap:V,zeroMinWidth:X,spacing:N,...oe,breakpoints:a.keys},Me=PW(de);return be.jsx(T5.Provider,{value:te,children:be.jsx(TW,{ownerState:de,className:Ut(Me.root,d),as:w,ref:n,...ae})})});function pw(e){return`scale(${e}, ${e**2})`}const MW={entering:{opacity:1,transform:pw(1)},entered:{opacity:1,transform:"none"}},Px=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),fw=ie.forwardRef(function(t,n){const{addEndListener:i,appear:a=!0,children:c,easing:d,in:u,onEnter:b,onEntered:w,onEntering:I,onExit:k,onExited:P,onExiting:R,style:N,timeout:V="auto",TransitionComponent:X=Ts,...D}=t,B=XA(),j=ie.useRef(),G=e1(),te=ie.useRef(null),oe=Ai(te,qm(c),n),ae=Oe=>He=>{if(Oe){const at=te.current;He===void 0?Oe(at):Oe(at,He)}},de=ae(I),Me=ae((Oe,He)=>{d4(Oe);const{duration:at,delay:De,easing:qe}=V0({style:N,timeout:V,easing:d},{mode:"enter"});let pt;V==="auto"?(pt=G.transitions.getAutoHeightDuration(Oe.clientHeight),j.current=pt):pt=at,Oe.style.transition=[G.transitions.create("opacity",{duration:pt,delay:De}),G.transitions.create("transform",{duration:Px?pt:pt*.666,delay:De,easing:qe})].join(","),b&&b(Oe,He)}),Z=ae(w),Ie=ae(R),je=ae(Oe=>{const{duration:He,delay:at,easing:De}=V0({style:N,timeout:V,easing:d},{mode:"exit"});let qe;V==="auto"?(qe=G.transitions.getAutoHeightDuration(Oe.clientHeight),j.current=qe):qe=He,Oe.style.transition=[G.transitions.create("opacity",{duration:qe,delay:at}),G.transitions.create("transform",{duration:Px?qe:qe*.666,delay:Px?at:at||qe*.333,easing:De})].join(","),Oe.style.opacity=0,Oe.style.transform=pw(.75),k&&k(Oe)}),$e=ae(P),Le=Oe=>{V==="auto"&&B.start(j.current||0,Oe),i&&i(te.current,Oe)};return be.jsx(X,{appear:a,in:u,nodeRef:te,onEnter:Me,onEntered:Z,onEntering:de,onExit:je,onExited:$e,onExiting:Ie,addEndListener:Le,timeout:V==="auto"?null:V,...D,children:(Oe,He)=>ie.cloneElement(c,{style:{opacity:0,transform:pw(.75),visibility:Oe==="exited"&&!u?"hidden":void 0,...MW[Oe],...N,...c.props.style},ref:oe,...He})})});fw&&(fw.muiSupportAuto=!0);const AW=e=>{const{classes:t,disableUnderline:n}=e,a=Bn({root:["root",!n&&"underline"],input:["input"]},FU,t);return{...t,...a}},LW=Mt(f1,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...d1(e,t),!n.disableUnderline&&t.underline]}})(tr(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:i})=>i.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:i})=>!i.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${mf.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${mf.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${mf.disabled}, .${mf.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${mf.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Ga()).map(([i])=>({props:{color:i,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[i].main}`}}}))]}})),zW=Mt(m1,{name:"MuiInput",slot:"Input",overridesResolver:p1})({}),G0=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiInput"}),{disableUnderline:a=!1,components:c={},componentsProps:d,fullWidth:u=!1,inputComponent:b="input",multiline:w=!1,slotProps:I,slots:k={},type:P="text",...R}=i,N=AW(i),X={root:{ownerState:{disableUnderline:a}}},D=I??d?Hi(I??d,X):X,B=k.root??c.Root??LW,j=k.input??c.Input??zW;return be.jsx(uS,{slots:{root:B,input:j},slotProps:D,fullWidth:u,inputComponent:b,multiline:w,ref:n,type:P,...R,classes:N})});G0&&(G0.muiName="Input");function RW(e){return Pn("MuiInputLabel",e)}Mn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const DW=e=>{const{classes:t,formControl:n,size:i,shrink:a,disableAnimation:c,variant:d,required:u}=e,b={root:["root",n&&"formControl",!c&&"animated",a&&"shrink",i&&i!=="normal"&&`size${St(i)}`,d],asterisk:[u&&"asterisk"]},w=Bn(b,RW,t);return{...t,...w}},$W=Mt(yW,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${qf.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(tr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:i})=>t==="filled"&&n.shrink&&i==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),OW=ie.forwardRef(function(t,n){const i=Nn({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,margin:c,shrink:d,variant:u,className:b,...w}=i,I=jd();let k=d;typeof k>"u"&&I&&(k=I.filled||I.focused||I.adornedStart);const P=Nd({props:i,muiFormControl:I,states:["size","variant","required","focused"]}),R={...i,disableAnimation:a,formControl:I,shrink:k,size:P.size,variant:P.variant,required:P.required,focused:P.focused},N=DW(R);return be.jsx($W,{"data-shrink":k,ref:n,className:Ut(N.root,b),...w,ownerState:R,classes:N})}),FW=ie.createContext({});function BW(e){return Pn("MuiList",e)}Mn("MuiList",["root","padding","dense","subheader"]);const NW=e=>{const{classes:t,disablePadding:n,dense:i,subheader:a}=e;return Bn({root:["root",!n&&"padding",i&&"dense",a&&"subheader"]},BW,t)},jW=Mt("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),UW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiList"}),{children:a,className:c,component:d="ul",dense:u=!1,disablePadding:b=!1,subheader:w,...I}=i,k=ie.useMemo(()=>({dense:u}),[u]),P={...i,component:d,dense:u,disablePadding:b},R=NW(P);return be.jsx(FW.Provider,{value:k,children:be.jsxs(jW,{as:d,className:Ut(R.root,c),ref:n,ownerState:P,...I,children:[w,a]})})});function Mx(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function P5(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function y4(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function yf(e,t,n,i,a,c){let d=!1,u=a(e,t,t?n:!1);for(;u;){if(u===e.firstChild){if(d)return!1;d=!0}const b=i?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!y4(u,c)||b)u=a(e,u,n);else return u.focus(),!0}return!1}const VW=ie.forwardRef(function(t,n){const{actions:i,autoFocus:a=!1,autoFocusItem:c=!1,children:d,className:u,disabledItemsFocusable:b=!1,disableListWrap:w=!1,onKeyDown:I,variant:k="selectedMenu",...P}=t,R=ie.useRef(null),N=ie.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Pc(()=>{a&&R.current.focus()},[a]),ie.useImperativeHandle(i,()=>({adjustStyleForScrollbar:(j,{direction:G})=>{const te=!R.current.style.width;if(j.clientHeight<R.current.clientHeight&&te){const oe=`${YA(ul(j))}px`;R.current.style[G==="rtl"?"paddingLeft":"paddingRight"]=oe,R.current.style.width=`calc(100% + ${oe})`}return R.current}}),[]);const V=j=>{const G=R.current,te=j.key;if(j.ctrlKey||j.metaKey||j.altKey){I&&I(j);return}const ae=Ja(G).activeElement;if(te==="ArrowDown")j.preventDefault(),yf(G,ae,w,b,Mx);else if(te==="ArrowUp")j.preventDefault(),yf(G,ae,w,b,P5);else if(te==="Home")j.preventDefault(),yf(G,null,w,b,Mx);else if(te==="End")j.preventDefault(),yf(G,null,w,b,P5);else if(te.length===1){const de=N.current,Me=te.toLowerCase(),Z=performance.now();de.keys.length>0&&(Z-de.lastTime>500?(de.keys=[],de.repeating=!0,de.previousKeyMatched=!0):de.repeating&&Me!==de.keys[0]&&(de.repeating=!1)),de.lastTime=Z,de.keys.push(Me);const Ie=ae&&!de.repeating&&y4(ae,de);de.previousKeyMatched&&(Ie||yf(G,ae,!1,b,Mx,de))?j.preventDefault():de.previousKeyMatched=!1}I&&I(j)},X=Ai(R,n);let D=-1;ie.Children.forEach(d,(j,G)=>{if(!ie.isValidElement(j)){D===G&&(D+=1,D>=d.length&&(D=-1));return}j.props.disabled||(k==="selectedMenu"&&j.props.selected||D===-1)&&(D=G),D===G&&(j.props.disabled||j.props.muiSkipListHighlight||j.type.muiSkipListHighlight)&&(D+=1,D>=d.length&&(D=-1))});const B=ie.Children.map(d,(j,G)=>{if(G===D){const te={};return c&&(te.autoFocus=!0),j.props.tabIndex===void 0&&k==="selectedMenu"&&(te.tabIndex=0),ie.cloneElement(j,te)}return j});return be.jsx(UW,{role:"menu",ref:X,className:u,onKeyDown:V,tabIndex:a?0:-1,...P,children:B})});function WW(e){return Pn("MuiPopover",e)}Mn("MuiPopover",["root","paper"]);function M5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function A5(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function L5(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function Ax(e){return typeof e=="function"?e():e}const qW=e=>{const{classes:t}=e;return Bn({root:["root"],paper:["paper"]},WW,t)},HW=Mt(GV,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),v4=Mt(h1,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),GW=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiPopover"}),{action:a,anchorEl:c,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:b="anchorEl",children:w,className:I,container:k,elevation:P=8,marginThreshold:R=16,open:N,PaperProps:V={},slots:X={},slotProps:D={},transformOrigin:B={vertical:"top",horizontal:"left"},TransitionComponent:j=fw,transitionDuration:G="auto",TransitionProps:{onEntering:te,...oe}={},disableScrollLock:ae=!1,...de}=i,Me=(D==null?void 0:D.paper)??V,Z=ie.useRef(),Ie={...i,anchorOrigin:d,anchorReference:b,elevation:P,marginThreshold:R,externalPaperSlotProps:Me,transformOrigin:B,TransitionComponent:j,transitionDuration:G,TransitionProps:oe},je=qW(Ie),$e=ie.useCallback(()=>{if(b==="anchorPosition")return u;const Vt=Ax(c),Wt=(Vt&&Vt.nodeType===1?Vt:Ja(Z.current).body).getBoundingClientRect();return{top:Wt.top+M5(Wt,d.vertical),left:Wt.left+A5(Wt,d.horizontal)}},[c,d.horizontal,d.vertical,u,b]),Le=ie.useCallback(Vt=>({vertical:M5(Vt,B.vertical),horizontal:A5(Vt,B.horizontal)}),[B.horizontal,B.vertical]),Oe=ie.useCallback(Vt=>{const nn={width:Vt.offsetWidth,height:Vt.offsetHeight},Wt=Le(nn);if(b==="none")return{top:null,left:null,transformOrigin:L5(Wt)};const _n=$e();let yt=_n.top-Wt.vertical,Rt=_n.left-Wt.horizontal;const Se=yt+nn.height,ur=Rt+nn.width,gn=ul(Ax(c)),ht=gn.innerHeight-R,qt=gn.innerWidth-R;if(R!==null&&yt<R){const un=yt-R;yt-=un,Wt.vertical+=un}else if(R!==null&&Se>ht){const un=Se-ht;yt-=un,Wt.vertical+=un}if(R!==null&&Rt<R){const un=Rt-R;Rt-=un,Wt.horizontal+=un}else if(ur>qt){const un=ur-qt;Rt-=un,Wt.horizontal+=un}return{top:`${Math.round(yt)}px`,left:`${Math.round(Rt)}px`,transformOrigin:L5(Wt)}},[c,b,$e,Le,R]),[He,at]=ie.useState(N),De=ie.useCallback(()=>{const Vt=Z.current;if(!Vt)return;const nn=Oe(Vt);nn.top!==null&&Vt.style.setProperty("top",nn.top),nn.left!==null&&(Vt.style.left=nn.left),Vt.style.transformOrigin=nn.transformOrigin,at(!0)},[Oe]);ie.useEffect(()=>(ae&&window.addEventListener("scroll",De),()=>window.removeEventListener("scroll",De)),[c,ae,De]);const qe=(Vt,nn)=>{te&&te(Vt,nn),De()},pt=()=>{at(!1)};ie.useEffect(()=>{N&&De()}),ie.useImperativeHandle(a,()=>N?{updatePosition:()=>{De()}}:null,[N,De]),ie.useEffect(()=>{if(!N)return;const Vt=GA(()=>{De()}),nn=ul(c);return nn.addEventListener("resize",Vt),()=>{Vt.clear(),nn.removeEventListener("resize",Vt)}},[c,N,De]);let Ct=G;G==="auto"&&!j.muiSupportAuto&&(Ct=void 0);const Lt=k||(c?Ja(Ax(c)).body:void 0),jt={slots:X,slotProps:{...D,paper:Me}},[zt,Kt]=_a("paper",{elementType:v4,externalForwardedProps:jt,additionalProps:{elevation:P,className:Ut(je.paper,Me==null?void 0:Me.className),style:He?Me.style:{...Me.style,opacity:0}},ownerState:Ie}),[dn,{slotProps:tn,...jn}]=_a("root",{elementType:HW,externalForwardedProps:jt,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Lt,open:N},ownerState:Ie,className:Ut(je.root,I)}),kn=Ai(Z,Kt.ref);return be.jsx(dn,{...jn,...!hw(dn)&&{slotProps:tn,disableScrollLock:ae},...de,ref:n,children:be.jsx(j,{appear:!0,in:N,onEntering:qe,onExited:pt,timeout:Ct,...oe,children:be.jsx(zt,{...Kt,ref:kn,children:w})})})});function ZW(e){return Pn("MuiMenu",e)}Mn("MuiMenu",["root","paper","list"]);const KW={vertical:"top",horizontal:"right"},XW={vertical:"top",horizontal:"left"},YW=e=>{const{classes:t}=e;return Bn({root:["root"],paper:["paper"],list:["list"]},ZW,t)},JW=Mt(GW,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),QW=Mt(v4,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),eq=Mt(VW,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),tq=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:c,className:d,disableAutoFocusItem:u=!1,MenuListProps:b={},onClose:w,open:I,PaperProps:k={},PopoverClasses:P,transitionDuration:R="auto",TransitionProps:{onEntering:N,...V}={},variant:X="selectedMenu",slots:D={},slotProps:B={},...j}=i,G=K9(),te={...i,autoFocus:a,disableAutoFocusItem:u,MenuListProps:b,onEntering:N,PaperProps:k,transitionDuration:R,TransitionProps:V,variant:X},oe=YW(te),ae=a&&!u&&I,de=ie.useRef(null),Me=(He,at)=>{de.current&&de.current.adjustStyleForScrollbar(He,{direction:G?"rtl":"ltr"}),N&&N(He,at)},Z=He=>{He.key==="Tab"&&(He.preventDefault(),w&&w(He,"tabKeyDown"))};let Ie=-1;ie.Children.map(c,(He,at)=>{ie.isValidElement(He)&&(He.props.disabled||(X==="selectedMenu"&&He.props.selected||Ie===-1)&&(Ie=at))});const je=D.paper??QW,$e=B.paper??k,Le=a5({elementType:D.root,externalSlotProps:B.root,ownerState:te,className:[oe.root,d]}),Oe=a5({elementType:je,externalSlotProps:$e,ownerState:te,className:oe.paper});return be.jsx(JW,{onClose:w,anchorOrigin:{vertical:"bottom",horizontal:G?"right":"left"},transformOrigin:G?KW:XW,slots:{paper:je,root:D.root},slotProps:{root:Le,paper:Oe},open:I,ref:n,transitionDuration:R,TransitionProps:{onEntering:Me,...V},ownerState:te,...j,classes:P,children:be.jsx(eq,{onKeyDown:Z,actions:de,autoFocus:a&&(Ie===-1||u),autoFocusItem:ae,variant:X,...b,className:Ut(oe.list,b.className),children:c})})});function nq(e){return Pn("MuiNativeSelect",e)}const cS=Mn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),rq=e=>{const{classes:t,variant:n,disabled:i,multiple:a,open:c,error:d}=e,u={select:["select",n,i&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${St(n)}`,c&&"iconOpen",i&&"disabled"]};return Bn(u,nq,t)},_4=Mt("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${cS.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),iq=Mt(_4,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ma,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${cS.multiple}`]:t.multiple}]}})({}),x4=Mt("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${cS.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),oq=Mt(x4,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${St(n.variant)}`],n.open&&t.iconOpen]}})({}),aq=ie.forwardRef(function(t,n){const{className:i,disabled:a,error:c,IconComponent:d,inputRef:u,variant:b="standard",...w}=t,I={...t,disabled:a,variant:b,error:c},k=rq(I);return be.jsxs(ie.Fragment,{children:[be.jsx(iq,{ownerState:I,className:Ut(k.select,i),disabled:a,ref:u||n,...w}),t.multiple?null:be.jsx(oq,{as:d,ownerState:I,className:k.icon})]})});var z5;const sq=Mt("fieldset",{shouldForwardProp:Ma})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),lq=Mt("legend",{shouldForwardProp:Ma})(tr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function uq(e){const{children:t,classes:n,className:i,label:a,notched:c,...d}=e,u=a!=null&&a!=="",b={...e,notched:c,withLabel:u};return be.jsx(sq,{"aria-hidden":!0,className:i,ownerState:b,...d,children:be.jsx(lq,{ownerState:b,children:u?be.jsx("span",{children:a}):z5||(z5=be.jsx("span",{className:"notranslate",children:""}))})})}const cq=e=>{const{classes:t}=e,i=Bn({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},BU,t);return{...t,...i}},hq=Mt(f1,{shouldForwardProp:e=>Ma(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:d1})(tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${us.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${us.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${us.focused} .${us.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Ga()).map(([n])=>({props:{color:n},style:{[`&.${us.focused} .${us.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${us.error} .${us.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${us.disabled} .${us.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:i})=>n.multiline&&i==="small",style:{padding:"8.5px 14px"}}]}})),dq=Mt(uq,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(tr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),pq=Mt(m1,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:p1})(tr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),Z0=ie.forwardRef(function(t,n){var i;const a=Nn({props:t,name:"MuiOutlinedInput"}),{components:c={},fullWidth:d=!1,inputComponent:u="input",label:b,multiline:w=!1,notched:I,slots:k={},type:P="text",...R}=a,N=cq(a),V=jd(),X=Nd({props:a,muiFormControl:V,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),D={...a,color:X.color||"primary",disabled:X.disabled,error:X.error,focused:X.focused,formControl:V,fullWidth:d,hiddenLabel:X.hiddenLabel,multiline:w,size:X.size,type:P},B=k.root??c.Root??hq,j=k.input??c.Input??pq;return be.jsx(uS,{slots:{root:B,input:j},renderSuffix:G=>be.jsx(dq,{ownerState:D,className:N.notchedOutline,label:b!=null&&b!==""&&X.required?i||(i=be.jsxs(ie.Fragment,{children:[b,"","*"]})):b,notched:typeof I<"u"?I:!!(G.startAdornment||G.filled||G.focused)}),fullWidth:d,inputComponent:u,multiline:w,ref:n,type:P,...R,classes:{...N,notchedOutline:null}})});Z0&&(Z0.muiName="Input");function fq(e){return Pn("MuiSelect",e)}const vf=Mn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var R5;const mq=Mt(_4,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${vf.select}`]:t.select},{[`&.${vf.select}`]:t[n.variant]},{[`&.${vf.error}`]:t.error},{[`&.${vf.multiple}`]:t.multiple}]}})({[`&.${vf.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),gq=Mt(x4,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${St(n.variant)}`],n.open&&t.iconOpen]}})({}),yq=Mt("input",{shouldForwardProp:e=>l4(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function D5(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function vq(e){return e==null||typeof e=="string"&&!e.trim()}const _q=e=>{const{classes:t,variant:n,disabled:i,multiple:a,open:c,error:d}=e,u={select:["select",n,i&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${St(n)}`,c&&"iconOpen",i&&"disabled"],nativeInput:["nativeInput"]};return Bn(u,fq,t)},xq=ie.forwardRef(function(t,n){var Ke;const{"aria-describedby":i,"aria-label":a,autoFocus:c,autoWidth:d,children:u,className:b,defaultOpen:w,defaultValue:I,disabled:k,displayEmpty:P,error:R=!1,IconComponent:N,inputRef:V,labelId:X,MenuProps:D={},multiple:B,name:j,onBlur:G,onChange:te,onClose:oe,onFocus:ae,onOpen:de,open:Me,readOnly:Z,renderValue:Ie,SelectDisplayProps:je={},tabIndex:$e,type:Le,value:Oe,variant:He="standard",...at}=t,[De,qe]=n5({controlled:Oe,default:I,name:"Select"}),[pt,Ct]=n5({controlled:Me,default:w,name:"Select"}),Lt=ie.useRef(null),jt=ie.useRef(null),[zt,Kt]=ie.useState(null),{current:dn}=ie.useRef(Me!=null),[tn,jn]=ie.useState(),kn=Ai(n,V),Vt=ie.useCallback(Xe=>{jt.current=Xe,Xe&&Kt(Xe)},[]),nn=zt==null?void 0:zt.parentNode;ie.useImperativeHandle(kn,()=>({focus:()=>{jt.current.focus()},node:Lt.current,value:De}),[De]),ie.useEffect(()=>{w&&pt&&zt&&!dn&&(jn(d?null:nn.clientWidth),jt.current.focus())},[zt,d]),ie.useEffect(()=>{c&&jt.current.focus()},[c]),ie.useEffect(()=>{if(!X)return;const Xe=Ja(jt.current).getElementById(X);if(Xe){const it=()=>{getSelection().isCollapsed&&jt.current.focus()};return Xe.addEventListener("click",it),()=>{Xe.removeEventListener("click",it)}}},[X]);const Wt=(Xe,it)=>{Xe?de&&de(it):oe&&oe(it),dn||(jn(d?null:nn.clientWidth),Ct(Xe))},_n=Xe=>{Xe.button===0&&(Xe.preventDefault(),jt.current.focus(),Wt(!0,Xe))},yt=Xe=>{Wt(!1,Xe)},Rt=ie.Children.toArray(u),Se=Xe=>{const it=Rt.find(cn=>cn.props.value===Xe.target.value);it!==void 0&&(qe(it.props.value),te&&te(Xe,it))},ur=Xe=>it=>{let cn;if(it.currentTarget.hasAttribute("tabindex")){if(B){cn=Array.isArray(De)?De.slice():[];const zr=De.indexOf(Xe.props.value);zr===-1?cn.push(Xe.props.value):cn.splice(zr,1)}else cn=Xe.props.value;if(Xe.props.onClick&&Xe.props.onClick(it),De!==cn&&(qe(cn),te)){const zr=it.nativeEvent||it,Dt=new zr.constructor(zr.type,zr);Object.defineProperty(Dt,"target",{writable:!0,value:{value:cn,name:j}}),te(Dt,Xe)}B||Wt(!1,it)}},gn=Xe=>{Z||[" ","ArrowUp","ArrowDown","Enter"].includes(Xe.key)&&(Xe.preventDefault(),Wt(!0,Xe))},ht=zt!==null&&pt,qt=Xe=>{!ht&&G&&(Object.defineProperty(Xe,"target",{writable:!0,value:{value:De,name:j}}),G(Xe))};delete at["aria-invalid"];let un,ir;const bt=[];let An=!1;(q0({value:De})||P)&&(Ie?un=Ie(De):An=!0);const yr=Rt.map(Xe=>{if(!ie.isValidElement(Xe))return null;let it;if(B){if(!Array.isArray(De))throw new Error(ll(2));it=De.some(cn=>D5(cn,Xe.props.value)),it&&An&&bt.push(Xe.props.children)}else it=D5(De,Xe.props.value),it&&An&&(ir=Xe.props.children);return ie.cloneElement(Xe,{"aria-selected":it?"true":"false",onClick:ur(Xe),onKeyUp:cn=>{cn.key===" "&&cn.preventDefault(),Xe.props.onKeyUp&&Xe.props.onKeyUp(cn)},role:"option",selected:it,value:void 0,"data-value":Xe.props.value})});An&&(B?bt.length===0?un=null:un=bt.reduce((Xe,it,cn)=>(Xe.push(it),cn<bt.length-1&&Xe.push(", "),Xe),[]):un=ir);let Jr=tn;!d&&dn&&zt&&(Jr=nn.clientWidth);let vr;typeof $e<"u"?vr=$e:vr=k?null:0;const Ge=je.id||(j?`mui-component-select-${j}`:void 0),cr={...t,variant:He,value:De,open:ht,error:R},Zn=_q(cr),an={...D.PaperProps,...(Ke=D.slotProps)==null?void 0:Ke.paper},Lr=ZA();return be.jsxs(ie.Fragment,{children:[be.jsx(mq,{as:"div",ref:Vt,tabIndex:vr,role:"combobox","aria-controls":Lr,"aria-disabled":k?"true":void 0,"aria-expanded":ht?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[X,Ge].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:gn,onMouseDown:k||Z?null:_n,onBlur:qt,onFocus:ae,...je,ownerState:cr,className:Ut(je.className,Zn.select,b),id:Ge,children:vq(un)?R5||(R5=be.jsx("span",{className:"notranslate",children:""})):un}),be.jsx(yq,{"aria-invalid":R,value:Array.isArray(De)?De.join(","):De,name:j,ref:Lt,"aria-hidden":!0,onChange:Se,tabIndex:-1,disabled:k,className:Zn.nativeInput,autoFocus:c,...at,ownerState:cr}),be.jsx(gq,{as:N,className:Zn.icon,ownerState:cr}),be.jsx(tq,{id:`menu-${j||""}`,anchorEl:nn,open:ht,onClose:yt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...D,MenuListProps:{"aria-labelledby":X,role:"listbox","aria-multiselectable":B?"true":void 0,disableListWrap:!0,id:Lr,...D.MenuListProps},slotProps:{...D.slotProps,paper:{...an,style:{minWidth:Jr,...an!=null?an.style:null}}},children:yr})]})}),bq=e=>{const{classes:t}=e;return t},hS={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Ma(e)&&e!=="variant",slot:"Root"},wq=Mt(G0,hS)(""),Sq=Mt(Z0,hS)(""),Cq=Mt(H0,hS)(""),b4=ie.forwardRef(function(t,n){const i=Nn({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:c,classes:d={},className:u,defaultOpen:b=!1,displayEmpty:w=!1,IconComponent:I=jU,id:k,input:P,inputProps:R,label:N,labelId:V,MenuProps:X,multiple:D=!1,native:B=!1,onClose:j,onOpen:G,open:te,renderValue:oe,SelectDisplayProps:ae,variant:de="outlined",...Me}=i,Z=B?aq:xq,Ie=jd(),je=Nd({props:i,muiFormControl:Ie,states:["variant","error"]}),$e=je.variant||de,Le={...i,variant:$e,classes:d},Oe=bq(Le),{root:He,...at}=Oe,De=P||{standard:be.jsx(wq,{ownerState:Le}),outlined:be.jsx(Sq,{label:N,ownerState:Le}),filled:be.jsx(Cq,{ownerState:Le})}[$e],qe=Ai(n,qm(De));return be.jsx(ie.Fragment,{children:ie.cloneElement(De,{inputComponent:Z,inputProps:{children:c,error:je.error,IconComponent:I,variant:$e,type:void 0,multiple:D,...B?{id:k}:{autoWidth:a,defaultOpen:b,displayEmpty:w,labelId:V,MenuProps:X,onClose:j,onOpen:G,open:te,renderValue:oe,SelectDisplayProps:{id:k,...ae}},...R,classes:R?Hi(at,R.classes):at,...P?P.props.inputProps:{}},...(D&&B||w)&&$e==="outlined"?{notched:!0}:{},ref:qe,className:Ut(De.props.className,u,Oe.root),...!P&&{variant:$e},...Me})})});b4.muiName="Select";function kq(e){return Pn("MuiTextField",e)}Mn("MuiTextField",["root"]);const Eq={standard:G0,filled:H0,outlined:Z0},Tq=e=>{const{classes:t}=e;return Bn({root:["root"]},kq,t)},Iq=Mt(lW,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Lx=ie.forwardRef(function(t,n){const i=Nn({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:c=!1,children:d,className:u,color:b="primary",defaultValue:w,disabled:I=!1,error:k=!1,FormHelperTextProps:P,fullWidth:R=!1,helperText:N,id:V,InputLabelProps:X,inputProps:D,InputProps:B,inputRef:j,label:G,maxRows:te,minRows:oe,multiline:ae=!1,name:de,onBlur:Me,onChange:Z,onFocus:Ie,placeholder:je,required:$e=!1,rows:Le,select:Oe=!1,SelectProps:He,slots:at={},slotProps:De={},type:qe,value:pt,variant:Ct="outlined",...Lt}=i,jt={...i,autoFocus:c,color:b,disabled:I,error:k,fullWidth:R,multiline:ae,required:$e,select:Oe,variant:Ct},zt=Tq(jt),Kt=ZA(V),dn=N&&Kt?`${Kt}-helper-text`:void 0,tn=G&&Kt?`${Kt}-label`:void 0,jn=Eq[Ct],kn={slots:at,slotProps:{input:B,inputLabel:X,htmlInput:D,formHelperText:P,select:He,...De}},Vt={},nn=kn.slotProps.inputLabel;Ct==="outlined"&&(nn&&typeof nn.shrink<"u"&&(Vt.notched=nn.shrink),Vt.label=G),Oe&&((!He||!He.native)&&(Vt.id=void 0),Vt["aria-describedby"]=void 0);const[Wt,_n]=_a("input",{elementType:jn,externalForwardedProps:kn,additionalProps:Vt,ownerState:jt}),[yt,Rt]=_a("inputLabel",{elementType:OW,externalForwardedProps:kn,ownerState:jt}),[Se,ur]=_a("htmlInput",{elementType:"input",externalForwardedProps:kn,ownerState:jt}),[gn,ht]=_a("formHelperText",{elementType:dW,externalForwardedProps:kn,ownerState:jt}),[qt,un]=_a("select",{elementType:b4,externalForwardedProps:kn,ownerState:jt}),ir=be.jsx(Wt,{"aria-describedby":dn,autoComplete:a,autoFocus:c,defaultValue:w,fullWidth:R,multiline:ae,name:de,rows:Le,maxRows:te,minRows:oe,type:qe,value:pt,id:Kt,inputRef:j,onBlur:Me,onChange:Z,onFocus:Ie,placeholder:je,inputProps:ur,slots:{input:at.htmlInput?Se:void 0},..._n});return be.jsxs(Iq,{className:Ut(zt.root,u),disabled:I,error:k,fullWidth:R,ref:n,required:$e,color:b,variant:Ct,ownerState:jt,...Lt,children:[G!=null&&G!==""&&be.jsx(yt,{htmlFor:Kt,id:tn,...Rt,children:G}),Oe?be.jsx(qt,{"aria-describedby":dn,id:Kt,labelId:tn,value:pt,input:ir,...un,children:d}):ir,N&&be.jsx(gn,{id:dn,...ht,children:N})]})}),Pq="/foundhere/assets/logostyled-BA_oX2fn.png";function Mq(){const e=y2(),[t,n]=ie.useState(""),[i,a]=ie.useState(""),[c,d]=ie.useState(""),u=b=>{b.preventDefault(),localStorage.setItem("username",t),localStorage.setItem("email",i),localStorage.setItem("password",c),e("/map")};return be.jsxs(vd,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#f5f5f5"},children:[be.jsx("img",{src:Pq,alt:"Logo",style:{width:"275px",marginBottom:"20px",borderRadius:"8%"}}),be.jsx(xa,{variant:"h6",gutterBottom:!0,children:"Welcome to the Login"}),be.jsxs("form",{onSubmit:u,style:{width:"100%",maxWidth:400},children:[be.jsx(Lx,{label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:t,onChange:b=>n(b.target.value),required:!0}),be.jsx(Lx,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:i,onChange:b=>a(b.target.value),required:!0}),be.jsx(Lx,{label:"Password",variant:"outlined",fullWidth:!0,margin:"normal",type:"password",value:c,onChange:b=>d(b.target.value),required:!0}),be.jsx(If,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2,bgcolor:"#778DA9",color:"white"},children:"Login"})]})]})}const Aq=ra(be.jsx("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout"),Lq=()=>{const e=y2(),t=localStorage.getItem("email"),n=localStorage.getItem("username"),i=()=>{localStorage.clear(),e("/foundhere/")};return be.jsxs(TV,{maxWidth:"sm",sx:{textAlign:"center",pt:6},children:[be.jsx(p4,{alt:"User Avatar",src:"/images/user-avatar.jpg",sx:{width:100,height:100,mx:"auto"}}),be.jsx(xa,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:n||"User"}),be.jsx(xa,{variant:"body1",color:"text.secondary",children:t||"user@example.com"}),be.jsx(dw,{sx:{my:3}}),be.jsxs(vd,{display:"flex",flexDirection:"column",gap:2,alignItems:"center",children:[be.jsx(If,{variant:"contained",fullWidth:!0,sx:{bgcolor:"#778DA9",borderRadius:"20px"},children:"Edit Profile"}),be.jsx(If,{variant:"outlined",fullWidth:!0,sx:{color:"#778DA9",borderColor:"#778DA9",borderRadius:"20px"},children:"Account Settings"}),be.jsx(If,{variant:"outlined",fullWidth:!0,sx:{color:"#778DA9",borderColor:"#778DA9",borderRadius:"20px"},children:"My Liked Souvenirs"}),be.jsxs(If,{variant:"contained",sx:{bgcolor:"#FF8A5B",borderRadius:"20px"},fullWidth:!0,onClick:i,children:["Logout",be.jsx(Aq,{})]})]})]})};var w4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$5=yi.createContext&&yi.createContext(w4),zq=["attr","size","title"];function Rq(e,t){if(e==null)return{};var n=Dq(e,t),i,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(a=0;a<c.length;a++)i=c[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function Dq(e,t){if(e==null)return{};var n={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}function K0(){return K0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},K0.apply(this,arguments)}function O5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function X0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?O5(Object(n),!0).forEach(function(i){$q(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function $q(e,t,n){return t=Oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oq(e){var t=Fq(e,"string");return typeof t=="symbol"?t:t+""}function Fq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S4(e){return e&&e.map((t,n)=>yi.createElement(t.tag,X0({key:n},t.attr),S4(t.child)))}function dS(e){return t=>yi.createElement(Bq,K0({attr:X0({},e.attr)},t),S4(e.child))}function Bq(e){var t=n=>{var{attr:i,size:a,title:c}=e,d=Rq(e,zq),u=a||n.size||"1em",b;return n.className&&(b=n.className),e.className&&(b=(b?b+" ":"")+e.className),yi.createElement("svg",K0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,i,d,{className:b,style:X0(X0({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&yi.createElement("title",null,c),e.children)};return $5!==void 0?yi.createElement($5.Consumer,null,n=>t(n)):t(w4)}function Nq(e){return dS({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function jq(e){return dS({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(e)}function Uq(e){return dS({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}const Vq=()=>{const[e,t]=ie.useState("map"),n=y2(),i=(a,c)=>{t(c),c==="map"?n("/map"):c==="liked"?n("/liked"):c==="profile"&&n("/profile")};return be.jsx(h1,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:"10",minHeight:"60px"},elevation:3,children:be.jsxs(oV,{value:e,onChange:i,sx:{bgcolor:"#374151",color:"#9ca3af",height:"75px"},children:[be.jsx(Tx,{label:"Map",value:"map",icon:be.jsx(xc,{children:be.jsx(jq,{})}),sx:{color:"#9ca3af"}}),be.jsx(Tx,{label:"Liked",value:"liked",icon:be.jsx(xc,{children:be.jsx(Nq,{})}),sx:{color:"#9ca3af"}}),be.jsx(Tx,{label:"Profile",value:"profile",icon:be.jsx(xc,{children:be.jsx(Uq,{})}),sx:{color:"#9ca3af"}})]})})},F5=ra(be.jsx("path",{d:"m21.9 8.89-1.05-4.37c-.22-.9-1-1.52-1.91-1.52H5.05c-.9 0-1.69.63-1.9 1.52L2.1 8.89c-.24 1.02-.02 2.06.62 2.88.08.11.19.19.28.29V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-6.94c.09-.09.2-.18.28-.28.64-.82.87-1.87.62-2.89m-2.99-3.9 1.05 4.37c.1.42.01.84-.25 1.17-.14.18-.44.47-.94.47-.61 0-1.14-.49-1.21-1.14L16.98 5zM13 5h1.96l.54 4.52c.05.39-.07.78-.33 1.07-.22.26-.54.41-.95.41-.67 0-1.22-.59-1.22-1.31zM8.49 9.52 9.04 5H11v4.69c0 .72-.55 1.31-1.29 1.31-.34 0-.65-.15-.89-.41-.25-.29-.37-.68-.33-1.07m-4.45-.16L5.05 5h1.97l-.58 4.86c-.08.65-.6 1.14-1.21 1.14-.49 0-.8-.29-.93-.47-.27-.32-.36-.75-.26-1.17M5 19v-6.03c.08.01.15.03.23.03.87 0 1.66-.36 2.24-.95.6.6 1.4.95 2.31.95.87 0 1.65-.36 2.23-.93.59.57 1.39.93 2.29.93.84 0 1.64-.35 2.24-.95.58.59 1.37.95 2.24.95.08 0 .15-.02.23-.03V19z"}),"Storefront"),Wq=ra(be.jsx("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos"),qq=ra(be.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Hq=ra(be.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02z"}),"Phone"),Gq=ra([be.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),be.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime");var C4={},g1={},pS={},zx={},B5;function Zq(){return B5||(B5=1,function(e){(function(t,n){n(e,ie,$A)})(_w,function(t,n,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setHasSupportToCaptureOption=N;var a=d(n),c=d(i);function d(B){return B&&B.__esModule?B:{default:B}}var u=Object.assign||function(B){for(var j=1;j<arguments.length;j++){var G=arguments[j];for(var te in G)Object.prototype.hasOwnProperty.call(G,te)&&(B[te]=G[te])}return B};function b(B,j){var G={};for(var te in B)j.indexOf(te)>=0||Object.prototype.hasOwnProperty.call(B,te)&&(G[te]=B[te]);return G}function w(B,j){if(!(B instanceof j))throw new TypeError("Cannot call a class as a function")}var I=function(){function B(j,G){for(var te=0;te<G.length;te++){var oe=G[te];oe.enumerable=oe.enumerable||!1,oe.configurable=!0,"value"in oe&&(oe.writable=!0),Object.defineProperty(j,oe.key,oe)}}return function(j,G,te){return G&&B(j.prototype,G),te&&B(j,te),j}}();function k(B,j){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:B}function P(B,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);B.prototype=Object.create(j&&j.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(B,j):B.__proto__=j)}var R=!1;function N(B){R=B}try{addEventListener("test",null,Object.defineProperty({},"capture",{get:function(){N(!0)}}))}catch{}function V(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{capture:!0};return R?B:B.capture}function X(B){if("touches"in B){var j=B.touches[0],G=j.pageX,te=j.pageY;return{x:G,y:te}}var oe=B.screenX,ae=B.screenY;return{x:oe,y:ae}}var D=function(B){P(j,B);function j(){var G;w(this,j);for(var te=arguments.length,oe=Array(te),ae=0;ae<te;ae++)oe[ae]=arguments[ae];var de=k(this,(G=j.__proto__||Object.getPrototypeOf(j)).call.apply(G,[this].concat(oe)));return de._handleSwipeStart=de._handleSwipeStart.bind(de),de._handleSwipeMove=de._handleSwipeMove.bind(de),de._handleSwipeEnd=de._handleSwipeEnd.bind(de),de._onMouseDown=de._onMouseDown.bind(de),de._onMouseMove=de._onMouseMove.bind(de),de._onMouseUp=de._onMouseUp.bind(de),de._setSwiperRef=de._setSwiperRef.bind(de),de}return I(j,[{key:"componentDidMount",value:function(){this.swiper&&this.swiper.addEventListener("touchmove",this._handleSwipeMove,V({capture:!0,passive:!1}))}},{key:"componentWillUnmount",value:function(){this.swiper&&this.swiper.removeEventListener("touchmove",this._handleSwipeMove,V({capture:!0,passive:!1}))}},{key:"_onMouseDown",value:function(te){this.props.allowMouseEvents&&(this.mouseDown=!0,document.addEventListener("mouseup",this._onMouseUp),document.addEventListener("mousemove",this._onMouseMove),this._handleSwipeStart(te))}},{key:"_onMouseMove",value:function(te){this.mouseDown&&this._handleSwipeMove(te)}},{key:"_onMouseUp",value:function(te){this.mouseDown=!1,document.removeEventListener("mouseup",this._onMouseUp),document.removeEventListener("mousemove",this._onMouseMove),this._handleSwipeEnd(te)}},{key:"_handleSwipeStart",value:function(te){var oe=X(te),ae=oe.x,de=oe.y;this.moveStart={x:ae,y:de},this.props.onSwipeStart(te)}},{key:"_handleSwipeMove",value:function(te){if(this.moveStart){var oe=X(te),ae=oe.x,de=oe.y,Me=ae-this.moveStart.x,Z=de-this.moveStart.y;this.moving=!0;var Ie=this.props.onSwipeMove({x:Me,y:Z},te);Ie&&te.cancelable&&te.preventDefault(),this.movePosition={deltaX:Me,deltaY:Z}}}},{key:"_handleSwipeEnd",value:function(te){this.props.onSwipeEnd(te);var oe=this.props.tolerance;this.moving&&this.movePosition&&(this.movePosition.deltaX<-oe?this.props.onSwipeLeft(1,te):this.movePosition.deltaX>oe&&this.props.onSwipeRight(1,te),this.movePosition.deltaY<-oe?this.props.onSwipeUp(1,te):this.movePosition.deltaY>oe&&this.props.onSwipeDown(1,te)),this.moveStart=null,this.moving=!1,this.movePosition=null}},{key:"_setSwiperRef",value:function(te){this.swiper=te,this.props.innerRef(te)}},{key:"render",value:function(){var te=this.props;te.tagName;var oe=te.className,ae=te.style,de=te.children;te.allowMouseEvents,te.onSwipeUp,te.onSwipeDown,te.onSwipeLeft,te.onSwipeRight,te.onSwipeStart,te.onSwipeMove,te.onSwipeEnd,te.innerRef,te.tolerance;var Me=b(te,["tagName","className","style","children","allowMouseEvents","onSwipeUp","onSwipeDown","onSwipeLeft","onSwipeRight","onSwipeStart","onSwipeMove","onSwipeEnd","innerRef","tolerance"]);return a.default.createElement(this.props.tagName,u({ref:this._setSwiperRef,onMouseDown:this._onMouseDown,onTouchStart:this._handleSwipeStart,onTouchEnd:this._handleSwipeEnd,className:oe,style:ae},Me),de)}}]),j}(n.Component);D.displayName="ReactSwipe",D.propTypes={tagName:c.default.string,className:c.default.string,style:c.default.object,children:c.default.node,allowMouseEvents:c.default.bool,onSwipeUp:c.default.func,onSwipeDown:c.default.func,onSwipeLeft:c.default.func,onSwipeRight:c.default.func,onSwipeStart:c.default.func,onSwipeMove:c.default.func,onSwipeEnd:c.default.func,innerRef:c.default.func,tolerance:c.default.number.isRequired},D.defaultProps={tagName:"div",allowMouseEvents:!1,onSwipeUp:function(){},onSwipeDown:function(){},onSwipeLeft:function(){},onSwipeRight:function(){},onSwipeStart:function(){},onSwipeMove:function(){},onSwipeEnd:function(){},innerRef:function(){},tolerance:0},t.default=D})}(zx)),zx}(function(e){(function(t,n){n(e,Zq())})(_w,function(t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=a(n);function a(c){return c&&c.__esModule?c:{default:c}}t.default=i.default})})(pS);var Hm={},k4={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var c="",d=0;d<arguments.length;d++){var u=arguments[d];u&&(c=a(c,i(u)))}return c}function i(c){if(typeof c=="string"||typeof c=="number")return c;if(typeof c!="object")return"";if(Array.isArray(c))return n.apply(null,c);if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]"))return c.toString();var d="";for(var u in c)t.call(c,u)&&c[u]&&(d=a(d,u));return d}function a(c,d){return d?c?c+" "+d:c+d:c}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(k4);var Kq=k4.exports;Object.defineProperty(Hm,"__esModule",{value:!0});Hm.default=void 0;var Gl=Xq(Kq);function Xq(e){return e&&e.__esModule?e:{default:e}}function Yq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jq={ROOT:function(t){return(0,Gl.default)(Yq({"carousel-root":!0},t||"",!!t))},CAROUSEL:function(t){return(0,Gl.default)({carousel:!0,"carousel-slider":t})},WRAPPER:function(t,n){return(0,Gl.default)({"thumbs-wrapper":!t,"slider-wrapper":t,"axis-horizontal":n==="horizontal","axis-vertical":n!=="horizontal"})},SLIDER:function(t,n){return(0,Gl.default)({thumbs:!t,slider:t,animated:!n})},ITEM:function(t,n,i){return(0,Gl.default)({thumb:!t,slide:t,selected:n,previous:i})},ARROW_PREV:function(t){return(0,Gl.default)({"control-arrow control-prev":!0,"control-disabled":t})},ARROW_NEXT:function(t){return(0,Gl.default)({"control-arrow control-next":!0,"control-disabled":t})},DOT:function(t){return(0,Gl.default)({dot:!0,selected:t})}};Hm.default=Jq;var Gm={},y1={};Object.defineProperty(y1,"__esModule",{value:!0});y1.outerWidth=void 0;var Qq=function(t){var n=t.offsetWidth,i=getComputedStyle(t);return n+=parseInt(i.marginLeft)+parseInt(i.marginRight),n};y1.outerWidth=Qq;var Ud={};Object.defineProperty(Ud,"__esModule",{value:!0});Ud.default=void 0;var eH=function(t,n,i){var a=t===0?t:t+n,c=i==="horizontal"?[a,0,0]:[0,a,0],d="translate3d",u="("+c.join(",")+")";return d+u};Ud.default=eH;var Zm={};Object.defineProperty(Zm,"__esModule",{value:!0});Zm.default=void 0;var tH=function(){return window};Zm.default=tH;Object.defineProperty(Gm,"__esModule",{value:!0});Gm.default=void 0;var Ba=iH(ie),Qu=v1(Hm),nH=y1,N5=v1(Ud),rH=v1(pS),Iy=v1(Zm);function v1(e){return e&&e.__esModule?e:{default:e}}function E4(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return E4=function(){return e},e}function iH(e){if(e&&e.__esModule)return e;if(e===null||Hf(e)!=="object"&&typeof e!="function")return{default:e};var t=E4();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function Hf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Hf=function(n){return typeof n}:Hf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hf(e)}function mw(){return mw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mw.apply(this,arguments)}function oH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function sH(e,t,n){return t&&aH(e.prototype,t),e}function lH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gw(e,t)}function gw(e,t){return gw=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},gw(e,t)}function uH(e){var t=hH();return function(){var i=Y0(e),a;if(t){var c=Y0(this).constructor;a=Reflect.construct(i,arguments,c)}else a=i.apply(this,arguments);return cH(this,a)}}function cH(e,t){return t&&(Hf(t)==="object"||typeof t=="function")?t:io(e)}function io(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Y0(e){return Y0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Y0(e)}function Wi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dH=function(t){return t.hasOwnProperty("key")},fS=function(e){lH(n,e);var t=uH(n);function n(i){var a;return oH(this,n),a=t.call(this,i),Wi(io(a),"itemsWrapperRef",void 0),Wi(io(a),"itemsListRef",void 0),Wi(io(a),"thumbsRef",void 0),Wi(io(a),"setItemsWrapperRef",function(c){a.itemsWrapperRef=c}),Wi(io(a),"setItemsListRef",function(c){a.itemsListRef=c}),Wi(io(a),"setThumbsRef",function(c,d){a.thumbsRef||(a.thumbsRef=[]),a.thumbsRef[d]=c}),Wi(io(a),"updateSizes",function(){if(!(!a.props.children||!a.itemsWrapperRef||!a.thumbsRef)){var c=Ba.Children.count(a.props.children),d=a.itemsWrapperRef.clientWidth,u=a.props.thumbWidth?a.props.thumbWidth:(0,nH.outerWidth)(a.thumbsRef[0]),b=Math.floor(d/u),w=b<c,I=w?c-b:0;a.setState(function(k,P){return{itemSize:u,visibleItems:b,firstItem:w?a.getFirstItem(P.selectedItem):0,lastPosition:I,showArrows:w}})}}),Wi(io(a),"handleClickItem",function(c,d,u){if(!dH(u)||u.key==="Enter"){var b=a.props.onSelectItem;typeof b=="function"&&b(c,d)}}),Wi(io(a),"onSwipeStart",function(){a.setState({swiping:!0})}),Wi(io(a),"onSwipeEnd",function(){a.setState({swiping:!1})}),Wi(io(a),"onSwipeMove",function(c){var d=c.x;if(!a.state.itemSize||!a.itemsWrapperRef||!a.state.visibleItems)return!1;var u=0,b=Ba.Children.count(a.props.children),w=-(a.state.firstItem*100)/a.state.visibleItems,I=Math.max(b-a.state.visibleItems,0),k=-I*100/a.state.visibleItems;w===u&&d>0&&(d=0),w===k&&d<0&&(d=0);var P=a.itemsWrapperRef.clientWidth,R=w+100/(P/d);return a.itemsListRef&&["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(N){a.itemsListRef.style[N]=(0,N5.default)(R,"%",a.props.axis)}),!0}),Wi(io(a),"slideRight",function(c){a.moveTo(a.state.firstItem-(typeof c=="number"?c:1))}),Wi(io(a),"slideLeft",function(c){a.moveTo(a.state.firstItem+(typeof c=="number"?c:1))}),Wi(io(a),"moveTo",function(c){c=c<0?0:c,c=c>=a.state.lastPosition?a.state.lastPosition:c,a.setState({firstItem:c})}),a.state={selectedItem:i.selectedItem,swiping:!1,showArrows:!1,firstItem:0,visibleItems:0,lastPosition:0},a}return sH(n,[{key:"componentDidMount",value:function(){this.setupThumbs()}},{key:"componentDidUpdate",value:function(a){this.props.selectedItem!==this.state.selectedItem&&this.setState({selectedItem:this.props.selectedItem,firstItem:this.getFirstItem(this.props.selectedItem)}),this.props.children!==a.children&&this.updateSizes()}},{key:"componentWillUnmount",value:function(){this.destroyThumbs()}},{key:"setupThumbs",value:function(){(0,Iy.default)().addEventListener("resize",this.updateSizes),(0,Iy.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.updateSizes()}},{key:"destroyThumbs",value:function(){(0,Iy.default)().removeEventListener("resize",this.updateSizes),(0,Iy.default)().removeEventListener("DOMContentLoaded",this.updateSizes)}},{key:"getFirstItem",value:function(a){var c=a;return a>=this.state.lastPosition&&(c=this.state.lastPosition),a<this.state.firstItem+this.state.visibleItems&&(c=this.state.firstItem),a<this.state.firstItem&&(c=a),c}},{key:"renderItems",value:function(){var a=this;return this.props.children.map(function(c,d){var u=Qu.default.ITEM(!1,d===a.state.selectedItem),b={key:d,ref:function(I){return a.setThumbsRef(I,d)},className:u,onClick:a.handleClickItem.bind(a,d,a.props.children[d]),onKeyDown:a.handleClickItem.bind(a,d,a.props.children[d]),"aria-label":"".concat(a.props.labels.item," ").concat(d+1),style:{width:a.props.thumbWidth}};return Ba.default.createElement("li",mw({},b,{role:"button",tabIndex:0}),c)})}},{key:"render",value:function(){var a=this;if(!this.props.children)return null;var c=Ba.Children.count(this.props.children)>1,d=this.state.showArrows&&this.state.firstItem>0,u=this.state.showArrows&&this.state.firstItem<this.state.lastPosition,b={},w=-this.state.firstItem*(this.state.itemSize||0),I=(0,N5.default)(w,"px",this.props.axis),k=this.props.transitionTime+"ms";return b={WebkitTransform:I,MozTransform:I,MsTransform:I,OTransform:I,transform:I,msTransform:I,WebkitTransitionDuration:k,MozTransitionDuration:k,MsTransitionDuration:k,OTransitionDuration:k,transitionDuration:k,msTransitionDuration:k},Ba.default.createElement("div",{className:Qu.default.CAROUSEL(!1)},Ba.default.createElement("div",{className:Qu.default.WRAPPER(!1),ref:this.setItemsWrapperRef},Ba.default.createElement("button",{type:"button",className:Qu.default.ARROW_PREV(!d),onClick:function(){return a.slideRight()},"aria-label":this.props.labels.leftArrow}),c?Ba.default.createElement(rH.default,{tagName:"ul",className:Qu.default.SLIDER(!1,this.state.swiping),onSwipeLeft:this.slideLeft,onSwipeRight:this.slideRight,onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:b,innerRef:this.setItemsListRef,allowMouseEvents:this.props.emulateTouch},this.renderItems()):Ba.default.createElement("ul",{className:Qu.default.SLIDER(!1,this.state.swiping),ref:function(R){return a.setItemsListRef(R)},style:b},this.renderItems()),Ba.default.createElement("button",{type:"button",className:Qu.default.ARROW_NEXT(!u),onClick:function(){return a.slideLeft()},"aria-label":this.props.labels.rightArrow})))}}]),n}(Ba.Component);Gm.default=fS;Wi(fS,"displayName","Thumbs");Wi(fS,"defaultProps",{axis:"horizontal",labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},selectedItem:0,thumbWidth:80,transitionTime:350});var _1={};Object.defineProperty(_1,"__esModule",{value:!0});_1.default=void 0;var pH=function(){return document};_1.default=pH;var Ko={};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.setPosition=Ko.getPosition=Ko.isKeyboardEvent=Ko.defaultStatusFormatter=Ko.noop=void 0;var fH=ie,mH=gH(Ud);function gH(e){return e&&e.__esModule?e:{default:e}}var yH=function(){};Ko.noop=yH;var vH=function(t,n){return"".concat(t," of ").concat(n)};Ko.defaultStatusFormatter=vH;var _H=function(t){return t?t.hasOwnProperty("key"):!1};Ko.isKeyboardEvent=_H;var xH=function(t,n){if(n.infiniteLoop&&++t,t===0)return 0;var i=fH.Children.count(n.children);if(n.centerMode&&n.axis==="horizontal"){var a=-t*n.centerSlidePercentage,c=i-1;return t&&(t!==c||n.infiniteLoop)?a+=(100-n.centerSlidePercentage)/2:t===c&&(a+=100-n.centerSlidePercentage),a}return-t*100};Ko.getPosition=xH;var bH=function(t,n){var i={};return["WebkitTransform","MozTransform","MsTransform","OTransform","transform","msTransform"].forEach(function(a){i[a]=(0,mH.default)(t,"%",n)}),i};Ko.setPosition=bH;var ys={};Object.defineProperty(ys,"__esModule",{value:!0});ys.fadeAnimationHandler=ys.slideStopSwipingHandler=ys.slideSwipeAnimationHandler=ys.slideAnimationHandler=void 0;var T4=ie,wH=SH(Ud),vs=Ko;function SH(e){return e&&e.__esModule?e:{default:e}}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(i){CH(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function CH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kH=function(t,n){var i={},a=n.selectedItem,c=a,d=T4.Children.count(t.children)-1,u=t.infiniteLoop&&(a<0||a>d);if(u)return c<0?t.centerMode&&t.centerSlidePercentage&&t.axis==="horizontal"?i.itemListStyle=(0,vs.setPosition)(-(d+2)*t.centerSlidePercentage-(100-t.centerSlidePercentage)/2,t.axis):i.itemListStyle=(0,vs.setPosition)(-(d+2)*100,t.axis):c>d&&(i.itemListStyle=(0,vs.setPosition)(0,t.axis)),i;var b=(0,vs.getPosition)(a,t),w=(0,wH.default)(b,"%",t.axis),I=t.transitionTime+"ms";return i.itemListStyle={WebkitTransform:w,msTransform:w,OTransform:w,transform:w},n.swiping||(i.itemListStyle=ac(ac({},i.itemListStyle),{},{WebkitTransitionDuration:I,MozTransitionDuration:I,OTransitionDuration:I,transitionDuration:I,msTransitionDuration:I})),i};ys.slideAnimationHandler=kH;var EH=function(t,n,i,a){var c={},d=n.axis==="horizontal",u=T4.Children.count(n.children),b=0,w=(0,vs.getPosition)(i.selectedItem,n),I=n.infiniteLoop?(0,vs.getPosition)(u-1,n)-100:(0,vs.getPosition)(u-1,n),k=d?t.x:t.y,P=k;w===b&&k>0&&(P=0),w===I&&k<0&&(P=0);var R=w+100/(i.itemSize/P),N=Math.abs(k)>n.swipeScrollTolerance;return n.infiniteLoop&&N&&(i.selectedItem===0&&R>-100?R-=u*100:i.selectedItem===u-1&&R<-u*100&&(R+=u*100)),(!n.preventMovementUntilSwipeScrollTolerance||N||i.swipeMovementStarted)&&(i.swipeMovementStarted||a({swipeMovementStarted:!0}),c.itemListStyle=(0,vs.setPosition)(R,n.axis)),N&&!i.cancelClick&&a({cancelClick:!0}),c};ys.slideSwipeAnimationHandler=EH;var TH=function(t,n){var i=(0,vs.getPosition)(n.selectedItem,t),a=(0,vs.setPosition)(i,t.axis);return{itemListStyle:a}};ys.slideStopSwipingHandler=TH;var IH=function(t,n){var i=t.transitionTime+"ms",a="ease-in-out",c={position:"absolute",display:"block",zIndex:-2,minHeight:"100%",opacity:0,top:0,right:0,left:0,bottom:0,transitionTimingFunction:a,msTransitionTimingFunction:a,MozTransitionTimingFunction:a,WebkitTransitionTimingFunction:a,OTransitionTimingFunction:a};return n.swiping||(c=ac(ac({},c),{},{WebkitTransitionDuration:i,MozTransitionDuration:i,OTransitionDuration:i,transitionDuration:i,msTransitionDuration:i})),{slideStyle:c,selectedStyle:ac(ac({},c),{},{opacity:1,position:"relative"}),prevStyle:ac({},c)}};ys.fadeAnimationHandler=IH;Object.defineProperty(g1,"__esModule",{value:!0});g1.default=void 0;var qn=AH(ie),PH=Km(pS),Ks=Km(Hm),MH=Km(Gm),Py=Km(_1),My=Km(Zm),Pf=Ko,J0=ys;function Km(e){return e&&e.__esModule?e:{default:e}}function I4(){if(typeof WeakMap!="function")return null;var e=new WeakMap;return I4=function(){return e},e}function AH(e){if(e&&e.__esModule)return e;if(e===null||Gf(e)!=="object"&&typeof e!="function")return{default:e};var t=I4();if(t&&t.has(e))return t.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var c=i?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function Gf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gf=function(n){return typeof n}:Gf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gf(e)}function yw(){return yw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yw.apply(this,arguments)}function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(i){sn(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function LH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zH(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function RH(e,t,n){return t&&zH(e.prototype,t),e}function DH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vw(e,t)}function vw(e,t){return vw=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},vw(e,t)}function $H(e){var t=FH();return function(){var i=Q0(e),a;if(t){var c=Q0(this).constructor;a=Reflect.construct(i,arguments,c)}else a=i.apply(this,arguments);return OH(this,a)}}function OH(e,t){return t&&(Gf(t)==="object"||typeof t=="function")?t:hn(e)}function hn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function FH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function Q0(e){return Q0=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Q0(e)}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mS=function(e){DH(n,e);var t=$H(n);function n(i){var a;LH(this,n),a=t.call(this,i),sn(hn(a),"thumbsRef",void 0),sn(hn(a),"carouselWrapperRef",void 0),sn(hn(a),"listRef",void 0),sn(hn(a),"itemsRef",void 0),sn(hn(a),"timer",void 0),sn(hn(a),"animationHandler",void 0),sn(hn(a),"setThumbsRef",function(d){a.thumbsRef=d}),sn(hn(a),"setCarouselWrapperRef",function(d){a.carouselWrapperRef=d}),sn(hn(a),"setListRef",function(d){a.listRef=d}),sn(hn(a),"setItemsRef",function(d,u){a.itemsRef||(a.itemsRef=[]),a.itemsRef[u]=d}),sn(hn(a),"autoPlay",function(){qn.Children.count(a.props.children)<=1||(a.clearAutoPlay(),a.props.autoPlay&&(a.timer=setTimeout(function(){a.increment()},a.props.interval)))}),sn(hn(a),"clearAutoPlay",function(){a.timer&&clearTimeout(a.timer)}),sn(hn(a),"resetAutoPlay",function(){a.clearAutoPlay(),a.autoPlay()}),sn(hn(a),"stopOnHover",function(){a.setState({isMouseEntered:!0},a.clearAutoPlay)}),sn(hn(a),"startOnLeave",function(){a.setState({isMouseEntered:!1},a.autoPlay)}),sn(hn(a),"isFocusWithinTheCarousel",function(){return a.carouselWrapperRef?!!((0,Py.default)().activeElement===a.carouselWrapperRef||a.carouselWrapperRef.contains((0,Py.default)().activeElement)):!1}),sn(hn(a),"navigateWithKeyboard",function(d){if(a.isFocusWithinTheCarousel()){var u=a.props.axis,b=u==="horizontal",w={ArrowUp:38,ArrowRight:39,ArrowDown:40,ArrowLeft:37},I=b?w.ArrowRight:w.ArrowDown,k=b?w.ArrowLeft:w.ArrowUp;I===d.keyCode?a.increment():k===d.keyCode&&a.decrement()}}),sn(hn(a),"updateSizes",function(){if(!(!a.state.initialized||!a.itemsRef||a.itemsRef.length===0)){var d=a.props.axis==="horizontal",u=a.itemsRef[0];if(u){var b=d?u.clientWidth:u.clientHeight;a.setState({itemSize:b}),a.thumbsRef&&a.thumbsRef.updateSizes()}}}),sn(hn(a),"setMountState",function(){a.setState({hasMount:!0}),a.updateSizes()}),sn(hn(a),"handleClickItem",function(d,u){if(qn.Children.count(a.props.children)!==0){if(a.state.cancelClick){a.setState({cancelClick:!1});return}a.props.onClickItem(d,u),d!==a.state.selectedItem&&a.setState({selectedItem:d})}}),sn(hn(a),"handleOnChange",function(d,u){qn.Children.count(a.props.children)<=1||a.props.onChange(d,u)}),sn(hn(a),"handleClickThumb",function(d,u){a.props.onClickThumb(d,u),a.moveTo(d)}),sn(hn(a),"onSwipeStart",function(d){a.setState({swiping:!0}),a.props.onSwipeStart(d)}),sn(hn(a),"onSwipeEnd",function(d){a.setState({swiping:!1,cancelClick:!1,swipeMovementStarted:!1}),a.props.onSwipeEnd(d),a.clearAutoPlay(),a.state.autoPlay&&a.autoPlay()}),sn(hn(a),"onSwipeMove",function(d,u){a.props.onSwipeMove(u);var b=a.props.swipeAnimationHandler(d,a.props,a.state,a.setState.bind(hn(a)));return a.setState(Na({},b)),!!Object.keys(b).length}),sn(hn(a),"decrement",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;a.moveTo(a.state.selectedItem-(typeof d=="number"?d:1))}),sn(hn(a),"increment",function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;a.moveTo(a.state.selectedItem+(typeof d=="number"?d:1))}),sn(hn(a),"moveTo",function(d){if(typeof d=="number"){var u=qn.Children.count(a.props.children)-1;d<0&&(d=a.props.infiniteLoop?u:0),d>u&&(d=a.props.infiniteLoop?0:u),a.selectItem({selectedItem:d}),a.state.autoPlay&&a.state.isMouseEntered===!1&&a.resetAutoPlay()}}),sn(hn(a),"onClickNext",function(){a.increment(1)}),sn(hn(a),"onClickPrev",function(){a.decrement(1)}),sn(hn(a),"onSwipeForward",function(){a.increment(1),a.props.emulateTouch&&a.setState({cancelClick:!0})}),sn(hn(a),"onSwipeBackwards",function(){a.decrement(1),a.props.emulateTouch&&a.setState({cancelClick:!0})}),sn(hn(a),"changeItem",function(d){return function(u){(!(0,Pf.isKeyboardEvent)(u)||u.key==="Enter")&&a.moveTo(d)}}),sn(hn(a),"selectItem",function(d){a.setState(Na({previousItem:a.state.selectedItem},d),function(){a.setState(a.animationHandler(a.props,a.state))}),a.handleOnChange(d.selectedItem,qn.Children.toArray(a.props.children)[d.selectedItem])}),sn(hn(a),"getInitialImage",function(){var d=a.props.selectedItem,u=a.itemsRef&&a.itemsRef[d],b=u&&u.getElementsByTagName("img")||[];return b[0]}),sn(hn(a),"getVariableItemHeight",function(d){var u=a.itemsRef&&a.itemsRef[d];if(a.state.hasMount&&u&&u.children.length){var b=u.children[0].getElementsByTagName("img")||[];if(b.length>0){var w=b[0];if(!w.complete){var I=function R(){a.forceUpdate(),w.removeEventListener("load",R)};w.addEventListener("load",I)}}var k=b[0]||u.children[0],P=k.clientHeight;return P>0?P:null}return null});var c={initialized:!1,previousItem:i.selectedItem,selectedItem:i.selectedItem,hasMount:!1,isMouseEntered:!1,autoPlay:i.autoPlay,swiping:!1,swipeMovementStarted:!1,cancelClick:!1,itemSize:1,itemListStyle:{},slideStyle:{},selectedStyle:{},prevStyle:{}};return a.animationHandler=typeof i.animationHandler=="function"&&i.animationHandler||i.animationHandler==="fade"&&J0.fadeAnimationHandler||J0.slideAnimationHandler,a.state=Na(Na({},c),a.animationHandler(i,c)),a}return RH(n,[{key:"componentDidMount",value:function(){this.props.children&&this.setupCarousel()}},{key:"componentDidUpdate",value:function(a,c){!a.children&&this.props.children&&!this.state.initialized&&this.setupCarousel(),!a.autoFocus&&this.props.autoFocus&&this.forceFocus(),c.swiping&&!this.state.swiping&&this.setState(Na({},this.props.stopSwipingHandler(this.props,this.state))),(a.selectedItem!==this.props.selectedItem||a.centerMode!==this.props.centerMode)&&(this.updateSizes(),this.moveTo(this.props.selectedItem)),a.autoPlay!==this.props.autoPlay&&(this.props.autoPlay?this.setupAutoPlay():this.destroyAutoPlay(),this.setState({autoPlay:this.props.autoPlay}))}},{key:"componentWillUnmount",value:function(){this.destroyCarousel()}},{key:"setupCarousel",value:function(){var a=this;this.bindEvents(),this.state.autoPlay&&qn.Children.count(this.props.children)>1&&this.setupAutoPlay(),this.props.autoFocus&&this.forceFocus(),this.setState({initialized:!0},function(){var c=a.getInitialImage();c&&!c.complete?c.addEventListener("load",a.setMountState):a.setMountState()})}},{key:"destroyCarousel",value:function(){this.state.initialized&&(this.unbindEvents(),this.destroyAutoPlay())}},{key:"setupAutoPlay",value:function(){this.autoPlay();var a=this.carouselWrapperRef;this.props.stopOnHover&&a&&(a.addEventListener("mouseenter",this.stopOnHover),a.addEventListener("mouseleave",this.startOnLeave))}},{key:"destroyAutoPlay",value:function(){this.clearAutoPlay();var a=this.carouselWrapperRef;this.props.stopOnHover&&a&&(a.removeEventListener("mouseenter",this.stopOnHover),a.removeEventListener("mouseleave",this.startOnLeave))}},{key:"bindEvents",value:function(){(0,My.default)().addEventListener("resize",this.updateSizes),(0,My.default)().addEventListener("DOMContentLoaded",this.updateSizes),this.props.useKeyboardArrows&&(0,Py.default)().addEventListener("keydown",this.navigateWithKeyboard)}},{key:"unbindEvents",value:function(){(0,My.default)().removeEventListener("resize",this.updateSizes),(0,My.default)().removeEventListener("DOMContentLoaded",this.updateSizes);var a=this.getInitialImage();a&&a.removeEventListener("load",this.setMountState),this.props.useKeyboardArrows&&(0,Py.default)().removeEventListener("keydown",this.navigateWithKeyboard)}},{key:"forceFocus",value:function(){var a;(a=this.carouselWrapperRef)===null||a===void 0||a.focus()}},{key:"renderItems",value:function(a){var c=this;return this.props.children?qn.Children.map(this.props.children,function(d,u){var b=u===c.state.selectedItem,w=u===c.state.previousItem,I=b&&c.state.selectedStyle||w&&c.state.prevStyle||c.state.slideStyle||{};c.props.centerMode&&c.props.axis==="horizontal"&&(I=Na(Na({},I),{},{minWidth:c.props.centerSlidePercentage+"%"})),c.state.swiping&&c.state.swipeMovementStarted&&(I=Na(Na({},I),{},{pointerEvents:"none"}));var k={ref:function(R){return c.setItemsRef(R,u)},key:"itemKey"+u+(a?"clone":""),className:Ks.default.ITEM(!0,u===c.state.selectedItem,u===c.state.previousItem),onClick:c.handleClickItem.bind(c,u,d),style:I};return qn.default.createElement("li",k,c.props.renderItem(d,{isSelected:u===c.state.selectedItem,isPrevious:u===c.state.previousItem}))}):[]}},{key:"renderControls",value:function(){var a=this,c=this.props,d=c.showIndicators,u=c.labels,b=c.renderIndicator,w=c.children;return d?qn.default.createElement("ul",{className:"control-dots"},qn.Children.map(w,function(I,k){return b&&b(a.changeItem(k),k===a.state.selectedItem,k,u.item)})):null}},{key:"renderStatus",value:function(){return this.props.showStatus?qn.default.createElement("p",{className:"carousel-status"},this.props.statusFormatter(this.state.selectedItem+1,qn.Children.count(this.props.children))):null}},{key:"renderThumbs",value:function(){return!this.props.showThumbs||!this.props.children||qn.Children.count(this.props.children)===0?null:qn.default.createElement(MH.default,{ref:this.setThumbsRef,onSelectItem:this.handleClickThumb,selectedItem:this.state.selectedItem,transitionTime:this.props.transitionTime,thumbWidth:this.props.thumbWidth,labels:this.props.labels,emulateTouch:this.props.emulateTouch},this.props.renderThumbs(this.props.children))}},{key:"render",value:function(){var a=this;if(!this.props.children||qn.Children.count(this.props.children)===0)return null;var c=this.props.swipeable&&qn.Children.count(this.props.children)>1,d=this.props.axis==="horizontal",u=this.props.showArrows&&qn.Children.count(this.props.children)>1,b=u&&(this.state.selectedItem>0||this.props.infiniteLoop)||!1,w=u&&(this.state.selectedItem<qn.Children.count(this.props.children)-1||this.props.infiniteLoop)||!1,I=this.renderItems(!0),k=I.shift(),P=I.pop(),R={className:Ks.default.SLIDER(!0,this.state.swiping),onSwipeMove:this.onSwipeMove,onSwipeStart:this.onSwipeStart,onSwipeEnd:this.onSwipeEnd,style:this.state.itemListStyle,tolerance:this.props.swipeScrollTolerance},N={};if(d){if(R.onSwipeLeft=this.onSwipeForward,R.onSwipeRight=this.onSwipeBackwards,this.props.dynamicHeight){var V=this.getVariableItemHeight(this.state.selectedItem);N.height=V||"auto"}}else R.onSwipeUp=this.props.verticalSwipe==="natural"?this.onSwipeBackwards:this.onSwipeForward,R.onSwipeDown=this.props.verticalSwipe==="natural"?this.onSwipeForward:this.onSwipeBackwards,R.style=Na(Na({},R.style),{},{height:this.state.itemSize}),N.height=this.state.itemSize;return qn.default.createElement("div",{"aria-label":this.props.ariaLabel,className:Ks.default.ROOT(this.props.className),ref:this.setCarouselWrapperRef,tabIndex:this.props.useKeyboardArrows?0:void 0},qn.default.createElement("div",{className:Ks.default.CAROUSEL(!0),style:{width:this.props.width}},this.renderControls(),this.props.renderArrowPrev(this.onClickPrev,b,this.props.labels.leftArrow),qn.default.createElement("div",{className:Ks.default.WRAPPER(!0,this.props.axis),style:N},c?qn.default.createElement(PH.default,yw({tagName:"ul",innerRef:this.setListRef},R,{allowMouseEvents:this.props.emulateTouch}),this.props.infiniteLoop&&P,this.renderItems(),this.props.infiniteLoop&&k):qn.default.createElement("ul",{className:Ks.default.SLIDER(!0,this.state.swiping),ref:function(D){return a.setListRef(D)},style:this.state.itemListStyle||{}},this.props.infiniteLoop&&P,this.renderItems(),this.props.infiniteLoop&&k)),this.props.renderArrowNext(this.onClickNext,w,this.props.labels.rightArrow),this.renderStatus()),this.renderThumbs())}}]),n}(qn.default.Component);g1.default=mS;sn(mS,"displayName","Carousel");sn(mS,"defaultProps",{ariaLabel:void 0,axis:"horizontal",centerSlidePercentage:80,interval:3e3,labels:{leftArrow:"previous slide / item",rightArrow:"next slide / item",item:"slide item"},onClickItem:Pf.noop,onClickThumb:Pf.noop,onChange:Pf.noop,onSwipeStart:function(){},onSwipeEnd:function(){},onSwipeMove:function(){return!1},preventMovementUntilSwipeScrollTolerance:!1,renderArrowPrev:function(t,n,i){return qn.default.createElement("button",{type:"button","aria-label":i,className:Ks.default.ARROW_PREV(!n),onClick:t})},renderArrowNext:function(t,n,i){return qn.default.createElement("button",{type:"button","aria-label":i,className:Ks.default.ARROW_NEXT(!n),onClick:t})},renderIndicator:function(t,n,i,a){return qn.default.createElement("li",{className:Ks.default.DOT(n),onClick:t,onKeyDown:t,value:i,key:i,role:"button",tabIndex:0,"aria-label":"".concat(a," ").concat(i+1)})},renderItem:function(t){return t},renderThumbs:function(t){var n=qn.Children.map(t,function(i){var a=i;if(i.type!=="img"&&(a=qn.Children.toArray(i.props.children).find(function(c){return c.type==="img"})),!!a)return a});return n.filter(function(i){return i}).length===0?(console.warn("No images found! Can't build the thumb list without images. If you don't need thumbs, set showThumbs={false} in the Carousel. Note that it's not possible to get images rendered inside custom components. More info at https://github.com/leandrowd/react-responsive-carousel/blob/master/TROUBLESHOOTING.md"),[]):n},statusFormatter:Pf.defaultStatusFormatter,selectedItem:0,showArrows:!0,showIndicators:!0,showStatus:!0,showThumbs:!0,stopOnHover:!0,swipeScrollTolerance:5,swipeable:!0,transitionTime:350,verticalSwipe:"standard",width:"100%",animationHandler:"slide",swipeAnimationHandler:J0.slideSwipeAnimationHandler,stopSwipingHandler:J0.slideStopSwipingHandler});var BH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Carousel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"CarouselProps",{enumerable:!0,get:function(){return n.CarouselProps}}),Object.defineProperty(e,"Thumbs",{enumerable:!0,get:function(){return i.default}});var t=a(g1),n=BH,i=a(Gm);function a(c){return c&&c.__esModule?c:{default:c}}})(C4);const P4=({store:e,onBack:t})=>be.jsxs(be.Fragment,{children:[be.jsxs(tW,{variant:"extended",onClick:t,sx:{bgcolor:"#777AA9",color:"#ffffff"},children:[be.jsx(Wq,{sx:{mr:1}}),"Back to List"]}),be.jsx(vd,{sx:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",pt:2},children:be.jsxs(h1,{sx:{width:"100%",maxWidth:800,padding:3,borderRadius:2,boxShadow:3,backgroundColor:"#ffffff"},children:[be.jsx(xa,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold",color:"#333",textAlign:"left",mb:2},children:e.name}),e.images&&e.images.length>0&&be.jsx(vd,{sx:{mb:3},children:be.jsx(C4.Carousel,{showThumbs:!1,infiniteLoop:!0,autoPlay:!0,children:e.images.map((n,i)=>be.jsx("div",{children:be.jsx("img",{src:n,alt:`Store Image ${i+1}`,style:{borderRadius:"8px",maxHeight:"300px",objectFit:"cover",width:"100%"}})},i))})}),be.jsxs(vd,{sx:{textAlign:"left",mb:3},children:[be.jsxs(xa,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left",mb:1},children:[be.jsx(qq,{sx:{mr:1,color:"#2196f3"}})," ",e.location]}),e.phone&&be.jsxs(xa,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left",mb:1},children:[be.jsx(Hq,{sx:{mr:1,color:"#2196f3"}})," ",e.phone]}),e.hours&&be.jsxs(xa,{variant:"subtitle1",sx:{display:"flex",justifyContent:"left"},children:[be.jsx(Gq,{sx:{mr:1,color:"#2196f3"}})," ",e.hours]})]}),e.description&&be.jsx(xa,{variant:"body1",sx:{fontStyle:"italic",color:"#666",mb:4,textAlign:"left"},children:e.description})]})})]});P4.propTypes={store:qs.shape({name:qs.string.isRequired,location:qs.string.isRequired,phone:qs.string,hours:qs.string,description:qs.string,images:qs.arrayOf(qs.string)}).isRequired,onBack:qs.func};const NH=ra([be.jsx("path",{d:"M21 9.02c0 1.09-.89 1.98-1.98 1.98H4.98C3.89 11 3 10.11 3 9.02H1c0 1.86 1.28 3.4 3 3.84V22h6v-3c0-1.1.9-2 2-2s2 .9 2 2v3h6v-9.14c.55-.14 3-1.04 3-3.86z"},"0"),be.jsx("path",{d:"M6 8.86V10h12V8.86c.55-.14 3-1.04 3-3.86l-2 .02C19 6.11 18.11 7 17.02 7H6.98C5.89 7 5 6.11 5 5.02H3c0 1.85 1.28 3.4 3 3.84"},"1"),be.jsx("path",{d:"M12 1 8.25 6h7.5z"},"2")],"TempleBuddhist"),jH=ra(be.jsx("path",{d:"M19.56 11.36 13 8.44V7c0-.55-.45-1-1-1s-1-.45-1-1 .45-1 1-1 1 .45 1 1h2c0-1.84-1.66-3.3-3.56-2.95-1.18.22-2.15 1.17-2.38 2.35-.3 1.56.6 2.94 1.94 3.42v.63l-6.56 2.92c-.88.38-1.44 1.25-1.44 2.2v.01C3 14.92 4.08 16 5.42 16H7v6h10v-6h1.58c1.34 0 2.42-1.08 2.42-2.42v-.01c0-.95-.56-1.82-1.44-2.21M18.58 14H17v-1H7v1H5.42c-.23 0-.42-.19-.42-.43 0-.17.1-.32.25-.38l6.75-3 6.75 3c.15.07.25.22.25.39 0 .23-.19.42-.42.42"}),"DryCleaning"),UH=ra(be.jsx("path",{d:"M3 14c0 1.3.84 2.4 2 2.82V20H3v2h6v-2H7v-3.18C8.16 16.4 9 15.3 9 14V6H3zm2-6h2v3H5zm15.63.54-.95-.32c-.4-.13-.68-.51-.68-.94V3c0-.55-.45-1-1-1h-3c-.55 0-1 .45-1 1v4.28c0 .43-.28.81-.68.95l-.95.32c-.82.27-1.37 1.03-1.37 1.89V20c0 1.1.9 2 2 2h7c1.1 0 2-.9 2-2v-9.56c0-.86-.55-1.62-1.37-1.9M16 4h1v1h-1zm-3 6.44.95-.32C15.18 9.72 16 8.57 16 7.28V7h1v.28c0 1.29.82 2.44 2.05 2.85l.95.31V12h-7zM20 20h-7v-2h7z"}),"Liquor"),V5=ra(be.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3m-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05"}),"FavoriteBorder"),VH=()=>{const e=[{id:1,name:"Traditional Tea Sets Anzuri",location:"123 Shibuya, Tokyo",description:"Authentic Japanese tea sets",phone:"+12 345 343 44 15",icon:be.jsx(NH,{})},{id:2,name:"Tokyo Souvenir Mimoto",location:"456 Akihabara, Tokyo",description:"Best souvenirs in Tokyo",icon:be.jsx(F5,{})},{id:3,name:"HIto Dress",location:"53 Akihabara, Tokyo",description:"Beautiful traditional kimonos",icon:be.jsx(jH,{}),image:"https://lh5.googleusercontent.com/p/AF1QipOZ44YegxvN8SVFkN06gamqPNzFPmEu2as4HpA=w171-h171-n-k-no",image2:"https://lh5.googleusercontent.com/p/AF1QipOZ44YegxvN8SVFkN06gamqPNzFPmEu2as4HpA=w171-h171-n-k-no"}],t=[{id:4,name:"HSLU Merch",location:"1 Surstoffi, Rotkreuz",description:"High-quality samurai swords",icon:be.jsx(F5,{})},{id:5,name:"Sake Store Fujiwara",location:"101 Asakusa, Tokyo",description:"Best Sake in the world",icon:be.jsx(UH,{})}],[n,i]=ie.useState(null),a=u=>{i(u)},c=()=>{i(null)},d=u=>be.jsxs(wV,{sx:{display:"flex",width:"100%",alignItems:"center",bgcolor:"#778DA9",color:"white",borderRadius:"20px",mb:1,p:2,cursor:"pointer","&:hover":{boxShadow:10}},onClick:()=>a(u),children:[be.jsx(p4,{sx:{bgcolor:"#374151",width:56,height:56,mr:2},children:u.icon}),be.jsxs(EV,{children:[be.jsx(xa,{variant:"h6",component:"div",sx:{fontWeight:"bold"},children:u.name}),be.jsx(xa,{variant:"body2",color:"withe",children:u.location}),be.jsx(xa,{variant:"body2",color:"withe",children:u.description})]})]},u.id);return be.jsx(vd,{sx:{p:3},children:n?be.jsx(P4,{store:n,onBack:c}):be.jsxs(be.Fragment,{children:[be.jsx(xa,{variant:"h5",sx:{textAlign:"center",mb:3,fontWeight:"bold",bgcolor:"#777AA9",color:"white",borderRadius:"20px"},children:"Liked Souvenir"}),be.jsx(v5,{icon:be.jsx(V5,{}),label:"Liked by You!",sx:{mb:3,fontWeight:"bold",fontSize:"14px"},color:"success"}),be.jsx(I5,{container:!0,spacing:2,children:e.map(d)}),be.jsx(v5,{icon:be.jsx(V5,{}),label:"Liked by yor friends!",sx:{mb:3,mt:3,fontWeight:"bold",fontSize:"14px"},color:"info",variant:"outlined"}),be.jsx(I5,{container:!0,spacing:2,children:t.map(d)})]})})};function WH(){const e=g2();return be.jsxs(be.Fragment,{children:[be.jsxs(BD,{children:[be.jsx(Sf,{path:"foundhere/",element:be.jsx(Mq,{})}),be.jsx(Sf,{path:"/map",element:be.jsx(uN,{})}),be.jsx(Sf,{path:"/profile",element:be.jsx(Lq,{})}),be.jsx(Sf,{path:"/liked",element:be.jsx(VH,{})})]}),e.pathname!=="/foundhere/"&&be.jsx(Vq,{})]})}Rx.createRoot(document.getElementById("root")).render(be.jsx(yi.StrictMode,{children:be.jsx(UD,{children:be.jsx(WH,{})})}));
