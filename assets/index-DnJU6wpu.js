var SL=Object.defineProperty;var CL=(e,t,n)=>t in e?SL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Rp=(e,t,n)=>CL(e,typeof t!="symbol"?t+"":t,n);function ZE(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in e)){const h=Object.getOwnPropertyDescriptor(o,a);h&&Object.defineProperty(e,a,h.get?h:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const h of a)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const h={};return a.integrity&&(h.integrity=a.integrity),a.referrerPolicy&&(h.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?h.credentials="include":a.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(a){if(a.ep)return;a.ep=!0;const h=n(a);fetch(a.href,h)}})();var kL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var KE={exports:{}},E0={},XE={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hm=Symbol.for("react.element"),TL=Symbol.for("react.portal"),EL=Symbol.for("react.fragment"),IL=Symbol.for("react.strict_mode"),PL=Symbol.for("react.profiler"),ML=Symbol.for("react.provider"),AL=Symbol.for("react.context"),LL=Symbol.for("react.forward_ref"),zL=Symbol.for("react.suspense"),RL=Symbol.for("react.memo"),DL=Symbol.for("react.lazy"),cC=Symbol.iterator;function $L(e){return e===null||typeof e!="object"?null:(e=cC&&e[cC]||e["@@iterator"],typeof e=="function"?e:null)}var YE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JE=Object.assign,QE={};function pd(e,t,n){this.props=e,this.context=t,this.refs=QE,this.updater=n||YE}pd.prototype.isReactComponent={};pd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};pd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function e5(){}e5.prototype=pd.prototype;function zb(e,t,n){this.props=e,this.context=t,this.refs=QE,this.updater=n||YE}var Rb=zb.prototype=new e5;Rb.constructor=zb;JE(Rb,pd.prototype);Rb.isPureReactComponent=!0;var hC=Array.isArray,t5=Object.prototype.hasOwnProperty,Db={current:null},n5={key:!0,ref:!0,__self:!0,__source:!0};function r5(e,t,n){var o,a={},h=null,d=null;if(t!=null)for(o in t.ref!==void 0&&(d=t.ref),t.key!==void 0&&(h=""+t.key),t)t5.call(t,o)&&!n5.hasOwnProperty(o)&&(a[o]=t[o]);var u=arguments.length-2;if(u===1)a.children=n;else if(1<u){for(var b=Array(u),w=0;w<u;w++)b[w]=arguments[w+2];a.children=b}if(e&&e.defaultProps)for(o in u=e.defaultProps,u)a[o]===void 0&&(a[o]=u[o]);return{$$typeof:hm,type:e,key:h,ref:d,props:a,_owner:Db.current}}function OL(e,t){return{$$typeof:hm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function $b(e){return typeof e=="object"&&e!==null&&e.$$typeof===hm}function BL(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var dC=/\/+/g;function r_(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BL(""+e.key):t.toString(36)}function oy(e,t,n,o,a){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var d=!1;if(e===null)d=!0;else switch(h){case"string":case"number":d=!0;break;case"object":switch(e.$$typeof){case hm:case TL:d=!0}}if(d)return d=e,a=a(d),e=o===""?"."+r_(d,0):o,hC(a)?(n="",e!=null&&(n=e.replace(dC,"$&/")+"/"),oy(a,t,n,"",function(w){return w})):a!=null&&($b(a)&&(a=OL(a,n+(!a.key||d&&d.key===a.key?"":(""+a.key).replace(dC,"$&/")+"/")+e)),t.push(a)),1;if(d=0,o=o===""?".":o+":",hC(e))for(var u=0;u<e.length;u++){h=e[u];var b=o+r_(h,u);d+=oy(h,t,n,b,a)}else if(b=$L(e),typeof b=="function")for(e=b.call(e),u=0;!(h=e.next()).done;)h=h.value,b=o+r_(h,u++),d+=oy(h,t,n,b,a);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return d}function Ig(e,t,n){if(e==null)return e;var o=[],a=0;return oy(e,o,"","",function(h){return t.call(n,h,a++)}),o}function FL(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ro={current:null},sy={transition:null},NL={ReactCurrentDispatcher:ro,ReactCurrentBatchConfig:sy,ReactCurrentOwner:Db};function i5(){throw Error("act(...) is not supported in production builds of React.")}dn.Children={map:Ig,forEach:function(e,t,n){Ig(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ig(e,function(){t++}),t},toArray:function(e){return Ig(e,function(t){return t})||[]},only:function(e){if(!$b(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};dn.Component=pd;dn.Fragment=EL;dn.Profiler=PL;dn.PureComponent=zb;dn.StrictMode=IL;dn.Suspense=zL;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NL;dn.act=i5;dn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=JE({},e.props),a=e.key,h=e.ref,d=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,d=Db.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(b in t)t5.call(t,b)&&!n5.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&u!==void 0?u[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=n;else if(1<b){u=Array(b);for(var w=0;w<b;w++)u[w]=arguments[w+2];o.children=u}return{$$typeof:hm,type:e.type,key:a,ref:h,props:o,_owner:d}};dn.createContext=function(e){return e={$$typeof:AL,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ML,_context:e},e.Consumer=e};dn.createElement=r5;dn.createFactory=function(e){var t=r5.bind(null,e);return t.type=e,t};dn.createRef=function(){return{current:null}};dn.forwardRef=function(e){return{$$typeof:LL,render:e}};dn.isValidElement=$b;dn.lazy=function(e){return{$$typeof:DL,_payload:{_status:-1,_result:e},_init:FL}};dn.memo=function(e,t){return{$$typeof:RL,type:e,compare:t===void 0?null:t}};dn.startTransition=function(e){var t=sy.transition;sy.transition={};try{e()}finally{sy.transition=t}};dn.unstable_act=i5;dn.useCallback=function(e,t){return ro.current.useCallback(e,t)};dn.useContext=function(e){return ro.current.useContext(e)};dn.useDebugValue=function(){};dn.useDeferredValue=function(e){return ro.current.useDeferredValue(e)};dn.useEffect=function(e,t){return ro.current.useEffect(e,t)};dn.useId=function(){return ro.current.useId()};dn.useImperativeHandle=function(e,t,n){return ro.current.useImperativeHandle(e,t,n)};dn.useInsertionEffect=function(e,t){return ro.current.useInsertionEffect(e,t)};dn.useLayoutEffect=function(e,t){return ro.current.useLayoutEffect(e,t)};dn.useMemo=function(e,t){return ro.current.useMemo(e,t)};dn.useReducer=function(e,t,n){return ro.current.useReducer(e,t,n)};dn.useRef=function(e){return ro.current.useRef(e)};dn.useState=function(e){return ro.current.useState(e)};dn.useSyncExternalStore=function(e,t,n){return ro.current.useSyncExternalStore(e,t,n)};dn.useTransition=function(){return ro.current.useTransition()};dn.version="18.3.1";XE.exports=dn;var re=XE.exports;const di=cm(re),Ly=ZE({__proto__:null,default:di},[re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL=re,UL=Symbol.for("react.element"),VL=Symbol.for("react.fragment"),WL=Object.prototype.hasOwnProperty,qL=jL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GL={key:!0,ref:!0,__self:!0,__source:!0};function o5(e,t,n){var o,a={},h=null,d=null;n!==void 0&&(h=""+n),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(d=t.ref);for(o in t)WL.call(t,o)&&!GL.hasOwnProperty(o)&&(a[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)a[o]===void 0&&(a[o]=t[o]);return{$$typeof:UL,type:e,key:h,ref:d,props:a,_owner:qL.current}}E0.Fragment=VL;E0.jsx=o5;E0.jsxs=o5;KE.exports=E0;var Ie=KE.exports,ex={},s5={exports:{}},Ho={},a5={exports:{}},l5={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Be,Ye){var pt=Be.length;Be.push(Ye);e:for(;0<pt;){var St=pt-1>>>1,At=Be[St];if(0<a(At,Ye))Be[St]=Ye,Be[pt]=At,pt=St;else break e}}function n(Be){return Be.length===0?null:Be[0]}function o(Be){if(Be.length===0)return null;var Ye=Be[0],pt=Be.pop();if(pt!==Ye){Be[0]=pt;e:for(var St=0,At=Be.length,Nt=At>>>1;St<Nt;){var Lt=2*(St+1)-1,Zt=Be[Lt],un=Lt+1,en=Be[un];if(0>a(Zt,pt))un<At&&0>a(en,Zt)?(Be[St]=en,Be[un]=pt,St=un):(Be[St]=Zt,Be[Lt]=pt,St=Lt);else if(un<At&&0>a(en,pt))Be[St]=en,Be[un]=pt,St=un;else break e}}return Ye}function a(Be,Ye){var pt=Be.sortIndex-Ye.sortIndex;return pt!==0?pt:Be.id-Ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var b=[],w=[],P=1,E=null,I=3,R=!1,F=!1,U=!1,K=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Be){for(var Ye=n(w);Ye!==null;){if(Ye.callback===null)o(w);else if(Ye.startTime<=Be)o(w),Ye.sortIndex=Ye.expirationTime,t(b,Ye);else break;Ye=n(w)}}function Y(Be){if(U=!1,V(Be),!F)if(n(b)!==null)F=!0,We(ce);else{var Ye=n(w);Ye!==null&&ut(Y,Ye.startTime-Be)}}function ce(Be,Ye){F=!1,U&&(U=!1,D(ge),ge=-1),R=!0;var pt=I;try{for(V(Ye),E=n(b);E!==null&&(!(E.expirationTime>Ye)||Be&&!Ee());){var St=E.callback;if(typeof St=="function"){E.callback=null,I=E.priorityLevel;var At=St(E.expirationTime<=Ye);Ye=e.unstable_now(),typeof At=="function"?E.callback=At:E===n(b)&&o(b),V(Ye)}else o(b);E=n(b)}if(E!==null)var Nt=!0;else{var Lt=n(w);Lt!==null&&ut(Y,Lt.startTime-Ye),Nt=!1}return Nt}finally{E=null,I=pt,R=!1}}var de=!1,le=null,ge=-1,Ae=5,H=-1;function Ee(){return!(e.unstable_now()-H<Ae)}function je(){if(le!==null){var Be=e.unstable_now();H=Be;var Ye=!0;try{Ye=le(!0,Be)}finally{Ye?$e():(de=!1,le=null)}}else de=!1}var $e;if(typeof j=="function")$e=function(){j(je)};else if(typeof MessageChannel<"u"){var Le=new MessageChannel,De=Le.port2;Le.port1.onmessage=je,$e=function(){De.postMessage(null)}}else $e=function(){K(je,0)};function We(Be){le=Be,de||(de=!0,$e())}function ut(Be,Ye){ge=K(function(){Be(e.unstable_now())},Ye)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Be){Be.callback=null},e.unstable_continueExecution=function(){F||R||(F=!0,We(ce))},e.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<Be?Math.floor(1e3/Be):5},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return n(b)},e.unstable_next=function(Be){switch(I){case 1:case 2:case 3:var Ye=3;break;default:Ye=I}var pt=I;I=Ye;try{return Be()}finally{I=pt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Be,Ye){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var pt=I;I=Be;try{return Ye()}finally{I=pt}},e.unstable_scheduleCallback=function(Be,Ye,pt){var St=e.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?St+pt:St):pt=St,Be){case 1:var At=-1;break;case 2:At=250;break;case 5:At=1073741823;break;case 4:At=1e4;break;default:At=5e3}return At=pt+At,Be={id:P++,callback:Ye,priorityLevel:Be,startTime:pt,expirationTime:At,sortIndex:-1},pt>St?(Be.sortIndex=pt,t(w,Be),n(b)===null&&Be===n(w)&&(U?(D(ge),ge=-1):U=!0,ut(Y,pt-St))):(Be.sortIndex=At,t(b,Be),F||R||(F=!0,We(ce))),Be},e.unstable_shouldYield=Ee,e.unstable_wrapCallback=function(Be){var Ye=I;return function(){var pt=I;I=Ye;try{return Be.apply(this,arguments)}finally{I=pt}}}})(l5);a5.exports=l5;var HL=a5.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZL=re,Go=HL;function Xe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u5=new Set,If={};function dc(e,t){nd(e,t),nd(e+"Capture",t)}function nd(e,t){for(If[e]=t,e=0;e<t.length;e++)u5.add(t[e])}var Fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tx=Object.prototype.hasOwnProperty,KL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pC={},fC={};function XL(e){return tx.call(fC,e)?!0:tx.call(pC,e)?!1:KL.test(e)?fC[e]=!0:(pC[e]=!0,!1)}function YL(e,t,n,o){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function JL(e,t,n,o){if(t===null||typeof t>"u"||YL(e,t,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function io(e,t,n,o,a,h,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=d}var ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ki[e]=new io(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ki[t]=new io(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ki[e]=new io(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ki[e]=new io(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ki[e]=new io(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ki[e]=new io(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ki[e]=new io(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ki[e]=new io(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ki[e]=new io(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ob=/[\-:]([a-z])/g;function Bb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ob,Bb);ki[t]=new io(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ob,Bb);ki[t]=new io(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ob,Bb);ki[t]=new io(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ki[e]=new io(e,1,!1,e.toLowerCase(),null,!1,!1)});ki.xlinkHref=new io("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ki[e]=new io(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fb(e,t,n,o){var a=ki.hasOwnProperty(t)?ki[t]:null;(a!==null?a.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(JL(t,n,a,o)&&(n=null),o||a===null?XL(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,o=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,o?e.setAttributeNS(o,t,n):e.setAttribute(t,n))))}var Ka=ZL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pg=Symbol.for("react.element"),Ch=Symbol.for("react.portal"),kh=Symbol.for("react.fragment"),Nb=Symbol.for("react.strict_mode"),nx=Symbol.for("react.profiler"),c5=Symbol.for("react.provider"),h5=Symbol.for("react.context"),jb=Symbol.for("react.forward_ref"),rx=Symbol.for("react.suspense"),ix=Symbol.for("react.suspense_list"),Ub=Symbol.for("react.memo"),Ll=Symbol.for("react.lazy"),d5=Symbol.for("react.offscreen"),mC=Symbol.iterator;function Dp(e){return e===null||typeof e!="object"?null:(e=mC&&e[mC]||e["@@iterator"],typeof e=="function"?e:null)}var Er=Object.assign,i_;function tf(e){if(i_===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);i_=t&&t[1]||""}return`
`+i_+e}var o_=!1;function s_(e,t){if(!e||o_)return"";o_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var a=w.stack.split(`
`),h=o.stack.split(`
`),d=a.length-1,u=h.length-1;1<=d&&0<=u&&a[d]!==h[u];)u--;for(;1<=d&&0<=u;d--,u--)if(a[d]!==h[u]){if(d!==1||u!==1)do if(d--,u--,0>u||a[d]!==h[u]){var b=`
`+a[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=u);break}}}finally{o_=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?tf(e):""}function QL(e){switch(e.tag){case 5:return tf(e.type);case 16:return tf("Lazy");case 13:return tf("Suspense");case 19:return tf("SuspenseList");case 0:case 2:case 15:return e=s_(e.type,!1),e;case 11:return e=s_(e.type.render,!1),e;case 1:return e=s_(e.type,!0),e;default:return""}}function ox(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case kh:return"Fragment";case Ch:return"Portal";case nx:return"Profiler";case Nb:return"StrictMode";case rx:return"Suspense";case ix:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case h5:return(e.displayName||"Context")+".Consumer";case c5:return(e._context.displayName||"Context")+".Provider";case jb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ub:return t=e.displayName||null,t!==null?t:ox(e.type)||"Memo";case Ll:t=e._payload,e=e._init;try{return ox(e(t))}catch{}}return null}function ez(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ox(t);case 8:return t===Nb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Xl(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function p5(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function tz(e){var t=p5(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(d){o=""+d,h.call(this,d)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(d){o=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Mg(e){e._valueTracker||(e._valueTracker=tz(e))}function f5(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),o="";return e&&(o=p5(e)?e.checked?"true":"false":e.value),e=o,e!==n?(t.setValue(e),!0):!1}function zy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sx(e,t){var n=t.checked;return Er({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function gC(e,t){var n=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;n=Xl(t.value!=null?t.value:n),e._wrapperState={initialChecked:o,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function m5(e,t){t=t.checked,t!=null&&Fb(e,"checked",t,!1)}function ax(e,t){m5(e,t);var n=Xl(t.value),o=t.type;if(n!=null)o==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?lx(e,t.type,n):t.hasOwnProperty("defaultValue")&&lx(e,t.type,Xl(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function yC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function lx(e,t,n){(t!=="number"||zy(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var nf=Array.isArray;function Fh(e,t,n,o){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&o&&(e[n].defaultSelected=!0)}else{for(n=""+Xl(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,o&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function ux(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Xe(91));return Er({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Xe(92));if(nf(n)){if(1<n.length)throw Error(Xe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Xl(n)}}function g5(e,t){var n=Xl(t.value),o=Xl(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),o!=null&&(e.defaultValue=""+o)}function _C(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function y5(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?y5(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ag,v5=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,o,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,o,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ag=Ag||document.createElement("div"),Ag.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ag.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nz=["Webkit","ms","Moz","O"];Object.keys(hf).forEach(function(e){nz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hf[t]=hf[e]})});function _5(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hf.hasOwnProperty(e)&&hf[e]?(""+t).trim():t+"px"}function x5(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var o=n.indexOf("--")===0,a=_5(n,t[n],o);n==="float"&&(n="cssFloat"),o?e.setProperty(n,a):e[n]=a}}var rz=Er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hx(e,t){if(t){if(rz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Xe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Xe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Xe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Xe(62))}}function dx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var px=null;function Vb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var fx=null,Nh=null,jh=null;function xC(e){if(e=fm(e)){if(typeof fx!="function")throw Error(Xe(280));var t=e.stateNode;t&&(t=L0(t),fx(e.stateNode,e.type,t))}}function b5(e){Nh?jh?jh.push(e):jh=[e]:Nh=e}function w5(){if(Nh){var e=Nh,t=jh;if(jh=Nh=null,xC(e),t)for(e=0;e<t.length;e++)xC(t[e])}}function S5(e,t){return e(t)}function C5(){}var a_=!1;function k5(e,t,n){if(a_)return e(t,n);a_=!0;try{return S5(e,t,n)}finally{a_=!1,(Nh!==null||jh!==null)&&(C5(),w5())}}function Mf(e,t){var n=e.stateNode;if(n===null)return null;var o=L0(n);if(o===null)return null;n=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Xe(231,t,typeof n));return n}var mx=!1;if(Fa)try{var $p={};Object.defineProperty($p,"passive",{get:function(){mx=!0}}),window.addEventListener("test",$p,$p),window.removeEventListener("test",$p,$p)}catch{mx=!1}function iz(e,t,n,o,a,h,d,u,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(n,w)}catch(P){this.onError(P)}}var df=!1,Ry=null,Dy=!1,gx=null,oz={onError:function(e){df=!0,Ry=e}};function sz(e,t,n,o,a,h,d,u,b){df=!1,Ry=null,iz.apply(oz,arguments)}function az(e,t,n,o,a,h,d,u,b){if(sz.apply(this,arguments),df){if(df){var w=Ry;df=!1,Ry=null}else throw Error(Xe(198));Dy||(Dy=!0,gx=w)}}function pc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function T5(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bC(e){if(pc(e)!==e)throw Error(Xe(188))}function lz(e){var t=e.alternate;if(!t){if(t=pc(e),t===null)throw Error(Xe(188));return t!==e?null:e}for(var n=e,o=t;;){var a=n.return;if(a===null)break;var h=a.alternate;if(h===null){if(o=a.return,o!==null){n=o;continue}break}if(a.child===h.child){for(h=a.child;h;){if(h===n)return bC(a),e;if(h===o)return bC(a),t;h=h.sibling}throw Error(Xe(188))}if(n.return!==o.return)n=a,o=h;else{for(var d=!1,u=a.child;u;){if(u===n){d=!0,n=a,o=h;break}if(u===o){d=!0,o=a,n=h;break}u=u.sibling}if(!d){for(u=h.child;u;){if(u===n){d=!0,n=h,o=a;break}if(u===o){d=!0,o=h,n=a;break}u=u.sibling}if(!d)throw Error(Xe(189))}}if(n.alternate!==o)throw Error(Xe(190))}if(n.tag!==3)throw Error(Xe(188));return n.stateNode.current===n?e:t}function E5(e){return e=lz(e),e!==null?I5(e):null}function I5(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=I5(e);if(t!==null)return t;e=e.sibling}return null}var P5=Go.unstable_scheduleCallback,wC=Go.unstable_cancelCallback,uz=Go.unstable_shouldYield,cz=Go.unstable_requestPaint,Fr=Go.unstable_now,hz=Go.unstable_getCurrentPriorityLevel,Wb=Go.unstable_ImmediatePriority,M5=Go.unstable_UserBlockingPriority,$y=Go.unstable_NormalPriority,dz=Go.unstable_LowPriority,A5=Go.unstable_IdlePriority,I0=null,oa=null;function pz(e){if(oa&&typeof oa.onCommitFiberRoot=="function")try{oa.onCommitFiberRoot(I0,e,void 0,(e.current.flags&128)===128)}catch{}}var Ds=Math.clz32?Math.clz32:gz,fz=Math.log,mz=Math.LN2;function gz(e){return e>>>=0,e===0?32:31-(fz(e)/mz|0)|0}var Lg=64,zg=4194304;function rf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oy(e,t){var n=e.pendingLanes;if(n===0)return 0;var o=0,a=e.suspendedLanes,h=e.pingedLanes,d=n&268435455;if(d!==0){var u=d&~a;u!==0?o=rf(u):(h&=d,h!==0&&(o=rf(h)))}else d=n&~a,d!==0?o=rf(d):h!==0&&(o=rf(h));if(o===0)return 0;if(t!==0&&t!==o&&!(t&a)&&(a=o&-o,h=t&-t,a>=h||a===16&&(h&4194240)!==0))return t;if(o&4&&(o|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)n=31-Ds(t),a=1<<n,o|=e[n],t&=~a;return o}function yz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vz(e,t){for(var n=e.suspendedLanes,o=e.pingedLanes,a=e.expirationTimes,h=e.pendingLanes;0<h;){var d=31-Ds(h),u=1<<d,b=a[d];b===-1?(!(u&n)||u&o)&&(a[d]=yz(u,t)):b<=t&&(e.expiredLanes|=u),h&=~u}}function yx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L5(){var e=Lg;return Lg<<=1,!(Lg&4194240)&&(Lg=64),e}function l_(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function dm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ds(t),e[t]=n}function _z(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ds(n),h=1<<a;t[a]=0,o[a]=-1,e[a]=-1,n&=~h}}function qb(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var o=31-Ds(n),a=1<<o;a&t|e[o]&t&&(e[o]|=t),n&=~a}}var Un=0;function z5(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var R5,Gb,D5,$5,O5,vx=!1,Rg=[],jl=null,Ul=null,Vl=null,Af=new Map,Lf=new Map,Rl=[],xz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SC(e,t){switch(e){case"focusin":case"focusout":jl=null;break;case"dragenter":case"dragleave":Ul=null;break;case"mouseover":case"mouseout":Vl=null;break;case"pointerover":case"pointerout":Af.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lf.delete(t.pointerId)}}function Op(e,t,n,o,a,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:o,nativeEvent:h,targetContainers:[a]},t!==null&&(t=fm(t),t!==null&&Gb(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function bz(e,t,n,o,a){switch(t){case"focusin":return jl=Op(jl,e,t,n,o,a),!0;case"dragenter":return Ul=Op(Ul,e,t,n,o,a),!0;case"mouseover":return Vl=Op(Vl,e,t,n,o,a),!0;case"pointerover":var h=a.pointerId;return Af.set(h,Op(Af.get(h)||null,e,t,n,o,a)),!0;case"gotpointercapture":return h=a.pointerId,Lf.set(h,Op(Lf.get(h)||null,e,t,n,o,a)),!0}return!1}function B5(e){var t=Vu(e.target);if(t!==null){var n=pc(t);if(n!==null){if(t=n.tag,t===13){if(t=T5(n),t!==null){e.blockedOn=t,O5(e.priority,function(){D5(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ay(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=_x(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var o=new n.constructor(n.type,n);px=o,n.target.dispatchEvent(o),px=null}else return t=fm(n),t!==null&&Gb(t),e.blockedOn=n,!1;t.shift()}return!0}function CC(e,t,n){ay(e)&&n.delete(t)}function wz(){vx=!1,jl!==null&&ay(jl)&&(jl=null),Ul!==null&&ay(Ul)&&(Ul=null),Vl!==null&&ay(Vl)&&(Vl=null),Af.forEach(CC),Lf.forEach(CC)}function Bp(e,t){e.blockedOn===t&&(e.blockedOn=null,vx||(vx=!0,Go.unstable_scheduleCallback(Go.unstable_NormalPriority,wz)))}function zf(e){function t(a){return Bp(a,e)}if(0<Rg.length){Bp(Rg[0],e);for(var n=1;n<Rg.length;n++){var o=Rg[n];o.blockedOn===e&&(o.blockedOn=null)}}for(jl!==null&&Bp(jl,e),Ul!==null&&Bp(Ul,e),Vl!==null&&Bp(Vl,e),Af.forEach(t),Lf.forEach(t),n=0;n<Rl.length;n++)o=Rl[n],o.blockedOn===e&&(o.blockedOn=null);for(;0<Rl.length&&(n=Rl[0],n.blockedOn===null);)B5(n),n.blockedOn===null&&Rl.shift()}var Uh=Ka.ReactCurrentBatchConfig,By=!0;function Sz(e,t,n,o){var a=Un,h=Uh.transition;Uh.transition=null;try{Un=1,Hb(e,t,n,o)}finally{Un=a,Uh.transition=h}}function Cz(e,t,n,o){var a=Un,h=Uh.transition;Uh.transition=null;try{Un=4,Hb(e,t,n,o)}finally{Un=a,Uh.transition=h}}function Hb(e,t,n,o){if(By){var a=_x(e,t,n,o);if(a===null)v_(e,t,o,Fy,n),SC(e,o);else if(bz(a,e,t,n,o))o.stopPropagation();else if(SC(e,o),t&4&&-1<xz.indexOf(e)){for(;a!==null;){var h=fm(a);if(h!==null&&R5(h),h=_x(e,t,n,o),h===null&&v_(e,t,o,Fy,n),h===a)break;a=h}a!==null&&o.stopPropagation()}else v_(e,t,o,null,n)}}var Fy=null;function _x(e,t,n,o){if(Fy=null,e=Vb(o),e=Vu(e),e!==null)if(t=pc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=T5(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fy=e,null}function F5(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hz()){case Wb:return 1;case M5:return 4;case $y:case dz:return 16;case A5:return 536870912;default:return 16}default:return 16}}var Ol=null,Zb=null,ly=null;function N5(){if(ly)return ly;var e,t=Zb,n=t.length,o,a="value"in Ol?Ol.value:Ol.textContent,h=a.length;for(e=0;e<n&&t[e]===a[e];e++);var d=n-e;for(o=1;o<=d&&t[n-o]===a[h-o];o++);return ly=a.slice(e,1<o?1-o:void 0)}function uy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dg(){return!0}function kC(){return!1}function Zo(e){function t(n,o,a,h,d){this._reactName=n,this._targetInst=a,this.type=o,this.nativeEvent=h,this.target=d,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(h):h[u]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Dg:kC,this.isPropagationStopped=kC,this}return Er(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dg)},persist:function(){},isPersistent:Dg}),t}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kb=Zo(fd),pm=Er({},fd,{view:0,detail:0}),kz=Zo(pm),u_,c_,Fp,P0=Er({},pm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xb,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fp&&(Fp&&e.type==="mousemove"?(u_=e.screenX-Fp.screenX,c_=e.screenY-Fp.screenY):c_=u_=0,Fp=e),u_)},movementY:function(e){return"movementY"in e?e.movementY:c_}}),TC=Zo(P0),Tz=Er({},P0,{dataTransfer:0}),Ez=Zo(Tz),Iz=Er({},pm,{relatedTarget:0}),h_=Zo(Iz),Pz=Er({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),Mz=Zo(Pz),Az=Er({},fd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Lz=Zo(Az),zz=Er({},fd,{data:0}),EC=Zo(zz),Rz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Oz(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$z[e])?!!t[e]:!1}function Xb(){return Oz}var Bz=Er({},pm,{key:function(e){if(e.key){var t=Rz[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=uy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Dz[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xb,charCode:function(e){return e.type==="keypress"?uy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?uy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Fz=Zo(Bz),Nz=Er({},P0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),IC=Zo(Nz),jz=Er({},pm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xb}),Uz=Zo(jz),Vz=Er({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Wz=Zo(Vz),qz=Er({},P0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Gz=Zo(qz),Hz=[9,13,27,32],Yb=Fa&&"CompositionEvent"in window,pf=null;Fa&&"documentMode"in document&&(pf=document.documentMode);var Zz=Fa&&"TextEvent"in window&&!pf,j5=Fa&&(!Yb||pf&&8<pf&&11>=pf),PC=" ",MC=!1;function U5(e,t){switch(e){case"keyup":return Hz.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function V5(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Th=!1;function Kz(e,t){switch(e){case"compositionend":return V5(t);case"keypress":return t.which!==32?null:(MC=!0,PC);case"textInput":return e=t.data,e===PC&&MC?null:e;default:return null}}function Xz(e,t){if(Th)return e==="compositionend"||!Yb&&U5(e,t)?(e=N5(),ly=Zb=Ol=null,Th=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return j5&&t.locale!=="ko"?null:t.data;default:return null}}var Yz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function AC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Yz[e.type]:t==="textarea"}function W5(e,t,n,o){b5(o),t=Ny(t,"onChange"),0<t.length&&(n=new Kb("onChange","change",null,n,o),e.push({event:n,listeners:t}))}var ff=null,Rf=null;function Jz(e){tI(e,0)}function M0(e){var t=Ph(e);if(f5(t))return e}function Qz(e,t){if(e==="change")return t}var q5=!1;if(Fa){var d_;if(Fa){var p_="oninput"in document;if(!p_){var LC=document.createElement("div");LC.setAttribute("oninput","return;"),p_=typeof LC.oninput=="function"}d_=p_}else d_=!1;q5=d_&&(!document.documentMode||9<document.documentMode)}function zC(){ff&&(ff.detachEvent("onpropertychange",G5),Rf=ff=null)}function G5(e){if(e.propertyName==="value"&&M0(Rf)){var t=[];W5(t,Rf,e,Vb(e)),k5(Jz,t)}}function eR(e,t,n){e==="focusin"?(zC(),ff=t,Rf=n,ff.attachEvent("onpropertychange",G5)):e==="focusout"&&zC()}function tR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return M0(Rf)}function nR(e,t){if(e==="click")return M0(t)}function rR(e,t){if(e==="input"||e==="change")return M0(t)}function iR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Bs=typeof Object.is=="function"?Object.is:iR;function Df(e,t){if(Bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var a=n[o];if(!tx.call(t,a)||!Bs(e[a],t[a]))return!1}return!0}function RC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function DC(e,t){var n=RC(e);e=0;for(var o;n;){if(n.nodeType===3){if(o=e+n.textContent.length,e<=t&&o>=t)return{node:n,offset:t-e};e=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=RC(n)}}function H5(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?H5(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Z5(){for(var e=window,t=zy();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=zy(e.document)}return t}function Jb(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function oR(e){var t=Z5(),n=e.focusedElem,o=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&H5(n.ownerDocument.documentElement,n)){if(o!==null&&Jb(n)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,h=Math.min(o.start,a);o=o.end===void 0?h:Math.min(o.end,a),!e.extend&&h>o&&(a=o,o=h,h=a),a=DC(n,h);var d=DC(n,o);a&&d&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var sR=Fa&&"documentMode"in document&&11>=document.documentMode,Eh=null,xx=null,mf=null,bx=!1;function $C(e,t,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;bx||Eh==null||Eh!==zy(o)||(o=Eh,"selectionStart"in o&&Jb(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),mf&&Df(mf,o)||(mf=o,o=Ny(xx,"onSelect"),0<o.length&&(t=new Kb("onSelect","select",null,t,n),e.push({event:t,listeners:o}),t.target=Eh)))}function $g(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ih={animationend:$g("Animation","AnimationEnd"),animationiteration:$g("Animation","AnimationIteration"),animationstart:$g("Animation","AnimationStart"),transitionend:$g("Transition","TransitionEnd")},f_={},K5={};Fa&&(K5=document.createElement("div").style,"AnimationEvent"in window||(delete Ih.animationend.animation,delete Ih.animationiteration.animation,delete Ih.animationstart.animation),"TransitionEvent"in window||delete Ih.transitionend.transition);function A0(e){if(f_[e])return f_[e];if(!Ih[e])return e;var t=Ih[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in K5)return f_[e]=t[n];return e}var X5=A0("animationend"),Y5=A0("animationiteration"),J5=A0("animationstart"),Q5=A0("transitionend"),eI=new Map,OC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nu(e,t){eI.set(e,t),dc(t,[e])}for(var m_=0;m_<OC.length;m_++){var g_=OC[m_],aR=g_.toLowerCase(),lR=g_[0].toUpperCase()+g_.slice(1);nu(aR,"on"+lR)}nu(X5,"onAnimationEnd");nu(Y5,"onAnimationIteration");nu(J5,"onAnimationStart");nu("dblclick","onDoubleClick");nu("focusin","onFocus");nu("focusout","onBlur");nu(Q5,"onTransitionEnd");nd("onMouseEnter",["mouseout","mouseover"]);nd("onMouseLeave",["mouseout","mouseover"]);nd("onPointerEnter",["pointerout","pointerover"]);nd("onPointerLeave",["pointerout","pointerover"]);dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var of="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uR=new Set("cancel close invalid load scroll toggle".split(" ").concat(of));function BC(e,t,n){var o=e.type||"unknown-event";e.currentTarget=n,az(o,t,void 0,e),e.currentTarget=null}function tI(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var o=e[n],a=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var d=o.length-1;0<=d;d--){var u=o[d],b=u.instance,w=u.currentTarget;if(u=u.listener,b!==h&&a.isPropagationStopped())break e;BC(a,u,w),h=b}else for(d=0;d<o.length;d++){if(u=o[d],b=u.instance,w=u.currentTarget,u=u.listener,b!==h&&a.isPropagationStopped())break e;BC(a,u,w),h=b}}}if(Dy)throw e=gx,Dy=!1,gx=null,e}function lr(e,t){var n=t[Tx];n===void 0&&(n=t[Tx]=new Set);var o=e+"__bubble";n.has(o)||(nI(t,e,2,!1),n.add(o))}function y_(e,t,n){var o=0;t&&(o|=4),nI(n,e,o,t)}var Og="_reactListening"+Math.random().toString(36).slice(2);function $f(e){if(!e[Og]){e[Og]=!0,u5.forEach(function(n){n!=="selectionchange"&&(uR.has(n)||y_(n,!1,e),y_(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Og]||(t[Og]=!0,y_("selectionchange",!1,t))}}function nI(e,t,n,o){switch(F5(t)){case 1:var a=Sz;break;case 4:a=Cz;break;default:a=Hb}n=a.bind(null,t,n,e),a=void 0,!mx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),o?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function v_(e,t,n,o,a){var h=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var d=o.tag;if(d===3||d===4){var u=o.stateNode.containerInfo;if(u===a||u.nodeType===8&&u.parentNode===a)break;if(d===4)for(d=o.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===a||b.nodeType===8&&b.parentNode===a))return;d=d.return}for(;u!==null;){if(d=Vu(u),d===null)return;if(b=d.tag,b===5||b===6){o=h=d;continue e}u=u.parentNode}}o=o.return}k5(function(){var w=h,P=Vb(n),E=[];e:{var I=eI.get(e);if(I!==void 0){var R=Kb,F=e;switch(e){case"keypress":if(uy(n)===0)break e;case"keydown":case"keyup":R=Fz;break;case"focusin":F="focus",R=h_;break;case"focusout":F="blur",R=h_;break;case"beforeblur":case"afterblur":R=h_;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=TC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=Ez;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=Uz;break;case X5:case Y5:case J5:R=Mz;break;case Q5:R=Wz;break;case"scroll":R=kz;break;case"wheel":R=Gz;break;case"copy":case"cut":case"paste":R=Lz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=IC}var U=(t&4)!==0,K=!U&&e==="scroll",D=U?I!==null?I+"Capture":null:I;U=[];for(var j=w,V;j!==null;){V=j;var Y=V.stateNode;if(V.tag===5&&Y!==null&&(V=Y,D!==null&&(Y=Mf(j,D),Y!=null&&U.push(Of(j,Y,V)))),K)break;j=j.return}0<U.length&&(I=new R(I,F,null,n,P),E.push({event:I,listeners:U}))}}if(!(t&7)){e:{if(I=e==="mouseover"||e==="pointerover",R=e==="mouseout"||e==="pointerout",I&&n!==px&&(F=n.relatedTarget||n.fromElement)&&(Vu(F)||F[Na]))break e;if((R||I)&&(I=P.window===P?P:(I=P.ownerDocument)?I.defaultView||I.parentWindow:window,R?(F=n.relatedTarget||n.toElement,R=w,F=F?Vu(F):null,F!==null&&(K=pc(F),F!==K||F.tag!==5&&F.tag!==6)&&(F=null)):(R=null,F=w),R!==F)){if(U=TC,Y="onMouseLeave",D="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(U=IC,Y="onPointerLeave",D="onPointerEnter",j="pointer"),K=R==null?I:Ph(R),V=F==null?I:Ph(F),I=new U(Y,j+"leave",R,n,P),I.target=K,I.relatedTarget=V,Y=null,Vu(P)===w&&(U=new U(D,j+"enter",F,n,P),U.target=V,U.relatedTarget=K,Y=U),K=Y,R&&F)t:{for(U=R,D=F,j=0,V=U;V;V=lh(V))j++;for(V=0,Y=D;Y;Y=lh(Y))V++;for(;0<j-V;)U=lh(U),j--;for(;0<V-j;)D=lh(D),V--;for(;j--;){if(U===D||D!==null&&U===D.alternate)break t;U=lh(U),D=lh(D)}U=null}else U=null;R!==null&&FC(E,I,R,U,!1),F!==null&&K!==null&&FC(E,K,F,U,!0)}}e:{if(I=w?Ph(w):window,R=I.nodeName&&I.nodeName.toLowerCase(),R==="select"||R==="input"&&I.type==="file")var ce=Qz;else if(AC(I))if(q5)ce=rR;else{ce=tR;var de=eR}else(R=I.nodeName)&&R.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(ce=nR);if(ce&&(ce=ce(e,w))){W5(E,ce,n,P);break e}de&&de(e,I,w),e==="focusout"&&(de=I._wrapperState)&&de.controlled&&I.type==="number"&&lx(I,"number",I.value)}switch(de=w?Ph(w):window,e){case"focusin":(AC(de)||de.contentEditable==="true")&&(Eh=de,xx=w,mf=null);break;case"focusout":mf=xx=Eh=null;break;case"mousedown":bx=!0;break;case"contextmenu":case"mouseup":case"dragend":bx=!1,$C(E,n,P);break;case"selectionchange":if(sR)break;case"keydown":case"keyup":$C(E,n,P)}var le;if(Yb)e:{switch(e){case"compositionstart":var ge="onCompositionStart";break e;case"compositionend":ge="onCompositionEnd";break e;case"compositionupdate":ge="onCompositionUpdate";break e}ge=void 0}else Th?U5(e,n)&&(ge="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(ge="onCompositionStart");ge&&(j5&&n.locale!=="ko"&&(Th||ge!=="onCompositionStart"?ge==="onCompositionEnd"&&Th&&(le=N5()):(Ol=P,Zb="value"in Ol?Ol.value:Ol.textContent,Th=!0)),de=Ny(w,ge),0<de.length&&(ge=new EC(ge,e,null,n,P),E.push({event:ge,listeners:de}),le?ge.data=le:(le=V5(n),le!==null&&(ge.data=le)))),(le=Zz?Kz(e,n):Xz(e,n))&&(w=Ny(w,"onBeforeInput"),0<w.length&&(P=new EC("onBeforeInput","beforeinput",null,n,P),E.push({event:P,listeners:w}),P.data=le))}tI(E,t)})}function Of(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ny(e,t){for(var n=t+"Capture",o=[];e!==null;){var a=e,h=a.stateNode;a.tag===5&&h!==null&&(a=h,h=Mf(e,n),h!=null&&o.unshift(Of(e,h,a)),h=Mf(e,t),h!=null&&o.push(Of(e,h,a))),e=e.return}return o}function lh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function FC(e,t,n,o,a){for(var h=t._reactName,d=[];n!==null&&n!==o;){var u=n,b=u.alternate,w=u.stateNode;if(b!==null&&b===o)break;u.tag===5&&w!==null&&(u=w,a?(b=Mf(n,h),b!=null&&d.unshift(Of(n,b,u))):a||(b=Mf(n,h),b!=null&&d.push(Of(n,b,u)))),n=n.return}d.length!==0&&e.push({event:t,listeners:d})}var cR=/\r\n?/g,hR=/\u0000|\uFFFD/g;function NC(e){return(typeof e=="string"?e:""+e).replace(cR,`
`).replace(hR,"")}function Bg(e,t,n){if(t=NC(t),NC(e)!==t&&n)throw Error(Xe(425))}function jy(){}var wx=null,Sx=null;function Cx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kx=typeof setTimeout=="function"?setTimeout:void 0,dR=typeof clearTimeout=="function"?clearTimeout:void 0,jC=typeof Promise=="function"?Promise:void 0,pR=typeof queueMicrotask=="function"?queueMicrotask:typeof jC<"u"?function(e){return jC.resolve(null).then(e).catch(fR)}:kx;function fR(e){setTimeout(function(){throw e})}function __(e,t){var n=t,o=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(o===0){e.removeChild(a),zf(t);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=a}while(n);zf(t)}function Wl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function UC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var md=Math.random().toString(36).slice(2),na="__reactFiber$"+md,Bf="__reactProps$"+md,Na="__reactContainer$"+md,Tx="__reactEvents$"+md,mR="__reactListeners$"+md,gR="__reactHandles$"+md;function Vu(e){var t=e[na];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Na]||n[na]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=UC(e);e!==null;){if(n=e[na])return n;e=UC(e)}return t}e=n,n=e.parentNode}return null}function fm(e){return e=e[na]||e[Na],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ph(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Xe(33))}function L0(e){return e[Bf]||null}var Ex=[],Mh=-1;function ru(e){return{current:e}}function ur(e){0>Mh||(e.current=Ex[Mh],Ex[Mh]=null,Mh--)}function rr(e,t){Mh++,Ex[Mh]=e.current,e.current=t}var Yl={},ji=ru(Yl),_o=ru(!1),rc=Yl;function rd(e,t){var n=e.type.contextTypes;if(!n)return Yl;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var a={},h;for(h in n)a[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function xo(e){return e=e.childContextTypes,e!=null}function Uy(){ur(_o),ur(ji)}function VC(e,t,n){if(ji.current!==Yl)throw Error(Xe(168));rr(ji,t),rr(_o,n)}function rI(e,t,n){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var a in o)if(!(a in t))throw Error(Xe(108,ez(e)||"Unknown",a));return Er({},n,o)}function Vy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Yl,rc=ji.current,rr(ji,e),rr(_o,_o.current),!0}function WC(e,t,n){var o=e.stateNode;if(!o)throw Error(Xe(169));n?(e=rI(e,t,rc),o.__reactInternalMemoizedMergedChildContext=e,ur(_o),ur(ji),rr(ji,e)):ur(_o),rr(_o,n)}var za=null,z0=!1,x_=!1;function iI(e){za===null?za=[e]:za.push(e)}function yR(e){z0=!0,iI(e)}function iu(){if(!x_&&za!==null){x_=!0;var e=0,t=Un;try{var n=za;for(Un=1;e<n.length;e++){var o=n[e];do o=o(!0);while(o!==null)}za=null,z0=!1}catch(a){throw za!==null&&(za=za.slice(e+1)),P5(Wb,iu),a}finally{Un=t,x_=!1}}return null}var Ah=[],Lh=0,Wy=null,qy=0,ls=[],us=0,ic=null,Da=1,$a="";function Ou(e,t){Ah[Lh++]=qy,Ah[Lh++]=Wy,Wy=e,qy=t}function oI(e,t,n){ls[us++]=Da,ls[us++]=$a,ls[us++]=ic,ic=e;var o=Da;e=$a;var a=32-Ds(o)-1;o&=~(1<<a),n+=1;var h=32-Ds(t)+a;if(30<h){var d=a-a%5;h=(o&(1<<d)-1).toString(32),o>>=d,a-=d,Da=1<<32-Ds(t)+a|n<<a|o,$a=h+e}else Da=1<<h|n<<a|o,$a=e}function Qb(e){e.return!==null&&(Ou(e,1),oI(e,1,0))}function ew(e){for(;e===Wy;)Wy=Ah[--Lh],Ah[Lh]=null,qy=Ah[--Lh],Ah[Lh]=null;for(;e===ic;)ic=ls[--us],ls[us]=null,$a=ls[--us],ls[us]=null,Da=ls[--us],ls[us]=null}var Wo=null,Vo=null,_r=!1,As=null;function sI(e,t){var n=ds(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function qC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Wo=e,Vo=Wl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Wo=e,Vo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ic!==null?{id:Da,overflow:$a}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ds(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Wo=e,Vo=null,!0):!1;default:return!1}}function Ix(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Px(e){if(_r){var t=Vo;if(t){var n=t;if(!qC(e,t)){if(Ix(e))throw Error(Xe(418));t=Wl(n.nextSibling);var o=Wo;t&&qC(e,t)?sI(o,n):(e.flags=e.flags&-4097|2,_r=!1,Wo=e)}}else{if(Ix(e))throw Error(Xe(418));e.flags=e.flags&-4097|2,_r=!1,Wo=e}}}function GC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Wo=e}function Fg(e){if(e!==Wo)return!1;if(!_r)return GC(e),_r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cx(e.type,e.memoizedProps)),t&&(t=Vo)){if(Ix(e))throw aI(),Error(Xe(418));for(;t;)sI(e,t),t=Wl(t.nextSibling)}if(GC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Xe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vo=Wl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vo=null}}else Vo=Wo?Wl(e.stateNode.nextSibling):null;return!0}function aI(){for(var e=Vo;e;)e=Wl(e.nextSibling)}function id(){Vo=Wo=null,_r=!1}function tw(e){As===null?As=[e]:As.push(e)}var vR=Ka.ReactCurrentBatchConfig;function Np(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xe(309));var o=n.stateNode}if(!o)throw Error(Xe(147,e));var a=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(d){var u=a.refs;d===null?delete u[h]:u[h]=d},t._stringRef=h,t)}if(typeof e!="string")throw Error(Xe(284));if(!n._owner)throw Error(Xe(290,e))}return e}function Ng(e,t){throw e=Object.prototype.toString.call(t),Error(Xe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function HC(e){var t=e._init;return t(e._payload)}function lI(e){function t(D,j){if(e){var V=D.deletions;V===null?(D.deletions=[j],D.flags|=16):V.push(j)}}function n(D,j){if(!e)return null;for(;j!==null;)t(D,j),j=j.sibling;return null}function o(D,j){for(D=new Map;j!==null;)j.key!==null?D.set(j.key,j):D.set(j.index,j),j=j.sibling;return D}function a(D,j){return D=Zl(D,j),D.index=0,D.sibling=null,D}function h(D,j,V){return D.index=V,e?(V=D.alternate,V!==null?(V=V.index,V<j?(D.flags|=2,j):V):(D.flags|=2,j)):(D.flags|=1048576,j)}function d(D){return e&&D.alternate===null&&(D.flags|=2),D}function u(D,j,V,Y){return j===null||j.tag!==6?(j=E_(V,D.mode,Y),j.return=D,j):(j=a(j,V),j.return=D,j)}function b(D,j,V,Y){var ce=V.type;return ce===kh?P(D,j,V.props.children,Y,V.key):j!==null&&(j.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Ll&&HC(ce)===j.type)?(Y=a(j,V.props),Y.ref=Np(D,j,V),Y.return=D,Y):(Y=gy(V.type,V.key,V.props,null,D.mode,Y),Y.ref=Np(D,j,V),Y.return=D,Y)}function w(D,j,V,Y){return j===null||j.tag!==4||j.stateNode.containerInfo!==V.containerInfo||j.stateNode.implementation!==V.implementation?(j=I_(V,D.mode,Y),j.return=D,j):(j=a(j,V.children||[]),j.return=D,j)}function P(D,j,V,Y,ce){return j===null||j.tag!==7?(j=Xu(V,D.mode,Y,ce),j.return=D,j):(j=a(j,V),j.return=D,j)}function E(D,j,V){if(typeof j=="string"&&j!==""||typeof j=="number")return j=E_(""+j,D.mode,V),j.return=D,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Pg:return V=gy(j.type,j.key,j.props,null,D.mode,V),V.ref=Np(D,null,j),V.return=D,V;case Ch:return j=I_(j,D.mode,V),j.return=D,j;case Ll:var Y=j._init;return E(D,Y(j._payload),V)}if(nf(j)||Dp(j))return j=Xu(j,D.mode,V,null),j.return=D,j;Ng(D,j)}return null}function I(D,j,V,Y){var ce=j!==null?j.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return ce!==null?null:u(D,j,""+V,Y);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Pg:return V.key===ce?b(D,j,V,Y):null;case Ch:return V.key===ce?w(D,j,V,Y):null;case Ll:return ce=V._init,I(D,j,ce(V._payload),Y)}if(nf(V)||Dp(V))return ce!==null?null:P(D,j,V,Y,null);Ng(D,V)}return null}function R(D,j,V,Y,ce){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return D=D.get(V)||null,u(j,D,""+Y,ce);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case Pg:return D=D.get(Y.key===null?V:Y.key)||null,b(j,D,Y,ce);case Ch:return D=D.get(Y.key===null?V:Y.key)||null,w(j,D,Y,ce);case Ll:var de=Y._init;return R(D,j,V,de(Y._payload),ce)}if(nf(Y)||Dp(Y))return D=D.get(V)||null,P(j,D,Y,ce,null);Ng(j,Y)}return null}function F(D,j,V,Y){for(var ce=null,de=null,le=j,ge=j=0,Ae=null;le!==null&&ge<V.length;ge++){le.index>ge?(Ae=le,le=null):Ae=le.sibling;var H=I(D,le,V[ge],Y);if(H===null){le===null&&(le=Ae);break}e&&le&&H.alternate===null&&t(D,le),j=h(H,j,ge),de===null?ce=H:de.sibling=H,de=H,le=Ae}if(ge===V.length)return n(D,le),_r&&Ou(D,ge),ce;if(le===null){for(;ge<V.length;ge++)le=E(D,V[ge],Y),le!==null&&(j=h(le,j,ge),de===null?ce=le:de.sibling=le,de=le);return _r&&Ou(D,ge),ce}for(le=o(D,le);ge<V.length;ge++)Ae=R(le,D,ge,V[ge],Y),Ae!==null&&(e&&Ae.alternate!==null&&le.delete(Ae.key===null?ge:Ae.key),j=h(Ae,j,ge),de===null?ce=Ae:de.sibling=Ae,de=Ae);return e&&le.forEach(function(Ee){return t(D,Ee)}),_r&&Ou(D,ge),ce}function U(D,j,V,Y){var ce=Dp(V);if(typeof ce!="function")throw Error(Xe(150));if(V=ce.call(V),V==null)throw Error(Xe(151));for(var de=ce=null,le=j,ge=j=0,Ae=null,H=V.next();le!==null&&!H.done;ge++,H=V.next()){le.index>ge?(Ae=le,le=null):Ae=le.sibling;var Ee=I(D,le,H.value,Y);if(Ee===null){le===null&&(le=Ae);break}e&&le&&Ee.alternate===null&&t(D,le),j=h(Ee,j,ge),de===null?ce=Ee:de.sibling=Ee,de=Ee,le=Ae}if(H.done)return n(D,le),_r&&Ou(D,ge),ce;if(le===null){for(;!H.done;ge++,H=V.next())H=E(D,H.value,Y),H!==null&&(j=h(H,j,ge),de===null?ce=H:de.sibling=H,de=H);return _r&&Ou(D,ge),ce}for(le=o(D,le);!H.done;ge++,H=V.next())H=R(le,D,ge,H.value,Y),H!==null&&(e&&H.alternate!==null&&le.delete(H.key===null?ge:H.key),j=h(H,j,ge),de===null?ce=H:de.sibling=H,de=H);return e&&le.forEach(function(je){return t(D,je)}),_r&&Ou(D,ge),ce}function K(D,j,V,Y){if(typeof V=="object"&&V!==null&&V.type===kh&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Pg:e:{for(var ce=V.key,de=j;de!==null;){if(de.key===ce){if(ce=V.type,ce===kh){if(de.tag===7){n(D,de.sibling),j=a(de,V.props.children),j.return=D,D=j;break e}}else if(de.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===Ll&&HC(ce)===de.type){n(D,de.sibling),j=a(de,V.props),j.ref=Np(D,de,V),j.return=D,D=j;break e}n(D,de);break}else t(D,de);de=de.sibling}V.type===kh?(j=Xu(V.props.children,D.mode,Y,V.key),j.return=D,D=j):(Y=gy(V.type,V.key,V.props,null,D.mode,Y),Y.ref=Np(D,j,V),Y.return=D,D=Y)}return d(D);case Ch:e:{for(de=V.key;j!==null;){if(j.key===de)if(j.tag===4&&j.stateNode.containerInfo===V.containerInfo&&j.stateNode.implementation===V.implementation){n(D,j.sibling),j=a(j,V.children||[]),j.return=D,D=j;break e}else{n(D,j);break}else t(D,j);j=j.sibling}j=I_(V,D.mode,Y),j.return=D,D=j}return d(D);case Ll:return de=V._init,K(D,j,de(V._payload),Y)}if(nf(V))return F(D,j,V,Y);if(Dp(V))return U(D,j,V,Y);Ng(D,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,j!==null&&j.tag===6?(n(D,j.sibling),j=a(j,V),j.return=D,D=j):(n(D,j),j=E_(V,D.mode,Y),j.return=D,D=j),d(D)):n(D,j)}return K}var od=lI(!0),uI=lI(!1),Gy=ru(null),Hy=null,zh=null,nw=null;function rw(){nw=zh=Hy=null}function iw(e){var t=Gy.current;ur(Gy),e._currentValue=t}function Mx(e,t,n){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===n)break;e=e.return}}function Vh(e,t){Hy=e,nw=zh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(vo=!0),e.firstContext=null)}function gs(e){var t=e._currentValue;if(nw!==e)if(e={context:e,memoizedValue:t,next:null},zh===null){if(Hy===null)throw Error(Xe(308));zh=e,Hy.dependencies={lanes:0,firstContext:e}}else zh=zh.next=e;return t}var Wu=null;function ow(e){Wu===null?Wu=[e]:Wu.push(e)}function cI(e,t,n,o){var a=t.interleaved;return a===null?(n.next=n,ow(t)):(n.next=a.next,a.next=n),t.interleaved=n,ja(e,o)}function ja(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zl=!1;function sw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hI(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ql(e,t,n){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,Cn&2){var a=o.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),o.pending=t,ja(e,n)}return a=o.interleaved,a===null?(t.next=t,ow(o)):(t.next=a.next,a.next=t),o.interleaved=t,ja(e,n)}function cy(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,qb(e,n)}}function ZC(e,t){var n=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var a=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?a=h=d:h=h.next=d,n=n.next}while(n!==null);h===null?a=h=t:h=h.next=t}else a=h=t;n={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zy(e,t,n,o){var a=e.updateQueue;zl=!1;var h=a.firstBaseUpdate,d=a.lastBaseUpdate,u=a.shared.pending;if(u!==null){a.shared.pending=null;var b=u,w=b.next;b.next=null,d===null?h=w:d.next=w,d=b;var P=e.alternate;P!==null&&(P=P.updateQueue,u=P.lastBaseUpdate,u!==d&&(u===null?P.firstBaseUpdate=w:u.next=w,P.lastBaseUpdate=b))}if(h!==null){var E=a.baseState;d=0,P=w=b=null,u=h;do{var I=u.lane,R=u.eventTime;if((o&I)===I){P!==null&&(P=P.next={eventTime:R,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var F=e,U=u;switch(I=t,R=n,U.tag){case 1:if(F=U.payload,typeof F=="function"){E=F.call(R,E,I);break e}E=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=U.payload,I=typeof F=="function"?F.call(R,E,I):F,I==null)break e;E=Er({},E,I);break e;case 2:zl=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,I=a.effects,I===null?a.effects=[u]:I.push(u))}else R={eventTime:R,lane:I,tag:u.tag,payload:u.payload,callback:u.callback,next:null},P===null?(w=P=R,b=E):P=P.next=R,d|=I;if(u=u.next,u===null){if(u=a.shared.pending,u===null)break;I=u,u=I.next,I.next=null,a.lastBaseUpdate=I,a.shared.pending=null}}while(!0);if(P===null&&(b=E),a.baseState=b,a.firstBaseUpdate=w,a.lastBaseUpdate=P,t=a.shared.interleaved,t!==null){a=t;do d|=a.lane,a=a.next;while(a!==t)}else h===null&&(a.shared.lanes=0);sc|=d,e.lanes=d,e.memoizedState=E}}function KC(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],a=o.callback;if(a!==null){if(o.callback=null,o=n,typeof a!="function")throw Error(Xe(191,a));a.call(o)}}}var mm={},sa=ru(mm),Ff=ru(mm),Nf=ru(mm);function qu(e){if(e===mm)throw Error(Xe(174));return e}function aw(e,t){switch(rr(Nf,t),rr(Ff,e),rr(sa,mm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cx(t,e)}ur(sa),rr(sa,t)}function sd(){ur(sa),ur(Ff),ur(Nf)}function dI(e){qu(Nf.current);var t=qu(sa.current),n=cx(t,e.type);t!==n&&(rr(Ff,e),rr(sa,n))}function lw(e){Ff.current===e&&(ur(sa),ur(Ff))}var kr=ru(0);function Ky(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var b_=[];function uw(){for(var e=0;e<b_.length;e++)b_[e]._workInProgressVersionPrimary=null;b_.length=0}var hy=Ka.ReactCurrentDispatcher,w_=Ka.ReactCurrentBatchConfig,oc=0,Tr=null,Jr=null,hi=null,Xy=!1,gf=!1,jf=0,_R=0;function Di(){throw Error(Xe(321))}function cw(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Bs(e[n],t[n]))return!1;return!0}function hw(e,t,n,o,a,h){if(oc=h,Tr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,hy.current=e===null||e.memoizedState===null?SR:CR,e=n(o,a),gf){h=0;do{if(gf=!1,jf=0,25<=h)throw Error(Xe(301));h+=1,hi=Jr=null,t.updateQueue=null,hy.current=kR,e=n(o,a)}while(gf)}if(hy.current=Yy,t=Jr!==null&&Jr.next!==null,oc=0,hi=Jr=Tr=null,Xy=!1,t)throw Error(Xe(300));return e}function dw(){var e=jf!==0;return jf=0,e}function Js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hi===null?Tr.memoizedState=hi=e:hi=hi.next=e,hi}function ys(){if(Jr===null){var e=Tr.alternate;e=e!==null?e.memoizedState:null}else e=Jr.next;var t=hi===null?Tr.memoizedState:hi.next;if(t!==null)hi=t,Jr=e;else{if(e===null)throw Error(Xe(310));Jr=e,e={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},hi===null?Tr.memoizedState=hi=e:hi=hi.next=e}return hi}function Uf(e,t){return typeof t=="function"?t(e):t}function S_(e){var t=ys(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var o=Jr,a=o.baseQueue,h=n.pending;if(h!==null){if(a!==null){var d=a.next;a.next=h.next,h.next=d}o.baseQueue=a=h,n.pending=null}if(a!==null){h=a.next,o=o.baseState;var u=d=null,b=null,w=h;do{var P=w.lane;if((oc&P)===P)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var E={lane:P,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(u=b=E,d=o):b=b.next=E,Tr.lanes|=P,sc|=P}w=w.next}while(w!==null&&w!==h);b===null?d=o:b.next=u,Bs(o,t.memoizedState)||(vo=!0),t.memoizedState=o,t.baseState=d,t.baseQueue=b,n.lastRenderedState=o}if(e=n.interleaved,e!==null){a=e;do h=a.lane,Tr.lanes|=h,sc|=h,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function C_(e){var t=ys(),n=t.queue;if(n===null)throw Error(Xe(311));n.lastRenderedReducer=e;var o=n.dispatch,a=n.pending,h=t.memoizedState;if(a!==null){n.pending=null;var d=a=a.next;do h=e(h,d.action),d=d.next;while(d!==a);Bs(h,t.memoizedState)||(vo=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,o]}function pI(){}function fI(e,t){var n=Tr,o=ys(),a=t(),h=!Bs(o.memoizedState,a);if(h&&(o.memoizedState=a,vo=!0),o=o.queue,pw(yI.bind(null,n,o,e),[e]),o.getSnapshot!==t||h||hi!==null&&hi.memoizedState.tag&1){if(n.flags|=2048,Vf(9,gI.bind(null,n,o,a,t),void 0,null),pi===null)throw Error(Xe(349));oc&30||mI(n,t,a)}return a}function mI(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function gI(e,t,n,o){t.value=n,t.getSnapshot=o,vI(t)&&_I(e)}function yI(e,t,n){return n(function(){vI(t)&&_I(e)})}function vI(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Bs(e,n)}catch{return!0}}function _I(e){var t=ja(e,1);t!==null&&$s(t,e,1,-1)}function XC(e){var t=Js();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uf,lastRenderedState:e},t.queue=e,e=e.dispatch=wR.bind(null,Tr,e),[t.memoizedState,e]}function Vf(e,t,n,o){return e={tag:e,create:t,destroy:n,deps:o,next:null},t=Tr.updateQueue,t===null?(t={lastEffect:null,stores:null},Tr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(o=n.next,n.next=e,e.next=o,t.lastEffect=e)),e}function xI(){return ys().memoizedState}function dy(e,t,n,o){var a=Js();Tr.flags|=e,a.memoizedState=Vf(1|t,n,void 0,o===void 0?null:o)}function R0(e,t,n,o){var a=ys();o=o===void 0?null:o;var h=void 0;if(Jr!==null){var d=Jr.memoizedState;if(h=d.destroy,o!==null&&cw(o,d.deps)){a.memoizedState=Vf(t,n,h,o);return}}Tr.flags|=e,a.memoizedState=Vf(1|t,n,h,o)}function YC(e,t){return dy(8390656,8,e,t)}function pw(e,t){return R0(2048,8,e,t)}function bI(e,t){return R0(4,2,e,t)}function wI(e,t){return R0(4,4,e,t)}function SI(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function CI(e,t,n){return n=n!=null?n.concat([e]):null,R0(4,4,SI.bind(null,t,e),n)}function fw(){}function kI(e,t){var n=ys();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&cw(t,o[1])?o[0]:(n.memoizedState=[e,t],e)}function TI(e,t){var n=ys();t=t===void 0?null:t;var o=n.memoizedState;return o!==null&&t!==null&&cw(t,o[1])?o[0]:(e=e(),n.memoizedState=[e,t],e)}function EI(e,t,n){return oc&21?(Bs(n,t)||(n=L5(),Tr.lanes|=n,sc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n)}function xR(e,t){var n=Un;Un=n!==0&&4>n?n:4,e(!0);var o=w_.transition;w_.transition={};try{e(!1),t()}finally{Un=n,w_.transition=o}}function II(){return ys().memoizedState}function bR(e,t,n){var o=Hl(e);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},PI(e))MI(t,n);else if(n=cI(e,t,n,o),n!==null){var a=no();$s(n,e,o,a),AI(n,t,o)}}function wR(e,t,n){var o=Hl(e),a={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(PI(e))MI(t,a);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var d=t.lastRenderedState,u=h(d,n);if(a.hasEagerState=!0,a.eagerState=u,Bs(u,d)){var b=t.interleaved;b===null?(a.next=a,ow(t)):(a.next=b.next,b.next=a),t.interleaved=a;return}}catch{}finally{}n=cI(e,t,a,o),n!==null&&(a=no(),$s(n,e,o,a),AI(n,t,o))}}function PI(e){var t=e.alternate;return e===Tr||t!==null&&t===Tr}function MI(e,t){gf=Xy=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function AI(e,t,n){if(n&4194240){var o=t.lanes;o&=e.pendingLanes,n|=o,t.lanes=n,qb(e,n)}}var Yy={readContext:gs,useCallback:Di,useContext:Di,useEffect:Di,useImperativeHandle:Di,useInsertionEffect:Di,useLayoutEffect:Di,useMemo:Di,useReducer:Di,useRef:Di,useState:Di,useDebugValue:Di,useDeferredValue:Di,useTransition:Di,useMutableSource:Di,useSyncExternalStore:Di,useId:Di,unstable_isNewReconciler:!1},SR={readContext:gs,useCallback:function(e,t){return Js().memoizedState=[e,t===void 0?null:t],e},useContext:gs,useEffect:YC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,dy(4194308,4,SI.bind(null,t,e),n)},useLayoutEffect:function(e,t){return dy(4194308,4,e,t)},useInsertionEffect:function(e,t){return dy(4,2,e,t)},useMemo:function(e,t){var n=Js();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var o=Js();return t=n!==void 0?n(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=bR.bind(null,Tr,e),[o.memoizedState,e]},useRef:function(e){var t=Js();return e={current:e},t.memoizedState=e},useState:XC,useDebugValue:fw,useDeferredValue:function(e){return Js().memoizedState=e},useTransition:function(){var e=XC(!1),t=e[0];return e=xR.bind(null,e[1]),Js().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var o=Tr,a=Js();if(_r){if(n===void 0)throw Error(Xe(407));n=n()}else{if(n=t(),pi===null)throw Error(Xe(349));oc&30||mI(o,t,n)}a.memoizedState=n;var h={value:n,getSnapshot:t};return a.queue=h,YC(yI.bind(null,o,h,e),[e]),o.flags|=2048,Vf(9,gI.bind(null,o,h,n,t),void 0,null),n},useId:function(){var e=Js(),t=pi.identifierPrefix;if(_r){var n=$a,o=Da;n=(o&~(1<<32-Ds(o)-1)).toString(32)+n,t=":"+t+"R"+n,n=jf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=_R++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},CR={readContext:gs,useCallback:kI,useContext:gs,useEffect:pw,useImperativeHandle:CI,useInsertionEffect:bI,useLayoutEffect:wI,useMemo:TI,useReducer:S_,useRef:xI,useState:function(){return S_(Uf)},useDebugValue:fw,useDeferredValue:function(e){var t=ys();return EI(t,Jr.memoizedState,e)},useTransition:function(){var e=S_(Uf)[0],t=ys().memoizedState;return[e,t]},useMutableSource:pI,useSyncExternalStore:fI,useId:II,unstable_isNewReconciler:!1},kR={readContext:gs,useCallback:kI,useContext:gs,useEffect:pw,useImperativeHandle:CI,useInsertionEffect:bI,useLayoutEffect:wI,useMemo:TI,useReducer:C_,useRef:xI,useState:function(){return C_(Uf)},useDebugValue:fw,useDeferredValue:function(e){var t=ys();return Jr===null?t.memoizedState=e:EI(t,Jr.memoizedState,e)},useTransition:function(){var e=C_(Uf)[0],t=ys().memoizedState;return[e,t]},useMutableSource:pI,useSyncExternalStore:fI,useId:II,unstable_isNewReconciler:!1};function Ps(e,t){if(e&&e.defaultProps){t=Er({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ax(e,t,n,o){t=e.memoizedState,n=n(o,t),n=n==null?t:Er({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var D0={isMounted:function(e){return(e=e._reactInternals)?pc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var o=no(),a=Hl(e),h=Oa(o,a);h.payload=t,n!=null&&(h.callback=n),t=ql(e,h,a),t!==null&&($s(t,e,a,o),cy(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var o=no(),a=Hl(e),h=Oa(o,a);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=ql(e,h,a),t!==null&&($s(t,e,a,o),cy(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=no(),o=Hl(e),a=Oa(n,o);a.tag=2,t!=null&&(a.callback=t),t=ql(e,a,o),t!==null&&($s(t,e,o,n),cy(t,e,o))}};function JC(e,t,n,o,a,h,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,d):t.prototype&&t.prototype.isPureReactComponent?!Df(n,o)||!Df(a,h):!0}function LI(e,t,n){var o=!1,a=Yl,h=t.contextType;return typeof h=="object"&&h!==null?h=gs(h):(a=xo(t)?rc:ji.current,o=t.contextTypes,h=(o=o!=null)?rd(e,a):Yl),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=D0,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=h),t}function QC(e,t,n,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,o),t.state!==e&&D0.enqueueReplaceState(t,t.state,null)}function Lx(e,t,n,o){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},sw(e);var h=t.contextType;typeof h=="object"&&h!==null?a.context=gs(h):(h=xo(t)?rc:ji.current,a.context=rd(e,h)),a.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Ax(e,t,h,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&D0.enqueueReplaceState(a,a.state,null),Zy(e,n,a,o),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ad(e,t){try{var n="",o=t;do n+=QL(o),o=o.return;while(o);var a=n}catch(h){a=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:a,digest:null}}function k_(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function zx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var TR=typeof WeakMap=="function"?WeakMap:Map;function zI(e,t,n){n=Oa(-1,n),n.tag=3,n.payload={element:null};var o=t.value;return n.callback=function(){Qy||(Qy=!0,Vx=o),zx(e,t)},n}function RI(e,t,n){n=Oa(-1,n),n.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var a=t.value;n.payload=function(){return o(a)},n.callback=function(){zx(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){zx(e,t),typeof o!="function"&&(Gl===null?Gl=new Set([this]):Gl.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),n}function ek(e,t,n){var o=e.pingCache;if(o===null){o=e.pingCache=new TR;var a=new Set;o.set(t,a)}else a=o.get(t),a===void 0&&(a=new Set,o.set(t,a));a.has(n)||(a.add(n),e=NR.bind(null,e,t,n),t.then(e,e))}function tk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function nk(e,t,n,o,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Oa(-1,1),t.tag=2,ql(n,t,1))),n.lanes|=1),e)}var ER=Ka.ReactCurrentOwner,vo=!1;function eo(e,t,n,o){t.child=e===null?uI(t,null,n,o):od(t,e.child,n,o)}function rk(e,t,n,o,a){n=n.render;var h=t.ref;return Vh(t,a),o=hw(e,t,n,o,h,a),n=dw(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ua(e,t,a)):(_r&&n&&Qb(t),t.flags|=1,eo(e,t,o,a),t.child)}function ik(e,t,n,o,a){if(e===null){var h=n.type;return typeof h=="function"&&!ww(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,DI(e,t,h,o,a)):(e=gy(n.type,null,o,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&a)){var d=h.memoizedProps;if(n=n.compare,n=n!==null?n:Df,n(d,o)&&e.ref===t.ref)return Ua(e,t,a)}return t.flags|=1,e=Zl(h,o),e.ref=t.ref,e.return=t,t.child=e}function DI(e,t,n,o,a){if(e!==null){var h=e.memoizedProps;if(Df(h,o)&&e.ref===t.ref)if(vo=!1,t.pendingProps=o=h,(e.lanes&a)!==0)e.flags&131072&&(vo=!0);else return t.lanes=e.lanes,Ua(e,t,a)}return Rx(e,t,n,o,a)}function $I(e,t,n){var o=t.pendingProps,a=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rr(Dh,Bo),Bo|=n;else{if(!(n&1073741824))return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rr(Dh,Bo),Bo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:n,rr(Dh,Bo),Bo|=o}else h!==null?(o=h.baseLanes|n,t.memoizedState=null):o=n,rr(Dh,Bo),Bo|=o;return eo(e,t,a,n),t.child}function OI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rx(e,t,n,o,a){var h=xo(n)?rc:ji.current;return h=rd(t,h),Vh(t,a),n=hw(e,t,n,o,h,a),o=dw(),e!==null&&!vo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ua(e,t,a)):(_r&&o&&Qb(t),t.flags|=1,eo(e,t,n,a),t.child)}function ok(e,t,n,o,a){if(xo(n)){var h=!0;Vy(t)}else h=!1;if(Vh(t,a),t.stateNode===null)py(e,t),LI(t,n,o),Lx(t,n,o,a),o=!0;else if(e===null){var d=t.stateNode,u=t.memoizedProps;d.props=u;var b=d.context,w=n.contextType;typeof w=="object"&&w!==null?w=gs(w):(w=xo(n)?rc:ji.current,w=rd(t,w));var P=n.getDerivedStateFromProps,E=typeof P=="function"||typeof d.getSnapshotBeforeUpdate=="function";E||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==o||b!==w)&&QC(t,d,o,w),zl=!1;var I=t.memoizedState;d.state=I,Zy(t,o,d,a),b=t.memoizedState,u!==o||I!==b||_o.current||zl?(typeof P=="function"&&(Ax(t,n,P,o),b=t.memoizedState),(u=zl||JC(t,n,u,o,I,b,w))?(E||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),d.props=o,d.state=b,d.context=w,o=u):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{d=t.stateNode,hI(e,t),u=t.memoizedProps,w=t.type===t.elementType?u:Ps(t.type,u),d.props=w,E=t.pendingProps,I=d.context,b=n.contextType,typeof b=="object"&&b!==null?b=gs(b):(b=xo(n)?rc:ji.current,b=rd(t,b));var R=n.getDerivedStateFromProps;(P=typeof R=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(u!==E||I!==b)&&QC(t,d,o,b),zl=!1,I=t.memoizedState,d.state=I,Zy(t,o,d,a);var F=t.memoizedState;u!==E||I!==F||_o.current||zl?(typeof R=="function"&&(Ax(t,n,R,o),F=t.memoizedState),(w=zl||JC(t,n,w,o,I,F,b)||!1)?(P||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(o,F,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(o,F,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=F),d.props=o,d.state=F,d.context=b,o=w):(typeof d.componentDidUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&I===e.memoizedState||(t.flags|=1024),o=!1)}return Dx(e,t,n,o,h,a)}function Dx(e,t,n,o,a,h){OI(e,t);var d=(t.flags&128)!==0;if(!o&&!d)return a&&WC(t,n,!1),Ua(e,t,h);o=t.stateNode,ER.current=t;var u=d&&typeof n.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&d?(t.child=od(t,e.child,null,h),t.child=od(t,null,u,h)):eo(e,t,u,h),t.memoizedState=o.state,a&&WC(t,n,!0),t.child}function BI(e){var t=e.stateNode;t.pendingContext?VC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&VC(e,t.context,!1),aw(e,t.containerInfo)}function sk(e,t,n,o,a){return id(),tw(a),t.flags|=256,eo(e,t,n,o),t.child}var $x={dehydrated:null,treeContext:null,retryLane:0};function Ox(e){return{baseLanes:e,cachePool:null,transitions:null}}function FI(e,t,n){var o=t.pendingProps,a=kr.current,h=!1,d=(t.flags&128)!==0,u;if((u=d)||(u=e!==null&&e.memoizedState===null?!1:(a&2)!==0),u?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),rr(kr,a&1),e===null)return Px(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(d=o.children,e=o.fallback,h?(o=t.mode,h=t.child,d={mode:"hidden",children:d},!(o&1)&&h!==null?(h.childLanes=0,h.pendingProps=d):h=B0(d,o,0,null),e=Xu(e,o,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Ox(n),t.memoizedState=$x,e):mw(t,d));if(a=e.memoizedState,a!==null&&(u=a.dehydrated,u!==null))return IR(e,t,d,o,u,a,n);if(h){h=o.fallback,d=t.mode,a=e.child,u=a.sibling;var b={mode:"hidden",children:o.children};return!(d&1)&&t.child!==a?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=Zl(a,b),o.subtreeFlags=a.subtreeFlags&14680064),u!==null?h=Zl(u,h):(h=Xu(h,d,n,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,d=e.child.memoizedState,d=d===null?Ox(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},h.memoizedState=d,h.childLanes=e.childLanes&~n,t.memoizedState=$x,o}return h=e.child,e=h.sibling,o=Zl(h,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=n),o.return=t,o.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function mw(e,t){return t=B0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jg(e,t,n,o){return o!==null&&tw(o),od(t,e.child,null,n),e=mw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function IR(e,t,n,o,a,h,d){if(n)return t.flags&256?(t.flags&=-257,o=k_(Error(Xe(422))),jg(e,t,d,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,a=t.mode,o=B0({mode:"visible",children:o.children},a,0,null),h=Xu(h,a,d,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,t.mode&1&&od(t,e.child,null,d),t.child.memoizedState=Ox(d),t.memoizedState=$x,h);if(!(t.mode&1))return jg(e,t,d,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var u=o.dgst;return o=u,h=Error(Xe(419)),o=k_(h,o,void 0),jg(e,t,d,o)}if(u=(d&e.childLanes)!==0,vo||u){if(o=pi,o!==null){switch(d&-d){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|d)?0:a,a!==0&&a!==h.retryLane&&(h.retryLane=a,ja(e,a),$s(o,e,a,-1))}return bw(),o=k_(Error(Xe(421))),jg(e,t,d,o)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=jR.bind(null,e),a._reactRetry=t,null):(e=h.treeContext,Vo=Wl(a.nextSibling),Wo=t,_r=!0,As=null,e!==null&&(ls[us++]=Da,ls[us++]=$a,ls[us++]=ic,Da=e.id,$a=e.overflow,ic=t),t=mw(t,o.children),t.flags|=4096,t)}function ak(e,t,n){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Mx(e.return,t,n)}function T_(e,t,n,o,a){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:a}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=n,h.tailMode=a)}function NI(e,t,n){var o=t.pendingProps,a=o.revealOrder,h=o.tail;if(eo(e,t,o.children,n),o=kr.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ak(e,n,t);else if(e.tag===19)ak(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(rr(kr,o),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Ky(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),T_(t,!1,a,n,h);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Ky(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}T_(t,!0,n,null,h);break;case"together":T_(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function py(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ua(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),sc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Xe(153));if(t.child!==null){for(e=t.child,n=Zl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Zl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function PR(e,t,n){switch(t.tag){case 3:BI(t),id();break;case 5:dI(t);break;case 1:xo(t.type)&&Vy(t);break;case 4:aw(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,a=t.memoizedProps.value;rr(Gy,o._currentValue),o._currentValue=a;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(rr(kr,kr.current&1),t.flags|=128,null):n&t.child.childLanes?FI(e,t,n):(rr(kr,kr.current&1),e=Ua(e,t,n),e!==null?e.sibling:null);rr(kr,kr.current&1);break;case 19:if(o=(n&t.childLanes)!==0,e.flags&128){if(o)return NI(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),rr(kr,kr.current),o)break;return null;case 22:case 23:return t.lanes=0,$I(e,t,n)}return Ua(e,t,n)}var jI,Bx,UI,VI;jI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bx=function(){};UI=function(e,t,n,o){var a=e.memoizedProps;if(a!==o){e=t.stateNode,qu(sa.current);var h=null;switch(n){case"input":a=sx(e,a),o=sx(e,o),h=[];break;case"select":a=Er({},a,{value:void 0}),o=Er({},o,{value:void 0}),h=[];break;case"textarea":a=ux(e,a),o=ux(e,o),h=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=jy)}hx(n,o);var d;n=null;for(w in a)if(!o.hasOwnProperty(w)&&a.hasOwnProperty(w)&&a[w]!=null)if(w==="style"){var u=a[w];for(d in u)u.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(If.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in o){var b=o[w];if(u=a!=null?a[w]:void 0,o.hasOwnProperty(w)&&b!==u&&(b!=null||u!=null))if(w==="style")if(u){for(d in u)!u.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in b)b.hasOwnProperty(d)&&u[d]!==b[d]&&(n||(n={}),n[d]=b[d])}else n||(h||(h=[]),h.push(w,n)),n=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,u=u?u.__html:void 0,b!=null&&u!==b&&(h=h||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(If.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&lr("scroll",e),h||u===b||(h=[])):(h=h||[]).push(w,b))}n&&(h=h||[]).push("style",n);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};VI=function(e,t,n,o){n!==o&&(t.flags|=4)};function jp(e,t){if(!_r)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function $i(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,o=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=o,e.childLanes=n,t}function MR(e,t,n){var o=t.pendingProps;switch(ew(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $i(t),null;case 1:return xo(t.type)&&Uy(),$i(t),null;case 3:return o=t.stateNode,sd(),ur(_o),ur(ji),uw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Fg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,As!==null&&(Gx(As),As=null))),Bx(e,t),$i(t),null;case 5:lw(t);var a=qu(Nf.current);if(n=t.type,e!==null&&t.stateNode!=null)UI(e,t,n,o,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Xe(166));return $i(t),null}if(e=qu(sa.current),Fg(t)){o=t.stateNode,n=t.type;var h=t.memoizedProps;switch(o[na]=t,o[Bf]=h,e=(t.mode&1)!==0,n){case"dialog":lr("cancel",o),lr("close",o);break;case"iframe":case"object":case"embed":lr("load",o);break;case"video":case"audio":for(a=0;a<of.length;a++)lr(of[a],o);break;case"source":lr("error",o);break;case"img":case"image":case"link":lr("error",o),lr("load",o);break;case"details":lr("toggle",o);break;case"input":gC(o,h),lr("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},lr("invalid",o);break;case"textarea":vC(o,h),lr("invalid",o)}hx(n,h),a=null;for(var d in h)if(h.hasOwnProperty(d)){var u=h[d];d==="children"?typeof u=="string"?o.textContent!==u&&(h.suppressHydrationWarning!==!0&&Bg(o.textContent,u,e),a=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(h.suppressHydrationWarning!==!0&&Bg(o.textContent,u,e),a=["children",""+u]):If.hasOwnProperty(d)&&u!=null&&d==="onScroll"&&lr("scroll",o)}switch(n){case"input":Mg(o),yC(o,h,!0);break;case"textarea":Mg(o),_C(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=jy)}o=a,t.updateQueue=o,o!==null&&(t.flags|=4)}else{d=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=y5(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=d.createElement(n,{is:o.is}):(e=d.createElement(n),n==="select"&&(d=e,o.multiple?d.multiple=!0:o.size&&(d.size=o.size))):e=d.createElementNS(e,n),e[na]=t,e[Bf]=o,jI(e,t,!1,!1),t.stateNode=e;e:{switch(d=dx(n,o),n){case"dialog":lr("cancel",e),lr("close",e),a=o;break;case"iframe":case"object":case"embed":lr("load",e),a=o;break;case"video":case"audio":for(a=0;a<of.length;a++)lr(of[a],e);a=o;break;case"source":lr("error",e),a=o;break;case"img":case"image":case"link":lr("error",e),lr("load",e),a=o;break;case"details":lr("toggle",e),a=o;break;case"input":gC(e,o),a=sx(e,o),lr("invalid",e);break;case"option":a=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},a=Er({},o,{value:void 0}),lr("invalid",e);break;case"textarea":vC(e,o),a=ux(e,o),lr("invalid",e);break;default:a=o}hx(n,a),u=a;for(h in u)if(u.hasOwnProperty(h)){var b=u[h];h==="style"?x5(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&v5(e,b)):h==="children"?typeof b=="string"?(n!=="textarea"||b!=="")&&Pf(e,b):typeof b=="number"&&Pf(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(If.hasOwnProperty(h)?b!=null&&h==="onScroll"&&lr("scroll",e):b!=null&&Fb(e,h,b,d))}switch(n){case"input":Mg(e),yC(e,o,!1);break;case"textarea":Mg(e),_C(e);break;case"option":o.value!=null&&e.setAttribute("value",""+Xl(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?Fh(e,!!o.multiple,h,!1):o.defaultValue!=null&&Fh(e,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=jy)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $i(t),null;case 6:if(e&&t.stateNode!=null)VI(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Xe(166));if(n=qu(Nf.current),qu(sa.current),Fg(t)){if(o=t.stateNode,n=t.memoizedProps,o[na]=t,(h=o.nodeValue!==n)&&(e=Wo,e!==null))switch(e.tag){case 3:Bg(o.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bg(o.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[na]=t,t.stateNode=o}return $i(t),null;case 13:if(ur(kr),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_r&&Vo!==null&&t.mode&1&&!(t.flags&128))aI(),id(),t.flags|=98560,h=!1;else if(h=Fg(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(Xe(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Xe(317));h[na]=t}else id(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$i(t),h=!1}else As!==null&&(Gx(As),As=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||kr.current&1?Qr===0&&(Qr=3):bw())),t.updateQueue!==null&&(t.flags|=4),$i(t),null);case 4:return sd(),Bx(e,t),e===null&&$f(t.stateNode.containerInfo),$i(t),null;case 10:return iw(t.type._context),$i(t),null;case 17:return xo(t.type)&&Uy(),$i(t),null;case 19:if(ur(kr),h=t.memoizedState,h===null)return $i(t),null;if(o=(t.flags&128)!==0,d=h.rendering,d===null)if(o)jp(h,!1);else{if(Qr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Ky(e),d!==null){for(t.flags|=128,jp(h,!1),o=d.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=n,n=t.child;n!==null;)h=n,e=o,h.flags&=14680066,d=h.alternate,d===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=d.childLanes,h.lanes=d.lanes,h.child=d.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=d.memoizedProps,h.memoizedState=d.memoizedState,h.updateQueue=d.updateQueue,h.type=d.type,e=d.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return rr(kr,kr.current&1|2),t.child}e=e.sibling}h.tail!==null&&Fr()>ld&&(t.flags|=128,o=!0,jp(h,!1),t.lanes=4194304)}else{if(!o)if(e=Ky(d),e!==null){if(t.flags|=128,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jp(h,!0),h.tail===null&&h.tailMode==="hidden"&&!d.alternate&&!_r)return $i(t),null}else 2*Fr()-h.renderingStartTime>ld&&n!==1073741824&&(t.flags|=128,o=!0,jp(h,!1),t.lanes=4194304);h.isBackwards?(d.sibling=t.child,t.child=d):(n=h.last,n!==null?n.sibling=d:t.child=d,h.last=d)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Fr(),t.sibling=null,n=kr.current,rr(kr,o?n&1|2:n&1),t):($i(t),null);case 22:case 23:return xw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Bo&1073741824&&($i(t),t.subtreeFlags&6&&(t.flags|=8192)):$i(t),null;case 24:return null;case 25:return null}throw Error(Xe(156,t.tag))}function AR(e,t){switch(ew(t),t.tag){case 1:return xo(t.type)&&Uy(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sd(),ur(_o),ur(ji),uw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lw(t),null;case 13:if(ur(kr),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Xe(340));id()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ur(kr),null;case 4:return sd(),null;case 10:return iw(t.type._context),null;case 22:case 23:return xw(),null;case 24:return null;default:return null}}var Ug=!1,Fi=!1,LR=typeof WeakSet=="function"?WeakSet:Set,kt=null;function Rh(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Dr(e,t,o)}else n.current=null}function Fx(e,t,n){try{n()}catch(o){Dr(e,t,o)}}var lk=!1;function zR(e,t){if(wx=By,e=Z5(),Jb(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var a=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var d=0,u=-1,b=-1,w=0,P=0,E=e,I=null;t:for(;;){for(var R;E!==n||a!==0&&E.nodeType!==3||(u=d+a),E!==h||o!==0&&E.nodeType!==3||(b=d+o),E.nodeType===3&&(d+=E.nodeValue.length),(R=E.firstChild)!==null;)I=E,E=R;for(;;){if(E===e)break t;if(I===n&&++w===a&&(u=d),I===h&&++P===o&&(b=d),(R=E.nextSibling)!==null)break;E=I,I=E.parentNode}E=R}n=u===-1||b===-1?null:{start:u,end:b}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sx={focusedElem:e,selectionRange:n},By=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){t=kt;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var U=F.memoizedProps,K=F.memoizedState,D=t.stateNode,j=D.getSnapshotBeforeUpdate(t.elementType===t.type?U:Ps(t.type,U),K);D.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xe(163))}}catch(Y){Dr(t,t.return,Y)}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}return F=lk,lk=!1,F}function yf(e,t,n){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&e)===e){var h=a.destroy;a.destroy=void 0,h!==void 0&&Fx(t,n,h)}a=a.next}while(a!==o)}}function $0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var o=n.create;n.destroy=o()}n=n.next}while(n!==t)}}function Nx(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function WI(e){var t=e.alternate;t!==null&&(e.alternate=null,WI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[na],delete t[Bf],delete t[Tx],delete t[mR],delete t[gR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qI(e){return e.tag===5||e.tag===3||e.tag===4}function uk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jx(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jy));else if(o!==4&&(e=e.child,e!==null))for(jx(e,t,n),e=e.sibling;e!==null;)jx(e,t,n),e=e.sibling}function Ux(e,t,n){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for(Ux(e,t,n),e=e.sibling;e!==null;)Ux(e,t,n),e=e.sibling}var bi=null,Ms=!1;function Al(e,t,n){for(n=n.child;n!==null;)GI(e,t,n),n=n.sibling}function GI(e,t,n){if(oa&&typeof oa.onCommitFiberUnmount=="function")try{oa.onCommitFiberUnmount(I0,n)}catch{}switch(n.tag){case 5:Fi||Rh(n,t);case 6:var o=bi,a=Ms;bi=null,Al(e,t,n),bi=o,Ms=a,bi!==null&&(Ms?(e=bi,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):bi.removeChild(n.stateNode));break;case 18:bi!==null&&(Ms?(e=bi,n=n.stateNode,e.nodeType===8?__(e.parentNode,n):e.nodeType===1&&__(e,n),zf(e)):__(bi,n.stateNode));break;case 4:o=bi,a=Ms,bi=n.stateNode.containerInfo,Ms=!0,Al(e,t,n),bi=o,Ms=a;break;case 0:case 11:case 14:case 15:if(!Fi&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var h=a,d=h.destroy;h=h.tag,d!==void 0&&(h&2||h&4)&&Fx(n,t,d),a=a.next}while(a!==o)}Al(e,t,n);break;case 1:if(!Fi&&(Rh(n,t),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Dr(n,t,u)}Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:n.mode&1?(Fi=(o=Fi)||n.memoizedState!==null,Al(e,t,n),Fi=o):Al(e,t,n);break;default:Al(e,t,n)}}function ck(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new LR),t.forEach(function(o){var a=UR.bind(null,e,o);n.has(o)||(n.add(o),o.then(a,a))})}}function Es(e,t){var n=t.deletions;if(n!==null)for(var o=0;o<n.length;o++){var a=n[o];try{var h=e,d=t,u=d;e:for(;u!==null;){switch(u.tag){case 5:bi=u.stateNode,Ms=!1;break e;case 3:bi=u.stateNode.containerInfo,Ms=!0;break e;case 4:bi=u.stateNode.containerInfo,Ms=!0;break e}u=u.return}if(bi===null)throw Error(Xe(160));GI(h,d,a),bi=null,Ms=!1;var b=a.alternate;b!==null&&(b.return=null),a.return=null}catch(w){Dr(a,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)HI(t,e),t=t.sibling}function HI(e,t){var n=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Es(t,e),Ks(e),o&4){try{yf(3,e,e.return),$0(3,e)}catch(U){Dr(e,e.return,U)}try{yf(5,e,e.return)}catch(U){Dr(e,e.return,U)}}break;case 1:Es(t,e),Ks(e),o&512&&n!==null&&Rh(n,n.return);break;case 5:if(Es(t,e),Ks(e),o&512&&n!==null&&Rh(n,n.return),e.flags&32){var a=e.stateNode;try{Pf(a,"")}catch(U){Dr(e,e.return,U)}}if(o&4&&(a=e.stateNode,a!=null)){var h=e.memoizedProps,d=n!==null?n.memoizedProps:h,u=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{u==="input"&&h.type==="radio"&&h.name!=null&&m5(a,h),dx(u,d);var w=dx(u,h);for(d=0;d<b.length;d+=2){var P=b[d],E=b[d+1];P==="style"?x5(a,E):P==="dangerouslySetInnerHTML"?v5(a,E):P==="children"?Pf(a,E):Fb(a,P,E,w)}switch(u){case"input":ax(a,h);break;case"textarea":g5(a,h);break;case"select":var I=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!h.multiple;var R=h.value;R!=null?Fh(a,!!h.multiple,R,!1):I!==!!h.multiple&&(h.defaultValue!=null?Fh(a,!!h.multiple,h.defaultValue,!0):Fh(a,!!h.multiple,h.multiple?[]:"",!1))}a[Bf]=h}catch(U){Dr(e,e.return,U)}}break;case 6:if(Es(t,e),Ks(e),o&4){if(e.stateNode===null)throw Error(Xe(162));a=e.stateNode,h=e.memoizedProps;try{a.nodeValue=h}catch(U){Dr(e,e.return,U)}}break;case 3:if(Es(t,e),Ks(e),o&4&&n!==null&&n.memoizedState.isDehydrated)try{zf(t.containerInfo)}catch(U){Dr(e,e.return,U)}break;case 4:Es(t,e),Ks(e);break;case 13:Es(t,e),Ks(e),a=e.child,a.flags&8192&&(h=a.memoizedState!==null,a.stateNode.isHidden=h,!h||a.alternate!==null&&a.alternate.memoizedState!==null||(vw=Fr())),o&4&&ck(e);break;case 22:if(P=n!==null&&n.memoizedState!==null,e.mode&1?(Fi=(w=Fi)||P,Es(t,e),Fi=w):Es(t,e),Ks(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!P&&e.mode&1)for(kt=e,P=e.child;P!==null;){for(E=kt=P;kt!==null;){switch(I=kt,R=I.child,I.tag){case 0:case 11:case 14:case 15:yf(4,I,I.return);break;case 1:Rh(I,I.return);var F=I.stateNode;if(typeof F.componentWillUnmount=="function"){o=I,n=I.return;try{t=o,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(U){Dr(o,n,U)}}break;case 5:Rh(I,I.return);break;case 22:if(I.memoizedState!==null){dk(E);continue}}R!==null?(R.return=I,kt=R):dk(E)}P=P.sibling}e:for(P=null,E=e;;){if(E.tag===5){if(P===null){P=E;try{a=E.stateNode,w?(h=a.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(u=E.stateNode,b=E.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,u.style.display=_5("display",d))}catch(U){Dr(e,e.return,U)}}}else if(E.tag===6){if(P===null)try{E.stateNode.nodeValue=w?"":E.memoizedProps}catch(U){Dr(e,e.return,U)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;P===E&&(P=null),E=E.return}P===E&&(P=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:Es(t,e),Ks(e),o&4&&ck(e);break;case 21:break;default:Es(t,e),Ks(e)}}function Ks(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qI(n)){var o=n;break e}n=n.return}throw Error(Xe(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(Pf(a,""),o.flags&=-33);var h=uk(e);Ux(e,h,a);break;case 3:case 4:var d=o.stateNode.containerInfo,u=uk(e);jx(e,u,d);break;default:throw Error(Xe(161))}}catch(b){Dr(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function RR(e,t,n){kt=e,ZI(e)}function ZI(e,t,n){for(var o=(e.mode&1)!==0;kt!==null;){var a=kt,h=a.child;if(a.tag===22&&o){var d=a.memoizedState!==null||Ug;if(!d){var u=a.alternate,b=u!==null&&u.memoizedState!==null||Fi;u=Ug;var w=Fi;if(Ug=d,(Fi=b)&&!w)for(kt=a;kt!==null;)d=kt,b=d.child,d.tag===22&&d.memoizedState!==null?pk(a):b!==null?(b.return=d,kt=b):pk(a);for(;h!==null;)kt=h,ZI(h),h=h.sibling;kt=a,Ug=u,Fi=w}hk(e)}else a.subtreeFlags&8772&&h!==null?(h.return=a,kt=h):hk(e)}}function hk(e){for(;kt!==null;){var t=kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fi||$0(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Fi)if(n===null)o.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ps(t.type,n.memoizedProps);o.componentDidUpdate(a,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&KC(t,h,o);break;case 3:var d=t.updateQueue;if(d!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}KC(t,d,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&n.focus();break;case"img":b.src&&(n.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var P=w.memoizedState;if(P!==null){var E=P.dehydrated;E!==null&&zf(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xe(163))}Fi||t.flags&512&&Nx(t)}catch(I){Dr(t,t.return,I)}}if(t===e){kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,kt=n;break}kt=t.return}}function dk(e){for(;kt!==null;){var t=kt;if(t===e){kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,kt=n;break}kt=t.return}}function pk(e){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{$0(4,t)}catch(b){Dr(t,n,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var a=t.return;try{o.componentDidMount()}catch(b){Dr(t,a,b)}}var h=t.return;try{Nx(t)}catch(b){Dr(t,h,b)}break;case 5:var d=t.return;try{Nx(t)}catch(b){Dr(t,d,b)}}}catch(b){Dr(t,t.return,b)}if(t===e){kt=null;break}var u=t.sibling;if(u!==null){u.return=t.return,kt=u;break}kt=t.return}}var DR=Math.ceil,Jy=Ka.ReactCurrentDispatcher,gw=Ka.ReactCurrentOwner,ms=Ka.ReactCurrentBatchConfig,Cn=0,pi=null,Hr=null,Ci=0,Bo=0,Dh=ru(0),Qr=0,Wf=null,sc=0,O0=0,yw=0,vf=null,yo=null,vw=0,ld=1/0,La=null,Qy=!1,Vx=null,Gl=null,Vg=!1,Bl=null,e0=0,_f=0,Wx=null,fy=-1,my=0;function no(){return Cn&6?Fr():fy!==-1?fy:fy=Fr()}function Hl(e){return e.mode&1?Cn&2&&Ci!==0?Ci&-Ci:vR.transition!==null?(my===0&&(my=L5()),my):(e=Un,e!==0||(e=window.event,e=e===void 0?16:F5(e.type)),e):1}function $s(e,t,n,o){if(50<_f)throw _f=0,Wx=null,Error(Xe(185));dm(e,n,o),(!(Cn&2)||e!==pi)&&(e===pi&&(!(Cn&2)&&(O0|=n),Qr===4&&Dl(e,Ci)),bo(e,o),n===1&&Cn===0&&!(t.mode&1)&&(ld=Fr()+500,z0&&iu()))}function bo(e,t){var n=e.callbackNode;vz(e,t);var o=Oy(e,e===pi?Ci:0);if(o===0)n!==null&&wC(n),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(n!=null&&wC(n),t===1)e.tag===0?yR(fk.bind(null,e)):iI(fk.bind(null,e)),pR(function(){!(Cn&6)&&iu()}),n=null;else{switch(z5(o)){case 1:n=Wb;break;case 4:n=M5;break;case 16:n=$y;break;case 536870912:n=A5;break;default:n=$y}n=nP(n,KI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function KI(e,t){if(fy=-1,my=0,Cn&6)throw Error(Xe(327));var n=e.callbackNode;if(Wh()&&e.callbackNode!==n)return null;var o=Oy(e,e===pi?Ci:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=t0(e,o);else{t=o;var a=Cn;Cn|=2;var h=YI();(pi!==e||Ci!==t)&&(La=null,ld=Fr()+500,Ku(e,t));do try{BR();break}catch(u){XI(e,u)}while(!0);rw(),Jy.current=h,Cn=a,Hr!==null?t=0:(pi=null,Ci=0,t=Qr)}if(t!==0){if(t===2&&(a=yx(e),a!==0&&(o=a,t=qx(e,a))),t===1)throw n=Wf,Ku(e,0),Dl(e,o),bo(e,Fr()),n;if(t===6)Dl(e,o);else{if(a=e.current.alternate,!(o&30)&&!$R(a)&&(t=t0(e,o),t===2&&(h=yx(e),h!==0&&(o=h,t=qx(e,h))),t===1))throw n=Wf,Ku(e,0),Dl(e,o),bo(e,Fr()),n;switch(e.finishedWork=a,e.finishedLanes=o,t){case 0:case 1:throw Error(Xe(345));case 2:Bu(e,yo,La);break;case 3:if(Dl(e,o),(o&130023424)===o&&(t=vw+500-Fr(),10<t)){if(Oy(e,0)!==0)break;if(a=e.suspendedLanes,(a&o)!==o){no(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=kx(Bu.bind(null,e,yo,La),t);break}Bu(e,yo,La);break;case 4:if(Dl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,a=-1;0<o;){var d=31-Ds(o);h=1<<d,d=t[d],d>a&&(a=d),o&=~h}if(o=a,o=Fr()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*DR(o/1960))-o,10<o){e.timeoutHandle=kx(Bu.bind(null,e,yo,La),o);break}Bu(e,yo,La);break;case 5:Bu(e,yo,La);break;default:throw Error(Xe(329))}}}return bo(e,Fr()),e.callbackNode===n?KI.bind(null,e):null}function qx(e,t){var n=vf;return e.current.memoizedState.isDehydrated&&(Ku(e,t).flags|=256),e=t0(e,t),e!==2&&(t=yo,yo=n,t!==null&&Gx(t)),e}function Gx(e){yo===null?yo=e:yo.push.apply(yo,e)}function $R(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var a=n[o],h=a.getSnapshot;a=a.value;try{if(!Bs(h(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dl(e,t){for(t&=~yw,t&=~O0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ds(t),o=1<<n;e[n]=-1,t&=~o}}function fk(e){if(Cn&6)throw Error(Xe(327));Wh();var t=Oy(e,0);if(!(t&1))return bo(e,Fr()),null;var n=t0(e,t);if(e.tag!==0&&n===2){var o=yx(e);o!==0&&(t=o,n=qx(e,o))}if(n===1)throw n=Wf,Ku(e,0),Dl(e,t),bo(e,Fr()),n;if(n===6)throw Error(Xe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bu(e,yo,La),bo(e,Fr()),null}function _w(e,t){var n=Cn;Cn|=1;try{return e(t)}finally{Cn=n,Cn===0&&(ld=Fr()+500,z0&&iu())}}function ac(e){Bl!==null&&Bl.tag===0&&!(Cn&6)&&Wh();var t=Cn;Cn|=1;var n=ms.transition,o=Un;try{if(ms.transition=null,Un=1,e)return e()}finally{Un=o,ms.transition=n,Cn=t,!(Cn&6)&&iu()}}function xw(){Bo=Dh.current,ur(Dh)}function Ku(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,dR(n)),Hr!==null)for(n=Hr.return;n!==null;){var o=n;switch(ew(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Uy();break;case 3:sd(),ur(_o),ur(ji),uw();break;case 5:lw(o);break;case 4:sd();break;case 13:ur(kr);break;case 19:ur(kr);break;case 10:iw(o.type._context);break;case 22:case 23:xw()}n=n.return}if(pi=e,Hr=e=Zl(e.current,null),Ci=Bo=t,Qr=0,Wf=null,yw=O0=sc=0,yo=vf=null,Wu!==null){for(t=0;t<Wu.length;t++)if(n=Wu[t],o=n.interleaved,o!==null){n.interleaved=null;var a=o.next,h=n.pending;if(h!==null){var d=h.next;h.next=a,o.next=d}n.pending=o}Wu=null}return e}function XI(e,t){do{var n=Hr;try{if(rw(),hy.current=Yy,Xy){for(var o=Tr.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Xy=!1}if(oc=0,hi=Jr=Tr=null,gf=!1,jf=0,gw.current=null,n===null||n.return===null){Qr=1,Wf=t,Hr=null;break}e:{var h=e,d=n.return,u=n,b=t;if(t=Ci,u.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,P=u,E=P.tag;if(!(P.mode&1)&&(E===0||E===11||E===15)){var I=P.alternate;I?(P.updateQueue=I.updateQueue,P.memoizedState=I.memoizedState,P.lanes=I.lanes):(P.updateQueue=null,P.memoizedState=null)}var R=tk(d);if(R!==null){R.flags&=-257,nk(R,d,u,h,t),R.mode&1&&ek(h,w,t),t=R,b=w;var F=t.updateQueue;if(F===null){var U=new Set;U.add(b),t.updateQueue=U}else F.add(b);break e}else{if(!(t&1)){ek(h,w,t),bw();break e}b=Error(Xe(426))}}else if(_r&&u.mode&1){var K=tk(d);if(K!==null){!(K.flags&65536)&&(K.flags|=256),nk(K,d,u,h,t),tw(ad(b,u));break e}}h=b=ad(b,u),Qr!==4&&(Qr=2),vf===null?vf=[h]:vf.push(h),h=d;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var D=zI(h,b,t);ZC(h,D);break e;case 1:u=b;var j=h.type,V=h.stateNode;if(!(h.flags&128)&&(typeof j.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Gl===null||!Gl.has(V)))){h.flags|=65536,t&=-t,h.lanes|=t;var Y=RI(h,u,t);ZC(h,Y);break e}}h=h.return}while(h!==null)}QI(n)}catch(ce){t=ce,Hr===n&&n!==null&&(Hr=n=n.return);continue}break}while(!0)}function YI(){var e=Jy.current;return Jy.current=Yy,e===null?Yy:e}function bw(){(Qr===0||Qr===3||Qr===2)&&(Qr=4),pi===null||!(sc&268435455)&&!(O0&268435455)||Dl(pi,Ci)}function t0(e,t){var n=Cn;Cn|=2;var o=YI();(pi!==e||Ci!==t)&&(La=null,Ku(e,t));do try{OR();break}catch(a){XI(e,a)}while(!0);if(rw(),Cn=n,Jy.current=o,Hr!==null)throw Error(Xe(261));return pi=null,Ci=0,Qr}function OR(){for(;Hr!==null;)JI(Hr)}function BR(){for(;Hr!==null&&!uz();)JI(Hr)}function JI(e){var t=tP(e.alternate,e,Bo);e.memoizedProps=e.pendingProps,t===null?QI(e):Hr=t,gw.current=null}function QI(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=AR(n,t),n!==null){n.flags&=32767,Hr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qr=6,Hr=null;return}}else if(n=MR(n,t,Bo),n!==null){Hr=n;return}if(t=t.sibling,t!==null){Hr=t;return}Hr=t=e}while(t!==null);Qr===0&&(Qr=5)}function Bu(e,t,n){var o=Un,a=ms.transition;try{ms.transition=null,Un=1,FR(e,t,n,o)}finally{ms.transition=a,Un=o}return null}function FR(e,t,n,o){do Wh();while(Bl!==null);if(Cn&6)throw Error(Xe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Xe(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(_z(e,h),e===pi&&(Hr=pi=null,Ci=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vg||(Vg=!0,nP($y,function(){return Wh(),null})),h=(n.flags&15990)!==0,n.subtreeFlags&15990||h){h=ms.transition,ms.transition=null;var d=Un;Un=1;var u=Cn;Cn|=4,gw.current=null,zR(e,n),HI(n,e),oR(Sx),By=!!wx,Sx=wx=null,e.current=n,RR(n),cz(),Cn=u,Un=d,ms.transition=h}else e.current=n;if(Vg&&(Vg=!1,Bl=e,e0=a),h=e.pendingLanes,h===0&&(Gl=null),pz(n.stateNode),bo(e,Fr()),t!==null)for(o=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],o(a.value,{componentStack:a.stack,digest:a.digest});if(Qy)throw Qy=!1,e=Vx,Vx=null,e;return e0&1&&e.tag!==0&&Wh(),h=e.pendingLanes,h&1?e===Wx?_f++:(_f=0,Wx=e):_f=0,iu(),null}function Wh(){if(Bl!==null){var e=z5(e0),t=ms.transition,n=Un;try{if(ms.transition=null,Un=16>e?16:e,Bl===null)var o=!1;else{if(e=Bl,Bl=null,e0=0,Cn&6)throw Error(Xe(331));var a=Cn;for(Cn|=4,kt=e.current;kt!==null;){var h=kt,d=h.child;if(kt.flags&16){var u=h.deletions;if(u!==null){for(var b=0;b<u.length;b++){var w=u[b];for(kt=w;kt!==null;){var P=kt;switch(P.tag){case 0:case 11:case 15:yf(8,P,h)}var E=P.child;if(E!==null)E.return=P,kt=E;else for(;kt!==null;){P=kt;var I=P.sibling,R=P.return;if(WI(P),P===w){kt=null;break}if(I!==null){I.return=R,kt=I;break}kt=R}}}var F=h.alternate;if(F!==null){var U=F.child;if(U!==null){F.child=null;do{var K=U.sibling;U.sibling=null,U=K}while(U!==null)}}kt=h}}if(h.subtreeFlags&2064&&d!==null)d.return=h,kt=d;else e:for(;kt!==null;){if(h=kt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:yf(9,h,h.return)}var D=h.sibling;if(D!==null){D.return=h.return,kt=D;break e}kt=h.return}}var j=e.current;for(kt=j;kt!==null;){d=kt;var V=d.child;if(d.subtreeFlags&2064&&V!==null)V.return=d,kt=V;else e:for(d=j;kt!==null;){if(u=kt,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:$0(9,u)}}catch(ce){Dr(u,u.return,ce)}if(u===d){kt=null;break e}var Y=u.sibling;if(Y!==null){Y.return=u.return,kt=Y;break e}kt=u.return}}if(Cn=a,iu(),oa&&typeof oa.onPostCommitFiberRoot=="function")try{oa.onPostCommitFiberRoot(I0,e)}catch{}o=!0}return o}finally{Un=n,ms.transition=t}}return!1}function mk(e,t,n){t=ad(n,t),t=zI(e,t,1),e=ql(e,t,1),t=no(),e!==null&&(dm(e,1,t),bo(e,t))}function Dr(e,t,n){if(e.tag===3)mk(e,e,n);else for(;t!==null;){if(t.tag===3){mk(t,e,n);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Gl===null||!Gl.has(o))){e=ad(n,e),e=RI(t,e,1),t=ql(t,e,1),e=no(),t!==null&&(dm(t,1,e),bo(t,e));break}}t=t.return}}function NR(e,t,n){var o=e.pingCache;o!==null&&o.delete(t),t=no(),e.pingedLanes|=e.suspendedLanes&n,pi===e&&(Ci&n)===n&&(Qr===4||Qr===3&&(Ci&130023424)===Ci&&500>Fr()-vw?Ku(e,0):yw|=n),bo(e,t)}function eP(e,t){t===0&&(e.mode&1?(t=zg,zg<<=1,!(zg&130023424)&&(zg=4194304)):t=1);var n=no();e=ja(e,t),e!==null&&(dm(e,t,n),bo(e,n))}function jR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eP(e,n)}function UR(e,t){var n=0;switch(e.tag){case 13:var o=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Xe(314))}o!==null&&o.delete(t),eP(e,n)}var tP;tP=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_o.current)vo=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return vo=!1,PR(e,t,n);vo=!!(e.flags&131072)}else vo=!1,_r&&t.flags&1048576&&oI(t,qy,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;py(e,t),e=t.pendingProps;var a=rd(t,ji.current);Vh(t,n),a=hw(null,t,o,e,a,n);var h=dw();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,xo(o)?(h=!0,Vy(t)):h=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,sw(t),a.updater=D0,t.stateNode=a,a._reactInternals=t,Lx(t,o,e,n),t=Dx(null,t,o,!0,h,n)):(t.tag=0,_r&&h&&Qb(t),eo(null,t,a,n),t=t.child),t;case 16:o=t.elementType;e:{switch(py(e,t),e=t.pendingProps,a=o._init,o=a(o._payload),t.type=o,a=t.tag=WR(o),e=Ps(o,e),a){case 0:t=Rx(null,t,o,e,n);break e;case 1:t=ok(null,t,o,e,n);break e;case 11:t=rk(null,t,o,e,n);break e;case 14:t=ik(null,t,o,Ps(o.type,e),n);break e}throw Error(Xe(306,o,""))}return t;case 0:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ps(o,a),Rx(e,t,o,a,n);case 1:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ps(o,a),ok(e,t,o,a,n);case 3:e:{if(BI(t),e===null)throw Error(Xe(387));o=t.pendingProps,h=t.memoizedState,a=h.element,hI(e,t),Zy(t,o,null,n);var d=t.memoizedState;if(o=d.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){a=ad(Error(Xe(423)),t),t=sk(e,t,o,n,a);break e}else if(o!==a){a=ad(Error(Xe(424)),t),t=sk(e,t,o,n,a);break e}else for(Vo=Wl(t.stateNode.containerInfo.firstChild),Wo=t,_r=!0,As=null,n=uI(t,null,o,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(id(),o===a){t=Ua(e,t,n);break e}eo(e,t,o,n)}t=t.child}return t;case 5:return dI(t),e===null&&Px(t),o=t.type,a=t.pendingProps,h=e!==null?e.memoizedProps:null,d=a.children,Cx(o,a)?d=null:h!==null&&Cx(o,h)&&(t.flags|=32),OI(e,t),eo(e,t,d,n),t.child;case 6:return e===null&&Px(t),null;case 13:return FI(e,t,n);case 4:return aw(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=od(t,null,o,n):eo(e,t,o,n),t.child;case 11:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ps(o,a),rk(e,t,o,a,n);case 7:return eo(e,t,t.pendingProps,n),t.child;case 8:return eo(e,t,t.pendingProps.children,n),t.child;case 12:return eo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(o=t.type._context,a=t.pendingProps,h=t.memoizedProps,d=a.value,rr(Gy,o._currentValue),o._currentValue=d,h!==null)if(Bs(h.value,d)){if(h.children===a.children&&!_o.current){t=Ua(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var u=h.dependencies;if(u!==null){d=h.child;for(var b=u.firstContext;b!==null;){if(b.context===o){if(h.tag===1){b=Oa(-1,n&-n),b.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var P=w.pending;P===null?b.next=b:(b.next=P.next,P.next=b),w.pending=b}}h.lanes|=n,b=h.alternate,b!==null&&(b.lanes|=n),Mx(h.return,n,t),u.lanes|=n;break}b=b.next}}else if(h.tag===10)d=h.type===t.type?null:h.child;else if(h.tag===18){if(d=h.return,d===null)throw Error(Xe(341));d.lanes|=n,u=d.alternate,u!==null&&(u.lanes|=n),Mx(d,n,t),d=h.sibling}else d=h.child;if(d!==null)d.return=h;else for(d=h;d!==null;){if(d===t){d=null;break}if(h=d.sibling,h!==null){h.return=d.return,d=h;break}d=d.return}h=d}eo(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,o=t.pendingProps.children,Vh(t,n),a=gs(a),o=o(a),t.flags|=1,eo(e,t,o,n),t.child;case 14:return o=t.type,a=Ps(o,t.pendingProps),a=Ps(o.type,a),ik(e,t,o,a,n);case 15:return DI(e,t,t.type,t.pendingProps,n);case 17:return o=t.type,a=t.pendingProps,a=t.elementType===o?a:Ps(o,a),py(e,t),t.tag=1,xo(o)?(e=!0,Vy(t)):e=!1,Vh(t,n),LI(t,o,a),Lx(t,o,a,n),Dx(null,t,o,!0,e,n);case 19:return NI(e,t,n);case 22:return $I(e,t,n)}throw Error(Xe(156,t.tag))};function nP(e,t){return P5(e,t)}function VR(e,t,n,o){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ds(e,t,n,o){return new VR(e,t,n,o)}function ww(e){return e=e.prototype,!(!e||!e.isReactComponent)}function WR(e){if(typeof e=="function")return ww(e)?1:0;if(e!=null){if(e=e.$$typeof,e===jb)return 11;if(e===Ub)return 14}return 2}function Zl(e,t){var n=e.alternate;return n===null?(n=ds(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gy(e,t,n,o,a,h){var d=2;if(o=e,typeof e=="function")ww(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case kh:return Xu(n.children,a,h,t);case Nb:d=8,a|=8;break;case nx:return e=ds(12,n,t,a|2),e.elementType=nx,e.lanes=h,e;case rx:return e=ds(13,n,t,a),e.elementType=rx,e.lanes=h,e;case ix:return e=ds(19,n,t,a),e.elementType=ix,e.lanes=h,e;case d5:return B0(n,a,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case c5:d=10;break e;case h5:d=9;break e;case jb:d=11;break e;case Ub:d=14;break e;case Ll:d=16,o=null;break e}throw Error(Xe(130,e==null?e:typeof e,""))}return t=ds(d,n,t,a),t.elementType=e,t.type=o,t.lanes=h,t}function Xu(e,t,n,o){return e=ds(7,e,o,t),e.lanes=n,e}function B0(e,t,n,o){return e=ds(22,e,o,t),e.elementType=d5,e.lanes=n,e.stateNode={isHidden:!1},e}function E_(e,t,n){return e=ds(6,e,null,t),e.lanes=n,e}function I_(e,t,n){return t=ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qR(e,t,n,o,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l_(0),this.expirationTimes=l_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l_(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Sw(e,t,n,o,a,h,d,u,b){return e=new qR(e,t,n,u,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=ds(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},sw(h),e}function GR(e,t,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ch,key:o==null?null:""+o,children:e,containerInfo:t,implementation:n}}function rP(e){if(!e)return Yl;e=e._reactInternals;e:{if(pc(e)!==e||e.tag!==1)throw Error(Xe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(xo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Xe(171))}if(e.tag===1){var n=e.type;if(xo(n))return rI(e,n,t)}return t}function iP(e,t,n,o,a,h,d,u,b){return e=Sw(n,o,!0,e,a,h,d,u,b),e.context=rP(null),n=e.current,o=no(),a=Hl(n),h=Oa(o,a),h.callback=t??null,ql(n,h,a),e.current.lanes=a,dm(e,a,o),bo(e,o),e}function F0(e,t,n,o){var a=t.current,h=no(),d=Hl(a);return n=rP(n),t.context===null?t.context=n:t.pendingContext=n,t=Oa(h,d),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=ql(a,t,d),e!==null&&($s(e,a,d,h),cy(e,a,d)),d}function n0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function gk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Cw(e,t){gk(e,t),(e=e.alternate)&&gk(e,t)}function HR(){return null}var oP=typeof reportError=="function"?reportError:function(e){console.error(e)};function kw(e){this._internalRoot=e}N0.prototype.render=kw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Xe(409));F0(e,t,null,null)};N0.prototype.unmount=kw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ac(function(){F0(null,e,null,null)}),t[Na]=null}};function N0(e){this._internalRoot=e}N0.prototype.unstable_scheduleHydration=function(e){if(e){var t=$5();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rl.length&&t!==0&&t<Rl[n].priority;n++);Rl.splice(n,0,e),n===0&&B5(e)}};function Tw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function j0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function yk(){}function ZR(e,t,n,o,a){if(a){if(typeof o=="function"){var h=o;o=function(){var w=n0(d);h.call(w)}}var d=iP(t,o,e,0,null,!1,!1,"",yk);return e._reactRootContainer=d,e[Na]=d.current,$f(e.nodeType===8?e.parentNode:e),ac(),d}for(;a=e.lastChild;)e.removeChild(a);if(typeof o=="function"){var u=o;o=function(){var w=n0(b);u.call(w)}}var b=Sw(e,0,!1,null,null,!1,!1,"",yk);return e._reactRootContainer=b,e[Na]=b.current,$f(e.nodeType===8?e.parentNode:e),ac(function(){F0(t,b,n,o)}),b}function U0(e,t,n,o,a){var h=n._reactRootContainer;if(h){var d=h;if(typeof a=="function"){var u=a;a=function(){var b=n0(d);u.call(b)}}F0(t,d,e,a)}else d=ZR(n,t,e,a,o);return n0(d)}R5=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=rf(t.pendingLanes);n!==0&&(qb(t,n|1),bo(t,Fr()),!(Cn&6)&&(ld=Fr()+500,iu()))}break;case 13:ac(function(){var o=ja(e,1);if(o!==null){var a=no();$s(o,e,1,a)}}),Cw(e,1)}};Gb=function(e){if(e.tag===13){var t=ja(e,134217728);if(t!==null){var n=no();$s(t,e,134217728,n)}Cw(e,134217728)}};D5=function(e){if(e.tag===13){var t=Hl(e),n=ja(e,t);if(n!==null){var o=no();$s(n,e,t,o)}Cw(e,t)}};$5=function(){return Un};O5=function(e,t){var n=Un;try{return Un=e,t()}finally{Un=n}};fx=function(e,t,n){switch(t){case"input":if(ax(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var o=n[t];if(o!==e&&o.form===e.form){var a=L0(o);if(!a)throw Error(Xe(90));f5(o),ax(o,a)}}}break;case"textarea":g5(e,n);break;case"select":t=n.value,t!=null&&Fh(e,!!n.multiple,t,!1)}};S5=_w;C5=ac;var KR={usingClientEntryPoint:!1,Events:[fm,Ph,L0,b5,w5,_w]},Up={findFiberByHostInstance:Vu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},XR={bundleType:Up.bundleType,version:Up.version,rendererPackageName:Up.rendererPackageName,rendererConfig:Up.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ka.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=E5(e),e===null?null:e.stateNode},findFiberByHostInstance:Up.findFiberByHostInstance||HR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wg.isDisabled&&Wg.supportsFiber)try{I0=Wg.inject(XR),oa=Wg}catch{}}Ho.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KR;Ho.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tw(t))throw Error(Xe(200));return GR(e,t,null,n)};Ho.createRoot=function(e,t){if(!Tw(e))throw Error(Xe(299));var n=!1,o="",a=oP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Sw(e,1,!1,null,null,n,!1,o,a),e[Na]=t.current,$f(e.nodeType===8?e.parentNode:e),new kw(t)};Ho.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Xe(188)):(e=Object.keys(e).join(","),Error(Xe(268,e)));return e=E5(t),e=e===null?null:e.stateNode,e};Ho.flushSync=function(e){return ac(e)};Ho.hydrate=function(e,t,n){if(!j0(t))throw Error(Xe(200));return U0(null,e,t,!0,n)};Ho.hydrateRoot=function(e,t,n){if(!Tw(e))throw Error(Xe(405));var o=n!=null&&n.hydratedSources||null,a=!1,h="",d=oP;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),t=iP(t,null,e,1,n??null,a,!1,h,d),e[Na]=t.current,$f(e),o)for(e=0;e<o.length;e++)n=o[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new N0(t)};Ho.render=function(e,t,n){if(!j0(t))throw Error(Xe(200));return U0(null,e,t,!1,n)};Ho.unmountComponentAtNode=function(e){if(!j0(e))throw Error(Xe(40));return e._reactRootContainer?(ac(function(){U0(null,null,e,!1,function(){e._reactRootContainer=null,e[Na]=null})}),!0):!1};Ho.unstable_batchedUpdates=_w;Ho.unstable_renderSubtreeIntoContainer=function(e,t,n,o){if(!j0(n))throw Error(Xe(200));if(e==null||e._reactInternals===void 0)throw Error(Xe(38));return U0(e,t,n,!1,o)};Ho.version="18.3.1-next-f1338f8080-20240426";function sP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sP)}catch(e){console.error(e)}}sP(),s5.exports=Ho;var Ew=s5.exports;const qg=cm(Ew);var vk=Ew;ex.createRoot=vk.createRoot,ex.hydrateRoot=vk.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qf.apply(this,arguments)}var Fl;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fl||(Fl={}));const _k="popstate";function YR(e){e===void 0&&(e={});function t(o,a){let{pathname:h,search:d,hash:u}=o.location;return Hx("",{pathname:h,search:d,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(o,a){return typeof a=="string"?a:lP(a)}return QR(t,n,null,e)}function ti(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function aP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function JR(){return Math.random().toString(36).substr(2,8)}function xk(e,t){return{usr:e.state,key:e.key,idx:t}}function Hx(e,t,n,o){return n===void 0&&(n=null),qf({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?gd(t):t,{state:n,key:t&&t.key||o||JR()})}function lP(e){let{pathname:t="/",search:n="",hash:o=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(t+=o.charAt(0)==="#"?o:"#"+o),t}function gd(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let o=e.indexOf("?");o>=0&&(t.search=e.substr(o),e=e.substr(0,o)),e&&(t.pathname=e)}return t}function QR(e,t,n,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:h=!1}=o,d=a.history,u=Fl.Pop,b=null,w=P();w==null&&(w=0,d.replaceState(qf({},d.state,{idx:w}),""));function P(){return(d.state||{idx:null}).idx}function E(){u=Fl.Pop;let K=P(),D=K==null?null:K-w;w=K,b&&b({action:u,location:U.location,delta:D})}function I(K,D){u=Fl.Push;let j=Hx(U.location,K,D);w=P()+1;let V=xk(j,w),Y=U.createHref(j);try{d.pushState(V,"",Y)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;a.location.assign(Y)}h&&b&&b({action:u,location:U.location,delta:1})}function R(K,D){u=Fl.Replace;let j=Hx(U.location,K,D);w=P();let V=xk(j,w),Y=U.createHref(j);d.replaceState(V,"",Y),h&&b&&b({action:u,location:U.location,delta:0})}function F(K){let D=a.location.origin!=="null"?a.location.origin:a.location.href,j=typeof K=="string"?K:lP(K);return j=j.replace(/ $/,"%20"),ti(D,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,D)}let U={get action(){return u},get location(){return e(a,d)},listen(K){if(b)throw new Error("A history only accepts one active listener");return a.addEventListener(_k,E),b=K,()=>{a.removeEventListener(_k,E),b=null}},createHref(K){return t(a,K)},createURL:F,encodeLocation(K){let D=F(K);return{pathname:D.pathname,search:D.search,hash:D.hash}},push:I,replace:R,go(K){return d.go(K)}};return U}var bk;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bk||(bk={}));function e6(e,t,n){return n===void 0&&(n="/"),t6(e,t,n,!1)}function t6(e,t,n,o){let a=typeof t=="string"?gd(t):t,h=hP(a.pathname||"/",n);if(h==null)return null;let d=uP(e);n6(d);let u=null;for(let b=0;u==null&&b<d.length;++b){let w=p6(h);u=h6(d[b],w,o)}return u}function uP(e,t,n,o){t===void 0&&(t=[]),n===void 0&&(n=[]),o===void 0&&(o="");let a=(h,d,u)=>{let b={relativePath:u===void 0?h.path||"":u,caseSensitive:h.caseSensitive===!0,childrenIndex:d,route:h};b.relativePath.startsWith("/")&&(ti(b.relativePath.startsWith(o),'Absolute route path "'+b.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),b.relativePath=b.relativePath.slice(o.length));let w=Yu([o,b.relativePath]),P=n.concat(b);h.children&&h.children.length>0&&(ti(h.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),uP(h.children,t,P,w)),!(h.path==null&&!h.index)&&t.push({path:w,score:u6(w,h.index),routesMeta:P})};return e.forEach((h,d)=>{var u;if(h.path===""||!((u=h.path)!=null&&u.includes("?")))a(h,d);else for(let b of cP(h.path))a(h,d,b)}),t}function cP(e){let t=e.split("/");if(t.length===0)return[];let[n,...o]=t,a=n.endsWith("?"),h=n.replace(/\?$/,"");if(o.length===0)return a?[h,""]:[h];let d=cP(o.join("/")),u=[];return u.push(...d.map(b=>b===""?h:[h,b].join("/"))),a&&u.push(...d),u.map(b=>e.startsWith("/")&&b===""?"/":b)}function n6(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:c6(t.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}const r6=/^:[\w-]+$/,i6=3,o6=2,s6=1,a6=10,l6=-2,wk=e=>e==="*";function u6(e,t){let n=e.split("/"),o=n.length;return n.some(wk)&&(o+=l6),t&&(o+=o6),n.filter(a=>!wk(a)).reduce((a,h)=>a+(r6.test(h)?i6:h===""?s6:a6),o)}function c6(e,t){return e.length===t.length&&e.slice(0,-1).every((o,a)=>o===t[a])?e[e.length-1]-t[t.length-1]:0}function h6(e,t,n){let{routesMeta:o}=e,a={},h="/",d=[];for(let u=0;u<o.length;++u){let b=o[u],w=u===o.length-1,P=h==="/"?t:t.slice(h.length)||"/",E=Sk({path:b.relativePath,caseSensitive:b.caseSensitive,end:w},P),I=b.route;if(!E&&w&&n&&!o[o.length-1].route.index&&(E=Sk({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},P)),!E)return null;Object.assign(a,E.params),d.push({params:a,pathname:Yu([h,E.pathname]),pathnameBase:_6(Yu([h,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(h=Yu([h,E.pathnameBase]))}return d}function Sk(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,o]=d6(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let h=a[0],d=h.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:o.reduce((w,P,E)=>{let{paramName:I,isOptional:R}=P;if(I==="*"){let U=u[E]||"";d=h.slice(0,h.length-U.length).replace(/(.)\/+$/,"$1")}const F=u[E];return R&&!F?w[I]=void 0:w[I]=(F||"").replace(/%2F/g,"/"),w},{}),pathname:h,pathnameBase:d,pattern:e}}function d6(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),aP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let o=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,b)=>(o.push({paramName:u,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(o.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),o]}function p6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return aP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function hP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,o=e.charAt(n);return o&&o!=="/"?null:e.slice(n)||"/"}function f6(e,t){t===void 0&&(t="/");let{pathname:n,search:o="",hash:a=""}=typeof e=="string"?gd(e):e;return{pathname:n?n.startsWith("/")?n:m6(n,t):t,search:x6(o),hash:b6(a)}}function m6(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function P_(e,t,n,o){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function g6(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function y6(e,t){let n=g6(e);return t?n.map((o,a)=>a===n.length-1?o.pathname:o.pathnameBase):n.map(o=>o.pathnameBase)}function v6(e,t,n,o){o===void 0&&(o=!1);let a;typeof e=="string"?a=gd(e):(a=qf({},e),ti(!a.pathname||!a.pathname.includes("?"),P_("?","pathname","search",a)),ti(!a.pathname||!a.pathname.includes("#"),P_("#","pathname","hash",a)),ti(!a.search||!a.search.includes("#"),P_("#","search","hash",a)));let h=e===""||a.pathname==="",d=h?"/":a.pathname,u;if(d==null)u=n;else{let E=t.length-1;if(!o&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),E-=1;a.pathname=I.join("/")}u=E>=0?t[E]:"/"}let b=f6(a,u),w=d&&d!=="/"&&d.endsWith("/"),P=(h||d===".")&&n.endsWith("/");return!b.pathname.endsWith("/")&&(w||P)&&(b.pathname+="/"),b}const Yu=e=>e.join("/").replace(/\/\/+/g,"/"),_6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),x6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,b6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function w6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const dP=["post","put","patch","delete"];new Set(dP);const S6=["get",...dP];new Set(S6);/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Gf.apply(this,arguments)}const Iw=re.createContext(null),C6=re.createContext(null),V0=re.createContext(null),W0=re.createContext(null),yd=re.createContext({outlet:null,matches:[],isDataRoute:!1}),pP=re.createContext(null);function q0(){return re.useContext(W0)!=null}function Pw(){return q0()||ti(!1),re.useContext(W0).location}function fP(e){re.useContext(V0).static||re.useLayoutEffect(e)}function Mw(){let{isDataRoute:e}=re.useContext(yd);return e?O6():k6()}function k6(){q0()||ti(!1);let e=re.useContext(Iw),{basename:t,future:n,navigator:o}=re.useContext(V0),{matches:a}=re.useContext(yd),{pathname:h}=Pw(),d=JSON.stringify(y6(a,n.v7_relativeSplatPath)),u=re.useRef(!1);return fP(()=>{u.current=!0}),re.useCallback(function(w,P){if(P===void 0&&(P={}),!u.current)return;if(typeof w=="number"){o.go(w);return}let E=v6(w,JSON.parse(d),h,P.relative==="path");e==null&&t!=="/"&&(E.pathname=E.pathname==="/"?t:Yu([t,E.pathname])),(P.replace?o.replace:o.push)(E,P.state,P)},[t,o,d,h,e])}function T6(e,t){return E6(e,t)}function E6(e,t,n,o){q0()||ti(!1);let{navigator:a}=re.useContext(V0),{matches:h}=re.useContext(yd),d=h[h.length-1],u=d?d.params:{};d&&d.pathname;let b=d?d.pathnameBase:"/";d&&d.route;let w=Pw(),P;if(t){var E;let K=typeof t=="string"?gd(t):t;b==="/"||(E=K.pathname)!=null&&E.startsWith(b)||ti(!1),P=K}else P=w;let I=P.pathname||"/",R=I;if(b!=="/"){let K=b.replace(/^\//,"").split("/");R="/"+I.replace(/^\//,"").split("/").slice(K.length).join("/")}let F=e6(e,{pathname:R}),U=L6(F&&F.map(K=>Object.assign({},K,{params:Object.assign({},u,K.params),pathname:Yu([b,a.encodeLocation?a.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?b:Yu([b,a.encodeLocation?a.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,n,o);return t&&U?re.createElement(W0.Provider,{value:{location:Gf({pathname:"/",search:"",hash:"",state:null,key:"default"},P),navigationType:Fl.Pop}},U):U}function I6(){let e=$6(),t=w6(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},t),n?re.createElement("pre",{style:a},n):null,null)}const P6=re.createElement(I6,null);class M6 extends re.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?re.createElement(yd.Provider,{value:this.props.routeContext},re.createElement(pP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function A6(e){let{routeContext:t,match:n,children:o}=e,a=re.useContext(Iw);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),re.createElement(yd.Provider,{value:t},o)}function L6(e,t,n,o){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),o===void 0&&(o=null),e==null){var h;if(!n)return null;if(n.errors)e=n.matches;else if((h=o)!=null&&h.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let d=e,u=(a=n)==null?void 0:a.errors;if(u!=null){let P=d.findIndex(E=>E.route.id&&(u==null?void 0:u[E.route.id])!==void 0);P>=0||ti(!1),d=d.slice(0,Math.min(d.length,P+1))}let b=!1,w=-1;if(n&&o&&o.v7_partialHydration)for(let P=0;P<d.length;P++){let E=d[P];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(w=P),E.route.id){let{loaderData:I,errors:R}=n,F=E.route.loader&&I[E.route.id]===void 0&&(!R||R[E.route.id]===void 0);if(E.route.lazy||F){b=!0,w>=0?d=d.slice(0,w+1):d=[d[0]];break}}}return d.reduceRight((P,E,I)=>{let R,F=!1,U=null,K=null;n&&(R=u&&E.route.id?u[E.route.id]:void 0,U=E.route.errorElement||P6,b&&(w<0&&I===0?(F=!0,K=null):w===I&&(F=!0,K=E.route.hydrateFallbackElement||null)));let D=t.concat(d.slice(0,I+1)),j=()=>{let V;return R?V=U:F?V=K:E.route.Component?V=re.createElement(E.route.Component,null):E.route.element?V=E.route.element:V=P,re.createElement(A6,{match:E,routeContext:{outlet:P,matches:D,isDataRoute:n!=null},children:V})};return n&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?re.createElement(M6,{location:n.location,revalidation:n.revalidation,component:U,error:R,children:j(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):j()},null)}var mP=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mP||{}),r0=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(r0||{});function z6(e){let t=re.useContext(Iw);return t||ti(!1),t}function R6(e){let t=re.useContext(C6);return t||ti(!1),t}function D6(e){let t=re.useContext(yd);return t||ti(!1),t}function gP(e){let t=D6(),n=t.matches[t.matches.length-1];return n.route.id||ti(!1),n.route.id}function $6(){var e;let t=re.useContext(pP),n=R6(r0.UseRouteError),o=gP(r0.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[o]}function O6(){let{router:e}=z6(mP.UseNavigateStable),t=gP(r0.UseNavigateStable),n=re.useRef(!1);return fP(()=>{n.current=!0}),re.useCallback(function(a,h){h===void 0&&(h={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Gf({fromRouteId:t},h)))},[e,t])}const Ck={};function B6(e,t){Ck[t]||(Ck[t]=!0,console.warn(t))}const kk=(e,t,n)=>B6(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function F6(e,t){e!=null&&e.v7_startTransition||kk("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&!t&&kk("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath")}function sf(e){ti(!1)}function N6(e){let{basename:t="/",children:n=null,location:o,navigationType:a=Fl.Pop,navigator:h,static:d=!1,future:u}=e;q0()&&ti(!1);let b=t.replace(/^\/*/,"/"),w=re.useMemo(()=>({basename:b,navigator:h,static:d,future:Gf({v7_relativeSplatPath:!1},u)}),[b,u,h,d]);typeof o=="string"&&(o=gd(o));let{pathname:P="/",search:E="",hash:I="",state:R=null,key:F="default"}=o,U=re.useMemo(()=>{let K=hP(P,b);return K==null?null:{location:{pathname:K,search:E,hash:I,state:R,key:F},navigationType:a}},[b,P,E,I,R,F,a]);return U==null?null:re.createElement(V0.Provider,{value:w},re.createElement(W0.Provider,{children:n,value:U}))}function j6(e){let{children:t,location:n}=e;return T6(Zx(t),n)}new Promise(()=>{});function Zx(e,t){t===void 0&&(t=[]);let n=[];return re.Children.forEach(e,(o,a)=>{if(!re.isValidElement(o))return;let h=[...t,a];if(o.type===re.Fragment){n.push.apply(n,Zx(o.props.children,h));return}o.type!==sf&&ti(!1),!o.props.index||!o.props.children||ti(!1);let d={id:o.props.id||h.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(d.children=Zx(o.props.children,h)),n.push(d)}),n}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const U6="6";try{window.__reactRouterVersion=U6}catch{}const V6="startTransition",Tk=Ly[V6];function W6(e){let{basename:t,children:n,future:o,window:a}=e,h=re.useRef();h.current==null&&(h.current=YR({window:a,v5Compat:!0}));let d=h.current,[u,b]=re.useState({action:d.action,location:d.location}),{v7_startTransition:w}=o||{},P=re.useCallback(E=>{w&&Tk?Tk(()=>b(E)):b(E)},[b,w]);return re.useLayoutEffect(()=>d.listen(P),[d,P]),re.useEffect(()=>F6(o),[o]),re.createElement(N6,{basename:t,children:n,location:u.location,navigationType:u.action,navigator:d,future:o})}var Ek;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ek||(Ek={}));var Ik;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ik||(Ik={}));var yP={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */(function(e,t){(function(n,o){e.exports=o()})(kL,function(){var n={},o={};function a(d,u,b){if(o[d]=b,d==="index"){var w="var sharedModule = {}; ("+o.shared+")(sharedModule); ("+o.worker+")(sharedModule);",P={};return o.shared(P),o.index(n,P),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),n}}a("shared",["exports"],function(d){function u(s,i,l,p){return new(l||(l=Promise))(function(g,_){function x(A){try{k(p.next(A))}catch(L){_(L)}}function S(A){try{k(p.throw(A))}catch(L){_(L)}}function k(A){var L;A.done?g(A.value):(L=A.value,L instanceof l?L:new l(function($){$(L)})).then(x,S)}k((p=p.apply(s,i||[])).next())})}function b(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var w=P;function P(s,i){this.x=s,this.y=i}P.prototype={clone:function(){return new P(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,i){return this.clone()._rotateAround(s,i)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var i=s.x-this.x,l=s.y-this.y;return i*i+l*l},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult:function(s){var i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var i=Math.cos(s),l=Math.sin(s),p=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=p,this},_rotateAround:function(s,i){var l=Math.cos(s),p=Math.sin(s),g=i.y+p*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-p*(this.y-i.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},P.convert=function(s){return s instanceof P?s:Array.isArray(s)?new P(s[0],s[1]):s};var E=b(w),I=R;function R(s,i,l,p){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=p}R.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,p=0;p<8;p++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<i)return l;var _=this.sampleCurveDerivativeX(l);if(Math.abs(_)<1e-6)break;l-=g/_}var x=0,S=1;for(l=s,p=0;p<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<i));p++)s>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var F=b(I);let U,K;function D(){return U==null&&(U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),U}function j(){if(K==null&&(K=!1,D())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let p=0;p<5*5;p++){const g=4*p;i.fillStyle=`rgb(${g},${g+1},${g+2})`,i.fillRect(p%5,Math.floor(p/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let p=0;p<5*5*4;p++)if(p%4!=3&&l[p]!==p){K=!0;break}}}return K||!1}function V(s,i,l,p){const g=new F(s,i,l,p);return _=>g.solve(_)}const Y=V(.25,.1,.25,1);function ce(s,i,l){return Math.min(l,Math.max(i,s))}function de(s,i,l){const p=l-i,g=((s-i)%p+p)%p+i;return g===i?l:g}function le(s,...i){for(const l of i)for(const p in l)s[p]=l[p];return s}let ge=1;function Ae(s,i,l){const p={};for(const g in s)p[g]=i.call(this,s[g],g,s);return p}function H(s,i,l){const p={};for(const g in s)i.call(this,s[g],g,s)&&(p[g]=s[g]);return p}function Ee(s){return Array.isArray(s)?s.map(Ee):typeof s=="object"&&s?Ae(s,Ee):s}const je={};function $e(s){je[s]||(typeof console<"u"&&console.warn(s),je[s]=!0)}function Le(s,i,l){return(l.y-s.y)*(i.x-s.x)>(i.y-s.y)*(l.x-s.x)}function De(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let We=null;function ut(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ye(s,i,l,p,g){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const _=new VideoFrame(s,{timestamp:0});try{const x=_==null?void 0:_.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const S=x.startsWith("BGR"),k=new Uint8ClampedArray(p*g*4);if(yield _.copyTo(k,function(A,L,$,N,G){const X=4*Math.max(-L,0),J=(Math.max(0,$)-$)*N*4+X,se=4*N,pe=Math.max(0,L),Te=Math.max(0,$);return{rect:{x:pe,y:Te,width:Math.min(A.width,L+N)-pe,height:Math.min(A.height,$+G)-Te},layout:[{offset:J,stride:se}]}}(s,i,l,p,g)),S)for(let A=0;A<k.length;A+=4){const L=k[A];k[A]=k[A+2],k[A+2]=L}return k}finally{_.close()}})}let pt,St;const At="AbortError";function Nt(){return new Error(At)}const Lt={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Zt(s){return Lt.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const un="global-dispatcher";class en extends Error{constructor(i,l,p,g){super(`AJAXError: ${l} (${i}): ${p}`),this.status=i,this.statusText=l,this.url=p,this.body=g}}const Bn=()=>De(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Sn=function(s,i){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const p=Zt(s.url);if(p)return p(s,i);if(De(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:un},i)}if(!(/^file:/.test(l=s.url)||/^file:/.test(Bn())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(p,g){return u(this,void 0,void 0,function*(){const _=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Bn(),signal:g.signal});p.type!=="json"||_.headers.has("Accept")||_.headers.set("Accept","application/json");const x=yield fetch(_);if(!x.ok){const A=yield x.blob();throw new en(x.status,x.statusText,p.url,A)}let S;S=p.type==="arrayBuffer"||p.type==="image"?x.arrayBuffer():p.type==="json"?x.json():x.text();const k=yield S;if(g.signal.aborted)throw Nt();return{data:k,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(s,i);if(De(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:un},i)}var l;return function(p,g){return new Promise((_,x)=>{var S;const k=new XMLHttpRequest;k.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(k.responseType="arraybuffer");for(const A in p.headers)k.setRequestHeader(A,p.headers[A]);p.type==="json"&&(k.responseType="text",!((S=p.headers)===null||S===void 0)&&S.Accept||k.setRequestHeader("Accept","application/json")),k.withCredentials=p.credentials==="include",k.onerror=()=>{x(new Error(k.statusText))},k.onload=()=>{if(!g.signal.aborted)if((k.status>=200&&k.status<300||k.status===0)&&k.response!==null){let A=k.response;if(p.type==="json")try{A=JSON.parse(k.response)}catch(L){return void x(L)}_({data:A,cacheControl:k.getResponseHeader("Cache-Control"),expires:k.getResponseHeader("Expires")})}else{const A=new Blob([k.response],{type:k.getResponseHeader("Content-Type")});x(new en(k.status,k.statusText,p.url,A))}},g.signal.addEventListener("abort",()=>{k.abort(),x(Nt())}),k.send(p.body)})}(s,i)};function jt(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const i=new URL(s),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function tn(s,i,l){l[s]&&l[s].indexOf(i)!==-1||(l[s]=l[s]||[],l[s].push(i))}function Ut(s,i,l){if(l&&l[s]){const p=l[s].indexOf(i);p!==-1&&l[s].splice(p,1)}}class gn{constructor(i,l={}){le(this,l),this.type=i}}class yt extends gn{constructor(i,l={}){super("error",le({error:i},l))}}class zt{on(i,l){return this._listeners=this._listeners||{},tn(i,l,this._listeners),this}off(i,l){return Ut(i,l,this._listeners),Ut(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},tn(i,l,this._oneTimeListeners),this):new Promise(p=>this.once(i,p))}fire(i,l){typeof i=="string"&&(i=new gn(i,l||{}));const p=i.type;if(this.listens(p)){i.target=this;const g=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const S of g)S.call(this,i);const _=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const S of _)Ut(p,S,this._oneTimeListeners),S.call(this,i);const x=this._eventedParent;x&&(le(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(i))}else i instanceof yt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var we={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ir=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function pn(s,i){const l={};for(const p in s)p!=="ref"&&(l[p]=s[p]);return ir.forEach(p=>{p in i&&(l[p]=i[p])}),l}function ht(s,i){if(Array.isArray(s)){if(!Array.isArray(i)||s.length!==i.length)return!1;for(let l=0;l<s.length;l++)if(!ht(s[l],i[l]))return!1;return!0}if(typeof s=="object"&&s!==null&&i!==null){if(typeof i!="object"||Object.keys(s).length!==Object.keys(i).length)return!1;for(const l in s)if(!ht(s[l],i[l]))return!1;return!0}return s===i}function Vt(s,i){s.push(i)}function an(s,i,l){Vt(l,{command:"addSource",args:[s,i[s]]})}function Qn(s,i,l){Vt(i,{command:"removeSource",args:[s]}),l[s]=!0}function bt(s,i,l,p){Qn(s,l,p),an(s,i,l)}function Mn(s,i,l){let p;for(p in s[l])if(Object.prototype.hasOwnProperty.call(s[l],p)&&p!=="data"&&!ht(s[l][p],i[l][p]))return!1;for(p in i[l])if(Object.prototype.hasOwnProperty.call(i[l],p)&&p!=="data"&&!ht(s[l][p],i[l][p]))return!1;return!0}function pr(s,i,l,p,g,_){s=s||{},i=i||{};for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&(ht(s[x],i[x])||l.push({command:_,args:[p,x,i[x],g]}));for(const x in i)Object.prototype.hasOwnProperty.call(i,x)&&!Object.prototype.hasOwnProperty.call(s,x)&&(ht(s[x],i[x])||l.push({command:_,args:[p,x,i[x],g]}))}function Zr(s){return s.id}function fr(s,i){return s[i.id]=i,s}class Ge{constructor(i,l,p,g){this.message=(i?`${i}: `:"")+p,g&&(this.identifier=g),l!=null&&l.__line__&&(this.line=l.__line__)}}function or(s,...i){for(const l of i)for(const p in l)s[p]=l[p];return s}class Wn extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class on{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[p,g]of l)this.bindings[p]=g}concat(i){return new on(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const Ir={kind:"null"},Ze={kind:"number"},Ke={kind:"string"},it={kind:"boolean"},ln={kind:"color"},Pr={kind:"object"},Rt={kind:"value"},oo={kind:"collator"},So={kind:"formatted"},Xo={kind:"padding"},so={kind:"resolvedImage"},he={kind:"variableAnchorOffsetCollection"};function q(s,i){return{kind:"array",itemType:s,N:i}}function W(s){if(s.kind==="array"){const i=W(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}const Q=[Ir,Ze,Ke,it,ln,So,Pr,q(Rt),Xo,so,he];function oe(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!oe(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(const l of Q)if(!oe(l,i))return null}}return`Expected ${W(s)} but found ${W(i)} instead.`}function ve(s,i){return i.some(l=>l.kind===s.kind)}function be(s,i){return i.some(l=>l==="null"?s===null:l==="array"?Array.isArray(s):l==="object"?s&&!Array.isArray(s)&&typeof s=="object":l===typeof s)}function te(s,i){return s.kind==="array"&&i.kind==="array"?s.itemType.kind===i.itemType.kind&&typeof s.N=="number":s.kind===i.kind}const ue=.96422,Me=.82521,Re=4/29,Se=6/29,Ue=3*Se*Se,ft=Se*Se*Se,Tt=Math.PI/180,Yt=180/Math.PI;function $t(s){return(s%=360)<0&&(s+=360),s}function cn([s,i,l,p]){let g,_;const x=Mr((.2225045*(s=Jt(s))+.7168786*(i=Jt(i))+.0606169*(l=Jt(l)))/1);s===i&&i===l?g=_=x:(g=Mr((.4360747*s+.3850649*i+.1430804*l)/ue),_=Mr((.0139322*s+.0971045*i+.7141733*l)/Me));const S=116*x-16;return[S<0?0:S,500*(g-x),200*(x-_),p]}function Jt(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Mr(s){return s>ft?Math.pow(s,1/3):s/Ue+Re}function sr([s,i,l,p]){let g=(s+16)/116,_=isNaN(i)?g:g+i/500,x=isNaN(l)?g:g-l/200;return g=1*Tn(g),_=ue*Tn(_),x=Me*Tn(x),[Gt(3.1338561*_-1.6168667*g-.4906146*x),Gt(-.9787684*_+1.9161415*g+.033454*x),Gt(.0719453*_-.2289914*g+1.4052427*x),p]}function Gt(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Tn(s){return s>Se?s*s*s:Ue*(s-Re)}function er(s){return parseInt(s.padEnd(2,s),16)/255}function Ur(s,i){return Kr(i?s/100:s,0,1)}function Kr(s,i,l){return Math.min(Math.max(i,s),l)}function mi(s){return!s.some(Number.isNaN)}const Ya={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class En{constructor(i,l,p,g=1,_=!0){this.r=i,this.g=l,this.b=p,this.a=g,_||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[i,l,p,g]))}static parse(i){if(i instanceof En)return i;if(typeof i!="string")return;const l=function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const g=Ya[p];if(g){const[x,S,k]=g;return[x/255,S/255,k/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const x=p.length<6?1:2;let S=1;return[er(p.slice(S,S+=x)),er(p.slice(S,S+=x)),er(p.slice(S,S+=x)),er(p.slice(S,S+x)||"ff")]}if(p.startsWith("rgb")){const x=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[S,k,A,L,$,N,G,X,J,se,pe,Te]=x,_e=[L||" ",G||" ",se].join("");if(_e==="  "||_e==="  /"||_e===",,"||_e===",,,"){const ke=[A,N,J].join(""),ze=ke==="%%%"?100:ke===""?255:0;if(ze){const qe=[Kr(+k/ze,0,1),Kr(+$/ze,0,1),Kr(+X/ze,0,1),pe?Ur(+pe,Te):1];if(mi(qe))return qe}}return}}const _=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[x,S,k,A,L,$,N,G,X]=_,J=[k||" ",L||" ",N].join("");if(J==="  "||J==="  /"||J===",,"||J===",,,"){const se=[+S,Kr(+A,0,100),Kr(+$,0,100),G?Ur(+G,X):1];if(mi(se))return function([pe,Te,_e,ke]){function ze(qe){const lt=(qe+pe/30)%12,Pt=Te*Math.min(_e,1-_e);return _e-Pt*Math.max(-1,Math.min(lt-3,9-lt,1))}return pe=$t(pe),Te/=100,_e/=100,[ze(0),ze(8),ze(4),ke]}(se)}}}(i);return l?new En(...l,!1):void 0}get rgb(){const{r:i,g:l,b:p,a:g}=this,_=g||1/0;return this.overwriteGetter("rgb",[i/_,l/_,p/_,g])}get hcl(){return this.overwriteGetter("hcl",function(i){const[l,p,g,_]=cn(i),x=Math.sqrt(p*p+g*g);return[Math.round(1e4*x)?$t(Math.atan2(g,p)*Yt):NaN,x,l,_]}(this.rgb))}get lab(){return this.overwriteGetter("lab",cn(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,p,g]=this.rgb;return`rgba(${[i,l,p].map(_=>Math.round(255*_)).join(",")},${g})`}}En.black=new En(0,0,0,1),En.white=new En(1,1,1,1),En.transparent=new En(0,0,0,0),En.red=new En(1,0,0,1);class Td{constructor(i,l,p){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Ed{constructor(i,l,p,g,_){this.text=i,this.image=l,this.scale=p,this.fontStack=g,this.textColor=_}}class Vi{constructor(i){this.sections=i}static fromString(i){return new Vi([new Ed(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Vi?i:Vi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class Wi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Wi)return i;if(typeof i=="number")return new Wi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new Wi(i)}}toString(){return JSON.stringify(this.values)}}const Uv=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ao{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof ao)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const p=i[l],g=i[l+1];if(typeof p!="string"||!Uv.has(p)||!Array.isArray(g)||g.length!==2||typeof g[0]!="number"||typeof g[1]!="number")return}return new ao(i)}}toString(){return JSON.stringify(this.values)}}class qi{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new qi({name:i,available:!1}):null}}function Ja(s,i,l,p){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[s,i,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[s,i,l,p]:[s,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof En||s instanceof Td||s instanceof Vi||s instanceof Wi||s instanceof ao||s instanceof qi)return!0;if(Array.isArray(s)){for(const i of s)if(!fa(i))return!1;return!0}if(typeof s=="object"){for(const i in s)if(!fa(s[i]))return!1;return!0}return!1}function Ar(s){if(s===null)return Ir;if(typeof s=="string")return Ke;if(typeof s=="boolean")return it;if(typeof s=="number")return Ze;if(s instanceof En)return ln;if(s instanceof Td)return oo;if(s instanceof Vi)return So;if(s instanceof Wi)return Xo;if(s instanceof ao)return he;if(s instanceof qi)return so;if(Array.isArray(s)){const i=s.length;let l;for(const p of s){const g=Ar(p);if(l){if(l===g)continue;l=Rt;break}l=g}return q(l||Rt,i)}return Pr}function lu(s){const i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof En||s instanceof Vi||s instanceof Wi||s instanceof ao||s instanceof qi?s.toString():JSON.stringify(s)}class Co{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!fa(i[1]))return l.error("invalid value");const p=i[1];let g=Ar(p);const _=l.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new Co(g,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Sr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}const fc={string:Ke,number:Ze,boolean:it,object:Pr};class ko{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let p,g=1;const _=i[0];if(_==="array"){let S,k;if(i.length>2){const A=i[1];if(typeof A!="string"||!(A in fc)||A==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);S=fc[A],g++}else S=Rt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);k=i[2],g++}p=q(S,k)}else{if(!fc[_])throw new Error(`Types doesn't contain name = ${_}`);p=fc[_]}const x=[];for(;g<i.length;g++){const S=l.parse(i[g],g,Rt);if(!S)return null;x.push(S)}return new ko(p,x)}evaluate(i){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(i);if(!oe(this.type,Ar(p)))return p;if(l===this.args.length-1)throw new Sr(`Expected value to be of type ${W(this.type)}, but found ${W(Ar(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Id={"to-boolean":it,"to-color":ln,"to-number":Ze,"to-string":Ke};class To{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[0];if(!Id[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return l.error("Expected one argument.");const g=Id[p],_=[];for(let x=1;x<i.length;x++){const S=l.parse(i[x],x,Rt);if(!S)return null;_.push(S)}return new To(g,_)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,p;for(const g of this.args){if(l=g.evaluate(i),p=null,l instanceof En)return l;if(typeof l=="string"){const _=i.parseColor(l);if(_)return _}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rbga value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Ja(l[0],l[1],l[2],l[3]),!p))return new En(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Sr(p||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const p of this.args){l=p.evaluate(i);const g=Wi.parse(l);if(g)return g}throw new Sr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const p of this.args){l=p.evaluate(i);const g=ao.parse(l);if(g)return g}throw new Sr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const p of this.args){if(l=p.evaluate(i),l===null)return 0;const g=Number(l);if(!isNaN(g))return g}throw new Sr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Vi.fromString(lu(this.args[0].evaluate(i)));case"resolvedImage":return qi.fromString(lu(this.args[0].evaluate(i)));default:return lu(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}const Vv=["Unknown","Point","LineString","Polygon"];class mc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vv[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache[i];return l||(l=this._parseColorCache[i]=En.parse(i)),l}}class ma{constructor(i,l,p=[],g,_=new on,x=[]){this.registry=i,this.path=p,this.key=p.map(S=>`[${S}]`).join(""),this.scope=_,this.errors=x,this.expectedType=g,this._isConstant=l}parse(i,l,p,g,_={}){return l?this.concat(l,p,g)._parse(i,_):this._parse(i,_)}_parse(i,l){function p(g,_,x){return x==="assert"?new ko(_,[g]):x==="coerce"?new To(_,[g]):g}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=i[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(i,this);if(!x)return null;if(this.expectedType){const S=this.expectedType,k=x.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||k.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||k.kind!=="value"&&k.kind!=="string")if(S.kind!=="padding"||k.kind!=="value"&&k.kind!=="number"&&k.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||k.kind!=="value"&&k.kind!=="array"){if(this.checkSubtype(S,k))return null}else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"coerce");else x=p(x,S,l.typeAnnotation||"assert")}if(!(x instanceof Co)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const S=new mc;try{x=new Co(x.type,x.evaluate(S))}catch(k){return this.error(k.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,p){const g=typeof i=="number"?this.path.concat(i):this.path,_=p?this.scope.concat(p):this.scope;return new ma(this.registry,this._isConstant,g,l||null,_,this.errors)}error(i,...l){const p=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new Wn(p,i))}checkSubtype(i,l){const p=oe(i,l);return p&&this.error(p),p}}class js{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let _=1;_<i.length-1;_+=2){const x=i[_];if(typeof x!="string")return l.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return l.error("Variable names must contain only alphanumeric characters or '_'.",_);const S=l.parse(i[_+1],_+1);if(!S)return null;p.push([x,S])}const g=l.parse(i[i.length-1],i.length-1,l.expectedType,p);return g?new js(p,g):null}outputDefined(){return this.result.outputDefined()}}class yn{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const p=i[1];return l.scope.has(p)?new yn(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Pd{constructor(i,l,p){this.type=i,this.index=l,this.input=p}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Ze),g=l.parse(i[2],2,q(l.expectedType||Rt));return p&&g?new Pd(g.type.itemType,p,g):null}evaluate(i){const l=this.index.evaluate(i),p=this.input.evaluate(i);if(l<0)throw new Sr(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new Sr(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new Sr(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Md{constructor(i,l){this.type=it,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Rt),g=l.parse(i[2],2,Rt);return p&&g?ve(p.type,[it,Ke,Ze,Ir,Rt])?new Md(p,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!be(l,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${W(Ar(l))} instead.`);if(!be(p,["string","array"]))throw new Sr(`Expected second argument to be of type array or string, but found ${W(Ar(p))} instead.`);return p.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Qa{constructor(i,l,p){this.type=Ze,this.needle=i,this.haystack=l,this.fromIndex=p}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Rt),g=l.parse(i[2],2,Rt);if(!p||!g)return null;if(!ve(p.type,[it,Ke,Ze,Ir,Rt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(p.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,Ze);return _?new Qa(p,g,_):null}return new Qa(p,g)}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!be(l,["boolean","string","number","null"]))throw new Sr(`Expected first argument to be of type boolean, string, number or null, but found ${W(Ar(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(i)),be(p,["string"])){const _=p.indexOf(l,g);return _===-1?-1:[...p.slice(0,_)].length}if(be(p,["array"]))return p.indexOf(l,g);throw new Sr(`Expected second argument to be of type array or string, but found ${W(Ar(p))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Ad{constructor(i,l,p,g,_,x){this.inputType=i,this.type=l,this.input=p,this.cases=g,this.outputs=_,this.otherwise=x}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let p,g;l.expectedType&&l.expectedType.kind!=="value"&&(g=l.expectedType);const _={},x=[];for(let A=2;A<i.length-1;A+=2){let L=i[A];const $=i[A+1];Array.isArray(L)||(L=[L]);const N=l.concat(A);if(L.length===0)return N.error("Expected at least one branch label.");for(const X of L){if(typeof X!="number"&&typeof X!="string")return N.error("Branch labels must be numbers or strings.");if(typeof X=="number"&&Math.abs(X)>Number.MAX_SAFE_INTEGER)return N.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof X=="number"&&Math.floor(X)!==X)return N.error("Numeric branch labels must be integer values.");if(p){if(N.checkSubtype(p,Ar(X)))return null}else p=Ar(X);if(_[String(X)]!==void 0)return N.error("Branch labels must be unique.");_[String(X)]=x.length}const G=l.parse($,A,g);if(!G)return null;g=g||G.type,x.push(G)}const S=l.parse(i[1],1,Rt);if(!S)return null;const k=l.parse(i[i.length-1],i.length-1,g);return k?S.type.kind!=="value"&&l.concat(1).checkSubtype(p,S.type)?null:new Ad(p,g,S,_,x,k):null}evaluate(i){const l=this.input.evaluate(i);return(Ar(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class gc{constructor(i,l,p){this.type=i,this.branches=l,this.otherwise=p}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const g=[];for(let x=1;x<i.length-1;x+=2){const S=l.parse(i[x],x,it);if(!S)return null;const k=l.parse(i[x+1],x+1,p);if(!k)return null;g.push([S,k]),p=p||k.type}const _=l.parse(i[i.length-1],i.length-1,p);if(!_)return null;if(!p)throw new Error("Can't infer output type");return new gc(p,g,_)}evaluate(i){for(const[l,p]of this.branches)if(l.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,p]of this.branches)i(l),i(p);i(this.otherwise)}outputDefined(){return this.branches.every(([i,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class uu{constructor(i,l,p,g){this.type=i,this.input=l,this.beginIndex=p,this.endIndex=g}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Rt),g=l.parse(i[2],2,Ze);if(!p||!g)return null;if(!ve(p.type,[q(Rt),Ke,Rt]))return l.error(`Expected first argument to be of type array or string, but found ${W(p.type)} instead`);if(i.length===4){const _=l.parse(i[3],3,Ze);return _?new uu(p.type,p,g,_):null}return new uu(p.type,p,g)}evaluate(i){const l=this.input.evaluate(i),p=this.beginIndex.evaluate(i);let g;if(this.endIndex&&(g=this.endIndex.evaluate(i)),be(l,["string"]))return[...l].slice(p,g).join("");if(be(l,["array"]))return l.slice(p,g);throw new Sr(`Expected first argument to be of type array or string, but found ${W(Ar(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function yc(s,i){const l=s.length-1;let p,g,_=0,x=l,S=0;for(;_<=x;)if(S=Math.floor((_+x)/2),p=s[S],g=s[S+1],p<=i){if(S===l||i<g)return S;_=S+1}else{if(!(p>i))throw new Sr("Input is not a number.");x=S-1}return 0}class el{constructor(i,l,p){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[g,_]of p)this.labels.push(g),this.outputs.push(_)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(i[1],1,Ze);if(!p)return null;const g=[];let _=null;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);for(let x=1;x<i.length;x+=2){const S=x===1?-1/0:i[x],k=i[x+1],A=x,L=x+1;if(typeof S!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=S)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const $=l.parse(k,L,_);if(!$)return null;_=_||$.type,g.push([S,$])}return new el(_,p,g)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return p[0].evaluate(i);const _=l.length;return g>=l[_-1]?p[_-1].evaluate(i):p[yc(l,g)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function Tm(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Wv=Em;function Em(s,i,l,p){this.cx=3*s,this.bx=3*(l-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(p-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=i,this.p2x=l,this.p2y=p}Em.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,i){if(i===void 0&&(i=1e-6),s<0)return 0;if(s>1)return 1;for(var l=s,p=0;p<8;p++){var g=this.sampleCurveX(l)-s;if(Math.abs(g)<i)return l;var _=this.sampleCurveDerivativeX(l);if(Math.abs(_)<1e-6)break;l-=g/_}var x=0,S=1;for(l=s,p=0;p<20&&(g=this.sampleCurveX(l),!(Math.abs(g-s)<i));p++)s>g?x=l:S=l,l=.5*(S-x)+x;return l},solve:function(s,i){return this.sampleCurveY(this.solveCurveX(s,i))}};var qv=Tm(Wv);function ga(s,i,l){return s+l*(i-s)}function cu(s,i,l){return s.map((p,g)=>ga(p,i[g],l))}const Ei={number:ga,color:function(s,i,l,p="rgb"){switch(p){case"rgb":{const[g,_,x,S]=cu(s.rgb,i.rgb,l);return new En(g,_,x,S,!1)}case"hcl":{const[g,_,x,S]=s.hcl,[k,A,L,$]=i.hcl;let N,G;if(isNaN(g)||isNaN(k))isNaN(g)?isNaN(k)?N=NaN:(N=k,x!==1&&x!==0||(G=A)):(N=g,L!==1&&L!==0||(G=_));else{let Te=k-g;k>g&&Te>180?Te-=360:k<g&&g-k>180&&(Te+=360),N=g+l*Te}const[X,J,se,pe]=function([Te,_e,ke,ze]){return Te=isNaN(Te)?0:Te*Tt,sr([ke,Math.cos(Te)*_e,Math.sin(Te)*_e,ze])}([N,G??ga(_,A,l),ga(x,L,l),ga(S,$,l)]);return new En(X,J,se,pe,!1)}case"lab":{const[g,_,x,S]=sr(cu(s.lab,i.lab,l));return new En(g,_,x,S,!1)}}},array:cu,padding:function(s,i,l){return new Wi(cu(s.values,i.values,l))},variableAnchorOffsetCollection:function(s,i,l){const p=s.values,g=i.values;if(p.length!==g.length)throw new Sr(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${i.toString()}`);const _=[];for(let x=0;x<p.length;x+=2){if(p[x]!==g[x])throw new Sr(`Cannot interpolate values containing mismatched anchors. from[${x}]: ${p[x]}, to[${x}]: ${g[x]}`);_.push(p[x]);const[S,k]=p[x+1],[A,L]=g[x+1];_.push([ga(S,A,l),ga(k,L,l)])}return new ao(_)}};class Ii{constructor(i,l,p,g,_){this.type=i,this.operator=l,this.interpolation=p,this.input=g,this.labels=[],this.outputs=[];for(const[x,S]of _)this.labels.push(x),this.outputs.push(S)}static interpolationFactor(i,l,p,g){let _=0;if(i.name==="exponential")_=vc(l,i.base,p,g);else if(i.name==="linear")_=vc(l,1,p,g);else if(i.name==="cubic-bezier"){const x=i.controlPoints;_=new qv(x[0],x[1],x[2],x[3]).solve(vc(l,1,p,g))}return _}static parse(i,l){let[p,g,_,...x]=i;if(!Array.isArray(g)||g.length===0)return l.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const A=g[1];if(typeof A!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if(g[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(A.length!==4||A.some(L=>typeof L!="number"||L<0||L>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(_=l.parse(_,2,Ze),!_)return null;const S=[];let k=null;p==="interpolate-hcl"||p==="interpolate-lab"?k=ln:l.expectedType&&l.expectedType.kind!=="value"&&(k=l.expectedType);for(let A=0;A<x.length;A+=2){const L=x[A],$=x[A+1],N=A+3,G=A+4;if(typeof L!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',N);if(S.length&&S[S.length-1][0]>=L)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',N);const X=l.parse($,G,k);if(!X)return null;k=k||X.type,S.push([L,X])}return te(k,Ze)||te(k,ln)||te(k,Xo)||te(k,he)||te(k,q(Ze))?new Ii(k,p,g,_,S):l.error(`Type ${W(k)} is not interpolatable.`)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const g=this.input.evaluate(i);if(g<=l[0])return p[0].evaluate(i);const _=l.length;if(g>=l[_-1])return p[_-1].evaluate(i);const x=yc(l,g),S=Ii.interpolationFactor(this.interpolation,g,l[x],l[x+1]),k=p[x].evaluate(i),A=p[x+1].evaluate(i);switch(this.operator){case"interpolate":return Ei[this.type.kind](k,A,S);case"interpolate-hcl":return Ei.color(k,A,S,"hcl");case"interpolate-lab":return Ei.color(k,A,S,"lab")}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function vc(s,i,l,p){const g=p-l,_=s-l;return g===0?0:i===1?_/g:(Math.pow(i,_)-1)/(Math.pow(i,g)-1)}class _c{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expectected at least one argument.");let p=null;const g=l.expectedType;g&&g.kind!=="value"&&(p=g);const _=[];for(const S of i.slice(1)){const k=l.parse(S,1+_.length,p,void 0,{typeAnnotation:"omit"});if(!k)return null;p=p||k.type,_.push(k)}if(!p)throw new Error("No output type");const x=g&&_.some(S=>oe(g,S.type));return new _c(x?Rt:p,_)}evaluate(i){let l,p=null,g=0;for(const _ of this.args)if(g++,p=_.evaluate(i),p&&p instanceof qi&&!p.available&&(l||(l=p.name),p=null,g===this.args.length&&(p=l)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function xc(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function Im(s,i,l,p){return p.compare(i,l)===0}function tl(s,i,l){const p=s!=="=="&&s!=="!=";return class vP{constructor(_,x,S){this.type=it,this.lhs=_,this.rhs=x,this.collator=S,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const S=_[0];let k=x.parse(_[1],1,Rt);if(!k)return null;if(!xc(S,k.type))return x.concat(1).error(`"${S}" comparisons are not supported for type '${W(k.type)}'.`);let A=x.parse(_[2],2,Rt);if(!A)return null;if(!xc(S,A.type))return x.concat(2).error(`"${S}" comparisons are not supported for type '${W(A.type)}'.`);if(k.type.kind!==A.type.kind&&k.type.kind!=="value"&&A.type.kind!=="value")return x.error(`Cannot compare types '${W(k.type)}' and '${W(A.type)}'.`);p&&(k.type.kind==="value"&&A.type.kind!=="value"?k=new ko(A.type,[k]):k.type.kind!=="value"&&A.type.kind==="value"&&(A=new ko(k.type,[A])));let L=null;if(_.length===4){if(k.type.kind!=="string"&&A.type.kind!=="string"&&k.type.kind!=="value"&&A.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(L=x.parse(_[3],3,oo),!L)return null}return new vP(k,A,L)}evaluate(_){const x=this.lhs.evaluate(_),S=this.rhs.evaluate(_);if(p&&this.hasUntypedArgument){const k=Ar(x),A=Ar(S);if(k.kind!==A.kind||k.kind!=="string"&&k.kind!=="number")throw new Sr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${k.kind}, ${A.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const k=Ar(x),A=Ar(S);if(k.kind!=="string"||A.kind!=="string")return i(_,x,S)}return this.collator?l(_,x,S,this.collator.evaluate(_)):i(_,x,S)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Gv=tl("==",function(s,i,l){return i===l},Im),Pm=tl("!=",function(s,i,l){return i!==l},function(s,i,l,p){return!Im(0,i,l,p)}),Mm=tl("<",function(s,i,l){return i<l},function(s,i,l,p){return p.compare(i,l)<0}),Hv=tl(">",function(s,i,l){return i>l},function(s,i,l,p){return p.compare(i,l)>0}),Zv=tl("<=",function(s,i,l){return i<=l},function(s,i,l,p){return p.compare(i,l)<=0}),Am=tl(">=",function(s,i,l){return i>=l},function(s,i,l,p){return p.compare(i,l)>=0});class hu{constructor(i,l,p){this.type=oo,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return l.error("Collator options argument must be an object.");const g=l.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,it);if(!g)return null;const _=l.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,it);if(!_)return null;let x=null;return p.locale&&(x=l.parse(p.locale,1,Ke),!x)?null:new hu(g,_,x)}evaluate(i){return new Td(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Ld{constructor(i,l,p,g,_){this.type=Ke,this.number=i,this.locale=l,this.currency=p,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const p=l.parse(i[1],1,Ze);if(!p)return null;const g=i[2];if(typeof g!="object"||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=l.parse(g.locale,1,Ke),!_))return null;let x=null;if(g.currency&&(x=l.parse(g.currency,1,Ke),!x))return null;let S=null;if(g["min-fraction-digits"]&&(S=l.parse(g["min-fraction-digits"],1,Ze),!S))return null;let k=null;return g["max-fraction-digits"]&&(k=l.parse(g["max-fraction-digits"],1,Ze),!k)?null:new Ld(p,_,x,S,k)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class bc{constructor(i){this.type=So,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return l.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=i.length-1;++x){const S=i[x];if(_&&typeof S=="object"&&!Array.isArray(S)){_=!1;let k=null;if(S["font-scale"]&&(k=l.parse(S["font-scale"],1,Ze),!k))return null;let A=null;if(S["text-font"]&&(A=l.parse(S["text-font"],1,q(Ke)),!A))return null;let L=null;if(S["text-color"]&&(L=l.parse(S["text-color"],1,ln),!L))return null;const $=g[g.length-1];$.scale=k,$.font=A,$.textColor=L}else{const k=l.parse(i[x],1,Rt);if(!k)return null;const A=k.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:k,scale:null,font:null,textColor:null})}}return new bc(g)}evaluate(i){return new Vi(this.sections.map(l=>{const p=l.content.evaluate(i);return Ar(p)===so?new Ed("",p,null,null,null):new Ed(lu(p),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null)}))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor)}outputDefined(){return!1}}class zd{constructor(i){this.type=so,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const p=l.parse(i[1],1,Ke);return p?new zd(p):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),p=qi.fromString(l);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(l)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class Rd{constructor(i){this.type=Ze,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=l.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${W(p.type)} instead.`):new Rd(p):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Sr(`Expected value to be of type string or array, but found ${W(Ar(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const Yo=8192;function Kv(s,i){const l=(180+s[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,g=Math.pow(2,i.z);return[Math.round(l*g*Yo),Math.round(p*g*Yo)]}function Dd(s,i){const l=Math.pow(2,i.z);return[(g=(s[0]/Yo+i.x)/l,360*g-180),(p=(s[1]/Yo+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,g}function ya(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function Us(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function xn(s,i,l){const p=s[0]-i[0],g=s[1]-i[1],_=s[0]-l[0],x=s[1]-l[1];return p*x-_*g==0&&p*_<=0&&g*x<=0}function wc(s,i,l,p){return(g=[p[0]-l[0],p[1]-l[1]])[0]*(_=[i[0]-s[0],i[1]-s[1]])[1]-g[1]*_[0]!=0&&!(!zm(s,i,l,p)||!zm(l,p,s,i));var g,_}function Xv(s,i,l){for(const p of l)for(let g=0;g<p.length-1;++g)if(wc(s,i,p[g],p[g+1]))return!0;return!1}function nl(s,i,l=!1){let p=!1;for(const S of i)for(let k=0;k<S.length-1;k++){if(xn(s,S[k],S[k+1]))return l;(_=S[k])[1]>(g=s)[1]!=(x=S[k+1])[1]>g[1]&&g[0]<(x[0]-_[0])*(g[1]-_[1])/(x[1]-_[1])+_[0]&&(p=!p)}var g,_,x;return p}function Yv(s,i){for(const l of i)if(nl(s,l))return!0;return!1}function Lm(s,i){for(const l of s)if(!nl(l,i))return!1;for(let l=0;l<s.length-1;++l)if(Xv(s[l],s[l+1],i))return!1;return!0}function Jv(s,i){for(const l of i)if(Lm(s,l))return!0;return!1}function zm(s,i,l,p){const g=p[0]-l[0],_=p[1]-l[1],x=(s[0]-l[0])*_-g*(s[1]-l[1]),S=(i[0]-l[0])*_-g*(i[1]-l[1]);return x>0&&S<0||x<0&&S>0}function $d(s,i,l){const p=[];for(let g=0;g<s.length;g++){const _=[];for(let x=0;x<s[g].length;x++){const S=Kv(s[g][x],l);ya(i,S),_.push(S)}p.push(_)}return p}function Rm(s,i,l){const p=[];for(let g=0;g<s.length;g++){const _=$d(s[g],i,l);p.push(_)}return p}function Dm(s,i,l,p){if(s[0]<l[0]||s[0]>l[2]){const g=.5*p;let _=s[0]-l[0]>g?-p:l[0]-s[0]>g?p:0;_===0&&(_=s[0]-l[2]>g?-p:l[2]-s[0]>g?p:0),s[0]+=_}ya(i,s)}function $m(s,i,l,p){const g=Math.pow(2,p.z)*Yo,_=[p.x*Yo,p.y*Yo],x=[];for(const S of s)for(const k of S){const A=[k.x+_[0],k.y+_[1]];Dm(A,i,l,g),x.push(A)}return x}function Om(s,i,l,p){const g=Math.pow(2,p.z)*Yo,_=[p.x*Yo,p.y*Yo],x=[];for(const k of s){const A=[];for(const L of k){const $=[L.x+_[0],L.y+_[1]];ya(i,$),A.push($)}x.push(A)}if(i[2]-i[0]<=g/2){(S=i)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const k of x)for(const A of k)Dm(A,i,l,g)}var S;return x}class va{constructor(i,l){this.type=it,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(fa(i[1])){const p=i[1];if(p.type==="FeatureCollection"){const g=[];for(const _ of p.features){const{type:x,coordinates:S}=_.geometry;x==="Polygon"&&g.push(S),x==="MultiPolygon"&&g.push(...S)}if(g.length)return new va(p,{type:"MultiPolygon",coordinates:g})}else if(p.type==="Feature"){const g=p.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new va(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new va(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(p.type==="Polygon"){const S=$d(p.coordinates,_,x),k=$m(l.geometry(),g,_,x);if(!Us(g,_))return!1;for(const A of k)if(!nl(A,S))return!1}if(p.type==="MultiPolygon"){const S=Rm(p.coordinates,_,x),k=$m(l.geometry(),g,_,x);if(!Us(g,_))return!1;for(const A of k)if(!Yv(A,S))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,p){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=l.canonicalID();if(p.type==="Polygon"){const S=$d(p.coordinates,_,x),k=Om(l.geometry(),g,_,x);if(!Us(g,_))return!1;for(const A of k)if(!Lm(A,S))return!1}if(p.type==="MultiPolygon"){const S=Rm(p.coordinates,_,x),k=Om(l.geometry(),g,_,x);if(!Us(g,_))return!1;for(const A of k)if(!Jv(A,S))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Bm=class{constructor(s=[],i=(l,p)=>l<p?-1:l>p?1:0){if(this.data=s,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:i,compare:l}=this,p=i[s];for(;s>0;){const g=s-1>>1,_=i[g];if(l(p,_)>=0)break;i[s]=_,s=g}i[s]=p}_down(s){const{data:i,compare:l}=this,p=this.length>>1,g=i[s];for(;s<p;){let _=1+(s<<1);const x=_+1;if(x<this.length&&l(i[x],i[_])<0&&(_=x),l(i[_],g)>=0)break;i[s]=i[_],s=_}i[s]=g}};function Qv(s,i,l,p,g){Fm(s,i,l,p||s.length-1,g||e1)}function Fm(s,i,l,p,g){for(;p>l;){if(p-l>600){var _=p-l+1,x=i-l+1,S=Math.log(_),k=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*k*(_-k)/_)*(x-_/2<0?-1:1);Fm(s,i,Math.max(l,Math.floor(i-x*k/_+A)),Math.min(p,Math.floor(i+(_-x)*k/_+A)),g)}var L=s[i],$=l,N=p;for(du(s,l,i),g(s[p],L)>0&&du(s,l,p);$<N;){for(du(s,$,N),$++,N--;g(s[$],L)<0;)$++;for(;g(s[N],L)>0;)N--}g(s[l],L)===0?du(s,l,N):du(s,++N,p),N<=i&&(l=N+1),i<=N&&(p=N-1)}}function du(s,i,l){var p=s[i];s[i]=s[l],s[l]=p}function e1(s,i){return s<i?-1:s>i?1:0}function Sc(s,i){if(s.length<=1)return[s];const l=[];let p,g;for(const _ of s){const x=n1(_);x!==0&&(_.area=Math.abs(x),g===void 0&&(g=x<0),g===x<0?(p&&l.push(p),p=[_]):p.push(_))}if(p&&l.push(p),i>1)for(let _=0;_<l.length;_++)l[_].length<=i||(Qv(l[_],i,1,l[_].length-1,t1),l[_]=l[_].slice(0,i));return l}function t1(s,i){return i.area-s.area}function n1(s){let i=0;for(let l,p,g=0,_=s.length,x=_-1;g<_;x=g++)l=s[g],p=s[x],i+=(p.x-l.x)*(l.y+p.y);return i}const Nm=1/298.257223563,jm=Nm*(2-Nm),Um=Math.PI/180;class Od{constructor(i){const l=6378.137*Um*1e3,p=Math.cos(i*Um),g=1/(1-jm*(1-p*p)),_=Math.sqrt(g);this.kx=l*_*p,this.ky=l*_*g*(1-jm)}distance(i,l){const p=this.wrap(i[0]-l[0])*this.kx,g=(i[1]-l[1])*this.ky;return Math.sqrt(p*p+g*g)}pointOnLine(i,l){let p,g,_,x,S=1/0;for(let k=0;k<i.length-1;k++){let A=i[k][0],L=i[k][1],$=this.wrap(i[k+1][0]-A)*this.kx,N=(i[k+1][1]-L)*this.ky,G=0;$===0&&N===0||(G=(this.wrap(l[0]-A)*this.kx*$+(l[1]-L)*this.ky*N)/($*$+N*N),G>1?(A=i[k+1][0],L=i[k+1][1]):G>0&&(A+=$/this.kx*G,L+=N/this.ky*G)),$=this.wrap(l[0]-A)*this.kx,N=(l[1]-L)*this.ky;const X=$*$+N*N;X<S&&(S=X,p=A,g=L,_=k,x=G)}return{point:[p,g],index:_,t:Math.max(0,Math.min(1,x))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Vm(s,i){return i[0]-s[0]}function Cc(s){return s[1]-s[0]+1}function ws(s,i){return s[1]>=s[0]&&s[1]<i}function Bd(s,i){if(s[0]>s[1])return[null,null];const l=Cc(s);if(i){if(l===2)return[s,null];const g=Math.floor(l/2);return[[s[0],s[0]+g],[s[0]+g,s[1]]]}if(l===1)return[s,null];const p=Math.floor(l/2)-1;return[[s[0],s[0]+p],[s[0]+p+1,s[1]]]}function Fd(s,i){if(!ws(i,s.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let p=i[0];p<=i[1];++p)ya(l,s[p]);return l}function Nd(s){const i=[1/0,1/0,-1/0,-1/0];for(const l of s)for(const p of l)ya(i,p);return i}function kc(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function jd(s,i,l){if(!kc(s)||!kc(i))return NaN;let p=0,g=0;return s[2]<i[0]&&(p=i[0]-s[2]),s[0]>i[2]&&(p=s[0]-i[2]),s[1]>i[3]&&(g=s[1]-i[3]),s[3]<i[1]&&(g=i[1]-s[3]),l.distance([0,0],[p,g])}function _a(s,i,l){const p=l.pointOnLine(i,s);return l.distance(s,p.point)}function Ud(s,i,l,p,g){const _=Math.min(_a(s,[l,p],g),_a(i,[l,p],g)),x=Math.min(_a(l,[s,i],g),_a(p,[s,i],g));return Math.min(_,x)}function r1(s,i,l,p,g){if(!ws(i,s.length)||!ws(p,l.length))return 1/0;let _=1/0;for(let x=i[0];x<i[1];++x){const S=s[x],k=s[x+1];for(let A=p[0];A<p[1];++A){const L=l[A],$=l[A+1];if(wc(S,k,L,$))return 0;_=Math.min(_,Ud(S,k,L,$,g))}}return _}function mr(s,i,l,p,g){if(!ws(i,s.length)||!ws(p,l.length))return NaN;let _=1/0;for(let x=i[0];x<=i[1];++x)for(let S=p[0];S<=p[1];++S)if(_=Math.min(_,g.distance(s[x],l[S])),_===0)return _;return _}function i1(s,i,l){if(nl(s,i,!0))return 0;let p=1/0;for(const g of i){const _=g[0],x=g[g.length-1];if(_!==x&&(p=Math.min(p,_a(s,[x,_],l)),p===0))return p;const S=l.pointOnLine(g,s);if(p=Math.min(p,l.distance(s,S.point)),p===0)return p}return p}function Ht(s,i,l,p){if(!ws(i,s.length))return NaN;for(let _=i[0];_<=i[1];++_)if(nl(s[_],l,!0))return 0;let g=1/0;for(let _=i[0];_<i[1];++_){const x=s[_],S=s[_+1];for(const k of l)for(let A=0,L=k.length,$=L-1;A<L;$=A++){const N=k[$],G=k[A];if(wc(x,S,N,G))return 0;g=Math.min(g,Ud(x,S,N,G,p))}}return g}function Tc(s,i){for(const l of s)for(const p of l)if(nl(p,i,!0))return!0;return!1}function Nn(s,i,l,p=1/0){const g=Nd(s),_=Nd(i);if(p!==1/0&&jd(g,_,l)>=p)return p;if(Us(g,_)){if(Tc(s,i))return 0}else if(Tc(i,s))return 0;let x=1/0;for(const S of s)for(let k=0,A=S.length,L=A-1;k<A;L=k++){const $=S[L],N=S[k];for(const G of i)for(let X=0,J=G.length,se=J-1;X<J;se=X++){const pe=G[se],Te=G[X];if(wc($,N,pe,Te))return 0;x=Math.min(x,Ud($,N,pe,Te,l))}}return x}function An(s,i,l,p,g,_){if(!_)return;const x=jd(Fd(p,_),g,l);x<i&&s.push([x,_,[0,0]])}function xa(s,i,l,p,g,_,x){if(!_||!x)return;const S=jd(Fd(p,_),Fd(g,x),l);S<i&&s.push([S,_,x])}function pu(s,i,l,p,g=1/0){let _=Math.min(p.distance(s[0],l[0][0]),g);if(_===0)return _;const x=new Bm([[0,[0,s.length-1],[0,0]]],Vm),S=Nd(l);for(;x.length>0;){const k=x.pop();if(k[0]>=_)continue;const A=k[1],L=i?50:100;if(Cc(A)<=L){if(!ws(A,s.length))return NaN;if(i){const $=Ht(s,A,l,p);if(isNaN($)||$===0)return $;_=Math.min(_,$)}else for(let $=A[0];$<=A[1];++$){const N=i1(s[$],l,p);if(_=Math.min(_,N),_===0)return 0}}else{const $=Bd(A,i);An(x,_,p,s,S,$[0]),An(x,_,p,s,S,$[1])}}return _}function fu(s,i,l,p,g,_=1/0){let x=Math.min(_,g.distance(s[0],l[0]));if(x===0)return x;const S=new Bm([[0,[0,s.length-1],[0,l.length-1]]],Vm);for(;S.length>0;){const k=S.pop();if(k[0]>=x)continue;const A=k[1],L=k[2],$=i?50:100,N=p?50:100;if(Cc(A)<=$&&Cc(L)<=N){if(!ws(A,s.length)&&ws(L,l.length))return NaN;let G;if(i&&p)G=r1(s,A,l,L,g),x=Math.min(x,G);else if(i&&!p){const X=s.slice(A[0],A[1]+1);for(let J=L[0];J<=L[1];++J)if(G=_a(l[J],X,g),x=Math.min(x,G),x===0)return x}else if(!i&&p){const X=l.slice(L[0],L[1]+1);for(let J=A[0];J<=A[1];++J)if(G=_a(s[J],X,g),x=Math.min(x,G),x===0)return x}else G=mr(s,A,l,L,g),x=Math.min(x,G)}else{const G=Bd(A,i),X=Bd(L,p);xa(S,x,g,s,l,G[0],X[0]),xa(S,x,g,s,l,G[0],X[1]),xa(S,x,g,s,l,G[1],X[0]),xa(S,x,g,s,l,G[1],X[1])}}return x}function Vd(s){return s.type==="MultiPolygon"?s.coordinates.map(i=>({type:"Polygon",coordinates:i})):s.type==="MultiLineString"?s.coordinates.map(i=>({type:"LineString",coordinates:i})):s.type==="MultiPoint"?s.coordinates.map(i=>({type:"Point",coordinates:i})):[s]}class ba{constructor(i,l){this.type=Ze,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(fa(i[1])){const p=i[1];if(p.type==="FeatureCollection")return new ba(p,p.features.map(g=>Vd(g.geometry)).flat());if(p.type==="Feature")return new ba(p,Vd(p.geometry));if("type"in p&&"coordinates"in p)return new ba(p,Vd(p))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(l,p){const g=l.geometry(),_=g.flat().map(k=>Dd([k.x,k.y],l.canonical));if(g.length===0)return NaN;const x=new Od(_[0][1]);let S=1/0;for(const k of p){switch(k.type){case"Point":S=Math.min(S,fu(_,!1,[k.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,fu(_,!1,k.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,pu(_,!1,k.coordinates,x,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="LineString")return function(l,p){const g=l.geometry(),_=g.flat().map(k=>Dd([k.x,k.y],l.canonical));if(g.length===0)return NaN;const x=new Od(_[0][1]);let S=1/0;for(const k of p){switch(k.type){case"Point":S=Math.min(S,fu(_,!0,[k.coordinates],!1,x,S));break;case"LineString":S=Math.min(S,fu(_,!0,k.coordinates,!0,x,S));break;case"Polygon":S=Math.min(S,pu(_,!0,k.coordinates,x,S))}if(S===0)return S}return S}(i,this.geometries);if(i.geometryType()==="Polygon")return function(l,p){const g=l.geometry();if(g.length===0||g[0].length===0)return NaN;const _=Sc(g,0).map(k=>k.map(A=>A.map(L=>Dd([L.x,L.y],l.canonical)))),x=new Od(_[0][0][0][1]);let S=1/0;for(const k of p)for(const A of _){switch(k.type){case"Point":S=Math.min(S,pu([k.coordinates],!1,A,x,S));break;case"LineString":S=Math.min(S,pu(k.coordinates,!0,A,x,S));break;case"Polygon":S=Math.min(S,Nn(A,k.coordinates,x,S))}if(S===0)return S}return S}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const rl={"==":Gv,"!=":Pm,">":Hv,"<":Mm,">=":Am,"<=":Zv,array:ko,at:Pd,boolean:ko,case:gc,coalesce:_c,collator:hu,format:bc,image:zd,in:Md,"index-of":Qa,interpolate:Ii,"interpolate-hcl":Ii,"interpolate-lab":Ii,length:Rd,let:js,literal:Co,match:Ad,number:ko,"number-format":Ld,object:ko,slice:uu,step:el,string:ko,"to-boolean":To,"to-color":To,"to-number":To,"to-string":To,var:yn,within:va,distance:ba};class lo{constructor(i,l,p,g){this.name=i,this.type=l,this._evaluate=p,this.args=g}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const p=i[0],g=lo.definitions[p];if(!g)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,S=x.filter(([A])=>!Array.isArray(A)||A.length===i.length-1);let k=null;for(const[A,L]of S){k=new ma(l.registry,mu,l.path,null,l.scope);const $=[];let N=!1;for(let G=1;G<i.length;G++){const X=i[G],J=Array.isArray(A)?A[G-1]:A.type,se=k.parse(X,1+$.length,J);if(!se){N=!0;break}$.push(se)}if(!N)if(Array.isArray(A)&&A.length!==$.length)k.error(`Expected ${A.length} arguments, but found ${$.length} instead.`);else{for(let G=0;G<$.length;G++){const X=Array.isArray(A)?A[G]:A.type,J=$[G];k.concat(G+1).checkSubtype(X,J.type)}if(k.errors.length===0)return new lo(p,_,L,$)}}if(S.length===1)l.errors.push(...k.errors);else{const A=(S.length?S:x).map(([$])=>{return N=$,Array.isArray(N)?`(${N.map(W).join(", ")})`:`(${W(N.type)}...)`;var N}).join(" | "),L=[];for(let $=1;$<i.length;$++){const N=l.parse(i[$],1+L.length);if(!N)return null;L.push(W(N.type))}l.error(`Expected arguments of type ${A}, but found (${L.join(", ")}) instead.`)}return null}static register(i,l){lo.definitions=l;for(const p in l)i[p]=lo}}function Wd(s,[i,l,p,g]){i=i.evaluate(s),l=l.evaluate(s),p=p.evaluate(s);const _=g?g.evaluate(s):1,x=Ja(i,l,p,_);if(x)throw new Sr(x);return new En(i/255,l/255,p/255,_,!1)}function qd(s,i){return s in i}function Gd(s,i){const l=i[s];return l===void 0?null:l}function wa(s){return{type:s}}function mu(s){if(s instanceof yn)return mu(s.boundExpression);if(s instanceof lo&&s.name==="error"||s instanceof hu||s instanceof va||s instanceof ba)return!1;const i=s instanceof To||s instanceof ko;let l=!0;return s.eachChild(p=>{l=i?l&&mu(p):l&&p instanceof Co}),!!l&&gu(s)&&yu(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function gu(s){if(s instanceof lo&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof va||s instanceof ba)return!1;let i=!0;return s.eachChild(l=>{i&&!gu(l)&&(i=!1)}),i}function il(s){if(s instanceof lo&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(l=>{i&&!il(l)&&(i=!1)}),i}function yu(s,i){if(s instanceof lo&&i.indexOf(s.name)>=0)return!1;let l=!0;return s.eachChild(p=>{l&&!yu(p,i)&&(l=!1)}),l}function Ec(s){return{result:"success",value:s}}function ol(s){return{result:"error",value:s}}function sl(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function Wm(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Hd(s){return!!s.expression&&s.expression.interpolated}function fn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Ic(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function o1(s){return s}function qm(s,i){const l=i.type==="color",p=s.stops&&typeof s.stops[0][0]=="object",g=p||!(p||s.property!==void 0),_=s.type||(Hd(i)?"exponential":"interval");if(l||i.type==="padding"){const L=l?En.parse:Wi.parse;(s=or({},s)).stops&&(s.stops=s.stops.map($=>[$[0],L($[1])])),s.default=L(s.default?s.default:i.default)}if(s.colorSpace&&(x=s.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var x;let S,k,A;if(_==="exponential")S=Hm;else if(_==="interval")S=Pc;else if(_==="categorical"){S=Gm,k=Object.create(null);for(const L of s.stops)k[L[0]]=L[1];A=typeof s.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);S=Zm}if(p){const L={},$=[];for(let X=0;X<s.stops.length;X++){const J=s.stops[X],se=J[0].zoom;L[se]===void 0&&(L[se]={zoom:se,type:s.type,property:s.property,default:s.default,stops:[]},$.push(se)),L[se].stops.push([J[0].value,J[1]])}const N=[];for(const X of $)N.push([L[X].zoom,qm(L[X],i)]);const G={name:"linear"};return{kind:"composite",interpolationType:G,interpolationFactor:Ii.interpolationFactor.bind(void 0,G),zoomStops:N.map(X=>X[0]),evaluate:({zoom:X},J)=>Hm({stops:N,base:s.base},i,X).evaluate(X,J)}}if(g){const L=_==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:L,interpolationFactor:Ii.interpolationFactor.bind(void 0,L),zoomStops:s.stops.map($=>$[0]),evaluate:({zoom:$})=>S(s,i,$,k,A)}}return{kind:"source",evaluate(L,$){const N=$&&$.properties?$.properties[s.property]:void 0;return N===void 0?al(s.default,i.default):S(s,i,N,k,A)}}}function al(s,i,l){return s!==void 0?s:i!==void 0?i:l!==void 0?l:void 0}function Gm(s,i,l,p,g){return al(typeof l===g?p[l]:void 0,s.default,i.default)}function Pc(s,i,l){if(fn(l)!=="number")return al(s.default,i.default);const p=s.stops.length;if(p===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[p-1][0])return s.stops[p-1][1];const g=yc(s.stops.map(_=>_[0]),l);return s.stops[g][1]}function Hm(s,i,l){const p=s.base!==void 0?s.base:1;if(fn(l)!=="number")return al(s.default,i.default);const g=s.stops.length;if(g===1||l<=s.stops[0][0])return s.stops[0][1];if(l>=s.stops[g-1][0])return s.stops[g-1][1];const _=yc(s.stops.map(L=>L[0]),l),x=function(L,$,N,G){const X=G-N,J=L-N;return X===0?0:$===1?J/X:(Math.pow($,J)-1)/(Math.pow($,X)-1)}(l,p,s.stops[_][0],s.stops[_+1][0]),S=s.stops[_][1],k=s.stops[_+1][1],A=Ei[i.type]||o1;return typeof S.evaluate=="function"?{evaluate(...L){const $=S.evaluate.apply(void 0,L),N=k.evaluate.apply(void 0,L);if($!==void 0&&N!==void 0)return A($,N,x,s.colorSpace)}}:A(S,k,x,s.colorSpace)}function Zm(s,i,l){switch(i.type){case"color":l=En.parse(l);break;case"formatted":l=Vi.fromString(l.toString());break;case"resolvedImage":l=qi.fromString(l.toString());break;case"padding":l=Wi.parse(l);break;default:fn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return al(l,s.default,i.default)}lo.register(rl,{error:[{kind:"error"},[Ke],(s,[i])=>{throw new Sr(i.evaluate(s))}],typeof:[Ke,[Rt],(s,[i])=>W(Ar(i.evaluate(s)))],"to-rgba":[q(Ze,4),[ln],(s,[i])=>{const[l,p,g,_]=i.evaluate(s).rgb;return[255*l,255*p,255*g,_]}],rgb:[ln,[Ze,Ze,Ze],Wd],rgba:[ln,[Ze,Ze,Ze,Ze],Wd],has:{type:it,overloads:[[[Ke],(s,[i])=>qd(i.evaluate(s),s.properties())],[[Ke,Pr],(s,[i,l])=>qd(i.evaluate(s),l.evaluate(s))]]},get:{type:Rt,overloads:[[[Ke],(s,[i])=>Gd(i.evaluate(s),s.properties())],[[Ke,Pr],(s,[i,l])=>Gd(i.evaluate(s),l.evaluate(s))]]},"feature-state":[Rt,[Ke],(s,[i])=>Gd(i.evaluate(s),s.featureState||{})],properties:[Pr,[],s=>s.properties()],"geometry-type":[Ke,[],s=>s.geometryType()],id:[Rt,[],s=>s.id()],zoom:[Ze,[],s=>s.globals.zoom],"heatmap-density":[Ze,[],s=>s.globals.heatmapDensity||0],"line-progress":[Ze,[],s=>s.globals.lineProgress||0],accumulated:[Rt,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ze,wa(Ze),(s,i)=>{let l=0;for(const p of i)l+=p.evaluate(s);return l}],"*":[Ze,wa(Ze),(s,i)=>{let l=1;for(const p of i)l*=p.evaluate(s);return l}],"-":{type:Ze,overloads:[[[Ze,Ze],(s,[i,l])=>i.evaluate(s)-l.evaluate(s)],[[Ze],(s,[i])=>-i.evaluate(s)]]},"/":[Ze,[Ze,Ze],(s,[i,l])=>i.evaluate(s)/l.evaluate(s)],"%":[Ze,[Ze,Ze],(s,[i,l])=>i.evaluate(s)%l.evaluate(s)],ln2:[Ze,[],()=>Math.LN2],pi:[Ze,[],()=>Math.PI],e:[Ze,[],()=>Math.E],"^":[Ze,[Ze,Ze],(s,[i,l])=>Math.pow(i.evaluate(s),l.evaluate(s))],sqrt:[Ze,[Ze],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Ze,[Ze],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Ze,[Ze],(s,[i])=>Math.log(i.evaluate(s))],log2:[Ze,[Ze],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Ze,[Ze],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Ze,[Ze],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Ze,[Ze],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Ze,[Ze],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Ze,[Ze],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Ze,[Ze],(s,[i])=>Math.atan(i.evaluate(s))],min:[Ze,wa(Ze),(s,i)=>Math.min(...i.map(l=>l.evaluate(s)))],max:[Ze,wa(Ze),(s,i)=>Math.max(...i.map(l=>l.evaluate(s)))],abs:[Ze,[Ze],(s,[i])=>Math.abs(i.evaluate(s))],round:[Ze,[Ze],(s,[i])=>{const l=i.evaluate(s);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ze,[Ze],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Ze,[Ze],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[it,[Ke,Rt],(s,[i,l])=>s.properties()[i.value]===l.value],"filter-id-==":[it,[Rt],(s,[i])=>s.id()===i.value],"filter-type-==":[it,[Ke],(s,[i])=>s.geometryType()===i.value],"filter-<":[it,[Ke,Rt],(s,[i,l])=>{const p=s.properties()[i.value],g=l.value;return typeof p==typeof g&&p<g}],"filter-id-<":[it,[Rt],(s,[i])=>{const l=s.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[it,[Ke,Rt],(s,[i,l])=>{const p=s.properties()[i.value],g=l.value;return typeof p==typeof g&&p>g}],"filter-id->":[it,[Rt],(s,[i])=>{const l=s.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[it,[Ke,Rt],(s,[i,l])=>{const p=s.properties()[i.value],g=l.value;return typeof p==typeof g&&p<=g}],"filter-id-<=":[it,[Rt],(s,[i])=>{const l=s.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[it,[Ke,Rt],(s,[i,l])=>{const p=s.properties()[i.value],g=l.value;return typeof p==typeof g&&p>=g}],"filter-id->=":[it,[Rt],(s,[i])=>{const l=s.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[it,[Rt],(s,[i])=>i.value in s.properties()],"filter-has-id":[it,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[it,[q(Ke)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[it,[q(Rt)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[it,[Ke,q(Rt)],(s,[i,l])=>l.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[it,[Ke,q(Rt)],(s,[i,l])=>function(p,g,_,x){for(;_<=x;){const S=_+x>>1;if(g[S]===p)return!0;g[S]>p?x=S-1:_=S+1}return!1}(s.properties()[i.value],l.value,0,l.value.length-1)],all:{type:it,overloads:[[[it,it],(s,[i,l])=>i.evaluate(s)&&l.evaluate(s)],[wa(it),(s,i)=>{for(const l of i)if(!l.evaluate(s))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(s,[i,l])=>i.evaluate(s)||l.evaluate(s)],[wa(it),(s,i)=>{for(const l of i)if(l.evaluate(s))return!0;return!1}]]},"!":[it,[it],(s,[i])=>!i.evaluate(s)],"is-supported-script":[it,[Ke],(s,[i])=>{const l=s.globals&&s.globals.isSupportedScript;return!l||l(i.evaluate(s))}],upcase:[Ke,[Ke],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[Ke,[Ke],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[Ke,wa(Rt),(s,i)=>i.map(l=>lu(l.evaluate(s))).join("")],"resolved-locale":[Ke,[oo],(s,[i])=>i.evaluate(s).resolvedLocale()]});class Mc{constructor(i,l){var p;this.expression=i,this._warningHistory={},this._evaluator=new mc,this._defaultValue=l?(p=l).type==="color"&&Ic(p.default)?new En(0,0,0,0):p.type==="color"?En.parse(p.default)||null:p.type==="padding"?Wi.parse(p.default)||null:p.type==="variableAnchorOffsetCollection"?ao.parse(p.default)||null:p.default===void 0?null:p.default:null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(i,l,p,g,_,x){return this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(i,l,p,g,_,x){this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new Sr(`Expected value to be one of ${Object.keys(this._enumValues).map(k=>JSON.stringify(k)).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Ac(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in rl}function ll(s,i){const l=new ma(rl,mu,[],i?function(g){const _={color:ln,string:Ke,number:Ze,enum:Ke,boolean:it,formatted:So,padding:Xo,resolvedImage:so,variableAnchorOffsetCollection:he};return g.type==="array"?q(_[g.value]||Rt,g.length):_[g.type]}(i):void 0),p=l.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Ec(new Mc(p,i)):ol(l.errors)}class ul{constructor(i,l){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!il(l.expression)}evaluateWithoutErrorHandling(i,l,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,p,g,_,x)}evaluate(i,l,p,g,_,x){return this._styleExpression.evaluate(i,l,p,g,_,x)}}class cl{constructor(i,l,p,g){this.kind=i,this.zoomStops=p,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!il(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(i,l,p,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(i,l,p,g,_,x)}evaluate(i,l,p,g,_,x){return this._styleExpression.evaluate(i,l,p,g,_,x)}interpolationFactor(i,l,p){return this.interpolationType?Ii.interpolationFactor(this.interpolationType,i,l,p):0}}function Zd(s,i){const l=ll(s,i);if(l.result==="error")return l;const p=l.value.expression,g=gu(p);if(!g&&!sl(i))return ol([new Wn("","data expressions not supported")]);const _=yu(p,["zoom"]);if(!_&&!Wm(i))return ol([new Wn("","zoom expressions not supported")]);const x=vu(p);return x||_?x instanceof Wn?ol([x]):x instanceof Ii&&!Hd(i)?ol([new Wn("",'"interpolate" expressions cannot be used with this property')]):Ec(x?new cl(g?"camera":"composite",l.value,x.labels,x instanceof Ii?x.interpolation:void 0):new ul(g?"constant":"source",l.value)):ol([new Wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class hl{constructor(i,l){this._parameters=i,this._specification=l,or(this,qm(this._parameters,this._specification))}static deserialize(i){return new hl(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function vu(s){let i=null;if(s instanceof js)i=vu(s.result);else if(s instanceof _c){for(const l of s.args)if(i=vu(l),i)break}else(s instanceof el||s instanceof Ii)&&s.input instanceof lo&&s.input.name==="zoom"&&(i=s);return i instanceof Wn||s.eachChild(l=>{const p=vu(l);p instanceof Wn?i=p:!i&&p?i=new Wn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new Wn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}function Lc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const i of s.slice(1))if(!Lc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const zc={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Kd(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Lc(s)||(s=Rc(s));const i=ll(s,zc);if(i.result==="error")throw new Error(i.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,p,g)=>i.value.evaluate(l,p,{},g),needGeometry:Km(s)}}function s1(s,i){return s<i?-1:s>i?1:0}function Km(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let i=1;i<s.length;i++)if(Km(s[i]))return!0;return!1}function Rc(s){if(!s)return!0;const i=s[0];return s.length<=1?i!=="any":i==="=="?Xd(s[1],s[2],"=="):i==="!="?ni(Xd(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Xd(s[1],s[2],i):i==="any"?(l=s.slice(1),["any"].concat(l.map(Rc))):i==="all"?["all"].concat(s.slice(1).map(Rc)):i==="none"?["all"].concat(s.slice(1).map(Rc).map(ni)):i==="in"?_u(s[1],s.slice(2)):i==="!in"?ni(_u(s[1],s.slice(2))):i==="has"?xu(s[1]):i!=="!has"||ni(xu(s[1]));var l}function Xd(s,i,l){switch(s){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,s,i]}}function _u(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(l=>typeof l!=typeof i[0])?["filter-in-large",s,["literal",i.sort(s1)]]:["filter-in-small",s,["literal",i]]}}function xu(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function ni(s){return["!",s]}function Sa(s){const i=typeof s;if(i==="number"||i==="boolean"||i==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let g="[";for(const _ of s)g+=`${Sa(_)},`;return`${g}]`}const l=Object.keys(s).sort();let p="{";for(let g=0;g<l.length;g++)p+=`${JSON.stringify(l[g])}:${Sa(s[l[g]])},`;return`${p}}`}function Xm(s){let i="";for(const l of ir)i+=`/${Sa(s[l])}`;return i}function Ym(s){const i=s.value;return i?[new Ge(s.key,i,"constants have been deprecated as of v8")]:[]}function gr(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function Eo(s){if(Array.isArray(s))return s.map(Eo);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const i={};for(const l in s)i[l]=Eo(s[l]);return i}return gr(s)}function Gi(s){const i=s.key,l=s.value,p=s.valueSpec||{},g=s.objectElementValidators||{},_=s.style,x=s.styleSpec,S=s.validateSpec;let k=[];const A=fn(l);if(A!=="object")return[new Ge(i,l,`object expected, ${A} found`)];for(const L in l){const $=L.split(".")[0],N=p[$]||p["*"];let G;if(g[$])G=g[$];else if(p[$])G=S;else if(g["*"])G=g["*"];else{if(!p["*"]){k.push(new Ge(i,l[L],`unknown property "${L}"`));continue}G=S}k=k.concat(G({key:(i&&`${i}.`)+L,value:l[L],valueSpec:N,style:_,styleSpec:x,object:l,objectKey:L,validateSpec:S},l))}for(const L in p)g[L]||p[L].required&&p[L].default===void 0&&l[L]===void 0&&k.push(new Ge(i,l,`missing required property "${L}"`));return k}function bu(s){const i=s.value,l=s.valueSpec,p=s.style,g=s.styleSpec,_=s.key,x=s.arrayElementValidator||s.validateSpec;if(fn(i)!=="array")return[new Ge(_,i,`array expected, ${fn(i)} found`)];if(l.length&&i.length!==l.length)return[new Ge(_,i,`array length ${l.length} expected, length ${i.length} found`)];if(l["min-length"]&&i.length<l["min-length"])return[new Ge(_,i,`array length at least ${l["min-length"]} expected, length ${i.length} found`)];let S={type:l.value,values:l.values};g.$version<7&&(S.function=l.function),fn(l.value)==="object"&&(S=l.value);let k=[];for(let A=0;A<i.length;A++)k=k.concat(x({array:i,arrayIndex:A,value:i[A],valueSpec:S,validateSpec:s.validateSpec,style:p,styleSpec:g,key:`${_}[${A}]`}));return k}function Yd(s){const i=s.key,l=s.value,p=s.valueSpec;let g=fn(l);return g==="number"&&l!=l&&(g="NaN"),g!=="number"?[new Ge(i,l,`number expected, ${g} found`)]:"minimum"in p&&l<p.minimum?[new Ge(i,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new Ge(i,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function Dc(s){const i=s.valueSpec,l=gr(s.value.type);let p,g,_,x={};const S=l!=="categorical"&&s.value.property===void 0,k=!S,A=fn(s.value.stops)==="array"&&fn(s.value.stops[0])==="array"&&fn(s.value.stops[0][0])==="object",L=Gi({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(G){if(l==="identity")return[new Ge(G.key,G.value,'identity function may not have a "stops" property')];let X=[];const J=G.value;return X=X.concat(bu({key:G.key,value:J,valueSpec:G.valueSpec,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,arrayElementValidator:$})),fn(J)==="array"&&J.length===0&&X.push(new Ge(G.key,J,"array must have at least one stop")),X},default:function(G){return G.validateSpec({key:G.key,value:G.value,valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec})}}});return l==="identity"&&S&&L.push(new Ge(s.key,s.value,'missing required property "property"')),l==="identity"||s.value.stops||L.push(new Ge(s.key,s.value,'missing required property "stops"')),l==="exponential"&&s.valueSpec.expression&&!Hd(s.valueSpec)&&L.push(new Ge(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(k&&!sl(s.valueSpec)?L.push(new Ge(s.key,s.value,"property functions not supported")):S&&!Wm(s.valueSpec)&&L.push(new Ge(s.key,s.value,"zoom functions not supported"))),l!=="categorical"&&!A||s.value.property!==void 0||L.push(new Ge(s.key,s.value,'"property" property is required')),L;function $(G){let X=[];const J=G.value,se=G.key;if(fn(J)!=="array")return[new Ge(se,J,`array expected, ${fn(J)} found`)];if(J.length!==2)return[new Ge(se,J,`array length 2 expected, length ${J.length} found`)];if(A){if(fn(J[0])!=="object")return[new Ge(se,J,`object expected, ${fn(J[0])} found`)];if(J[0].zoom===void 0)return[new Ge(se,J,"object stop key must have zoom")];if(J[0].value===void 0)return[new Ge(se,J,"object stop key must have value")];if(_&&_>gr(J[0].zoom))return[new Ge(se,J[0].zoom,"stop zoom values must appear in ascending order")];gr(J[0].zoom)!==_&&(_=gr(J[0].zoom),g=void 0,x={}),X=X.concat(Gi({key:`${se}[0]`,value:J[0],valueSpec:{zoom:{}},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec,objectElementValidators:{zoom:Yd,value:N}}))}else X=X.concat(N({key:`${se}[0]`,value:J[0],valueSpec:{},validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec},J));return Ac(Eo(J[1]))?X.concat([new Ge(`${se}[1]`,J[1],"expressions are not allowed in function stops.")]):X.concat(G.validateSpec({key:`${se}[1]`,value:J[1],valueSpec:i,validateSpec:G.validateSpec,style:G.style,styleSpec:G.styleSpec}))}function N(G,X){const J=fn(G.value),se=gr(G.value),pe=G.value!==null?G.value:X;if(p){if(J!==p)return[new Ge(G.key,pe,`${J} stop domain type must match previous stop domain type ${p}`)]}else p=J;if(J!=="number"&&J!=="string"&&J!=="boolean")return[new Ge(G.key,pe,"stop domain value must be a number, string, or boolean")];if(J!=="number"&&l!=="categorical"){let Te=`number expected, ${J} found`;return sl(i)&&l===void 0&&(Te+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(G.key,pe,Te)]}return l!=="categorical"||J!=="number"||isFinite(se)&&Math.floor(se)===se?l!=="categorical"&&J==="number"&&g!==void 0&&se<g?[new Ge(G.key,pe,"stop domain values must appear in ascending order")]:(g=se,l==="categorical"&&se in x?[new Ge(G.key,pe,"stop domain values must be unique")]:(x[se]=!0,[])):[new Ge(G.key,pe,`integer expected, found ${se}`)]}}function dl(s){const i=(s.expressionContext==="property"?Zd:ll)(Eo(s.value),s.valueSpec);if(i.result==="error")return i.value.map(p=>new Ge(`${s.key}${p.key}`,s.value,p.message));const l=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!l.outputDefined())return[new Ge(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!il(l))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!il(l))return[new Ge(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!yu(l,["zoom","feature-state"]))return[new Ge(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!gu(l))return[new Ge(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ss(s){const i=s.key,l=s.value,p=s.valueSpec,g=[];return Array.isArray(p.values)?p.values.indexOf(gr(l))===-1&&g.push(new Ge(i,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(gr(l))===-1&&g.push(new Ge(i,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Jd(s){return Lc(Eo(s.value))?dl(or({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$c(s)}function $c(s){const i=s.value,l=s.key;if(fn(i)!=="array")return[new Ge(l,i,`array expected, ${fn(i)} found`)];const p=s.styleSpec;let g,_=[];if(i.length<1)return[new Ge(l,i,"filter array must have at least 1 element")];switch(_=_.concat(Ss({key:`${l}[0]`,value:i[0],valueSpec:p.filter_operator,style:s.style,styleSpec:s.styleSpec})),gr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&gr(i[1])==="$type"&&_.push(new Ge(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&_.push(new Ge(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(g=fn(i[1]),g!=="string"&&_.push(new Ge(`${l}[1]`,i[1],`string expected, ${g} found`)));for(let x=2;x<i.length;x++)g=fn(i[x]),gr(i[1])==="$type"?_=_.concat(Ss({key:`${l}[${x}]`,value:i[x],valueSpec:p.geometry_type,style:s.style,styleSpec:s.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new Ge(`${l}[${x}]`,i[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<i.length;x++)_=_.concat($c({key:`${l}[${x}]`,value:i[x],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":g=fn(i[1]),i.length!==2?_.push(new Ge(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new Ge(`${l}[1]`,i[1],`string expected, ${g} found`))}return _}function Qd(s,i){const l=s.key,p=s.validateSpec,g=s.style,_=s.styleSpec,x=s.value,S=s.objectKey,k=_[`${i}_${s.layerType}`];if(!k)return[];const A=S.match(/^(.*)-transition$/);if(i==="paint"&&A&&k[A[1]]&&k[A[1]].transition)return p({key:l,value:x,valueSpec:_.transition,style:g,styleSpec:_});const L=s.valueSpec||k[S];if(!L)return[new Ge(l,x,`unknown property "${S}"`)];let $;if(fn(x)==="string"&&sl(L)&&!L.tokens&&($=/^{([^}]+)}$/.exec(x)))return[new Ge(l,x,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify($[1])} }\`.`)];const N=[];return s.layerType==="symbol"&&(S==="text-field"&&g&&!g.glyphs&&N.push(new Ge(l,x,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Ic(Eo(x))&&gr(x.type)==="identity"&&N.push(new Ge(l,x,'"text-font" does not support identity functions'))),N.concat(p({key:s.key,value:x,valueSpec:L,style:g,styleSpec:_,expressionContext:"property",propertyType:i,propertyKey:S}))}function Oc(s){return Qd(s,"paint")}function ep(s){return Qd(s,"layout")}function tp(s){let i=[];const l=s.value,p=s.key,g=s.style,_=s.styleSpec;l.type||l.ref||i.push(new Ge(p,l,'either "type" or "ref" is required'));let x=gr(l.type);const S=gr(l.ref);if(l.id){const k=gr(l.id);for(let A=0;A<s.arrayIndex;A++){const L=g.layers[A];gr(L.id)===k&&i.push(new Ge(p,l.id,`duplicate layer id "${l.id}", previously used at line ${L.id.__line__}`))}}if("ref"in l){let k;["type","source","source-layer","filter","layout"].forEach(A=>{A in l&&i.push(new Ge(p,l[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{gr(A.id)===S&&(k=A)}),k?k.ref?i.push(new Ge(p,l.ref,"ref cannot reference another ref layer")):x=gr(k.type):i.push(new Ge(p,l.ref,`ref layer "${S}" not found`))}else if(x!=="background")if(l.source){const k=g.sources&&g.sources[l.source],A=k&&gr(k.type);k?A==="vector"&&x==="raster"?i.push(new Ge(p,l.source,`layer "${l.id}" requires a raster source`)):A!=="raster-dem"&&x==="hillshade"?i.push(new Ge(p,l.source,`layer "${l.id}" requires a raster-dem source`)):A==="raster"&&x!=="raster"?i.push(new Ge(p,l.source,`layer "${l.id}" requires a vector source`)):A!=="vector"||l["source-layer"]?A==="raster-dem"&&x!=="hillshade"?i.push(new Ge(p,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!l.paint||!l.paint["line-gradient"]||A==="geojson"&&k.lineMetrics||i.push(new Ge(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Ge(p,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new Ge(p,l.source,`source "${l.source}" not found`))}else i.push(new Ge(p,l,'missing required property "source"'));return i=i.concat(Gi({key:p,value:l,valueSpec:_.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${p}.type`,value:l.type,valueSpec:_.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:l,objectKey:"type"}),filter:Jd,layout:k=>Gi({layer:l,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":A=>ep(or({layerType:x},A))}}),paint:k=>Gi({layer:l,key:k.key,value:k.value,style:k.style,styleSpec:k.styleSpec,validateSpec:k.validateSpec,objectElementValidators:{"*":A=>Oc(or({layerType:x},A))}})}})),i}function Ca(s){const i=s.value,l=s.key,p=fn(i);return p!=="string"?[new Ge(l,i,`string expected, ${p} found`)]:[]}const Bc={promoteId:function({key:s,value:i}){if(fn(i)==="string")return Ca({key:s,value:i});{const l=[];for(const p in i)l.push(...Ca({key:`${s}.${p}`,value:i[p]}));return l}}};function wu(s){const i=s.value,l=s.key,p=s.styleSpec,g=s.style,_=s.validateSpec;if(!i.type)return[new Ge(l,i,'"type" is required')];const x=gr(i.type);let S;switch(x){case"vector":case"raster":return S=Gi({key:l,value:i,valueSpec:p[`source_${x.replace("-","_")}`],style:s.style,styleSpec:p,objectElementValidators:Bc,validateSpec:_}),S;case"raster-dem":return S=function(k){var A;const L=(A=k.sourceName)!==null&&A!==void 0?A:"",$=k.value,N=k.styleSpec,G=N.source_raster_dem,X=k.style;let J=[];const se=fn($);if($===void 0)return J;if(se!=="object")return J.push(new Ge("source_raster_dem",$,`object expected, ${se} found`)),J;const pe=gr($.encoding)==="custom",Te=["redFactor","greenFactor","blueFactor","baseShift"],_e=k.value.encoding?`"${k.value.encoding}"`:"Default";for(const ke in $)!pe&&Te.includes(ke)?J.push(new Ge(ke,$[ke],`In "${L}": "${ke}" is only valid when "encoding" is set to "custom". ${_e} encoding found`)):G[ke]?J=J.concat(k.validateSpec({key:ke,value:$[ke],valueSpec:G[ke],validateSpec:k.validateSpec,style:X,styleSpec:N})):J.push(new Ge(ke,$[ke],`unknown property "${ke}"`));return J}({sourceName:l,value:i,style:s.style,styleSpec:p,validateSpec:_}),S;case"geojson":if(S=Gi({key:l,value:i,valueSpec:p.source_geojson,style:g,styleSpec:p,validateSpec:_,objectElementValidators:Bc}),i.cluster)for(const k in i.clusterProperties){const[A,L]=i.clusterProperties[k],$=typeof A=="string"?[A,["accumulated"],["get",k]]:A;S.push(...dl({key:`${l}.${k}.map`,value:L,validateSpec:_,expressionContext:"cluster-map"})),S.push(...dl({key:`${l}.${k}.reduce`,value:$,validateSpec:_,expressionContext:"cluster-reduce"}))}return S;case"video":return Gi({key:l,value:i,valueSpec:p.source_video,style:g,validateSpec:_,styleSpec:p});case"image":return Gi({key:l,value:i,valueSpec:p.source_image,style:g,validateSpec:_,styleSpec:p});case"canvas":return[new Ge(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ss({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,validateSpec:_,styleSpec:p})}}function np(s){const i=s.value,l=s.styleSpec,p=l.light,g=s.style;let _=[];const x=fn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ge("light",i,`object expected, ${x} found`)]),_;for(const S in i){const k=S.match(/^(.*)-transition$/);_=_.concat(k&&p[k[1]]&&p[k[1]].transition?s.validateSpec({key:S,value:i[S],valueSpec:l.transition,validateSpec:s.validateSpec,style:g,styleSpec:l}):p[S]?s.validateSpec({key:S,value:i[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new Ge(S,i[S],`unknown property "${S}"`)])}return _}function rp(s){const i=s.value,l=s.styleSpec,p=l.sky,g=s.style,_=fn(i);if(i===void 0)return[];if(_!=="object")return[new Ge("sky",i,`object expected, ${_} found`)];let x=[];for(const S in i)x=x.concat(p[S]?s.validateSpec({key:S,value:i[S],valueSpec:p[S],style:g,styleSpec:l}):[new Ge(S,i[S],`unknown property "${S}"`)]);return x}function ip(s){const i=s.value,l=s.styleSpec,p=l.terrain,g=s.style;let _=[];const x=fn(i);if(i===void 0)return _;if(x!=="object")return _=_.concat([new Ge("terrain",i,`object expected, ${x} found`)]),_;for(const S in i)_=_.concat(p[S]?s.validateSpec({key:S,value:i[S],valueSpec:p[S],validateSpec:s.validateSpec,style:g,styleSpec:l}):[new Ge(S,i[S],`unknown property "${S}"`)]);return _}function op(s){let i=[];const l=s.value,p=s.key;if(Array.isArray(l)){const g=[],_=[];for(const x in l)l[x].id&&g.includes(l[x].id)&&i.push(new Ge(p,l,`all the sprites' ids must be unique, but ${l[x].id} is duplicated`)),g.push(l[x].id),l[x].url&&_.includes(l[x].url)&&i.push(new Ge(p,l,`all the sprites' URLs must be unique, but ${l[x].url} is duplicated`)),_.push(l[x].url),i=i.concat(Gi({key:`${p}[${x}]`,value:l[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return i}return Ca({key:p,value:l})}const Fc={"*":()=>[],array:bu,boolean:function(s){const i=s.value,l=s.key,p=fn(i);return p!=="boolean"?[new Ge(l,i,`boolean expected, ${p} found`)]:[]},number:Yd,color:function(s){const i=s.key,l=s.value,p=fn(l);return p!=="string"?[new Ge(i,l,`color expected, ${p} found`)]:En.parse(String(l))?[]:[new Ge(i,l,`color expected, "${l}" found`)]},constants:Ym,enum:Ss,filter:Jd,function:Dc,layer:tp,object:Gi,source:wu,light:np,sky:rp,terrain:ip,projection:function(s){const i=s.value,l=s.styleSpec,p=l.projection,g=s.style,_=fn(i);if(i===void 0)return[];if(_!=="object")return[new Ge("projection",i,`object expected, ${_} found`)];let x=[];for(const S in i)x=x.concat(p[S]?s.validateSpec({key:S,value:i[S],valueSpec:p[S],style:g,styleSpec:l}):[new Ge(S,i[S],`unknown property "${S}"`)]);return x},string:Ca,formatted:function(s){return Ca(s).length===0?[]:dl(s)},resolvedImage:function(s){return Ca(s).length===0?[]:dl(s)},padding:function(s){const i=s.key,l=s.value;if(fn(l)==="array"){if(l.length<1||l.length>4)return[new Ge(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let g=[];for(let _=0;_<l.length;_++)g=g.concat(s.validateSpec({key:`${i}[${_}]`,value:l[_],validateSpec:s.validateSpec,valueSpec:p}));return g}return Yd({key:i,value:l,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const i=s.key,l=s.value,p=fn(l),g=s.styleSpec;if(p!=="array"||l.length<1||l.length%2!=0)return[new Ge(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let _=[];for(let x=0;x<l.length;x+=2)_=_.concat(Ss({key:`${i}[${x}]`,value:l[x],valueSpec:g.layout_symbol["text-anchor"]})),_=_.concat(bu({key:`${i}[${x+1}]`,value:l[x+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:g}));return _},sprite:op};function pl(s){const i=s.value,l=s.valueSpec,p=s.styleSpec;return s.validateSpec=pl,l.expression&&Ic(gr(i))?Dc(s):l.expression&&Ac(Eo(i))?dl(s):l.type&&Fc[l.type]?Fc[l.type](s):Gi(or({},s,{valueSpec:l.type?p[l.type]:l}))}function Jm(s){const i=s.value,l=s.key,p=Ca(s);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new Ge(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new Ge(l,i,'"glyphs" url must include a "{range}" token'))),p}function uo(s,i=we){let l=[];return l=l.concat(pl({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,validateSpec:pl,objectElementValidators:{glyphs:Jm,"*":()=>[]}})),s.constants&&(l=l.concat(Ym({key:"constants",value:s.constants,style:s,styleSpec:i,validateSpec:pl}))),sp(l)}function Jo(s){return function(i){return s({...i,validateSpec:pl})}}function sp(s){return[].concat(s).sort((i,l)=>i.line-l.line)}function Io(s){return function(...i){return sp(s.apply(this,i))}}uo.source=Io(Jo(wu)),uo.sprite=Io(Jo(op)),uo.glyphs=Io(Jo(Jm)),uo.light=Io(Jo(np)),uo.sky=Io(Jo(rp)),uo.terrain=Io(Jo(ip)),uo.layer=Io(Jo(tp)),uo.filter=Io(Jo(Jd)),uo.paintProperty=Io(Jo(Oc)),uo.layoutProperty=Io(Jo(ep));const ka=uo,a1=ka.light,l1=ka.sky,Qm=ka.paintProperty,eg=ka.layoutProperty;function ap(s,i){let l=!1;if(i&&i.length)for(const p of i)s.fire(new yt(new Error(p.message))),l=!0;return l}class fl{constructor(i,l,p){const g=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const x=new Int32Array(this.arrayBuffer);i=x[0],this.d=(l=x[1])+2*(p=x[2]);for(let k=0;k<this.d*this.d;k++){const A=x[3+k],L=x[3+k+1];g.push(A===L?null:x.subarray(A,L))}const S=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],S),this.bboxes=x.subarray(S),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=p,this.scale=l/i,this.uid=0;const _=p/l*i;this.min=-_,this.max=i+_}insert(i,l,p,g,_){this._forEachCell(l,p,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,p,g,_,x){this.cells[_].push(x)}query(i,l,p,g,_){const x=this.min,S=this.max;if(i<=x&&l<=x&&S<=p&&S<=g&&!_)return Array.prototype.slice.call(this.keys);{const k=[];return this._forEachCell(i,l,p,g,this._queryCell,k,{},_),k}}_queryCell(i,l,p,g,_,x,S,k){const A=this.cells[_];if(A!==null){const L=this.keys,$=this.bboxes;for(let N=0;N<A.length;N++){const G=A[N];if(S[G]===void 0){const X=4*G;(k?k($[X+0],$[X+1],$[X+2],$[X+3]):i<=$[X+2]&&l<=$[X+3]&&p>=$[X+0]&&g>=$[X+1])?(S[G]=!0,x.push(L[G])):S[G]=!1}}}}_forEachCell(i,l,p,g,_,x,S,k){const A=this._convertToCellCoord(i),L=this._convertToCellCoord(l),$=this._convertToCellCoord(p),N=this._convertToCellCoord(g);for(let G=A;G<=$;G++)for(let X=L;X<=N;X++){const J=this.d*X+G;if((!k||k(this._convertFromCellCoord(G),this._convertFromCellCoord(X),this._convertFromCellCoord(G+1),this._convertFromCellCoord(X+1)))&&_.call(this,i,l,p,g,J,x,S,k))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let p=0;for(let x=0;x<this.cells.length;x++)p+=this.cells[x].length;const g=new Int32Array(l+p+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=l;for(let x=0;x<i.length;x++){const S=i[x];g[3+x]=_,g.set(S,_),_+=S.length}return g[3+i.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+i.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(i,l){const p=i.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(i){return new fl(i.buffer)}}const co={};function mt(s,i,l={}){if(co[s])throw new Error(`${s} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:s,writeable:!1}),co[s]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}mt("Object",Object),mt("TransferableGridIndex",fl),mt("Color",En),mt("Error",Error),mt("AJAXError",en),mt("ResolvedImage",qi),mt("StylePropertyFunction",hl),mt("StyleExpression",Mc,{omit:["_evaluator"]}),mt("ZoomDependentExpression",cl),mt("ZoomConstantExpression",ul),mt("CompoundExpression",lo,{omit:["_evaluate"]});for(const s in rl)rl[s]._classRegistryKey||mt(`Expression_${s}`,rl[s]);function Nc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function lp(s){return s.$name||s.constructor._classRegistryKey}function tg(s){return!function(i){if(i===null||typeof i!="object")return!1;const l=lp(i);return!(!l||l==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Nc(s)||ut(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function ml(s,i){if(tg(s))return(Nc(s)||ut(s))&&i&&i.push(s),ArrayBuffer.isView(s)&&i&&i.push(s.buffer),s instanceof ImageData&&i&&i.push(s.data.buffer),s;if(Array.isArray(s)){const _=[];for(const x of s)_.push(ml(x,i));return _}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const l=lp(s);if(!l)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!co[l])throw new Error(`${l} is not registered.`);const{klass:p}=co[l],g=p.serialize?p.serialize(s,i):{};if(p.serialize){if(i&&g===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in s){if(!s.hasOwnProperty(_)||co[l].omit.indexOf(_)>=0)continue;const x=s[_];g[_]=co[l].shallow.indexOf(_)>=0?x:ml(x,i)}s instanceof Error&&(g.message=s.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(g.$name=l),g}function gl(s){if(tg(s))return s;if(Array.isArray(s))return s.map(gl);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const i=lp(s)||"Object";if(!co[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=co[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(s);const p=Object.create(l.prototype);for(const g of Object.keys(s)){if(g==="$name")continue;const _=s[g];p[g]=co[i].shallow.indexOf(g)>=0?_:gl(_)}return p}class up{constructor(){this.first=!0}update(i,l){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}const nn={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function cp(s){for(const i of s)if(dp(i.charCodeAt(0)))return!0;return!1}function u1(s){for(const i of s)if(!yl(i.charCodeAt(0)))return!1;return!0}function hp(s){const i=s.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(i.join("|"),"u")}const c1=hp(["Arab","Dupl","Mong","Ougr","Syrc"]);function yl(s){return!c1.test(String.fromCodePoint(s))}const ng=hp(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function dp(s){return!(s!==746&&s!==747&&(s<4352||!(nn["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||nn["CJK Compatibility"](s)||nn["CJK Strokes"](s)||!(!nn["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||nn["Enclosed CJK Letters and Months"](s)||nn["Ideographic Description Characters"](s)||nn.Kanbun(s)||nn.Katakana(s)&&s!==12540||!(!nn["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!nn["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||nn["Vertical Forms"](s)||nn["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||ng.test(String.fromCodePoint(s)))))}function rg(s){return!(dp(s)||function(i){return!!(nn["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||nn["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||nn["Letterlike Symbols"](i)||nn["Number Forms"](i)||nn["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||nn["Control Pictures"](i)&&i!==9251||nn["Optical Character Recognition"](i)||nn["Enclosed Alphanumerics"](i)||nn["Geometric Shapes"](i)||nn["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||nn["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||nn["CJK Symbols and Punctuation"](i)||nn.Katakana(i)||nn["Private Use Area"](i)||nn["CJK Compatibility Forms"](i)||nn["Small Form Variants"](i)||nn["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}const h1=hp(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function pp(s){return h1.test(String.fromCodePoint(s))}function d1(s,i){return!(!i&&pp(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||nn.Khmer(s))}function p1(s){for(const i of s)if(pp(i.charCodeAt(0)))return!0;return!1}const Hi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class qn{constructor(i,l){this.zoom=i,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new up,this.transition={})}isSupportedScript(i){return function(l,p){for(const g of l)if(!d1(g.charCodeAt(0),p))return!1;return!0}(i,Hi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}class vl{constructor(i,l){this.property=i,this.value=l,this.expression=function(p,g){if(Ic(p))return new hl(p,g);if(Ac(p)){const _=Zd(p,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=p;return g.type==="color"&&typeof p=="string"?_=En.parse(p):g.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?g.type==="variableAnchorOffsetCollection"&&Array.isArray(p)&&(_=ao.parse(p)):_=Wi.parse(p),{kind:"constant",evaluate:()=>_}}}(l===void 0?i.specification.default:l,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,l,p){return this.property.possiblyEvaluate(this,i,l,p)}}class jc{constructor(i){this.property=i,this.value=new vl(i,void 0)}transitioned(i,l){return new ig(this.property,this.value,l,le({},i.transition,this.transition),i.now)}untransitioned(){return new ig(this.property,this.value,null,{},0)}}class Uc{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Ee(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].value=new vl(this._values[i].property,l===null?void 0:Ee(l))}getTransition(i){return Ee(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new jc(this._values[i].property)),this._values[i].transition=Ee(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p);const g=this.getTransition(l);g!==void 0&&(i[`${l}-transition`]=g)}return i}transitioned(i,l){const p=new Su(this._properties);for(const g of Object.keys(this._values))p._values[g]=this._values[g].transitioned(i,l._values[g]);return p}untransitioned(){const i=new Su(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class ig{constructor(i,l,p,g,_){this.property=i,this.value=l,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,i.specification.transition&&(g.delay||g.duration)&&(this.prior=p)}possiblyEvaluate(i,l,p){const g=i.now||0,_=this.value.possiblyEvaluate(i,l,p),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(i,l,p);{const S=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(i,l,p),_,function(k){if(k<=0)return 0;if(k>=1)return 1;const A=k*k,L=A*k;return 4*(k<.5?L:3*(k-A)+L-.75)}(S))}}return _}}class Su{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,p){const g=new ku(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,p);return g}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Cu{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Ee(this._values[i].value)}setValue(i,l){this._values[i]=new vl(this._values[i].property,l===null?void 0:Ee(l))}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p)}return i}possiblyEvaluate(i,l,p){const g=new ku(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(i,l,p);return g}}class Qo{constructor(i,l,p){this.property=i,this.value=l,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,p,g){return this.property.evaluate(this.value,this.parameters,i,l,p,g)}}class ku{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class vt{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,p){const g=Ei[this.specification.type];return g?g(i,l,p):i}}class Mt{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,p,g){return new Qo(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},p,g)}:i.expression,l)}interpolate(i,l,p){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Qo(this,{kind:"constant",value:void 0},i.parameters);const g=Ei[this.specification.type];if(g){const _=g(i.value.value,l.value.value,p);return new Qo(this,{kind:"constant",value:_},i.parameters)}return i}evaluate(i,l,p,g,_,x){return i.kind==="constant"?i.value:i.evaluate(l,p,g,_,x)}}class Vc extends Mt{possiblyEvaluate(i,l,p,g){if(i.value===void 0)return new Qo(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},p,g),x=i.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,S=this._calculate(x,x,x,l);return new Qo(this,{kind:"constant",value:S},l)}if(i.expression.kind==="camera"){const _=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Qo(this,{kind:"constant",value:_},l)}return new Qo(this,i.expression,l)}evaluate(i,l,p,g,_,x){if(i.kind==="source"){const S=i.evaluate(l,p,g,_,x);return this._calculate(S,S,S,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,g),i.evaluate({zoom:Math.floor(l.zoom)},p,g),i.evaluate({zoom:Math.floor(l.zoom)+1},p,g),l):i.value}_calculate(i,l,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class Wc{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,g){if(i.value!==void 0){if(i.expression.kind==="constant"){const _=i.expression.evaluate(l,null,{},p,g);return this._calculate(_,_,_,l)}return this._calculate(i.expression.evaluate(new qn(Math.floor(l.zoom-1),l)),i.expression.evaluate(new qn(Math.floor(l.zoom),l)),i.expression.evaluate(new qn(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,p,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class fp{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,g){return!!i.expression.evaluate(l,null,{},p,g)}interpolate(){return!1}}class v{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const p=i[l];p.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new vl(p,void 0),_=this.defaultTransitionablePropertyValues[l]=new jc(p);this.defaultTransitioningPropertyValues[l]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}mt("DataDrivenProperty",Mt),mt("DataConstantProperty",vt),mt("CrossFadedDataDrivenProperty",Vc),mt("CrossFadedProperty",Wc),mt("ColorRampProperty",fp);const r="-transition";class c extends zt{constructor(i,l){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),l.layout&&(this._unevaluatedLayout=new Cu(l.layout)),l.paint)){this._transitionablePaint=new Uc(l.paint);for(const p in i.paint)this.setPaintProperty(p,i.paint[p],{validate:!1});for(const p in i.layout)this.setLayoutProperty(p,i.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ku(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,l,p={}){l!=null&&this._validate(eg,`layers.${this.id}.layout.${i}`,i,l,p)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,l):this.visibility=l)}getPaintProperty(i){return i.endsWith(r)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,p={}){if(l!=null&&this._validate(Qm,`layers.${this.id}.paint.${i}`,i,l,p))return!1;if(i.endsWith(r))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[i],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),S=g.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const k=this._transitionablePaint._values[i].value;return k.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(i,S,k)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,p){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),H(i,(l,p)=>!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length))}_validate(i,l,p,g,_={}){return(!_||_.validate!==!1)&&ap(this,i.call(ka,{key:l,layerType:this.type,objectKey:p,value:g,styleSpec:we,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Qo&&sl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function C(s,i=1){let l=0,p=0;return{members:s.map(g=>{const _=f[g.type].BYTES_PER_ELEMENT,x=l=T(l,Math.max(i,_)),S=g.components||1;return p=Math.max(p,_),l+=_*S,{name:g.name,type:g.type,components:S,offset:x}}),size:T(l,Math.max(p,i)),alignment:i}}function T(s,i){return Math.ceil(s/i)*i}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const g=2*i;return this.int16[g+0]=l,this.int16[g+1]=p,i}}M.prototype.bytesPerElement=4,mt("StructArrayLayout2i4",M);class z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,p)}emplace(i,l,p,g){const _=3*i;return this.int16[_+0]=l,this.int16[_+1]=p,this.int16[_+2]=g,i}}z.prototype.bytesPerElement=6,mt("StructArrayLayout3i6",z);class O extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,p,g)}emplace(i,l,p,g,_){const x=4*i;return this.int16[x+0]=l,this.int16[x+1]=p,this.int16[x+2]=g,this.int16[x+3]=_,i}}O.prototype.bytesPerElement=8,mt("StructArrayLayout4i8",O);class B extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,g,_,x)}emplace(i,l,p,g,_,x,S){const k=6*i;return this.int16[k+0]=l,this.int16[k+1]=p,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,i}}B.prototype.bytesPerElement=12,mt("StructArrayLayout2i4i12",B);class Z extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,g,_,x)}emplace(i,l,p,g,_,x,S){const k=4*i,A=8*i;return this.int16[k+0]=l,this.int16[k+1]=p,this.uint8[A+4]=g,this.uint8[A+5]=_,this.uint8[A+6]=x,this.uint8[A+7]=S,i}}Z.prototype.bytesPerElement=8,mt("StructArrayLayout2i4ub8",Z);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const g=2*i;return this.float32[g+0]=l,this.float32[g+1]=p,i}}ee.prototype.bytesPerElement=8,mt("StructArrayLayout2f8",ee);class ne extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x,S,k,A,L){const $=this.length;return this.resize($+1),this.emplace($,i,l,p,g,_,x,S,k,A,L)}emplace(i,l,p,g,_,x,S,k,A,L,$){const N=10*i;return this.uint16[N+0]=l,this.uint16[N+1]=p,this.uint16[N+2]=g,this.uint16[N+3]=_,this.uint16[N+4]=x,this.uint16[N+5]=S,this.uint16[N+6]=k,this.uint16[N+7]=A,this.uint16[N+8]=L,this.uint16[N+9]=$,i}}ne.prototype.bytesPerElement=20,mt("StructArrayLayout10ui20",ne);class ae extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x,S,k,A,L,$,N){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,p,g,_,x,S,k,A,L,$,N)}emplace(i,l,p,g,_,x,S,k,A,L,$,N,G){const X=12*i;return this.int16[X+0]=l,this.int16[X+1]=p,this.int16[X+2]=g,this.int16[X+3]=_,this.uint16[X+4]=x,this.uint16[X+5]=S,this.uint16[X+6]=k,this.uint16[X+7]=A,this.int16[X+8]=L,this.int16[X+9]=$,this.int16[X+10]=N,this.int16[X+11]=G,i}}ae.prototype.bytesPerElement=24,mt("StructArrayLayout4i4ui4i24",ae);class fe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,p)}emplace(i,l,p,g){const _=3*i;return this.float32[_+0]=l,this.float32[_+1]=p,this.float32[_+2]=g,i}}fe.prototype.bytesPerElement=12,mt("StructArrayLayout3f12",fe);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}me.prototype.bytesPerElement=4,mt("StructArrayLayout1ul4",me);class ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x,S,k,A){const L=this.length;return this.resize(L+1),this.emplace(L,i,l,p,g,_,x,S,k,A)}emplace(i,l,p,g,_,x,S,k,A,L){const $=10*i,N=5*i;return this.int16[$+0]=l,this.int16[$+1]=p,this.int16[$+2]=g,this.int16[$+3]=_,this.int16[$+4]=x,this.int16[$+5]=S,this.uint32[N+3]=k,this.uint16[$+8]=A,this.uint16[$+9]=L,i}}ye.prototype.bytesPerElement=20,mt("StructArrayLayout6i1ul2ui20",ye);class ie extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,g,_,x)}emplace(i,l,p,g,_,x,S){const k=6*i;return this.int16[k+0]=l,this.int16[k+1]=p,this.int16[k+2]=g,this.int16[k+3]=_,this.int16[k+4]=x,this.int16[k+5]=S,i}}ie.prototype.bytesPerElement=12,mt("StructArrayLayout2i2i2i12",ie);class xe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,i,l,p,g,_)}emplace(i,l,p,g,_,x){const S=4*i,k=8*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=g,this.int16[k+6]=_,this.int16[k+7]=x,i}}xe.prototype.bytesPerElement=16,mt("StructArrayLayout2f1f2i16",xe);class Ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,g,_,x)}emplace(i,l,p,g,_,x,S){const k=16*i,A=4*i,L=8*i;return this.uint8[k+0]=l,this.uint8[k+1]=p,this.float32[A+1]=g,this.float32[A+2]=_,this.int16[L+6]=x,this.int16[L+7]=S,i}}Ce.prototype.bytesPerElement=16,mt("StructArrayLayout2ub2f2i16",Ce);class Pe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,p)}emplace(i,l,p,g){const _=3*i;return this.uint16[_+0]=l,this.uint16[_+1]=p,this.uint16[_+2]=g,i}}Pe.prototype.bytesPerElement=6,mt("StructArrayLayout3ui6",Pe);class Ne extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe){const Te=this.length;return this.resize(Te+1),this.emplace(Te,i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe)}emplace(i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe,Te){const _e=24*i,ke=12*i,ze=48*i;return this.int16[_e+0]=l,this.int16[_e+1]=p,this.uint16[_e+2]=g,this.uint16[_e+3]=_,this.uint32[ke+2]=x,this.uint32[ke+3]=S,this.uint32[ke+4]=k,this.uint16[_e+10]=A,this.uint16[_e+11]=L,this.uint16[_e+12]=$,this.float32[ke+7]=N,this.float32[ke+8]=G,this.uint8[ze+36]=X,this.uint8[ze+37]=J,this.uint8[ze+38]=se,this.uint32[ke+10]=pe,this.int16[_e+22]=Te,i}}Ne.prototype.bytesPerElement=48,mt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ne);class He extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe,Te,_e,ke,ze,qe,lt,Pt,st,tt,wt,gt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe,Te,_e,ke,ze,qe,lt,Pt,st,tt,wt,gt)}emplace(i,l,p,g,_,x,S,k,A,L,$,N,G,X,J,se,pe,Te,_e,ke,ze,qe,lt,Pt,st,tt,wt,gt,dt){const Oe=32*i,Ct=16*i;return this.int16[Oe+0]=l,this.int16[Oe+1]=p,this.int16[Oe+2]=g,this.int16[Oe+3]=_,this.int16[Oe+4]=x,this.int16[Oe+5]=S,this.int16[Oe+6]=k,this.int16[Oe+7]=A,this.uint16[Oe+8]=L,this.uint16[Oe+9]=$,this.uint16[Oe+10]=N,this.uint16[Oe+11]=G,this.uint16[Oe+12]=X,this.uint16[Oe+13]=J,this.uint16[Oe+14]=se,this.uint16[Oe+15]=pe,this.uint16[Oe+16]=Te,this.uint16[Oe+17]=_e,this.uint16[Oe+18]=ke,this.uint16[Oe+19]=ze,this.uint16[Oe+20]=qe,this.uint16[Oe+21]=lt,this.uint16[Oe+22]=Pt,this.uint32[Ct+12]=st,this.float32[Ct+13]=tt,this.float32[Ct+14]=wt,this.uint16[Oe+30]=gt,this.uint16[Oe+31]=dt,i}}He.prototype.bytesPerElement=64,mt("StructArrayLayout8i15ui1ul2f2ui64",He);class nt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}nt.prototype.bytesPerElement=4,mt("StructArrayLayout1f4",nt);class ct extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,p)}emplace(i,l,p,g){const _=3*i;return this.uint16[6*i+0]=l,this.float32[_+1]=p,this.float32[_+2]=g,i}}ct.prototype.bytesPerElement=12,mt("StructArrayLayout1ui2f12",ct);class Qe extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const g=this.length;return this.resize(g+1),this.emplace(g,i,l,p)}emplace(i,l,p,g){const _=4*i;return this.uint32[2*i+0]=l,this.uint16[_+2]=p,this.uint16[_+3]=g,i}}Qe.prototype.bytesPerElement=8,mt("StructArrayLayout1ul2ui8",Qe);class Je extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const g=2*i;return this.uint16[g+0]=l,this.uint16[g+1]=p,i}}Je.prototype.bytesPerElement=4,mt("StructArrayLayout2ui4",Je);class _t extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}_t.prototype.bytesPerElement=2,mt("StructArrayLayout1ui2",_t);class Ft extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,g){const _=this.length;return this.resize(_+1),this.emplace(_,i,l,p,g)}emplace(i,l,p,g,_){const x=4*i;return this.float32[x+0]=l,this.float32[x+1]=p,this.float32[x+2]=g,this.float32[x+3]=_,i}}Ft.prototype.bytesPerElement=16,mt("StructArrayLayout4f16",Ft);class et extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new E(this.anchorPointX,this.anchorPointY)}}et.prototype.size=20;class at extends ye{get(i){return new et(this,i)}}mt("CollisionBoxArray",at);class Ot extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ot.prototype.size=48;class Gn extends Ne{get(i){return new Ot(this,i)}}mt("PlacedSymbolArray",Gn);class qt extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}qt.prototype.size=64;class Qt extends He{get(i){return new qt(this,i)}}mt("SymbolInstanceArray",Qt);class Hn extends nt{getoffsetX(i){return this.float32[1*i+0]}}mt("GlyphOffsetArray",Hn);class ri extends z{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}mt("SymbolLineVertexArray",ri);class Po extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Po.prototype.size=12;class Zn extends ct{get(i){return new Po(this,i)}}mt("TextAnchorOffsetArray",Zn);class Pi extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pi.prototype.size=8;class gi extends Qe{get(i){return new Pi(this,i)}}mt("FeatureIndexArray",gi);class ii extends M{}class yi extends M{}class es extends M{}class _l extends B{}class qc extends Z{}class xl extends ee{}class ho extends ne{}class Gc extends ae{}class mp extends fe{}class po extends me{}class fo extends ie{}class Vs extends Ce{}class Mo extends Pe{}class Xr extends Je{}const oi=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zi}=oi;class rn{constructor(i=[]){this.segments=i}prepareSegment(i,l,p,g){let _=this.segments[this.segments.length-1];return i>rn.MAX_VERTEX_ARRAY_LENGTH&&$e(`Max vertices per segment is ${rn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!_||_.vertexLength+i>rn.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:l.length,primitiveOffset:p.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,p,g){return new rn([{vertexOffset:i,primitiveOffset:l,vertexLength:p,primitiveLength:g,vaos:{},sortKey:0}])}}function Ta(s,i){return 256*(s=ce(Math.floor(s),0,255))+ce(Math.floor(i),0,255)}rn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,mt("SegmentVector",rn);const bl=C([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var wl={exports:{}},og={exports:{}};og.exports=function(s,i){var l,p,g,_,x,S,k,A;for(p=s.length-(l=3&s.length),g=i,x=3432918353,S=461845907,A=0;A<p;)k=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,g=27492+(65535&(_=5*(65535&(g=(g^=k=(65535&(k=(k=(65535&k)*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(k=0,l){case 3:k^=(255&s.charCodeAt(A+2))<<16;case 2:k^=(255&s.charCodeAt(A+1))<<8;case 1:g^=k=(65535&(k=(k=(65535&(k^=255&s.charCodeAt(A)))*x+(((k>>>16)*x&65535)<<16)&4294967295)<<15|k>>>17))*S+(((k>>>16)*S&65535)<<16)&4294967295}return g^=s.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var f1=og.exports,sg={exports:{}};sg.exports=function(s,i){for(var l,p=s.length,g=i^p,_=0;p>=4;)l=1540483477*(65535&(l=255&s.charCodeAt(_)|(255&s.charCodeAt(++_))<<8|(255&s.charCodeAt(++_))<<16|(255&s.charCodeAt(++_))<<24))+((1540483477*(l>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(l=1540483477*(65535&(l^=l>>>24))+((1540483477*(l>>>16)&65535)<<16)),p-=4,++_;switch(p){case 3:g^=(255&s.charCodeAt(_+2))<<16;case 2:g^=(255&s.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&s.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var Ws=f1,ag=sg.exports;wl.exports=Ws,wl.exports.murmur3=Ws,wl.exports.murmur2=ag;var Hc=b(wl.exports);class Tu{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,p,g){this.ids.push(Zc(i)),this.positions.push(l,p,g)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Zc(i);let p=0,g=this.ids.length-1;for(;p<g;){const x=p+g>>1;this.ids[x]>=l?g=x:p=x+1}const _=[];for(;this.ids[p]===l;)_.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return _}static serialize(i,l){const p=new Float64Array(i.ids),g=new Uint32Array(i.positions);return Kc(p,g,0,p.length-1),l&&l.push(p.buffer,g.buffer),{ids:p,positions:g}}static deserialize(i){const l=new Tu;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Zc(s){const i=+s;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Hc(String(s))}function Kc(s,i,l,p){for(;l<p;){const g=s[l+p>>1];let _=l-1,x=p+1;for(;;){do _++;while(s[_]<g);do x--;while(s[x]>g);if(_>=x)break;Sl(s,_,x),Sl(i,3*_,3*x),Sl(i,3*_+1,3*x+1),Sl(i,3*_+2,3*x+2)}x-l<p-x?(Kc(s,i,l,x),l=x+1):(Kc(s,i,x+1,p),p=x)}}function Sl(s,i,l){const p=s[i];s[i]=s[l],s[l]=p}mt("FeaturePositionMap",Tu);class Eu{constructor(i,l){this.gl=i.gl,this.location=l}}class lg extends Eu{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class E2 extends Eu{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class I2 extends Eu{constructor(i,l){super(i,l),this.current=En.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const A3=new Float32Array(16);function m1(s){return[Ta(255*s.r,255*s.g),Ta(255*s.b,255*s.a)]}class gp{constructor(i,l,p){this.value=i,this.uniformNames=l.map(g=>`u_${g}`),this.type=p}setUniform(i,l,p){i.set(p.constantOr(this.value))}getBinding(i,l,p){return this.type==="color"?new I2(i,l):new lg(i,l)}}class Xc{constructor(i,l){this.uniformNames=l.map(p=>`u_${p}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setUniform(i,l,p,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&i.set(_)}getBinding(i,l,p){return p.substr(0,9)==="u_pattern"?new E2(i,l):new lg(i,l)}}class Ea{constructor(i,l,p,g){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map(_=>({name:`a_${_}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(i,l,p,g,_){const x=this.paintVertexArray.length,S=this.expression.evaluate(new qn(0),l,{},g,[],_);this.paintVertexArray.resize(i),this._setPaintValue(x,i,S)}updatePaintArray(i,l,p,g){const _=this.expression.evaluate({zoom:0},p,g);this._setPaintValue(i,l,_)}_setPaintValue(i,l,p){if(this.type==="color"){const g=m1(p);for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=i;g<l;g++)this.paintVertexArray.emplace(g,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Cs{constructor(i,l,p,g,_,x){this.expression=i,this.uniformNames=l.map(S=>`u_${S}_t`),this.type=p,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(i,l,p,g,_){const x=this.expression.evaluate(new qn(this.zoom),l,{},g,[],_),S=this.expression.evaluate(new qn(this.zoom+1),l,{},g,[],_),k=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(k,i,x,S)}updatePaintArray(i,l,p,g){const _=this.expression.evaluate({zoom:this.zoom},p,g),x=this.expression.evaluate({zoom:this.zoom+1},p,g);this._setPaintValue(i,l,_,x)}_setPaintValue(i,l,p,g){if(this.type==="color"){const _=m1(p),x=m1(g);for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,_[0],_[1],x[0],x[1])}else{for(let _=i;_<l;_++)this.paintVertexArray.emplace(_,p,g);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(g))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=ce(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(g)}getBinding(i,l,p){return new lg(i,l)}}class Cl{constructor(i,l,p,g,_,x){this.expression=i,this.type=l,this.useIntegerZoom=p,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(i,l,p){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(g,i,l.patterns&&l.patterns[this.layerId],p)}updatePaintArray(i,l,p,g,_){this._setPaintValues(i,l,p.patterns&&p.patterns[this.layerId],_)}_setPaintValues(i,l,p,g){if(!g||!p)return;const{min:_,mid:x,max:S}=p,k=g[_],A=g[x],L=g[S];if(k&&A&&L)for(let $=i;$<l;$++)this.zoomInPaintVertexArray.emplace($,A.tl[0],A.tl[1],A.br[0],A.br[1],k.tl[0],k.tl[1],k.br[0],k.br[1],A.pixelRatio,k.pixelRatio),this.zoomOutPaintVertexArray.emplace($,A.tl[0],A.tl[1],A.br[0],A.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],A.pixelRatio,L.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,bl.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,bl.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class P2{constructor(i,l,p){this.binders={},this._buffers=[];const g=[];for(const _ in i.paint._values){if(!p(_))continue;const x=i.paint.get(_);if(!(x instanceof Qo&&sl(x.property.specification)))continue;const S=L3(_,i.type),k=x.value,A=x.property.specification.type,L=x.property.useIntegerZoom,$=x.property.specification["property-type"],N=$==="cross-faded"||$==="cross-faded-data-driven";if(k.kind==="constant")this.binders[_]=N?new Xc(k.value,S):new gp(k.value,S,A),g.push(`/u_${_}`);else if(k.kind==="source"||N){const G=M2(_,A,"source");this.binders[_]=N?new Cl(k,A,L,l,G,i.id):new Ea(k,S,A,G),g.push(`/a_${_}`)}else{const G=M2(_,A,"composite");this.binders[_]=new Cs(k,S,A,L,l,G),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Ea||l instanceof Cs?l.maxValue:0}populatePaintArrays(i,l,p,g,_){for(const x in this.binders){const S=this.binders[x];(S instanceof Ea||S instanceof Cs||S instanceof Cl)&&S.populatePaintArray(i,l,p,g,_)}}setConstantPatternPositions(i,l){for(const p in this.binders){const g=this.binders[p];g instanceof Xc&&g.setConstantPatternPositions(i,l)}}updatePaintArrays(i,l,p,g,_){let x=!1;for(const S in i){const k=l.getPositions(S);for(const A of k){const L=p.feature(A.index);for(const $ in this.binders){const N=this.binders[$];if((N instanceof Ea||N instanceof Cs||N instanceof Cl)&&N.expression.isStateDependent===!0){const G=g.paint.get($);N.expression=G.value,N.updatePaintArray(A.start,A.end,L,i[S],_),x=!0}}}}return x}defines(){const i=[];for(const l in this.binders){const p=this.binders[l];(p instanceof gp||p instanceof Xc)&&i.push(...p.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof Ea||p instanceof Cs)for(let g=0;g<p.paintVertexAttributes.length;g++)i.push(p.paintVertexAttributes[g].name);else if(p instanceof Cl)for(let g=0;g<bl.members.length;g++)i.push(bl.members[g].name)}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof gp||p instanceof Xc||p instanceof Cs)for(const g of p.uniformNames)i.push(g)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const p=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof gp||_ instanceof Xc||_ instanceof Cs){for(const x of _.uniformNames)if(l[x]){const S=_.getBinding(i,l[x],x);p.push({name:x,property:g,binding:S})}}}return p}setUniforms(i,l,p,g){for(const{name:_,property:x,binding:S}of l)this.binders[x].setUniform(S,g,p.get(x),_)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(i&&p instanceof Cl){const g=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(p instanceof Ea||p instanceof Cs)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const l in this.binders){const p=this.binders[l];(p instanceof Ea||p instanceof Cs||p instanceof Cl)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Ea||l instanceof Cs||l instanceof Cl)&&l.destroy()}}}class Iu{constructor(i,l,p=()=>!0){this.programConfigurations={};for(const g of i)this.programConfigurations[g.id]=new P2(g,l,p);this.needsUpload=!1,this._featureMap=new Tu,this._bufferOffset=0}populatePaintArrays(i,l,p,g,_,x){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(i,l,g,_,x);l.id!==void 0&&this._featureMap.add(l.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,p,g){for(const _ of p)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(i,this._featureMap,l,_,g)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function L3(s,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}function M2(s,i,l){const p={color:{source:ee,composite:Ft},number:{source:nt,composite:ee}},g=function(_){return{"line-pattern":{source:ho,composite:ho},"fill-pattern":{source:ho,composite:ho},"fill-extrusion-pattern":{source:ho,composite:ho}}[_]}(s);return g&&g[l]||p[i][l]}mt("ConstantBinder",gp),mt("CrossFadedConstantBinder",Xc),mt("SourceExpressionBinder",Ea),mt("CrossFadedCompositeBinder",Cl),mt("CompositeExpressionBinder",Cs),mt("ProgramConfiguration",P2,{omit:["_buffers"]}),mt("ProgramConfigurationSet",Iu);const Lr=8192,g1=Math.pow(2,14)-1,A2=-g1-1;function Pu(s){const i=Lr/s.extent,l=s.loadGeometry();for(let p=0;p<l.length;p++){const g=l[p];for(let _=0;_<g.length;_++){const x=g[_],S=Math.round(x.x*i),k=Math.round(x.y*i);x.x=ce(S,A2,g1),x.y=ce(k,A2,g1),(S<x.x||S>x.x+1||k<x.y||k>x.y+1)&&$e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function Mu(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?Pu(s):[]}}function ug(s,i,l,p,g){s.emplaceBack(2*i+(p+1)/2,2*l+(g+1)/2)}class y1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new yi,this.indexArray=new Mo,this.segments=new rn,this.programConfigurations=new Iu(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){const g=this.layers[0],_=[];let x=null,S=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),S=!x.isConstant());for(const{feature:k,id:A,index:L,sourceLayerIndex:$}of i){const N=this.layers[0]._featureFilter.needGeometry,G=Mu(k,N);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),G,p))continue;const X=S?x.evaluate(G,{},p):void 0,J={id:A,properties:k.properties,type:k.type,sourceLayerIndex:$,index:L,geometry:N?G.geometry:Pu(k),patterns:{},sortKey:X};_.push(J)}S&&_.sort((k,A)=>k.sortKey-A.sortKey);for(const k of _){const{geometry:A,index:L,sourceLayerIndex:$}=k,N=i[L].feature;this.addFeature(k,A,L,p),l.featureIndex.insert(N,A,L,$,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Zi),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,p,g){for(const _ of l)for(const x of _){const S=x.x,k=x.y;if(S<0||S>=Lr||k<0||k>=Lr)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),L=A.vertexLength;ug(this.layoutVertexArray,S,k,-1,-1),ug(this.layoutVertexArray,S,k,1,-1),ug(this.layoutVertexArray,S,k,1,1),ug(this.layoutVertexArray,S,k,-1,1),this.indexArray.emplaceBack(L,L+1,L+2),this.indexArray.emplaceBack(L,L+3,L+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{},g)}}function L2(s,i){for(let l=0;l<s.length;l++)if(Yc(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(Yc(s,i[l]))return!0;return!!v1(s,i)}function z3(s,i,l){return!!Yc(s,i)||!!_1(i,s,l)}function z2(s,i){if(s.length===1)return D2(i,s[0]);for(let l=0;l<i.length;l++){const p=i[l];for(let g=0;g<p.length;g++)if(Yc(s,p[g]))return!0}for(let l=0;l<s.length;l++)if(D2(i,s[l]))return!0;for(let l=0;l<i.length;l++)if(v1(s,i[l]))return!0;return!1}function R3(s,i,l){if(s.length>1){if(v1(s,i))return!0;for(let p=0;p<i.length;p++)if(_1(i[p],s,l))return!0}for(let p=0;p<s.length;p++)if(_1(s[p],i,l))return!0;return!1}function v1(s,i){if(s.length===0||i.length===0)return!1;for(let l=0;l<s.length-1;l++){const p=s[l],g=s[l+1];for(let _=0;_<i.length-1;_++)if(D3(p,g,i[_],i[_+1]))return!0}return!1}function D3(s,i,l,p){return Le(s,l,p)!==Le(i,l,p)&&Le(s,i,l)!==Le(s,i,p)}function _1(s,i,l){const p=l*l;if(i.length===1)return s.distSqr(i[0])<p;for(let g=1;g<i.length;g++)if(R2(s,i[g-1],i[g])<p)return!0;return!1}function R2(s,i,l){const p=i.distSqr(l);if(p===0)return s.distSqr(i);const g=((s.x-i.x)*(l.x-i.x)+(s.y-i.y)*(l.y-i.y))/p;return s.distSqr(g<0?i:g>1?l:l.sub(i)._mult(g)._add(i))}function D2(s,i){let l,p,g,_=!1;for(let x=0;x<s.length;x++){l=s[x];for(let S=0,k=l.length-1;S<l.length;k=S++)p=l[S],g=l[k],p.y>i.y!=g.y>i.y&&i.x<(g.x-p.x)*(i.y-p.y)/(g.y-p.y)+p.x&&(_=!_)}return _}function Yc(s,i){let l=!1;for(let p=0,g=s.length-1;p<s.length;g=p++){const _=s[p],x=s[g];_.y>i.y!=x.y>i.y&&i.x<(x.x-_.x)*(i.y-_.y)/(x.y-_.y)+_.x&&(l=!l)}return l}function $3(s,i,l){const p=l[0],g=l[2];if(s.x<p.x&&i.x<p.x||s.x>g.x&&i.x>g.x||s.y<p.y&&i.y<p.y||s.y>g.y&&i.y>g.y)return!1;const _=Le(s,i,l[0]);return _!==Le(s,i,l[1])||_!==Le(s,i,l[2])||_!==Le(s,i,l[3])}function yp(s,i,l){const p=i.paint.get(s).value;return p.kind==="constant"?p.value:l.programConfigurations.get(i.id).getMaxValue(s)}function cg(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function hg(s,i,l,p,g){if(!i[0]&&!i[1])return s;const _=E.convert(i)._mult(g);l==="viewport"&&_._rotate(-p);const x=[];for(let S=0;S<s.length;S++)x.push(s[S].sub(_));return x}let $2,O2;mt("CircleBucket",y1,{omit:["layers"]});var O3={get paint(){return O2=O2||new v({"circle-radius":new Mt(we.paint_circle["circle-radius"]),"circle-color":new Mt(we.paint_circle["circle-color"]),"circle-blur":new Mt(we.paint_circle["circle-blur"]),"circle-opacity":new Mt(we.paint_circle["circle-opacity"]),"circle-translate":new vt(we.paint_circle["circle-translate"]),"circle-translate-anchor":new vt(we.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new vt(we.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new vt(we.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Mt(we.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Mt(we.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Mt(we.paint_circle["circle-stroke-opacity"])})},get layout(){return $2=$2||new v({"circle-sort-key":new Mt(we.layout_circle["circle-sort-key"])})}},Mi=1e-6,Jc=typeof Float32Array<"u"?Float32Array:Array;function x1(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function B2(s,i,l){var p=i[0],g=i[1],_=i[2],x=i[3],S=i[4],k=i[5],A=i[6],L=i[7],$=i[8],N=i[9],G=i[10],X=i[11],J=i[12],se=i[13],pe=i[14],Te=i[15],_e=l[0],ke=l[1],ze=l[2],qe=l[3];return s[0]=_e*p+ke*S+ze*$+qe*J,s[1]=_e*g+ke*k+ze*N+qe*se,s[2]=_e*_+ke*A+ze*G+qe*pe,s[3]=_e*x+ke*L+ze*X+qe*Te,s[4]=(_e=l[4])*p+(ke=l[5])*S+(ze=l[6])*$+(qe=l[7])*J,s[5]=_e*g+ke*k+ze*N+qe*se,s[6]=_e*_+ke*A+ze*G+qe*pe,s[7]=_e*x+ke*L+ze*X+qe*Te,s[8]=(_e=l[8])*p+(ke=l[9])*S+(ze=l[10])*$+(qe=l[11])*J,s[9]=_e*g+ke*k+ze*N+qe*se,s[10]=_e*_+ke*A+ze*G+qe*pe,s[11]=_e*x+ke*L+ze*X+qe*Te,s[12]=(_e=l[12])*p+(ke=l[13])*S+(ze=l[14])*$+(qe=l[15])*J,s[13]=_e*g+ke*k+ze*N+qe*se,s[14]=_e*_+ke*A+ze*G+qe*pe,s[15]=_e*x+ke*L+ze*X+qe*Te,s}Math.hypot||(Math.hypot=function(){for(var s=0,i=arguments.length;i--;)s+=arguments[i]*arguments[i];return Math.sqrt(s)});var vp,B3=B2;function dg(s,i,l){var p=i[0],g=i[1],_=i[2],x=i[3];return s[0]=l[0]*p+l[4]*g+l[8]*_+l[12]*x,s[1]=l[1]*p+l[5]*g+l[9]*_+l[13]*x,s[2]=l[2]*p+l[6]*g+l[10]*_+l[14]*x,s[3]=l[3]*p+l[7]*g+l[11]*_+l[15]*x,s}vp=new Jc(4),Jc!=Float32Array&&(vp[0]=0,vp[1]=0,vp[2]=0,vp[3]=0);class F3 extends c{constructor(i){super(i,O3)}createBucket(i){return new y1(i)}queryRadius(i){const l=i;return yp("circle-radius",this,l)+yp("circle-stroke-width",this,l)+cg(this.paint.get("circle-translate"))}queryIntersectsFeature(i,l,p,g,_,x,S,k){const A=hg(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),x.angle,S),L=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),$=this.paint.get("circle-pitch-alignment")==="map",N=$?A:function(X,J){return X.map(se=>F2(se,J))}(A,k),G=$?L*S:L;for(const X of g)for(const J of X){const se=$?J:F2(J,k);let pe=G;const Te=dg([],[J.x,J.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Te[3]/x.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=x.cameraToCenterDistance/Te[3]),z3(N,se,pe))return!0}return!1}}function F2(s,i){const l=dg([],[s.x,s.y,0,1],i);return new E(l[0]/l[3],l[1]/l[3])}class N2 extends y1{}let j2;mt("HeatmapBucket",N2,{omit:["layers"]});var N3={get paint(){return j2=j2||new v({"heatmap-radius":new Mt(we.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Mt(we.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new vt(we.paint_heatmap["heatmap-intensity"]),"heatmap-color":new fp(we.paint_heatmap["heatmap-color"]),"heatmap-opacity":new vt(we.paint_heatmap["heatmap-opacity"])})}};function b1(s,{width:i,height:l},p,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==i*l*p)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${i*l*p}`)}else g=new Uint8Array(i*l*p);return s.width=i,s.height=l,s.data=g,s}function U2(s,{width:i,height:l},p){if(i===s.width&&l===s.height)return;const g=b1({},{width:i,height:l},p);w1(s,g,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,i),height:Math.min(s.height,l)},p),s.width=i,s.height=l,s.data=g.data}function w1(s,i,l,p,g,_){if(g.width===0||g.height===0)return i;if(g.width>s.width||g.height>s.height||l.x>s.width-g.width||l.y>s.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>i.width||g.height>i.height||p.x>i.width-g.width||p.y>i.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=s.data,S=i.data;if(x===S)throw new Error("srcData equals dstData, so image is already copied");for(let k=0;k<g.height;k++){const A=((l.y+k)*s.width+l.x)*_,L=((p.y+k)*i.width+p.x)*_;for(let $=0;$<g.width*_;$++)S[L+$]=x[A+$]}return i}class _p{constructor(i,l){b1(this,i,1,l)}resize(i){U2(this,i,1)}clone(){return new _p({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,g,_){w1(i,l,p,g,_,1)}}class Ao{constructor(i,l){b1(this,i,4,l)}resize(i){U2(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Ao({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,g,_){w1(i,l,p,g,_,4)}}function V2(s){const i={},l=s.resolution||256,p=s.clips?s.clips.length:1,g=s.image||new Ao({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const _=(x,S,k)=>{i[s.evaluationKey]=k;const A=s.expression.evaluate(i);g.data[x+S+0]=Math.floor(255*A.r/A.a),g.data[x+S+1]=Math.floor(255*A.g/A.a),g.data[x+S+2]=Math.floor(255*A.b/A.a),g.data[x+S+3]=Math.floor(255*A.a)};if(s.clips)for(let x=0,S=0;x<p;++x,S+=4*l)for(let k=0,A=0;k<l;k++,A+=4){const L=k/(l-1),{start:$,end:N}=s.clips[x];_(S,A,$*(1-L)+N*L)}else for(let x=0,S=0;x<l;x++,S+=4)_(0,S,x/(l-1));return g}mt("AlphaImage",_p),mt("RGBAImage",Ao);const S1="big-fb";class j3 extends c{createBucket(i){return new N2(i)}constructor(i){super(i,N3),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=V2({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(S1)&&this.heatmapFbos.delete(S1)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let W2;var U3={get paint(){return W2=W2||new v({"hillshade-illumination-direction":new vt(we.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new vt(we.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new vt(we.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new vt(we.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new vt(we.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new vt(we.paint_hillshade["hillshade-accent-color"])})}};class V3 extends c{constructor(i){super(i,U3)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const W3=C([{name:"a_pos",components:2,type:"Int16"}],4),{members:q3}=W3;function q2(s,i,l=2){const p=i&&i.length,g=p?i[0]*l:s.length;let _=G2(s,0,g,l,!0);const x=[];if(!_||_.next===_.prev)return x;let S,k,A;if(p&&(_=function(L,$,N,G){const X=[];for(let J=0,se=$.length;J<se;J++){const pe=G2(L,$[J]*G,J<se-1?$[J+1]*G:L.length,G,!1);pe===pe.next&&(pe.steiner=!0),X.push(Q3(pe))}X.sort(X3);for(let J=0;J<X.length;J++)N=Y3(X[J],N);return N}(s,i,_,l)),s.length>80*l){S=1/0,k=1/0;let L=-1/0,$=-1/0;for(let N=l;N<g;N+=l){const G=s[N],X=s[N+1];G<S&&(S=G),X<k&&(k=X),G>L&&(L=G),X>$&&($=X)}A=Math.max(L-S,$-k),A=A!==0?32767/A:0}return xp(_,x,l,S,k,A,0),x}function G2(s,i,l,p,g){let _;if(g===function(x,S,k,A){let L=0;for(let $=S,N=k-A;$<k;$+=A)L+=(x[N]-x[$])*(x[$+1]+x[N+1]),N=$;return L}(s,i,l,p)>0)for(let x=i;x<l;x+=p)_=K2(x/p|0,s[x],s[x+1],_);else for(let x=l-p;x>=i;x-=p)_=K2(x/p|0,s[x],s[x+1],_);return _&&pg(_,_.next)&&(wp(_),_=_.next),_}function Au(s,i){if(!s)return s;i||(i=s);let l,p=s;do if(l=!1,p.steiner||!pg(p,p.next)&&Cr(p.prev,p,p.next)!==0)p=p.next;else{if(wp(p),p=i=p.prev,p===p.next)break;l=!0}while(l||p!==i);return i}function xp(s,i,l,p,g,_,x){if(!s)return;!x&&_&&function(k,A,L,$){let N=k;do N.z===0&&(N.z=C1(N.x,N.y,A,L,$)),N.prevZ=N.prev,N.nextZ=N.next,N=N.next;while(N!==k);N.prevZ.nextZ=null,N.prevZ=null,function(G){let X,J=1;do{let se,pe=G;G=null;let Te=null;for(X=0;pe;){X++;let _e=pe,ke=0;for(let qe=0;qe<J&&(ke++,_e=_e.nextZ,_e);qe++);let ze=J;for(;ke>0||ze>0&&_e;)ke!==0&&(ze===0||!_e||pe.z<=_e.z)?(se=pe,pe=pe.nextZ,ke--):(se=_e,_e=_e.nextZ,ze--),Te?Te.nextZ=se:G=se,se.prevZ=Te,Te=se;pe=_e}Te.nextZ=null,J*=2}while(X>1)}(N)}(s,p,g,_);let S=s;for(;s.prev!==s.next;){const k=s.prev,A=s.next;if(_?H3(s,p,g,_):G3(s))i.push(k.i,s.i,A.i),wp(s),s=A.next,S=A.next;else if((s=A)===S){x?x===1?xp(s=Z3(Au(s),i),i,l,p,g,_,2):x===2&&K3(s,i,l,p,g,_):xp(Au(s),i,l,p,g,_,1);break}}}function G3(s){const i=s.prev,l=s,p=s.next;if(Cr(i,l,p)>=0)return!1;const g=i.x,_=l.x,x=p.x,S=i.y,k=l.y,A=p.y,L=g<_?g<x?g:x:_<x?_:x,$=S<k?S<A?S:A:k<A?k:A,N=g>_?g>x?g:x:_>x?_:x,G=S>k?S>A?S:A:k>A?k:A;let X=p.next;for(;X!==i;){if(X.x>=L&&X.x<=N&&X.y>=$&&X.y<=G&&Qc(g,S,_,k,x,A,X.x,X.y)&&Cr(X.prev,X,X.next)>=0)return!1;X=X.next}return!0}function H3(s,i,l,p){const g=s.prev,_=s,x=s.next;if(Cr(g,_,x)>=0)return!1;const S=g.x,k=_.x,A=x.x,L=g.y,$=_.y,N=x.y,G=S<k?S<A?S:A:k<A?k:A,X=L<$?L<N?L:N:$<N?$:N,J=S>k?S>A?S:A:k>A?k:A,se=L>$?L>N?L:N:$>N?$:N,pe=C1(G,X,i,l,p),Te=C1(J,se,i,l,p);let _e=s.prevZ,ke=s.nextZ;for(;_e&&_e.z>=pe&&ke&&ke.z<=Te;){if(_e.x>=G&&_e.x<=J&&_e.y>=X&&_e.y<=se&&_e!==g&&_e!==x&&Qc(S,L,k,$,A,N,_e.x,_e.y)&&Cr(_e.prev,_e,_e.next)>=0||(_e=_e.prevZ,ke.x>=G&&ke.x<=J&&ke.y>=X&&ke.y<=se&&ke!==g&&ke!==x&&Qc(S,L,k,$,A,N,ke.x,ke.y)&&Cr(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;_e&&_e.z>=pe;){if(_e.x>=G&&_e.x<=J&&_e.y>=X&&_e.y<=se&&_e!==g&&_e!==x&&Qc(S,L,k,$,A,N,_e.x,_e.y)&&Cr(_e.prev,_e,_e.next)>=0)return!1;_e=_e.prevZ}for(;ke&&ke.z<=Te;){if(ke.x>=G&&ke.x<=J&&ke.y>=X&&ke.y<=se&&ke!==g&&ke!==x&&Qc(S,L,k,$,A,N,ke.x,ke.y)&&Cr(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function Z3(s,i){let l=s;do{const p=l.prev,g=l.next.next;!pg(p,g)&&H2(p,l,l.next,g)&&bp(p,g)&&bp(g,p)&&(i.push(p.i,l.i,g.i),wp(l),wp(l.next),l=s=g),l=l.next}while(l!==s);return Au(l)}function K3(s,i,l,p,g,_){let x=s;do{let S=x.next.next;for(;S!==x.prev;){if(x.i!==S.i&&e4(x,S)){let k=Z2(x,S);return x=Au(x,x.next),k=Au(k,k.next),xp(x,i,l,p,g,_,0),void xp(k,i,l,p,g,_,0)}S=S.next}x=x.next}while(x!==s)}function X3(s,i){return s.x-i.x}function Y3(s,i){const l=function(g,_){let x=_;const S=g.x,k=g.y;let A,L=-1/0;do{if(k<=x.y&&k>=x.next.y&&x.next.y!==x.y){const J=x.x+(k-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(J<=S&&J>L&&(L=J,A=x.x<x.next.x?x:x.next,J===S))return A}x=x.next}while(x!==_);if(!A)return null;const $=A,N=A.x,G=A.y;let X=1/0;x=A;do{if(S>=x.x&&x.x>=N&&S!==x.x&&Qc(k<G?S:L,k,N,G,k<G?L:S,k,x.x,x.y)){const J=Math.abs(k-x.y)/(S-x.x);bp(x,g)&&(J<X||J===X&&(x.x>A.x||x.x===A.x&&J3(A,x)))&&(A=x,X=J)}x=x.next}while(x!==$);return A}(s,i);if(!l)return i;const p=Z2(l,s);return Au(p,p.next),Au(l,l.next)}function J3(s,i){return Cr(s.prev,s,i.prev)<0&&Cr(i.next,s,s.next)<0}function C1(s,i,l,p,g){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-l)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*g|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function Q3(s){let i=s,l=s;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==s);return l}function Qc(s,i,l,p,g,_,x,S){return(g-x)*(i-S)>=(s-x)*(_-S)&&(s-x)*(p-S)>=(l-x)*(i-S)&&(l-x)*(_-S)>=(g-x)*(p-S)}function e4(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(l,p){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==p.i&&g.next.i!==p.i&&H2(g,g.next,l,p))return!0;g=g.next}while(g!==l);return!1}(s,i)&&(bp(s,i)&&bp(i,s)&&function(l,p){let g=l,_=!1;const x=(l.x+p.x)/2,S=(l.y+p.y)/2;do g.y>S!=g.next.y>S&&g.next.y!==g.y&&x<(g.next.x-g.x)*(S-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==l);return _}(s,i)&&(Cr(s.prev,s,i.prev)||Cr(s,i.prev,i))||pg(s,i)&&Cr(s.prev,s,s.next)>0&&Cr(i.prev,i,i.next)>0)}function Cr(s,i,l){return(i.y-s.y)*(l.x-i.x)-(i.x-s.x)*(l.y-i.y)}function pg(s,i){return s.x===i.x&&s.y===i.y}function H2(s,i,l,p){const g=mg(Cr(s,i,l)),_=mg(Cr(s,i,p)),x=mg(Cr(l,p,s)),S=mg(Cr(l,p,i));return g!==_&&x!==S||!(g!==0||!fg(s,l,i))||!(_!==0||!fg(s,p,i))||!(x!==0||!fg(l,s,p))||!(S!==0||!fg(l,i,p))}function fg(s,i,l){return i.x<=Math.max(s.x,l.x)&&i.x>=Math.min(s.x,l.x)&&i.y<=Math.max(s.y,l.y)&&i.y>=Math.min(s.y,l.y)}function mg(s){return s>0?1:s<0?-1:0}function bp(s,i){return Cr(s.prev,s,s.next)<0?Cr(s,i,s.next)>=0&&Cr(s,s.prev,i)>=0:Cr(s,i,s.prev)<0||Cr(s,s.next,i)<0}function Z2(s,i){const l=k1(s.i,s.x,s.y),p=k1(i.i,i.x,i.y),g=s.next,_=i.prev;return s.next=i,i.prev=s,l.next=g,g.prev=l,p.next=l,l.prev=p,_.next=p,p.prev=_,p}function K2(s,i,l,p){const g=k1(s,i,l);return p?(g.next=p.next,g.prev=p,p.next.prev=g,p.next=g):(g.prev=g,g.next=g),g}function wp(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function k1(s,i,l){return{i:s,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function T1(s,i,l){const p=l.patternDependencies;let g=!1;for(const _ of i){const x=_.paint.get(`${s}-pattern`);x.isConstant()||(g=!0);const S=x.constantOr(null);S&&(g=!0,p[S.to]=!0,p[S.from]=!0)}return g}function E1(s,i,l,p,g){const _=g.patternDependencies;for(const x of i){const S=x.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let k=S.evaluate({zoom:p-1},l,{},g.availableImages),A=S.evaluate({zoom:p},l,{},g.availableImages),L=S.evaluate({zoom:p+1},l,{},g.availableImages);k=k&&k.name?k.name:k,A=A&&A.name?A.name:A,L=L&&L.name?L.name:L,_[k]=!0,_[A]=!0,_[L]=!0,l.patterns[x.id]={min:k,mid:A,max:L}}}return l}class I1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new es,this.indexArray=new Mo,this.indexArray2=new Xr,this.programConfigurations=new Iu(i.layers,i.zoom),this.segments=new rn,this.segments2=new rn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.hasPattern=T1("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:A,sourceLayerIndex:L}of i){const $=this.layers[0]._featureFilter.needGeometry,N=Mu(S,$);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),N,p))continue;const G=_?g.evaluate(N,{},p,l.availableImages):void 0,X={id:k,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:$?N.geometry:Pu(S),patterns:{},sortKey:G};x.push(X)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const $=E1("fill",this.layers,S,this.zoom,l);this.patternFeatures.push($)}else this.addFeature(S,k,A,p,{});l.featureIndex.insert(i[A].feature,k,A,L,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,p)}addFeatures(i,l,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,q3),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,p,g,_){for(const x of Sc(l,500)){let S=0;for(const G of x)S+=G.length;const k=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=k.vertexLength,L=[],$=[];for(const G of x){if(G.length===0)continue;G!==x[0]&&$.push(L.length/2);const X=this.segments2.prepareSegment(G.length,this.layoutVertexArray,this.indexArray2),J=X.vertexLength;this.layoutVertexArray.emplaceBack(G[0].x,G[0].y),this.indexArray2.emplaceBack(J+G.length-1,J),L.push(G[0].x),L.push(G[0].y);for(let se=1;se<G.length;se++)this.layoutVertexArray.emplaceBack(G[se].x,G[se].y),this.indexArray2.emplaceBack(J+se-1,J+se),L.push(G[se].x),L.push(G[se].y);X.vertexLength+=G.length,X.primitiveLength+=G.length}const N=q2(L,$);for(let G=0;G<N.length;G+=3)this.indexArray.emplaceBack(A+N[G],A+N[G+1],A+N[G+2]);k.vertexLength+=S,k.primitiveLength+=N.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,_,g)}}let X2,Y2;mt("FillBucket",I1,{omit:["layers","patternFeatures"]});var t4={get paint(){return Y2=Y2||new v({"fill-antialias":new vt(we.paint_fill["fill-antialias"]),"fill-opacity":new Mt(we.paint_fill["fill-opacity"]),"fill-color":new Mt(we.paint_fill["fill-color"]),"fill-outline-color":new Mt(we.paint_fill["fill-outline-color"]),"fill-translate":new vt(we.paint_fill["fill-translate"]),"fill-translate-anchor":new vt(we.paint_fill["fill-translate-anchor"]),"fill-pattern":new Vc(we.paint_fill["fill-pattern"])})},get layout(){return X2=X2||new v({"fill-sort-key":new Mt(we.layout_fill["fill-sort-key"])})}};class n4 extends c{constructor(i){super(i,t4)}recalculate(i,l){super.recalculate(i,l);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new I1(i)}queryRadius(){return cg(this.paint.get("fill-translate"))}queryIntersectsFeature(i,l,p,g,_,x,S){return z2(hg(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),x.angle,S),g)}isTileClipped(){return!0}}const r4=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),i4=C([{name:"a_centroid",components:2,type:"Int16"}],4),{members:o4}=r4;var kl={},s4=w,J2=eh;function eh(s,i,l,p,g){this.properties={},this.extent=l,this.type=0,this._pbf=s,this._geometry=-1,this._keys=p,this._values=g,s.readFields(a4,this,i)}function a4(s,i,l){s==1?i.id=l.readVarint():s==2?function(p,g){for(var _=p.readVarint()+p.pos;p.pos<_;){var x=g._keys[p.readVarint()],S=g._values[p.readVarint()];g.properties[x]=S}}(l,i):s==3?i.type=l.readVarint():s==4&&(i._geometry=l.pos)}function l4(s){for(var i,l,p=0,g=0,_=s.length,x=_-1;g<_;x=g++)p+=((l=s[x]).x-(i=s[g]).x)*(i.y+l.y);return p}eh.types=["Unknown","Point","LineString","Polygon"],eh.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var i,l=s.readVarint()+s.pos,p=1,g=0,_=0,x=0,S=[];s.pos<l;){if(g<=0){var k=s.readVarint();p=7&k,g=k>>3}if(g--,p===1||p===2)_+=s.readSVarint(),x+=s.readSVarint(),p===1&&(i&&S.push(i),i=[]),i.push(new s4(_,x));else{if(p!==7)throw new Error("unknown command "+p);i&&i.push(i[0].clone())}}return i&&S.push(i),S},eh.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var i=s.readVarint()+s.pos,l=1,p=0,g=0,_=0,x=1/0,S=-1/0,k=1/0,A=-1/0;s.pos<i;){if(p<=0){var L=s.readVarint();l=7&L,p=L>>3}if(p--,l===1||l===2)(g+=s.readSVarint())<x&&(x=g),g>S&&(S=g),(_+=s.readSVarint())<k&&(k=_),_>A&&(A=_);else if(l!==7)throw new Error("unknown command "+l)}return[x,k,S,A]},eh.prototype.toGeoJSON=function(s,i,l){var p,g,_=this.extent*Math.pow(2,l),x=this.extent*s,S=this.extent*i,k=this.loadGeometry(),A=eh.types[this.type];function L(G){for(var X=0;X<G.length;X++){var J=G[X];G[X]=[360*(J.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(J.y+S)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(p=0;p<k.length;p++)$[p]=k[p][0];L(k=$);break;case 2:for(p=0;p<k.length;p++)L(k[p]);break;case 3:for(k=function(G){var X=G.length;if(X<=1)return[G];for(var J,se,pe=[],Te=0;Te<X;Te++){var _e=l4(G[Te]);_e!==0&&(se===void 0&&(se=_e<0),se===_e<0?(J&&pe.push(J),J=[G[Te]]):J.push(G[Te]))}return J&&pe.push(J),pe}(k),p=0;p<k.length;p++)for(g=0;g<k[p].length;g++)L(k[p][g])}k.length===1?k=k[0]:A="Multi"+A;var N={type:"Feature",geometry:{type:A,coordinates:k},properties:this.properties};return"id"in this&&(N.id=this.id),N};var u4=J2,Q2=eS;function eS(s,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(c4,this,i),this.length=this._features.length}function c4(s,i,l){s===15?i.version=l.readVarint():s===1?i.name=l.readString():s===5?i.extent=l.readVarint():s===2?i._features.push(l.pos):s===3?i._keys.push(l.readString()):s===4&&i._values.push(function(p){for(var g=null,_=p.readVarint()+p.pos;p.pos<_;){var x=p.readVarint()>>3;g=x===1?p.readString():x===2?p.readFloat():x===3?p.readDouble():x===4?p.readVarint64():x===5?p.readVarint():x===6?p.readSVarint():x===7?p.readBoolean():null}return g}(l))}eS.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var i=this._pbf.readVarint()+this._pbf.pos;return new u4(this._pbf,i,this.extent,this._keys,this._values)};var h4=Q2;function d4(s,i,l){if(s===3){var p=new h4(l,l.readVarint()+l.pos);p.length&&(i[p.name]=p)}}kl.VectorTile=function(s,i){this.layers=s.readFields(d4,{},i)},kl.VectorTileFeature=J2,kl.VectorTileLayer=Q2;const p4=kl.VectorTileFeature.types,P1=Math.pow(2,13);function Sp(s,i,l,p,g,_,x,S){s.emplaceBack(i,l,2*Math.floor(p*P1)+x,g*P1*2,_*P1*2,Math.round(S))}class M1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new _l,this.centroidVertexArray=new ii,this.indexArray=new Mo,this.programConfigurations=new Iu(i.layers,i.zoom),this.segments=new rn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.features=[],this.hasPattern=T1("fill-extrusion",this.layers,l);for(const{feature:g,id:_,index:x,sourceLayerIndex:S}of i){const k=this.layers[0]._featureFilter.needGeometry,A=Mu(g,k);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),A,p))continue;const L={id:_,sourceLayerIndex:S,index:x,geometry:k?A.geometry:Pu(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(E1("fill-extrusion",this.layers,L,this.zoom,l)):this.addFeature(L,L.geometry,x,p,{}),l.featureIndex.insert(g,L.geometry,x,S,this.index,!0)}}addFeatures(i,l,p){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,l,p)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,p)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,o4),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,i4.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,p,g,_){for(const x of Sc(l,500)){const S={x:0,y:0,vertexCount:0};let k=0;for(const X of x)k+=X.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const X of x){if(X.length===0||m4(X))continue;let J=0;for(let se=0;se<X.length;se++){const pe=X[se];if(se>=1){const Te=X[se-1];if(!f4(pe,Te)){A.vertexLength+4>rn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const _e=pe.sub(Te)._perp()._unit(),ke=Te.dist(pe);J+ke>32768&&(J=0),Sp(this.layoutVertexArray,pe.x,pe.y,_e.x,_e.y,0,0,J),Sp(this.layoutVertexArray,pe.x,pe.y,_e.x,_e.y,0,1,J),S.x+=2*pe.x,S.y+=2*pe.y,S.vertexCount+=2,J+=ke,Sp(this.layoutVertexArray,Te.x,Te.y,_e.x,_e.y,0,0,J),Sp(this.layoutVertexArray,Te.x,Te.y,_e.x,_e.y,0,1,J),S.x+=2*Te.x,S.y+=2*Te.y,S.vertexCount+=2;const ze=A.vertexLength;this.indexArray.emplaceBack(ze,ze+2,ze+1),this.indexArray.emplaceBack(ze+1,ze+2,ze+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+k>rn.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray)),p4[i.type]!=="Polygon")continue;const L=[],$=[],N=A.vertexLength;for(const X of x)if(X.length!==0){X!==x[0]&&$.push(L.length/2);for(let J=0;J<X.length;J++){const se=X[J];Sp(this.layoutVertexArray,se.x,se.y,0,0,1,1,0),S.x+=se.x,S.y+=se.y,S.vertexCount+=1,L.push(se.x),L.push(se.y)}}const G=q2(L,$);for(let X=0;X<G.length;X+=3)this.indexArray.emplaceBack(N+G[X],N+G[X+2],N+G[X+1]);A.primitiveLength+=G.length/3,A.vertexLength+=k;for(let X=0;X<S.vertexCount;X++){const J=Math.floor(S.x/S.vertexCount),se=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(J,se)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,_,g)}}function f4(s,i){return s.x===i.x&&(s.x<0||s.x>Lr)||s.y===i.y&&(s.y<0||s.y>Lr)}function m4(s){return s.every(i=>i.x<0)||s.every(i=>i.x>Lr)||s.every(i=>i.y<0)||s.every(i=>i.y>Lr)}let tS;mt("FillExtrusionBucket",M1,{omit:["layers","features"]});var g4={get paint(){return tS=tS||new v({"fill-extrusion-opacity":new vt(we["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Mt(we["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new vt(we["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new vt(we["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Vc(we["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Mt(we["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Mt(we["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new vt(we["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class y4 extends c{constructor(i){super(i,g4)}createBucket(i){return new M1(i)}queryRadius(){return cg(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,l,p,g,_,x,S,k){const A=hg(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),x.angle,S),L=this.paint.get("fill-extrusion-height").evaluate(l,p),$=this.paint.get("fill-extrusion-base").evaluate(l,p),N=function(X,J,se,pe){const Te=[];for(const _e of X){const ke=[_e.x,_e.y,0,1];dg(ke,ke,J),Te.push(new E(ke[0]/ke[3],ke[1]/ke[3]))}return Te}(A,k),G=function(X,J,se,pe){const Te=[],_e=[],ke=pe[8]*J,ze=pe[9]*J,qe=pe[10]*J,lt=pe[11]*J,Pt=pe[8]*se,st=pe[9]*se,tt=pe[10]*se,wt=pe[11]*se;for(const gt of X){const dt=[],Oe=[];for(const Ct of gt){const xt=Ct.x,Bt=Ct.y,Fn=pe[0]*xt+pe[4]*Bt+pe[12],zn=pe[1]*xt+pe[5]*Bt+pe[13],Vr=pe[2]*xt+pe[6]*Bt+pe[14],ts=pe[3]*xt+pe[7]*Bt+pe[15],ai=Vr+qe,Wr=ts+lt,Ai=Fn+Pt,Li=zn+st,zi=Vr+tt,yr=ts+wt,qr=new E((Fn+ke)/Wr,(zn+ze)/Wr);qr.z=ai/Wr,dt.push(qr);const vi=new E(Ai/yr,Li/yr);vi.z=zi/yr,Oe.push(vi)}Te.push(dt),_e.push(Oe)}return[Te,_e]}(g,$,L,k);return function(X,J,se){let pe=1/0;z2(se,J)&&(pe=nS(se,J[0]));for(let Te=0;Te<J.length;Te++){const _e=J[Te],ke=X[Te];for(let ze=0;ze<_e.length-1;ze++){const qe=_e[ze],lt=[qe,_e[ze+1],ke[ze+1],ke[ze],qe];L2(se,lt)&&(pe=Math.min(pe,nS(se,lt)))}}return pe!==1/0&&pe}(G[0],G[1],N)}}function Cp(s,i){return s.x*i.x+s.y*i.y}function nS(s,i){if(s.length===1){let l=0;const p=i[l++];let g;for(;!g||p.equals(g);)if(g=i[l++],!g)return 1/0;for(;l<i.length;l++){const _=i[l],x=s[0],S=g.sub(p),k=_.sub(p),A=x.sub(p),L=Cp(S,S),$=Cp(S,k),N=Cp(k,k),G=Cp(A,S),X=Cp(A,k),J=L*N-$*$,se=(N*G-$*X)/J,pe=(L*X-$*G)/J,Te=p.z*(1-se-pe)+g.z*se+_.z*pe;if(isFinite(Te))return Te}return 1/0}{let l=1/0;for(const p of i)l=Math.min(l,p.z);return l}}const v4=C([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:_4}=v4,x4=C([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:b4}=x4,w4=kl.VectorTileFeature.types,S4=Math.cos(Math.PI/180*37.5),rS=Math.pow(2,14)/.5;class A1{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(l=>l.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new qc,this.layoutVertexArray2=new xl,this.indexArray=new Mo,this.programConfigurations=new Iu(i.layers,i.zoom),this.segments=new rn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(i,l,p){this.hasPattern=T1("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:S,id:k,index:A,sourceLayerIndex:L}of i){const $=this.layers[0]._featureFilter.needGeometry,N=Mu(S,$);if(!this.layers[0]._featureFilter.filter(new qn(this.zoom),N,p))continue;const G=_?g.evaluate(N,{},p):void 0,X={id:k,properties:S.properties,type:S.type,sourceLayerIndex:L,index:A,geometry:$?N.geometry:Pu(S),patterns:{},sortKey:G};x.push(X)}_&&x.sort((S,k)=>S.sortKey-k.sortKey);for(const S of x){const{geometry:k,index:A,sourceLayerIndex:L}=S;if(this.hasPattern){const $=E1("line",this.layers,S,this.zoom,l);this.patternFeatures.push($)}else this.addFeature(S,k,A,p,{});l.featureIndex.insert(i[A].feature,k,A,L,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,p)}addFeatures(i,l,p){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,p)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,b4)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_4),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,p,g,_){const x=this.layers[0].layout,S=x.get("line-join").evaluate(i,{}),k=x.get("line-cap"),A=x.get("line-miter-limit"),L=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const $ of l)this.addLine($,i,S,k,A,L);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,_,g)}addLine(i,l,p,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let pe=0;pe<i.length-1;pe++)this.totalDistance+=i[pe].dist(i[pe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=w4[l.type]==="Polygon";let k=i.length;for(;k>=2&&i[k-1].equals(i[k-2]);)k--;let A=0;for(;A<k-1&&i[A].equals(i[A+1]);)A++;if(k<(S?3:2))return;p==="bevel"&&(_=1.05);const L=this.overscaling<=16?15*Lr/(512*this.overscaling):0,$=this.segments.prepareSegment(10*k,this.layoutVertexArray,this.indexArray);let N,G,X,J,se;this.e1=this.e2=-1,S&&(N=i[k-2],se=i[A].sub(N)._unit()._perp());for(let pe=A;pe<k;pe++){if(X=pe===k-1?S?i[A+1]:void 0:i[pe+1],X&&i[pe].equals(X))continue;se&&(J=se),N&&(G=N),N=i[pe],se=X?X.sub(N)._unit()._perp():J,J=J||se;let Te=J.add(se);Te.x===0&&Te.y===0||Te._unit();const _e=J.x*se.x+J.y*se.y,ke=Te.x*se.x+Te.y*se.y,ze=ke!==0?1/ke:1/0,qe=2*Math.sqrt(2-2*ke),lt=ke<S4&&G&&X,Pt=J.x*se.y-J.y*se.x>0;if(lt&&pe>A){const wt=N.dist(G);if(wt>2*L){const gt=N.sub(N.sub(G)._mult(L/wt)._round());this.updateDistance(G,gt),this.addCurrentVertex(gt,J,0,0,$),G=gt}}const st=G&&X;let tt=st?p:S?"butt":g;if(st&&tt==="round"&&(ze<x?tt="miter":ze<=2&&(tt="fakeround")),tt==="miter"&&ze>_&&(tt="bevel"),tt==="bevel"&&(ze>2&&(tt="flipbevel"),ze<_&&(tt="miter")),G&&this.updateDistance(G,N),tt==="miter")Te._mult(ze),this.addCurrentVertex(N,Te,0,0,$);else if(tt==="flipbevel"){if(ze>100)Te=se.mult(-1);else{const wt=ze*J.add(se).mag()/J.sub(se).mag();Te._perp()._mult(wt*(Pt?-1:1))}this.addCurrentVertex(N,Te,0,0,$),this.addCurrentVertex(N,Te.mult(-1),0,0,$)}else if(tt==="bevel"||tt==="fakeround"){const wt=-Math.sqrt(ze*ze-1),gt=Pt?wt:0,dt=Pt?0:wt;if(G&&this.addCurrentVertex(N,J,gt,dt,$),tt==="fakeround"){const Oe=Math.round(180*qe/Math.PI/20);for(let Ct=1;Ct<Oe;Ct++){let xt=Ct/Oe;if(xt!==.5){const Fn=xt-.5;xt+=xt*Fn*(xt-1)*((1.0904+_e*(_e*(3.55645-1.43519*_e)-3.2452))*Fn*Fn+(.848013+_e*(.215638*_e-1.06021)))}const Bt=se.sub(J)._mult(xt)._add(J)._unit()._mult(Pt?-1:1);this.addHalfVertex(N,Bt.x,Bt.y,!1,Pt,0,$)}}X&&this.addCurrentVertex(N,se,-gt,-dt,$)}else if(tt==="butt")this.addCurrentVertex(N,Te,0,0,$);else if(tt==="square"){const wt=G?1:-1;this.addCurrentVertex(N,Te,wt,wt,$)}else tt==="round"&&(G&&(this.addCurrentVertex(N,J,0,0,$),this.addCurrentVertex(N,J,1,1,$,!0)),X&&(this.addCurrentVertex(N,se,-1,-1,$,!0),this.addCurrentVertex(N,se,0,0,$)));if(lt&&pe<k-1){const wt=N.dist(X);if(wt>2*L){const gt=N.add(X.sub(N)._mult(L/wt)._round());this.updateDistance(N,gt),this.addCurrentVertex(gt,se,0,0,$),N=gt}}}}addCurrentVertex(i,l,p,g,_,x=!1){const S=l.y*g-l.x,k=-l.y-l.x*g;this.addHalfVertex(i,l.x+l.y*p,l.y-l.x*p,x,!1,p,_),this.addHalfVertex(i,S,k,x,!0,-g,_),this.distance>rS/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,p,g,_,x))}addHalfVertex({x:i,y:l},p,g,_,x,S,k){const A=.5*(this.lineClips?this.scaledDistance*(rS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(_?1:0),(l<<1)+(x?1:0),Math.round(63*p)+128,Math.round(63*g)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const L=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,L),k.primitiveLength++),x?this.e2=L:this.e1=L}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}}let iS,oS;mt("LineBucket",A1,{omit:["layers","patternFeatures"]});var sS={get paint(){return oS=oS||new v({"line-opacity":new Mt(we.paint_line["line-opacity"]),"line-color":new Mt(we.paint_line["line-color"]),"line-translate":new vt(we.paint_line["line-translate"]),"line-translate-anchor":new vt(we.paint_line["line-translate-anchor"]),"line-width":new Mt(we.paint_line["line-width"]),"line-gap-width":new Mt(we.paint_line["line-gap-width"]),"line-offset":new Mt(we.paint_line["line-offset"]),"line-blur":new Mt(we.paint_line["line-blur"]),"line-dasharray":new Wc(we.paint_line["line-dasharray"]),"line-pattern":new Vc(we.paint_line["line-pattern"]),"line-gradient":new fp(we.paint_line["line-gradient"])})},get layout(){return iS=iS||new v({"line-cap":new vt(we.layout_line["line-cap"]),"line-join":new Mt(we.layout_line["line-join"]),"line-miter-limit":new vt(we.layout_line["line-miter-limit"]),"line-round-limit":new vt(we.layout_line["line-round-limit"]),"line-sort-key":new Mt(we.layout_line["line-sort-key"])})}};class C4 extends Mt{possiblyEvaluate(i,l){return l=new qn(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,p,g){return l=le({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,p,g)}}let gg;class k4 extends c{constructor(i){super(i,sS),this.gradientVersion=0,gg||(gg=new C4(sS.paint.properties["line-width"].specification),gg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(p){return p._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof el,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=gg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new A1(i)}queryRadius(i){const l=i,p=aS(yp("line-width",this,l),yp("line-gap-width",this,l)),g=yp("line-offset",this,l);return p/2+Math.abs(g)+cg(this.paint.get("line-translate"))}queryIntersectsFeature(i,l,p,g,_,x,S){const k=hg(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),x.angle,S),A=S/2*aS(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),L=this.paint.get("line-offset").evaluate(l,p);return L&&(g=function($,N){const G=[];for(let X=0;X<$.length;X++){const J=$[X],se=[];for(let pe=0;pe<J.length;pe++){const Te=J[pe-1],_e=J[pe],ke=J[pe+1],ze=pe===0?new E(0,0):_e.sub(Te)._unit()._perp(),qe=pe===J.length-1?new E(0,0):ke.sub(_e)._unit()._perp(),lt=ze._add(qe)._unit(),Pt=lt.x*qe.x+lt.y*qe.y;Pt!==0&&lt._mult(1/Pt),se.push(lt._mult(N)._add(_e))}G.push(se)}return G}(g,L*S)),function($,N,G){for(let X=0;X<N.length;X++){const J=N[X];if($.length>=3){for(let se=0;se<J.length;se++)if(Yc($,J[se]))return!0}if(R3($,J,G))return!0}return!1}(k,g,A)}isTileClipped(){return!0}}function aS(s,i){return i>0?i+2*s:s}const T4=C([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),E4=C([{name:"a_projected_pos",components:3,type:"Float32"}],4);C([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const I4=C([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);C([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lS=C([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),P4=C([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function M4(s,i,l){return s.sections.forEach(p=>{p.text=function(g,_,x){const S=_.layout.get("text-transform").evaluate(x,{});return S==="uppercase"?g=g.toLocaleUpperCase():S==="lowercase"&&(g=g.toLocaleLowerCase()),Hi.applyArabicShaping&&(g=Hi.applyArabicShaping(g)),g}(p.text,i,l)}),s}C([{name:"triangle",components:3,type:"Uint16"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),C([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),C([{type:"Float32",name:"offsetX"}]),C([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),C([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const kp={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Or=24,uS=Ln,cS=function(s,i,l,p,g){var _,x,S=8*g-p-1,k=(1<<S)-1,A=k>>1,L=-7,$=g-1,N=-1,G=s[i+$];for($+=N,_=G&(1<<-L)-1,G>>=-L,L+=S;L>0;_=256*_+s[i+$],$+=N,L-=8);for(x=_&(1<<-L)-1,_>>=-L,L+=p;L>0;x=256*x+s[i+$],$+=N,L-=8);if(_===0)_=1-A;else{if(_===k)return x?NaN:1/0*(G?-1:1);x+=Math.pow(2,p),_-=A}return(G?-1:1)*x*Math.pow(2,_-p)},hS=function(s,i,l,p,g,_){var x,S,k,A=8*_-g-1,L=(1<<A)-1,$=L>>1,N=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,G=0,X=1,J=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(S=isNaN(i)?1:0,x=L):(x=Math.floor(Math.log(i)/Math.LN2),i*(k=Math.pow(2,-x))<1&&(x--,k*=2),(i+=x+$>=1?N/k:N*Math.pow(2,1-$))*k>=2&&(x++,k/=2),x+$>=L?(S=0,x=L):x+$>=1?(S=(i*k-1)*Math.pow(2,g),x+=$):(S=i*Math.pow(2,$-1)*Math.pow(2,g),x=0));g>=8;s[l+G]=255&S,G+=X,S/=256,g-=8);for(x=x<<g|S,A+=g;A>0;s[l+G]=255&x,G+=X,x/=256,A-=8);s[l+G-X]|=128*J};function Ln(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Ln.Varint=0,Ln.Fixed64=1,Ln.Bytes=2,Ln.Fixed32=5;var L1=4294967296,dS=1/L1,pS=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Ia(s){return s.type===Ln.Bytes?s.readVarint()+s.pos:s.pos+1}function th(s,i,l){return l?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function fS(s,i,l){var p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(p);for(var g=l.pos-1;g>=s;g--)l.buf[g+p]=l.buf[g]}function A4(s,i){for(var l=0;l<s.length;l++)i.writeVarint(s[l])}function L4(s,i){for(var l=0;l<s.length;l++)i.writeSVarint(s[l])}function z4(s,i){for(var l=0;l<s.length;l++)i.writeFloat(s[l])}function R4(s,i){for(var l=0;l<s.length;l++)i.writeDouble(s[l])}function D4(s,i){for(var l=0;l<s.length;l++)i.writeBoolean(s[l])}function $4(s,i){for(var l=0;l<s.length;l++)i.writeFixed32(s[l])}function O4(s,i){for(var l=0;l<s.length;l++)i.writeSFixed32(s[l])}function B4(s,i){for(var l=0;l<s.length;l++)i.writeFixed64(s[l])}function F4(s,i){for(var l=0;l<s.length;l++)i.writeSFixed64(s[l])}function yg(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+16777216*s[i+3]}function nh(s,i,l){s[l]=i,s[l+1]=i>>>8,s[l+2]=i>>>16,s[l+3]=i>>>24}function mS(s,i){return(s[i]|s[i+1]<<8|s[i+2]<<16)+(s[i+3]<<24)}Ln.prototype={destroy:function(){this.buf=null},readFields:function(s,i,l){for(l=l||this.length;this.pos<l;){var p=this.readVarint(),g=p>>3,_=this.pos;this.type=7&p,s(g,i,this),this.pos===_&&this.skip(p)}return i},readMessage:function(s,i){return this.readFields(s,i,this.readVarint()+this.pos)},readFixed32:function(){var s=yg(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=mS(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=yg(this.buf,this.pos)+yg(this.buf,this.pos+4)*L1;return this.pos+=8,s},readSFixed64:function(){var s=yg(this.buf,this.pos)+mS(this.buf,this.pos+4)*L1;return this.pos+=8,s},readFloat:function(){var s=cS(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=cS(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var i,l,p=this.buf;return i=127&(l=p[this.pos++]),l<128?i:(i|=(127&(l=p[this.pos++]))<<7,l<128?i:(i|=(127&(l=p[this.pos++]))<<14,l<128?i:(i|=(127&(l=p[this.pos++]))<<21,l<128?i:function(g,_,x){var S,k,A=x.buf;if(S=(112&(k=A[x.pos++]))>>4,k<128||(S|=(127&(k=A[x.pos++]))<<3,k<128)||(S|=(127&(k=A[x.pos++]))<<10,k<128)||(S|=(127&(k=A[x.pos++]))<<17,k<128)||(S|=(127&(k=A[x.pos++]))<<24,k<128)||(S|=(1&(k=A[x.pos++]))<<31,k<128))return th(g,S,_);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(l=p[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,i=this.pos;return this.pos=s,s-i>=12&&pS?function(l,p,g){return pS.decode(l.subarray(p,g))}(this.buf,i,s):function(l,p,g){for(var _="",x=p;x<g;){var S,k,A,L=l[x],$=null,N=L>239?4:L>223?3:L>191?2:1;if(x+N>g)break;N===1?L<128&&($=L):N===2?(192&(S=l[x+1]))==128&&($=(31&L)<<6|63&S)<=127&&($=null):N===3?(k=l[x+2],(192&(S=l[x+1]))==128&&(192&k)==128&&(($=(15&L)<<12|(63&S)<<6|63&k)<=2047||$>=55296&&$<=57343)&&($=null)):N===4&&(k=l[x+2],A=l[x+3],(192&(S=l[x+1]))==128&&(192&k)==128&&(192&A)==128&&(($=(15&L)<<18|(63&S)<<12|(63&k)<<6|63&A)<=65535||$>=1114112)&&($=null)),$===null?($=65533,N=1):$>65535&&($-=65536,_+=String.fromCharCode($>>>10&1023|55296),$=56320|1023&$),_+=String.fromCharCode($),x+=N}return _}(this.buf,i,s)},readBytes:function(){var s=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,s);return this.pos=s,i},readPackedVarint:function(s,i){if(this.type!==Ln.Bytes)return s.push(this.readVarint(i));var l=Ia(this);for(s=s||[];this.pos<l;)s.push(this.readVarint(i));return s},readPackedSVarint:function(s){if(this.type!==Ln.Bytes)return s.push(this.readSVarint());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Ln.Bytes)return s.push(this.readBoolean());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Ln.Bytes)return s.push(this.readFloat());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Ln.Bytes)return s.push(this.readDouble());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Ln.Bytes)return s.push(this.readFixed32());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Ln.Bytes)return s.push(this.readSFixed32());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Ln.Bytes)return s.push(this.readFixed64());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Ln.Bytes)return s.push(this.readSFixed64());var i=Ia(this);for(s=s||[];this.pos<i;)s.push(this.readSFixed64());return s},skip:function(s){var i=7&s;if(i===Ln.Varint)for(;this.buf[this.pos++]>127;);else if(i===Ln.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Ln.Fixed32)this.pos+=4;else{if(i!==Ln.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(s,i){this.writeVarint(s<<3|i)},realloc:function(s){for(var i=this.length||16;i<this.pos+s;)i*=2;if(i!==this.length){var l=new Uint8Array(i);l.set(this.buf),this.buf=l,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),nh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),nh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),nh(this.buf,-1&s,this.pos),nh(this.buf,Math.floor(s*dS),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),nh(this.buf,-1&s,this.pos),nh(this.buf,Math.floor(s*dS),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?function(i,l){var p,g;if(i>=0?(p=i%4294967296|0,g=i/4294967296|0):(g=~(-i/4294967296),4294967295^(p=~(-i%4294967296))?p=p+1|0:(p=0,g=g+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");l.realloc(10),function(_,x,S){S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,_>>>=7,S.buf[S.pos++]=127&_|128,S.buf[S.pos]=127&(_>>>=7)}(p,0,l),function(_,x){var S=(7&_)<<4;x.buf[x.pos++]|=S|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,l)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var i=this.pos;this.pos=function(p,g,_){for(var x,S,k=0;k<g.length;k++){if((x=g.charCodeAt(k))>55295&&x<57344){if(!S){x>56319||k+1===g.length?(p[_++]=239,p[_++]=191,p[_++]=189):S=x;continue}if(x<56320){p[_++]=239,p[_++]=191,p[_++]=189,S=x;continue}x=S-55296<<10|x-56320|65536,S=null}else S&&(p[_++]=239,p[_++]=191,p[_++]=189,S=null);x<128?p[_++]=x:(x<2048?p[_++]=x>>6|192:(x<65536?p[_++]=x>>12|224:(p[_++]=x>>18|240,p[_++]=x>>12&63|128),p[_++]=x>>6&63|128),p[_++]=63&x|128)}return _}(this.buf,s,this.pos);var l=this.pos-i;l>=128&&fS(i,l,this),this.pos=i-1,this.writeVarint(l),this.pos+=l},writeFloat:function(s){this.realloc(4),hS(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),hS(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var i=s.length;this.writeVarint(i),this.realloc(i);for(var l=0;l<i;l++)this.buf[this.pos++]=s[l]},writeRawMessage:function(s,i){this.pos++;var l=this.pos;s(i,this);var p=this.pos-l;p>=128&&fS(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p},writeMessage:function(s,i,l){this.writeTag(s,Ln.Bytes),this.writeRawMessage(i,l)},writePackedVarint:function(s,i){i.length&&this.writeMessage(s,A4,i)},writePackedSVarint:function(s,i){i.length&&this.writeMessage(s,L4,i)},writePackedBoolean:function(s,i){i.length&&this.writeMessage(s,D4,i)},writePackedFloat:function(s,i){i.length&&this.writeMessage(s,z4,i)},writePackedDouble:function(s,i){i.length&&this.writeMessage(s,R4,i)},writePackedFixed32:function(s,i){i.length&&this.writeMessage(s,$4,i)},writePackedSFixed32:function(s,i){i.length&&this.writeMessage(s,O4,i)},writePackedFixed64:function(s,i){i.length&&this.writeMessage(s,B4,i)},writePackedSFixed64:function(s,i){i.length&&this.writeMessage(s,F4,i)},writeBytesField:function(s,i){this.writeTag(s,Ln.Bytes),this.writeBytes(i)},writeFixed32Field:function(s,i){this.writeTag(s,Ln.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(s,i){this.writeTag(s,Ln.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(s,i){this.writeTag(s,Ln.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(s,i){this.writeTag(s,Ln.Fixed64),this.writeSFixed64(i)},writeVarintField:function(s,i){this.writeTag(s,Ln.Varint),this.writeVarint(i)},writeSVarintField:function(s,i){this.writeTag(s,Ln.Varint),this.writeSVarint(i)},writeStringField:function(s,i){this.writeTag(s,Ln.Bytes),this.writeString(i)},writeFloatField:function(s,i){this.writeTag(s,Ln.Fixed32),this.writeFloat(i)},writeDoubleField:function(s,i){this.writeTag(s,Ln.Fixed64),this.writeDouble(i)},writeBooleanField:function(s,i){this.writeVarintField(s,!!i)}};var z1=b(uS);const R1=3;function N4(s,i,l){s===1&&l.readMessage(j4,i)}function j4(s,i,l){if(s===3){const{id:p,bitmap:g,width:_,height:x,left:S,top:k,advance:A}=l.readMessage(U4,{});i.push({id:p,bitmap:new _p({width:_+2*R1,height:x+2*R1},g),metrics:{width:_,height:x,left:S,top:k,advance:A}})}}function U4(s,i,l){s===1?i.id=l.readVarint():s===2?i.bitmap=l.readBytes():s===3?i.width=l.readVarint():s===4?i.height=l.readVarint():s===5?i.left=l.readSVarint():s===6?i.top=l.readSVarint():s===7&&(i.advance=l.readVarint())}const gS=R1;function yS(s){let i=0,l=0;for(const x of s)i+=x.w*x.h,l=Math.max(l,x.w);s.sort((x,S)=>S.h-x.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let g=0,_=0;for(const x of s)for(let S=p.length-1;S>=0;S--){const k=p[S];if(!(x.w>k.w||x.h>k.h)){if(x.x=k.x,x.y=k.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===k.w&&x.h===k.h){const A=p.pop();S<p.length&&(p[S]=A)}else x.h===k.h?(k.x+=x.w,k.w-=x.w):x.w===k.w?(k.y+=x.h,k.h-=x.h):(p.push({x:k.x+x.w,y:k.y,w:k.w-x.w,h:x.h}),k.y+=x.h,k.h-=x.h);break}}return{w:g,h:_,fill:i/(g*_)||0}}const Ki=1;class D1{constructor(i,{pixelRatio:l,version:p,stretchX:g,stretchY:_,content:x,textFitWidth:S,textFitHeight:k}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=g,this.stretchY=_,this.content=x,this.version=p,this.textFitWidth=S,this.textFitHeight=k}get tl(){return[this.paddedRect.x+Ki,this.paddedRect.y+Ki]}get br(){return[this.paddedRect.x+this.paddedRect.w-Ki,this.paddedRect.y+this.paddedRect.h-Ki]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Ki)/this.pixelRatio,(this.paddedRect.h-2*Ki)/this.pixelRatio]}}class vS{constructor(i,l){const p={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(i,p,_),this.addImages(l,g,_);const{w:x,h:S}=yS(_),k=new Ao({width:x||1,height:S||1});for(const A in i){const L=i[A],$=p[A].paddedRect;Ao.copy(L.data,k,{x:0,y:0},{x:$.x+Ki,y:$.y+Ki},L.data)}for(const A in l){const L=l[A],$=g[A].paddedRect,N=$.x+Ki,G=$.y+Ki,X=L.data.width,J=L.data.height;Ao.copy(L.data,k,{x:0,y:0},{x:N,y:G},L.data),Ao.copy(L.data,k,{x:0,y:J-1},{x:N,y:G-1},{width:X,height:1}),Ao.copy(L.data,k,{x:0,y:0},{x:N,y:G+J},{width:X,height:1}),Ao.copy(L.data,k,{x:X-1,y:0},{x:N-1,y:G},{width:1,height:J}),Ao.copy(L.data,k,{x:0,y:0},{x:N+X,y:G},{width:1,height:J})}this.image=k,this.iconPositions=p,this.patternPositions=g}addImages(i,l,p){for(const g in i){const _=i[g],x={x:0,y:0,w:_.data.width+2*Ki,h:_.data.height+2*Ki};p.push(x),l[g]=new D1(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),l)}patchUpdatedImage(i,l,p){if(!i||!l||i.version===l.version)return;i.version=l.version;const[g,_]=i.tl;p.update(l.data,void 0,{x:g,y:_})}}var Tl;mt("ImagePosition",D1),mt("ImageAtlas",vS),d.ah=void 0,(Tl=d.ah||(d.ah={}))[Tl.none=0]="none",Tl[Tl.horizontal=1]="horizontal",Tl[Tl.vertical=2]="vertical",Tl[Tl.horizontalOnly=3]="horizontalOnly";const Tp=-17;class Ep{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,l){const p=new Ep;return p.scale=i||1,p.fontStack=l,p}static forImage(i){const l=new Ep;return l.imageName=i,l}}class rh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,l){const p=new rh;for(let g=0;g<i.sections.length;g++){const _=i.sections[g];_.image?p.addImageSection(_):p.addTextSection(_,l)}return p}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let l="";for(let p=0;p<i.length;p++){const g=i.charCodeAt(p+1)||null,_=i.charCodeAt(p-1)||null;l+=g&&rg(g)&&!kp[i[p+1]]||_&&rg(_)&&!kp[i[p-1]]||!kp[i[p]]?i[p]:kp[i[p]]}return l}(this.text)}trim(){let i=0;for(let p=0;p<this.text.length&&_g[this.text.charCodeAt(p)];p++)i++;let l=this.text.length;for(let p=this.text.length-1;p>=0&&p>=i&&_g[this.text.charCodeAt(p)];p--)l--;this.text=this.text.substring(i,l),this.sectionIndex=this.sectionIndex.slice(i,l)}substring(i,l){const p=new rh;return p.text=this.text.substring(i,l),p.sectionIndex=this.sectionIndex.slice(i,l),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,l)=>Math.max(i,this.sections[l].scale),0)}addTextSection(i,l){this.text+=i.text,this.sections.push(Ep.forText(i.scale,i.fontStack||l));const p=this.sections.length-1;for(let g=0;g<i.text.length;++g)this.sectionIndex.push(p)}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void $e("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push(Ep.forImage(l)),this.sectionIndex.push(this.sections.length-1)):$e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function vg(s,i,l,p,g,_,x,S,k,A,L,$,N,G,X){const J=rh.fromFeature(s,g);let se;$===d.ah.vertical&&J.verticalizePunctuation();const{processBidirectionalText:pe,processStyledBidirectionalText:Te}=Hi;if(pe&&J.sections.length===1){se=[];const ze=pe(J.toString(),$1(J,A,_,i,p,G));for(const qe of ze){const lt=new rh;lt.text=qe,lt.sections=J.sections;for(let Pt=0;Pt<qe.length;Pt++)lt.sectionIndex.push(0);se.push(lt)}}else if(Te){se=[];const ze=Te(J.text,J.sectionIndex,$1(J,A,_,i,p,G));for(const qe of ze){const lt=new rh;lt.text=qe[0],lt.sectionIndex=qe[1],lt.sections=J.sections,se.push(lt)}}else se=function(ze,qe){const lt=[],Pt=ze.text;let st=0;for(const tt of qe)lt.push(ze.substring(st,tt)),st=tt;return st<Pt.length&&lt.push(ze.substring(st,Pt.length)),lt}(J,$1(J,A,_,i,p,G));const _e=[],ke={positionedLines:_e,text:J.toString(),top:L[1],bottom:L[1],left:L[0],right:L[0],writingMode:$,iconsInText:!1,verticalizable:!1};return function(ze,qe,lt,Pt,st,tt,wt,gt,dt,Oe,Ct,xt){let Bt=0,Fn=Tp,zn=0,Vr=0;const ts=gt==="right"?1:gt==="left"?0:.5;let ai=0;for(const yr of st){yr.trim();const qr=yr.getMaxScale(),vi=(qr-1)*Or,li={positionedGlyphs:[],lineOffset:0};ze.positionedLines[ai]=li;const Ri=li.positionedGlyphs;let ui=0;if(!yr.length()){Fn+=tt,++ai;continue}for(let Xi=0;Xi<yr.length();Xi++){const mn=yr.getSection(Xi),jn=yr.getSectionIndex(Xi),Kn=yr.getCharCode(Xi);let mo=0,ar=null,ah=null,Gs=null,Hs=Or;const ns=!(dt===d.ah.horizontal||!Ct&&!dp(Kn)||Ct&&(_g[Kn]||(Wr=Kn,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Wr)))));if(mn.imageName){const Ro=Pt[mn.imageName];if(!Ro)continue;Gs=mn.imageName,ze.iconsInText=ze.iconsInText||!0,ah=Ro.paddedRect;const Yr=Ro.displaySize;mn.scale=mn.scale*Or/xt,ar={width:Yr[0],height:Yr[1],left:Ki,top:-gS,advance:ns?Yr[1]:Yr[0]},mo=vi+(Or-Yr[1]*mn.scale),Hs=ar.advance;const Pa=ns?Yr[0]*mn.scale-Or*qr:Yr[1]*mn.scale-Or*qr;Pa>0&&Pa>ui&&(ui=Pa)}else{const Ro=lt[mn.fontStack],Yr=Ro&&Ro[Kn];if(Yr&&Yr.rect)ah=Yr.rect,ar=Yr.metrics;else{const Pa=qe[mn.fontStack],zp=Pa&&Pa[Kn];if(!zp)continue;ar=zp.metrics}mo=(qr-mn.scale)*Or}ns?(ze.verticalizable=!0,Ri.push({glyph:Kn,imageName:Gs,x:Bt,y:Fn+mo,vertical:ns,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:jn,metrics:ar,rect:ah}),Bt+=Hs*mn.scale+Oe):(Ri.push({glyph:Kn,imageName:Gs,x:Bt,y:Fn+mo,vertical:ns,scale:mn.scale,fontStack:mn.fontStack,sectionIndex:jn,metrics:ar,rect:ah}),Bt+=ar.advance*mn.scale+Oe)}Ri.length!==0&&(zn=Math.max(Bt-Oe,zn),G4(Ri,0,Ri.length-1,ts,ui)),Bt=0;const zo=tt*qr+ui;li.lineOffset=Math.max(ui,vi),Fn+=zo,Vr=Math.max(zo,Vr),++ai}var Wr;const Ai=Fn-Tp,{horizontalAlign:Li,verticalAlign:zi}=O1(wt);(function(yr,qr,vi,li,Ri,ui,zo,Xi,mn){const jn=(qr-vi)*Ri;let Kn=0;Kn=ui!==zo?-Xi*li-Tp:(-li*mn+.5)*zo;for(const mo of yr)for(const ar of mo.positionedGlyphs)ar.x+=jn,ar.y+=Kn})(ze.positionedLines,ts,Li,zi,zn,Vr,tt,Ai,st.length),ze.top+=-zi*Ai,ze.bottom=ze.top+Ai,ze.left+=-Li*zn,ze.right=ze.left+zn}(ke,i,l,p,se,x,S,k,$,A,N,X),!function(ze){for(const qe of ze)if(qe.positionedGlyphs.length!==0)return!1;return!0}(_e)&&ke}const _g={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},V4={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},W4={40:!0};function _S(s,i,l,p,g,_){if(i.imageName){const x=p[i.imageName];return x?x.displaySize[0]*i.scale*Or/_+g:0}{const x=l[i.fontStack],S=x&&x[s];return S?S.metrics.advance*i.scale+g:0}}function xS(s,i,l,p){const g=Math.pow(s-i,2);return p?s<i?g/2:2*g:g+Math.abs(l)*l}function q4(s,i,l){let p=0;return s===10&&(p-=1e4),l&&(p+=150),s!==40&&s!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function bS(s,i,l,p,g,_){let x=null,S=xS(i,l,g,_);for(const k of p){const A=xS(i-k.x,l,g,_)+k.badness;A<=S&&(x=k,S=A)}return{index:s,x:i,priorBreak:x,badness:S}}function wS(s){return s?wS(s.priorBreak).concat(s.index):[]}function $1(s,i,l,p,g,_){if(!s)return[];const x=[],S=function($,N,G,X,J,se){let pe=0;for(let Te=0;Te<$.length();Te++){const _e=$.getSection(Te);pe+=_S($.getCharCode(Te),_e,X,J,N,se)}return pe/Math.max(1,Math.ceil(pe/G))}(s,i,l,p,g,_),k=s.text.indexOf("​")>=0;let A=0;for(let $=0;$<s.length();$++){const N=s.getSection($),G=s.getCharCode($);if(_g[G]||(A+=_S(G,N,p,g,i,_)),$<s.length()-1){const X=!((L=G)<11904)&&(!!nn["CJK Compatibility Forms"](L)||!!nn["CJK Compatibility"](L)||!!nn["CJK Strokes"](L)||!!nn["CJK Symbols and Punctuation"](L)||!!nn["Enclosed CJK Letters and Months"](L)||!!nn["Halfwidth and Fullwidth Forms"](L)||!!nn["Ideographic Description Characters"](L)||!!nn["Vertical Forms"](L)||ng.test(String.fromCodePoint(L)));(V4[G]||X||N.imageName||$!==s.length()-2&&W4[s.getCharCode($+1)])&&x.push(bS($+1,A,S,x,q4(G,s.getCharCode($+1),X&&k),!1))}}var L;return wS(bS(s.length(),A,S,x,0,!0))}function O1(s){let i=.5,l=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function G4(s,i,l,p,g){if(!p&&!g)return;const _=s[l],x=(s[l].x+_.metrics.advance*_.scale)*p;for(let S=i;S<=l;S++)s[S].x-=x,s[S].y+=g}function H4(s,i,l){const{horizontalAlign:p,verticalAlign:g}=O1(l),_=i[0]-s.displaySize[0]*p,x=i[1]-s.displaySize[1]*g;return{image:s,top:x,bottom:x+s.displaySize[1],left:_,right:_+s.displaySize[0]}}function SS(s){var i,l;let p=s.left,g=s.top,_=s.right-p,x=s.bottom-g;const S=(i=s.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",k=(l=s.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",A=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(k==="proportional"){if(S==="stretchOnly"&&_/x<A||S==="proportional"){const L=Math.ceil(x*A);p*=L/_,_=L}}else if(S==="proportional"&&k==="stretchOnly"&&A!==0&&_/x>A){const L=Math.ceil(_/A);g*=L/x,x=L}return{x1:p,y1:g,x2:p+_,y2:g+x}}function CS(s,i,l,p,g,_){const x=s.image;let S;if(x.content){const se=x.content,pe=x.pixelRatio||1;S=[se[0]/pe,se[1]/pe,x.displaySize[0]-se[2]/pe,x.displaySize[1]-se[3]/pe]}const k=i.left*_,A=i.right*_;let L,$,N,G;l==="width"||l==="both"?(G=g[0]+k-p[3],$=g[0]+A+p[1]):(G=g[0]+(k+A-x.displaySize[0])/2,$=G+x.displaySize[0]);const X=i.top*_,J=i.bottom*_;return l==="height"||l==="both"?(L=g[1]+X-p[0],N=g[1]+J+p[2]):(L=g[1]+(X+J-x.displaySize[1])/2,N=L+x.displaySize[1]),{image:x,top:L,right:$,bottom:N,left:G,collisionPadding:S}}const Ip=255,qs=128,El=Ip*qs;function kS(s,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new qn(s+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:g}=l;let _=0;for(;_<p.length&&p[_]<=s;)_++;_=Math.max(0,_-1);let x=_;for(;x<p.length&&p[x]<s+1;)x++;x=Math.min(p.length-1,x);const S=p[_],k=p[x];return l.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:k,interpolationType:g}:{kind:"camera",minZoom:S,maxZoom:k,minSize:l.evaluate(new qn(S)),maxSize:l.evaluate(new qn(k)),interpolationType:g}}}function B1(s,i,l){let p="never";const g=s.get(i);return g?p=g:s.get(l)&&(p="always"),p}const Z4=kl.VectorTileFeature.types,K4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function xg(s,i,l,p,g,_,x,S,k,A,L,$,N){const G=S?Math.min(El,Math.round(S[0])):0,X=S?Math.min(El,Math.round(S[1])):0;s.emplaceBack(i,l,Math.round(32*p),Math.round(32*g),_,x,(G<<1)+(k?1:0),X,16*A,16*L,256*$,256*N)}function F1(s,i,l){s.emplaceBack(i.x,i.y,l),s.emplaceBack(i.x,i.y,l),s.emplaceBack(i.x,i.y,l),s.emplaceBack(i.x,i.y,l)}function X4(s){for(const i of s.sections)if(p1(i.text))return!0;return!1}class N1{constructor(i){this.layoutVertexArray=new Gc,this.indexArray=new Mo,this.programConfigurations=i,this.segments=new rn,this.dynamicLayoutVertexArray=new mp,this.opacityVertexArray=new po,this.hasVisibleVertices=!1,this.placedSymbolArray=new Gn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,p,g){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,T4.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,E4.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,K4,!0),this.opacityVertexBuffer.itemSize=1),(p||g)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}mt("SymbolBuffers",N1);class j1{constructor(i,l,p){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new p,this.segments=new rn,this.collisionVertexArray=new Vs}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,I4.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}mt("CollisionBuffers",j1);class ih{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(x=>x.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=x1([]),this.placementViewportMatrix=x1([]);const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=kS(this.zoom,l["text-size"]),this.iconSizeData=kS(this.zoom,l["icon-size"]);const p=this.layers[0].layout,g=p.get("symbol-sort-key"),_=p.get("symbol-z-order");this.canOverlap=B1(p,"text-overlap","text-allow-overlap")!=="never"||B1(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map(x=>d.ah[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=i.sourceID}createArrays(){this.text=new N1(new Iu(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new N1(new Iu(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new Hn,this.lineVertexArray=new ri,this.symbolInstances=new Qt,this.textAnchorOffsets=new Zn}calculateGlyphDependencies(i,l,p,g,_){for(let x=0;x<i.length;x++)if(l[i.charCodeAt(x)]=!0,(p||g)&&_){const S=kp[i.charAt(x)];S&&(l[S.charCodeAt(0)]=!0)}}populate(i,l,p){const g=this.layers[0],_=g.layout,x=_.get("text-font"),S=_.get("text-field"),k=_.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof Vi&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),L=k.value.kind!=="constant"||!!k.value.value||Object.keys(k.parameters).length>0,$=_.get("symbol-sort-key");if(this.features=[],!A&&!L)return;const N=l.iconDependencies,G=l.glyphDependencies,X=l.availableImages,J=new qn(this.zoom);for(const{feature:se,id:pe,index:Te,sourceLayerIndex:_e}of i){const ke=g._featureFilter.needGeometry,ze=Mu(se,ke);if(!g._featureFilter.filter(J,ze,p))continue;let qe,lt;if(ke||(ze.geometry=Pu(se)),A){const st=g.getValueAndResolveTokens("text-field",ze,p,X),tt=Vi.factory(st),wt=this.hasRTLText=this.hasRTLText||X4(tt);(!wt||Hi.getRTLTextPluginStatus()==="unavailable"||wt&&Hi.isParsed())&&(qe=M4(tt,g,ze))}if(L){const st=g.getValueAndResolveTokens("icon-image",ze,p,X);lt=st instanceof qi?st:qi.fromString(st)}if(!qe&&!lt)continue;const Pt=this.sortFeaturesByKey?$.evaluate(ze,{},p):void 0;if(this.features.push({id:pe,text:qe,icon:lt,index:Te,sourceLayerIndex:_e,geometry:ze.geometry,properties:se.properties,type:Z4[se.type],sortKey:Pt}),lt&&(N[lt.name]=!0),qe){const st=x.evaluate(ze,{},p).join(","),tt=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.ah.vertical)>=0;for(const wt of qe.sections)if(wt.image)N[wt.image.name]=!0;else{const gt=cp(qe.toString()),dt=wt.fontStack||st,Oe=G[dt]=G[dt]||{};this.calculateGlyphDependencies(wt.text,Oe,tt,this.allowVerticalPlacement,gt)}}}_.get("symbol-placement")==="line"&&(this.features=function(se){const pe={},Te={},_e=[];let ke=0;function ze(st){_e.push(se[st]),ke++}function qe(st,tt,wt){const gt=Te[st];return delete Te[st],Te[tt]=gt,_e[gt].geometry[0].pop(),_e[gt].geometry[0]=_e[gt].geometry[0].concat(wt[0]),gt}function lt(st,tt,wt){const gt=pe[tt];return delete pe[tt],pe[st]=gt,_e[gt].geometry[0].shift(),_e[gt].geometry[0]=wt[0].concat(_e[gt].geometry[0]),gt}function Pt(st,tt,wt){const gt=wt?tt[0][tt[0].length-1]:tt[0][0];return`${st}:${gt.x}:${gt.y}`}for(let st=0;st<se.length;st++){const tt=se[st],wt=tt.geometry,gt=tt.text?tt.text.toString():null;if(!gt){ze(st);continue}const dt=Pt(gt,wt),Oe=Pt(gt,wt,!0);if(dt in Te&&Oe in pe&&Te[dt]!==pe[Oe]){const Ct=lt(dt,Oe,wt),xt=qe(dt,Oe,_e[Ct].geometry);delete pe[dt],delete Te[Oe],Te[Pt(gt,_e[xt].geometry,!0)]=xt,_e[Ct].geometry=null}else dt in Te?qe(dt,Oe,wt):Oe in pe?lt(dt,Oe,wt):(ze(st),pe[dt]=ke-1,Te[Oe]=ke-1)}return _e.filter(st=>st.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((se,pe)=>se.sortKey-pe.sortKey)}update(i,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,p),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,p))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const p=this.lineVertexArray.length;if(i.segment!==void 0){let g=i.dist(l[i.segment+1]),_=i.dist(l[i.segment]);const x={};for(let S=i.segment+1;S<l.length;S++)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:g},S<l.length-1&&(g+=l[S+1].dist(l[S]));for(let S=i.segment||0;S>=0;S--)x[S]={x:l[S].x,y:l[S].y,tileUnitDistanceFromAnchor:_},S>0&&(_+=l[S-1].dist(l[S]));for(let S=0;S<l.length;S++){const k=x[S];this.lineVertexArray.emplaceBack(k.x,k.y,k.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,l,p,g,_,x,S,k,A,L,$,N){const G=i.indexArray,X=i.layoutVertexArray,J=i.segments.prepareSegment(4*l.length,X,G,this.canOverlap?x.sortKey:void 0),se=this.glyphOffsetArray.length,pe=J.vertexLength,Te=this.allowVerticalPlacement&&S===d.ah.vertical?Math.PI/2:0,_e=x.text&&x.text.sections;for(let ke=0;ke<l.length;ke++){const{tl:ze,tr:qe,bl:lt,br:Pt,tex:st,pixelOffsetTL:tt,pixelOffsetBR:wt,minFontScaleX:gt,minFontScaleY:dt,glyphOffset:Oe,isSDF:Ct,sectionIndex:xt}=l[ke],Bt=J.vertexLength,Fn=Oe[1];xg(X,k.x,k.y,ze.x,Fn+ze.y,st.x,st.y,p,Ct,tt.x,tt.y,gt,dt),xg(X,k.x,k.y,qe.x,Fn+qe.y,st.x+st.w,st.y,p,Ct,wt.x,tt.y,gt,dt),xg(X,k.x,k.y,lt.x,Fn+lt.y,st.x,st.y+st.h,p,Ct,tt.x,wt.y,gt,dt),xg(X,k.x,k.y,Pt.x,Fn+Pt.y,st.x+st.w,st.y+st.h,p,Ct,wt.x,wt.y,gt,dt),F1(i.dynamicLayoutVertexArray,k,Te),G.emplaceBack(Bt,Bt+1,Bt+2),G.emplaceBack(Bt+1,Bt+2,Bt+3),J.vertexLength+=4,J.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Oe[0]),ke!==l.length-1&&xt===l[ke+1].sectionIndex||i.programConfigurations.populatePaintArrays(X.length,x,x.index,{},N,_e&&_e[xt])}i.placedSymbolArray.emplaceBack(k.x,k.y,se,this.glyphOffsetArray.length-se,pe,A,L,k.segment,p?p[0]:0,p?p[1]:0,g[0],g[1],S,0,!1,0,$)}_addCollisionDebugVertex(i,l,p,g,_,x){return l.emplaceBack(0,0),i.emplaceBack(p.x,p.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(i,l,p,g,_,x,S){const k=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),A=k.vertexLength,L=_.layoutVertexArray,$=_.collisionVertexArray,N=S.anchorX,G=S.anchorY;this._addCollisionDebugVertex(L,$,x,N,G,new E(i,l)),this._addCollisionDebugVertex(L,$,x,N,G,new E(p,l)),this._addCollisionDebugVertex(L,$,x,N,G,new E(p,g)),this._addCollisionDebugVertex(L,$,x,N,G,new E(i,g)),k.vertexLength+=4;const X=_.indexArray;X.emplaceBack(A,A+1),X.emplaceBack(A+1,A+2),X.emplaceBack(A+2,A+3),X.emplaceBack(A+3,A),k.primitiveLength+=4}addDebugCollisionBoxes(i,l,p,g){for(let _=i;_<l;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new j1(fo,lS.members,Xr),this.iconCollisionBox=new j1(fo,lS.members,Xr);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,p,g,_,x,S,k,A){const L={};for(let $=l;$<p;$++){const N=i.get($);L.textBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.textFeatureIndex=N.featureIndex;break}for(let $=g;$<_;$++){const N=i.get($);L.verticalTextBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalTextFeatureIndex=N.featureIndex;break}for(let $=x;$<S;$++){const N=i.get($);L.iconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.iconFeatureIndex=N.featureIndex;break}for(let $=k;$<A;$++){const N=i.get($);L.verticalIconBox={x1:N.x1,y1:N.y1,x2:N.x2,y2:N.y2,anchorPointX:N.anchorPointX,anchorPointY:N.anchorPointY},L.verticalIconFeatureIndex=N.featureIndex;break}return L}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const p=i.placedSymbolArray.get(l),g=p.vertexStartIndex+4*p.numGlyphs;for(let _=p.vertexStartIndex;_<g;_+=4)i.indexArray.emplaceBack(_,_+1,_+2),i.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),p=Math.cos(i),g=[],_=[],x=[];for(let S=0;S<this.symbolInstances.length;++S){x.push(S);const k=this.symbolInstances.get(S);g.push(0|Math.round(l*k.anchorX+p*k.anchorY)),_.push(k.featureIndex)}return x.sort((S,k)=>g[S]-g[k]||_[k]-_[S]),x}addToSortKeyRanges(i,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let TS,ES;mt("SymbolBucket",ih,{omit:["layers","collisionBoxArray","features","compareText"]}),ih.MAX_GLYPHS=65535,ih.addDynamicAttributes=F1;var U1={get paint(){return ES=ES||new v({"icon-opacity":new Mt(we.paint_symbol["icon-opacity"]),"icon-color":new Mt(we.paint_symbol["icon-color"]),"icon-halo-color":new Mt(we.paint_symbol["icon-halo-color"]),"icon-halo-width":new Mt(we.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Mt(we.paint_symbol["icon-halo-blur"]),"icon-translate":new vt(we.paint_symbol["icon-translate"]),"icon-translate-anchor":new vt(we.paint_symbol["icon-translate-anchor"]),"text-opacity":new Mt(we.paint_symbol["text-opacity"]),"text-color":new Mt(we.paint_symbol["text-color"],{runtimeType:ln,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new Mt(we.paint_symbol["text-halo-color"]),"text-halo-width":new Mt(we.paint_symbol["text-halo-width"]),"text-halo-blur":new Mt(we.paint_symbol["text-halo-blur"]),"text-translate":new vt(we.paint_symbol["text-translate"]),"text-translate-anchor":new vt(we.paint_symbol["text-translate-anchor"])})},get layout(){return TS=TS||new v({"symbol-placement":new vt(we.layout_symbol["symbol-placement"]),"symbol-spacing":new vt(we.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new vt(we.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Mt(we.layout_symbol["symbol-sort-key"]),"symbol-z-order":new vt(we.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new vt(we.layout_symbol["icon-allow-overlap"]),"icon-overlap":new vt(we.layout_symbol["icon-overlap"]),"icon-ignore-placement":new vt(we.layout_symbol["icon-ignore-placement"]),"icon-optional":new vt(we.layout_symbol["icon-optional"]),"icon-rotation-alignment":new vt(we.layout_symbol["icon-rotation-alignment"]),"icon-size":new Mt(we.layout_symbol["icon-size"]),"icon-text-fit":new vt(we.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new vt(we.layout_symbol["icon-text-fit-padding"]),"icon-image":new Mt(we.layout_symbol["icon-image"]),"icon-rotate":new Mt(we.layout_symbol["icon-rotate"]),"icon-padding":new Mt(we.layout_symbol["icon-padding"]),"icon-keep-upright":new vt(we.layout_symbol["icon-keep-upright"]),"icon-offset":new Mt(we.layout_symbol["icon-offset"]),"icon-anchor":new Mt(we.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new vt(we.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new vt(we.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new vt(we.layout_symbol["text-rotation-alignment"]),"text-field":new Mt(we.layout_symbol["text-field"]),"text-font":new Mt(we.layout_symbol["text-font"]),"text-size":new Mt(we.layout_symbol["text-size"]),"text-max-width":new Mt(we.layout_symbol["text-max-width"]),"text-line-height":new vt(we.layout_symbol["text-line-height"]),"text-letter-spacing":new Mt(we.layout_symbol["text-letter-spacing"]),"text-justify":new Mt(we.layout_symbol["text-justify"]),"text-radial-offset":new Mt(we.layout_symbol["text-radial-offset"]),"text-variable-anchor":new vt(we.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Mt(we.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Mt(we.layout_symbol["text-anchor"]),"text-max-angle":new vt(we.layout_symbol["text-max-angle"]),"text-writing-mode":new vt(we.layout_symbol["text-writing-mode"]),"text-rotate":new Mt(we.layout_symbol["text-rotate"]),"text-padding":new vt(we.layout_symbol["text-padding"]),"text-keep-upright":new vt(we.layout_symbol["text-keep-upright"]),"text-transform":new Mt(we.layout_symbol["text-transform"]),"text-offset":new Mt(we.layout_symbol["text-offset"]),"text-allow-overlap":new vt(we.layout_symbol["text-allow-overlap"]),"text-overlap":new vt(we.layout_symbol["text-overlap"]),"text-ignore-placement":new vt(we.layout_symbol["text-ignore-placement"]),"text-optional":new vt(we.layout_symbol["text-optional"])})}};class IS{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ir,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}mt("FormatSectionOverride",IS,{omit:["defaultValue"]});class bg extends c{constructor(i){super(i,U1)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const g=[];for(const _ of p)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,p,g){const _=this.layout.get(i).evaluate(l,{},p,g),x=this._unevaluatedLayout._values[i];return x.isDataDriven()||Ac(x.value)||!_?_:function(S,k){return k.replace(/{([^{}]+)}/g,(A,L)=>S&&L in S?String(S[L]):"")}(l.properties,_)}createBucket(i){return new ih(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of U1.paint.overridableProperties){if(!bg.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),p=new IS(l),g=new Mc(p,l.property.specification);let _=null;_=l.value.kind==="constant"||l.value.kind==="source"?new ul("source",g):new cl("composite",g,l.value.zoomStops),this.paint._values[i]=new Qo(l.property,_,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&bg.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const p=i.get("text-field"),g=U1.paint.properties[l];let _=!1;const x=S=>{for(const k of S)if(g.overrides&&g.overrides.hasOverride(k))return void(_=!0)};if(p.value.kind==="constant"&&p.value.value instanceof Vi)x(p.value.value.sections);else if(p.value.kind==="source"){const S=A=>{_||(A instanceof Co&&Ar(A.value)===So?x(A.value.sections):A instanceof bc?x(A.sections):A.eachChild(S))},k=p.value;k._styleExpression&&S(k._styleExpression.expression)}return _}}let PS;var Y4={get paint(){return PS=PS||new v({"background-color":new vt(we.paint_background["background-color"]),"background-pattern":new Wc(we.paint_background["background-pattern"]),"background-opacity":new vt(we.paint_background["background-opacity"])})}};class J4 extends c{constructor(i){super(i,Y4)}}let MS;var Q4={get paint(){return MS=MS||new v({"raster-opacity":new vt(we.paint_raster["raster-opacity"]),"raster-hue-rotate":new vt(we.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new vt(we.paint_raster["raster-brightness-min"]),"raster-brightness-max":new vt(we.paint_raster["raster-brightness-max"]),"raster-saturation":new vt(we.paint_raster["raster-saturation"]),"raster-contrast":new vt(we.paint_raster["raster-contrast"]),"raster-resampling":new vt(we.paint_raster["raster-resampling"]),"raster-fade-duration":new vt(we.paint_raster["raster-fade-duration"])})}};class eL extends c{constructor(i){super(i,Q4)}}class tL extends c{constructor(i){super(i,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class nL{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const V1=63710088e-1;class Il{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Il(de(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,p=this.lat*l,g=i.lat*l,_=Math.sin(p)*Math.sin(g)+Math.cos(p)*Math.cos(g)*Math.cos((i.lng-this.lng)*l);return V1*Math.acos(Math.min(_,1))}static convert(i){if(i instanceof Il)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Il(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Il(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const AS=2*Math.PI*V1;function LS(s){return AS*Math.cos(s*Math.PI/180)}function zS(s){return(180+s)/360}function RS(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function DS(s,i){return s/LS(i)}function W1(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class Pp{constructor(i,l,p=0){this.x=+i,this.y=+l,this.z=+p}static fromLngLat(i,l=0){const p=Il.convert(i);return new Pp(zS(p.lng),RS(p.lat),DS(l,p.lat))}toLngLat(){return new Il(360*this.x-180,W1(this.y))}toAltitude(){return this.z*LS(W1(this.y))}meterInMercatorCoordinateUnits(){return 1/AS*(i=W1(this.y),1/Math.cos(i*Math.PI/180));var i}}function $S(s,i,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[s*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class q1{constructor(i,l,p){if(!function(g,_,x){return!(g<0||g>25||x<0||x>=Math.pow(2,g)||_<0||_>=Math.pow(2,g))}(i,l,p))throw new Error(`x=${l}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=p,this.key=Mp(0,i,i,l,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,p){const g=(x=this.y,S=this.z,k=$S(256*(_=this.x),256*(x=Math.pow(2,S)-x-1),S),A=$S(256*(_+1),256*(x+1),S),k[0]+","+k[1]+","+A[0]+","+A[1]);var _,x,S,k,A;const L=function($,N,G){let X,J="";for(let se=$;se>0;se--)X=1<<se-1,J+=(N&X?1:0)+(G&X?2:0);return J}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,L).replace(/{bbox-epsg-3857}/g,g)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new E((i.x*l-this.x)*Lr,(i.y*l-this.y)*Lr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class OS{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Mp(i,l.z,l.z,l.x,l.y)}}class Lo{constructor(i,l,p,g,_){if(i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=l,this.canonical=new q1(p,+g,+_),this.key=Mp(l,i,p,g,_)}clone(){return new Lo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Lo(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Lo(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?Mp(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Mp(this.wrap*+l,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap)return!1;const l=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Lo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,g=2*this.canonical.y;return[new Lo(l,this.wrap,l,p,g),new Lo(l,this.wrap,l,p+1,g),new Lo(l,this.wrap,l,p,g+1),new Lo(l,this.wrap,l,p+1,g+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Lo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Lo(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new OS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Pp(i.x-this.wrap,i.y))}}function Mp(s,i,l,p,g){(s*=2)<0&&(s=-1*s-1);const _=1<<l;return(_*_*s+_*g+p).toString(36)+l.toString(36)+i.toString(36)}mt("CanonicalTileID",q1),mt("OverscaledTileID",Lo,{omit:["posMatrix"]});class BS{constructor(i,l,p,g=1,_=1,x=1,S=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void $e(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const k=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=_,this.blueFactor=x,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<k;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(k,A)]=this.data[this._idx(k-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,k)]=this.data[this._idx(A,k-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(k,-1)]=this.data[this._idx(k-1,0)],this.data[this._idx(-1,k)]=this.data[this._idx(0,k-1)],this.data[this._idx(k,k)]=this.data[this._idx(k-1,k-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<k;A++)for(let L=0;L<k;L++){const $=this.get(A,L);$>this.max&&(this.max=$),$<this.min&&(this.min=$)}}get(i,l){const p=new Uint8Array(this.data.buffer),g=4*this._idx(i,l);return this.unpack(p[g],p[g+1],p[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(i+1)}unpack(i,l,p){return i*this.redFactor+l*this.greenFactor+p*this.blueFactor-this.baseShift}getPixels(){return new Ao({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,_=l*this.dim+this.dim,x=p*this.dim,S=p*this.dim+this.dim;switch(l){case-1:g=_-1;break;case 1:_=g+1}switch(p){case-1:x=S-1;break;case 1:S=x+1}const k=-l*this.dim,A=-p*this.dim;for(let L=x;L<S;L++)for(let $=g;$<_;$++)this.data[this._idx($,L)]=i.data[this._idx($+k,L+A)]}}mt("DEMData",BS);class FS{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const p=i[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class NS{constructor(i,l,p,g,_){this.type="Feature",this._vectorTileFeature=i,i._z=l,i._x=p,i._y=g,this.properties=i.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(i[l]=this[l]);return i}}class jS{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new fl(Lr,16,0),this.grid3D=new fl(Lr,16,0),this.featureIndexArray=new gi,this.promoteId=l}insert(i,l,p,g,_,x){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,g,_);const k=x?this.grid3D:this.grid;for(let A=0;A<l.length;A++){const L=l[A],$=[1/0,1/0,-1/0,-1/0];for(let N=0;N<L.length;N++){const G=L[N];$[0]=Math.min($[0],G.x),$[1]=Math.min($[1],G.y),$[2]=Math.max($[2],G.x),$[3]=Math.max($[3],G.y)}$[0]<Lr&&$[1]<Lr&&$[2]>=0&&$[3]>=0&&k.insert(S,$[0],$[1],$[2],$[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new kl.VectorTile(new z1(this.rawTileData)).layers,this.sourceLayerCoder=new FS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,l,p,g){this.loadVTLayers();const _=i.params||{},x=Lr/i.tileSize/i.scale,S=Kd(_.filter),k=i.queryGeometry,A=i.queryPadding*x,L=VS(k),$=this.grid.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A),N=VS(i.cameraQueryGeometry),G=this.grid3D.query(N.minX-A,N.minY-A,N.maxX+A,N.maxY+A,(se,pe,Te,_e)=>function(ke,ze,qe,lt,Pt){for(const tt of ke)if(ze<=tt.x&&qe<=tt.y&&lt>=tt.x&&Pt>=tt.y)return!0;const st=[new E(ze,qe),new E(ze,Pt),new E(lt,Pt),new E(lt,qe)];if(ke.length>2){for(const tt of st)if(Yc(ke,tt))return!0}for(let tt=0;tt<ke.length-1;tt++)if($3(ke[tt],ke[tt+1],st))return!0;return!1}(i.cameraQueryGeometry,se-A,pe-A,Te+A,_e+A));for(const se of G)$.push(se);$.sort(rL);const X={};let J;for(let se=0;se<$.length;se++){const pe=$[se];if(pe===J)continue;J=pe;const Te=this.featureIndexArray.get(pe);let _e=null;this.loadMatchingFeature(X,Te.bucketIndex,Te.sourceLayerIndex,Te.featureIndex,S,_.layers,_.availableImages,l,p,g,(ke,ze,qe)=>(_e||(_e=Pu(ke)),ze.queryIntersectsFeature(k,ke,qe,_e,this.z,i.transform,x,i.pixelPosMatrix)))}return X}loadMatchingFeature(i,l,p,g,_,x,S,k,A,L,$){const N=this.bucketLayerIDs[l];if(x&&!function(se,pe){for(let Te=0;Te<se.length;Te++)if(pe.indexOf(se[Te])>=0)return!0;return!1}(x,N))return;const G=this.sourceLayerCoder.decode(p),X=this.vtLayers[G].feature(g);if(_.needGeometry){const se=Mu(X,!0);if(!_.filter(new qn(this.tileID.overscaledZ),se,this.tileID.canonical))return}else if(!_.filter(new qn(this.tileID.overscaledZ),X))return;const J=this.getId(X,G);for(let se=0;se<N.length;se++){const pe=N[se];if(x&&x.indexOf(pe)<0)continue;const Te=k[pe];if(!Te)continue;let _e={};J&&L&&(_e=L.getState(Te.sourceLayer||"_geojsonTileLayer",J));const ke=le({},A[pe]);ke.paint=US(ke.paint,Te.paint,X,_e,S),ke.layout=US(ke.layout,Te.layout,X,_e,S);const ze=!$||$(X,Te,_e);if(!ze)continue;const qe=new NS(X,this.z,this.x,this.y,J);qe.layer=ke;let lt=i[pe];lt===void 0&&(lt=i[pe]=[]),lt.push({featureIndex:g,feature:qe,intersectionZ:ze})}}lookupSymbolFeatures(i,l,p,g,_,x,S,k){const A={};this.loadVTLayers();const L=Kd(_);for(const $ of i)this.loadMatchingFeature(A,p,g,$,L,x,S,k,l);return A}hasLayer(i){for(const l of this.bucketLayerIDs)for(const p of l)if(i===p)return!0;return!1}getId(i,l){let p=i.id;return this.promoteId&&(p=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof p=="boolean"&&(p=Number(p))),p}}function US(s,i,l,p,g){return Ae(s,(_,x)=>{const S=i instanceof ku?i.get(x):null;return S&&S.evaluate?S.evaluate(l,p,g):S})}function VS(s){let i=1/0,l=1/0,p=-1/0,g=-1/0;for(const _ of s)i=Math.min(i,_.x),l=Math.min(l,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return{minX:i,minY:l,maxX:p,maxY:g}}function rL(s,i){return i-s}function WS(s,i,l,p,g){const _=[];for(let x=0;x<s.length;x++){const S=s[x];let k;for(let A=0;A<S.length-1;A++){let L=S[A],$=S[A+1];L.x<i&&$.x<i||(L.x<i?L=new E(i,L.y+(i-L.x)/($.x-L.x)*($.y-L.y))._round():$.x<i&&($=new E(i,L.y+(i-L.x)/($.x-L.x)*($.y-L.y))._round()),L.y<l&&$.y<l||(L.y<l?L=new E(L.x+(l-L.y)/($.y-L.y)*($.x-L.x),l)._round():$.y<l&&($=new E(L.x+(l-L.y)/($.y-L.y)*($.x-L.x),l)._round()),L.x>=p&&$.x>=p||(L.x>=p?L=new E(p,L.y+(p-L.x)/($.x-L.x)*($.y-L.y))._round():$.x>=p&&($=new E(p,L.y+(p-L.x)/($.x-L.x)*($.y-L.y))._round()),L.y>=g&&$.y>=g||(L.y>=g?L=new E(L.x+(g-L.y)/($.y-L.y)*($.x-L.x),g)._round():$.y>=g&&($=new E(L.x+(g-L.y)/($.y-L.y)*($.x-L.x),g)._round()),k&&L.equals(k[k.length-1])||(k=[L],_.push(k)),k.push($)))))}}return _}mt("FeatureIndex",jS,{omit:["rawTileData","sourceLayerCoder"]});class Pl extends E{constructor(i,l,p,g){super(i,l),this.angle=p,g!==void 0&&(this.segment=g)}clone(){return new Pl(this.x,this.y,this.angle,this.segment)}}function qS(s,i,l,p,g){if(i.segment===void 0||l===0)return!0;let _=i,x=i.segment+1,S=0;for(;S>-l/2;){if(x--,x<0)return!1;S-=s[x].dist(_),_=s[x]}S+=s[x].dist(s[x+1]),x++;const k=[];let A=0;for(;S<l/2;){const L=s[x],$=s[x+1];if(!$)return!1;let N=s[x-1].angleTo(L)-L.angleTo($);for(N=Math.abs((N+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:S,angleDelta:N}),A+=N;S-k[0].distance>p;)A-=k.shift().angleDelta;if(A>g)return!1;x++,S+=L.dist($)}return!0}function GS(s){let i=0;for(let l=0;l<s.length-1;l++)i+=s[l].dist(s[l+1]);return i}function HS(s,i,l){return s?.6*i*l:0}function ZS(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function iL(s,i,l,p,g,_){const x=HS(l,g,_),S=ZS(l,p)*_;let k=0;const A=GS(s)/2;for(let L=0;L<s.length-1;L++){const $=s[L],N=s[L+1],G=$.dist(N);if(k+G>A){const X=(A-k)/G,J=Ei.number($.x,N.x,X),se=Ei.number($.y,N.y,X),pe=new Pl(J,se,N.angleTo($),L);return pe._round(),!x||qS(s,pe,S,x,i)?pe:void 0}k+=G}}function oL(s,i,l,p,g,_,x,S,k){const A=HS(p,_,x),L=ZS(p,g),$=L*x,N=s[0].x===0||s[0].x===k||s[0].y===0||s[0].y===k;return i-$<i/4&&(i=$+i/4),KS(s,N?i/2*S%i:(L/2+2*_)*x*S%i,i,A,l,$,N,!1,k)}function KS(s,i,l,p,g,_,x,S,k){const A=_/2,L=GS(s);let $=0,N=i-l,G=[];for(let X=0;X<s.length-1;X++){const J=s[X],se=s[X+1],pe=J.dist(se),Te=se.angleTo(J);for(;N+l<$+pe;){N+=l;const _e=(N-$)/pe,ke=Ei.number(J.x,se.x,_e),ze=Ei.number(J.y,se.y,_e);if(ke>=0&&ke<k&&ze>=0&&ze<k&&N-A>=0&&N+A<=L){const qe=new Pl(ke,ze,Te,X);qe._round(),p&&!qS(s,qe,_,p,g)||G.push(qe)}}$+=pe}return S||G.length||x||(G=KS(s,$/2,l,p,g,_,x,!0,k)),G}mt("Anchor",Pl);const oh=Ki;function XS(s,i,l,p){const g=[],_=s.image,x=_.pixelRatio,S=_.paddedRect.w-2*oh,k=_.paddedRect.h-2*oh;let A={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const L=_.stretchX||[[0,S]],$=_.stretchY||[[0,k]],N=(Oe,Ct)=>Oe+Ct[1]-Ct[0],G=L.reduce(N,0),X=$.reduce(N,0),J=S-G,se=k-X;let pe=0,Te=G,_e=0,ke=X,ze=0,qe=J,lt=0,Pt=se;if(_.content&&p){const Oe=_.content,Ct=Oe[2]-Oe[0],xt=Oe[3]-Oe[1];(_.textFitWidth||_.textFitHeight)&&(A=SS(s)),pe=wg(L,0,Oe[0]),_e=wg($,0,Oe[1]),Te=wg(L,Oe[0],Oe[2]),ke=wg($,Oe[1],Oe[3]),ze=Oe[0]-pe,lt=Oe[1]-_e,qe=Ct-Te,Pt=xt-ke}const st=A.x1,tt=A.y1,wt=A.x2-st,gt=A.y2-tt,dt=(Oe,Ct,xt,Bt)=>{const Fn=Sg(Oe.stretch-pe,Te,wt,st),zn=Cg(Oe.fixed-ze,qe,Oe.stretch,G),Vr=Sg(Ct.stretch-_e,ke,gt,tt),ts=Cg(Ct.fixed-lt,Pt,Ct.stretch,X),ai=Sg(xt.stretch-pe,Te,wt,st),Wr=Cg(xt.fixed-ze,qe,xt.stretch,G),Ai=Sg(Bt.stretch-_e,ke,gt,tt),Li=Cg(Bt.fixed-lt,Pt,Bt.stretch,X),zi=new E(Fn,Vr),yr=new E(ai,Vr),qr=new E(ai,Ai),vi=new E(Fn,Ai),li=new E(zn/x,ts/x),Ri=new E(Wr/x,Li/x),ui=i*Math.PI/180;if(ui){const mn=Math.sin(ui),jn=Math.cos(ui),Kn=[jn,-mn,mn,jn];zi._matMult(Kn),yr._matMult(Kn),vi._matMult(Kn),qr._matMult(Kn)}const zo=Oe.stretch+Oe.fixed,Xi=Ct.stretch+Ct.fixed;return{tl:zi,tr:yr,bl:vi,br:qr,tex:{x:_.paddedRect.x+oh+zo,y:_.paddedRect.y+oh+Xi,w:xt.stretch+xt.fixed-zo,h:Bt.stretch+Bt.fixed-Xi},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:li,pixelOffsetBR:Ri,minFontScaleX:qe/x/wt,minFontScaleY:Pt/x/gt,isSDF:l}};if(p&&(_.stretchX||_.stretchY)){const Oe=YS(L,J,G),Ct=YS($,se,X);for(let xt=0;xt<Oe.length-1;xt++){const Bt=Oe[xt],Fn=Oe[xt+1];for(let zn=0;zn<Ct.length-1;zn++)g.push(dt(Bt,Ct[zn],Fn,Ct[zn+1]))}}else g.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:k+1}));return g}function wg(s,i,l){let p=0;for(const g of s)p+=Math.max(i,Math.min(l,g[1]))-Math.max(i,Math.min(l,g[0]));return p}function YS(s,i,l){const p=[{fixed:-oh,stretch:0}];for(const[g,_]of s){const x=p[p.length-1];p.push({fixed:g-x.stretch,stretch:x.stretch}),p.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return p.push({fixed:i+oh,stretch:l}),p}function Sg(s,i,l,p){return s/i*l+p}function Cg(s,i,l,p){return s-i*l/p}class kg{constructor(i,l,p,g,_,x,S,k,A,L){var $;if(this.boxStartIndex=i.length,A){let N=x.top,G=x.bottom;const X=x.collisionPadding;X&&(N-=X[1],G+=X[3]);let J=G-N;J>0&&(J=Math.max(10,J),this.circleDiameter=J)}else{const N=!(($=x.image)===null||$===void 0)&&$.content&&(x.image.textFitWidth||x.image.textFitHeight)?SS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};N.y1=N.y1*S-k[0],N.y2=N.y2*S+k[2],N.x1=N.x1*S-k[3],N.x2=N.x2*S+k[1];const G=x.collisionPadding;if(G&&(N.x1-=G[0]*S,N.y1-=G[1]*S,N.x2+=G[2]*S,N.y2+=G[3]*S),L){const X=new E(N.x1,N.y1),J=new E(N.x2,N.y1),se=new E(N.x1,N.y2),pe=new E(N.x2,N.y2),Te=L*Math.PI/180;X._rotate(Te),J._rotate(Te),se._rotate(Te),pe._rotate(Te),N.x1=Math.min(X.x,J.x,se.x,pe.x),N.x2=Math.max(X.x,J.x,se.x,pe.x),N.y1=Math.min(X.y,J.y,se.y,pe.y),N.y2=Math.max(X.y,J.y,se.y,pe.y)}i.emplaceBack(l.x,l.y,N.x1,N.y1,N.x2,N.y2,p,g,_)}this.boxEndIndex=i.length}}class sL{constructor(i=[],l=(p,g)=>p<g?-1:p>g?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:p}=this,g=l[i];for(;i>0;){const _=i-1>>1,x=l[_];if(p(g,x)>=0)break;l[i]=x,i=_}l[i]=g}_down(i){const{data:l,compare:p}=this,g=this.length>>1,_=l[i];for(;i<g;){let x=1+(i<<1);const S=x+1;if(S<this.length&&p(l[S],l[x])<0&&(x=S),p(l[x],_)>=0)break;l[i]=l[x],i=x}l[i]=_}}function aL(s,i=1,l=!1){let p=1/0,g=1/0,_=-1/0,x=-1/0;const S=s[0];for(let G=0;G<S.length;G++){const X=S[G];(!G||X.x<p)&&(p=X.x),(!G||X.y<g)&&(g=X.y),(!G||X.x>_)&&(_=X.x),(!G||X.y>x)&&(x=X.y)}const k=Math.min(_-p,x-g);let A=k/2;const L=new sL([],lL);if(k===0)return new E(p,g);for(let G=p;G<_;G+=k)for(let X=g;X<x;X+=k)L.push(new sh(G+A,X+A,A,s));let $=function(G){let X=0,J=0,se=0;const pe=G[0];for(let Te=0,_e=pe.length,ke=_e-1;Te<_e;ke=Te++){const ze=pe[Te],qe=pe[ke],lt=ze.x*qe.y-qe.x*ze.y;J+=(ze.x+qe.x)*lt,se+=(ze.y+qe.y)*lt,X+=3*lt}return new sh(J/X,se/X,0,G)}(s),N=L.length;for(;L.length;){const G=L.pop();(G.d>$.d||!$.d)&&($=G,l&&console.log("found best %d after %d probes",Math.round(1e4*G.d)/1e4,N)),G.max-$.d<=i||(A=G.h/2,L.push(new sh(G.p.x-A,G.p.y-A,A,s)),L.push(new sh(G.p.x+A,G.p.y-A,A,s)),L.push(new sh(G.p.x-A,G.p.y+A,A,s)),L.push(new sh(G.p.x+A,G.p.y+A,A,s)),N+=4)}return l&&(console.log(`num probes: ${N}`),console.log(`best distance: ${$.d}`)),$.p}function lL(s,i){return i.max-s.max}function sh(s,i,l,p){this.p=new E(s,i),this.h=l,this.d=function(g,_){let x=!1,S=1/0;for(let k=0;k<_.length;k++){const A=_[k];for(let L=0,$=A.length,N=$-1;L<$;N=L++){const G=A[L],X=A[N];G.y>g.y!=X.y>g.y&&g.x<(X.x-G.x)*(g.y-G.y)/(X.y-G.y)+G.x&&(x=!x),S=Math.min(S,R2(g,G,X))}}return(x?1:-1)*Math.sqrt(S)}(this.p,p),this.max=this.d+this.h*Math.SQRT2}var si;d.aq=void 0,(si=d.aq||(d.aq={}))[si.center=1]="center",si[si.left=2]="left",si[si.right=3]="right",si[si.top=4]="top",si[si.bottom=5]="bottom",si[si["top-left"]=6]="top-left",si[si["top-right"]=7]="top-right",si[si["bottom-left"]=8]="bottom-left",si[si["bottom-right"]=9]="bottom-right";const Ml=7,G1=Number.POSITIVE_INFINITY;function JS(s,i){return i[1]!==G1?function(l,p,g){let _=0,x=0;switch(p=Math.abs(p),g=Math.abs(g),l){case"top-right":case"top-left":case"top":x=g-Ml;break;case"bottom-right":case"bottom-left":case"bottom":x=-g+Ml}switch(l){case"top-right":case"bottom-right":case"right":_=-p;break;case"top-left":case"bottom-left":case"left":_=p}return[_,x]}(s,i[0],i[1]):function(l,p){let g=0,_=0;p<0&&(p=0);const x=p/Math.SQRT2;switch(l){case"top-right":case"top-left":_=x-Ml;break;case"bottom-right":case"bottom-left":_=-x+Ml;break;case"bottom":_=-p+Ml;break;case"top":_=p-Ml}switch(l){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=p;break;case"right":g=-p}return[g,_]}(s,i[0])}function QS(s,i,l){var p;const g=s.layout,_=(p=g.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(i,{},l);if(_){const S=_.values,k=[];for(let A=0;A<S.length;A+=2){const L=k[A]=S[A],$=S[A+1].map(N=>N*Or);L.startsWith("top")?$[1]-=Ml:L.startsWith("bottom")&&($[1]+=Ml),k[A+1]=$}return new ao(k)}const x=g.get("text-variable-anchor");if(x){let S;S=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[g.get("text-radial-offset").evaluate(i,{},l)*Or,G1]:g.get("text-offset").evaluate(i,{},l).map(A=>A*Or);const k=[];for(const A of x)k.push(A,JS(A,S));return new ao(k)}return null}function H1(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uL(s,i,l,p,g,_,x,S,k,A,L){let $=_.textMaxSize.evaluate(i,{});$===void 0&&($=x);const N=s.layers[0].layout,G=N.get("icon-offset").evaluate(i,{},L),X=tC(l.horizontal),J=x/24,se=s.tilePixelRatio*J,pe=s.tilePixelRatio*$/24,Te=s.tilePixelRatio*S,_e=s.tilePixelRatio*N.get("symbol-spacing"),ke=N.get("text-padding")*s.tilePixelRatio,ze=function(Oe,Ct,xt,Bt=1){const Fn=Oe.get("icon-padding").evaluate(Ct,{},xt),zn=Fn&&Fn.values;return[zn[0]*Bt,zn[1]*Bt,zn[2]*Bt,zn[3]*Bt]}(N,i,L,s.tilePixelRatio),qe=N.get("text-max-angle")/180*Math.PI,lt=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",Pt=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",st=N.get("symbol-placement"),tt=_e/2,wt=N.get("icon-text-fit");let gt;p&&wt!=="none"&&(s.allowVerticalPlacement&&l.vertical&&(gt=CS(p,l.vertical,wt,N.get("icon-text-fit-padding"),G,J)),X&&(p=CS(p,X,wt,N.get("icon-text-fit-padding"),G,J)));const dt=(Oe,Ct)=>{Ct.x<0||Ct.x>=Lr||Ct.y<0||Ct.y>=Lr||function(xt,Bt,Fn,zn,Vr,ts,ai,Wr,Ai,Li,zi,yr,qr,vi,li,Ri,ui,zo,Xi,mn,jn,Kn,mo,ar,ah){const Gs=xt.addToLineVertexArray(Bt,Fn);let Hs,ns,Ro,Yr,Pa=0,zp=0,oC=0,sC=0,t_=-1,n_=-1;const Ma={};let aC=Hc("");if(xt.allowVerticalPlacement&&zn.vertical){const _i=Wr.layout.get("text-rotate").evaluate(jn,{},ar)+90;Ro=new kg(Ai,Bt,Li,zi,yr,zn.vertical,qr,vi,li,_i),ai&&(Yr=new kg(Ai,Bt,Li,zi,yr,ai,ui,zo,li,_i))}if(Vr){const _i=Wr.layout.get("icon-rotate").evaluate(jn,{}),Do=Wr.layout.get("icon-text-fit")!=="none",Lu=XS(Vr,_i,mo,Do),Ts=ai?XS(ai,_i,mo,Do):void 0;ns=new kg(Ai,Bt,Li,zi,yr,Vr,ui,zo,!1,_i),Pa=4*Lu.length;const zu=xt.iconSizeData;let Zs=null;zu.kind==="source"?(Zs=[qs*Wr.layout.get("icon-size").evaluate(jn,{})],Zs[0]>El&&$e(`${xt.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)):zu.kind==="composite"&&(Zs=[qs*Kn.compositeIconSizes[0].evaluate(jn,{},ar),qs*Kn.compositeIconSizes[1].evaluate(jn,{},ar)],(Zs[0]>El||Zs[1]>El)&&$e(`${xt.layerIds[0]}: Value for "icon-size" is >= ${Ip}. Reduce your "icon-size".`)),xt.addSymbols(xt.icon,Lu,Zs,mn,Xi,jn,d.ah.none,Bt,Gs.lineStartIndex,Gs.lineLength,-1,ar),t_=xt.icon.placedSymbolArray.length-1,Ts&&(zp=4*Ts.length,xt.addSymbols(xt.icon,Ts,Zs,mn,Xi,jn,d.ah.vertical,Bt,Gs.lineStartIndex,Gs.lineLength,-1,ar),n_=xt.icon.placedSymbolArray.length-1)}const lC=Object.keys(zn.horizontal);for(const _i of lC){const Do=zn.horizontal[_i];if(!Hs){aC=Hc(Do.text);const Ts=Wr.layout.get("text-rotate").evaluate(jn,{},ar);Hs=new kg(Ai,Bt,Li,zi,yr,Do,qr,vi,li,Ts)}const Lu=Do.positionedLines.length===1;if(oC+=eC(xt,Bt,Do,ts,Wr,li,jn,Ri,Gs,zn.vertical?d.ah.horizontal:d.ah.horizontalOnly,Lu?lC:[_i],Ma,t_,Kn,ar),Lu)break}zn.vertical&&(sC+=eC(xt,Bt,zn.vertical,ts,Wr,li,jn,Ri,Gs,d.ah.vertical,["vertical"],Ma,n_,Kn,ar));const dL=Hs?Hs.boxStartIndex:xt.collisionBoxArray.length,pL=Hs?Hs.boxEndIndex:xt.collisionBoxArray.length,fL=Ro?Ro.boxStartIndex:xt.collisionBoxArray.length,mL=Ro?Ro.boxEndIndex:xt.collisionBoxArray.length,gL=ns?ns.boxStartIndex:xt.collisionBoxArray.length,yL=ns?ns.boxEndIndex:xt.collisionBoxArray.length,vL=Yr?Yr.boxStartIndex:xt.collisionBoxArray.length,_L=Yr?Yr.boxEndIndex:xt.collisionBoxArray.length;let ks=-1;const Eg=(_i,Do)=>_i&&_i.circleDiameter?Math.max(_i.circleDiameter,Do):Do;ks=Eg(Hs,ks),ks=Eg(Ro,ks),ks=Eg(ns,ks),ks=Eg(Yr,ks);const uC=ks>-1?1:0;uC&&(ks*=ah/Or),xt.glyphOffsetArray.length>=ih.MAX_GLYPHS&&$e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),jn.sortKey!==void 0&&xt.addToSortKeyRanges(xt.symbolInstances.length,jn.sortKey);const xL=QS(Wr,jn,ar),[bL,wL]=function(_i,Do){const Lu=_i.length,Ts=Do==null?void 0:Do.values;if((Ts==null?void 0:Ts.length)>0)for(let zu=0;zu<Ts.length;zu+=2){const Zs=Ts[zu+1];_i.emplaceBack(d.aq[Ts[zu]],Zs[0],Zs[1])}return[Lu,_i.length]}(xt.textAnchorOffsets,xL);xt.symbolInstances.emplaceBack(Bt.x,Bt.y,Ma.right>=0?Ma.right:-1,Ma.center>=0?Ma.center:-1,Ma.left>=0?Ma.left:-1,Ma.vertical||-1,t_,n_,aC,dL,pL,fL,mL,gL,yL,vL,_L,Li,oC,sC,Pa,zp,uC,0,qr,ks,bL,wL)}(s,Ct,Oe,l,p,g,gt,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,se,[ke,ke,ke,ke],lt,k,Te,ze,Pt,G,i,_,A,L,x)};if(st==="line")for(const Oe of WS(i.geometry,0,0,Lr,Lr)){const Ct=oL(Oe,_e,qe,l.vertical||X,p,24,pe,s.overscaling,Lr);for(const xt of Ct)X&&cL(s,X.text,tt,xt)||dt(Oe,xt)}else if(st==="line-center"){for(const Oe of i.geometry)if(Oe.length>1){const Ct=iL(Oe,qe,l.vertical||X,p,24,pe);Ct&&dt(Oe,Ct)}}else if(i.type==="Polygon")for(const Oe of Sc(i.geometry,0)){const Ct=aL(Oe,16);dt(Oe[0],new Pl(Ct.x,Ct.y,0))}else if(i.type==="LineString")for(const Oe of i.geometry)dt(Oe,new Pl(Oe[0].x,Oe[0].y,0));else if(i.type==="Point")for(const Oe of i.geometry)for(const Ct of Oe)dt([Ct],new Pl(Ct.x,Ct.y,0))}function eC(s,i,l,p,g,_,x,S,k,A,L,$,N,G,X){const J=function(Te,_e,ke,ze,qe,lt,Pt,st){const tt=ze.layout.get("text-rotate").evaluate(lt,{})*Math.PI/180,wt=[];for(const gt of _e.positionedLines)for(const dt of gt.positionedGlyphs){if(!dt.rect)continue;const Oe=dt.rect||{};let Ct=gS+1,xt=!0,Bt=1,Fn=0;const zn=(qe||st)&&dt.vertical,Vr=dt.metrics.advance*dt.scale/2;if(st&&_e.verticalizable&&(Fn=gt.lineOffset/2-(dt.imageName?-(Or-dt.metrics.width*dt.scale)/2:(dt.scale-1)*Or)),dt.imageName){const mn=Pt[dt.imageName];xt=mn.sdf,Bt=mn.pixelRatio,Ct=Ki/Bt}const ts=qe?[dt.x+Vr,dt.y]:[0,0];let ai=qe?[0,0]:[dt.x+Vr+ke[0],dt.y+ke[1]-Fn],Wr=[0,0];zn&&(Wr=ai,ai=[0,0]);const Ai=dt.metrics.isDoubleResolution?2:1,Li=(dt.metrics.left-Ct)*dt.scale-Vr+ai[0],zi=(-dt.metrics.top-Ct)*dt.scale+ai[1],yr=Li+Oe.w/Ai*dt.scale/Bt,qr=zi+Oe.h/Ai*dt.scale/Bt,vi=new E(Li,zi),li=new E(yr,zi),Ri=new E(Li,qr),ui=new E(yr,qr);if(zn){const mn=new E(-Vr,Vr-Tp),jn=-Math.PI/2,Kn=Or/2-Vr,mo=new E(5-Tp-Kn,-(dt.imageName?Kn:0)),ar=new E(...Wr);vi._rotateAround(jn,mn)._add(mo)._add(ar),li._rotateAround(jn,mn)._add(mo)._add(ar),Ri._rotateAround(jn,mn)._add(mo)._add(ar),ui._rotateAround(jn,mn)._add(mo)._add(ar)}if(tt){const mn=Math.sin(tt),jn=Math.cos(tt),Kn=[jn,-mn,mn,jn];vi._matMult(Kn),li._matMult(Kn),Ri._matMult(Kn),ui._matMult(Kn)}const zo=new E(0,0),Xi=new E(0,0);wt.push({tl:vi,tr:li,bl:Ri,br:ui,tex:Oe,writingMode:_e.writingMode,glyphOffset:ts,sectionIndex:dt.sectionIndex,isSDF:xt,pixelOffsetTL:zo,pixelOffsetBR:Xi,minFontScaleX:0,minFontScaleY:0})}return wt}(0,l,S,g,_,x,p,s.allowVerticalPlacement),se=s.textSizeData;let pe=null;se.kind==="source"?(pe=[qs*g.layout.get("text-size").evaluate(x,{})],pe[0]>El&&$e(`${s.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)):se.kind==="composite"&&(pe=[qs*G.compositeTextSizes[0].evaluate(x,{},X),qs*G.compositeTextSizes[1].evaluate(x,{},X)],(pe[0]>El||pe[1]>El)&&$e(`${s.layerIds[0]}: Value for "text-size" is >= ${Ip}. Reduce your "text-size".`)),s.addSymbols(s.text,J,pe,S,_,x,A,i,k.lineStartIndex,k.lineLength,N,X);for(const Te of L)$[Te]=s.text.placedSymbolArray.length-1;return 4*J.length}function tC(s){for(const i in s)return s[i];return null}function cL(s,i,l,p){const g=s.compareText;if(i in g){const _=g[i];for(let x=_.length-1;x>=0;x--)if(p.dist(_[x])<l)return!0}else g[i]=[];return g[i].push(p),!1}const nC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Z1{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const g=p>>4;if(g!==1)throw new Error(`Got v${g} data when expected v1.`);const _=nC[15&p];if(!_)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(i,2,1),[S]=new Uint32Array(i,4,1);return new Z1(S,x,_,i)}constructor(i,l=64,p=Float64Array,g){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const _=nC.indexOf(this.ArrayType),x=2*i*this.ArrayType.BYTES_PER_ELEMENT,S=i*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-S%8)%8;if(_<0)throw new Error(`Unexpected typed array class: ${p}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+k,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+x+S+k),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+S+k,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+_]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=l,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return K1(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,p,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:x,nodeSize:S}=this,k=[0,_.length-1,0],A=[];for(;k.length;){const L=k.pop()||0,$=k.pop()||0,N=k.pop()||0;if($-N<=S){for(let se=N;se<=$;se++){const pe=x[2*se],Te=x[2*se+1];pe>=i&&pe<=p&&Te>=l&&Te<=g&&A.push(_[se])}continue}const G=N+$>>1,X=x[2*G],J=x[2*G+1];X>=i&&X<=p&&J>=l&&J<=g&&A.push(_[G]),(L===0?i<=X:l<=J)&&(k.push(N),k.push(G-1),k.push(1-L)),(L===0?p>=X:g>=J)&&(k.push(G+1),k.push($),k.push(1-L))}return A}within(i,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:_,nodeSize:x}=this,S=[0,g.length-1,0],k=[],A=p*p;for(;S.length;){const L=S.pop()||0,$=S.pop()||0,N=S.pop()||0;if($-N<=x){for(let se=N;se<=$;se++)iC(_[2*se],_[2*se+1],i,l)<=A&&k.push(g[se]);continue}const G=N+$>>1,X=_[2*G],J=_[2*G+1];iC(X,J,i,l)<=A&&k.push(g[G]),(L===0?i-p<=X:l-p<=J)&&(S.push(N),S.push(G-1),S.push(1-L)),(L===0?i+p>=X:l+p>=J)&&(S.push(G+1),S.push($),S.push(1-L))}return k}}function K1(s,i,l,p,g,_){if(g-p<=l)return;const x=p+g>>1;rC(s,i,x,p,g,_),K1(s,i,l,p,x-1,1-_),K1(s,i,l,x+1,g,1-_)}function rC(s,i,l,p,g,_){for(;g>p;){if(g-p>600){const A=g-p+1,L=l-p+1,$=Math.log(A),N=.5*Math.exp(2*$/3),G=.5*Math.sqrt($*N*(A-N)/A)*(L-A/2<0?-1:1);rC(s,i,l,Math.max(p,Math.floor(l-L*N/A+G)),Math.min(g,Math.floor(l+(A-L)*N/A+G)),_)}const x=i[2*l+_];let S=p,k=g;for(Ap(s,i,p,l),i[2*g+_]>x&&Ap(s,i,p,g);S<k;){for(Ap(s,i,S,k),S++,k--;i[2*S+_]<x;)S++;for(;i[2*k+_]>x;)k--}i[2*p+_]===x?Ap(s,i,p,k):(k++,Ap(s,i,k,g)),k<=l&&(p=k+1),l<=k&&(g=k-1)}}function Ap(s,i,l,p){X1(s,l,p),X1(i,2*l,2*p),X1(i,2*l+1,2*p+1)}function X1(s,i,l){const p=s[i];s[i]=s[l],s[l]=p}function iC(s,i,l,p){const g=s-l,_=i-p;return g*g+_*_}var Y1;d.bg=void 0,(Y1=d.bg||(d.bg={})).create="create",Y1.load="load",Y1.fullLoad="fullLoad";let Tg=null,Lp=[];const J1=1e3/60,Q1="loadTime",e_="fullLoadTime",hL={mark(s){performance.mark(s)},frame(s){const i=s;Tg!=null&&Lp.push(i-Tg),Tg=i},clearMetrics(){Tg=null,Lp=[],performance.clearMeasures(Q1),performance.clearMeasures(e_);for(const s in d.bg)performance.clearMarks(d.bg[s])},getPerformanceMetrics(){performance.measure(Q1,d.bg.create,d.bg.load),performance.measure(e_,d.bg.create,d.bg.fullLoad);const s=performance.getEntriesByName(Q1)[0].duration,i=performance.getEntriesByName(e_)[0].duration,l=Lp.length,p=1/(Lp.reduce((_,x)=>_+x,0)/l/1e3),g=Lp.filter(_=>_>J1).reduce((_,x)=>_+(x-J1)/J1,0);return{loadTime:s,fullLoadTime:i,fps:p,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};d.$=class extends O{},d.A=Jc,d.B=l1,d.C=function(s){if(We==null){const i=s.navigator?s.navigator.userAgent:null;We=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return We},d.D=vt,d.E=zt,d.F=class{constructor(s,i){this.target=s,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new nL(()=>this.process()),this.subscription=function(l,p,g,_){return l.addEventListener(p,g,!1),{unsubscribe:()=>{l.removeEventListener(p,g,!1)}}}(this.target,"message",l=>this.receive(l)),this.globalScope=De(self)?s:window}registerMessageHandler(s,i){this.messageHandlers[s]=i}sendAsync(s,i){return new Promise((l,p)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[g]={resolve:l,reject:p},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[g];const S={id:g,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)},{once:!0});const _=[],x=Object.assign(Object.assign({},s),{id:g,sourceMapId:this.mapId,origin:location.origin,data:ml(s.data,_)});this.target.postMessage(x,{transfer:_})})}receive(s){const i=s.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const p=this.abortControllers[l];return delete this.abortControllers[l],void(p&&p.abort())}if(De(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),i=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(s,i)}processTask(s,i){return u(this,void 0,void 0,function*(){if(i.type==="<response>"){const g=this.resolveRejects[s];return delete this.resolveRejects[s],g?void(i.error?g.reject(gl(i.error)):g.resolve(gl(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=gl(i.data),p=new AbortController;this.abortControllers[s]=p;try{const g=yield this.messageHandlers[i.type](i.sourceMapId,l,p);this.completeTask(s,null,g)}catch(g){this.completeTask(s,g)}})}completeTask(s,i,l){const p=[];delete this.abortControllers[s];const g={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?ml(i):null,data:ml(l,p)};this.target.postMessage(g,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.G=un,d.H=function(){var s=new Jc(16);return Jc!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},d.I=D1,d.J=function(s,i,l){var p,g,_,x,S,k,A,L,$,N,G,X,J=l[0],se=l[1],pe=l[2];return i===s?(s[12]=i[0]*J+i[4]*se+i[8]*pe+i[12],s[13]=i[1]*J+i[5]*se+i[9]*pe+i[13],s[14]=i[2]*J+i[6]*se+i[10]*pe+i[14],s[15]=i[3]*J+i[7]*se+i[11]*pe+i[15]):(g=i[1],_=i[2],x=i[3],S=i[4],k=i[5],A=i[6],L=i[7],$=i[8],N=i[9],G=i[10],X=i[11],s[0]=p=i[0],s[1]=g,s[2]=_,s[3]=x,s[4]=S,s[5]=k,s[6]=A,s[7]=L,s[8]=$,s[9]=N,s[10]=G,s[11]=X,s[12]=p*J+S*se+$*pe+i[12],s[13]=g*J+k*se+N*pe+i[13],s[14]=_*J+A*se+G*pe+i[14],s[15]=x*J+L*se+X*pe+i[15]),s},d.K=function(s,i,l){var p=l[0],g=l[1],_=l[2];return s[0]=i[0]*p,s[1]=i[1]*p,s[2]=i[2]*p,s[3]=i[3]*p,s[4]=i[4]*g,s[5]=i[5]*g,s[6]=i[6]*g,s[7]=i[7]*g,s[8]=i[8]*_,s[9]=i[9]*_,s[10]=i[10]*_,s[11]=i[11]*_,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},d.L=B2,d.M=function(s,i){const l={};for(let p=0;p<i.length;p++){const g=i[p];g in s&&(l[g]=s[g])}return l},d.N=Il,d.O=zS,d.P=E,d.Q=RS,d.R=Ao,d.S=Lo,d.T=Uc,d.U=D,d.V=j,d.W=Ye,d.X=Lr,d.Y=C,d.Z=Pp,d._=u,d.a=Lt,d.a$=function(s,i){var l=s[0],p=s[1],g=s[2],_=s[3],x=s[4],S=s[5],k=s[6],A=s[7],L=s[8],$=s[9],N=s[10],G=s[11],X=s[12],J=s[13],se=s[14],pe=s[15],Te=i[0],_e=i[1],ke=i[2],ze=i[3],qe=i[4],lt=i[5],Pt=i[6],st=i[7],tt=i[8],wt=i[9],gt=i[10],dt=i[11],Oe=i[12],Ct=i[13],xt=i[14],Bt=i[15];return Math.abs(l-Te)<=Mi*Math.max(1,Math.abs(l),Math.abs(Te))&&Math.abs(p-_e)<=Mi*Math.max(1,Math.abs(p),Math.abs(_e))&&Math.abs(g-ke)<=Mi*Math.max(1,Math.abs(g),Math.abs(ke))&&Math.abs(_-ze)<=Mi*Math.max(1,Math.abs(_),Math.abs(ze))&&Math.abs(x-qe)<=Mi*Math.max(1,Math.abs(x),Math.abs(qe))&&Math.abs(S-lt)<=Mi*Math.max(1,Math.abs(S),Math.abs(lt))&&Math.abs(k-Pt)<=Mi*Math.max(1,Math.abs(k),Math.abs(Pt))&&Math.abs(A-st)<=Mi*Math.max(1,Math.abs(A),Math.abs(st))&&Math.abs(L-tt)<=Mi*Math.max(1,Math.abs(L),Math.abs(tt))&&Math.abs($-wt)<=Mi*Math.max(1,Math.abs($),Math.abs(wt))&&Math.abs(N-gt)<=Mi*Math.max(1,Math.abs(N),Math.abs(gt))&&Math.abs(G-dt)<=Mi*Math.max(1,Math.abs(G),Math.abs(dt))&&Math.abs(X-Oe)<=Mi*Math.max(1,Math.abs(X),Math.abs(Oe))&&Math.abs(J-Ct)<=Mi*Math.max(1,Math.abs(J),Math.abs(Ct))&&Math.abs(se-xt)<=Mi*Math.max(1,Math.abs(se),Math.abs(xt))&&Math.abs(pe-Bt)<=Mi*Math.max(1,Math.abs(pe),Math.abs(Bt))},d.a0=rn,d.a1=q1,d.a2=Ge,d.a3=s=>{const i=window.document.createElement("video");return i.muted=!0,new Promise(l=>{i.onloadstart=()=>{l(i)};for(const p of s){const g=window.document.createElement("source");jt(p)||(i.crossOrigin="Anonymous"),g.src=p,i.appendChild(g)}})},d.a4=function(){return ge++},d.a5=at,d.a6=ih,d.a7=Kd,d.a8=Mu,d.a9=NS,d.aA=function(s){if(s.type==="custom")return new tL(s);switch(s.type){case"background":return new J4(s);case"circle":return new F3(s);case"fill":return new n4(s);case"fill-extrusion":return new y4(s);case"heatmap":return new j3(s);case"hillshade":return new V3(s);case"line":return new k4(s);case"raster":return new eL(s);case"symbol":return new bg(s)}},d.aB=Ee,d.aC=function(s,i){if(!s)return[{command:"setStyle",args:[i]}];let l=[];try{if(!ht(s.version,i.version))return[{command:"setStyle",args:[i]}];ht(s.center,i.center)||l.push({command:"setCenter",args:[i.center]}),ht(s.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),ht(s.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),ht(s.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),ht(s.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),ht(s.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),ht(s.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),ht(s.light,i.light)||l.push({command:"setLight",args:[i.light]}),ht(s.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),ht(s.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),ht(s.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const p={},g=[];(function(x,S,k,A){let L;for(L in S=S||{},x=x||{})Object.prototype.hasOwnProperty.call(x,L)&&(Object.prototype.hasOwnProperty.call(S,L)||Qn(L,k,A));for(L in S)Object.prototype.hasOwnProperty.call(S,L)&&(Object.prototype.hasOwnProperty.call(x,L)?ht(x[L],S[L])||(x[L].type==="geojson"&&S[L].type==="geojson"&&Mn(x,S,L)?Vt(k,{command:"setGeoJSONSourceData",args:[L,S[L].data]}):bt(L,S,k,A)):an(L,S,k))})(s.sources,i.sources,g,p);const _=[];s.layers&&s.layers.forEach(x=>{"source"in x&&p[x.source]?l.push({command:"removeLayer",args:[x.id]}):_.push(x)}),l=l.concat(g),function(x,S,k){S=S||[];const A=(x=x||[]).map(Zr),L=S.map(Zr),$=x.reduce(fr,{}),N=S.reduce(fr,{}),G=A.slice(),X=Object.create(null);let J,se,pe,Te,_e;for(let ke=0,ze=0;ke<A.length;ke++)J=A[ke],Object.prototype.hasOwnProperty.call(N,J)?ze++:(Vt(k,{command:"removeLayer",args:[J]}),G.splice(G.indexOf(J,ze),1));for(let ke=0,ze=0;ke<L.length;ke++)J=L[L.length-1-ke],G[G.length-1-ke]!==J&&(Object.prototype.hasOwnProperty.call($,J)?(Vt(k,{command:"removeLayer",args:[J]}),G.splice(G.lastIndexOf(J,G.length-ze),1)):ze++,Te=G[G.length-ke],Vt(k,{command:"addLayer",args:[N[J],Te]}),G.splice(G.length-ke,0,J),X[J]=!0);for(let ke=0;ke<L.length;ke++)if(J=L[ke],se=$[J],pe=N[J],!X[J]&&!ht(se,pe))if(ht(se.source,pe.source)&&ht(se["source-layer"],pe["source-layer"])&&ht(se.type,pe.type)){for(_e in pr(se.layout,pe.layout,k,J,null,"setLayoutProperty"),pr(se.paint,pe.paint,k,J,null,"setPaintProperty"),ht(se.filter,pe.filter)||Vt(k,{command:"setFilter",args:[J,pe.filter]}),ht(se.minzoom,pe.minzoom)&&ht(se.maxzoom,pe.maxzoom)||Vt(k,{command:"setLayerZoomRange",args:[J,pe.minzoom,pe.maxzoom]}),se)Object.prototype.hasOwnProperty.call(se,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?pr(se[_e],pe[_e],k,J,_e.slice(6),"setPaintProperty"):ht(se[_e],pe[_e])||Vt(k,{command:"setLayerProperty",args:[J,_e,pe[_e]]}));for(_e in pe)Object.prototype.hasOwnProperty.call(pe,_e)&&!Object.prototype.hasOwnProperty.call(se,_e)&&_e!=="layout"&&_e!=="paint"&&_e!=="filter"&&_e!=="metadata"&&_e!=="minzoom"&&_e!=="maxzoom"&&(_e.indexOf("paint.")===0?pr(se[_e],pe[_e],k,J,_e.slice(6),"setPaintProperty"):ht(se[_e],pe[_e])||Vt(k,{command:"setLayerProperty",args:[J,_e,pe[_e]]}))}else Vt(k,{command:"removeLayer",args:[J]}),Te=G[G.lastIndexOf(J)+1],Vt(k,{command:"addLayer",args:[pe,Te]})}(_,i.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:"setStyle",args:[i]}]}return l},d.aD=function(s){const i=[],l=s.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.aE=function s(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let p=0;p<i.length;p++)if(!s(i[p],l[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const p in i)if(!s(i[p],l[p]))return!1;return!0}return i===l},d.aF=Ae,d.aG=H,d.aH=class extends Eu{constructor(s,i){super(s,i),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},d.aI=lg,d.aJ=class extends Eu{constructor(s,i){super(s,i),this.current=A3}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let i=1;i<16;i++)if(s[i]!==this.current[i]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},d.aK=E2,d.aL=I2,d.aM=En,d.aN=class extends Eu{constructor(s,i){super(s,i),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},d.aO=class extends Eu{constructor(s,i){super(s,i),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},d.aP=function(s,i,l,p,g,_,x){var S=1/(i-l),k=1/(p-g),A=1/(_-x);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*k,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(i+l)*S,s[13]=(g+p)*k,s[14]=(x+_)*A,s[15]=1,s},d.aQ=B3,d.aR=class extends xe{},d.aS=P4,d.aT=class extends Pe{},d.aU=S1,d.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},d.aW=V2,d.aX=ii,d.aY=Mo,d.aZ=class extends _t{},d.a_=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]&&s[4]===i[4]&&s[5]===i[5]&&s[6]===i[6]&&s[7]===i[7]&&s[8]===i[8]&&s[9]===i[9]&&s[10]===i[10]&&s[11]===i[11]&&s[12]===i[12]&&s[13]===i[13]&&s[14]===i[14]&&s[15]===i[15]},d.aa=function(s){const i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,p,g,_)=>{const x=g||_;return i[p]=!x||x.toLowerCase(),""}),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.ab=function(s,i){const l=[];for(const p in s)p in i||l.push(p);return l},d.ac=ce,d.ad=function(s,i,l){var p=Math.sin(l),g=Math.cos(l),_=i[0],x=i[1],S=i[2],k=i[3],A=i[4],L=i[5],$=i[6],N=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=_*g+A*p,s[1]=x*g+L*p,s[2]=S*g+$*p,s[3]=k*g+N*p,s[4]=A*g-_*p,s[5]=L*g-x*p,s[6]=$*g-S*p,s[7]=N*g-k*p,s},d.ae=function(s){var i=new Jc(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},d.af=dg,d.ag=function(s,i){let l=0,p=0;if(s.kind==="constant")p=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=s,S=g?ce(Ii.interpolationFactor(g,i,_,x),0,1):0;s.kind==="camera"?p=Ei.number(s.minSize,s.maxSize,S):l=S}return{uSizeT:l,uSize:p}},d.ai=function(s,{uSize:i,uSizeT:l},{lowerSize:p,upperSize:g}){return s.kind==="source"?p/qs:s.kind==="composite"?Ei.number(p/qs,g/qs,l):i},d.aj=F1,d.ak=function(s,i,l,p){const g=i.y-s.y,_=i.x-s.x,x=p.y-l.y,S=p.x-l.x,k=x*_-S*g;if(k===0)return null;const A=(S*(s.y-l.y)-x*(s.x-l.x))/k;return new E(s.x+A*_,s.y+A*g)},d.al=WS,d.am=L2,d.an=x1,d.ao=function(s){let i=1/0,l=1/0,p=-1/0,g=-1/0;for(const _ of s)i=Math.min(i,_.x),l=Math.min(l,_.y),p=Math.max(p,_.x),g=Math.max(g,_.y);return[i,l,p,g]},d.ap=Or,d.ar=B1,d.as=function(s,i){var l=i[0],p=i[1],g=i[2],_=i[3],x=i[4],S=i[5],k=i[6],A=i[7],L=i[8],$=i[9],N=i[10],G=i[11],X=i[12],J=i[13],se=i[14],pe=i[15],Te=l*S-p*x,_e=l*k-g*x,ke=l*A-_*x,ze=p*k-g*S,qe=p*A-_*S,lt=g*A-_*k,Pt=L*J-$*X,st=L*se-N*X,tt=L*pe-G*X,wt=$*se-N*J,gt=$*pe-G*J,dt=N*pe-G*se,Oe=Te*dt-_e*gt+ke*wt+ze*tt-qe*st+lt*Pt;return Oe?(s[0]=(S*dt-k*gt+A*wt)*(Oe=1/Oe),s[1]=(g*gt-p*dt-_*wt)*Oe,s[2]=(J*lt-se*qe+pe*ze)*Oe,s[3]=(N*qe-$*lt-G*ze)*Oe,s[4]=(k*tt-x*dt-A*st)*Oe,s[5]=(l*dt-g*tt+_*st)*Oe,s[6]=(se*ke-X*lt-pe*_e)*Oe,s[7]=(L*lt-N*ke+G*_e)*Oe,s[8]=(x*gt-S*tt+A*Pt)*Oe,s[9]=(p*tt-l*gt-_*Pt)*Oe,s[10]=(X*qe-J*ke+pe*Te)*Oe,s[11]=($*ke-L*qe-G*Te)*Oe,s[12]=(S*st-x*wt-k*Pt)*Oe,s[13]=(l*wt-p*st+g*Pt)*Oe,s[14]=(J*_e-X*ze-se*Te)*Oe,s[15]=(L*ze-$*_e+N*Te)*Oe,s):null},d.at=H1,d.au=O1,d.av=Z1,d.aw=function(){const s={},i=we.$version;for(const l in we.$root){const p=we.$root[l];if(p.required){let g=null;g=l==="version"?i:p.type==="array"?[]:{},g!=null&&(s[l]=g)}}return s},d.ax=up,d.ay=Bn,d.az=function(s){s=s.slice();const i=Object.create(null);for(let l=0;l<s.length;l++)i[s[l].id]=s[l];for(let l=0;l<s.length;l++)"ref"in s[l]&&(s[l]=pn(s[l],i[s[l].ref]));return s},d.b=ut,d.b0=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},d.b1=function(s,i,l){return s[0]=i[0]*l[0],s[1]=i[1]*l[1],s[2]=i[2]*l[2],s[3]=i[3]*l[3],s},d.b2=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3]*i[3]},d.b3=de,d.b4=OS,d.b5=DS,d.b6=function(s,i,l,p,g){var _,x=1/Math.tan(i/2);return s[0]=x/l,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=x,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,g!=null&&g!==1/0?(s[10]=(g+p)*(_=1/(p-g)),s[14]=2*g*p*_):(s[10]=-1,s[14]=-2*p),s},d.b7=function(s,i,l){var p=Math.sin(l),g=Math.cos(l),_=i[4],x=i[5],S=i[6],k=i[7],A=i[8],L=i[9],$=i[10],N=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=_*g+A*p,s[5]=x*g+L*p,s[6]=S*g+$*p,s[7]=k*g+N*p,s[8]=A*g-_*p,s[9]=L*g-x*p,s[10]=$*g-S*p,s[11]=N*g-k*p,s},d.b8=V,d.b9=Y,d.bA=uS,d.bB=function(s){return s.message===At},d.bC=ll,d.bD=Hi,d.ba=function(s){return s*Math.PI/180},d.bb=function(s,i){const{x:l,y:p}=Pp.fromLngLat(i);return!(s<0||s>25||p<0||p>=1||l<0||l>=1)},d.bc=function(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},d.bd=class extends z{},d.be=V1,d.bf=hL,d.bh=en,d.bi=function(s,i){Lt.REGISTERED_PROTOCOLS[s]=i},d.bj=function(s){delete Lt.REGISTERED_PROTOCOLS[s]},d.bk=function(s,i){const l={};for(let g=0;g<s.length;g++){const _=i&&i[s[g].id]||Xm(s[g]);i&&(i[s[g].id]=_);let x=l[_];x||(x=l[_]=[]),x.push(s[g])}const p=[];for(const g in l)p.push(l[g]);return p},d.bl=mt,d.bm=FS,d.bn=jS,d.bo=vS,d.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Lr/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const i=s.bucket.layers[0],l=i.layout,p=i._unevaluatedLayout._values,g={layoutIconSize:p["icon-size"].possiblyEvaluate(new qn(s.bucket.zoom+1),s.canonical),layoutTextSize:p["text-size"].possiblyEvaluate(new qn(s.bucket.zoom+1),s.canonical),textMaxSize:p["text-size"].possiblyEvaluate(new qn(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.textSizeData;g.compositeTextSizes=[p["text-size"].possiblyEvaluate(new qn(A),s.canonical),p["text-size"].possiblyEvaluate(new qn(L),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:L}=s.bucket.iconSizeData;g.compositeIconSizes=[p["icon-size"].possiblyEvaluate(new qn(A),s.canonical),p["icon-size"].possiblyEvaluate(new qn(L),s.canonical)]}const _=l.get("text-line-height")*Or,x=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",S=l.get("text-keep-upright"),k=l.get("text-size");for(const A of s.bucket.features){const L=l.get("text-font").evaluate(A,{},s.canonical).join(","),$=k.evaluate(A,{},s.canonical),N=g.layoutTextSize.evaluate(A,{},s.canonical),G=g.layoutIconSize.evaluate(A,{},s.canonical),X={horizontal:{},vertical:void 0},J=A.text;let se,pe=[0,0];if(J){const ke=J.toString(),ze=l.get("text-letter-spacing").evaluate(A,{},s.canonical)*Or,qe=u1(ke)?ze:0,lt=l.get("text-anchor").evaluate(A,{},s.canonical),Pt=QS(i,A,s.canonical);if(!Pt){const gt=l.get("text-radial-offset").evaluate(A,{},s.canonical);pe=gt?JS(lt,[gt*Or,G1]):l.get("text-offset").evaluate(A,{},s.canonical).map(dt=>dt*Or)}let st=x?"center":l.get("text-justify").evaluate(A,{},s.canonical);const tt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(A,{},s.canonical)*Or:1/0,wt=()=>{s.bucket.allowVerticalPlacement&&cp(ke)&&(X.vertical=vg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,lt,"left",qe,pe,d.ah.vertical,!0,N,$))};if(!x&&Pt){const gt=new Set;if(st==="auto")for(let Oe=0;Oe<Pt.values.length;Oe+=2)gt.add(H1(Pt.values[Oe]));else gt.add(st);let dt=!1;for(const Oe of gt)if(!X.horizontal[Oe])if(dt)X.horizontal[Oe]=X.horizontal[0];else{const Ct=vg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,"center",Oe,qe,pe,d.ah.horizontal,!1,N,$);Ct&&(X.horizontal[Oe]=Ct,dt=Ct.positionedLines.length===1)}wt()}else{st==="auto"&&(st=H1(lt));const gt=vg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,lt,st,qe,pe,d.ah.horizontal,!1,N,$);gt&&(X.horizontal[st]=gt),wt(),cp(ke)&&x&&S&&(X.vertical=vg(J,s.glyphMap,s.glyphPositions,s.imagePositions,L,tt,_,lt,st,qe,pe,d.ah.vertical,!1,N,$))}}let Te=!1;if(A.icon&&A.icon.name){const ke=s.imageMap[A.icon.name];ke&&(se=H4(s.imagePositions[A.icon.name],l.get("icon-offset").evaluate(A,{},s.canonical),l.get("icon-anchor").evaluate(A,{},s.canonical)),Te=!!ke.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Te:s.bucket.sdfIcons!==Te&&$e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ke.pixelRatio!==s.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const _e=tC(X.horizontal)||X.vertical;s.bucket.iconsInText=!!_e&&_e.iconsInText,(_e||se)&&uL(s.bucket,A,X,se,s.imageMap,g,N,G,pe,Te,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},d.bq=A1,d.br=I1,d.bs=M1,d.bt=kl,d.bu=z1,d.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},d.bw=function(s,i,l,p,g){return u(this,void 0,void 0,function*(){if(j())try{return yield Ye(s,i,l,p,g)}catch{}return function(_,x,S,k,A){const L=_.width,$=_.height;pt&&St||(pt=new OffscreenCanvas(L,$),St=pt.getContext("2d",{willReadFrequently:!0})),pt.width=L,pt.height=$,St.drawImage(_,0,0,L,$);const N=St.getImageData(x,S,k,A);return St.clearRect(0,0,L,$),N.data}(s,i,l,p,g)})},d.bx=BS,d.by=b,d.bz=w,d.c=Nt,d.d=s=>u(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),d.e=le,d.f=s=>new Promise((i,l)=>{const p=new Image;p.onload=()=>{i(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame(()=>{p.src=Be})},p.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(s)],{type:"image/png"});p.src=s.byteLength?URL.createObjectURL(g):Be}),d.g=Zt,d.h=(s,i)=>Sn(le(s,{type:"json"}),i),d.i=De,d.j=yt,d.k=gn,d.l=(s,i)=>Sn(le(s,{type:"arrayBuffer"}),i),d.m=Sn,d.n=function(s){return new z1(s).readFields(N4,[])},d.o=_p,d.p=yS,d.q=v,d.r=a1,d.s=jt,d.t=ap,d.u=ka,d.v=we,d.w=$e,d.x=function([s,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:s*Math.cos(i)*Math.sin(l),y:s*Math.sin(i)*Math.sin(l),z:s*Math.cos(l)}},d.y=Ei,d.z=qn}),a("worker",["./shared"],function(d){class u{constructor(q){this.keyCache={},q&&this.replace(q)}replace(q){this._layerConfigs={},this._layers={},this.update(q,[])}update(q,W){for(const oe of q){this._layerConfigs[oe.id]=oe;const ve=this._layers[oe.id]=d.aA(oe);ve._featureFilter=d.a7(ve.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of W)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const Q=d.bk(Object.values(this._layerConfigs),this.keyCache);for(const oe of Q){const ve=oe.map(Se=>this._layers[Se.id]),be=ve[0];if(be.visibility==="none")continue;const te=be.source||"";let ue=this.familiesBySource[te];ue||(ue=this.familiesBySource[te]={});const Me=be.sourceLayer||"_geojsonTileLayer";let Re=ue[Me];Re||(Re=ue[Me]=[]),Re.push(ve)}}}class b{constructor(q){const W={},Q=[];for(const te in q){const ue=q[te],Me=W[te]={};for(const Re in ue){const Se=ue[+Re];if(!Se||Se.bitmap.width===0||Se.bitmap.height===0)continue;const Ue={x:0,y:0,w:Se.bitmap.width+2,h:Se.bitmap.height+2};Q.push(Ue),Me[Re]={rect:Ue,metrics:Se.metrics}}}const{w:oe,h:ve}=d.p(Q),be=new d.o({width:oe||1,height:ve||1});for(const te in q){const ue=q[te];for(const Me in ue){const Re=ue[+Me];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const Se=W[te][Me].rect;d.o.copy(Re.bitmap,be,{x:0,y:0},{x:Se.x+1,y:Se.y+1},Re.bitmap)}}this.image=be,this.positions=W}}d.bl("GlyphAtlas",b);class w{constructor(q){this.tileID=new d.S(q.tileID.overscaledZ,q.tileID.wrap,q.tileID.canonical.z,q.tileID.canonical.x,q.tileID.canonical.y),this.uid=q.uid,this.zoom=q.zoom,this.pixelRatio=q.pixelRatio,this.tileSize=q.tileSize,this.source=q.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=q.showCollisionBoxes,this.collectResourceTiming=!!q.collectResourceTiming,this.returnDependencies=!!q.returnDependencies,this.promoteId=q.promoteId,this.inFlightDependencies=[]}parse(q,W,Q,oe){return d._(this,void 0,void 0,function*(){this.status="parsing",this.data=q,this.collisionBoxArray=new d.a5;const ve=new d.bm(Object.keys(q.layers).sort()),be=new d.bn(this.tileID,this.promoteId);be.bucketLayerIDs=[];const te={},ue={featureIndex:be,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Q},Me=W.familiesBySource[this.source];for(const Gt in Me){const Tn=q.layers[Gt];if(!Tn)continue;Tn.version===1&&d.w(`Vector tile source "${this.source}" layer "${Gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const er=ve.encode(Gt),Ur=[];for(let Kr=0;Kr<Tn.length;Kr++){const mi=Tn.feature(Kr),Ya=be.getId(mi,Gt);Ur.push({feature:mi,id:Ya,index:Kr,sourceLayerIndex:er})}for(const Kr of Me[Gt]){const mi=Kr[0];mi.source!==this.source&&d.w(`layer.source = ${mi.source} does not equal this.source = ${this.source}`),mi.minzoom&&this.zoom<Math.floor(mi.minzoom)||mi.maxzoom&&this.zoom>=mi.maxzoom||mi.visibility!=="none"&&(P(Kr,this.zoom,Q),(te[mi.id]=mi.createBucket({index:be.bucketLayerIDs.length,layers:Kr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:er,sourceID:this.source})).populate(Ur,ue,this.tileID.canonical),be.bucketLayerIDs.push(Kr.map(Ya=>Ya.id)))}}const Re=d.aF(ue.glyphDependencies,Gt=>Object.keys(Gt).map(Number));this.inFlightDependencies.forEach(Gt=>Gt==null?void 0:Gt.abort()),this.inFlightDependencies=[];let Se=Promise.resolve({});if(Object.keys(Re).length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Se=oe.sendAsync({type:"GG",data:{stacks:Re,source:this.source,tileID:this.tileID,type:"glyphs"}},Gt)}const Ue=Object.keys(ue.iconDependencies);let ft=Promise.resolve({});if(Ue.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),ft=oe.sendAsync({type:"GI",data:{icons:Ue,source:this.source,tileID:this.tileID,type:"icons"}},Gt)}const Tt=Object.keys(ue.patternDependencies);let Yt=Promise.resolve({});if(Tt.length){const Gt=new AbortController;this.inFlightDependencies.push(Gt),Yt=oe.sendAsync({type:"GI",data:{icons:Tt,source:this.source,tileID:this.tileID,type:"patterns"}},Gt)}const[$t,cn,Jt]=yield Promise.all([Se,ft,Yt]),Mr=new b($t),sr=new d.bo(cn,Jt);for(const Gt in te){const Tn=te[Gt];Tn instanceof d.a6?(P(Tn.layers,this.zoom,Q),d.bp({bucket:Tn,glyphMap:$t,glyphPositions:Mr.positions,imageMap:cn,imagePositions:sr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Tn.hasPattern&&(Tn instanceof d.bq||Tn instanceof d.br||Tn instanceof d.bs)&&(P(Tn.layers,this.zoom,Q),Tn.addFeatures(ue,this.tileID.canonical,sr.patternPositions))}return this.status="done",{buckets:Object.values(te).filter(Gt=>!Gt.isEmpty()),featureIndex:be,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Mr.image,imageAtlas:sr,glyphMap:this.returnDependencies?$t:null,iconMap:this.returnDependencies?cn:null,glyphPositions:this.returnDependencies?Mr.positions:null}})}}function P(he,q,W){const Q=new d.z(q);for(const oe of he)oe.recalculate(Q,W)}class E{constructor(q,W,Q){this.actor=q,this.layerIndex=W,this.availableImages=Q,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(q,W){return d._(this,void 0,void 0,function*(){const Q=yield d.l(q.request,W);try{return{vectorTile:new d.bt.VectorTile(new d.bu(Q.data)),rawData:Q.data,cacheControl:Q.cacheControl,expires:Q.expires}}catch(oe){const ve=new Uint8Array(Q.data);let be=`Unable to parse the tile at ${q.request.url}, `;throw be+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(be)}})}loadTile(q){return d._(this,void 0,void 0,function*(){const W=q.uid,Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new d.bv(q.request),oe=new w(q);this.loading[W]=oe;const ve=new AbortController;oe.abort=ve;try{const be=yield this.loadVectorTile(q,ve);if(delete this.loading[W],!be)return null;const te=be.rawData,ue={};be.expires&&(ue.expires=be.expires),be.cacheControl&&(ue.cacheControl=be.cacheControl);const Me={};if(Q){const Se=Q.finish();Se&&(Me.resourceTiming=JSON.parse(JSON.stringify(Se)))}oe.vectorTile=be.vectorTile;const Re=oe.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=oe,this.fetching[W]={rawTileData:te,cacheControl:ue,resourceTiming:Me};try{const Se=yield Re;return d.e({rawTileData:te.slice(0)},Se,ue,Me)}finally{delete this.fetching[W]}}catch(be){throw delete this.loading[W],oe.status="done",this.loaded[W]=oe,be}})}reloadTile(q){return d._(this,void 0,void 0,function*(){const W=q.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const Q=this.loaded[W];if(Q.showCollisionBoxes=q.showCollisionBoxes,Q.status==="parsing"){const oe=yield Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[W]){const{rawTileData:be,cacheControl:te,resourceTiming:ue}=this.fetching[W];delete this.fetching[W],ve=d.e({rawTileData:be.slice(0)},oe,te,ue)}else ve=oe;return ve}if(Q.status==="done"&&Q.vectorTile)return Q.parse(Q.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(q){return d._(this,void 0,void 0,function*(){const W=this.loading,Q=q.uid;W&&W[Q]&&W[Q].abort&&(W[Q].abort.abort(),delete W[Q])})}removeTile(q){return d._(this,void 0,void 0,function*(){this.loaded&&this.loaded[q.uid]&&delete this.loaded[q.uid]})}}class I{constructor(){this.loaded={}}loadTile(q){return d._(this,void 0,void 0,function*(){const{uid:W,encoding:Q,rawImageData:oe,redFactor:ve,greenFactor:be,blueFactor:te,baseShift:ue}=q,Me=oe.width+2,Re=oe.height+2,Se=d.b(oe)?new d.R({width:Me,height:Re},yield d.bw(oe,-1,-1,Me,Re)):oe,Ue=new d.bx(W,Se,Q,ve,be,te,ue);return this.loaded=this.loaded||{},this.loaded[W]=Ue,Ue})}removeTile(q){const W=this.loaded,Q=q.uid;W&&W[Q]&&delete W[Q]}}function R(he,q){if(he.length!==0){F(he[0],q);for(var W=1;W<he.length;W++)F(he[W],!q)}}function F(he,q){for(var W=0,Q=0,oe=0,ve=he.length,be=ve-1;oe<ve;be=oe++){var te=(he[oe][0]-he[be][0])*(he[be][1]+he[oe][1]),ue=W+te;Q+=Math.abs(W)>=Math.abs(te)?W-ue+te:te-ue+W,W=ue}W+Q>=0!=!!q&&he.reverse()}var U=d.by(function he(q,W){var Q,oe=q&&q.type;if(oe==="FeatureCollection")for(Q=0;Q<q.features.length;Q++)he(q.features[Q],W);else if(oe==="GeometryCollection")for(Q=0;Q<q.geometries.length;Q++)he(q.geometries[Q],W);else if(oe==="Feature")he(q.geometry,W);else if(oe==="Polygon")R(q.coordinates,W);else if(oe==="MultiPolygon")for(Q=0;Q<q.coordinates.length;Q++)R(q.coordinates[Q],W);return q});const K=d.bt.VectorTileFeature.prototype.toGeoJSON;var D={exports:{}},j=d.bz,V=d.bt.VectorTileFeature,Y=ce;function ce(he,q){this.options=q||{},this.features=he,this.length=he.length}function de(he,q){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=q||4096}ce.prototype.feature=function(he){return new de(this.features[he],this.options.extent)},de.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var q=0;q<he.length;q++){for(var W=he[q],Q=[],oe=0;oe<W.length;oe++)Q.push(new j(W[oe][0],W[oe][1]));this.geometry.push(Q)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,q=1/0,W=-1/0,Q=1/0,oe=-1/0,ve=0;ve<he.length;ve++)for(var be=he[ve],te=0;te<be.length;te++){var ue=be[te];q=Math.min(q,ue.x),W=Math.max(W,ue.x),Q=Math.min(Q,ue.y),oe=Math.max(oe,ue.y)}return[q,Q,W,oe]},de.prototype.toGeoJSON=V.prototype.toGeoJSON;var le=d.bA,ge=Y;function Ae(he){var q=new le;return function(W,Q){for(var oe in W.layers)Q.writeMessage(3,H,W.layers[oe])}(he,q),q.finish()}function H(he,q){var W;q.writeVarintField(15,he.version||1),q.writeStringField(1,he.name||""),q.writeVarintField(5,he.extent||4096);var Q={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<he.length;W++)Q.feature=he.feature(W),q.writeMessage(2,Ee,Q);var oe=Q.keys;for(W=0;W<oe.length;W++)q.writeStringField(3,oe[W]);var ve=Q.values;for(W=0;W<ve.length;W++)q.writeMessage(4,We,ve[W])}function Ee(he,q){var W=he.feature;W.id!==void 0&&q.writeVarintField(1,W.id),q.writeMessage(2,je,he),q.writeVarintField(3,W.type),q.writeMessage(4,De,W)}function je(he,q){var W=he.feature,Q=he.keys,oe=he.values,ve=he.keycache,be=he.valuecache;for(var te in W.properties){var ue=W.properties[te],Me=ve[te];if(ue!==null){Me===void 0&&(Q.push(te),ve[te]=Me=Q.length-1),q.writeVarint(Me);var Re=typeof ue;Re!=="string"&&Re!=="boolean"&&Re!=="number"&&(ue=JSON.stringify(ue));var Se=Re+":"+ue,Ue=be[Se];Ue===void 0&&(oe.push(ue),be[Se]=Ue=oe.length-1),q.writeVarint(Ue)}}}function $e(he,q){return(q<<3)+(7&he)}function Le(he){return he<<1^he>>31}function De(he,q){for(var W=he.loadGeometry(),Q=he.type,oe=0,ve=0,be=W.length,te=0;te<be;te++){var ue=W[te],Me=1;Q===1&&(Me=ue.length),q.writeVarint($e(1,Me));for(var Re=Q===3?ue.length-1:ue.length,Se=0;Se<Re;Se++){Se===1&&Q!==1&&q.writeVarint($e(2,Re-1));var Ue=ue[Se].x-oe,ft=ue[Se].y-ve;q.writeVarint(Le(Ue)),q.writeVarint(Le(ft)),oe+=Ue,ve+=ft}Q===3&&q.writeVarint($e(7,1))}}function We(he,q){var W=typeof he;W==="string"?q.writeStringField(1,he):W==="boolean"?q.writeBooleanField(7,he):W==="number"&&(he%1!=0?q.writeDoubleField(3,he):he<0?q.writeSVarintField(6,he):q.writeVarintField(5,he))}D.exports=Ae,D.exports.fromVectorTileJs=Ae,D.exports.fromGeojsonVt=function(he,q){q=q||{};var W={};for(var Q in he)W[Q]=new ge(he[Q].features,q),W[Q].name=Q,W[Q].version=q.version,W[Q].extent=q.extent;return Ae({layers:W})},D.exports.GeoJSONWrapper=ge;var ut=d.by(D.exports);const Be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Ye=Math.fround||(pt=new Float32Array(1),he=>(pt[0]=+he,pt[0]));var pt;const St=3,At=5,Nt=6;class Lt{constructor(q){this.options=Object.assign(Object.create(Be),q),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(q){const{log:W,minZoom:Q,maxZoom:oe}=this.options;W&&console.time("total time");const ve=`prepare ${q.length} points`;W&&console.time(ve),this.points=q;const be=[];for(let ue=0;ue<q.length;ue++){const Me=q[ue];if(!Me.geometry)continue;const[Re,Se]=Me.geometry.coordinates,Ue=Ye(en(Re)),ft=Ye(Bn(Se));be.push(Ue,ft,1/0,ue,-1,1),this.options.reduce&&be.push(0)}let te=this.trees[oe+1]=this._createTree(be);W&&console.timeEnd(ve);for(let ue=oe;ue>=Q;ue--){const Me=+Date.now();te=this.trees[ue]=this._createTree(this._cluster(te,ue)),W&&console.log("z%d: %d clusters in %dms",ue,te.numItems,+Date.now()-Me)}return W&&console.timeEnd("total time"),this}getClusters(q,W){let Q=((q[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,q[1]));let ve=q[2]===180?180:((q[2]+180)%360+360)%360-180;const be=Math.max(-90,Math.min(90,q[3]));if(q[2]-q[0]>=360)Q=-180,ve=180;else if(Q>ve){const Se=this.getClusters([Q,oe,180,be],W),Ue=this.getClusters([-180,oe,ve,be],W);return Se.concat(Ue)}const te=this.trees[this._limitZoom(W)],ue=te.range(en(Q),Bn(be),en(ve),Bn(oe)),Me=te.data,Re=[];for(const Se of ue){const Ue=this.stride*Se;Re.push(Me[Ue+At]>1?Zt(Me,Ue,this.clusterProps):this.points[Me[Ue+St]])}return Re}getChildren(q){const W=this._getOriginId(q),Q=this._getOriginZoom(q),oe="No cluster with the specified id.",ve=this.trees[Q];if(!ve)throw new Error(oe);const be=ve.data;if(W*this.stride>=be.length)throw new Error(oe);const te=this.options.radius/(this.options.extent*Math.pow(2,Q-1)),ue=ve.within(be[W*this.stride],be[W*this.stride+1],te),Me=[];for(const Re of ue){const Se=Re*this.stride;be[Se+4]===q&&Me.push(be[Se+At]>1?Zt(be,Se,this.clusterProps):this.points[be[Se+St]])}if(Me.length===0)throw new Error(oe);return Me}getLeaves(q,W,Q){const oe=[];return this._appendLeaves(oe,q,W=W||10,Q=Q||0,0),oe}getTile(q,W,Q){const oe=this.trees[this._limitZoom(q)],ve=Math.pow(2,q),{extent:be,radius:te}=this.options,ue=te/be,Me=(Q-ue)/ve,Re=(Q+1+ue)/ve,Se={features:[]};return this._addTileFeatures(oe.range((W-ue)/ve,Me,(W+1+ue)/ve,Re),oe.data,W,Q,ve,Se),W===0&&this._addTileFeatures(oe.range(1-ue/ve,Me,1,Re),oe.data,ve,Q,ve,Se),W===ve-1&&this._addTileFeatures(oe.range(0,Me,ue/ve,Re),oe.data,-1,Q,ve,Se),Se.features.length?Se:null}getClusterExpansionZoom(q){let W=this._getOriginZoom(q)-1;for(;W<=this.options.maxZoom;){const Q=this.getChildren(q);if(W++,Q.length!==1)break;q=Q[0].properties.cluster_id}return W}_appendLeaves(q,W,Q,oe,ve){const be=this.getChildren(W);for(const te of be){const ue=te.properties;if(ue&&ue.cluster?ve+ue.point_count<=oe?ve+=ue.point_count:ve=this._appendLeaves(q,ue.cluster_id,Q,oe,ve):ve<oe?ve++:q.push(te),q.length===Q)break}return ve}_createTree(q){const W=new d.av(q.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Q=0;Q<q.length;Q+=this.stride)W.add(q[Q],q[Q+1]);return W.finish(),W.data=q,W}_addTileFeatures(q,W,Q,oe,ve,be){for(const te of q){const ue=te*this.stride,Me=W[ue+At]>1;let Re,Se,Ue;if(Me)Re=un(W,ue,this.clusterProps),Se=W[ue],Ue=W[ue+1];else{const Yt=this.points[W[ue+St]];Re=Yt.properties;const[$t,cn]=Yt.geometry.coordinates;Se=en($t),Ue=Bn(cn)}const ft={type:1,geometry:[[Math.round(this.options.extent*(Se*ve-Q)),Math.round(this.options.extent*(Ue*ve-oe))]],tags:Re};let Tt;Tt=Me||this.options.generateId?W[ue+St]:this.points[W[ue+St]].id,Tt!==void 0&&(ft.id=Tt),be.features.push(ft)}}_limitZoom(q){return Math.max(this.options.minZoom,Math.min(Math.floor(+q),this.options.maxZoom+1))}_cluster(q,W){const{radius:Q,extent:oe,reduce:ve,minPoints:be}=this.options,te=Q/(oe*Math.pow(2,W)),ue=q.data,Me=[],Re=this.stride;for(let Se=0;Se<ue.length;Se+=Re){if(ue[Se+2]<=W)continue;ue[Se+2]=W;const Ue=ue[Se],ft=ue[Se+1],Tt=q.within(ue[Se],ue[Se+1],te),Yt=ue[Se+At];let $t=Yt;for(const cn of Tt){const Jt=cn*Re;ue[Jt+2]>W&&($t+=ue[Jt+At])}if($t>Yt&&$t>=be){let cn,Jt=Ue*Yt,Mr=ft*Yt,sr=-1;const Gt=((Se/Re|0)<<5)+(W+1)+this.points.length;for(const Tn of Tt){const er=Tn*Re;if(ue[er+2]<=W)continue;ue[er+2]=W;const Ur=ue[er+At];Jt+=ue[er]*Ur,Mr+=ue[er+1]*Ur,ue[er+4]=Gt,ve&&(cn||(cn=this._map(ue,Se,!0),sr=this.clusterProps.length,this.clusterProps.push(cn)),ve(cn,this._map(ue,er)))}ue[Se+4]=Gt,Me.push(Jt/$t,Mr/$t,1/0,Gt,-1,$t),ve&&Me.push(sr)}else{for(let cn=0;cn<Re;cn++)Me.push(ue[Se+cn]);if($t>1)for(const cn of Tt){const Jt=cn*Re;if(!(ue[Jt+2]<=W)){ue[Jt+2]=W;for(let Mr=0;Mr<Re;Mr++)Me.push(ue[Jt+Mr])}}}}return Me}_getOriginId(q){return q-this.points.length>>5}_getOriginZoom(q){return(q-this.points.length)%32}_map(q,W,Q){if(q[W+At]>1){const be=this.clusterProps[q[W+Nt]];return Q?Object.assign({},be):be}const oe=this.points[q[W+St]].properties,ve=this.options.map(oe);return Q&&ve===oe?Object.assign({},ve):ve}}function Zt(he,q,W){return{type:"Feature",id:he[q+St],properties:un(he,q,W),geometry:{type:"Point",coordinates:[(Q=he[q],360*(Q-.5)),Sn(he[q+1])]}};var Q}function un(he,q,W){const Q=he[q+At],oe=Q>=1e4?`${Math.round(Q/1e3)}k`:Q>=1e3?Math.round(Q/100)/10+"k":Q,ve=he[q+Nt],be=ve===-1?{}:Object.assign({},W[ve]);return Object.assign(be,{cluster:!0,cluster_id:he[q+St],point_count:Q,point_count_abbreviated:oe})}function en(he){return he/360+.5}function Bn(he){const q=Math.sin(he*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function Sn(he){const q=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(q))/Math.PI-90}function jt(he,q,W,Q){let oe=Q;const ve=q+(W-q>>1);let be,te=W-q;const ue=he[q],Me=he[q+1],Re=he[W],Se=he[W+1];for(let Ue=q+3;Ue<W;Ue+=3){const ft=tn(he[Ue],he[Ue+1],ue,Me,Re,Se);if(ft>oe)be=Ue,oe=ft;else if(ft===oe){const Tt=Math.abs(Ue-ve);Tt<te&&(be=Ue,te=Tt)}}oe>Q&&(be-q>3&&jt(he,q,be,Q),he[be+2]=oe,W-be>3&&jt(he,be,W,Q))}function tn(he,q,W,Q,oe,ve){let be=oe-W,te=ve-Q;if(be!==0||te!==0){const ue=((he-W)*be+(q-Q)*te)/(be*be+te*te);ue>1?(W=oe,Q=ve):ue>0&&(W+=be*ue,Q+=te*ue)}return be=he-W,te=q-Q,be*be+te*te}function Ut(he,q,W,Q){const oe={id:he??null,type:q,geometry:W,tags:Q,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(q==="Point"||q==="MultiPoint"||q==="LineString")gn(oe,W);else if(q==="Polygon")gn(oe,W[0]);else if(q==="MultiLineString")for(const ve of W)gn(oe,ve);else if(q==="MultiPolygon")for(const ve of W)gn(oe,ve[0]);return oe}function gn(he,q){for(let W=0;W<q.length;W+=3)he.minX=Math.min(he.minX,q[W]),he.minY=Math.min(he.minY,q[W+1]),he.maxX=Math.max(he.maxX,q[W]),he.maxY=Math.max(he.maxY,q[W+1])}function yt(he,q,W,Q){if(!q.geometry)return;const oe=q.geometry.coordinates;if(oe&&oe.length===0)return;const ve=q.geometry.type,be=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2);let te=[],ue=q.id;if(W.promoteId?ue=q.properties[W.promoteId]:W.generateId&&(ue=Q||0),ve==="Point")zt(oe,te);else if(ve==="MultiPoint")for(const Me of oe)zt(Me,te);else if(ve==="LineString")we(oe,te,be,!1);else if(ve==="MultiLineString"){if(W.lineMetrics){for(const Me of oe)te=[],we(Me,te,be,!1),he.push(Ut(ue,"LineString",te,q.properties));return}ir(oe,te,be,!1)}else if(ve==="Polygon")ir(oe,te,be,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Me of q.geometry.geometries)yt(he,{id:ue,geometry:Me,properties:q.properties},W,Q);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Me of oe){const Re=[];ir(Me,Re,be,!0),te.push(Re)}}he.push(Ut(ue,ve,te,q.properties))}function zt(he,q){q.push(pn(he[0]),ht(he[1]),0)}function we(he,q,W,Q){let oe,ve,be=0;for(let ue=0;ue<he.length;ue++){const Me=pn(he[ue][0]),Re=ht(he[ue][1]);q.push(Me,Re,0),ue>0&&(be+=Q?(oe*Re-Me*ve)/2:Math.sqrt(Math.pow(Me-oe,2)+Math.pow(Re-ve,2))),oe=Me,ve=Re}const te=q.length-3;q[2]=1,jt(q,0,te,W),q[te+2]=1,q.size=Math.abs(be),q.start=0,q.end=q.size}function ir(he,q,W,Q){for(let oe=0;oe<he.length;oe++){const ve=[];we(he[oe],ve,W,Q),q.push(ve)}}function pn(he){return he/360+.5}function ht(he){const q=Math.sin(he*Math.PI/180),W=.5-.25*Math.log((1+q)/(1-q))/Math.PI;return W<0?0:W>1?1:W}function Vt(he,q,W,Q,oe,ve,be,te){if(Q/=q,ve>=(W/=q)&&be<Q)return he;if(be<W||ve>=Q)return null;const ue=[];for(const Me of he){const Re=Me.geometry;let Se=Me.type;const Ue=oe===0?Me.minX:Me.minY,ft=oe===0?Me.maxX:Me.maxY;if(Ue>=W&&ft<Q){ue.push(Me);continue}if(ft<W||Ue>=Q)continue;let Tt=[];if(Se==="Point"||Se==="MultiPoint")an(Re,Tt,W,Q,oe);else if(Se==="LineString")Qn(Re,Tt,W,Q,oe,!1,te.lineMetrics);else if(Se==="MultiLineString")Mn(Re,Tt,W,Q,oe,!1);else if(Se==="Polygon")Mn(Re,Tt,W,Q,oe,!0);else if(Se==="MultiPolygon")for(const Yt of Re){const $t=[];Mn(Yt,$t,W,Q,oe,!0),$t.length&&Tt.push($t)}if(Tt.length){if(te.lineMetrics&&Se==="LineString"){for(const Yt of Tt)ue.push(Ut(Me.id,Se,Yt,Me.tags));continue}Se!=="LineString"&&Se!=="MultiLineString"||(Tt.length===1?(Se="LineString",Tt=Tt[0]):Se="MultiLineString"),Se!=="Point"&&Se!=="MultiPoint"||(Se=Tt.length===3?"Point":"MultiPoint"),ue.push(Ut(Me.id,Se,Tt,Me.tags))}}return ue.length?ue:null}function an(he,q,W,Q,oe){for(let ve=0;ve<he.length;ve+=3){const be=he[ve+oe];be>=W&&be<=Q&&pr(q,he[ve],he[ve+1],he[ve+2])}}function Qn(he,q,W,Q,oe,ve,be){let te=bt(he);const ue=oe===0?Zr:fr;let Me,Re,Se=he.start;for(let $t=0;$t<he.length-3;$t+=3){const cn=he[$t],Jt=he[$t+1],Mr=he[$t+2],sr=he[$t+3],Gt=he[$t+4],Tn=oe===0?cn:Jt,er=oe===0?sr:Gt;let Ur=!1;be&&(Me=Math.sqrt(Math.pow(cn-sr,2)+Math.pow(Jt-Gt,2))),Tn<W?er>W&&(Re=ue(te,cn,Jt,sr,Gt,W),be&&(te.start=Se+Me*Re)):Tn>Q?er<Q&&(Re=ue(te,cn,Jt,sr,Gt,Q),be&&(te.start=Se+Me*Re)):pr(te,cn,Jt,Mr),er<W&&Tn>=W&&(Re=ue(te,cn,Jt,sr,Gt,W),Ur=!0),er>Q&&Tn<=Q&&(Re=ue(te,cn,Jt,sr,Gt,Q),Ur=!0),!ve&&Ur&&(be&&(te.end=Se+Me*Re),q.push(te),te=bt(he)),be&&(Se+=Me)}let Ue=he.length-3;const ft=he[Ue],Tt=he[Ue+1],Yt=oe===0?ft:Tt;Yt>=W&&Yt<=Q&&pr(te,ft,Tt,he[Ue+2]),Ue=te.length-3,ve&&Ue>=3&&(te[Ue]!==te[0]||te[Ue+1]!==te[1])&&pr(te,te[0],te[1],te[2]),te.length&&q.push(te)}function bt(he){const q=[];return q.size=he.size,q.start=he.start,q.end=he.end,q}function Mn(he,q,W,Q,oe,ve){for(const be of he)Qn(be,q,W,Q,oe,ve,!1)}function pr(he,q,W,Q){he.push(q,W,Q)}function Zr(he,q,W,Q,oe,ve){const be=(ve-q)/(Q-q);return pr(he,ve,W+(oe-W)*be,1),be}function fr(he,q,W,Q,oe,ve){const be=(ve-W)/(oe-W);return pr(he,q+(Q-q)*be,ve,1),be}function Ge(he,q){const W=[];for(let Q=0;Q<he.length;Q++){const oe=he[Q],ve=oe.type;let be;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")be=or(oe.geometry,q);else if(ve==="MultiLineString"||ve==="Polygon"){be=[];for(const te of oe.geometry)be.push(or(te,q))}else if(ve==="MultiPolygon"){be=[];for(const te of oe.geometry){const ue=[];for(const Me of te)ue.push(or(Me,q));be.push(ue)}}W.push(Ut(oe.id,ve,be,oe.tags))}return W}function or(he,q){const W=[];W.size=he.size,he.start!==void 0&&(W.start=he.start,W.end=he.end);for(let Q=0;Q<he.length;Q+=3)W.push(he[Q]+q,he[Q+1],he[Q+2]);return W}function Wn(he,q){if(he.transformed)return he;const W=1<<he.z,Q=he.x,oe=he.y;for(const ve of he.features){const be=ve.geometry,te=ve.type;if(ve.geometry=[],te===1)for(let ue=0;ue<be.length;ue+=2)ve.geometry.push(on(be[ue],be[ue+1],q,W,Q,oe));else for(let ue=0;ue<be.length;ue++){const Me=[];for(let Re=0;Re<be[ue].length;Re+=2)Me.push(on(be[ue][Re],be[ue][Re+1],q,W,Q,oe));ve.geometry.push(Me)}}return he.transformed=!0,he}function on(he,q,W,Q,oe,ve){return[Math.round(W*(he*Q-oe)),Math.round(W*(q*Q-ve))]}function Ir(he,q,W,Q,oe){const ve=q===oe.maxZoom?0:oe.tolerance/((1<<q)*oe.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:he.length,source:null,x:W,y:Q,z:q,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const te of he)Ze(be,te,ve,oe);return be}function Ze(he,q,W,Q){const oe=q.geometry,ve=q.type,be=[];if(he.minX=Math.min(he.minX,q.minX),he.minY=Math.min(he.minY,q.minY),he.maxX=Math.max(he.maxX,q.maxX),he.maxY=Math.max(he.maxY,q.maxY),ve==="Point"||ve==="MultiPoint")for(let te=0;te<oe.length;te+=3)be.push(oe[te],oe[te+1]),he.numPoints++,he.numSimplified++;else if(ve==="LineString")Ke(be,oe,he,W,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let te=0;te<oe.length;te++)Ke(be,oe[te],he,W,ve==="Polygon",te===0);else if(ve==="MultiPolygon")for(let te=0;te<oe.length;te++){const ue=oe[te];for(let Me=0;Me<ue.length;Me++)Ke(be,ue[Me],he,W,!0,Me===0)}if(be.length){let te=q.tags||null;if(ve==="LineString"&&Q.lineMetrics){te={};for(const Me in q.tags)te[Me]=q.tags[Me];te.mapbox_clip_start=oe.start/oe.size,te.mapbox_clip_end=oe.end/oe.size}const ue={geometry:be,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:te};q.id!==null&&(ue.id=q.id),he.features.push(ue)}}function Ke(he,q,W,Q,oe,ve){const be=Q*Q;if(Q>0&&q.size<(oe?be:Q))return void(W.numPoints+=q.length/3);const te=[];for(let ue=0;ue<q.length;ue+=3)(Q===0||q[ue+2]>be)&&(W.numSimplified++,te.push(q[ue],q[ue+1])),W.numPoints++;oe&&function(ue,Me){let Re=0;for(let Se=0,Ue=ue.length,ft=Ue-2;Se<Ue;ft=Se,Se+=2)Re+=(ue[Se]-ue[ft])*(ue[Se+1]+ue[ft+1]);if(Re>0===Me)for(let Se=0,Ue=ue.length;Se<Ue/2;Se+=2){const ft=ue[Se],Tt=ue[Se+1];ue[Se]=ue[Ue-2-Se],ue[Se+1]=ue[Ue-1-Se],ue[Ue-2-Se]=ft,ue[Ue-1-Se]=Tt}}(te,ve),he.push(te)}const it={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ln{constructor(q,W){const Q=(W=this.options=function(ve,be){for(const te in be)ve[te]=be[te];return ve}(Object.create(it),W)).debug;if(Q&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=function(ve,be){const te=[];if(ve.type==="FeatureCollection")for(let ue=0;ue<ve.features.length;ue++)yt(te,ve.features[ue],be,ue);else yt(te,ve.type==="Feature"?ve:{geometry:ve},be);return te}(q,W);this.tiles={},this.tileCoords=[],Q&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=function(ve,be){const te=be.buffer/be.extent;let ue=ve;const Me=Vt(ve,1,-1-te,te,0,-1,2,be),Re=Vt(ve,1,1-te,2+te,0,-1,2,be);return(Me||Re)&&(ue=Vt(ve,1,-te,1+te,0,-1,2,be)||[],Me&&(ue=Ge(Me,1).concat(ue)),Re&&(ue=ue.concat(Ge(Re,-1)))),ue}(oe,W),oe.length&&this.splitTile(oe,0,0,0),Q&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(q,W,Q,oe,ve,be,te){const ue=[q,W,Q,oe],Me=this.options,Re=Me.debug;for(;ue.length;){oe=ue.pop(),Q=ue.pop(),W=ue.pop(),q=ue.pop();const Se=1<<W,Ue=Pr(W,Q,oe);let ft=this.tiles[Ue];if(!ft&&(Re>1&&console.time("creation"),ft=this.tiles[Ue]=Ir(q,W,Q,oe,Me),this.tileCoords.push({z:W,x:Q,y:oe}),Re)){Re>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Q,oe,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));const Ur=`z${W}`;this.stats[Ur]=(this.stats[Ur]||0)+1,this.total++}if(ft.source=q,ve==null){if(W===Me.indexMaxZoom||ft.numPoints<=Me.indexMaxPoints)continue}else{if(W===Me.maxZoom||W===ve)continue;if(ve!=null){const Ur=ve-W;if(Q!==be>>Ur||oe!==te>>Ur)continue}}if(ft.source=null,q.length===0)continue;Re>1&&console.time("clipping");const Tt=.5*Me.buffer/Me.extent,Yt=.5-Tt,$t=.5+Tt,cn=1+Tt;let Jt=null,Mr=null,sr=null,Gt=null,Tn=Vt(q,Se,Q-Tt,Q+$t,0,ft.minX,ft.maxX,Me),er=Vt(q,Se,Q+Yt,Q+cn,0,ft.minX,ft.maxX,Me);q=null,Tn&&(Jt=Vt(Tn,Se,oe-Tt,oe+$t,1,ft.minY,ft.maxY,Me),Mr=Vt(Tn,Se,oe+Yt,oe+cn,1,ft.minY,ft.maxY,Me),Tn=null),er&&(sr=Vt(er,Se,oe-Tt,oe+$t,1,ft.minY,ft.maxY,Me),Gt=Vt(er,Se,oe+Yt,oe+cn,1,ft.minY,ft.maxY,Me),er=null),Re>1&&console.timeEnd("clipping"),ue.push(Jt||[],W+1,2*Q,2*oe),ue.push(Mr||[],W+1,2*Q,2*oe+1),ue.push(sr||[],W+1,2*Q+1,2*oe),ue.push(Gt||[],W+1,2*Q+1,2*oe+1)}}getTile(q,W,Q){q=+q,W=+W,Q=+Q;const oe=this.options,{extent:ve,debug:be}=oe;if(q<0||q>24)return null;const te=1<<q,ue=Pr(q,W=W+te&te-1,Q);if(this.tiles[ue])return Wn(this.tiles[ue],ve);be>1&&console.log("drilling down to z%d-%d-%d",q,W,Q);let Me,Re=q,Se=W,Ue=Q;for(;!Me&&Re>0;)Re--,Se>>=1,Ue>>=1,Me=this.tiles[Pr(Re,Se,Ue)];return Me&&Me.source?(be>1&&(console.log("found parent tile z%d-%d-%d",Re,Se,Ue),console.time("drilling down")),this.splitTile(Me.source,Re,Se,Ue,q,W,Q),be>1&&console.timeEnd("drilling down"),this.tiles[ue]?Wn(this.tiles[ue],ve):null):null}}function Pr(he,q,W){return 32*((1<<he)*W+q)+he}function Rt(he,q){return q?he.properties[q]:he.id}function oo(he,q){if(he==null)return!0;if(he.type==="Feature")return Rt(he,q)!=null;if(he.type==="FeatureCollection"){const W=new Set;for(const Q of he.features){const oe=Rt(Q,q);if(oe==null||W.has(oe))return!1;W.add(oe)}return!0}return!1}function So(he,q){const W=new Map;if(he!=null)if(he.type==="Feature")W.set(Rt(he,q),he);else for(const Q of he.features)W.set(Rt(Q,q),Q);return W}class Xo extends E{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(q,W){return d._(this,void 0,void 0,function*(){const Q=q.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(Q.z,Q.x,Q.y);if(!oe)return null;const ve=new class{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=d.X,this.length=te.length,this._features=te}feature(te){return new class{constructor(ue){this._feature=ue,this.extent=d.X,this.type=ue.type,this.properties=ue.tags,"id"in ue&&!isNaN(ue.id)&&(this.id=parseInt(ue.id,10))}loadGeometry(){if(this._feature.type===1){const ue=[];for(const Me of this._feature.geometry)ue.push([new d.P(Me[0],Me[1])]);return ue}{const ue=[];for(const Me of this._feature.geometry){const Re=[];for(const Se of Me)Re.push(new d.P(Se[0],Se[1]));ue.push(Re)}return ue}}toGeoJSON(ue,Me,Re){return K.call(this,ue,Me,Re)}}(this._features[te])}}(oe.features);let be=ut(ve);return be.byteOffset===0&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),{vectorTile:ve,rawData:be.buffer}})}loadData(q){return d._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();const Q=!!(q&&q.request&&q.request.collectResourceTiming)&&new d.bv(q.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(q,this._pendingRequest),this._geoJSONIndex=q.cluster?new Lt(function({superclusterOptions:be,clusterProperties:te}){if(!te||!be)return be;const ue={},Me={},Re={accumulated:null,zoom:0},Se={properties:null},Ue=Object.keys(te);for(const ft of Ue){const[Tt,Yt]=te[ft],$t=d.bC(Yt),cn=d.bC(typeof Tt=="string"?[Tt,["accumulated"],["get",ft]]:Tt);ue[ft]=$t.value,Me[ft]=cn.value}return be.map=ft=>{Se.properties=ft;const Tt={};for(const Yt of Ue)Tt[Yt]=ue[Yt].evaluate(Re,Se);return Tt},be.reduce=(ft,Tt)=>{Se.properties=Tt;for(const Yt of Ue)Re.accumulated=ft[Yt],ft[Yt]=Me[Yt].evaluate(Re,Se)},be}(q)).load((yield this._pendingData).features):(oe=yield this._pendingData,new ln(oe,q.geojsonVtOptions)),this.loaded={};const ve={};if(Q){const be=Q.finish();be&&(ve.resourceTiming={},ve.resourceTiming[q.source]=JSON.parse(JSON.stringify(be)))}return ve}catch(ve){if(delete this._pendingRequest,d.bB(ve))return{abandoned:!0};throw ve}var oe})}getData(){return d._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(q){const W=this.loaded;return W&&W[q.uid]?super.reloadTile(q):this.loadTile(q)}loadAndProcessGeoJSON(q,W){return d._(this,void 0,void 0,function*(){let Q=yield this.loadGeoJSON(q,W);if(delete this._pendingRequest,typeof Q!="object")throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(U(Q,!0),q.filter){const oe=d.bC(q.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map(be=>`${be.key}: ${be.message}`).join(", "));Q={type:"FeatureCollection",features:Q.features.filter(be=>oe.value.evaluate({zoom:0},be))}}return Q})}loadGeoJSON(q,W){return d._(this,void 0,void 0,function*(){const{promoteId:Q}=q;if(q.request){const oe=yield d.h(q.request,W);return this._dataUpdateable=oo(oe.data,Q)?So(oe.data,Q):void 0,oe.data}if(typeof q.data=="string")try{const oe=JSON.parse(q.data);return this._dataUpdateable=oo(oe,Q)?So(oe,Q):void 0,oe}catch{throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`)}if(!q.dataDiff)throw new Error(`Input data given to '${q.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${q.source}`);return function(oe,ve,be){var te,ue,Me,Re;if(ve.removeAll&&oe.clear(),ve.remove)for(const Se of ve.remove)oe.delete(Se);if(ve.add)for(const Se of ve.add){const Ue=Rt(Se,be);Ue!=null&&oe.set(Ue,Se)}if(ve.update)for(const Se of ve.update){let Ue=oe.get(Se.id);if(Ue==null)continue;const ft=!Se.removeAllProperties&&(((te=Se.removeProperties)===null||te===void 0?void 0:te.length)>0||((ue=Se.addOrUpdateProperties)===null||ue===void 0?void 0:ue.length)>0);if((Se.newGeometry||Se.removeAllProperties||ft)&&(Ue=Object.assign({},Ue),oe.set(Se.id,Ue),ft&&(Ue.properties=Object.assign({},Ue.properties))),Se.newGeometry&&(Ue.geometry=Se.newGeometry),Se.removeAllProperties)Ue.properties={};else if(((Me=Se.removeProperties)===null||Me===void 0?void 0:Me.length)>0)for(const Tt of Se.removeProperties)Object.prototype.hasOwnProperty.call(Ue.properties,Tt)&&delete Ue.properties[Tt];if(((Re=Se.addOrUpdateProperties)===null||Re===void 0?void 0:Re.length)>0)for(const{key:Tt,value:Yt}of Se.addOrUpdateProperties)Ue.properties[Tt]=Yt}}(this._dataUpdateable,q.dataDiff,Q),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(q){return d._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(q){return this._geoJSONIndex.getClusterExpansionZoom(q.clusterId)}getClusterChildren(q){return this._geoJSONIndex.getChildren(q.clusterId)}getClusterLeaves(q){return this._geoJSONIndex.getLeaves(q.clusterId,q.limit,q.offset)}}class so{constructor(q){this.self=q,this.actor=new d.F(q),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,Q)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=Q},this.self.addProtocol=d.bi,this.self.removeProtocol=d.bj,this.self.registerRTLTextPlugin=W=>{if(d.bD.isParsed())throw new Error("RTL text plugin already registered.");d.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,Q)=>this._getDEMWorkerSource(W,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RDT",(W,Q)=>d._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,Q.source).removeTile(Q)})),this.actor.registerMessageHandler("GCEZ",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterExpansionZoom(Q)})),this.actor.registerMessageHandler("GCC",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterChildren(Q)})),this.actor.registerMessageHandler("GCL",(W,Q)=>d._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Q.type,Q.source).getClusterLeaves(Q)})),this.actor.registerMessageHandler("LD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadData(Q)),this.actor.registerMessageHandler("GD",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).getData()),this.actor.registerMessageHandler("LT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).loadTile(Q)),this.actor.registerMessageHandler("RT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).reloadTile(Q)),this.actor.registerMessageHandler("AT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).abortTile(Q)),this.actor.registerMessageHandler("RMT",(W,Q)=>this._getWorkerSource(W,Q.type,Q.source).removeTile(Q)),this.actor.registerMessageHandler("RS",(W,Q)=>d._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][Q.type]||!this.workerSources[W][Q.type][Q.source])return;const oe=this.workerSources[W][Q.type][Q.source];delete this.workerSources[W][Q.type][Q.source],oe.removeSource!==void 0&&oe.removeSource(Q)})),this.actor.registerMessageHandler("RM",W=>d._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,Q)=>d._(this,void 0,void 0,function*(){this.referrer=Q})),this.actor.registerMessageHandler("SRPS",(W,Q)=>this._syncRTLPluginState(W,Q)),this.actor.registerMessageHandler("IS",(W,Q)=>d._(this,void 0,void 0,function*(){this.self.importScripts(Q)})),this.actor.registerMessageHandler("SI",(W,Q)=>this._setImages(W,Q)),this.actor.registerMessageHandler("UL",(W,Q)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(Q.layers,Q.removedIds)})),this.actor.registerMessageHandler("SL",(W,Q)=>d._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(Q)}))}_setImages(q,W){return d._(this,void 0,void 0,function*(){this.availableImages[q]=W;for(const Q in this.workerSources[q]){const oe=this.workerSources[q][Q];for(const ve in oe)oe[ve].availableImages=W}})}_syncRTLPluginState(q,W){return d._(this,void 0,void 0,function*(){if(d.bD.isParsed())return d.bD.getState();if(W.pluginStatus!=="loading")return d.bD.setState(W),W;const Q=W.pluginURL;if(this.self.importScripts(Q),d.bD.isParsed()){const oe={pluginStatus:"loaded",pluginURL:Q};return d.bD.setState(oe),oe}throw d.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${Q}`)})}_getAvailableImages(q){let W=this.availableImages[q];return W||(W=[]),W}_getLayerIndex(q){let W=this.layerIndexes[q];return W||(W=this.layerIndexes[q]=new u),W}_getWorkerSource(q,W,Q){if(this.workerSources[q]||(this.workerSources[q]={}),this.workerSources[q][W]||(this.workerSources[q][W]={}),!this.workerSources[q][W][Q]){const oe={sendAsync:(ve,be)=>(ve.targetMapId=q,this.actor.sendAsync(ve,be))};switch(W){case"vector":this.workerSources[q][W][Q]=new E(oe,this._getLayerIndex(q),this._getAvailableImages(q));break;case"geojson":this.workerSources[q][W][Q]=new Xo(oe,this._getLayerIndex(q),this._getAvailableImages(q));break;default:this.workerSources[q][W][Q]=new this.externalWorkerSourceTypes[W](oe,this._getLayerIndex(q),this._getAvailableImages(q))}}return this.workerSources[q][W][Q]}_getDEMWorkerSource(q,W){return this.demWorkerSources[q]||(this.demWorkerSources[q]={}),this.demWorkerSources[q][W]||(this.demWorkerSources[q][W]=new I),this.demWorkerSources[q][W]}}return d.i(self)&&(self.worker=new so(self)),so}),a("index",["exports","./shared"],function(d,u){var b="4.7.1";let w,P;const E={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,c)=>{const f=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),c(u.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,c.drawImage(v,0,0,v.width,v.height),c},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)}};class I{static testProp(r){if(!I.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in I.docStyle)return r[c];return r[0]}static create(r,c,f){const m=window.document.createElement(r);return c!==void 0&&(m.className=c),f&&f.appendChild(m),m}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){I.docStyle&&I.selectProp&&(I.userSelect=I.docStyle[I.selectProp],I.docStyle[I.selectProp]="none")}static enableDrag(){I.docStyle&&I.selectProp&&(I.docStyle[I.selectProp]=I.userSelect)}static setTransform(r,c){r.style[I.transformProp]=c}static addEventListener(r,c,f,m={}){r.addEventListener(c,f,"passive"in m?m:m.capture)}static removeEventListener(r,c,f,m={}){r.removeEventListener(c,f,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",I.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",I.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",I.suppressClickInternal,!0)},0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,f){const m=c.boundingClientRect;return new u.P((f.clientX-m.left)/c.x-r.clientLeft,(f.clientY-m.top)/c.y-r.clientTop)}static mousePos(r,c){const f=I.getScale(r);return I.getPoint(r,f,c)}static touchPos(r,c){const f=[],m=I.getScale(r);for(let y=0;y<c.length;y++)f.push(I.getPoint(r,m,c[y]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}I.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,I.selectProp=I.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),I.transformProp=I.testProp(["transform","WebkitTransform"]);const R={supported:!1,testSupport:function(v){!K&&U&&(D?j(v):F=v)}};let F,U,K=!1,D=!1;function j(v){const r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,U),v.isContextLost())return;R.supported=!0}catch{}v.deleteTexture(r),K=!0}var V;typeof document<"u"&&(U=document.createElement("img"),U.onload=()=>{F&&j(F),F=null,D=!0},U.onerror=()=>{K=!0,F=null},U.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,c,f,m;v.resetRequestQueue=()=>{r=[],c=0,f=0,m={}},v.addThrottleControl=M=>{const z=f++;return m[z]=M,z},v.removeThrottleControl=M=>{delete m[M],C()},v.getImage=(M,z,O=!0)=>new Promise((B,Z)=>{R.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),u.e(M,{type:"image"}),r.push({abortController:z,requestParameters:M,supportImageRefresh:O,state:"queued",onError:ee=>{Z(ee)},onSuccess:ee=>{B(ee)}}),C()});const y=M=>u._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:O,onError:B,onSuccess:Z,abortController:ee}=M,ne=O===!1&&!u.i(self)&&!u.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((me,ye)=>me&&ye==="accept",!0));c++;const ae=ne?T(z,ee):u.m(z,ee);try{const me=yield ae;delete M.abortController,M.state="completed",me.data instanceof HTMLImageElement||u.b(me.data)?Z(me):me.data&&Z({data:yield(fe=me.data,typeof createImageBitmap=="function"?u.d(fe):u.f(fe)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete M.abortController,B(me)}finally{c--,C()}var fe}),C=()=>{const M=(()=>{for(const z of Object.keys(m))if(m[z]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=c;z<M&&r.length>0;z++){const O=r.shift();O.abortController.signal.aborted?z--:y(O)}},T=(M,z)=>new Promise((O,B)=>{const Z=new Image,ee=M.url,ne=M.credentials;ne&&ne==="include"?Z.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!u.s(ee))&&(Z.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{Z.src="",B(u.c())}),Z.fetchPriority="high",Z.onload=()=>{Z.onerror=Z.onload=null,O({data:Z})},Z.onerror=()=>{Z.onerror=Z.onload=null,z.signal.aborted||B(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Z.src=ee})}(V||(V={})),V.resetRequestQueue();class Y{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ce(v){var r=new u.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var de,le=function(v,r,c){return v[0]=r[0]-c[0],v[1]=r[1]-c[1],v[2]=r[2]-c[2],v};de=new u.A(3),u.A!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0);var ge=function(v){var r=v[0],c=v[1];return r*r+c*c};function Ae(v){const r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){const c=[];for(const{id:f,url:m}of v){const y=`${f}${m}`;c.indexOf(y)===-1&&(c.push(y),r.push({id:f,url:m}))}}return r}function H(v,r,c){const f=v.split("?");return f[0]+=`${r}${c}`,f.join("?")}(function(){var v=new u.A(2);u.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Ee{constructor(r,c,f,m){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(c,m)}update(r,c,f){const{width:m,height:y}=r,C=!(this.size&&this.size[0]===m&&this.size[1]===y||f),{context:T}=this,{gl:M}=T;if(this.useMipmap=!!(c&&c.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),T.pixelStoreUnpackFlipY.set(!1),T.pixelStoreUnpack.set(1),T.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!c||c.premultiply!==!1)),C)this.size=[m,y],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,r):M.texImage2D(M.TEXTURE_2D,0,this.format,m,y,0,this.format,M.UNSIGNED_BYTE,r.data);else{const{x:z,y:O}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||u.b(r)?M.texSubImage2D(M.TEXTURE_2D,0,z,O,M.RGBA,M.UNSIGNED_BYTE,r):M.texSubImage2D(M.TEXTURE_2D,0,z,O,m,y,M.RGBA,M.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(r,c,f){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),f!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=y.LINEAR),r!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,r),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,f||r),this.filter=r),c!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,c),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function je(v){const{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class $e extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new u.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let f=!0;const m=c.data||c.spriteData;return this._validateStretch(c.stretchX,m&&m.width)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,m&&m.height)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new u.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,c){if(!r)return!0;let f=0;for(const m of r){if(m[0]<f||m[1]<m[0]||c<m[1])return!1;f=m[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const f=c.spriteData,m=f&&f.width||c.data.width,y=f&&f.height||c.data.height;return!(r[0]<0||m<r[0]||r[1]<0||y<r[1]||r[2]<0||m<r[2]||r[3]<0||y<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,f=!0){const m=this.getImage(r);if(f&&(m.data.width!==c.data.width||m.data.height!==c.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=m.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,f)=>{let m=!0;if(!this.isLoaded())for(const y of r)this.images[y]||(m=!1);this.isLoaded()||m?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){const c={};for(const f of r){let m=this.getImage(f);m||(this.fire(new u.k("styleimagemissing",{id:f})),m=this.getImage(f)),m?c[f]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:u.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],f=this.getImage(r);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const m={w:f.data.width+2,h:f.data.height+2,x:0,y:0},y=new u.I(m,f);this.patterns[r]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ee(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const y in this.patterns)r.push(this.patterns[y].bin);const{w:c,h:f}=u.p(r),m=this.atlasImage;m.resize({width:c||1,height:f||1});for(const y in this.patterns){const{bin:C}=this.patterns[y],T=C.x+1,M=C.y+1,z=this.getImage(y).data,O=z.width,B=z.height;u.R.copy(z,m,{x:0,y:0},{x:T,y:M},{width:O,height:B}),u.R.copy(z,m,{x:0,y:B-1},{x:T,y:M-1},{width:O,height:1}),u.R.copy(z,m,{x:0,y:0},{x:T,y:M+B},{width:O,height:1}),u.R.copy(z,m,{x:O-1,y:0},{x:T-1,y:M},{width:1,height:B}),u.R.copy(z,m,{x:0,y:0},{x:T+O,y:M},{width:1,height:B})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||u.w(`Image with ID: "${c}" was not found`),je(f)&&this.updateImage(c,f)}}}const Le=1e20;function De(v,r,c,f,m,y,C,T,M){for(let z=r;z<r+f;z++)We(v,c*y+z,y,m,C,T,M);for(let z=c;z<c+m;z++)We(v,z*y+r,1,f,C,T,M)}function We(v,r,c,f,m,y,C){y[0]=0,C[0]=-Le,C[1]=Le,m[0]=v[r];for(let T=1,M=0,z=0;T<f;T++){m[T]=v[r+T*c];const O=T*T;do{const B=y[M];z=(m[T]-m[B]+O-B*B)/(T-B)/2}while(z<=C[M]&&--M>-1);M++,y[M]=T,C[M]=z,C[M+1]=Le}for(let T=0,M=0;T<f;T++){for(;C[M+1]<T;)M++;const z=y[M],O=T-z;v[r+T*c]=m[z]+O*O}}class ut{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return u._(this,void 0,void 0,function*(){const c=[];for(const y in r)for(const C of r[y])c.push(this._getAndCacheGlyphsPromise(y,C));const f=yield Promise.all(c),m={};for(const{stack:y,id:C,glyph:T}of f)m[y]||(m[y]={}),m[y][C]=T&&{id:T.id,bitmap:T.bitmap.clone(),metrics:T.metrics};return m})}_getAndCacheGlyphsPromise(r,c){return u._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=f.glyphs[c];if(m!==void 0)return{stack:r,id:c,glyph:m};if(m=this._tinySDF(f,r,c),m)return f.glyphs[c]=m,{stack:r,id:c,glyph:m};const y=Math.floor(c/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[y])return{stack:r,id:c,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[y]){const T=ut.loadGlyphRange(r,y,this.url,this.requestManager);f.requests[y]=T}const C=yield f.requests[y];for(const T in C)this._doesCharSupportLocalGlyph(+T)||(f.glyphs[+T]=C[+T]);return f.ranges[y]=!0,{stack:r,id:c,glyph:C[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,c,f){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(f))return;let y=r.tinySDF;if(!y){let T="400";/bold/i.test(c)?T="900":/medium/i.test(c)?T="500":/light/i.test(c)&&(T="200"),y=r.tinySDF=new ut.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:T})}const C=y.draw(String.fromCharCode(f));return{id:f,bitmap:new u.o({width:C.width||60,height:C.height||60},C.data),metrics:{width:C.glyphWidth/2||24,height:C.glyphHeight/2||24,left:C.glyphLeft/2+.5||0,top:C.glyphTop/2-27.5||-8,advance:C.glyphAdvance/2||24,isDoubleResolution:!0}}}}ut.loadGlyphRange=function(v,r,c,f){return u._(this,void 0,void 0,function*(){const m=256*r,y=m+255,C=f.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${m}-${y}`),"Glyphs"),T=yield u.l(C,new AbortController);if(!T||!T.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${y}`);const M={};for(const z of u.n(T.data))M[z.id]=z;return M})},ut.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:c=8,cutoff:f=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:C="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=c;const T=this.size=v+4*r,M=this._createCanvas(T),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${C} ${y} ${v}px ${m}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(T*T),this.gridInner=new Float64Array(T*T),this.f=new Float64Array(T),this.z=new Float64Array(T+1),this.v=new Uint16Array(T)}_createCanvas(v){const r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(v),C=Math.ceil(c),T=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),M=Math.min(this.size-this.buffer,C+Math.ceil(f)),z=T+2*this.buffer,O=M+2*this.buffer,B=Math.max(z*O,0),Z=new Uint8ClampedArray(B),ee={data:Z,width:z,height:O,glyphWidth:T,glyphHeight:M,glyphTop:C,glyphLeft:0,glyphAdvance:r};if(T===0||M===0)return ee;const{ctx:ne,buffer:ae,gridInner:fe,gridOuter:me}=this;ne.clearRect(ae,ae,T,M),ne.fillText(v,ae,ae+C);const ye=ne.getImageData(ae,ae,T,M);me.fill(Le,0,B),fe.fill(0,0,B);for(let ie=0;ie<M;ie++)for(let xe=0;xe<T;xe++){const Ce=ye.data[4*(ie*T+xe)+3]/255;if(Ce===0)continue;const Pe=(ie+ae)*z+xe+ae;if(Ce===1)me[Pe]=0,fe[Pe]=Le;else{const Ne=.5-Ce;me[Pe]=Ne>0?Ne*Ne:0,fe[Pe]=Ne<0?Ne*Ne:0}}De(me,0,0,z,O,z,this.f,this.v,this.z),De(fe,ae,ae,T,M,z,this.f,this.v,this.z);for(let ie=0;ie<B;ie++){const xe=Math.sqrt(me[ie])-Math.sqrt(fe[ie]);Z[ie]=Math.round(255-255*(xe/this.radius+this.cutoff))}return ee}};class Be{constructor(){this.specification=u.v.light.position}possiblyEvaluate(r,c){return u.x(r.expression.evaluate(c))}interpolate(r,c,f){return{x:u.y.number(r.x,c.x,f),y:u.y.number(r.y,c.y,f),z:u.y.number(r.z,c.z,f)}}}let Ye;class pt extends u.E{constructor(r){super(),Ye=Ye||new u.q({anchor:new u.D(u.v.light.anchor),position:new Be,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(Ye),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(u.r,r,c))for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f){return(!f||f.validate!==!1)&&u.t(this,r.call(u.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const St=new u.q({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class At extends u.E{constructor(r){super(),this._transitionable=new u.T(St),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.z(0))}setSky(r,c={}){if(!this._validate(u.B,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const m=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),m):this._transitionable.setValue(f,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f={}){return(f==null?void 0:f.validate)!==!1&&u.t(this,r.call(u.u,u.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Nt{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const f=r.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,c)),this.dashEntry[f]}getDashRanges(r,c,f){const m=[];let y=r.length%2==1?-r[r.length-1]*f:0,C=r[0]*f,T=!0;m.push({left:y,right:C,isDash:T,zeroLength:r[0]===0});let M=r[0];for(let z=1;z<r.length;z++){T=!T;const O=r[z];y=M*f,M+=O,C=M*f,m.push({left:y,right:C,isDash:T,zeroLength:O===0})}return m}addRoundDash(r,c,f){const m=c/2;for(let y=-f;y<=f;y++){const C=this.width*(this.nextRow+f+y);let T=0,M=r[T];for(let z=0;z<this.width;z++){z/M.right>1&&(M=r[++T]);const O=Math.abs(z-M.left),B=Math.abs(z-M.right),Z=Math.min(O,B);let ee;const ne=y/f*(m+1);if(M.isDash){const ae=m-Math.abs(ne);ee=Math.sqrt(Z*Z+ae*ae)}else ee=m-Math.sqrt(Z*Z+ne*ne);this.data[C+z]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(r){for(let T=r.length-1;T>=0;--T){const M=r[T],z=r[T+1];M.zeroLength?r.splice(T,1):z&&z.isDash===M.isDash&&(z.left=M.left,r.splice(T,1))}const c=r[0],f=r[r.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const m=this.width*this.nextRow;let y=0,C=r[y];for(let T=0;T<this.width;T++){T/C.right>1&&(C=r[++y]);const M=Math.abs(T-C.left),z=Math.abs(T-C.right),O=Math.min(M,z);this.data[m+T]=Math.max(0,Math.min(255,(C.isDash?O:-O)+128))}}addDash(r,c){const f=c?7:0,m=2*f+1;if(this.nextRow+m>this.height)return u.w("LineAtlas out of space"),null;let y=0;for(let T=0;T<r.length;T++)y+=r[T];if(y!==0){const T=this.width/y,M=this.getDashRanges(r,this.width,T);c?this.addRoundDash(M,T,f):this.addRegularDash(M)}const C={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:y};return this.nextRow+=m,this.dirty=!0,C}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Lt="maplibre_preloaded_worker_pool";class Zt{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Zt.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Lt]}numActive(){return Object.keys(this.active).length}}const un=Math.floor(E.hardwareConcurrency/2);let en,Bn;function Sn(){return en||(en=new Zt),en}Zt.workerCount=u.C(globalThis)?Math.max(Math.min(un,3),1):1;class jt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const f=this.workerPool.acquire(c);for(let m=0;m<f.length;m++){const y=new u.F(f[m],c);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const f=[];for(const m of this.actors)f.push(m.sendAsync({type:r,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const f of this.actors)f.registerMessageHandler(r,c)}}function tn(){return Bn||(Bn=new jt(Sn(),u.G),Bn.registerMessageHandler("GR",(v,r,c)=>u.m(r,c))),Bn}function Ut(v,r){const c=u.H();return u.J(c,c,[1,1,0]),u.K(c,c,[.5*v.width,.5*v.height,1]),u.L(c,c,v.calculatePosMatrix(r.toUnwrapped()))}function gn(v,r,c,f,m,y){const C=function(B,Z,ee){if(B)for(const ne of B){const ae=Z[ne];if(ae&&ae.source===ee&&ae.type==="fill-extrusion")return!0}else for(const ne in Z){const ae=Z[ne];if(ae.source===ee&&ae.type==="fill-extrusion")return!0}return!1}(m&&m.layers,r,v.id),T=y.maxPitchScaleFactor(),M=v.tilesIn(f,T,C);M.sort(yt);const z=[];for(const B of M)z.push({wrappedTileID:B.tileID.wrapped().key,queryResults:B.tile.queryRenderedFeatures(r,c,v._state,B.queryGeometry,B.cameraQueryGeometry,B.scale,m,y,T,Ut(v.transform,B.tileID))});const O=function(B){const Z={},ee={};for(const ne of B){const ae=ne.queryResults,fe=ne.wrappedTileID,me=ee[fe]=ee[fe]||{};for(const ye in ae){const ie=ae[ye],xe=me[ye]=me[ye]||{},Ce=Z[ye]=Z[ye]||[];for(const Pe of ie)xe[Pe.featureIndex]||(xe[Pe.featureIndex]=!0,Ce.push(Pe))}}return Z}(z);for(const B in O)O[B].forEach(Z=>{const ee=Z.feature,ne=v.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=ne});return O}function yt(v,r){const c=v.tileID,f=r.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function zt(v,r,c){return u._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield u.h(r.transformRequest(v.url,"Source"),c)).data:yield E.frameAsync(c),!f)return null;const m=u.M(u.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(m.vectorLayerIds=f.vector_layers.map(y=>y.id)),m})}class we{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof u.N?new u.N(r.lng,r.lat):u.N.convert(r),this}extend(r){const c=this._sw,f=this._ne;let m,y;if(r instanceof u.N)m=r,y=r;else{if(!(r instanceof we))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(we.convert(r)):this.extend(u.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(u.N.convert(r)):this;if(m=r._sw,y=r._ne,!m||!y)return this}return c||f?(c.lng=Math.min(m.lng,c.lng),c.lat=Math.min(m.lat,c.lat),f.lng=Math.max(y.lng,f.lng),f.lat=Math.max(y.lat,f.lat)):(this._sw=new u.N(m.lng,m.lat),this._ne=new u.N(y.lng,y.lat)),this}getCenter(){return new u.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.N(this.getWest(),this.getNorth())}getSouthEast(){return new u.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:f}=u.N.convert(r);let m=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&m}static convert(r){return r instanceof we?r:r&&new we(r)}static fromLngLat(r,c=0){const f=360*c/40075017,m=f/Math.cos(Math.PI/180*r.lat);return new we(new u.N(r.lng-m,r.lat-f),new u.N(r.lng+m,r.lat+f))}adjustAntiMeridian(){const r=new u.N(this._sw.lng,this._sw.lat),c=new u.N(this._ne.lng,this._ne.lat);return new we(r,r.lng>c.lng?new u.N(c.lng+360,c.lat):c)}}class ir{constructor(r,c,f){this.bounds=we.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),f=Math.floor(u.O(this.bounds.getWest())*c),m=Math.floor(u.Q(this.bounds.getNorth())*c),y=Math.ceil(u.O(this.bounds.getEast())*c),C=Math.ceil(u.Q(this.bounds.getSouth())*c);return r.x>=f&&r.x<y&&r.y>=m&&r.y<C}}class pn extends u.E{constructor(r,c,f,m){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.M(c,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(u.e(this,r),r.bounds&&(this.tileBounds=new ir(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(r){return u._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((y,C)=>{r.reloadPromise={resolve:y,reject:C}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{const y=yield r.actor.sendAsync({type:m,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,y)}catch(y){if(delete r.abortController,r.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class ht extends u.E{constructor(r,c,f,m){super(),this.id=r,this.dispatcher=f,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},c),u.e(this,u.M(c,["url","scheme","tileSize"]))}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield zt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(u.e(this,r),r.bounds&&(this.tileBounds=new ir(r.bounds,this.minzoom,this.maxzoom)),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new u.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return u.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return u._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield V.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const m=this.map.painter.context,y=m.gl,C=f.data;r.texture=this.map.painter.getTileTexture(C.width),r.texture?r.texture.update(C,{useMipmap:!0}):(r.texture=new Ee(m,C,y.RGBA,{useMipmap:!0}),r.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class Vt extends ht{constructor(r,c,f,m){super(r,c,f,m),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return u._(this,void 0,void 0,function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const m=yield V.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const C=u.b(y)&&u.U()?y:yield this.readImageNow(y),T={type:this.type,uid:r.uid,source:this.id,rawImageData:C,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const M=yield r.actor.sendAsync({type:"LDT",data:T});r.dem=M,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.V()){const c=r.width+2,f=r.height+2;try{return new u.R({width:c,height:f},yield u.W(r,-1,-1,c,f))}catch{}}return E.getImageData(r,1)})}_getNeighboringTiles(r){const c=r.canonical,f=Math.pow(2,c.z),m=(c.x-1+f)%f,y=c.x===0?r.wrap-1:r.wrap,C=(c.x+1+f)%f,T=c.x+1===f?r.wrap+1:r.wrap,M={};return M[new u.S(r.overscaledZ,y,c.z,m,c.y).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,c.z,C,c.y).key]={backfilled:!1},c.y>0&&(M[new u.S(r.overscaledZ,y,c.z,m,c.y-1).key]={backfilled:!1},M[new u.S(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,c.z,C,c.y-1).key]={backfilled:!1}),c.y+1<f&&(M[new u.S(r.overscaledZ,y,c.z,m,c.y+1).key]={backfilled:!1},M[new u.S(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},M[new u.S(r.overscaledZ,T,c.z,C,c.y+1).key]={backfilled:!1}),M}unloadTile(r){return u._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class an extends u.E{constructor(r,c,f,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(m),this._data=c.data,this._options=u.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;const y=u.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*y,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*y,extent:u.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:u.X,radius:(c.clusterRadius||50)*y,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return u._(this,void 0,void 0,function*(){const r=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:f}})}_updateWorkerData(r){return u._(this,void 0,void 0,function*(){const c=u.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(E.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.k("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new u.k("dataabort",{dataType:"source"}));let m=null;f.resourceTiming&&f.resourceTiming[this.id]&&(m=f.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&u.e(y,{resourceTiming:m}),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new u.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new u.k("dataabort",{dataType:"source"}));this.fire(new u.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return u._(this,void 0,void 0,function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;const m=yield this.actor.sendAsync({type:c,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,c==="RT")})}abortTile(r){return u._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return u._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Qn=u.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class bt extends u.E{constructor(r,c,f,m){super(),this.id=r,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=c}load(r){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield V.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new u.j(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(u.Z.fromLngLat);this.tileID=function(m){let y=1/0,C=1/0,T=-1/0,M=-1/0;for(const Z of m)y=Math.min(y,Z.x),C=Math.min(C,Z.y),T=Math.max(T,Z.x),M=Math.max(M,Z.y);const z=Math.max(T-y,M-C),O=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),B=Math.pow(2,O);return new u.a1(O,Math.floor((y+T)/2*B),Math.floor((C+M)/2*B))}(c),this.minzoom=this.maxzoom=this.tileID.z;const f=c.map(m=>this.tileID.getTilePoint(m)._round());return this._boundsArray=new u.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,u.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,u.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,u.X,u.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new u.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Ee(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Mn extends bt{constructor(r,c,f,m){super(r,c,f,m),this.roundZoom=!0,this.type="video",this.options=c}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield u.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new u.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new u.j(new u.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Ee(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,f=!0)}f&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class pr extends bt{constructor(r,c,f,m){super(r,c,f,m),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(y=>!Array.isArray(y)||y.length!==2||y.some(C=>typeof C!="number"))||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new u.j(new u.a2(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new u.j(new u.a2(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.j(new u.a2(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,Qn.members)),this.boundsSegments||(this.boundsSegments=u.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ee(c,this.canvas,f.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const C=this.tiles[y];C.state!=="loaded"&&(C.state="loaded",C.texture=this.texture,m=!0)}m&&this.fire(new u.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const Zr={},fr=v=>{switch(v){case"geojson":return an;case"image":return bt;case"raster":return ht;case"raster-dem":return Vt;case"vector":return pn;case"video":return Mn;case"canvas":return pr}return Zr[v]},Ge="RTLPluginLoaded";class or extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=tn()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return u._(this,arguments,void 0,function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=E.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.k(Ge))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Wn=null;function on(){return Wn||(Wn=new or),Wn}class Ir{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=u.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){const c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,y){const C={};if(!y)return C;for(const T of m){const M=T.layerIds.map(z=>y.getLayer(z)).filter(Boolean);if(M.length!==0){T.layers=M,T.stateDependentLayerIds&&(T.stateDependentLayers=T.stateDependentLayerIds.map(z=>M.filter(O=>O.id===z)[0]));for(const z of M)C[z.id]=T}}return C}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6){if(this.hasSymbolBuckets=!0,!f)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof u.a6&&y.hasRTLText){this.hasRTLText=!0,on().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(m).queryRadius(y))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const m=this.buckets[f];m.uploadPending()&&m.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ee(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ee(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,f,m,y,C,T,M,z,O){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:C,tileSize:this.tileSize,pixelPosMatrix:O,transform:M,params:T,queryPadding:this.queryPadding*z},r,c,f):{}}querySourceFeatures(r,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const m=f.loadVTLayers(),y=c&&c.sourceLayer?c.sourceLayer:"",C=m._geojsonTileLayer||m[y];if(!C)return;const T=u.a7(c&&c.filter),{z:M,x:z,y:O}=this.tileID.canonical,B={z:M,x:z,y:O};for(let Z=0;Z<C.length;Z++){const ee=C.feature(Z);if(T.needGeometry){const fe=u.a8(ee,!0);if(!T.filter(new u.z(this.tileID.overscaledZ),fe,this.tileID.canonical))continue}else if(!T.filter(new u.z(this.tileID.overscaledZ),ee))continue;const ne=f.getId(ee,y),ae=new u.a9(ee,M,z,O,ne);ae.tile=B,r.push(ae)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const f=u.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let m=!1;if(this.expirationTime>f)m=!1;else if(c)if(this.expirationTime<c)m=!0;else{const y=this.expirationTime-c;y?this.expirationTime=f+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!c.style.hasLayer(m))continue;const y=this.buckets[m],C=y.layers[0].sourceLayer||"_geojsonTileLayer",T=f[C],M=r[C];if(!T||!M||Object.keys(M).length===0)continue;y.update(M,T,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=c&&c.style&&c.style.getLayer(m);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<E.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=E.now()+r}setDependencies(r,c){const f={};for(const m of c)f[m]=!0;this.dependencies[r]=f}hasDependency(r,c){for(const f of r){const m=this.dependencies[f];if(m){for(const y of c)if(m[y])return!0}}return!1}}class Ze{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(const r in this.data)for(const c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,f){const m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:c,timeout:void 0};if(f!==void 0&&(y.timeout=setTimeout(()=>{this.remove(r,y)},f)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const C=this._getAndRemoveByKey(this.order[0]);C&&this.onRemove(C)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){const c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){const c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;const f=r.wrapped().key,m=c===void 0?0:this.data[f].indexOf(c),y=this.data[f][m];return this.data[f].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(y.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){const c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){const c=[];for(const f in this.data)for(const m of this.data[f])r(m.value)||c.push(m);for(const f of c)this.remove(f.value.tileID,f)}}class Ke{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,f){const m=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},u.e(this.stateChanges[r][m],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const y in this.state[r])y!==m&&(this.deletedStates[r][y]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(const y in this.state[r][m])f[y]||(this.deletedStates[r][m][y]=null)}else for(const y in f)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][y]===null&&delete this.deletedStates[r][m][y]}removeFeatureState(r,c,f){if(this.deletedStates[r]===null)return;const m=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&c!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][f]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][m])for(f in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][f]=null;else this.deletedStates[r][m]=null;else this.deletedStates[r]=null}getState(r,c){const f=String(c),m=u.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const y=this.deletedStates[r][c];if(y===null)return{};for(const C in y)delete m[C]}return m}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const f={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const C in this.stateChanges[m])this.state[m][C]||(this.state[m][C]={}),u.e(this.state[m][C],this.stateChanges[m][C]),y[C]=this.state[m][C];f[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const C in this.state[m])y[C]={},this.state[m][C]={};else for(const C in this.deletedStates[m]){if(this.deletedStates[m][C]===null)this.state[m][C]={};else for(const T of Object.keys(this.deletedStates[m][C]))delete this.state[m][C][T];y[C]=this.state[m][C]}f[m]=f[m]||{},u.e(f[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const m in r)r[m].setFeatureState(f,c)}}class it extends u.E{constructor(r,c,f){super(),this.id=r,this.dispatcher=f,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,y,C,T)=>{const M=new(fr(y.type))(m,y,C,T);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(r,c,f,this),this._tiles={},this._cache=new Ze(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Ke,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r in this._tiles){const c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,f){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,f)}catch(m){r.state="errored",m.status!==404?this._source.fire(new u.j(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new u.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const c in this._tiles){const f=this._tiles[c];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ln).map(r=>r.key)}getRenderableIds(r){const c=[];for(const f in this._tiles)this._isIdRenderable(f,r)&&c.push(this._tiles[f]);return r?c.sort((f,m)=>{const y=f.tileID,C=m.tileID,T=new u.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new u.P(C.canonical.x,C.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-C.overscaledZ||M.y-T.y||M.x-T.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(ln).map(f=>f.key)}hasRenderableParent(r){const c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){return u._(this,void 0,void 0,function*(){const f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,r,c))})}_tileLoaded(r,c,f){r.timeAdded=E.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new u.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){const c=this.getRenderableIds();for(let m=0;m<c.length;m++){const y=c[m];if(r.neighboringTiles&&r.neighboringTiles[y]){const C=this.getTileByID(y);f(r,C),f(C,r)}}function f(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let C=y.tileID.canonical.x-m.tileID.canonical.x;const T=y.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),z=y.tileID.key;C===0&&T===0||Math.abs(T)>1||(Math.abs(C)>1&&(Math.abs(C+M)===1?C+=M:Math.abs(C-M)===1&&(C-=M)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,C,T),m.neighboringTiles&&m.neighboringTiles[z]&&(m.neighboringTiles[z].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,f,m){for(const y in this._tiles){let C=this._tiles[y];if(m[y]||!C.hasData()||C.tileID.overscaledZ<=c||C.tileID.overscaledZ>f)continue;let T=C.tileID;for(;C&&C.tileID.overscaledZ>c+1;){const z=C.tileID.scaledTo(C.tileID.overscaledZ-1);C=this._tiles[z.key],C&&C.hasData()&&(T=z)}let M=T;for(;M.overscaledZ>c;)if(M=M.scaledTo(M.overscaledZ-1),r[M.key]){m[T.key]=T;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){const f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=r.overscaledZ-1;f>=c;f--){const m=r.scaledTo(f),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){const c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){const f={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+c),f[y.tileID.key]=y}this._tiles=f;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,c,f,m,y,C){const T={},M={},z=Object.keys(r),O=E.now();for(const B of z){const Z=r[B],ee=this._tiles[B];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=O)continue;const ne=this.findLoadedParent(Z,c),ae=this.findLoadedSibling(Z),fe=ne||ae||null;fe&&(this._addTile(fe.tileID),T[fe.tileID.key]=fe.tileID),M[B]=Z}this._retainLoadedChildren(M,m,f,r);for(const B in T)r[B]||(this._coveredTiles[B]=!0,r[B]=T[B]);if(C){const B={},Z={};for(const ee of y)this._tiles[ee.key].hasData()?B[ee.key]=ee:Z[ee.key]=ee;for(const ee in Z){const ne=Z[ee].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(B[ne[0].key]=r[ne[0].key]=ne[0],B[ne[1].key]=r[ne[1].key]=ne[1],B[ne[2].key]=r[ne[2].key]=ne[2],B[ne[3].key]=r[ne[3].key]=ne[3],delete Z[ee])}for(const ee in Z){const ne=Z[ee],ae=this.findLoadedParent(ne,this._source.minzoom),fe=this.findLoadedSibling(ne),me=ae||fe||null;if(me){B[me.tileID.key]=r[me.tileID.key]=me.tileID;for(const ye in B)B[ye].isChildOf(me.tileID)&&delete B[ye]}}for(const ee in this._tiles)B[ee]||(this._coveredTiles[ee]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new u.S(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(O=>this._source.hasTile(O)))):f=[];const m=r.coveringZoomLevel(this._source),y=Math.max(m-it.maxOverzooming,this._source.minzoom),C=Math.max(m+it.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const B of f)if(B.canonical.z>this._source.minzoom){const Z=B.scaledTo(B.canonical.z-1);O[Z.key]=Z;const ee=B.scaledTo(Math.max(this._source.minzoom,Math.min(B.canonical.z,5)));O[ee.key]=ee}f=f.concat(Object.values(O))}const T=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,T&&this.fire(new u.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,m);Pr(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,C,m,f,c);for(const O in M)this._tiles[O].clearFadeHold();const z=u.ab(this._tiles,M);for(const O of z){const B=this._tiles[O];B.hasSymbolBuckets&&!B.holdingForFade()?B.setHoldDuration(this.map._fadeDuration):B.hasSymbolBuckets&&!B.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var f;const m={},y={},C=Math.max(c-it.maxOverzooming,this._source.minzoom),T=Math.max(c+it.maxUnderzooming,this._source.minzoom),M={};for(const z of r){const O=this._addTile(z);m[z.key]=z,O.hasData()||c<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,c,T,m);for(const z of r){let O=this._tiles[z.key];if(O.hasData())continue;if(c+1>this._source.maxzoom){const Z=z.children(this._source.maxzoom)[0],ee=this.getTile(Z);if(ee&&ee.hasData()){m[Z.key]=Z;continue}}else{const Z=z.children(this._source.maxzoom);if(m[Z[0].key]&&m[Z[1].key]&&m[Z[2].key]&&m[Z[3].key])continue}let B=O.wasRequested();for(let Z=z.overscaledZ-1;Z>=C;--Z){const ee=z.scaledTo(Z);if(y[ee.key])break;if(y[ee.key]=!0,O=this.getTile(ee),!O&&B&&(O=this._addTile(ee)),O){const ne=O.hasData();if((ne||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||B)&&(m[ee.key]=ee),B=O.wasRequested(),ne)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const r in this._tiles){const c=[];let f,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){f=this._loadedParentTiles[m.key];break}c.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(f=this._getLoadedTile(y),f)break;m=y}for(const y of c)this._loadedParentTiles[y]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const r in this._tiles){const c=this._tiles[r].tileID,f=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=f}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));const f=c;return c||(c=new Ir(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,f||this._source.fire(new u.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);const f=c.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){const c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){const c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,f){const m=[],y=this.transform;if(!y)return m;const C=f?y.getCameraQueryGeometry(r):r,T=r.map(ne=>y.pointCoordinate(ne,this.terrain)),M=C.map(ne=>y.pointCoordinate(ne,this.terrain)),z=this.getIds();let O=1/0,B=1/0,Z=-1/0,ee=-1/0;for(const ne of M)O=Math.min(O,ne.x),B=Math.min(B,ne.y),Z=Math.max(Z,ne.x),ee=Math.max(ee,ne.y);for(let ne=0;ne<z.length;ne++){const ae=this._tiles[z[ne]];if(ae.holdingForFade())continue;const fe=ae.tileID,me=Math.pow(2,y.zoom-ae.tileID.overscaledZ),ye=c*ae.queryPadding*u.X/ae.tileSize/me,ie=[fe.getTilePoint(new u.Z(O,B)),fe.getTilePoint(new u.Z(Z,ee))];if(ie[0].x-ye<u.X&&ie[0].y-ye<u.X&&ie[1].x+ye>=0&&ie[1].y+ye>=0){const xe=T.map(Pe=>fe.getTilePoint(Pe)),Ce=M.map(Pe=>fe.getTilePoint(Pe));m.push({tile:ae,tileID:fe,queryGeometry:xe,cameraQueryGeometry:Ce,scale:me})}}return m}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(const f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Pr(this._source.type)){const r=E.now();for(const c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,f){this._state.updateState(r=r||"_geojsonTileLayer",c,f)}removeFeatureState(r,c,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,f)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,f){const m=this._tiles[r];m&&m.setDependencies(c,f)}reloadTilesForDependencies(r,c){for(const f in this._tiles)this._tiles[f].hasDependency(r,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,c))}}function ln(v,r){const c=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||f-c||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Pr(v){return v==="raster"||v==="image"||v==="video"}it.maxOverzooming=10,it.maxUnderzooming=3;class Rt{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=u.ac(r,0,1);let c=1,f=this._distances[c];const m=r*this.paddedLength+this.padding;for(;f<m&&c<this._distances.length;)f=this._distances[++c];const y=c-1,C=this._distances[y],T=f-C,M=T>0?(m-C)/T:0;return this.points[y].mult(1-M).add(this.points[c].mult(M))}}function oo(v,r){let c=!0;return v==="always"||v!=="never"&&r!=="never"||(c=!1),c}class So{constructor(r,c,f){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(c/f);for(let C=0;C<this.xCellCount*this.yCellCount;C++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,f,m,y){this._forEachCell(c,f,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(r,c,f,m){this._forEachCell(c-m,f-m,c+m,f+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(f),this.circles.push(m)}_insertBoxCell(r,c,f,m,y,C){this.boxCells[y].push(C)}_insertCircleCell(r,c,f,m,y,C){this.circleCells[y].push(C)}_query(r,c,f,m,y,C,T){if(f<0||r>this.width||m<0||c>this.height)return[];const M=[];if(r<=0&&c<=0&&this.width<=f&&this.height<=m){if(y)return[{key:null,x1:r,y1:c,x2:f,y2:m}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const O=this.circles[3*z],B=this.circles[3*z+1],Z=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:O-Z,y1:B-Z,x2:O+Z,y2:B+Z})}}else this._forEachCell(r,c,f,m,this._queryCell,M,{hitTest:y,overlapMode:C,seenUids:{box:{},circle:{}}},T);return M}query(r,c,f,m){return this._query(r,c,f,m,!1,null)}hitTest(r,c,f,m,y,C){return this._query(r,c,f,m,!0,y,C).length>0}hitTestCircle(r,c,f,m,y){const C=r-f,T=r+f,M=c-f,z=c+f;if(T<0||C>this.width||z<0||M>this.height)return!1;const O=[];return this._forEachCell(C,M,T,z,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:r,y:c,radius:f},seenUids:{box:{},circle:{}}},y),O.length>0}_queryCell(r,c,f,m,y,C,T,M){const{seenUids:z,hitTest:O,overlapMode:B}=T,Z=this.boxCells[y];if(Z!==null){const ne=this.bboxes;for(const ae of Z)if(!z.box[ae]){z.box[ae]=!0;const fe=4*ae,me=this.boxKeys[ae];if(r<=ne[fe+2]&&c<=ne[fe+3]&&f>=ne[fe+0]&&m>=ne[fe+1]&&(!M||M(me))&&(!O||!oo(B,me.overlapMode))&&(C.push({key:me,x1:ne[fe],y1:ne[fe+1],x2:ne[fe+2],y2:ne[fe+3]}),O))return!0}}const ee=this.circleCells[y];if(ee!==null){const ne=this.circles;for(const ae of ee)if(!z.circle[ae]){z.circle[ae]=!0;const fe=3*ae,me=this.circleKeys[ae];if(this._circleAndRectCollide(ne[fe],ne[fe+1],ne[fe+2],r,c,f,m)&&(!M||M(me))&&(!O||!oo(B,me.overlapMode))){const ye=ne[fe],ie=ne[fe+1],xe=ne[fe+2];if(C.push({key:me,x1:ye-xe,y1:ie-xe,x2:ye+xe,y2:ie+xe}),O)return!0}}}return!1}_queryCellCircle(r,c,f,m,y,C,T,M){const{circle:z,seenUids:O,overlapMode:B}=T,Z=this.boxCells[y];if(Z!==null){const ne=this.bboxes;for(const ae of Z)if(!O.box[ae]){O.box[ae]=!0;const fe=4*ae,me=this.boxKeys[ae];if(this._circleAndRectCollide(z.x,z.y,z.radius,ne[fe+0],ne[fe+1],ne[fe+2],ne[fe+3])&&(!M||M(me))&&!oo(B,me.overlapMode))return C.push(!0),!0}}const ee=this.circleCells[y];if(ee!==null){const ne=this.circles;for(const ae of ee)if(!O.circle[ae]){O.circle[ae]=!0;const fe=3*ae,me=this.circleKeys[ae];if(this._circlesCollide(ne[fe],ne[fe+1],ne[fe+2],z.x,z.y,z.radius)&&(!M||M(me))&&!oo(B,me.overlapMode))return C.push(!0),!0}}}_forEachCell(r,c,f,m,y,C,T,M){const z=this._convertToXCellCoord(r),O=this._convertToYCellCoord(c),B=this._convertToXCellCoord(f),Z=this._convertToYCellCoord(m);for(let ee=z;ee<=B;ee++)for(let ne=O;ne<=Z;ne++)if(y.call(this,r,c,f,m,this.xCellCount*ne+ee,C,T,M))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,f,m,y,C){const T=m-r,M=y-c,z=f+C;return z*z>T*T+M*M}_circleAndRectCollide(r,c,f,m,y,C,T){const M=(C-m)/2,z=Math.abs(r-(m+M));if(z>M+f)return!1;const O=(T-y)/2,B=Math.abs(c-(y+O));if(B>O+f)return!1;if(z<=M||B<=O)return!0;const Z=z-M,ee=B-O;return Z*Z+ee*ee<=f*f}}function Xo(v,r,c,f,m){const y=u.H();return r?(u.K(y,y,[1/m,1/m,1]),c||u.ad(y,y,f.angle)):u.L(y,f.labelPlaneMatrix,v),y}function so(v,r,c,f,m){if(r){const y=u.ae(v);return u.K(y,y,[m,m,1]),c||u.ad(y,y,-f.angle),y}return f.glCoordMatrix}function he(v,r,c,f){let m;f?(m=[v,r,f(v,r),1],u.af(m,m,c)):(m=[v,r,0,1],Yt(m,m,c));const y=m[3];return{point:new u.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function q(v,r){return .5+v/r*.5}function W(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function Q(v,r,c,f,m,y,C,T,M,z,O,B,Z,ee,ne){const ae=f?v.textSizeData:v.iconSizeData,fe=u.ag(ae,c.transform.zoom),me=[256/c.width*2+1,256/c.height*2+1],ye=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ye.clear();const ie=v.lineVertexArray,xe=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ce=c.transform.width/c.transform.height;let Pe=!1;for(let Ne=0;Ne<xe.length;Ne++){const He=xe.get(Ne);if(He.hidden||He.writingMode===u.ah.vertical&&!Pe){Tt(He.numGlyphs,ye);continue}Pe=!1;const nt=he(He.anchorX,He.anchorY,r,ne);if(!W(nt.point,me)){Tt(He.numGlyphs,ye);continue}const ct=q(c.transform.cameraToCenterDistance,nt.signedDistanceFromCamera),Qe=u.ai(ae,fe,He),Je=C?Qe/ct:Qe*ct,_t={getElevation:ne,labelPlaneMatrix:m,lineVertexArray:ie,pitchWithMap:C,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:z,tileAnchorPoint:new u.P(He.anchorX,He.anchorY),unwrappedTileID:O,width:B,height:Z,translation:ee},Ft=be(_t,He,Je,!1,T,r,y,v.glyphOffsetArray,ye,Ce,M);Pe=Ft.useVertical,(Ft.notEnoughRoom||Pe||Ft.needsFlipping&&be(_t,He,Je,!0,T,r,y,v.glyphOffsetArray,ye,Ce,M).notEnoughRoom)&&Tt(He.numGlyphs,ye)}f?v.text.dynamicLayoutVertexBuffer.updateData(ye):v.icon.dynamicLayoutVertexBuffer.updateData(ye)}function oe(v,r,c,f,m,y,C,T){const M=y.glyphStartIndex+y.numGlyphs,z=y.lineStartIndex,O=y.lineStartIndex+y.lineLength,B=r.getoffsetX(y.glyphStartIndex),Z=r.getoffsetX(M-1),ee=Ue(v*B,c,f,m,y.segment,z,O,T,C);if(!ee)return null;const ne=Ue(v*Z,c,f,m,y.segment,z,O,T,C);return ne?T.projectionCache.anyProjectionOccluded?null:{first:ee,last:ne}:null}function ve(v,r,c,f){return v===u.ah.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*f?{useVertical:!0}:(v===u.ah.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function be(v,r,c,f,m,y,C,T,M,z,O){const B=c/24,Z=r.lineOffsetX*B,ee=r.lineOffsetY*B;let ne;if(r.numGlyphs>1){const ae=r.glyphStartIndex+r.numGlyphs,fe=r.lineStartIndex,me=r.lineStartIndex+r.lineLength,ye=oe(B,T,Z,ee,f,r,O,v);if(!ye)return{notEnoughRoom:!0};const ie=he(ye.first.point.x,ye.first.point.y,C,v.getElevation).point,xe=he(ye.last.point.x,ye.last.point.y,C,v.getElevation).point;if(m&&!f){const Ce=ve(r.writingMode,ie,xe,z);if(Ce)return Ce}ne=[ye.first];for(let Ce=r.glyphStartIndex+1;Ce<ae-1;Ce++)ne.push(Ue(B*T.getoffsetX(Ce),Z,ee,f,r.segment,fe,me,v,O));ne.push(ye.last)}else{if(m&&!f){const fe=he(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,me=r.lineStartIndex+r.segment+1,ye=new u.P(v.lineVertexArray.getx(me),v.lineVertexArray.gety(me)),ie=he(ye.x,ye.y,y,v.getElevation),xe=ie.signedDistanceFromCamera>0?ie.point:function(Pe,Ne,He,nt,ct,Qe){return te(Pe,Ne,He,1,ct,Qe)}(v.tileAnchorPoint,ye,fe,0,y,v),Ce=ve(r.writingMode,fe,xe,z);if(Ce)return Ce}const ae=Ue(B*T.getoffsetX(r.glyphStartIndex),Z,ee,f,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,O);if(!ae||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[ae]}for(const ae of ne)u.aj(M,ae.point,ae.angle);return{}}function te(v,r,c,f,m,y){const C=v.add(v.sub(r)._unit()),T=m!==void 0?he(C.x,C.y,m,y.getElevation).point:Me(C.x,C.y,y).point,M=c.sub(T);return c.add(M._mult(f/M.mag()))}function ue(v,r,c){const f=r.projectionCache;if(f.projections[v])return f.projections[v];const m=new u.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),y=Me(m.x,m.y,r);if(y.signedDistanceFromCamera>0)return f.projections[v]=y.point,f.anyProjectionOccluded=f.anyProjectionOccluded||y.isOccluded,y.point;const C=v-c.direction;return function(T,M,z,O,B){return te(T,M,z,O,void 0,B)}(c.distanceFromAnchor===0?r.tileAnchorPoint:new u.P(r.lineVertexArray.getx(C),r.lineVertexArray.gety(C)),m,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function Me(v,r,c){const f=v+c.translation[0],m=r+c.translation[1];let y;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(y=c.projection.projectTileCoordinates(f,m,c.unwrappedTileID,c.getElevation),y.point.x=(.5*y.point.x+.5)*c.width,y.point.y=(.5*-y.point.y+.5)*c.height):(y=he(f,m,c.labelPlaneMatrix,c.getElevation),y.isOccluded=!1),y}function Re(v,r,c){return v._unit()._perp()._mult(r*c)}function Se(v,r,c,f,m,y,C,T,M){if(T.projectionCache.offsets[v])return T.projectionCache.offsets[v];const z=c.add(r);if(v+M.direction<f||v+M.direction>=m)return T.projectionCache.offsets[v]=z,z;const O=ue(v+M.direction,T,M),B=Re(O.sub(c),C,M.direction),Z=c.add(B),ee=O.add(B);return T.projectionCache.offsets[v]=u.ak(y,z,Z,ee)||z,T.projectionCache.offsets[v]}function Ue(v,r,c,f,m,y,C,T,M){const z=f?v-r:v+r;let O=z>0?1:-1,B=0;f&&(O*=-1,B=Math.PI),O<0&&(B+=Math.PI);let Z,ee=O>0?y+m:y+m+1;T.projectionCache.cachedAnchorPoint?Z=T.projectionCache.cachedAnchorPoint:(Z=Me(T.tileAnchorPoint.x,T.tileAnchorPoint.y,T).point,T.projectionCache.cachedAnchorPoint=Z);let ne,ae,fe=Z,me=Z,ye=0,ie=0;const xe=Math.abs(z),Ce=[];let Pe;for(;ye+ie<=xe;){if(ee+=O,ee<y||ee>=C)return null;ye+=ie,me=fe,ae=ne;const nt={absOffsetX:xe,direction:O,distanceFromAnchor:ye,previousVertex:me};if(fe=ue(ee,T,nt),c===0)Ce.push(me),Pe=fe.sub(me);else{let ct;const Qe=fe.sub(me);ct=Qe.mag()===0?Re(ue(ee+O,T,nt).sub(fe),c,O):Re(Qe,c,O),ae||(ae=me.add(ct)),ne=Se(ee,ct,fe,y,C,ae,c,T,nt),Ce.push(ae),Pe=ne.sub(ae)}ie=Pe.mag()}const Ne=Pe._mult((xe-ye)/ie)._add(ae||me),He=B+Math.atan2(fe.y-me.y,fe.x-me.x);return Ce.push(Ne),{point:Ne,angle:M?He:0,path:Ce}}const ft=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Tt(v,r){for(let c=0;c<v;c++){const f=r.length;r.resize(f+4),r.float32.set(ft,3*f)}}function Yt(v,r,c){const f=r[0],m=r[1];return v[0]=c[0]*f+c[4]*m+c[12],v[1]=c[1]*f+c[5]*m+c[13],v[3]=c[3]*f+c[7]*m+c[15],v}const $t=100;class cn{constructor(r,c,f=new So(r.width+200,r.height+200,25),m=new So(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=c,this.grid=f,this.ignoredGrid=m,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+$t,this.screenBottomBoundary=r.height+$t,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,f,m,y,C,T,M,z,O,B){const Z=r.anchorPointX+M[0],ee=r.anchorPointY+M[1],ne=this.projectAndGetPerspectiveRatio(m,Z,ee,y,O),ae=f*ne.perspectiveRatio;let fe;if(C||T)fe=this._projectCollisionBox(r,ae,m,y,C,T,M,ne,O,B);else{const Ce=ne.point.x+(B?B.x*ae:0),Pe=ne.point.y+(B?B.y*ae:0);fe={allPointsOccluded:!1,box:[Ce+r.x1*ae,Pe+r.y1*ae,Ce+r.x2*ae,Pe+r.y2*ae]}}const[me,ye,ie,xe]=fe.box;return this.mapProjection.useSpecialProjectionForSymbols&&(C?fe.allPointsOccluded:this.mapProjection.isOccluded(Z,ee,y))||ne.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(me,ye,ie,xe)||c!=="always"&&this.grid.hitTest(me,ye,ie,xe,c,z)?{box:[me,ye,ie,xe],placeable:!1,offscreen:!1}:{box:[me,ye,ie,xe],placeable:!0,offscreen:this.isOffscreen(me,ye,ie,xe)}}placeCollisionCircles(r,c,f,m,y,C,T,M,z,O,B,Z,ee,ne,ae,fe){const me=[],ye=new u.P(c.anchorX,c.anchorY),ie=this.getPerspectiveRatio(C,ye.x,ye.y,T,fe),xe=(B?y/ie:y*ie)/u.ap,Ce={getElevation:fe,labelPlaneMatrix:M,lineVertexArray:f,pitchWithMap:B,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ae},Pe=oe(xe,m,c.lineOffsetX*xe,c.lineOffsetY*xe,!1,c,!1,Ce);let Ne=!1,He=!1,nt=!0;if(Pe){const ct=.5*ee*ie+ne,Qe=new u.P(-100,-100),Je=new u.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new Rt,Ft=Pe.first,et=Pe.last;let at=[];for(let qt=Ft.path.length-1;qt>=1;qt--)at.push(Ft.path[qt]);for(let qt=1;qt<et.path.length;qt++)at.push(et.path[qt]);const Ot=2.5*ct;if(z){const qt=this.projectPathToScreenSpace(at,Ce,z);at=qt.some(Qt=>Qt.signedDistanceFromCamera<=0)?[]:qt.map(Qt=>Qt.point)}let Gn=[];if(at.length>0){const qt=at[0].clone(),Qt=at[0].clone();for(let Hn=1;Hn<at.length;Hn++)qt.x=Math.min(qt.x,at[Hn].x),qt.y=Math.min(qt.y,at[Hn].y),Qt.x=Math.max(Qt.x,at[Hn].x),Qt.y=Math.max(Qt.y,at[Hn].y);Gn=qt.x>=Qe.x&&Qt.x<=Je.x&&qt.y>=Qe.y&&Qt.y<=Je.y?[at]:Qt.x<Qe.x||qt.x>Je.x||Qt.y<Qe.y||qt.y>Je.y?[]:u.al([at],Qe.x,Qe.y,Je.x,Je.y)}for(const qt of Gn){_t.reset(qt,.25*ct);let Qt=0;Qt=_t.length<=.5*ct?1:Math.ceil(_t.paddedLength/Ot)+1;for(let Hn=0;Hn<Qt;Hn++){const ri=Hn/Math.max(Qt-1,1),Po=_t.lerp(ri),Zn=Po.x+$t,Pi=Po.y+$t;me.push(Zn,Pi,ct,0);const gi=Zn-ct,ii=Pi-ct,yi=Zn+ct,es=Pi+ct;if(nt=nt&&this.isOffscreen(gi,ii,yi,es),He=He||this.isInsideGrid(gi,ii,yi,es),r!=="always"&&this.grid.hitTestCircle(Zn,Pi,ct,r,Z)&&(Ne=!0,!O))return{circles:[],offscreen:!1,collisionDetected:Ne}}}}return{circles:!O&&Ne||!He||ie<this.perspectiveRatioCutoff?[]:me,offscreen:nt,collisionDetected:Ne}}projectPathToScreenSpace(r,c,f){return r.map(m=>he(m.x,m.y,f,c.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[];let f=1/0,m=1/0,y=-1/0,C=-1/0;for(const O of r){const B=new u.P(O.x+$t,O.y+$t);f=Math.min(f,B.x),m=Math.min(m,B.y),y=Math.max(y,B.x),C=Math.max(C,B.y),c.push(B)}const T=this.grid.query(f,m,y,C).concat(this.ignoredGrid.query(f,m,y,C)),M={},z={};for(const O of T){const B=O.key;if(M[B.bucketInstanceId]===void 0&&(M[B.bucketInstanceId]={}),M[B.bucketInstanceId][B.featureIndex])continue;const Z=[new u.P(O.x1,O.y1),new u.P(O.x2,O.y1),new u.P(O.x2,O.y2),new u.P(O.x1,O.y2)];u.am(c,Z)&&(M[B.bucketInstanceId][B.featureIndex]=!0,z[B.bucketInstanceId]===void 0&&(z[B.bucketInstanceId]=[]),z[B.bucketInstanceId].push(B.featureIndex))}return z}insertCollisionBox(r,c,f,m,y,C){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,f,m,y,C){const T=f?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:C,overlapMode:c};for(let z=0;z<r.length;z+=4)T.insertCircle(M,r[z],r[z+1],r[z+2])}projectAndGetPerspectiveRatio(r,c,f,m,y){let C;y?(C=[c,f,y(c,f),1],u.af(C,C,r)):(C=[c,f,0,1],Yt(C,C,r));const T=C[3];return{point:new u.P((C[0]/T+1)/2*this.transform.width+$t,(-C[1]/T+1)/2*this.transform.height+$t),perspectiveRatio:.5+this.transform.cameraToCenterDistance/T*.5,isOccluded:!1,signedDistanceFromCamera:T}}getPerspectiveRatio(r,c,f,m,y){const C=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,f,m,y):he(c,f,r,y);return .5+this.transform.cameraToCenterDistance/C.signedDistanceFromCamera*.5}isOffscreen(r,c,f,m){return f<$t||r>=this.screenRightBoundary||m<$t||c>this.screenBottomBoundary}isInsideGrid(r,c,f,m){return f>=0&&r<this.gridRightBoundary&&m>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=u.an([]);return u.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,f,m,y,C,T,M,z,O){let B=new u.P(1,0),Z=new u.P(0,1);const ee=new u.P(r.anchorPointX+T[0],r.anchorPointY+T[1]);if(C&&!y){const nt=this.projectAndGetPerspectiveRatio(f,ee.x+1,ee.y,m,z).point.sub(M.point).unit(),ct=Math.atan(nt.y/nt.x)+(nt.x<0?Math.PI:0),Qe=Math.sin(ct),Je=Math.cos(ct);B=new u.P(Je,Qe),Z=new u.P(-Qe,Je)}else if(!C&&y){const nt=-this.transform.angle,ct=Math.sin(nt),Qe=Math.cos(nt);B=new u.P(Qe,ct),Z=new u.P(-ct,Qe)}let ne=M.point,ae=c;if(y){ne=ee;const nt=this.transform.zoom-Math.floor(this.transform.zoom);ae=Math.pow(2,-nt),ae*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,m),O||(ae*=u.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}O&&(ne=ne.add(B.mult(O.x*ae)).add(Z.mult(O.y*ae)));const fe=r.x1*ae,me=r.x2*ae,ye=(fe+me)/2,ie=r.y1*ae,xe=r.y2*ae,Ce=(ie+xe)/2,Pe=[{offsetX:fe,offsetY:ie},{offsetX:ye,offsetY:ie},{offsetX:me,offsetY:ie},{offsetX:me,offsetY:Ce},{offsetX:me,offsetY:xe},{offsetX:ye,offsetY:xe},{offsetX:fe,offsetY:xe},{offsetX:fe,offsetY:Ce}];let Ne=[];for(const{offsetX:nt,offsetY:ct}of Pe)Ne.push(new u.P(ne.x+B.x*nt+Z.x*ct,ne.y+B.y*nt+Z.y*ct));let He=!1;if(y){const nt=Ne.map(ct=>this.projectAndGetPerspectiveRatio(f,ct.x,ct.y,m,z));He=nt.some(ct=>!ct.isOccluded),Ne=nt.map(ct=>ct.point)}else He=!0;return{box:u.ao(Ne),allPointsOccluded:!He}}}function Jt(v,r,c){return r*(u.X/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Mr{constructor(r,c,f,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):m&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class sr{constructor(r,c,f,m,y){this.text=new Mr(r?r.text:null,c,f,y),this.icon=new Mr(r?r.icon:null,c,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Gt{constructor(r,c,f){this.text=r,this.icon=c,this.skipFade=f}}class Tn{constructor(){this.invProjMatrix=u.H(),this.viewportMatrix=u.H(),this.circles=[]}}class er{constructor(r,c,f,m,y){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=m,this.tileID=y}}class Ur{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[r]}}function Kr(v,r,c,f,m){const{horizontalAlign:y,verticalAlign:C}=u.au(v);return new u.P(-(y-.5)*r+f[0]*m,-(C-.5)*c+f[1]*m)}class mi{constructor(r,c,f,m,y,C){this.transform=r.clone(),this.terrain=f,this.collisionIndex=new cn(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Ur(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(f,m)=>c.getElevation(r,f,m):null}getBucketParts(r,c,f,m){const y=f.getBucket(c),C=f.latestFeatureIndex;if(!y||!C||c.id!==y.layerIds[0])return;const T=f.collisionBoxArray,M=y.layers[0].layout,z=y.layers[0].paint,O=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),B=f.tileSize/u.X,Z=f.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(Z),ne=M.get("text-pitch-alignment")==="map",ae=M.get("text-rotation-alignment")==="map",fe=Jt(f,1,this.transform.zoom),me=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),ie=Xo(ee,ne,ae,this.transform,fe);let xe=null;if(ne){const Pe=so(ee,ne,ae,this.transform,fe);xe=u.L([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[y.bucketInstanceId]=new er(y.bucketInstanceId,C,y.sourceLayerIndex,y.index,f.tileID);const Ce={bucket:y,layout:M,translationText:me,translationIcon:ye,posMatrix:ee,unwrappedTileID:Z,textLabelPlaneMatrix:ie,labelToScreenMatrix:xe,scale:O,textPixelRatio:B,holdingForFade:f.holdingForFade(),collisionBoxArray:T,partiallyEvaluatedTextSize:u.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const Pe of y.sortKeyRanges){const{sortKey:Ne,symbolInstanceStart:He,symbolInstanceEnd:nt}=Pe;r.push({sortKey:Ne,symbolInstanceStart:He,symbolInstanceEnd:nt,parameters:Ce})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(r,c,f,m,y,C,T,M,z,O,B,Z,ee,ne,ae,fe,me,ye,ie){const xe=u.aq[r.textAnchor],Ce=[r.textOffset0,r.textOffset1],Pe=Kr(xe,f,m,Ce,y),Ne=this.collisionIndex.placeCollisionBox(c,Z,M,z,O,T,C,fe,B.predicate,ie,Pe);if((!ye||this.collisionIndex.placeCollisionBox(ye,Z,M,z,O,T,C,me,B.predicate,ie,Pe).placeable)&&Ne.placeable){let He;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(He=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Ce,width:f,height:m,anchor:xe,textBoxScale:y,prevAnchor:He},this.markUsedJustification(ne,xe,ee,ae),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,ae,ee),this.placedOrientations[ee.crossTileID]=ae),{shift:Pe,placedGlyphBoxes:Ne}}}placeLayerBucketPart(r,c,f){const{bucket:m,layout:y,translationText:C,translationIcon:T,posMatrix:M,unwrappedTileID:z,textLabelPlaneMatrix:O,labelToScreenMatrix:B,textPixelRatio:Z,holdingForFade:ee,collisionBoxArray:ne,partiallyEvaluatedTextSize:ae,collisionGroup:fe}=r.parameters,me=y.get("text-optional"),ye=y.get("icon-optional"),ie=u.ar(y,"text-overlap","text-allow-overlap"),xe=ie==="always",Ce=u.ar(y,"icon-overlap","icon-allow-overlap"),Pe=Ce==="always",Ne=y.get("text-rotation-alignment")==="map",He=y.get("text-pitch-alignment")==="map",nt=y.get("icon-text-fit")!=="none",ct=y.get("symbol-z-order")==="viewport-y",Qe=xe&&(Pe||!m.hasIconData()||ye),Je=Pe&&(xe||!m.hasTextData()||me);!m.collisionArrays&&ne&&m.deserializeCollisionBoxes(ne);const _t=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),Ft=(et,at,Ot)=>{var Gn,qt;if(c[et.crossTileID])return;if(ee)return void(this.placements[et.crossTileID]=new Gt(!1,!1,!1));let Qt=!1,Hn=!1,ri=!0,Po=null,Zn={box:null,placeable:!1,offscreen:null},Pi={box:null,placeable:!1,offscreen:null},gi=null,ii=null,yi=null,es=0,_l=0,qc=0;at.textFeatureIndex?es=at.textFeatureIndex:et.useRuntimeCollisionCircles&&(es=et.featureIndex),at.verticalTextFeatureIndex&&(_l=at.verticalTextFeatureIndex);const xl=at.textBox;if(xl){const po=Xr=>{let oi=u.ah.horizontal;if(m.allowVerticalPlacement&&!Xr&&this.prevPlacement){const Zi=this.prevPlacement.placedOrientations[et.crossTileID];Zi&&(this.placedOrientations[et.crossTileID]=Zi,oi=Zi,this.markUsedOrientation(m,oi,et))}return oi},fo=(Xr,oi)=>{if(m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&at.verticalTextBox){for(const Zi of m.writingModes)if(Zi===u.ah.vertical?(Zn=oi(),Pi=Zn):Zn=Xr(),Zn&&Zn.placeable)break}else Zn=Xr()},Vs=et.textAnchorOffsetStartIndex,Mo=et.textAnchorOffsetEndIndex;if(Mo===Vs){const Xr=(oi,Zi)=>{const rn=this.collisionIndex.placeCollisionBox(oi,ie,Z,M,z,He,Ne,C,fe.predicate,_t);return rn&&rn.placeable&&(this.markUsedOrientation(m,Zi,et),this.placedOrientations[et.crossTileID]=Zi),rn};fo(()=>Xr(xl,u.ah.horizontal),()=>{const oi=at.verticalTextBox;return m.allowVerticalPlacement&&et.numVerticalGlyphVertices>0&&oi?Xr(oi,u.ah.vertical):{box:null,offscreen:null}}),po(Zn&&Zn.placeable)}else{let Xr=u.aq[(qt=(Gn=this.prevPlacement)===null||Gn===void 0?void 0:Gn.variableOffsets[et.crossTileID])===null||qt===void 0?void 0:qt.anchor];const oi=(rn,Ta,bl)=>{const wl=rn.x2-rn.x1,og=rn.y2-rn.y1,f1=et.textBoxScale,sg=nt&&Ce==="never"?Ta:null;let Ws=null,ag=ie==="never"?1:2,Hc="never";Xr&&ag++;for(let Tu=0;Tu<ag;Tu++){for(let Zc=Vs;Zc<Mo;Zc++){const Kc=m.textAnchorOffsets.get(Zc);if(Xr&&Kc.textAnchor!==Xr)continue;const Sl=this.attemptAnchorPlacement(Kc,rn,wl,og,f1,Ne,He,Z,M,z,fe,Hc,et,m,bl,C,T,sg,_t);if(Sl&&(Ws=Sl.placedGlyphBoxes,Ws&&Ws.placeable))return Qt=!0,Po=Sl.shift,Ws}Xr?Xr=null:Hc=ie}return f&&!Ws&&(Ws={box:this.collisionIndex.placeCollisionBox(xl,"always",Z,M,z,He,Ne,C,fe.predicate,_t,new u.P(0,0)).box,offscreen:!1,placeable:!1}),Ws};fo(()=>oi(xl,at.iconBox,u.ah.horizontal),()=>{const rn=at.verticalTextBox;return m.allowVerticalPlacement&&(!Zn||!Zn.placeable)&&et.numVerticalGlyphVertices>0&&rn?oi(rn,at.verticalIconBox,u.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Zn&&(Qt=Zn.placeable,ri=Zn.offscreen);const Zi=po(Zn&&Zn.placeable);if(!Qt&&this.prevPlacement){const rn=this.prevPlacement.variableOffsets[et.crossTileID];rn&&(this.variableOffsets[et.crossTileID]=rn,this.markUsedJustification(m,rn.anchor,et,Zi))}}}if(gi=Zn,Qt=gi&&gi.placeable,ri=gi&&gi.offscreen,et.useRuntimeCollisionCircles){const po=m.text.placedSymbolArray.get(et.centerJustifiedTextSymbolIndex),fo=u.ai(m.textSizeData,ae,po),Vs=y.get("text-padding");ii=this.collisionIndex.placeCollisionCircles(ie,po,m.lineVertexArray,m.glyphOffsetArray,fo,M,z,O,B,f,He,fe.predicate,et.collisionCircleDiameter,Vs,C,_t),ii.circles.length&&ii.collisionDetected&&!f&&u.w("Collisions detected, but collision boxes are not shown"),Qt=xe||ii.circles.length>0&&!ii.collisionDetected,ri=ri&&ii.offscreen}if(at.iconFeatureIndex&&(qc=at.iconFeatureIndex),at.iconBox){const po=fo=>this.collisionIndex.placeCollisionBox(fo,Ce,Z,M,z,He,Ne,T,fe.predicate,_t,nt&&Po?Po:void 0);Pi&&Pi.placeable&&at.verticalIconBox?(yi=po(at.verticalIconBox),Hn=yi.placeable):(yi=po(at.iconBox),Hn=yi.placeable),ri=ri&&yi.offscreen}const ho=me||et.numHorizontalGlyphVertices===0&&et.numVerticalGlyphVertices===0,Gc=ye||et.numIconVertices===0;ho||Gc?Gc?ho||(Hn=Hn&&Qt):Qt=Hn&&Qt:Hn=Qt=Hn&&Qt;const mp=Hn&&yi.placeable;if(Qt&&gi.placeable&&this.collisionIndex.insertCollisionBox(gi.box,ie,y.get("text-ignore-placement"),m.bucketInstanceId,Pi&&Pi.placeable&&_l?_l:es,fe.ID),mp&&this.collisionIndex.insertCollisionBox(yi.box,Ce,y.get("icon-ignore-placement"),m.bucketInstanceId,qc,fe.ID),ii&&Qt&&this.collisionIndex.insertCollisionCircles(ii.circles,ie,y.get("text-ignore-placement"),m.bucketInstanceId,es,fe.ID),f&&this.storeCollisionData(m.bucketInstanceId,Ot,at,gi,yi,ii),et.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[et.crossTileID]=new Gt(Qt||Qe,Hn||Je,ri||m.justReloaded),c[et.crossTileID]=!0};if(ct){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const et=m.getSortedSymbolIndexes(this.transform.angle);for(let at=et.length-1;at>=0;--at){const Ot=et[at];Ft(m.symbolInstances.get(Ot),m.collisionArrays[Ot],Ot)}}else for(let et=r.symbolInstanceStart;et<r.symbolInstanceEnd;et++)Ft(m.symbolInstances.get(et),m.collisionArrays[et],et);if(f&&m.bucketInstanceId in this.collisionCircleArrays){const et=this.collisionCircleArrays[m.bucketInstanceId];u.as(et.invProjMatrix,M),et.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(r,c,f,m,y,C){if(f.textBox||f.iconBox){let T,M;this.collisionBoxArrays.has(r)?T=this.collisionBoxArrays.get(r):(T=new Map,this.collisionBoxArrays.set(r,T)),T.has(c)?M=T.get(c):(M={text:null,icon:null},T.set(c,M)),f.textBox&&(M.text=m.box),f.iconBox&&(M.icon=y.box)}if(C){let T=this.collisionCircleArrays[r];T===void 0&&(T=this.collisionCircleArrays[r]=new Tn);for(let M=0;M<C.circles.length;M+=4)T.circles.push(C.circles[M+0]),T.circles.push(C.circles[M+1]),T.circles.push(C.circles[M+2]),T.circles.push(C.collisionDetected?1:0)}}markUsedJustification(r,c,f,m){let y;y=m===u.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[u.at(c)];const C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const T of C)T>=0&&(r.text.placedSymbolArray.get(T).crossTileID=y>=0&&T!==y?0:f.crossTileID)}markUsedOrientation(r,c,f){const m=c===u.ah.horizontal||c===u.ah.horizontalOnly?c:0,y=c===u.ah.vertical?c:0,C=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const T of C)r.text.placedSymbolArray.get(T).placedOrientation=m;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const m=c?c.symbolFadeChange(r):1,y=c?c.opacities:{},C=c?c.variableOffsets:{},T=c?c.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],O=y[M];O?(this.opacities[M]=new sr(O,m,z.text,z.icon),f=f||z.text!==O.text.placed||z.icon!==O.icon.placed):(this.opacities[M]=new sr(null,m,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const M in y){const z=y[M];if(!this.opacities[M]){const O=new sr(z,m,!1,!1);O.isHidden()||(this.opacities[M]=O,f=f||z.text.placed||z.icon.placed)}}for(const M in C)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=C[M]);for(const M in T)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=T[M]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const f={};for(const m of c){const y=m.getBucket(r);y&&m.latestFeatureIndex&&r.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,f,m.collisionBoxArray)}}updateBucketOpacities(r,c,f,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const y=r.layers[0],C=y.layout,T=new sr(null,0,!1,!1,!0),M=C.get("text-allow-overlap"),z=C.get("icon-allow-overlap"),O=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),B=C.get("text-rotation-alignment")==="map",Z=C.get("text-pitch-alignment")==="map",ee=C.get("icon-text-fit")!=="none",ne=new sr(null,0,M&&(z||!r.hasIconData()||C.get("icon-optional")),z&&(M||!r.hasTextData()||C.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);const ae=(me,ye,ie)=>{for(let xe=0;xe<ye/4;xe++)me.opacityVertexArray.emplaceBack(ie);me.hasVisibleVertices=me.hasVisibleVertices||ie!==Ja},fe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let me=0;me<r.symbolInstances.length;me++){const ye=r.symbolInstances.get(me),{numHorizontalGlyphVertices:ie,numVerticalGlyphVertices:xe,crossTileID:Ce}=ye;let Pe=this.opacities[Ce];f[Ce]?Pe=T:Pe||(Pe=ne,this.opacities[Ce]=Pe),f[Ce]=!0;const Ne=ye.numIconVertices>0,He=this.placedOrientations[ye.crossTileID],nt=He===u.ah.vertical,ct=He===u.ah.horizontal||He===u.ah.horizontalOnly;if(ie>0||xe>0){const Je=qi(Pe.text);ae(r.text,ie,nt?Ja:Je),ae(r.text,xe,ct?Ja:Je);const _t=Pe.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(r.text.placedSymbolArray.get(at).hidden=_t||nt?1:0)}),ye.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=_t||ct?1:0);const Ft=this.variableOffsets[ye.crossTileID];Ft&&this.markUsedJustification(r,Ft.anchor,ye,He);const et=this.placedOrientations[ye.crossTileID];et&&(this.markUsedJustification(r,"left",ye,et),this.markUsedOrientation(r,et,ye))}if(Ne){const Je=qi(Pe.icon),_t=!(ee&&ye.verticalPlacedIconSymbolIndex&&nt);ye.placedIconSymbolIndex>=0&&(ae(r.icon,ye.numIconVertices,_t?Je:Ja),r.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=Pe.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(ae(r.icon,ye.numVerticalIconVertices,_t?Ja:Je),r.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=Pe.icon.isHidden())}const Qe=fe&&fe.has(me)?fe.get(me):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Je=r.collisionArrays[me];if(Je){let _t=new u.P(0,0);if(Je.textBox||Je.verticalTextBox){let Ft=!0;if(O){const et=this.variableOffsets[Ce];et?(_t=Kr(et.anchor,et.width,et.height,et.textOffset,et.textBoxScale),B&&_t._rotate(Z?this.transform.angle:-this.transform.angle)):Ft=!1}if(Je.textBox||Je.verticalTextBox){let et;Je.textBox&&(et=nt),Je.verticalTextBox&&(et=ct),Ya(r.textCollisionBox.collisionVertexArray,Pe.text.placed,!Ft||et,Qe.text,_t.x,_t.y)}}if(Je.iconBox||Je.verticalIconBox){const Ft=!!(!ct&&Je.verticalIconBox);let et;Je.iconBox&&(et=Ft),Je.verticalIconBox&&(et=!Ft),Ya(r.iconCollisionBox.collisionVertexArray,Pe.icon.placed,et,Qe.icon,ee?_t.x:0,ee?_t.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=me.invProjMatrix,r.placementViewportMatrix=me.viewportMatrix,r.collisionCircleArray=me.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function Ya(v,r,c,f,m,y){f&&f.length!==0||(f=[0,0,0,0]);const C=f[0]-$t,T=f[1]-$t,M=f[2]-$t,z=f[3]-$t;v.emplaceBack(r?1:0,c?1:0,m||0,y||0,C,T),v.emplaceBack(r?1:0,c?1:0,m||0,y||0,M,T),v.emplaceBack(r?1:0,c?1:0,m||0,y||0,M,z),v.emplaceBack(r?1:0,c?1:0,m||0,y||0,C,z)}const En=Math.pow(2,25),Td=Math.pow(2,24),Ed=Math.pow(2,17),Vi=Math.pow(2,16),Wi=Math.pow(2,9),Uv=Math.pow(2,8),ao=Math.pow(2,1);function qi(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const r=v.placed?1:0,c=Math.floor(127*v.opacity);return c*En+r*Td+c*Ed+r*Vi+c*Wi+r*Uv+c*ao+r}const Ja=0;function fa(){return{isOccluded:(v,r,c)=>!1,getPitchedTextCorrection:(v,r,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,c,f){throw new Error("Not implemented.")},translatePosition:(v,r,c,f)=>function(m,y,C,T,M=!1){if(!C[0]&&!C[1])return[0,0];const z=M?T==="map"?m.angle:0:T==="viewport"?-m.angle:0;if(z){const O=Math.sin(z),B=Math.cos(z);C=[C[0]*B-C[1]*O,C[0]*O+C[1]*B]}return[M?C[0]:Jt(y,C[0],m.zoom),M?C[1]:Jt(y,C[1],m.zoom)]}(v,r,c,f),getCircleRadiusCorrection:v=>1}}class Ar{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,f,m,y){const C=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(C,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((T,M)=>T.sortKey-M.sortKey));this._currentPartIndex<C.length;)if(c.placeLayerBucketPart(C[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,y())return!0;return!1}}class lu{constructor(r,c,f,m,y,C,T,M){this.placement=new mi(r,fa(),c,C,T,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(r,c,f){const m=E.now(),y=()=>!this._forceFullPlacement&&E.now()-m>2;for(;this._currentPlacementIndex>=0;){const C=c[r[this._currentPlacementIndex]],T=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=T)&&(!C.maxzoom||C.maxzoom>T)){if(this._inProgressLayer||(this._inProgressLayer=new Ar(C)),this._inProgressLayer.continuePlacement(f[C.source],this.placement,this._showCollisionBoxes,C,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const Co=512/u.X/2;class Sr{constructor(r,c,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const m=new Map;for(let y=0;y<c.length;y++){const C=c.get(y),T=C.key,M=m.get(T);M?M.push(C):m.set(T,[C])}for(const[y,C]of m){const T={positions:C.map(M=>({x:Math.floor(M.anchorX*Co),y:Math.floor(M.anchorY*Co)})),crossTileIDs:C.map(M=>M.crossTileID)};if(T.positions.length>128){const M=new u.av(T.positions.length,16,Uint16Array);for(const{x:z,y:O}of T.positions)M.add(z,O);M.finish(),delete T.positions,T.index=M}this._symbolsByKey[y]=T}}getScaledCoordinates(r,c){const{x:f,y:m,z:y}=this.tileID.canonical,{x:C,y:T,z:M}=c.canonical,z=Co/Math.pow(2,M-y),O=(T*u.X+r.anchorY)*z,B=m*u.X*Co;return{x:Math.floor((C*u.X+r.anchorX)*z-f*u.X*Co),y:Math.floor(O-B)}}findMatches(r,c,f){const m=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let y=0;y<r.length;y++){const C=r.get(y);if(C.crossTileID)continue;const T=this._symbolsByKey[C.key];if(!T)continue;const M=this.getScaledCoordinates(C,c);if(T.index){const z=T.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const O of z){const B=T.crossTileIDs[O];if(!f[B]){f[B]=!0,C.crossTileID=B;break}}}else if(T.positions)for(let z=0;z<T.positions.length;z++){const O=T.positions[z],B=T.crossTileIDs[z];if(Math.abs(O.x-M.x)<=m&&Math.abs(O.y-M.y)<=m&&!f[B]){f[B]=!0,C.crossTileID=B;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class fc{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ko{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const f in this.indexes){const m=this.indexes[f],y={};for(const C in m){const T=m[C];T.tileID=T.tileID.unwrapTo(T.tileID.wrap+c),y[T.tileID.key]=T}this.indexes[f]=y}this.lng=r}addBucket(r,c,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let y=0;y<c.symbolInstances.length;y++)c.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const m=this.usedCrossTileIDs[r.overscaledZ];for(const y in this.indexes){const C=this.indexes[y];if(Number(y)>r.overscaledZ)for(const T in C){const M=C[T];M.tileID.isChildOf(r)&&M.findMatches(c.symbolInstances,r,m)}else{const T=C[r.scaledTo(Number(y)).key];T&&T.findMatches(c.symbolInstances,r,m)}}for(let y=0;y<c.symbolInstances.length;y++){const C=c.symbolInstances.get(y);C.crossTileID||(C.crossTileID=f.generate(),m[C.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Sr(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const f of c.getCrossTileIDsLists())for(const m of f)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let c=!1;for(const f in this.indexes){const m=this.indexes[f];for(const y in m)r[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,m[y]),delete m[y],c=!0)}return c}}class Id{constructor(){this.layerIndexes={},this.crossTileIDs=new fc,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,f){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new ko);let y=!1;const C={};m.handleWrapJump(f);for(const T of c){const M=T.getBucket(r);M&&r.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(T.tileID,M,this.crossTileIDs)&&(y=!0),C[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(C)&&(y=!0),y}pruneUnusedLayers(r){const c={};r.forEach(f=>{c[f]=!0});for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}const To=(v,r)=>u.t(v,r&&r.filter(c=>c.identifier!=="source.canvas")),Vv=u.aw();class mc extends u.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const m=this.sourceCaches[f].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new jt(Sn(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,m)=>this.getGlyphs(f,m)),this.dispatcher.registerMessageHandler("GI",(f,m)=>this.getImages(f,m)),this.imageManager=new $e,this.imageManager.setEventedParent(this),this.glyphManager=new ut(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Nt(256,512),this.crossTileSymbolIndex=new Id,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.ay()),on().on(Ge,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const m=this.sourceCaches[f.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const C in this._layers){const T=this._layers[C];T.source===y.id&&this._validateLayer(T)}})}loadURL(r,c={},f){this.fire(new u.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;u.h(m,this._loadStyleRequest).then(C=>{this._loadStyleRequest=null,this._load(C.data,c,f)}).catch(C=>{this._loadStyleRequest=null,C&&!y.signal.aborted&&this.fire(new u.j(C))})}loadJSON(r,c={},f){this.fire(new u.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,f)}).catch(()=>{})}loadEmpty(){this.fire(new u.k("dataloading",{dataType:"style"})),this._load(Vv,{validate:!1})}_load(r,c,f){var m;const y=c.transformStyle?c.transformStyle(f,r):r;if(!c.validate||!To(this,u.u(y))){this._loaded=!0,this.stylesheet=y;for(const C in y.sources)this.addSource(C,y.sources[C],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new pt(this.stylesheet.light),this.sky=new At(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new u.k("data",{dataType:"style"})),this.fire(new u.k("style.load"))}}_createLayers(){const r=u.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(const c of r){const f=u.aA(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(r,c=!1,f=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(y,C,T,M){return u._(this,void 0,void 0,function*(){const z=Ae(y),O=T>1?"@2x":"",B={},Z={};for(const{id:ee,url:ne}of z){const ae=C.transformRequest(H(ne,O,".json"),"SpriteJSON");B[ee]=u.h(ae,M);const fe=C.transformRequest(H(ne,O,".png"),"SpriteImage");Z[ee]=V.getImage(fe,M)}return yield Promise.all([...Object.values(B),...Object.values(Z)]),function(ee,ne){return u._(this,void 0,void 0,function*(){const ae={};for(const fe in ee){ae[fe]={};const me=E.getImageCanvasContext((yield ne[fe]).data),ye=(yield ee[fe]).data;for(const ie in ye){const{width:xe,height:Ce,x:Pe,y:Ne,sdf:He,pixelRatio:nt,stretchX:ct,stretchY:Qe,content:Je,textFitWidth:_t,textFitHeight:Ft}=ye[ie];ae[fe][ie]={data:null,pixelRatio:nt,sdf:He,stretchX:ct,stretchY:Qe,content:Je,textFitWidth:_t,textFitHeight:Ft,spriteData:{width:xe,height:Ce,x:Pe,y:Ne,context:me}}}}return ae})}(B,Z)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(y=>{if(this._spriteRequest=null,y)for(const C in y){this._spritesImagesIds[C]=[];const T=this._spritesImagesIds[C]?this._spritesImagesIds[C].filter(M=>!(M in y)):[];for(const M of T)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[C]){const z=C==="default"?M:`${C}:${M}`;this._spritesImagesIds[C].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,y[C][M],!1):this.imageManager.addImage(z,y[C][M]),c&&(this._changedImages[z]=!0)}}}).catch(y=>{this._spriteRequest=null,m=y,this.fire(new u.j(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"})),f&&f(m)})}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}_validateLayer(r){const c=this.sourceCaches[r.source];if(!c)return;const f=r.sourceLayer;if(!f)return;const m=c.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(f)===-1)&&this.fire(new u.j(new Error(`Source layer "${f}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?u.aB(f):f);const m=[];for(const y of r)if(f[y]){const C=c?u.aB(f[y]):f[y];m.push(C)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const m=this._layers[f];m.type!=="custom"&&(r[f]=m.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(const r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const C in this._updatedSources){const T=this._updatedSources[C];if(T==="reload")this._reloadSource(C);else{if(T!=="clear")throw new Error(`Invalid action ${T}`);this._clearSource(C)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];f[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(r,this._availableImages),!y.isHidden(r.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in f){const y=this.sourceCaches[m];!!f[m]!=!!y.used&&y.fire(new u.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,c&&this.fire(new u.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var f;this._checkLoaded();const m=this.serialize();if(r=c.transformStyle?c.transformStyle(m,r):r,((f=c.validate)===null||f===void 0||f)&&To(this,u.u(r)))return!1;(r=u.aB(r)).layers=u.az(r.layers);const y=u.aC(m,r),C=this._getOperationsToPerform(y);if(C.unimplemented.length>0)throw new Error(`Unimplemented: ${C.unimplemented.join(", ")}.`);if(C.operations.length===0)return!1;for(const T of C.operations)T();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],f=[];for(const m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":c.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":c.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,m.args));break;case"setSky":c.push(()=>this.setSky.apply(this,m.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setTransition":c.push(()=>{});break;default:f.push(m.command)}return{operations:c,unimplemented:f}}addImage(r,c){if(this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new u.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(u.u.source,`sources.${r}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const m=this.sourceCaches[r]=new it(r,c,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new u.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new u.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,f={}){this._checkLoaded();const m=r.id;if(this.getLayer(m))return void this.fire(new u.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(r.type==="custom"){if(To(this,u.aD(r)))return;y=u.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=u.aB(r),r=u.e(r,{source:m})),this._validate(u.u.layer,`layers.${m}`,r,{arrayIndex:-1},f))return;y=u.aA(r),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const C=c?this._order.indexOf(c):this._order.length;if(c&&C===-1)this.fire(new u.j(new Error(`Cannot add layer "${m}" before non-existing layer "${c}".`)));else{if(this._order.splice(C,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const T=this._removedLayers[m];delete this._removedLayers[m],T.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new u.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const f=this._order.indexOf(r);this._order.splice(f,1);const m=c?this._order.indexOf(c):this._order.length;c&&m===-1?this.fire(new u.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new u.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,f){this._checkLoaded();const m=this.getLayer(r);m?m.minzoom===c&&m.maxzoom===f||(c!=null&&(m.minzoom=c),f!=null&&(m.maxzoom=f),this._updateLayer(m)):this.fire(new u.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,f={}){this._checkLoaded();const m=this.getLayer(r);if(m){if(!u.aE(m.filter,c))return c==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(u.u.filter,`layers.${m.id}.filter`,c,null,f)||(m.filter=u.aB(c),this._updateLayer(m)))}else this.fire(new u.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return u.aB(this.getLayer(r).filter)}setLayoutProperty(r,c,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getLayoutProperty(c),f)||(y.setLayoutProperty(c,f,m),this._updateLayer(y)):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const f=this.getLayer(r);if(f)return f.getLayoutProperty(c);this.fire(new u.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,f,m={}){this._checkLoaded();const y=this.getLayer(r);y?u.aE(y.getPaintProperty(c),f)||(y.setPaintProperty(c,f,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new u.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const f=r.source,m=r.sourceLayer,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const C=y.getSource().type;C==="geojson"&&m?this.fire(new u.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):C!=="vector"||m?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,r.id,c)):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const f=r.source,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new u.j(new Error(`The source '${f}' does not exist in the map's style.`)));const y=m.getSource().type,C=y==="vector"?r.sourceLayer:void 0;y!=="vector"||C?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new u.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(C,r.id,c):this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,f=r.sourceLayer,m=this.sourceCaches[c];if(m!==void 0)return m.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new u.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(f,r.id)):void this.fire(new u.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=u.aF(this.sourceCaches,y=>y.serialize()),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,m=this.stylesheet;return u.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:r,layers:c,terrain:f},y=>y!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=C=>this._layers[C].type==="fill-extrusion",f={},m=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(c(T)){f[T]=C;for(const M of r){const z=M[T];if(z)for(const O of z)m.push(O)}}}m.sort((C,T)=>T.intersectionZ-C.intersectionZ);const y=[];for(let C=this._order.length-1;C>=0;C--){const T=this._order[C];if(c(T))for(let M=m.length-1;M>=0;M--){const z=m[M].feature;if(f[z.layer.id]<C)break;y.push(z),m.pop()}else for(const M of r){const z=M[T];if(z)for(const O of z)y.push(O.feature)}}return y}queryRenderedFeatures(r,c,f){c&&c.filter&&this._validate(u.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);const m={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new u.j(new Error("parameters.layers must be an Array."))),[];for(const T of c.layers){const M=this._layers[T];if(!M)return this.fire(new u.j(new Error(`The layer '${T}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const y=[];c.availableImages=this._availableImages;const C=this._serializedAllLayers();for(const T in this.sourceCaches)c.layers&&!m[T]||y.push(gn(this.sourceCaches[T],this._layers,C,r,c,f));return this.placement&&y.push(function(T,M,z,O,B,Z,ee){const ne={},ae=Z.queryRenderedSymbols(O),fe=[];for(const me of Object.keys(ae).map(Number))fe.push(ee[me]);fe.sort(yt);for(const me of fe){const ye=me.featureIndex.lookupSymbolFeatures(ae[me.bucketInstanceId],M,me.bucketIndex,me.sourceLayerIndex,B.filter,B.layers,B.availableImages,T);for(const ie in ye){const xe=ne[ie]=ne[ie]||[],Ce=ye[ie];Ce.sort((Pe,Ne)=>{const He=me.featureSortOrder;if(He){const nt=He.indexOf(Pe.featureIndex);return He.indexOf(Ne.featureIndex)-nt}return Ne.featureIndex-Pe.featureIndex});for(const Pe of Ce)xe.push(Pe)}}for(const me in ne)ne[me].forEach(ye=>{const ie=ye.feature,xe=z[T[me].source].getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=xe});return ne}(this._layers,C,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(r,c){c&&c.filter&&this._validate(u.u.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.sourceCaches[r];return f?function(m,y){const C=m.getRenderableIds().map(z=>m.getTileByID(z)),T=[],M={};for(let z=0;z<C.length;z++){const O=C[z],B=O.tileID.canonical.key;M[B]||(M[B]=!0,O.querySourceFeatures(T,y))}return T}(f,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const f=this.light.getLight();let m=!1;for(const C in r)if(!u.aE(r[C],f[C])){m=!0;break}if(!m)return;const y={now:E.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(y)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){const f=this.getSky();let m=!1;if(!r&&!f)return;if(r&&!f)m=!0;else if(!r&&f)m=!0;else for(const C in r)if(!u.aE(r[C],f[C])){m=!0;break}if(!m)return;const y={now:E.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(y)}_validate(r,c,f,m,y={}){return(!y||y.validate!==!1)&&To(this,r.call(u.u,u.e({key:c,style:this.serialize(),value:f,styleSpec:u.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),on().off(Ge,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.sourceCaches){const f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(const c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,f,m,y=!1){let C=!1,T=!1;const M={};for(const z of this._order){const O=this._layers[z];if(O.type!=="symbol")continue;if(!M[O.source]){const Z=this.sourceCaches[O.source];M[O.source]=Z.getRenderableIds(!0).map(ee=>Z.getTileByID(ee)).sort((ee,ne)=>ne.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ne.tileID)?-1:1))}const B=this.crossTileSymbolIndex.addLayer(O,M[O.source],r.center.lng);C=C||B}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(E.now(),r.zoom))&&(this.pauseablePlacement=new lu(r,this.map.terrain,this._order,y,c,f,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(E.now()),T=!0),C&&this.pauseablePlacement.placement.setStale()),T||C)for(const z of this._order){const O=this._layers[z];O.type==="symbol"&&this.placement.updateLayerOpacities(O,M[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(E.now())}_releaseSymbolFadeTiles(){for(const r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return u._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,c.icons),f})}getGlyphs(r,c){return u._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(c.stacks),m=this.sourceCaches[c.source];return m&&m.setDependencies(c.tileID.key,c.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(u.u.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,f={},m){this._checkLoaded();const y=[{id:r,url:c}],C=[...Ae(this.stylesheet.sprite),...y];this._validate(u.u.sprite,"sprite",C,null,f)||(this.stylesheet.sprite=C,this._loadSprite(y,!0,m))}removeSprite(r){this._checkLoaded();const c=Ae(this.stylesheet.sprite);if(c.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.k("data",{dataType:"style"}))}else this.fire(new u.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,c={},f){this._checkLoaded(),r&&this._validate(u.u.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var ma=u.Y([{name:"a_pos",type:"Int16",components:2}]);const js={prelude:yn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:yn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:yn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:yn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:yn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:yn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:yn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:yn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:yn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:yn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:yn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:yn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:yn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:yn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:yn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:yn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:yn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:yn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:yn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:yn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yn(v,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),C=y?y.concat(m):m,T={};return{fragmentSource:v=v.replace(c,(M,z,O,B,Z)=>(T[Z]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
varying ${O} ${B} ${Z};
#else
uniform ${O} ${B} u_${Z};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Z}
    ${O} ${B} ${Z} = u_${Z};
#endif
`)),vertexSource:r=r.replace(c,(M,z,O,B,Z)=>{const ee=B==="float"?"vec2":"vec4",ne=Z.match(/color/)?"color":ee;return T[Z]?z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${O} ${ee} a_${Z};
varying ${O} ${B} ${Z};
#else
uniform ${O} ${B} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = a_${Z};
#else
    ${O} ${B} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${O} ${B} ${Z} = u_${Z};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${Z}
uniform lowp float u_${Z}_t;
attribute ${O} ${ee} a_${Z};
#else
uniform ${O} ${B} u_${Z};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${Z}
    ${O} ${B} ${Z} = a_${Z};
#else
    ${O} ${B} ${Z} = u_${Z};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Z}
    ${O} ${B} ${Z} = unpack_mix_${ne}(a_${Z}, u_${Z}_t);
#else
    ${O} ${B} ${Z} = u_${Z};
#endif
`}),staticAttributes:f,staticUniforms:C}}class Pd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,f,m,y,C,T,M,z){this.context=r;let O=this.boundPaintVertexBuffers.length!==m.length;for(let B=0;!O&&B<m.length;B++)this.boundPaintVertexBuffers[B]!==m[B]&&(O=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||O||this.boundIndexBuffer!==y||this.boundVertexOffset!==C||this.boundDynamicVertexBuffer!==T||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(c,f,m,y,C,T,M,z):(r.bindVertexArray.set(this.vao),T&&T.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),z&&z.bind())}freshBind(r,c,f,m,y,C,T,M){const z=r.numAttributes,O=this.context,B=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=C,this.boundDynamicVertexBuffer2=T,this.boundDynamicVertexBuffer3=M,c.enableAttributes(B,r);for(const Z of f)Z.enableAttributes(B,r);C&&C.enableAttributes(B,r),T&&T.enableAttributes(B,r),M&&M.enableAttributes(B,r),c.bind(),c.setVertexAttribPointers(B,r,y);for(const Z of f)Z.bind(),Z.setVertexAttribPointers(B,r,y);C&&(C.bind(),C.setVertexAttribPointers(B,r,y)),m&&m.bind(),T&&(T.bind(),T.setVertexAttribPointers(B,r,y)),M&&(M.bind(),M.setVertexAttribPointers(B,r,y)),O.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Md=(v,r,c,f,m)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:c,u_fog_color:f?f.properties.get("fog-color"):u.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(m):0,u_horizon_color:f?f.properties.get("horizon-color"):u.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function Qa(v){const r=[];for(let c=0;c<v.length;c++){if(v[c]===null)continue;const f=v[c].split(" ");r.push(f.pop())}return r}class Ad{constructor(r,c,f,m,y,C){const T=r.gl;this.program=T.createProgram();const M=Qa(c.staticAttributes),z=f?f.getBinderAttributes():[],O=M.concat(z),B=js.prelude.staticUniforms?Qa(js.prelude.staticUniforms):[],Z=c.staticUniforms?Qa(c.staticUniforms):[],ee=f?f.getBinderUniforms():[],ne=B.concat(Z).concat(ee),ae=[];for(const Pe of ne)ae.indexOf(Pe)<0&&ae.push(Pe);const fe=f?f.defines():[];y&&fe.push("#define OVERDRAW_INSPECTOR;"),C&&fe.push("#define TERRAIN3D;");const me=fe.concat(js.prelude.fragmentSource,c.fragmentSource).join(`
`),ye=fe.concat(js.prelude.vertexSource,c.vertexSource).join(`
`),ie=T.createShader(T.FRAGMENT_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(ie,me),T.compileShader(ie),!T.getShaderParameter(ie,T.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${T.getShaderInfoLog(ie)}`);T.attachShader(this.program,ie);const xe=T.createShader(T.VERTEX_SHADER);if(T.isContextLost())return void(this.failedToCreate=!0);if(T.shaderSource(xe,ye),T.compileShader(xe),!T.getShaderParameter(xe,T.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${T.getShaderInfoLog(xe)}`);T.attachShader(this.program,xe),this.attributes={};const Ce={};this.numAttributes=O.length;for(let Pe=0;Pe<this.numAttributes;Pe++)O[Pe]&&(T.bindAttribLocation(this.program,Pe,O[Pe]),this.attributes[O[Pe]]=Pe);if(T.linkProgram(this.program),!T.getProgramParameter(this.program,T.LINK_STATUS))throw new Error(`Program failed to link: ${T.getProgramInfoLog(this.program)}`);T.deleteShader(xe),T.deleteShader(ie);for(let Pe=0;Pe<ae.length;Pe++){const Ne=ae[Pe];if(Ne&&!Ce[Ne]){const He=T.getUniformLocation(this.program,Ne);He&&(Ce[Ne]=He)}}this.fixedUniforms=m(r,Ce),this.terrainUniforms=((Pe,Ne)=>({u_depth:new u.aH(Pe,Ne.u_depth),u_terrain:new u.aH(Pe,Ne.u_terrain),u_terrain_dim:new u.aI(Pe,Ne.u_terrain_dim),u_terrain_matrix:new u.aJ(Pe,Ne.u_terrain_matrix),u_terrain_unpack:new u.aK(Pe,Ne.u_terrain_unpack),u_terrain_exaggeration:new u.aI(Pe,Ne.u_terrain_exaggeration)}))(r,Ce),this.binderUniforms=f?f.getUniforms(r,Ce):[]}draw(r,c,f,m,y,C,T,M,z,O,B,Z,ee,ne,ae,fe,me,ye){const ie=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(m),r.setColorMode(y),r.setCullFace(C),M){r.activeTexture.set(ie.TEXTURE2),ie.bindTexture(ie.TEXTURE_2D,M.depthTexture),r.activeTexture.set(ie.TEXTURE3),ie.bindTexture(ie.TEXTURE_2D,M.texture);for(const Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(M[Ce])}for(const Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(T[Ce]);ae&&ae.setUniforms(r,this.binderUniforms,ee,{zoom:ne});let xe=0;switch(c){case ie.LINES:xe=2;break;case ie.TRIANGLES:xe=3;break;case ie.LINE_STRIP:xe=1}for(const Ce of Z.get()){const Pe=Ce.vaos||(Ce.vaos={});(Pe[z]||(Pe[z]=new Pd)).bind(r,this,O,ae?ae.getPaintVertexBuffers():[],B,Ce.vertexOffset,fe,me,ye),ie.drawElements(c,Ce.primitiveLength*xe,ie.UNSIGNED_SHORT,Ce.primitiveOffset*xe*2)}}}function gc(v,r,c){const f=1/Jt(c,1,r.transform.tileZoom),m=Math.pow(2,c.tileID.overscaledZ),y=c.tileSize*Math.pow(2,r.transform.tileZoom)/m,C=y*(c.tileID.canonical.x+c.tileID.wrap*m),T=y*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[C>>16,T>>16],u_pixel_coord_lower:[65535&C,65535&T]}}const uu=(v,r,c,f)=>{const m=r.style.light,y=m.properties.get("position"),C=[y.x,y.y,y.z],T=function(){var z=new u.A(9);return u.A!=Float32Array&&(z[1]=0,z[2]=0,z[3]=0,z[5]=0,z[6]=0,z[7]=0),z[0]=1,z[4]=1,z[8]=1,z}();m.properties.get("anchor")==="viewport"&&function(z,O){var B=Math.sin(O),Z=Math.cos(O);z[0]=Z,z[1]=B,z[2]=0,z[3]=-B,z[4]=Z,z[5]=0,z[6]=0,z[7]=0,z[8]=1}(T,-r.transform.angle),function(z,O,B){var Z=O[0],ee=O[1],ne=O[2];z[0]=Z*B[0]+ee*B[3]+ne*B[6],z[1]=Z*B[1]+ee*B[4]+ne*B[7],z[2]=Z*B[2]+ee*B[5]+ne*B[8]}(C,C,T);const M=m.properties.get("color");return{u_matrix:v,u_lightpos:C,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+c,u_opacity:f}},yc=(v,r,c,f,m,y,C)=>u.e(uu(v,r,c,f),gc(y,r,C),{u_height_factor:-Math.pow(2,m.overscaledZ)/C.tileSize/8}),el=v=>({u_matrix:v}),Tm=(v,r,c,f)=>u.e(el(v),gc(c,r,f)),Wv=(v,r)=>({u_matrix:v,u_world:r}),Em=(v,r,c,f,m)=>u.e(Tm(v,r,c,f),{u_world:m}),qv=(v,r,c,f)=>{const m=v.transform;let y,C;if(f.paint.get("circle-pitch-alignment")==="map"){const T=Jt(c,1,m.zoom);y=!0,C=[T,T]}else y=!1,C=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:C}},ga=(v,r,c)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),cu=(v,r,c=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:c}),Ei=v=>({u_matrix:v}),Ii=(v,r,c,f)=>({u_matrix:v,u_extrude_scale:Jt(r,1,c),u_intensity:f}),vc=(v,r,c,f)=>{const m=u.H();u.aP(m,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}};function _c(v,r){const c=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new u.Z(0,f/c).toLngLat().lat,new u.Z(0,(f+1)/c).toLngLat().lat]}const xc=(v,r,c,f)=>{const m=v.transform;return{u_matrix:Mm(v,r,c,f),u_ratio:1/Jt(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Im=(v,r,c,f,m)=>u.e(xc(v,r,c,m),{u_image:0,u_image_height:f}),tl=(v,r,c,f,m)=>{const y=v.transform,C=Pm(r,y);return{u_matrix:Mm(v,r,c,m),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Jt(r,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[C,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Gv=(v,r,c,f,m,y)=>{const C=v.lineAtlas,T=Pm(r,v.transform),M=c.layout.get("line-cap")==="round",z=C.getDash(f.from,M),O=C.getDash(f.to,M),B=z.width*m.fromScale,Z=O.width*m.toScale;return u.e(xc(v,r,c,y),{u_patternscale_a:[T/B,-z.height/2],u_patternscale_b:[T/Z,-O.height/2],u_sdfgamma:C.width/(256*Math.min(B,Z)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:O.y,u_mix:m.t})};function Pm(v,r){return 1/Jt(v,1,r.tileZoom)}function Mm(v,r,c,f){return v.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const Hv=(v,r,c,f,m)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(C=m.paint.get("raster-saturation"),C>0?1-1/(1.001-C):-C),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:Zv(m.paint.get("raster-hue-rotate"))};var y,C};function Zv(v){v*=Math.PI/180;const r=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Am=(v,r,c,f,m,y,C,T,M,z,O,B,Z,ee)=>{const ne=C.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ne.width/ne.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:T,u_label_plane_matrix:M,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+f,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:Z,u_texture:0,u_translation:O,u_pitched_scale:ee}},hu=(v,r,c,f,m,y,C,T,M,z,O,B,Z,ee,ne)=>{const ae=C.transform;return u.e(Am(v,r,c,f,m,y,C,T,M,z,O,B,Z,ne),{u_gamma_scale:f?Math.cos(ae._pitch)*ae.cameraToCenterDistance:1,u_device_pixel_ratio:C.pixelRatio,u_is_halo:+ee})},Ld=(v,r,c,f,m,y,C,T,M,z,O,B,Z,ee)=>u.e(hu(v,r,c,f,m,y,C,T,M,z,O,!0,B,!0,ee),{u_texsize_icon:Z,u_texture_icon:1}),bc=(v,r,c)=>({u_matrix:v,u_opacity:r,u_color:c}),zd=(v,r,c,f,m,y)=>u.e(function(C,T,M,z){const O=M.imageManager.getPattern(C.from.toString()),B=M.imageManager.getPattern(C.to.toString()),{width:Z,height:ee}=M.imageManager.getPixelSize(),ne=Math.pow(2,z.tileID.overscaledZ),ae=z.tileSize*Math.pow(2,M.transform.tileZoom)/ne,fe=ae*(z.tileID.canonical.x+z.tileID.wrap*ne),me=ae*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:B.tl,u_pattern_br_b:B.br,u_texsize:[Z,ee],u_mix:T.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:B.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/Jt(z,1,M.transform.tileZoom),u_pixel_coord_upper:[fe>>16,me>>16],u_pixel_coord_lower:[65535&fe,65535&me]}}(f,y,c,m),{u_matrix:v,u_opacity:r}),Rd={fillExtrusion:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_lightpos:new u.aN(v,r.u_lightpos),u_lightintensity:new u.aI(v,r.u_lightintensity),u_lightcolor:new u.aN(v,r.u_lightcolor),u_vertical_gradient:new u.aI(v,r.u_vertical_gradient),u_opacity:new u.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_lightpos:new u.aN(v,r.u_lightpos),u_lightintensity:new u.aI(v,r.u_lightintensity),u_lightcolor:new u.aN(v,r.u_lightcolor),u_vertical_gradient:new u.aI(v,r.u_vertical_gradient),u_height_factor:new u.aI(v,r.u_height_factor),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade),u_opacity:new u.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world),u_image:new u.aH(v,r.u_image),u_texsize:new u.aO(v,r.u_texsize),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new u.aH(v,r.u_scale_with_map),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_extrude_scale:new u.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_matrix:new u.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_pixel_extrude_scale:new u.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_inv_matrix:new u.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_viewport_size:new u.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new u.aL(v,r.u_color),u_matrix:new u.aJ(v,r.u_matrix),u_overlay:new u.aH(v,r.u_overlay),u_overlay_scale:new u.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new u.aI(v,r.u_extrude_scale),u_intensity:new u.aI(v,r.u_intensity),u_matrix:new u.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_world:new u.aO(v,r.u_world),u_image:new u.aH(v,r.u_image),u_color_ramp:new u.aH(v,r.u_color_ramp),u_opacity:new u.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_latrange:new u.aO(v,r.u_latrange),u_light:new u.aO(v,r.u_light),u_shadow:new u.aL(v,r.u_shadow),u_highlight:new u.aL(v,r.u_highlight),u_accent:new u.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_image:new u.aH(v,r.u_image),u_dimension:new u.aO(v,r.u_dimension),u_zoom:new u.aI(v,r.u_zoom),u_unpack:new u.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_image:new u.aH(v,r.u_image),u_image_height:new u.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texsize:new u.aO(v,r.u_texsize),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_image:new u.aH(v,r.u_image),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_scale:new u.aN(v,r.u_scale),u_fade:new u.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ratio:new u.aI(v,r.u_ratio),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new u.aO(v,r.u_units_to_pixels),u_patternscale_a:new u.aO(v,r.u_patternscale_a),u_patternscale_b:new u.aO(v,r.u_patternscale_b),u_sdfgamma:new u.aI(v,r.u_sdfgamma),u_image:new u.aH(v,r.u_image),u_tex_y_a:new u.aI(v,r.u_tex_y_a),u_tex_y_b:new u.aI(v,r.u_tex_y_b),u_mix:new u.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_tl_parent:new u.aO(v,r.u_tl_parent),u_scale_parent:new u.aI(v,r.u_scale_parent),u_buffer_scale:new u.aI(v,r.u_buffer_scale),u_fade_t:new u.aI(v,r.u_fade_t),u_opacity:new u.aI(v,r.u_opacity),u_image0:new u.aH(v,r.u_image0),u_image1:new u.aH(v,r.u_image1),u_brightness_low:new u.aI(v,r.u_brightness_low),u_brightness_high:new u.aI(v,r.u_brightness_high),u_saturation_factor:new u.aI(v,r.u_saturation_factor),u_contrast_factor:new u.aI(v,r.u_contrast_factor),u_spin_weights:new u.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texture:new u.aH(v,r.u_texture),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texture:new u.aH(v,r.u_texture),u_gamma_scale:new u.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_is_halo:new u.aH(v,r.u_is_halo),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new u.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new u.aH(v,r.u_is_size_feature_constant),u_size_t:new u.aI(v,r.u_size_t),u_size:new u.aI(v,r.u_size),u_camera_to_center_distance:new u.aI(v,r.u_camera_to_center_distance),u_pitch:new u.aI(v,r.u_pitch),u_rotate_symbol:new u.aH(v,r.u_rotate_symbol),u_aspect_ratio:new u.aI(v,r.u_aspect_ratio),u_fade_change:new u.aI(v,r.u_fade_change),u_matrix:new u.aJ(v,r.u_matrix),u_label_plane_matrix:new u.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new u.aJ(v,r.u_coord_matrix),u_is_text:new u.aH(v,r.u_is_text),u_pitch_with_map:new u.aH(v,r.u_pitch_with_map),u_is_along_line:new u.aH(v,r.u_is_along_line),u_is_variable_anchor:new u.aH(v,r.u_is_variable_anchor),u_texsize:new u.aO(v,r.u_texsize),u_texsize_icon:new u.aO(v,r.u_texsize_icon),u_texture:new u.aH(v,r.u_texture),u_texture_icon:new u.aH(v,r.u_texture_icon),u_gamma_scale:new u.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new u.aI(v,r.u_device_pixel_ratio),u_is_halo:new u.aH(v,r.u_is_halo),u_translation:new u.aO(v,r.u_translation),u_pitched_scale:new u.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_opacity:new u.aI(v,r.u_opacity),u_color:new u.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_opacity:new u.aI(v,r.u_opacity),u_image:new u.aH(v,r.u_image),u_pattern_tl_a:new u.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new u.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new u.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new u.aO(v,r.u_pattern_br_b),u_texsize:new u.aO(v,r.u_texsize),u_mix:new u.aI(v,r.u_mix),u_pattern_size_a:new u.aO(v,r.u_pattern_size_a),u_pattern_size_b:new u.aO(v,r.u_pattern_size_b),u_scale_a:new u.aI(v,r.u_scale_a),u_scale_b:new u.aI(v,r.u_scale_b),u_pixel_coord_upper:new u.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new u.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new u.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texture:new u.aH(v,r.u_texture),u_ele_delta:new u.aI(v,r.u_ele_delta),u_fog_matrix:new u.aJ(v,r.u_fog_matrix),u_fog_color:new u.aL(v,r.u_fog_color),u_fog_ground_blend:new u.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new u.aL(v,r.u_horizon_color),u_horizon_fog_blend:new u.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_ele_delta:new u.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new u.aJ(v,r.u_matrix),u_texture:new u.aH(v,r.u_texture),u_terrain_coords_id:new u.aI(v,r.u_terrain_coords_id),u_ele_delta:new u.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new u.aL(v,r.u_sky_color),u_horizon_color:new u.aL(v,r.u_horizon_color),u_horizon:new u.aI(v,r.u_horizon),u_sky_horizon_blend:new u.aI(v,r.u_sky_horizon_blend)})};class Yo{constructor(r,c,f){this.context=r;const m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Kv={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Dd{constructor(r,c,f,m){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=m,this.context=r;const y=r.gl;this.buffer=y.createBuffer(),r.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let f=0;f<this.attributes.length;f++){const m=c.attributes[this.attributes[f].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,c,f){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],C=c.attributes[y.name];C!==void 0&&r.vertexAttribPointer(C,y.components,r[Kv[y.type]],!1,this.itemSize,y.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ya=new WeakMap;function Us(v){var r;if(ya.has(v))return ya.get(v);{const c=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ya.set(v,c),c}}class xn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class wc extends xn{getDefault(){return u.aM.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Xv extends xn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class nl extends xn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Yv extends xn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Lm extends xn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Jv extends xn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class zm extends xn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class $d extends xn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Rm extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Dm extends xn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class $m extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class Om extends xn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class va extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Bm extends xn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Qv extends xn{getDefault(){return u.aM.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Fm extends xn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class du extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class e1 extends xn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Sc extends xn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class t1 extends xn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class n1 extends xn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Nm extends xn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class jm extends xn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Um extends xn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Od extends xn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Vm extends xn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Cc extends xn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ws extends xn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const f=this.gl;Us(f)?f.bindVertexArray(r):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Bd extends xn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class Fd extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Nd extends xn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class kc extends xn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class jd extends kc{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class _a extends kc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ud extends kc{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class r1{constructor(r,c,f,m,y){this.context=r,this.width=c,this.height=f;const C=r.gl,T=this.framebuffer=C.createFramebuffer();if(this.colorAttachment=new jd(r,T),m)this.depthAttachment=y?new Ud(r,T):new _a(r,T);else if(y)throw new Error("Stencil cannot be set without depth");if(C.checkFramebufferStatus(C.FRAMEBUFFER)!==C.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class mr{constructor(r,c,f){this.blendFunction=r,this.blendColor=c,this.mask=f}}mr.Replace=[1,0],mr.disabled=new mr(mr.Replace,u.aM.transparent,[!1,!1,!1,!1]),mr.unblended=new mr(mr.Replace,u.aM.transparent,[!0,!0,!0,!0]),mr.alphaBlended=new mr([1,771],u.aM.transparent,[!0,!0,!0,!0]);class i1{constructor(r){var c,f;if(this.gl=r,this.clearColor=new wc(this),this.clearDepth=new Xv(this),this.clearStencil=new nl(this),this.colorMask=new Yv(this),this.depthMask=new Lm(this),this.stencilMask=new Jv(this),this.stencilFunc=new zm(this),this.stencilOp=new $d(this),this.stencilTest=new Rm(this),this.depthRange=new Dm(this),this.depthTest=new $m(this),this.depthFunc=new Om(this),this.blend=new va(this),this.blendFunc=new Bm(this),this.blendColor=new Qv(this),this.blendEquation=new Fm(this),this.cullFace=new du(this),this.cullFaceSide=new e1(this),this.frontFace=new Sc(this),this.program=new t1(this),this.activeTexture=new n1(this),this.viewport=new Nm(this),this.bindFramebuffer=new jm(this),this.bindRenderbuffer=new Um(this),this.bindTexture=new Od(this),this.bindVertexBuffer=new Vm(this),this.bindElementBuffer=new Cc(this),this.bindVertexArray=new ws(this),this.pixelStoreUnpack=new Bd(this),this.pixelStoreUnpackPremultiplyAlpha=new Fd(this),this.pixelStoreUnpackFlipY=new Nd(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Us(r)){this.HALF_FLOAT=r.HALF_FLOAT;const m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new Yo(this,r,c)}createVertexBuffer(r,c,f){return new Dd(this,r,c,f)}createRenderbuffer(r,c,f){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,r,c,f),this.bindRenderbuffer.set(null),y}createFramebuffer(r,c,f,m){return new r1(this,r,c,f,m)}clear({color:r,depth:c,stencil:f}){const m=this.gl;let y=0;r&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),m.clear(y)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){u.aE(r.blendFunction,mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Us(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Us(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Ht{constructor(r,c,f){this.func=r,this.mask=c,this.range=f}}Ht.ReadOnly=!1,Ht.ReadWrite=!0,Ht.disabled=new Ht(519,Ht.ReadOnly,[0,1]);const Tc=7680;class Nn{constructor(r,c,f,m,y,C){this.test=r,this.ref=c,this.mask=f,this.fail=m,this.depthFail=y,this.pass=C}}Nn.disabled=new Nn({func:519,mask:0},0,0,Tc,Tc,Tc);class An{constructor(r,c,f){this.enable=r,this.mode=c,this.frontFace=f}}let xa;function pu(v,r,c,f,m){const y=v.context,C=y.gl,T=v.useProgram("collisionBox"),M=[];let z=0,O=0;for(let me=0;me<f.length;me++){const ye=f[me],ie=r.getTile(ye).getBucket(c);if(!ie)continue;const xe=m?ie.textCollisionBox:ie.iconCollisionBox,Ce=ie.collisionCircleArray;if(Ce.length>0){const Pe=u.H();u.aQ(Pe,ie.placementInvProjMatrix,v.transform.glCoordMatrix),u.aQ(Pe,Pe,ie.placementViewportMatrix),M.push({circleArray:Ce,circleOffset:O,transform:ye.posMatrix,invTransform:Pe,coord:ye}),z+=Ce.length/4,O=z}xe&&T.draw(y,C.LINES,Ht.disabled,Nn.disabled,v.colorModeForRenderPass(),An.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(B=v.transform).width,1/B.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),c.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,null,v.transform.zoom,null,null,xe.collisionVertexBuffer)}var B;if(!m||!M.length)return;const Z=v.useProgram("collisionCircle"),ee=new u.aR;ee.resize(4*z),ee._trim();let ne=0;for(const me of M)for(let ye=0;ye<me.circleArray.length/4;ye++){const ie=4*ye,xe=me.circleArray[ie+0],Ce=me.circleArray[ie+1],Pe=me.circleArray[ie+2],Ne=me.circleArray[ie+3];ee.emplace(ne++,xe,Ce,Pe,Ne,0),ee.emplace(ne++,xe,Ce,Pe,Ne,1),ee.emplace(ne++,xe,Ce,Pe,Ne,2),ee.emplace(ne++,xe,Ce,Pe,Ne,3)}(!xa||xa.length<2*z)&&(xa=function(me){const ye=2*me,ie=new u.aT;ie.resize(ye),ie._trim();for(let xe=0;xe<ye;xe++){const Ce=6*xe;ie.uint16[Ce+0]=4*xe+0,ie.uint16[Ce+1]=4*xe+1,ie.uint16[Ce+2]=4*xe+2,ie.uint16[Ce+3]=4*xe+2,ie.uint16[Ce+4]=4*xe+3,ie.uint16[Ce+5]=4*xe+0}return ie}(z));const ae=y.createIndexBuffer(xa,!0),fe=y.createVertexBuffer(ee,u.aS.members,!0);for(const me of M){const ye=ga(me.transform,me.invTransform,v.transform);Z.draw(y,C.TRIANGLES,Ht.disabled,Nn.disabled,v.colorModeForRenderPass(),An.disabled,ye,v.style.map.terrain&&v.style.map.terrain.getTerrainData(me.coord),c.id,fe,ae,u.a0.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,v.transform.zoom,null,null,null)}fe.destroy(),ae.destroy()}An.disabled=new An(!1,1029,2305),An.backCCW=new An(!0,1029,2305);const fu=u.an(new Float32Array(16));function Vd(v,r,c,f,m,y){const{horizontalAlign:C,verticalAlign:T}=u.au(v);return new u.P((-(C-.5)*r/m+f[0])*y,(-(T-.5)*c/m+f[1])*y)}function ba(v,r,c,f,m,y){const C=r.tileAnchorPoint.add(new u.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let T=f.mult(y);c||(T=T.rotate(-m));const M=C.add(T);return he(M.x,M.y,r.labelPlaneMatrix,r.getElevation).point}if(c){const T=Me(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),M=Math.atan(T.y/T.x)+(T.x<0?Math.PI:0);return v.add(f.rotate(M))}return v.add(f)}function rl(v,r,c,f,m,y,C,T,M,z,O,B,Z,ee){const ne=v.text.placedSymbolArray,ae=v.text.dynamicLayoutVertexArray,fe=v.icon.dynamicLayoutVertexArray,me={};ae.clear();for(let ye=0;ye<ne.length;ye++){const ie=ne.get(ye),xe=ie.hidden||!ie.crossTileID||v.allowVerticalPlacement&&!ie.placedOrientation?null:f[ie.crossTileID];if(xe){const Ce=new u.P(ie.anchorX,ie.anchorY),Pe={getElevation:ee,width:m.width,height:m.height,labelPlaneMatrix:y,lineVertexArray:null,pitchWithMap:c,projection:O,projectionCache:null,tileAnchorPoint:Ce,translation:B,unwrappedTileID:Z},Ne=c?he(Ce.x,Ce.y,C,ee):Me(Ce.x,Ce.y,Pe),He=q(m.cameraToCenterDistance,Ne.signedDistanceFromCamera);let nt=u.ai(v.textSizeData,M,ie)*He/u.ap;c&&(nt*=v.tilePixelRatio/T);const{width:ct,height:Qe,anchor:Je,textOffset:_t,textBoxScale:Ft}=xe,et=Vd(Je,ct,Qe,_t,Ft,nt),at=O.getPitchedTextCorrection(m,Ce.add(new u.P(B[0],B[1])),Z),Ot=ba(Ne.point,Pe,r,et,m.angle,at),Gn=v.allowVerticalPlacement&&ie.placedOrientation===u.ah.vertical?Math.PI/2:0;for(let qt=0;qt<ie.numGlyphs;qt++)u.aj(ae,Ot,Gn);z&&ie.associatedIconIndex>=0&&(me[ie.associatedIconIndex]={shiftedAnchor:Ot,angle:Gn})}else Tt(ie.numGlyphs,ae)}if(z){fe.clear();const ye=v.icon.placedSymbolArray;for(let ie=0;ie<ye.length;ie++){const xe=ye.get(ie);if(xe.hidden)Tt(xe.numGlyphs,fe);else{const Ce=me[ie];if(Ce)for(let Pe=0;Pe<xe.numGlyphs;Pe++)u.aj(fe,Ce.shiftedAnchor,Ce.angle);else Tt(xe.numGlyphs,fe)}}v.icon.dynamicLayoutVertexBuffer.updateData(fe)}v.text.dynamicLayoutVertexBuffer.updateData(ae)}function lo(v,r,c){return c.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Wd(v,r,c,f,m,y,C,T,M,z,O,B){const Z=v.context,ee=Z.gl,ne=v.transform,ae=fa(),fe=T==="map",me=M==="map",ye=T!=="viewport"&&c.layout.get("symbol-placement")!=="point",ie=fe&&!me&&!ye,xe=!me&&ye,Ce=!c.layout.get("symbol-sort-key").isConstant();let Pe=!1;const Ne=v.depthModeForSublayer(0,Ht.ReadOnly),He=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),nt=[],ct=ae.getCircleRadiusCorrection(ne);for(const Qe of f){const Je=r.getTile(Qe),_t=Je.getBucket(c);if(!_t)continue;const Ft=m?_t.text:_t.icon;if(!Ft||!Ft.segments.get().length||!Ft.hasVisibleVertices)continue;const et=Ft.programConfigurations.get(c.id),at=m||_t.sdfIcons,Ot=m?_t.textSizeData:_t.iconSizeData,Gn=me||ne.pitch!==0,qt=v.useProgram(lo(at,m,_t),et),Qt=u.ag(Ot,ne.zoom),Hn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Qe);let ri,Po,Zn,Pi,gi=[0,0],ii=null;if(m)Po=Je.glyphAtlasTexture,Zn=ee.LINEAR,ri=Je.glyphAtlasTexture.size,_t.iconsInText&&(gi=Je.imageAtlasTexture.size,ii=Je.imageAtlasTexture,Pi=Gn||v.options.rotating||v.options.zooming||Ot.kind==="composite"||Ot.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const rn=c.layout.get("icon-size").constantOr(0)!==1||_t.iconsNeedLinear;Po=Je.imageAtlasTexture,Zn=at||v.options.rotating||v.options.zooming||rn||Gn?ee.LINEAR:ee.NEAREST,ri=Je.imageAtlasTexture.size}const yi=Jt(Je,1,v.transform.zoom),es=xe?Qe.posMatrix:fu,_l=Xo(es,me,fe,v.transform,yi),qc=so(es,me,fe,v.transform,yi),xl=so(Qe.posMatrix,me,fe,v.transform,yi),ho=ae.translatePosition(v.transform,Je,y,C),Gc=He&&_t.hasTextData(),mp=c.layout.get("icon-text-fit")!=="none"&&Gc&&_t.hasIconData();if(ye){const rn=v.style.map.terrain?(bl,wl)=>v.style.map.terrain.getElevation(Qe,bl,wl):null,Ta=c.layout.get("text-rotation-alignment")==="map";Q(_t,Qe.posMatrix,v,m,_l,xl,me,z,Ta,ae,Qe.toUnwrapped(),ne.width,ne.height,ho,rn)}const po=Qe.posMatrix,fo=m&&He||mp,Vs=ye||fo?fu:_l,Mo=qc,Xr=at&&c.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let oi;oi=at?_t.iconsInText?Ld(Ot.kind,Qt,ie,me,ye,fo,v,po,Vs,Mo,ho,ri,gi,ct):hu(Ot.kind,Qt,ie,me,ye,fo,v,po,Vs,Mo,ho,m,ri,!0,ct):Am(Ot.kind,Qt,ie,me,ye,fo,v,po,Vs,Mo,ho,m,ri,ct);const Zi={program:qt,buffers:Ft,uniformValues:oi,atlasTexture:Po,atlasTextureIcon:ii,atlasInterpolation:Zn,atlasInterpolationIcon:Pi,isSDF:at,hasHalo:Xr};if(Ce&&_t.canOverlap){Pe=!0;const rn=Ft.segments.get();for(const Ta of rn)nt.push({segments:new u.a0([Ta]),sortKey:Ta.sortKey,state:Zi,terrainData:Hn})}else nt.push({segments:Ft.segments,sortKey:0,state:Zi,terrainData:Hn})}Pe&&nt.sort((Qe,Je)=>Qe.sortKey-Je.sortKey);for(const Qe of nt){const Je=Qe.state;if(Z.activeTexture.set(ee.TEXTURE0),Je.atlasTexture.bind(Je.atlasInterpolation,ee.CLAMP_TO_EDGE),Je.atlasTextureIcon&&(Z.activeTexture.set(ee.TEXTURE1),Je.atlasTextureIcon&&Je.atlasTextureIcon.bind(Je.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),Je.isSDF){const _t=Je.uniformValues;Je.hasHalo&&(_t.u_is_halo=1,qd(Je.buffers,Qe.segments,c,v,Je.program,Ne,O,B,_t,Qe.terrainData)),_t.u_is_halo=0}qd(Je.buffers,Qe.segments,c,v,Je.program,Ne,O,B,Je.uniformValues,Qe.terrainData)}}function qd(v,r,c,f,m,y,C,T,M,z){const O=f.context;m.draw(O,O.gl.TRIANGLES,y,C,T,An.disabled,M,z,c.id,v.layoutVertexBuffer,v.indexBuffer,r,c.paint,f.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Gd(v,r,c,f){const m=v.context,y=m.gl,C=Nn.disabled,T=new mr([y.ONE,y.ONE],u.aM.transparent,[!0,!0,!0,!0]),M=r.getBucket(c);if(!M)return;const z=f.key;let O=c.heatmapFbos.get(z);O||(O=mu(m,r.tileSize,r.tileSize),c.heatmapFbos.set(z,O)),m.bindFramebuffer.set(O.framebuffer),m.viewport.set([0,0,r.tileSize,r.tileSize]),m.clear({color:u.aM.transparent});const B=M.programConfigurations.get(c.id),Z=v.useProgram("heatmap",B),ee=v.style.map.terrain.getTerrainData(f);Z.draw(m,y.TRIANGLES,Ht.disabled,C,T,An.disabled,Ii(f.posMatrix,r,v.transform.zoom,c.paint.get("heatmap-intensity")),ee,c.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,c.paint,v.transform.zoom,B)}function wa(v,r,c){const f=v.context,m=f.gl;f.setColorMode(v.colorModeForRenderPass());const y=gu(f,r),C=c.key,T=r.heatmapFbos.get(C);T&&(f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,T.colorAttachment.get()),f.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,m.TRIANGLES,Ht.disabled,Nn.disabled,v.colorModeForRenderPass(),An.disabled,vc(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),T.destroy(),r.heatmapFbos.delete(C))}function mu(v,r,c){var f,m;const y=v.gl,C=y.createTexture();y.bindTexture(y.TEXTURE_2D,C),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const T=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:y.UNSIGNED_BYTE,M=(m=v.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,r,c,0,y.RGBA,T,null);const z=v.createFramebuffer(r,c,!1,!1);return z.colorAttachment.set(C),z}function gu(v,r){return r.colorRampTexture||(r.colorRampTexture=new Ee(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function il(v,r,c,f,m){if(!c||!f||!f.imageAtlas)return;const y=f.imageAtlas.patternPositions;let C=y[c.to.toString()],T=y[c.from.toString()];if(!C&&T&&(C=T),!T&&C&&(T=C),!C||!T){const M=m.getPaintProperty(r);C=y[M],T=y[M]}C&&T&&v.setConstantPatternPositions(C,T)}function yu(v,r,c,f,m,y,C){const T=v.context.gl,M="fill-pattern",z=c.paint.get(M),O=z&&z.constantOr(1),B=c.getCrossfadeParameters();let Z,ee,ne,ae,fe;C?(ee=O&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Z=T.LINES):(ee=O?"fillPattern":"fill",Z=T.TRIANGLES);const me=z.constantOr(null);for(const ye of f){const ie=r.getTile(ye);if(O&&!ie.patternsLoaded())continue;const xe=ie.getBucket(c);if(!xe)continue;const Ce=xe.programConfigurations.get(c.id),Pe=v.useProgram(ee,Ce),Ne=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye);O&&(v.context.activeTexture.set(T.TEXTURE0),ie.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Ce.updatePaintBuffers(B)),il(Ce,M,me,ie,c);const He=Ne?ye:null,nt=v.translatePosMatrix(He?He.posMatrix:ye.posMatrix,ie,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(C){ae=xe.indexBuffer2,fe=xe.segments2;const ct=[T.drawingBufferWidth,T.drawingBufferHeight];ne=ee==="fillOutlinePattern"&&O?Em(nt,v,B,ie,ct):Wv(nt,ct)}else ae=xe.indexBuffer,fe=xe.segments,ne=O?Tm(nt,v,B,ie):el(nt);Pe.draw(v.context,Z,m,v.stencilModeForClipping(ye),y,An.disabled,ne,Ne,c.id,xe.layoutVertexBuffer,ae,fe,c.paint,v.transform.zoom,Ce)}}function Ec(v,r,c,f,m,y,C){const T=v.context,M=T.gl,z="fill-extrusion-pattern",O=c.paint.get(z),B=O.constantOr(1),Z=c.getCrossfadeParameters(),ee=c.paint.get("fill-extrusion-opacity"),ne=O.constantOr(null);for(const ae of f){const fe=r.getTile(ae),me=fe.getBucket(c);if(!me)continue;const ye=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ae),ie=me.programConfigurations.get(c.id),xe=v.useProgram(B?"fillExtrusionPattern":"fillExtrusion",ie);B&&(v.context.activeTexture.set(M.TEXTURE0),fe.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ie.updatePaintBuffers(Z)),il(ie,z,ne,fe,c);const Ce=v.translatePosMatrix(ae.posMatrix,fe,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Pe=c.paint.get("fill-extrusion-vertical-gradient"),Ne=B?yc(Ce,v,Pe,ee,ae,Z,fe):uu(Ce,v,Pe,ee);xe.draw(T,T.gl.TRIANGLES,m,y,C,An.backCCW,Ne,ye,c.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,c.paint,v.transform.zoom,ie,v.style.map.terrain&&me.centroidVertexBuffer)}}function ol(v,r,c,f,m,y,C){const T=v.context,M=T.gl,z=c.fbo;if(!z)return;const O=v.useProgram("hillshade"),B=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,z.colorAttachment.get()),O.draw(T,M.TRIANGLES,m,y,C,An.disabled,((Z,ee,ne,ae)=>{const fe=ne.paint.get("hillshade-shadow-color"),me=ne.paint.get("hillshade-highlight-color"),ye=ne.paint.get("hillshade-accent-color");let ie=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ie-=Z.transform.angle);const xe=!Z.options.moving;return{u_matrix:ae?ae.posMatrix:Z.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),xe),u_image:0,u_latrange:_c(0,ee.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ie],u_shadow:fe,u_highlight:me,u_accent:ye}})(v,c,f,B?r:null),B,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function sl(v,r,c,f,m,y){const C=v.context,T=C.gl,M=r.dem;if(M&&M.data){const z=M.dim,O=M.stride,B=M.getPixels();if(C.activeTexture.set(T.TEXTURE1),C.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(O),r.demTexture){const ee=r.demTexture;ee.update(B,{premultiply:!1}),ee.bind(T.NEAREST,T.CLAMP_TO_EDGE)}else r.demTexture=new Ee(C,B,T.RGBA,{premultiply:!1}),r.demTexture.bind(T.NEAREST,T.CLAMP_TO_EDGE);C.activeTexture.set(T.TEXTURE0);let Z=r.fbo;if(!Z){const ee=new Ee(C,{width:z,height:z,data:null},T.RGBA);ee.bind(T.LINEAR,T.CLAMP_TO_EDGE),Z=r.fbo=C.createFramebuffer(z,z,!0,!1),Z.colorAttachment.set(ee.texture)}C.bindFramebuffer.set(Z.framebuffer),C.viewport.set([0,0,z,z]),v.useProgram("hillshadePrepare").draw(C,T.TRIANGLES,f,m,y,An.disabled,((ee,ne)=>{const ae=ne.stride,fe=u.H();return u.aP(fe,0,u.X,-u.X,0,0,1),u.J(fe,fe,[0,-u.X,0]),{u_matrix:fe,u_image:1,u_dimension:[ae,ae],u_zoom:ee.overscaledZ,u_unpack:ne.getUnpackVector()}})(r.tileID,M),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function Wm(v,r,c,f,m,y){const C=f.paint.get("raster-fade-duration");if(!y&&C>0){const T=E.now(),M=(T-v.timeAdded)/C,z=r?(T-r.timeAdded)/C:-1,O=c.getSource(),B=m.coveringZoomLevel({tileSize:O.tileSize,roundZoom:O.roundZoom}),Z=!r||Math.abs(r.tileID.overscaledZ-B)>Math.abs(v.tileID.overscaledZ-B),ee=Z&&v.refreshedUponExpiration?1:u.ac(Z?M:1-z,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Hd=new u.aM(1,0,0,1),fn=new u.aM(0,1,0,1),Ic=new u.aM(0,0,1,1),o1=new u.aM(1,0,1,1),qm=new u.aM(0,1,1,1);function al(v,r,c,f){Pc(v,0,r+c/2,v.transform.width,c,f)}function Gm(v,r,c,f){Pc(v,r-c/2,0,c,v.transform.height,f)}function Pc(v,r,c,f,m,y){const C=v.context,T=C.gl;T.enable(T.SCISSOR_TEST),T.scissor(r*v.pixelRatio,c*v.pixelRatio,f*v.pixelRatio,m*v.pixelRatio),C.clear({color:y}),T.disable(T.SCISSOR_TEST)}function Hm(v,r,c){const f=v.context,m=f.gl,y=c.posMatrix,C=v.useProgram("debug"),T=Ht.disabled,M=Nn.disabled,z=v.colorModeForRenderPass(),O="$debug",B=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);f.activeTexture.set(m.TEXTURE0);const Z=r.getTileByID(c.key).latestRawTileData,ee=Math.floor((Z&&Z.byteLength||0)/1024),ne=r.getTile(c).tileSize,ae=512/Math.min(ne,512)*(c.overscaledZ/v.transform.zoom)*.5;let fe=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(fe+=` => ${c.overscaledZ}`),function(me,ye){me.initDebugOverlayCanvas();const ie=me.debugOverlayCanvas,xe=me.context.gl,Ce=me.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,ie.width,ie.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(ye,5,5),Ce.strokeText(ye,5,5),me.debugOverlayTexture.update(ie),me.debugOverlayTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE)}(v,`${fe} ${ee}kB`),C.draw(f,m.TRIANGLES,T,M,mr.alphaBlended,An.disabled,cu(y,u.aM.transparent,ae),null,O,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),C.draw(f,m.LINE_STRIP,T,M,z,An.disabled,cu(y,u.aM.red),B,O,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Zm(v,r,c){const f=v.context,m=f.gl,y=v.colorModeForRenderPass(),C=new Ht(m.LEQUAL,Ht.ReadWrite,v.depthRangeFor3D),T=v.useProgram("terrain"),M=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(const z of c){const O=v.renderToTexture.getTexture(z),B=r.getTerrainData(z.tileID);f.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,O.texture);const Z=v.transform.calculatePosMatrix(z.tileID.toUnwrapped()),ee=r.getMeshFrameDelta(v.transform.zoom),ne=v.transform.calculateFogMatrix(z.tileID.toUnwrapped()),ae=Md(Z,ee,ne,v.style.sky,v.transform.pitch);T.draw(f,m.TRIANGLES,C,Nn.disabled,y,An.backCCW,ae,B,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class Mc{constructor(r,c,f){this.vertexBuffer=r,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ac{constructor(r,c){this.context=new i1(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=it.maxUnderzooming+it.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Id}resize(r,c,f){if(this.width=Math.floor(r*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const r=this.context,c=new u.aX;c.emplaceBack(0,0),c.emplaceBack(u.X,0),c.emplaceBack(0,u.X),c.emplaceBack(u.X,u.X),this.tileExtentBuffer=r.createVertexBuffer(c,ma.members),this.tileExtentSegments=u.a0.simpleSegment(0,0,4,2);const f=new u.aX;f.emplaceBack(0,0),f.emplaceBack(u.X,0),f.emplaceBack(0,u.X),f.emplaceBack(u.X,u.X),this.debugBuffer=r.createVertexBuffer(f,ma.members),this.debugSegments=u.a0.simpleSegment(0,0,4,5);const m=new u.$;m.emplaceBack(0,0,0,0),m.emplaceBack(u.X,0,u.X,0),m.emplaceBack(0,u.X,0,u.X),m.emplaceBack(u.X,u.X,u.X,u.X),this.rasterBoundsBuffer=r.createVertexBuffer(m,Qn.members),this.rasterBoundsSegments=u.a0.simpleSegment(0,0,4,2);const y=new u.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(y,ma.members),this.viewportSegments=u.a0.simpleSegment(0,0,4,2);const C=new u.aZ;C.emplaceBack(0),C.emplaceBack(1),C.emplaceBack(3),C.emplaceBack(2),C.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(C);const T=new u.aY;T.emplaceBack(0,1,2),T.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(T);const M=this.context.gl;this.stencilClearMode=new Nn({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=u.H();u.aP(f,0,this.width,this.height,0,0,1),u.K(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,Ht.disabled,this.stencilClearMode,mr.disabled,An.disabled,Ei(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;const f=this.context,m=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(mr.disabled),f.setDepthMode(Ht.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const C of c){const T=this._tileClippingMaskIDs[C.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(C);y.draw(f,m.TRIANGLES,Ht.disabled,new Nn({func:m.ALWAYS,mask:0},T,255,m.KEEP,m.KEEP,m.REPLACE),mr.disabled,An.disabled,Ei(C.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new Nn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new Nn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){const c=this.context.gl,f=r.sort((C,T)=>T.overscaledZ-C.overscaledZ),m=f[f.length-1].overscaledZ,y=f[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const C={};for(let T=0;T<y;T++)C[T+m]=new Nn({func:c.GEQUAL,mask:255},T+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=y,[C,f]}return[{[m]:Nn.disabled},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new mr([r.CONSTANT_COLOR,r.ONE],new u.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?mr.unblended:mr.alphaBlended}depthModeForSublayer(r,c,f){if(!this.opaquePassEnabledForLayer())return Ht.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ht(f||this.context.gl.LEQUAL,c,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(E.now()),this.imageManager.beginFrame();const f=this.style._order,m=this.style.sourceCaches,y={},C={},T={};for(const M in m){const z=m[M];z.used&&z.prepare(this.context),y[M]=z.getVisibleCoordinates(),C[M]=y[M].slice().reverse(),T[M]=z.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<f.length;M++)if(this.style._layers[f[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of f){const z=this.style._layers[M];if(!z.hasOffscreenPass()||z.isHidden(this.transform.zoom))continue;const O=C[z.source];(z.type==="custom"||O.length)&&this.renderLayer(this,m[z.source],z,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?u.aM.black:u.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(M,z){const O=M.context,B=O.gl,Z=((me,ye,ie)=>({u_sky_color:me.properties.get("sky-color"),u_horizon_color:me.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*ie,u_sky_horizon_blend:me.properties.get("sky-horizon-blend")*ye.height/2*ie}))(z,M.style.map.transform,M.pixelRatio),ee=new Ht(B.LEQUAL,Ht.ReadWrite,[0,1]),ne=Nn.disabled,ae=M.colorModeForRenderPass(),fe=M.useProgram("sky");if(!z.mesh){const me=new u.aX;me.emplaceBack(-1,-1),me.emplaceBack(1,-1),me.emplaceBack(1,1),me.emplaceBack(-1,1);const ye=new u.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),z.mesh=new Mc(O.createVertexBuffer(me,ma.members),O.createIndexBuffer(ye),u.a0.simpleSegment(0,0,me.length,ye.length))}fe.draw(O,B.TRIANGLES,ee,ne,ae,An.disabled,Z,void 0,"sky",z.mesh.vertexBuffer,z.mesh.indexBuffer,z.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[f[this.currentLayer]],z=m[M.source],O=y[M.source];this._renderTileClippingMasks(M,O),this.renderLayer(this,z,M,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const M=this.style._layers[f[this.currentLayer]],z=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const O=(M.type==="symbol"?T:C)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,z,M,O)}if(this.options.showTileBoundaries){const M=function(z,O){let B=null;const Z=Object.values(z._layers).flatMap(fe=>fe.source&&!fe.isHidden(O)?[z.sourceCaches[fe.source]]:[]),ee=Z.filter(fe=>fe.getSource().type==="vector"),ne=Z.filter(fe=>fe.getSource().type!=="vector"),ae=fe=>{(!B||B.getSource().maxzoom<fe.getSource().maxzoom)&&(B=fe)};return ee.forEach(fe=>ae(fe)),B||ne.forEach(fe=>ae(fe)),B}(this.style,this.transform.zoom);M&&function(z,O,B){for(let Z=0;Z<B.length;Z++)Hm(z,O,B[Z])}(this,M,M.getVisibleCoordinates())}this.options.showPadding&&function(M){const z=M.transform.padding;al(M,M.transform.height-(z.top||0),3,Hd),al(M,z.bottom||0,3,fn),Gm(M,z.left||0,3,Ic),Gm(M,M.transform.width-(z.right||0),3,o1);const O=M.transform.centerPoint;(function(B,Z,ee,ne){Pc(B,Z-1,ee-10,2,20,ne),Pc(B,Z-10,ee-1,20,2,ne)})(M,O.x,M.transform.height-O.y,qm)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=r?!u.a_(c,f):!u.a$(c,f)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(u.b0(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(y,C){const T=y.context,M=T.gl,z=mr.unblended,O=new Ht(M.LEQUAL,Ht.ReadWrite,[0,1]),B=C.getTerrainMesh(),Z=C.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainDepth");T.bindFramebuffer.set(C.getFramebuffer("depth").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:u.aM.transparent,depth:1});for(const ne of Z){const ae=C.getTerrainData(ne.tileID),fe={u_matrix:y.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};ee.draw(T,M.TRIANGLES,O,Nn.disabled,z,An.backCCW,fe,ae,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain),function(y,C){const T=y.context,M=T.gl,z=mr.unblended,O=new Ht(M.LEQUAL,Ht.ReadWrite,[0,1]),B=C.getTerrainMesh(),Z=C.getCoordsTexture(),ee=C.sourceCache.getRenderableTiles(),ne=y.useProgram("terrainCoords");T.bindFramebuffer.set(C.getFramebuffer("coords").framebuffer),T.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),T.clear({color:u.aM.transparent,depth:1}),C.coordsIndex=[];for(const ae of ee){const fe=C.getTerrainData(ae.tileID);T.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,Z.texture);const me={u_matrix:y.transform.calculatePosMatrix(ae.tileID.toUnwrapped()),u_terrain_coords_id:(255-C.coordsIndex.length)/255,u_texture:0,u_ele_delta:C.getMeshFrameDelta(y.transform.zoom)};ne.draw(T,M.TRIANGLES,O,Nn.disabled,z,An.backCCW,me,fe,"terrain",B.vertexBuffer,B.indexBuffer,B.segments),C.coordsIndex.push(ae.tileID.key)}T.bindFramebuffer.set(null),T.viewport.set([0,0,y.width,y.height])}(this,this.style.map.terrain))}renderLayer(r,c,f,m){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(m||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(y,C,T,M,z){if(y.renderPass!=="translucent")return;const O=Nn.disabled,B=y.colorModeForRenderPass();(T._unevaluatedLayout.hasValue("text-variable-anchor")||T._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Z,ee,ne,ae,fe,me,ye,ie,xe){const Ce=ee.transform,Pe=fa(),Ne=fe==="map",He=me==="map";for(const nt of Z){const ct=ae.getTile(nt),Qe=ct.getBucket(ne);if(!Qe||!Qe.text||!Qe.text.segments.get().length)continue;const Je=u.ag(Qe.textSizeData,Ce.zoom),_t=Jt(ct,1,ee.transform.zoom),Ft=Xo(nt.posMatrix,He,Ne,ee.transform,_t),et=ne.layout.get("icon-text-fit")!=="none"&&Qe.hasIconData();if(Je){const at=Math.pow(2,Ce.zoom-ct.tileID.overscaledZ),Ot=ee.style.map.terrain?(qt,Qt)=>ee.style.map.terrain.getElevation(nt,qt,Qt):null,Gn=Pe.translatePosition(Ce,ct,ye,ie);rl(Qe,Ne,He,xe,Ce,Ft,nt.posMatrix,at,Je,et,Pe,Gn,nt.toUnwrapped(),Ot)}}}(M,y,T,C,T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),z),T.paint.get("icon-opacity").constantOr(1)!==0&&Wd(y,C,T,M,!1,T.paint.get("icon-translate"),T.paint.get("icon-translate-anchor"),T.layout.get("icon-rotation-alignment"),T.layout.get("icon-pitch-alignment"),T.layout.get("icon-keep-upright"),O,B),T.paint.get("text-opacity").constantOr(1)!==0&&Wd(y,C,T,M,!0,T.paint.get("text-translate"),T.paint.get("text-translate-anchor"),T.layout.get("text-rotation-alignment"),T.layout.get("text-pitch-alignment"),T.layout.get("text-keep-upright"),O,B),C.map.showCollisionBoxes&&(pu(y,C,T,M,!0),pu(y,C,T,M,!1))})(r,c,f,m,this.style.placement.variableOffsets);break;case"circle":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("circle-opacity"),O=T.paint.get("circle-stroke-width"),B=T.paint.get("circle-stroke-opacity"),Z=!T.layout.get("circle-sort-key").isConstant();if(z.constantOr(1)===0&&(O.constantOr(1)===0||B.constantOr(1)===0))return;const ee=y.context,ne=ee.gl,ae=y.depthModeForSublayer(0,Ht.ReadOnly),fe=Nn.disabled,me=y.colorModeForRenderPass(),ye=[];for(let ie=0;ie<M.length;ie++){const xe=M[ie],Ce=C.getTile(xe),Pe=Ce.getBucket(T);if(!Pe)continue;const Ne=Pe.programConfigurations.get(T.id),He=y.useProgram("circle",Ne),nt=Pe.layoutVertexBuffer,ct=Pe.indexBuffer,Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(xe),Je={programConfiguration:Ne,program:He,layoutVertexBuffer:nt,indexBuffer:ct,uniformValues:qv(y,xe,Ce,T),terrainData:Qe};if(Z){const _t=Pe.segments.get();for(const Ft of _t)ye.push({segments:new u.a0([Ft]),sortKey:Ft.sortKey,state:Je})}else ye.push({segments:Pe.segments,sortKey:0,state:Je})}Z&&ye.sort((ie,xe)=>ie.sortKey-xe.sortKey);for(const ie of ye){const{programConfiguration:xe,program:Ce,layoutVertexBuffer:Pe,indexBuffer:Ne,uniformValues:He,terrainData:nt}=ie.state;Ce.draw(ee,ne.TRIANGLES,ae,fe,me,An.disabled,He,nt,T.id,Pe,Ne,ie.segments,T.paint,y.transform.zoom,xe)}})(r,c,f,m);break;case"heatmap":(function(y,C,T,M){if(T.paint.get("heatmap-opacity")===0)return;const z=y.context;if(y.style.map.terrain){for(const O of M){const B=C.getTile(O);C.hasRenderableParent(O)||(y.renderPass==="offscreen"?Gd(y,B,T,O):y.renderPass==="translucent"&&wa(y,T,O))}z.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?function(O,B,Z,ee){const ne=O.context,ae=ne.gl,fe=Nn.disabled,me=new mr([ae.ONE,ae.ONE],u.aM.transparent,[!0,!0,!0,!0]);(function(ye,ie,xe){const Ce=ye.gl;ye.activeTexture.set(Ce.TEXTURE1),ye.viewport.set([0,0,ie.width/4,ie.height/4]);let Pe=xe.heatmapFbos.get(u.aU);Pe?(Ce.bindTexture(Ce.TEXTURE_2D,Pe.colorAttachment.get()),ye.bindFramebuffer.set(Pe.framebuffer)):(Pe=mu(ye,ie.width/4,ie.height/4),xe.heatmapFbos.set(u.aU,Pe))})(ne,O,Z),ne.clear({color:u.aM.transparent});for(let ye=0;ye<ee.length;ye++){const ie=ee[ye];if(B.hasRenderableParent(ie))continue;const xe=B.getTile(ie),Ce=xe.getBucket(Z);if(!Ce)continue;const Pe=Ce.programConfigurations.get(Z.id),Ne=O.useProgram("heatmap",Pe),{zoom:He}=O.transform;Ne.draw(ne,ae.TRIANGLES,Ht.disabled,fe,me,An.disabled,Ii(ie.posMatrix,xe,He,Z.paint.get("heatmap-intensity")),null,Z.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,Z.paint,O.transform.zoom,Pe)}ne.viewport.set([0,0,O.width,O.height])}(y,C,T,M):y.renderPass==="translucent"&&function(O,B){const Z=O.context,ee=Z.gl;Z.setColorMode(O.colorModeForRenderPass());const ne=B.heatmapFbos.get(u.aU);ne&&(Z.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ne.colorAttachment.get()),Z.activeTexture.set(ee.TEXTURE1),gu(Z,B).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),O.useProgram("heatmapTexture").draw(Z,ee.TRIANGLES,Ht.disabled,Nn.disabled,O.colorModeForRenderPass(),An.disabled,vc(O,B,0,1),null,B.id,O.viewportBuffer,O.quadTriangleIndexBuffer,O.viewportSegments,B.paint,O.transform.zoom))}(y,T)})(r,c,f,m);break;case"line":(function(y,C,T,M){if(y.renderPass!=="translucent")return;const z=T.paint.get("line-opacity"),O=T.paint.get("line-width");if(z.constantOr(1)===0||O.constantOr(1)===0)return;const B=y.depthModeForSublayer(0,Ht.ReadOnly),Z=y.colorModeForRenderPass(),ee=T.paint.get("line-dasharray"),ne=T.paint.get("line-pattern"),ae=ne.constantOr(1),fe=T.paint.get("line-gradient"),me=T.getCrossfadeParameters(),ye=ae?"linePattern":ee?"lineSDF":fe?"lineGradient":"line",ie=y.context,xe=ie.gl;let Ce=!0;for(const Pe of M){const Ne=C.getTile(Pe);if(ae&&!Ne.patternsLoaded())continue;const He=Ne.getBucket(T);if(!He)continue;const nt=He.programConfigurations.get(T.id),ct=y.context.program.get(),Qe=y.useProgram(ye,nt),Je=Ce||Qe.program!==ct,_t=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Pe),Ft=ne.constantOr(null);if(Ft&&Ne.imageAtlas){const Ot=Ne.imageAtlas,Gn=Ot.patternPositions[Ft.to.toString()],qt=Ot.patternPositions[Ft.from.toString()];Gn&&qt&&nt.setConstantPatternPositions(Gn,qt)}const et=_t?Pe:null,at=ae?tl(y,Ne,T,me,et):ee?Gv(y,Ne,T,ee,me,et):fe?Im(y,Ne,T,He.lineClipsArray.length,et):xc(y,Ne,T,et);if(ae)ie.activeTexture.set(xe.TEXTURE0),Ne.imageAtlasTexture.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),nt.updatePaintBuffers(me);else if(ee&&(Je||y.lineAtlas.dirty))ie.activeTexture.set(xe.TEXTURE0),y.lineAtlas.bind(ie);else if(fe){const Ot=He.gradients[T.id];let Gn=Ot.texture;if(T.gradientVersion!==Ot.version){let qt=256;if(T.stepInterpolant){const Qt=C.getSource().maxzoom,Hn=Pe.canonical.z===Qt?Math.ceil(1<<y.transform.maxZoom-Pe.canonical.z):1;qt=u.ac(u.aV(He.maxLineLength/u.X*1024*Hn),256,ie.maxTextureSize)}Ot.gradient=u.aW({expression:T.gradientExpression(),evaluationKey:"lineProgress",resolution:qt,image:Ot.gradient||void 0,clips:He.lineClipsArray}),Ot.texture?Ot.texture.update(Ot.gradient):Ot.texture=new Ee(ie,Ot.gradient,xe.RGBA),Ot.version=T.gradientVersion,Gn=Ot.texture}ie.activeTexture.set(xe.TEXTURE0),Gn.bind(T.stepInterpolant?xe.NEAREST:xe.LINEAR,xe.CLAMP_TO_EDGE)}Qe.draw(ie,xe.TRIANGLES,B,y.stencilModeForClipping(Pe),Z,An.disabled,at,_t,T.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,T.paint,y.transform.zoom,nt,He.layoutVertexBuffer2),Ce=!1}})(r,c,f,m);break;case"fill":(function(y,C,T,M){const z=T.paint.get("fill-color"),O=T.paint.get("fill-opacity");if(O.constantOr(1)===0)return;const B=y.colorModeForRenderPass(),Z=T.paint.get("fill-pattern"),ee=y.opaquePassEnabledForLayer()&&!Z.constantOr(1)&&z.constantOr(u.aM.transparent).a===1&&O.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ee){const ne=y.depthModeForSublayer(1,y.renderPass==="opaque"?Ht.ReadWrite:Ht.ReadOnly);yu(y,C,T,M,ne,B,!1)}if(y.renderPass==="translucent"&&T.paint.get("fill-antialias")){const ne=y.depthModeForSublayer(T.getPaintProperty("fill-outline-color")?2:0,Ht.ReadOnly);yu(y,C,T,M,ne,B,!0)}})(r,c,f,m);break;case"fill-extrusion":(function(y,C,T,M){const z=T.paint.get("fill-extrusion-opacity");if(z!==0&&y.renderPass==="translucent"){const O=new Ht(y.context.gl.LEQUAL,Ht.ReadWrite,y.depthRangeFor3D);if(z!==1||T.paint.get("fill-extrusion-pattern").constantOr(1))Ec(y,C,T,M,O,Nn.disabled,mr.disabled),Ec(y,C,T,M,O,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const B=y.colorModeForRenderPass();Ec(y,C,T,M,O,Nn.disabled,B)}}})(r,c,f,m);break;case"hillshade":(function(y,C,T,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const z=y.context,O=y.depthModeForSublayer(0,Ht.ReadOnly),B=y.colorModeForRenderPass(),[Z,ee]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(const ne of ee){const ae=C.getTile(ne);ae.needsHillshadePrepare!==void 0&&ae.needsHillshadePrepare&&y.renderPass==="offscreen"?sl(y,ae,T,O,Nn.disabled,B):y.renderPass==="translucent"&&ol(y,ne,ae,T,O,Z[ne.overscaledZ],B)}z.viewport.set([0,0,y.width,y.height])})(r,c,f,m);break;case"raster":(function(y,C,T,M){if(y.renderPass!=="translucent"||T.paint.get("raster-opacity")===0||!M.length)return;const z=y.context,O=z.gl,B=C.getSource(),Z=y.useProgram("raster"),ee=y.colorModeForRenderPass(),[ne,ae]=B instanceof bt?[{},M]:y.stencilConfigForOverlap(M),fe=ae[ae.length-1].overscaledZ,me=!y.options.moving;for(const ye of ae){const ie=y.depthModeForSublayer(ye.overscaledZ-fe,T.paint.get("raster-opacity")===1?Ht.ReadWrite:Ht.ReadOnly,O.LESS),xe=C.getTile(ye);xe.registerFadeDuration(T.paint.get("raster-fade-duration"));const Ce=C.findLoadedParent(ye,0),Pe=C.findLoadedSibling(ye),Ne=Wm(xe,Ce||Pe||null,C,T,y.transform,y.style.map.terrain);let He,nt;const ct=T.paint.get("raster-resampling")==="nearest"?O.NEAREST:O.LINEAR;z.activeTexture.set(O.TEXTURE0),xe.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(O.TEXTURE1),Ce?(Ce.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),He=Math.pow(2,Ce.tileID.overscaledZ-xe.tileID.overscaledZ),nt=[xe.tileID.canonical.x*He%1,xe.tileID.canonical.y*He%1]):xe.texture.bind(ct,O.CLAMP_TO_EDGE,O.LINEAR_MIPMAP_NEAREST),xe.texture.useMipmap&&z.extTextureFilterAnisotropic&&y.transform.pitch>20&&O.texParameterf(O.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);const Qe=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),Je=Qe?ye:null,_t=Je?Je.posMatrix:y.transform.calculatePosMatrix(ye.toUnwrapped(),me),Ft=Hv(_t,nt||[0,0],He||1,Ne,T);B instanceof bt?Z.draw(z,O.TRIANGLES,ie,Nn.disabled,ee,An.disabled,Ft,Qe,T.id,B.boundsBuffer,y.quadTriangleIndexBuffer,B.boundsSegments):Z.draw(z,O.TRIANGLES,ie,ne[ye.overscaledZ],ee,An.disabled,Ft,Qe,T.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(r,c,f,m);break;case"background":(function(y,C,T,M){const z=T.paint.get("background-color"),O=T.paint.get("background-opacity");if(O===0)return;const B=y.context,Z=B.gl,ee=y.transform,ne=ee.tileSize,ae=T.paint.get("background-pattern");if(y.isPatternMissing(ae))return;const fe=!ae&&z.a===1&&O===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==fe)return;const me=Nn.disabled,ye=y.depthModeForSublayer(0,fe==="opaque"?Ht.ReadWrite:Ht.ReadOnly),ie=y.colorModeForRenderPass(),xe=y.useProgram(ae?"backgroundPattern":"background"),Ce=M||ee.coveringTiles({tileSize:ne,terrain:y.style.map.terrain});ae&&(B.activeTexture.set(Z.TEXTURE0),y.imageManager.bind(y.context));const Pe=T.getCrossfadeParameters();for(const Ne of Ce){const He=M?Ne.posMatrix:y.transform.calculatePosMatrix(Ne.toUnwrapped()),nt=ae?zd(He,O,y,ae,{tileID:Ne,tileSize:ne},Pe):bc(He,O,z),ct=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne);xe.draw(B,Z.TRIANGLES,ye,me,ie,An.disabled,nt,ct,T.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(r,0,f,m);break;case"custom":(function(y,C,T){const M=y.context,z=T.implementation;if(y.renderPass==="offscreen"){const O=z.prerender;O&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),O.call(z,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Nn.disabled);const O=z.renderingMode==="3d"?new Ht(y.context.gl.LEQUAL,Ht.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,Ht.ReadOnly);M.setDepthMode(O),z.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(r,0,f)}}translatePosMatrix(r,c,f,m,y){if(!f[0]&&!f[1])return r;const C=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(C){const z=Math.sin(C),O=Math.cos(C);f=[f[0]*O-f[1]*z,f[0]*z+f[1]*O]}const T=[y?f[0]:Jt(c,f[0],this.transform.zoom),y?f[1]:Jt(c,f[1],this.transform.zoom),0],M=new Float32Array(16);return u.J(M,r,T),M}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!c||!f}useProgram(r,c){this.cache=this.cache||{};const f=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Ad(this.context,js[r],c,Rd[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ee(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class ll{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,f){const m=Math.pow(2,f),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(T=>{const M=1/(T=u.af([],T,r))[3]/c*m;return u.b1(T,T,[M,M,1/T[3],M])}),C=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(T=>{const M=function(Z,ee){var ne=ee[0],ae=ee[1],fe=ee[2],me=ne*ne+ae*ae+fe*fe;return me>0&&(me=1/Math.sqrt(me)),Z[0]=ee[0]*me,Z[1]=ee[1]*me,Z[2]=ee[2]*me,Z}([],function(Z,ee,ne){var ae=ee[0],fe=ee[1],me=ee[2],ye=ne[0],ie=ne[1],xe=ne[2];return Z[0]=fe*xe-me*ie,Z[1]=me*ye-ae*xe,Z[2]=ae*ie-fe*ye,Z}([],le([],y[T[0]],y[T[1]]),le([],y[T[2]],y[T[1]]))),z=-((O=M)[0]*(B=y[T[1]])[0]+O[1]*B[1]+O[2]*B[2]);var O,B;return M.concat(z)});return new ll(y,C)}}class ul{constructor(r,c){this.min=r,this.max=c,this.center=function(f,m,y){return f[0]=.5*m[0],f[1]=.5*m[1],f[2]=.5*m[2],f}([],function(f,m,y){return f[0]=m[0]+y[0],f[1]=m[1]+y[1],f[2]=m[2]+y[2],f}([],this.min,this.max))}quadrant(r){const c=[r%2==0,r<2],f=ce(this.min),m=ce(this.max);for(let y=0;y<c.length;y++)f[y]=c[y]?this.min[y]:this.center[y],m[y]=c[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new ul(f,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){const c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let m=0;m<r.planes.length;m++){const y=r.planes[m];let C=0;for(let T=0;T<c.length;T++)u.b2(y,c[T])>=0&&C++;if(C===0)return 0;C!==c.length&&(f=!1)}if(f)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,C=-Number.MAX_VALUE;for(let T=0;T<r.points.length;T++){const M=r.points[T][m]-this.min[m];y=Math.min(y,M),C=Math.max(C,M)}if(C<0||y>this.max[m]-this.min[m])return 0}return 1}}class cl{constructor(r=0,c=0,f=0,m=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=f,this.right=m}interpolate(r,c,f){return c.top!=null&&r.top!=null&&(this.top=u.y.number(r.top,c.top,f)),c.bottom!=null&&r.bottom!=null&&(this.bottom=u.y.number(r.bottom,c.bottom,f)),c.left!=null&&r.left!=null&&(this.left=u.y.number(r.left,c.left,f)),c.right!=null&&r.right!=null&&(this.right=u.y.number(r.right,c.right,f)),this}getCenter(r,c){const f=u.ac((this.left+r-this.right)/2,0,r),m=u.ac((this.top+c-this.bottom)/2,0,c);return new u.P(f,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new cl(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Zd=85.051129;class hl{constructor(r,c,f,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=f??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new u.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new cl,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const r=new hl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){const c=-u.b3(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new u.A(4);return u.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,m,y){var C=m[0],T=m[1],M=m[2],z=m[3],O=Math.sin(y),B=Math.cos(y);f[0]=C*B+M*O,f[1]=T*B+z*O,f[2]=C*-O+M*B,f[3]=T*-O+z*B}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){const c=u.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){const c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,f){this._unmodified=!1,this._edgeInsets.interpolate(r,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){const c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){const c=[new u.b4(0,r)];if(this._renderWorldCopies){const f=this.pointCoordinate(new u.P(0,0)),m=this.pointCoordinate(new u.P(this.width,0)),y=this.pointCoordinate(new u.P(this.width,this.height)),C=this.pointCoordinate(new u.P(0,this.height)),T=Math.floor(Math.min(f.x,m.x,y.x,C.x)),M=Math.floor(Math.max(f.x,m.x,y.x,C.x)),z=1;for(let O=T-z;O<=M+z;O++)O!==0&&c.push(new u.b4(O,r))}return c}coveringTiles(r){var c,f;let m=this.coveringZoomLevel(r);const y=m;if(r.minzoom!==void 0&&m<r.minzoom)return[];r.maxzoom!==void 0&&m>r.maxzoom&&(m=r.maxzoom);const C=this.pointCoordinate(this.getCameraPoint()),T=u.Z.fromLngLat(this.center),M=Math.pow(2,m),z=[M*C.x,M*C.y,0],O=[M*T.x,M*T.y,0],B=ll.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let Z=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Z=m);const ee=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,ne=ie=>({aabb:new ul([ie*M,0,0],[(ie+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ie,fullyVisible:!1}),ae=[],fe=[],me=m,ye=r.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let ie=1;ie<=3;ie++)ae.push(ne(-ie)),ae.push(ne(ie));for(ae.push(ne(0));ae.length>0;){const ie=ae.pop(),xe=ie.x,Ce=ie.y;let Pe=ie.fullyVisible;if(!Pe){const Qe=ie.aabb.intersects(B);if(Qe===0)continue;Pe=Qe===2}const Ne=r.terrain?z:O,He=ie.aabb.distanceX(Ne),nt=ie.aabb.distanceY(Ne),ct=Math.max(Math.abs(He),Math.abs(nt));if(ie.zoom===me||ct>ee+(1<<me-ie.zoom)-2&&ie.zoom>=Z){const Qe=me-ie.zoom,Je=z[0]-.5-(xe<<Qe),_t=z[1]-.5-(Ce<<Qe);fe.push({tileID:new u.S(ie.zoom===me?ye:ie.zoom,ie.wrap,ie.zoom,xe,Ce),distanceSq:ge([O[0]-.5-xe,O[1]-.5-Ce]),tileDistanceToCamera:Math.sqrt(Je*Je+_t*_t)})}else for(let Qe=0;Qe<4;Qe++){const Je=(xe<<1)+Qe%2,_t=(Ce<<1)+(Qe>>1),Ft=ie.zoom+1;let et=ie.aabb.quadrant(Qe);if(r.terrain){const at=new u.S(Ft,ie.wrap,Ft,Je,_t),Ot=r.terrain.getMinMaxElevation(at),Gn=(c=Ot.minElevation)!==null&&c!==void 0?c:this.elevation,qt=(f=Ot.maxElevation)!==null&&f!==void 0?f:this.elevation;et=new ul([et.min[0],et.min[1],Gn],[et.max[0],et.max[1],qt])}ae.push({aabb:et,zoom:Ft,x:Je,y:_t,wrap:ie.wrap,fullyVisible:Pe})}}return fe.sort((ie,xe)=>ie.distanceSq-xe.distanceSq).map(ie=>ie.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){const c=u.ac(r.lat,-85.051129,Zd);return new u.P(u.O(r.lng)*this.worldSize,u.Q(c)*this.worldSize)}unproject(r){return new u.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){const c=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,r),y=r.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const C=f+c-y,T=Math.cos(this._pitch)*this.cameraToCenterDistance/C/u.b5(1,m.lat),M=this.scaleZoom(T/this.tileSize);this._elevation=y,this._center=m,this.zoom=M}setLocationAtPoint(r,c){const f=this.pointCoordinate(c),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(r),C=new u.Z(y.x-(f.x-m.x),y.y-(f.y-m.y));this.center=this.coordinateLocation(C),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return u.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){const Z=c.pointCoordinate(r);if(Z!=null)return Z}const f=[r.x,r.y,0,1],m=[r.x,r.y,1,1];u.af(f,f,this.pixelMatrixInverse),u.af(m,m,this.pixelMatrixInverse);const y=f[3],C=m[3],T=f[1]/y,M=m[1]/C,z=f[2]/y,O=m[2]/C,B=z===O?0:(0-z)/(O-z);return new u.Z(u.y.number(f[0]/y,m[0]/C,B)/this.worldSize,u.y.number(T,M,B)/this.worldSize)}coordinatePoint(r,c=0,f=this.pixelMatrix){const m=[r.x*this.worldSize,r.y*this.worldSize,c,1];return u.af(m,m,f),new u.P(m[0]/m[3],m[1]/m[3])}getBounds(){const r=Math.max(0,this.height/2-this.getHorizon());return new we().extend(this.pointLocation(new u.P(0,r))).extend(this.pointLocation(new u.P(this.width,r))).extend(this.pointLocation(new u.P(this.width,this.height))).extend(this.pointLocation(new u.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new we([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Zd])}calculateTileMatrix(r){const c=r.canonical,f=this.worldSize/this.zoomScale(c.z),m=c.x+Math.pow(2,c.z)*r.wrap,y=u.an(new Float64Array(16));return u.J(y,y,[m*f,c.y*f,0]),u.K(y,y,[f/u.X,f/u.X,1]),y}calculatePosMatrix(r,c=!1){const f=r.key,m=c?this._alignedPosMatrixCache:this._posMatrixCache;if(m[f])return m[f];const y=this.calculateTileMatrix(r);return u.L(y,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[f]=new Float32Array(y),m[f]}calculateFogMatrix(r){const c=r.key,f=this._fogMatrixCache;if(f[c])return f[c];const m=this.calculateTileMatrix(r);return u.L(m,this.fogMatrix,m),f[c]=new Float32Array(m),f[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,c){c=u.ac(+c,this.minZoom,this.maxZoom);const f={center:new u.N(r.lng,r.lat),zoom:c};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const ie=179.9999999999;m=[-ie,ie]}const y=this.tileSize*this.zoomScale(f.zoom);let C=0,T=y,M=0,z=y,O=0,B=0;const{x:Z,y:ee}=this.size;if(this.latRange){const ie=this.latRange;C=u.Q(ie[1])*y,T=u.Q(ie[0])*y,T-C<ee&&(O=ee/(T-C))}m&&(M=u.b3(u.O(m[0])*y,0,y),z=u.b3(u.O(m[1])*y,0,y),z<M&&(z+=y),z-M<Z&&(B=Z/(z-M)));const{x:ne,y:ae}=this.project.call({worldSize:y},r);let fe,me;const ye=Math.max(B||0,O||0);if(ye){const ie=new u.P(B?(z+M)/2:ne,O?(T+C)/2:ae);return f.center=this.unproject.call({worldSize:y},ie).wrap(),f.zoom+=this.scaleZoom(ye),f}if(this.latRange){const ie=ee/2;ae-ie<C&&(me=C+ie),ae+ie>T&&(me=T-ie)}if(m){const ie=(M+z)/2;let xe=ne;this._renderWorldCopies&&(xe=u.b3(ne,ie-y/2,ie+y/2));const Ce=Z/2;xe-Ce<M&&(fe=M+Ce),xe+Ce>z&&(fe=z-Ce)}if(fe!==void 0||me!==void 0){const ie=new u.P(fe??ne,me??ae);f.center=this.unproject.call({worldSize:y},ie).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;const r=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=u.b5(1,this.center.lat)*this.worldSize;let m=u.an(new Float64Array(16));u.K(m,m,[this.width/2,-this.height/2,1]),u.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=u.an(new Float64Array(16)),u.K(m,m,[1,-1,1]),u.J(m,m,[-1,-1,0]),u.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),C=Math.min(this.elevation,this.minElevationForCurrentTile),T=y-C*this._pixelPerMeter/Math.cos(this._pitch),M=C<0?T:y,z=Math.PI/2+this._pitch,O=this._fov*(.5+r.y/this.height),B=Math.sin(O)*M/Math.sin(u.ac(Math.PI-z-O,.01,Math.PI-.01)),Z=this.getHorizon(),ee=2*Math.atan(Z/this.cameraToCenterDistance)*(.5+r.y/(2*Z)),ne=Math.sin(ee)*M/Math.sin(u.ac(Math.PI-z-ee,.01,Math.PI-.01)),ae=Math.min(B,ne);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ae+M),this.nearZ=this.height/50,m=new Float64Array(16),u.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-r.x/this.width,m[9]=2*r.y/this.height,this.projectionMatrix=u.ae(m),u.K(m,m,[1,-1,1]),u.J(m,m,[0,0,-this.cameraToCenterDistance]),u.b7(m,m,this._pitch),u.ad(m,m,this.angle),u.J(m,m,[-c,-f,0]),this.mercatorMatrix=u.K([],m,[this.worldSize,this.worldSize,this.worldSize]),u.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=u.L(new Float64Array(16),this.labelPlaneMatrix,m),u.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=u.as([],m),this.fogMatrix=new Float64Array(16),u.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,u.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),u.b7(this.fogMatrix,this.fogMatrix,this._pitch),u.ad(this.fogMatrix,this.fogMatrix,this.angle),u.J(this.fogMatrix,this.fogMatrix,[-c,-f,0]),u.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),u.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=u.L(new Float64Array(16),this.labelPlaneMatrix,m);const fe=this.width%2/2,me=this.height%2/2,ye=Math.cos(this.angle),ie=Math.sin(this.angle),xe=c-Math.round(c)+ye*fe+ie*me,Ce=f-Math.round(f)+ye*me+ie*fe,Pe=new Float64Array(m);if(u.J(Pe,Pe,[xe>.5?xe-1:xe,Ce>.5?Ce-1:Ce,0]),this.alignedModelViewProjectionMatrix=Pe,m=u.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const r=this.pointCoordinate(new u.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return u.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(0,r))}getCameraQueryGeometry(r){const c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let f=c.x,m=c.y,y=c.x,C=c.y;for(const T of r)f=Math.min(f,T.x),m=Math.min(m,T.y),y=Math.max(y,T.x),C=Math.max(C,T.y);return[new u.P(f,m),new u.P(y,m),new u.P(y,C),new u.P(f,C),new u.P(f,m)]}}lngLatToCameraDepth(r,c){const f=this.locationCoordinate(r),m=[f.x*this.worldSize,f.y*this.worldSize,c,1];return u.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function vu(v,r){let c,f=!1,m=null,y=null;const C=()=>{m=null,f&&(v.apply(y,c),m=setTimeout(C,r),f=!1)};return(...T)=>(f=!0,y=this,c=T,m||C(),m)}class Lc{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(f=m)}),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(f))){const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const f=c.join("/");let m=f;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${f}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let C=window.location.href.replace(/(#.+)?$/,y);C=C.replace("&&","&"),window.history.replaceState(window.history.state,null,C)},this._updateHash=vu(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,m=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),C=Math.round(c.lng*y)/y,T=Math.round(c.lat*y)/y,M=this._map.getBearing(),z=this._map.getPitch();let O="";if(O+=r?`/${C}/${T}/${f}`:`${f}/${T}/${C}`,(M||z)&&(O+="/"+Math.round(10*M)/10),z&&(O+=`/${Math.round(z)}`),this._hashName){const B=this._hashName;let Z=!1;const ee=window.location.hash.slice(1).split("&").map(ne=>{const ae=ne.split("=")[0];return ae===B?(Z=!0,`${ae}=${O}`):ne}).filter(ne=>ne);return Z||ee.push(`${B}=${O}`),`#${ee.join("&")}`}return`#${O}`}}const zc={linearity:.3,easing:u.b8(0,0,.3,1)},Kd=u.e({deceleration:2500,maxSpeed:1400},zc),s1=u.e({deceleration:20,maxSpeed:1400},zc),Km=u.e({deceleration:1e3,maxSpeed:360},zc),Rc=u.e({deceleration:1e3,maxSpeed:90},zc);class Xd{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:E.now(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=E.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)c.zoom+=y.zoomDelta||0,c.bearing+=y.bearingDelta||0,c.pitch+=y.pitchDelta||0,y.panDelta&&c.pan._add(y.panDelta),y.around&&(c.around=y.around),y.pinchAround&&(c.pinchAround=y.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(c.pan.mag()){const y=xu(c.pan.mag(),f,u.e({},Kd,r||{}));m.offset=c.pan.mult(y.amount/c.pan.mag()),m.center=this._map.transform.center,_u(m,y)}if(c.zoom){const y=xu(c.zoom,f,s1);m.zoom=this._map.transform.zoom+y.amount,_u(m,y)}if(c.bearing){const y=xu(c.bearing,f,Km);m.bearing=this._map.transform.bearing+u.ac(y.amount,-179,179),_u(m,y)}if(c.pitch){const y=xu(c.pitch,f,Rc);m.pitch=this._map.transform.pitch+y.amount,_u(m,y)}if(m.zoom||m.bearing){const y=c.pinchAround===void 0?c.around:c.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),u.e(m,{noMoveStart:!0})}}function _u(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function xu(v,r,c){const{maxSpeed:f,linearity:m,deceleration:y}=c,C=u.ac(v*m/(r/1e3),-f,f),T=Math.abs(C)/(y*m);return{easing:c.easing,duration:1e3*T,amount:C*(T/2)}}class ni extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f,m={}){const y=I.mousePos(c.getCanvas(),f),C=c.unproject(y);super(r,u.e({point:y,lngLat:C,originalEvent:f},m)),this._defaultPrevented=!1,this.target=c}}class Sa extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){const m=r==="touchend"?f.changedTouches:f.touches,y=I.touchPos(c.getCanvasContainer(),m),C=y.map(M=>c.unproject(M)),T=y.reduce((M,z,O,B)=>M.add(z.div(B.length)),new u.P(0,0));super(r,{points:y,point:T,lngLats:C,lngLat:c.unproject(T),originalEvent:f}),this._defaultPrevented=!1}}class Xm extends u.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Ym{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Xm(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new ni(r.type,this._map,r))}mouseup(r){this._map.fire(new ni(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new ni(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ni(r.type,this._map,r))}mouseover(r){this._map.fire(new ni(r.type,this._map,r))}mouseout(r){this._map.fire(new ni(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Sa(r.type,this._map,r))}touchmove(r){this._map.fire(new Sa(r.type,this._map,r))}touchend(r){this._map.fire(new Sa(r.type,this._map,r))}touchcancel(r){this._map.fire(new Sa(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ni(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ni("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ni(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Eo{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(u.P.convert(r),this._map.terrain)}}class Gi{constructor(r,c){this._map=r,this._tr=new Eo(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(I.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=f,this._box||(this._box=I.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const y=Math.min(m.x,f.x),C=Math.max(m.x,f.x),T=Math.min(m.y,f.y),M=Math.max(m.y,f.y);I.setTransform(this._box,`translate(${y}px,${T}px)`),this._box.style.width=C-y+"px",this._box.style.height=M-T+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const f=this._startPos,m=c;if(this.reset(),I.suppressClick(),f.x!==m.x||f.y!==m.y)return this._map.fire(new u.k("boxzoomend",{originalEvent:r})),{cameraAnimation:y=>y.fitScreenCoordinates(f,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(I.remove(this._box),this._box=null),I.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new u.k(r,{originalEvent:c}))}}function bu(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);const c={};for(let f=0;f<v.length;f++)c[v[f].identifier]=r[f];return c}class Yd{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(m){const y=new u.P(0,0);for(const C of m)y._add(C);return y.div(m.length)}(c),this.touches=bu(f,c)))}touchmove(r,c,f){if(this.aborted||!this.centroid)return;const m=bu(f,c);for(const y in this.touches){const C=m[y];(!C||C.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(r,c,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class Dc{constructor(r){this.singleTap=new Yd(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,f){this.singleTap.touchstart(r,c,f)}touchmove(r,c,f){this.singleTap.touchmove(r,c,f)}touchend(r,c,f){const m=this.singleTap.touchend(r,c,f);if(m){const y=r.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(m)<30;if(y&&C||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class dl{constructor(r){this._tr=new Eo(r),this._zoomIn=new Dc({numTouches:1,numTaps:2}),this._zoomOut=new Dc({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,f){this._zoomIn.touchstart(r,c,f),this._zoomOut.touchstart(r,c,f)}touchmove(r,c,f){this._zoomIn.touchmove(r,c,f),this._zoomOut.touchmove(r,c,f)}touchend(r,c,f){const m=this._zoomIn.touchend(r,c,f),y=this._zoomOut.touchend(r,c,f),C=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom+1,around:C.unproject(m)},{originalEvent:r})}):y?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:T=>T.easeTo({duration:300,zoom:C.zoom-1,around:C.unproject(y)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ss{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const m=c.length?c[0]:c;return!this._moved&&m.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(f,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&I.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Jd={0:1,2:2};class $c{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=I.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,f){const m=Jd[f];return c.buttons===void 0||(c.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return I.mouseButton(r)===this._eventButton}}class Qd{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}const Oc=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},ep=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{const f=new $c({checkCorrectEvent:m=>I.mouseButton(m)===0&&m.ctrlKey||I.mouseButton(m)===2});return new Ss({clickTolerance:r,move:(m,y)=>({bearingDelta:(y.x-m.x)*c}),moveStateManager:f,enable:v,assignEvents:Oc})},tp=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{const f=new $c({checkCorrectEvent:m=>I.mouseButton(m)===0&&m.ctrlKey||I.mouseButton(m)===2});return new Ss({clickTolerance:r,move:(m,y)=>({pitchDelta:(y.y-m.y)*c}),moveStateManager:f,enable:v,assignEvents:Oc})};class Ca{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,f){return this._calculateTransform(r,c,f)}touchmove(r,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,f){this._calculateTransform(r,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,f){f.length>0&&(this._active=!0);const m=bu(f,c),y=new u.P(0,0),C=new u.P(0,0);let T=0;for(const z in m){const O=m[z],B=this._touches[z];B&&(y._add(O),C._add(O.sub(B)),T++,m[z]=O)}if(this._touches=m,this._shouldBePrevented(T)||!C.mag())return;const M=C.div(T);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(T),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bc{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,f){if(!this._firstTwoTouches)return;r.preventDefault();const[m,y]=this._firstTwoTouches,C=wu(f,c,m),T=wu(f,c,y);if(!C||!T)return;const M=this._aroundCenter?null:C.add(T).div(2);return this._move([C,T],M,r)}touchend(r,c,f){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,C=wu(f,c,m),T=wu(f,c,y);C&&T||(this._active&&I.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function wu(v,r,c){for(let f=0;f<v.length;f++)if(v[f].identifier===c)return r[f]}function np(v,r){return Math.log(v/r)/Math.LN2}class rp extends Bc{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(np(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:np(this._distance,f),pinchAround:c}}}function ip(v,r){return 180*v.angleWith(r)/Math.PI}class op extends Bc{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,f){const m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ip(this._vector,m),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,f=ip(r,this._startVector);return Math.abs(f)<c}}function Fc(v){return Math.abs(v.y)>Math.abs(v.x)}class pl extends Bc{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,f){super.touchstart(r,c,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Fc(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=r[0].sub(this._lastPoints[0]),y=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,f){if(this._valid!==void 0)return this._valid;const m=r.mag()>=2,y=c.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const C=r.y>0==c.y>0;return Fc(r)&&Fc(c)&&C}}const Jm={panStep:100,bearingStep:15,pitchStep:10};class uo{constructor(r){this._tr=new Eo(r);const c=Jm;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,f=0,m=0,y=0,C=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),y=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),y=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),C=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(f=0,m=0),{cameraAnimation:T=>{const M=this._tr;T.easeTo({duration:300,easeId:"keyboardHandler",easing:Jo,zoom:c?Math.round(M.zoom)+c*(r.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-y*this._panStep,-C*this._panStep],center:M.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Jo(v){return v*(2-v)}const sp=4.000244140625;class Io{constructor(r,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Eo(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=E.now(),m=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%sp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=I.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=c.y>f.transform.height/2-f.transform.getHorizon()?u.N.convert(this._aroundCenter?f.center:f.unproject(c)):u.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>sp?this._wheelZoomRate:this._defaultZoomRate;let z=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&z!==0&&(z=1/z);const O=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(O*z))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,m=this._easing;let y,C=!1;const T=E.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&m&&T){const M=Math.min(T/200,1),z=m(M);y=u.y.number(f,c,z),M<1?this._frameId||(this._frameId=!0):C=!0}else y=c,C=!0;return this._active=!0,C&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!C,zoomDelta:y-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=u.b9;if(this._prevEase){const f=this._prevEase,m=(E.now()-f.start)/f.duration,y=f.easing(m+.01)-f.easing(m),C=.27/Math.sqrt(y*y+1e-4)*.01,T=Math.sqrt(.0729-C*C);c=u.b8(C,T,.25,1)}return this._prevEase={start:E.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ka{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class a1{constructor(r){this._tr=new Eo(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class l1{constructor(){this._tap=new Dc({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,f){if(!this._swipePoint)if(this._tapTime){const m=c[0],y=r.timeStamp-this._tapTime<500,C=this._tapPoint.dist(m)<30;y&&C?f.length>0&&(this._swipePoint=m,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,c,f)}touchmove(r,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const m=c[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(r,c,f)}touchend(r,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const m=this._tap.touchend(r,c,f);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qm{constructor(r,c,f){this._el=r,this._mousePan=c,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class eg{constructor(r,c,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class ap{constructor(r,c,f,m){this._el=r,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class fl{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=I.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=c,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=f,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(I.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new u.k("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const co=v=>v.zoom||v.drag||v.pitch||v.rotate;class mt extends u.k{}function Nc(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class lp{constructor(r,c){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const C=m.type==="renderFrame"?void 0:m,T={needsRenderFrame:!1},M={},z={},O=m.touches,B=O?this._getMapTouches(O):void 0,Z=B?I.touchPos(this._map.getCanvas(),B):I.mousePos(this._map.getCanvas(),m);for(const{handlerName:ae,handler:fe,allowed:me}of this._handlers){if(!fe.isEnabled())continue;let ye;this._blockedByActive(z,me,ae)?fe.reset():fe[y||m.type]&&(ye=fe[y||m.type](m,Z,B),this.mergeHandlerResult(T,M,ye,ae,C),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||fe.isActive())&&(z[ae]=fe)}const ee={};for(const ae in this._previousActiveHandlers)z[ae]||(ee[ae]=C);this._previousActiveHandlers=z,(Object.keys(ee).length||Nc(T))&&(this._changes.push([T,M,ee]),this._triggerRenderFrame()),(Object.keys(z).length||Nc(T))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=T;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Xd(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,C]of this._listeners)I.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[r,c,f]of this._listeners)I.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Ym(c,r));const m=c.boxZoom=new Gi(c,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();const y=c.cooperativeGestures=new fl(c,r.cooperativeGestures);this._add("cooperativeGestures",y),r.cooperativeGestures&&y.enable();const C=new dl(c),T=new a1(c);c.doubleClickZoom=new ka(T,C),this._add("tapZoom",C),this._add("clickZoom",T),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const M=new l1;this._add("tapDragZoom",M);const z=c.touchPitch=new pl(c);this._add("touchPitch",z),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const O=ep(r),B=tp(r);c.dragRotate=new eg(r,O,B),this._add("mouseRotate",O,["mousePitch"]),this._add("mousePitch",B,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const Z=(({enable:ye,clickTolerance:ie})=>{const xe=new $c({checkCorrectEvent:Ce=>I.mouseButton(Ce)===0&&!Ce.ctrlKey});return new Ss({clickTolerance:ie,move:(Ce,Pe)=>({around:Pe,panDelta:Pe.sub(Ce)}),activateOnStart:!0,moveStateManager:xe,enable:ye,assignEvents:Oc})})(r),ee=new Ca(r,c);c.dragPan=new Qm(f,Z,ee),this._add("mousePan",Z),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const ne=new op,ae=new rp;c.touchZoomRotate=new ap(f,ae,ne,M),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",ae,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);const fe=c.scrollZoom=new Io(c,()=>this._triggerRenderFrame());this._add("scrollZoom",fe,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const me=c.keyboard=new uo(c);this._add("keyboard",me),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new gr(c))}_add(r,c,f){this._handlers.push({handlerName:r,handler:c,allowed:f}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!co(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,f){for(const m in r)if(m!==f&&(!c||c.indexOf(m)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const f of r)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(r,c,f,m,y){if(!f)return;u.e(r,f);const C={handlerName:m,originalEvent:f.originalEvent||y};f.zoomDelta!==void 0&&(c.zoom=C),f.panDelta!==void 0&&(c.drag=C),f.pitchDelta!==void 0&&(c.pitch=C),f.bearingDelta!==void 0&&(c.rotate=C)}_applyChanges(){const r={},c={},f={};for(const[m,y,C]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new u.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),u.e(c,y),u.e(f,C);this._updateMapTransform(r,c,f),this._changes=[]}_updateMapTransform(r,c,f){const m=this._map,y=m._getTransformForUpdate(),C=m.terrain;if(!(Nc(r)||C&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:T,zoomDelta:M,bearingDelta:z,pitchDelta:O,around:B,pinchAround:Z}=r;Z!==void 0&&(B=Z),m._stop(!0),B=B||m.transform.centerPoint;const ee=y.pointLocation(T?B.sub(T):B);z&&(y.bearing+=z),O&&(y.pitch+=O),M&&(y.zoom+=M),C?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(T)):y.setLocationAtPoint(ee,B):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ee,B)):y.setLocationAtPoint(ee,B),m._applyUpdatedTransform(y),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,f,!0)}_fireEvents(r,c,f){const m=co(this._eventsInProgress),y=co(r),C={};for(const B in r){const{originalEvent:Z}=r[B];this._eventsInProgress[B]||(C[`${B}start`]=Z),this._eventsInProgress[B]=r[B]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const B in C)this._fireEvent(B,C[B]);y&&this._fireEvent("move",y.originalEvent);for(const B in r){const{originalEvent:Z}=r[B];this._fireEvent(B,Z)}const T={};let M;for(const B in this._eventsInProgress){const{handlerName:Z,originalEvent:ee}=this._eventsInProgress[B];this._handlersById[Z].isActive()||(delete this._eventsInProgress[B],M=c[Z]||ee,T[`${B}end`]=M)}for(const B in T)this._fireEvent(B,T[B]);const z=co(this._eventsInProgress),O=(m||y)&&!z;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const B=this._map._getTransformForUpdate();B.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(B)}if(f&&O){this._updatingCamera=!0;const B=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!B||!B.essential&&E.prefersReducedMotion?(this._map.fire(new u.k("moveend",{originalEvent:M})),Z(this._map.getBearing())&&this._map.resetNorth()):(Z(B.bearing||this._map.getBearing())&&(B.bearing=0),B.freezeElevation=!0,this._map.easeTo(B,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new u.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new mt("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class tg extends u.E{constructor(r,c){super(),this._renderFrameCallback=()=>{const f=Math.min((E.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new u.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,f){return r=u.P.convert(r).mult(-1),this.panTo(this.transform.center,u.e({offset:r},c),f)}panTo(r,c,f){return this.easeTo(u.e({center:r},c),f)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,f){return this.easeTo(u.e({zoom:r},c),f)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,f){return this.easeTo(u.e({bearing:r},c),f)}resetNorth(r,c){return this.rotateTo(0,u.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(u.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=we.convert(r).adjustAntiMeridian();const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,c)}_cameraForBoxAndBearing(r,c,f,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=u.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const Qe=m.padding;m.padding={top:Qe,bottom:Qe,right:Qe,left:Qe}}m.padding=u.e(y,m.padding);const C=this.transform,T=C.padding,M=new we(r,c),z=C.project(M.getNorthWest()),O=C.project(M.getNorthEast()),B=C.project(M.getSouthEast()),Z=C.project(M.getSouthWest()),ee=u.ba(-f),ne=z.rotate(ee),ae=O.rotate(ee),fe=B.rotate(ee),me=Z.rotate(ee),ye=new u.P(Math.max(ne.x,ae.x,me.x,fe.x),Math.max(ne.y,ae.y,me.y,fe.y)),ie=new u.P(Math.min(ne.x,ae.x,me.x,fe.x),Math.min(ne.y,ae.y,me.y,fe.y)),xe=ye.sub(ie),Ce=(C.width-(T.left+T.right+m.padding.left+m.padding.right))/xe.x,Pe=(C.height-(T.top+T.bottom+m.padding.top+m.padding.bottom))/xe.y;if(Pe<0||Ce<0)return void u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ne=Math.min(C.scaleZoom(C.scale*Math.min(Ce,Pe)),m.maxZoom),He=u.P.convert(m.offset),nt=new u.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(u.ba(f)),ct=He.add(nt).mult(C.scale/C.zoomScale(Ne));return{center:C.unproject(z.add(B).div(2).sub(ct)),zoom:Ne,bearing:f}}fitBounds(r,c,f){return this._fitInternal(this.cameraForBounds(r,c),c,f)}fitScreenCoordinates(r,c,f,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(u.P.convert(r)),this.transform.pointLocation(u.P.convert(c)),f,m),m,y)}_fitInternal(r,c,f){return r?(delete(c=u.e(r,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(r,c){this.stop();const f=this._getTransformForUpdate();let m=!1,y=!1,C=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(m=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=u.N.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(y=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(C=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new u.k("movestart",c)).fire(new u.k("move",c)),m&&this.fire(new u.k("zoomstart",c)).fire(new u.k("zoom",c)).fire(new u.k("zoomend",c)),y&&this.fire(new u.k("rotatestart",c)).fire(new u.k("rotate",c)).fire(new u.k("rotateend",c)),C&&this.fire(new u.k("pitchstart",c)).fire(new u.k("pitch",c)).fire(new u.k("pitchend",c)),this.fire(new u.k("moveend",c))}calculateCameraOptionsFromTo(r,c,f,m=0){const y=u.Z.fromLngLat(r,c),C=u.Z.fromLngLat(f,m),T=C.x-y.x,M=C.y-y.y,z=C.z-y.z,O=Math.hypot(T,M,z);if(O===0)throw new Error("Can't calculate camera options with same From and To");const B=Math.hypot(T,M),Z=this.transform.scaleZoom(this.transform.cameraToCenterDistance/O/this.transform.tileSize),ee=180*Math.atan2(T,-M)/Math.PI;let ne=180*Math.acos(B/O)/Math.PI;return ne=z<0?90-ne:90+ne,{center:C.toLngLat(),zoom:Z,pitch:ne,bearing:ee}}easeTo(r,c){var f;this._stop(!1,r.easeId),((r=u.e({offset:[0,0],duration:500,easing:u.b9},r)).animate===!1||!r.essential&&E.prefersReducedMotion)&&(r.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,C):C,O="pitch"in r?+r.pitch:T,B="padding"in r?r.padding:m.padding,Z=u.P.convert(r.offset);let ee=m.centerPoint.add(Z);const ne=m.pointLocation(ee),{center:ae,zoom:fe}=m.getConstrained(u.N.convert(r.center||ne),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ae,m);const me=m.project(ne),ye=m.project(ae).sub(me),ie=m.zoomScale(fe-y);let xe,Ce;r.around&&(xe=u.N.convert(r.around),Ce=m.locationPoint(xe));const Pe={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||fe!==y,this._rotating=this._rotating||C!==z,this._pitching=this._pitching||O!==T,this._padding=!m.isPaddingEqual(B),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,Pe),this.terrain&&this._prepareElevation(ae),this._ease(Ne=>{if(this._zooming&&(m.zoom=u.y.number(y,fe,Ne)),this._rotating&&(m.bearing=u.y.number(C,z,Ne)),this._pitching&&(m.pitch=u.y.number(T,O,Ne)),this._padding&&(m.interpolatePadding(M,B,Ne),ee=m.centerPoint.add(Z)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ne),xe)m.setLocationAtPoint(xe,Ce);else{const He=m.zoomScale(m.zoom-y),nt=fe>y?Math.min(2,ie):Math.max(.5,ie),ct=Math.pow(nt,1-Ne),Qe=m.unproject(me.add(ye.mult(Ne*ct)).mult(He));m.setLocationAtPoint(m.renderWorldCopies?Qe.wrap():Qe,ee)}this._applyUpdatedTransform(m),this._fireMoveEvents(c)},Ne=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Ne)},r),this}_prepareEase(r,c,f={}){this._moving=!0,c||f.moving||this.fire(new u.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new u.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new u.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new u.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(c-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=u.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){const c=r.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(c.lngLat,r.zoom);if(c.altitude<f){const m=this.calculateCameraOptionsFromTo(c.lngLat,f,r.center,r.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(this.terrain&&c.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&c.push(m=>this.transformCameraUpdate(m)),!c.length)return;const f=r.clone();for(const m of c){const y=f.clone(),{center:C,zoom:T,pitch:M,bearing:z,elevation:O}=m(y);C&&(y.center=C),T!==void 0&&(y.zoom=T),M!==void 0&&(y.pitch=M),z!==void 0&&(y.bearing=z),O!==void 0&&(y.elevation=O),f.apply(y)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new u.k("move",r)),this._zooming&&this.fire(new u.k("zoom",r)),this._rotating&&this.fire(new u.k("rotate",r)),this._pitching&&this.fire(new u.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new u.k("zoomend",r)),m&&this.fire(new u.k("rotateend",r)),y&&this.fire(new u.k("pitchend",r)),this.fire(new u.k("moveend",r))}flyTo(r,c){var f;if(!r.essential&&E.prefersReducedMotion){const at=u.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(at,c)}this.stop(),r=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.b9},r);const m=this._getTransformForUpdate(),y=m.zoom,C=m.bearing,T=m.pitch,M=m.padding,z="bearing"in r?this._normalizeBearing(r.bearing,C):C,O="pitch"in r?+r.pitch:T,B="padding"in r?r.padding:m.padding,Z=u.P.convert(r.offset);let ee=m.centerPoint.add(Z);const ne=m.pointLocation(ee),{center:ae,zoom:fe}=m.getConstrained(u.N.convert(r.center||ne),(f=r.zoom)!==null&&f!==void 0?f:y);this._normalizeCenter(ae,m);const me=m.zoomScale(fe-y),ye=m.project(ne),ie=m.project(ae).sub(ye);let xe=r.curve;const Ce=Math.max(m.width,m.height),Pe=Ce/me,Ne=ie.mag();if("minZoom"in r){const at=u.ac(Math.min(r.minZoom,y,fe),m.minZoom,m.maxZoom),Ot=Ce/m.zoomScale(at-y);xe=Math.sqrt(Ot/Ne*2)}const He=xe*xe;function nt(at){const Ot=(Pe*Pe-Ce*Ce+(at?-1:1)*He*He*Ne*Ne)/(2*(at?Pe:Ce)*He*Ne);return Math.log(Math.sqrt(Ot*Ot+1)-Ot)}function ct(at){return(Math.exp(at)-Math.exp(-at))/2}function Qe(at){return(Math.exp(at)+Math.exp(-at))/2}const Je=nt(!1);let _t=function(at){return Qe(Je)/Qe(Je+xe*at)},Ft=function(at){return Ce*((Qe(Je)*(ct(Ot=Je+xe*at)/Qe(Ot))-ct(Je))/He)/Ne;var Ot},et=(nt(!0)-Je)/xe;if(Math.abs(Ne)<1e-6||!isFinite(et)){if(Math.abs(Ce-Pe)<1e-6)return this.easeTo(r,c);const at=Pe<Ce?-1:1;et=Math.abs(Math.log(Pe/Ce))/xe,Ft=()=>0,_t=Ot=>Math.exp(at*xe*Ot)}return r.duration="duration"in r?+r.duration:1e3*et/("screenSpeed"in r?+r.screenSpeed/xe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=C!==z,this._pitching=O!==T,this._padding=!m.isPaddingEqual(B),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ae),this._ease(at=>{const Ot=at*et,Gn=1/_t(Ot);m.zoom=at===1?fe:y+m.scaleZoom(Gn),this._rotating&&(m.bearing=u.y.number(C,z,at)),this._pitching&&(m.pitch=u.y.number(T,O,at)),this._padding&&(m.interpolatePadding(M,B,at),ee=m.centerPoint.add(Z)),this.terrain&&!r.freezeElevation&&this._updateElevation(at);const qt=at===1?ae:m.unproject(ye.add(ie.mult(Ft(Ot))).mult(Gn));m.setLocationAtPoint(m.renderWorldCopies?qt.wrap():qt,ee),this._applyUpdatedTransform(m),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,c)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,c,f){f.animate===!1||f.duration===0?(r(1),c()):(this._easeStart=E.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=u.b3(r,-180,180);const f=Math.abs(r-c);return Math.abs(r-360-c)<f&&(r-=360),Math.abs(r+360-c)<f&&(r+=360),r}_normalizeCenter(r,c){if(!c.renderWorldCopies||c.lngRange)return;const f=r.lng-c.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(u.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}const ml={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class gl{constructor(r=ml){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=I.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=I.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=I.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){I.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const f=this._map._getUIString(`AttributionControl.${c}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const c=this._map.style.sourceCaches;for(const m in c){const y=c[m];if(y.used||y.usedForTerrain){const C=y.getSource();C.attribution&&r.indexOf(C.attribution)<0&&r.push(C.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,y)=>m.length-y.length),r=r.filter((m,y)=>{for(let C=y+1;C<r.length;C++)if(r[C].indexOf(m)>=0)return!1;return!0});const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class up{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=I.create("div","maplibregl-ctrl");const c=I.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){I.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class nn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const m of f)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cp=u.Y([{name:"a_pos3d",type:"Int16",components:3}]);class u1 extends u.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];const f={};for(const m of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),u.aP(m.posMatrix,0,u.X,0,u.X,0,1),this._tiles[m.key]=new Ir(m,this.tileSize));for(const m in this._tiles)f[m]||delete this._tiles[m]}freeRtt(r){for(const c in this._tiles){const f=this._tiles[c];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){const c={};for(const f of this._renderableTilesKeys){const m=this._tiles[f].tileID;if(m.canonical.equals(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16),u.aP(y.posMatrix,0,u.X,0,u.X,0,1),c[f]=y}else if(m.canonical.isChildOf(r.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const C=m.canonical.z-r.canonical.z,T=m.canonical.x-(m.canonical.x>>C<<C),M=m.canonical.y-(m.canonical.y>>C<<C),z=u.X>>C;u.aP(y.posMatrix,0,z,0,z,0,1),u.J(y.posMatrix,y.posMatrix,[-T*z,-M*z,0]),c[f]=y}else if(r.canonical.isChildOf(m.canonical)){const y=r.clone();y.posMatrix=new Float64Array(16);const C=r.canonical.z-m.canonical.z,T=r.canonical.x-(r.canonical.x>>C<<C),M=r.canonical.y-(r.canonical.y>>C<<C),z=u.X>>C;u.aP(y.posMatrix,0,u.X,0,u.X,0,1),u.J(y.posMatrix,y.posMatrix,[T*z,M*z,0]),u.K(y.posMatrix,y.posMatrix,[1/2**C,1/2**C,0]),c[f]=y}}return c}getSourceTile(r,c){const f=this.sourceCache._source;let m=r.overscaledZ-this.deltaZoom;if(m>f.maxzoom&&(m=f.maxzoom),m<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!y||!y.dem)&&c)for(;m>=f.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(r.scaledTo(m--).key);return y}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class hp{constructor(r,c,f){this.painter=r,this.sourceCache=new u1(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,f,m=u.X){var y;if(!(c>=0&&c<m&&f>=0&&f<m))return 0;const C=this.getTerrainData(r),T=(y=C.tile)===null||y===void 0?void 0:y.dem;if(!T)return 0;const M=function(ne,ae,fe){var me=ae[0],ye=ae[1];return ne[0]=fe[0]*me+fe[4]*ye+fe[12],ne[1]=fe[1]*me+fe[5]*ye+fe[13],ne}([],[c/m*u.X,f/m*u.X],C.u_terrain_matrix),z=[M[0]*T.dim,M[1]*T.dim],O=Math.floor(z[0]),B=Math.floor(z[1]),Z=z[0]-O,ee=z[1]-B;return T.get(O,B)*(1-Z)*(1-ee)+T.get(O+1,B)*Z*(1-ee)+T.get(O,B+1)*(1-Z)*ee+T.get(O+1,B+1)*Z*ee}getElevationForLngLatZoom(r,c){if(!u.bb(c,r.wrap()))return 0;const{tileID:f,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(f,m%u.X,y%u.X,u.X)}getElevation(r,c,f,m=u.X){return this.getDEMElevation(r,c,f,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const m=this.painter.context,y=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ee(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ee(m,new u.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.an([])}const c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const m=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Ee(m,c.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),c.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?y=r.canonical.z-m:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const C=r.canonical.x-(r.canonical.x>>y<<y),T=r.canonical.y-(r.canonical.y>>y<<y),M=u.bc(new Float64Array(16),[1/(u.X<<y),1/(u.X<<y),0]);u.J(M,M,[C*u.X,T*u.X,0]),this._demMatrixCache[r.key]={matrix:M,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,f=c.width/devicePixelRatio,m=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ee(c.context,{width:f,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ee(c.context,{width:f,height:m,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,m,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,C=0;y<this._coordsTextureSize;y++)for(let T=0;T<this._coordsTextureSize;T++,C+=4)c[C+0]=255&T,c[C+1]=255&y,c[C+2]=T>>8<<4|y>>8,c[C+3]=0;const f=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),m=new Ee(r,f,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),f=this.painter.context,m=f.gl,y=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),C=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),T=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,T-C-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const M=c[0]+(c[2]>>4<<8),z=c[1]+((15&c[2])<<8),O=this.coordsIndex[255-c[3]],B=O&&this.sourceCache.getTileByID(O);if(!B)return null;const Z=this._coordsTextureSize,ee=(1<<B.tileID.canonical.z)*Z;return new u.Z((B.tileID.canonical.x*Z+M)/ee+B.tileID.wrap,(B.tileID.canonical.y*Z+z)/ee,this.getElevation(B.tileID,M,z,Z))}depthAtPoint(r){const c=new Uint8Array(4),f=this.painter.context,m=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const r=this.painter.context,c=new u.bd,f=new u.aY,m=this.meshSize,y=u.X/m,C=m*m;for(let B=0;B<=m;B++)for(let Z=0;Z<=m;Z++)c.emplaceBack(Z*y,B*y,0);for(let B=0;B<C;B+=m+1)for(let Z=0;Z<m;Z++)f.emplaceBack(Z+B,m+Z+B+1,m+Z+B+2),f.emplaceBack(Z+B,m+Z+B+2,Z+B+1);const T=c.length,M=T+2*(m+1);for(const B of[0,1])for(let Z=0;Z<=m;Z++)for(const ee of[0,1])c.emplaceBack(Z*y,B*u.X,ee);for(let B=0;B<2*m;B+=2)f.emplaceBack(M+B,M+B+1,M+B+3),f.emplaceBack(M+B,M+B+3,M+B+2),f.emplaceBack(T+B,T+B+3,T+B+1),f.emplaceBack(T+B,T+B+2,T+B+3);const z=c.length,O=z+2*(m+1);for(const B of[0,1])for(let Z=0;Z<=m;Z++)for(const ee of[0,1])c.emplaceBack(B*u.X,Z*y,ee);for(let B=0;B<2*m;B+=2)f.emplaceBack(z+B,z+B+1,z+B+3),f.emplaceBack(z+B,z+B+3,z+B+2),f.emplaceBack(O+B,O+B+3,O+B+1),f.emplaceBack(O+B,O+B+2,O+B+3);return this._mesh=new Mc(r.createVertexBuffer(c,cp.members),r.createIndexBuffer(f),u.a0.simpleSegment(0,0,c.length,f.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*u.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var f;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(f=this.getMinMaxElevation(m).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,c){const f=u.Z.fromLngLat(r.wrap()),m=(1<<c)*u.X,y=f.x*m,C=f.y*m,T=Math.floor(y/u.X),M=Math.floor(C/u.X);return{tileID:new u.S(c,0,c,T,M),mercatorX:y,mercatorY:C}}}class c1{constructor(r,c,f){this._context=r,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ee(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:r,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}const yl={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class ng{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new c1(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(c)),this._coordsDescendingInv={};for(const f in r.sourceCaches){this._coordsDescendingInv[f]={};const m=r.sourceCaches[f].getVisibleCoordinates();for(const y of m){const C=this.terrain.sourceCache.getTerrainCoords(y);for(const T in C)this._coordsDescendingInv[f][T]||(this._coordsDescendingInv[f][T]=[]),this._coordsDescendingInv[f][T].push(C[T])}}this._coordsDescendingInvStr={};for(const f of r._order){const m=r._layers[f],y=m.source;if(yl[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const C in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][C]=this._coordsDescendingInv[y][C].map(T=>T.key).sort().join()}}for(const f of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][f.tileID.key];y&&y!==f.rttCoords[m]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;const c=r.type,f=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(yl[c]&&(this._prevType&&yl[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!m))return!0;if(yl[this._prevType]||yl[c]&&m){this._prevType=c;const y=this._stacks.length-1,C=this._stacks[y]||[];for(const T of this._renderableTiles){if(this.pool.isFull()&&(Zm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(T),T.rtt[y]){const z=this.pool.getObjectForId(T.rtt[y].id);if(z.stamp===T.rtt[y].stamp){this.pool.useObject(z);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),T.rtt[y]={id:M.id,stamp:M.stamp},f.context.bindFramebuffer.set(M.fbo.framebuffer),f.context.clear({color:u.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let z=0;z<C.length;z++){const O=f.style._layers[C[z]],B=O.source?this._coordsDescendingInv[O.source][T.tileID.key]:[T.tileID];f.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),f._renderTileClippingMasks(O,B),f.renderLayer(f,f.style.sourceCaches[O.source],O,B),O.source&&(T.rttCoords[O.source]=this._coordsDescendingInvStr[O.source][T.tileID.key])}}return Zm(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),yl[c]}return!1}}const dp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},rg=b,h1={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ml,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},pp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},d1={showCompass:!0,showZoom:!0,visualizePitch:!1};class p1{constructor(r,c,f=!1){this.mousedown=C=>{this.startMouse(u.e({},C,{ctrlKey:!0,preventDefault:()=>C.preventDefault()}),I.mousePos(this.element,C)),I.addEventListener(window,"mousemove",this.mousemove),I.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=C=>{this.moveMouse(C,I.mousePos(this.element,C))},this.mouseup=C=>{this.mouseRotate.dragEnd(C),this.mousePitch&&this.mousePitch.dragEnd(C),this.offTemp()},this.touchstart=C=>{C.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=I.touchPos(this.element,C.targetTouches)[0],this.startTouch(C,this._startPos),I.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.addEventListener(window,"touchend",this.touchend))},this.touchmove=C=>{C.targetTouches.length!==1?this.reset():(this._lastPos=I.touchPos(this.element,C.targetTouches)[0],this.moveTouch(C,this._lastPos))},this.touchend=C=>{C.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=r.dragRotate._mouseRotate.getClickTolerance(),y=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=ep({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:C,clickTolerance:T,bearingDegreesPerPixelMoved:M=.8})=>{const z=new Qd;return new Ss({clickTolerance:T,move:(O,B)=>({bearingDelta:(B.x-O.x)*M}),moveStateManager:z,enable:C,assignEvents:pp})})({clickTolerance:m,enable:!0}),this.map=r,f&&(this.mousePitch=tp({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:C,clickTolerance:T,pitchDegreesPerPixelMoved:M=-.5})=>{const z=new Qd;return new Ss({clickTolerance:T,move:(O,B)=>({pitchDelta:(B.y-O.y)*M}),moveStateManager:z,enable:C,assignEvents:pp})})({clickTolerance:y,enable:!0})),I.addEventListener(c,"mousedown",this.mousedown),I.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),I.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),I.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),I.disableDrag()}moveMouse(r,c){const f=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(r,c)||{};if(m&&f.setBearing(f.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(r,c)||{};y&&f.setPitch(f.getPitch()+y)}}moveTouch(r,c){const f=this.map,{bearingDelta:m}=this.touchRotate.dragMove(r,c)||{};if(m&&f.setBearing(f.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(r,c)||{};y&&f.setPitch(f.getPitch()+y)}}off(){const r=this.element;I.removeEventListener(r,"mousedown",this.mousedown),I.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend),I.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){I.enableDrag(),I.removeEventListener(window,"mousemove",this.mousemove),I.removeEventListener(window,"mouseup",this.mouseup),I.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),I.removeEventListener(window,"touchend",this.touchend)}}let Hi;function qn(v,r,c){const f=new u.N(v.lng,v.lat);if(v=new u.N(v.lng,v.lat),r){const m=new u.N(v.lng-360,v.lat),y=new u.N(v.lng+360,v.lat),C=c.locationPoint(v).distSqr(r);c.locationPoint(m).distSqr(r)<C?v=m:c.locationPoint(y).distSqr(r)<C&&(v=y)}for(;Math.abs(v.lng-c.center.lng)>180;){const m=c.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=c.width&&m.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&c.locationPoint(v).y>c.height/2-c.getHorizon()?v:f}const vl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function jc(v,r,c){const f=v.classList;for(const m in vl)f.remove(`maplibregl-${c}-anchor-${m}`);f.add(`maplibregl-${c}-anchor-${r}`)}class Uc extends u.E{constructor(r){if(super(),this._onKeyPress=c=>{const f=c.code,m=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=c=>{const f=c.originalEvent.target,m=this._element;this._popup&&(f===m||m.contains(f))&&this.togglePopup()},this._update=c=>{var f;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?qn(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let C="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?C="rotateX(0deg)":this._pitchAlignment==="map"&&(C=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),I.setTransform(this._element,`${vl[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${C} ${y}`),E.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.k("dragstart"))),this.fire(new u.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=u.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=I.create("div");const c=I.createNS("http://www.w3.org/2000/svg","svg"),f=41,m=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${m}px`),c.setAttributeNS(null,"viewBox",`0 0 ${m} ${f}`);const y=I.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const C=I.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const T=I.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"transform","translate(3.0, 29.0)"),T.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of M){const ye=I.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",me.rx),ye.setAttributeNS(null,"ry",me.ry),T.appendChild(ye)}const z=I.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const O=I.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(O);const B=I.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"opacity","0.25"),B.setAttributeNS(null,"fill","#000000");const Z=I.createNS("http://www.w3.org/2000/svg","path");Z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),B.appendChild(Z);const ee=I.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ne=I.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ae=I.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#000000"),ae.setAttributeNS(null,"opacity","0.25"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962");const fe=I.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ae),ne.appendChild(fe),C.appendChild(T),C.appendChild(z),C.appendChild(B),C.appendChild(ee),C.appendChild(ne),c.appendChild(C),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(c),this._offset=u.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),jc(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),I.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=u.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,f;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),C=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,C)-y<.006)return void(this._element.style.opacity=this._opacity);const T=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*T,z=m.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),O=m.transform.lngLatToCameraDepth(this._lngLat,C+M)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&O&&this._popup.remove(),this._element.style.opacity=O?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=u.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return r===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const ig={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Su=0,Cu=!1;const Qo={maxWidth:100,unit:"metric"};function ku(v,r,c){const f=c&&c.maxWidth||100,m=v._container.clientHeight/2,y=v.unproject([0,m]),C=v.unproject([f,m]),T=y.distanceTo(C);if(c&&c.unit==="imperial"){const M=3.2808*T;M>5280?vt(r,f,M/5280,v._getUIString("ScaleControl.Miles")):vt(r,f,M,v._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?vt(r,f,T/1852,v._getUIString("ScaleControl.NauticalMiles")):T>=1e3?vt(r,f,T/1e3,v._getUIString("ScaleControl.Kilometers")):vt(r,f,T,v._getUIString("ScaleControl.Meters"))}function vt(v,r,c,f){const m=function(y){const C=Math.pow(10,`${Math.floor(y)}`.length-1);let T=y/C;return T=T>=10?10:T>=5?5:T>=3?3:T>=2?2:T>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(T),C*T}(c);v.style.width=r*(m/c)+"px",v.innerHTML=`${m}&nbsp;${f}`}const Mt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Vc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Wc(v){if(v){if(typeof v=="number"){const r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,v),"top-left":new u.P(r,r),"top-right":new u.P(-r,r),bottom:new u.P(0,-v),"bottom-left":new u.P(r,-r),"bottom-right":new u.P(-r,-r),left:new u.P(v,0),right:new u.P(-v,0)}}if(v instanceof u.P||Array.isArray(v)){const r=u.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:u.P.convert(v.center||[0,0]),top:u.P.convert(v.top||[0,0]),"top-left":u.P.convert(v["top-left"]||[0,0]),"top-right":u.P.convert(v["top-right"]||[0,0]),bottom:u.P.convert(v.bottom||[0,0]),"bottom-left":u.P.convert(v["bottom-left"]||[0,0]),"bottom-right":u.P.convert(v["bottom-right"]||[0,0]),left:u.P.convert(v.left||[0,0]),right:u.P.convert(v.right||[0,0])}}return Wc(new u.P(0,0))}const fp=b;d.AJAXError=u.bh,d.Evented=u.E,d.LngLat=u.N,d.MercatorCoordinate=u.Z,d.Point=u.P,d.addProtocol=u.bi,d.config=u.a,d.removeProtocol=u.bj,d.AttributionControl=gl,d.BoxZoomHandler=Gi,d.CanvasSource=pr,d.CooperativeGesturesHandler=fl,d.DoubleClickZoomHandler=ka,d.DragPanHandler=Qm,d.DragRotateHandler=eg,d.EdgeInsets=cl,d.FullscreenControl=class extends u.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){I.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=I.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);I.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=an,d.GeolocateControl=class extends u.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new u.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new u.N(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,m=this._map.getBearing(),y=u.e({bearing:m},this.options.fitBoundsOptions),C=we.fromLngLat(c,f);this._map.fitBounds(C,y,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new u.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Cu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=I.create("button","maplibregl-ctrl-geolocate",this._container),I.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=I.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Uc({element:this._dotElement}),this._circleElement=I.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Uc({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.k("trackuserlocationend")),this.fire(new u.k("userlocationlostfocus")))})}},this.options=u.e({},ig,v)}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(r=!1){if(Hi!==void 0&&!r)return Hi;if(window.navigator.permissions===void 0)return Hi=!!window.navigator.geolocation,Hi;try{Hi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hi=!!window.navigator.geolocation}return Hi})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),I.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Su=0,Cu=!1}_isOutOfMapMaxBounds(v){const r=this._map.getMaxBounds(),c=v.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),r=v.getSouthEast(),c=v.getNorthEast(),f=r.distanceTo(c),m=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Su--,Cu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.k("trackuserlocationstart")),this.fire(new u.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Su++,Su>1?(v={maximumAge:6e5,timeout:0},Cu=!0):(v=this.options.positionOptions,Cu=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.Hash=Lc,d.ImageSource=bt,d.KeyboardHandler=uo,d.LngLatBounds=we,d.LogoControl=up,d.Map=class extends tg{constructor(v){u.bf.mark(u.bg.create);const r=Object.assign(Object.assign({},h1),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new hl(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new nn,this._controls=[],this._mapId=u.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},dp),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=V.addThrottleControl(()=>this.isMoving()),this._requestManager=new Y(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let c=!1;const f=vu(m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())},50);this._resizeObserver=new ResizeObserver(m=>{c?f(m):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new lp(this,r),this._hash=r.hash&&new Lc(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,u.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new gl(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new up,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new u.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new u.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new u.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new u.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=v.onAdd(this);this._controls.push(v);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new u.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,c,f)}resize(v){var r;const c=this._containerDimensions(),f=c[0],m=c[1],y=this._getClampedPixelRatio(f,m);if(this._resizeCanvas(f,m,y),this.painter.resize(f,m,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const M=this._getClampedPixelRatio(f,m);this._resizeCanvas(f,m,M),this.painter.resize(f,m,M)}this.transform.resize(f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,m);const C=!this._moving;return C&&(this.stop(),this.fire(new u.k("movestart",v)).fire(new u.k("move",v))),this.fire(new u.k("resize",v)),C&&this.fire(new u.k("moveend",v)),this}_getClampedPixelRatio(v,r){const{0:c,1:f}=this._maxCanvasSize,m=this.getPixelRatio(),y=v*m,C=r*m;return Math.min(y>c?c/y:1,C>f?f/C:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(we.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(u.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(u.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,c){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:y=>{const C=r.filter(M=>this.getLayer(M)),T=C.length!==0?this.queryRenderedFeatures(y.point,{layers:C}):[];T.length?f||(f=!0,c.call(this,new ni(v,this,y.originalEvent,{features:T}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:C=>{const T=r.filter(M=>this.getLayer(M));(T.length!==0?this.queryRenderedFeatures(C.point,{layers:T}):[]).length?f=!0:f&&(f=!1,c.call(this,new ni(v,this,C.originalEvent)))},mouseout:C=>{f&&(f=!1,c.call(this,new ni(v,this,C.originalEvent)))}}}}{const f=m=>{const y=r.filter(T=>this.getLayer(T)),C=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];C.length&&(m.features=C,c.call(this,m),delete m.features)};return{layers:r,listener:c,delegates:{[v]:f}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,c){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const f=this._delegatedListeners[v];for(let m=0;m<f.length;m++){const y=f[m];if(y.listener===c&&y.layers.length===r.length&&y.layers.every(C=>r.includes(C))){for(const C in y.delegates)this.off(C,y.delegates[C]);return void f.splice(m,1)}}}on(v,r,c){if(c===void 0)return super.on(v,r);const f=this._createDelegatedListener(v,typeof r=="string"?[r]:r,c);this._saveDelegatedListener(v,f);for(const m in f.delegates)this.on(m,f.delegates[m]);return this}once(v,r,c){if(c===void 0)return super.once(v,r);const f=typeof r=="string"?[r]:r,m=this._createDelegatedListener(v,f,c);for(const y in m.delegates){const C=m.delegates[y];m.delegates[y]=(...T)=>{this._removeDelegatedListener(v,f,c),C(...T)}}this._saveDelegatedListener(v,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(v,r,c){return c===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let c;const f=v instanceof u.P||Array.isArray(v),m=f?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:v)||{},m instanceof u.P||typeof m[0]=="number")c=[u.P.convert(m)];else{const y=u.P.convert(m[0]),C=u.P.convert(m[1]);c=[y,new u.P(C.x,y.y),C,new u.P(y.x,C.y),y]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));const c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new mc(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,c):this.style.loadJSON(v,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new mc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){const c=this._requestManager.transformRequest(v,"Style");u.h(c,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new u.j(f))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(c){u.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){const r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new u.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===v.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new hp(this.painter,r,v),this.painter.renderToTexture=new ng(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new u.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const r in v){const c=v[r]._tiles;for(const f in c){const m=c[f];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,c={}){const{pixelRatio:f=1,sdf:m=!1,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||u.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:B,data:Z}=r,ee=r;return this.style.addImage(v,{data:new u.R({width:O,height:B},new Uint8Array(Z)),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,v),this}}{const{width:O,height:B,data:Z}=E.getImageData(r);this.style.addImage(v,{data:new u.R({width:O,height:B},Z),pixelRatio:f,stretchX:y,stretchY:C,content:T,textFitWidth:M,textFitHeight:z,sdf:m,version:0})}}updateImage(v,r){const c=this.style.getImage(v);if(!c)return this.fire(new u.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||u.b(r)?E.getImageData(r):r,{width:m,height:y,data:C}=f;if(m===void 0||y===void 0)return this.fire(new u.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==c.data.width||y!==c.data.height)return this.fire(new u.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const T=!(r instanceof HTMLImageElement||u.b(r));return c.data.replace(C,T),this.style.updateImage(v,c),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new u.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return V.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,c){return this.style.setLayerZoomRange(v,r,c),this._update(!0)}setFilter(v,r,c={}){return this.style.setFilter(v,r,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,c,f={}){return this.style.setPaintProperty(v,r,c,f),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,c,f={}){return this.style.setLayoutProperty(v,r,c,f),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,c,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,c=>{c||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const r=this._canvasContainer=I.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=I.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);const m=this._controlContainer=I.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(C=>{y[C]=I.create("div",`maplibregl-ctrl-${C} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,c){this._canvas.width=Math.floor(c*v),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:v},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});const c=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!c){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Ac(c,this.transform),R.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=E.now();this.style.zoomHistory.update(m,y);const C=new u.z(m,{now:y,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),T=C.crossFadingFactor();T===1&&T===this._crossFadingFactor||(c=!0,this._crossFadingFactor=T),this.style.update(C)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new u.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.bf.mark(u.bg.load),this.fire(new u.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,u.bf.mark(u.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),V.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),I.remove(this._canvasContainer),I.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),u.bf.clearMetrics(),this._removed=!0,this.fire(new u.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,E.frameAsync(this._frameRequest).then(v=>{u.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return rg}getCameraTargetElevation(){return this.transform.elevation}},d.MapMouseEvent=ni,d.MapTouchEvent=Sa,d.MapWheelEvent=Xm,d.Marker=Uc,d.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{const r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{const f=this._map._getUIString(`NavigationControl.${c}`);r.title=f,r.setAttribute("aria-label",f)},this.options=u.e({},d1,v),this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),I.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=I.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new p1(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){I.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){const c=I.create("button",v,this._container);return c.type="button",c.addEventListener("click",r),c}},d.Popup=class extends u.E{constructor(v){super(),this.remove=()=>(this._content&&I.remove(this._content),this._container&&(I.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=I.create("div","maplibregl-popup",this._map.getContainer()),this._tip=I.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?qn(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!r)return;const f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=Wc(this.options.offset);if(!m){const T=this._container.offsetWidth,M=this._container.offsetHeight;let z;z=f.y+y.bottom.y<M?["top"]:f.y>this._map.transform.height-M?["bottom"]:[],f.x<T/2?z.push("left"):f.x>this._map.transform.width-T/2&&z.push("right"),m=z.length===0?"bottom":z.join("-")}let C=f.add(y[m]);this.options.subpixelPositioning||(C=C.round()),I.setTransform(this._container,`${vl[m]} translate(${C.x}px,${C.y}px)`),jc(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(Mt),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=u.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const r=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=v;f=c.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=I.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=I.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Vc);v&&v.focus()}},d.RasterDEMTileSource=Vt,d.RasterTileSource=ht,d.ScaleControl=class{constructor(v){this._onMove=()=>{ku(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,ku(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Qo),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){I.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Io,d.Style=mc,d.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=I.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=I.create("button","maplibregl-ctrl-terrain",this._container),I.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){I.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=pl,d.TwoFingersTouchRotateHandler=op,d.TwoFingersTouchZoomHandler=rp,d.TwoFingersTouchZoomRotateHandler=ap,d.VectorTileSource=pn,d.VideoSource=Mn,d.addSourceType=(v,r)=>u._(void 0,void 0,void 0,function*(){if(fr(v))throw new Error(`A source type called "${v}" already exists.`);((c,f)=>{Zr[c]=f})(v,r)}),d.clearPrewarmedResources=function(){const v=en;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(Lt),en=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return on().getRTLTextPluginStatus()},d.getVersion=function(){return fp},d.getWorkerCount=function(){return Zt.workerCount},d.getWorkerUrl=function(){return u.a.WORKER_URL},d.importScriptInWorkers=function(v){return tn().broadcast("IS",v)},d.prewarm=function(){Sn().acquire(Lt)},d.setMaxParallelImageRequests=function(v){u.a.MAX_PARALLEL_IMAGE_REQUESTS=v},d.setRTLTextPlugin=function(v,r){return on().setRTLTextPlugin(v,r)},d.setWorkerCount=function(v){Zt.workerCount=v},d.setWorkerUrl=function(v){u.a.WORKER_URL=v}});var h=n;return h})})(yP);var _P=yP.exports;const Et=cm(_P),q6=ZE({__proto__:null,default:Et},[_P]);function G6(){return typeof self<"u"?fetch.bind(self):typeof global<"u"&&global.fetch?global.fetch:null}class H6{constructor(){this._apiKey="",this._fetch=G6(),this.tileCacheSize=200}set apiKey(t){this._apiKey=t}get apiKey(){return this._apiKey}set fetch(t){this._fetch=t}get fetch(){return this._fetch}}const qh=new H6,gm={AUTO:{code:null,flag:"auto",name:"Auto",latin:!1,isMode:!0,geocoding:!0},LATIN:{code:"latin",flag:"name:latin",name:"Latin",latin:!0,isMode:!1,geocoding:!1},NON_LATIN:{code:"nonlatin",flag:"name:nonlatin",name:"Non Latin",latin:!1,isMode:!1,geocoding:!1},LOCAL:{code:null,flag:"name",name:"Local",latin:!0,isMode:!1,geocoding:!1},AMHARIC:{code:"am",flag:"name:am",name:"Amharic",latin:!1,isMode:!1,geocoding:!1},ARABIC:{code:"ar",flag:"name:ar",name:"Arabic",latin:!1,isMode:!1,geocoding:!0},AZERBAIJANI:{code:"az",flag:"name:az",name:"Azerbaijani",latin:!0,isMode:!1,geocoding:!0},BELARUSIAN:{code:"be",flag:"name:be",name:"Belarusian",latin:!1,isMode:!1,geocoding:!0},BULGARIAN:{code:"bg",flag:"bg",name:"Bulgarian",latin:!1,isMode:!1,geocoding:!0},BENGALI:{code:"bn",flag:"name:bn",name:"Bengali",latin:!0,isMode:!1,geocoding:!1},BRETON:{code:"br",flag:"name:br",name:"Breton",latin:!0,isMode:!1,geocoding:!0},BOSNIAN:{code:"bs",flag:"name:bs",name:"Bosnian",latin:!0,isMode:!1,geocoding:!0},CATALAN:{code:"ca",flag:"name:ca",name:"Catalan",latin:!0,isMode:!1,geocoding:!0},CHINESE:{code:"zh",flag:"name:zh",name:"Chinese",latin:!1,isMode:!1,geocoding:!0},TRADITIONAL_CHINESE:{code:"zh-Hant",flag:"name:zh-Hant",name:"Chinese (traditional)",latin:!1,isMode:!1,geocoding:!1},SIMPLIFIED_CHINESE:{code:"zh-Hans",flag:"name:zh-Hans",name:"Chinese (simplified)",latin:!1,isMode:!1,geocoding:!1},CORSICAN:{code:"co",flag:"name:co",name:"Corsican",latin:!0,isMode:!1,geocoding:!1},CZECH:{code:"cs",flag:"name:cs",name:"Czech",latin:!0,isMode:!1,geocoding:!1},WELSH:{code:"cy",flag:"name:cy",name:"WELSH",latin:!0,isMode:!1,geocoding:!0},DANISH:{code:"da",flag:"name:da",name:"Danish",latin:!0,isMode:!1,geocoding:!0},GERMAN:{code:"de",flag:"name:de",name:"German",latin:!0,isMode:!1,geocoding:!0},GREEK:{code:"el",flag:"name:el",name:"Greek",latin:!1,isMode:!1,geocoding:!0},ENGLISH:{code:"en",flag:"name:en",name:"English",latin:!0,isMode:!1,geocoding:!0},ESPERANTO:{code:"eo",flag:"name:eo",name:"Esperanto",latin:!0,isMode:!1,geocoding:!0},SPANISH:{code:"es",flag:"name:es",name:"Spanish",latin:!0,isMode:!1,geocoding:!0},ESTONIAN:{code:"et",flag:"name:et",name:"Estonian",latin:!0,isMode:!1,geocoding:!0},BASQUE:{code:"eu",flag:"name:eu",name:"Basque",latin:!0,isMode:!1,geocoding:!1},FINNISH:{code:"fi",flag:"name:fi",name:"Finnish",latin:!0,isMode:!1,geocoding:!0},FRENCH:{code:"fr",flag:"name:fr",name:"French",latin:!0,isMode:!1,geocoding:!0},FRISIAN:{code:"fy",flag:"name:fy",name:"Frisian (West)",latin:!0,isMode:!1,geocoding:!0},IRISH:{code:"ga",flag:"name:ga",name:"Irish",latin:!0,isMode:!1,geocoding:!0},SCOTTISH_GAELIC:{code:"gd",flag:"name:gd",name:"Scottish Gaelic",latin:!0,isMode:!1,geocoding:!0},HEBREW:{code:"he",flag:"name:he",name:"Hebrew",latin:!1,isMode:!1,geocoding:!0},HINDI:{code:"hi",flag:"name:hi",name:"Hindi",latin:!1,isMode:!1,geocoding:!1},CROATIAN:{code:"hr",flag:"name:hr",name:"Croatian",latin:!0,isMode:!1,geocoding:!0},HUNGARIAN:{code:"hu",flag:"name:hu",name:"Hungarian",latin:!0,isMode:!1,geocoding:!0},ARMENIAN:{code:"hy",flag:"name:hy",name:"Armenian",latin:!1,isMode:!1,geocoding:!0},INDONESIAN:{code:"id",flag:"name:id",name:"Indonesian",latin:!0,isMode:!1,geocoding:!1},ICELANDIC:{code:"is",flag:"name:is",name:"Icelandic",latin:!0,isMode:!1,geocoding:!0},ITALIAN:{code:"it",flag:"name:it",name:"Italian",latin:!0,isMode:!1,geocoding:!0},JAPANESE:{code:"ja",flag:"name:ja",name:"Japanese",latin:!1,isMode:!1,geocoding:!0},JAPANESE_HIRAGANA:{code:"ja-Hira",flag:"name:ja-Hira",name:"Japanese Hiragana form",latin:!1,isMode:!1,geocoding:!1},JAPANESE_2018:{code:"ja-Latn",flag:"name:ja-Latn",name:"Japanese (Latin 2018)",latin:!0,isMode:!1,geocoding:!1},JAPANESE_KANA:{code:"ja_kana",flag:"name:ja_kana",name:"Japanese (Kana)",latin:!1,isMode:!1,geocoding:!1},JAPANESE_LATIN:{code:"ja_rm",flag:"name:ja_rm",name:"Japanese (Latin script)",latin:!0,isMode:!1,geocoding:!1},GEORGIAN:{code:"ka",flag:"name:ka",name:"Georgian",latin:!1,isMode:!1,geocoding:!0},KAZAKH:{code:"kk",flag:"name:kk",name:"Kazakh",latin:!1,isMode:!1,geocoding:!0},KANNADA:{code:"kn",flag:"name:kn",name:"Kannada",latin:!0,isMode:!1,geocoding:!0},KOREAN:{code:"ko",flag:"name:ko",name:"Korean",latin:!1,isMode:!1,geocoding:!0},KOREAN_LATIN:{code:"ko-Latn",flag:"name:ko-Latn",name:"Korean (Latin script)",latin:!0,isMode:!1,geocoding:!1},KURDISH:{code:"ku",flag:"name:ku",name:"Kurdish",latin:!0,isMode:!1,geocoding:!1},CLASSICAL_LATIN:{code:"la",flag:"name:la",name:"Latin",latin:!0,isMode:!1,geocoding:!0},LUXEMBOURGISH:{code:"lb",flag:"name:lb",name:"Luxembourgish",latin:!0,isMode:!1,geocoding:!0},LITHUANIAN:{code:"lt",flag:"name:lt",name:"Lithuanian",latin:!0,isMode:!1,geocoding:!0},LATVIAN:{code:"lv",flag:"name:lv",name:"Latvian",latin:!0,isMode:!1,geocoding:!0},MACEDONIAN:{code:"mk",flag:"name:mk",name:"Macedonian",latin:!1,isMode:!1,geocoding:!0},MALAYALAM:{code:"ml",flag:"name:ml",name:"Malayalam",latin:!1,isMode:!1,geocoding:!1},MALTESE:{code:"mt",flag:"name:mt",name:"Maltese",latin:!0,isMode:!1,geocoding:!0},DUTCH:{code:"nl",flag:"name:nl",name:"Dutch",latin:!0,isMode:!1,geocoding:!0},NORWEGIAN:{code:"no",flag:"name:no",name:"Norwegian",latin:!0,isMode:!1,geocoding:!0},OCCITAN:{code:"oc",flag:"name:oc",name:"Occitan",latin:!0,isMode:!1,geocoding:!1},POLISH:{code:"pl",flag:"name:pl",name:"Polish",latin:!0,isMode:!1,geocoding:!0},PERSIAN:{code:"fa",flag:"name:fa",name:"Persian",latin:!1,isMode:!1,geocoding:!1},PUNJABI:{code:"pa",flag:"name:pa",name:"Punjabi",latin:!1,isMode:!1,geocoding:!1},WESTERN_PUNJABI:{code:"pnb",flag:"name:pnb",name:"Western Punjabi",latin:!1,isMode:!1,geocoding:!1},PORTUGUESE:{code:"pt",flag:"name:pt",name:"Portuguese",latin:!0,isMode:!1,geocoding:!0},ROMANSH:{code:"rm",flag:"name:rm",name:"Romansh",latin:!0,isMode:!1,geocoding:!0},ROMANIAN:{code:"ro",flag:"name:ro",name:"Romanian",latin:!0,isMode:!1,geocoding:!0},RUSSIAN:{code:"ru",flag:"name:ru",name:"Russian",latin:!1,isMode:!1,geocoding:!0},SLOVAK:{code:"sk",flag:"name:sk",name:"Slovak",latin:!0,isMode:!1,geocoding:!0},SLOVENE:{code:"sl",flag:"name:sl",name:"Slovene",latin:!0,isMode:!1,geocoding:!0},ALBANIAN:{code:"sq",flag:"name:sq",name:"Albanian",latin:!0,isMode:!1,geocoding:!0},SERBIAN_CYRILLIC:{code:"sr",flag:"name:sr",name:"Serbian (Cyrillic script)",latin:!1,isMode:!1,geocoding:!0},SERBIAN_LATIN:{code:"sr-Latn",flag:"name:sr-Latn",name:"Serbian (Latin script)",latin:!0,isMode:!1,geocoding:!1},SWEDISH:{code:"sv",flag:"name:sv",name:"Swedish",latin:!0,isMode:!1,geocoding:!0},TAMIL:{code:"ta",flag:"name:ta",name:"Tamil",latin:!1,isMode:!1,geocoding:!1},TELUGU:{code:"te",flag:"name:te",name:"Telugu",latin:!1,isMode:!1,geocoding:!1},THAI:{code:"th",flag:"name:th",name:"Thai",latin:!1,isMode:!1,geocoding:!0},TURKISH:{code:"tr",flag:"name:tr",name:"Turkish",latin:!0,isMode:!1,geocoding:!0},UKRAINIAN:{code:"uk",flag:"name:uk",name:"Ukrainian",latin:!1,isMode:!1,geocoding:!0},VIETNAMESE:{code:"vi",flag:"name:vi",name:"Vietnamese (Latin script)",latin:!0,isMode:!1,geocoding:!1}};function Z6(e,t=gm){return e in t?e[e]:null}function Kx(e,t=gm){for(const n of Object.values(t))if(n.code===e)return n;return null}function Xx(e,t=gm){for(const n of Object.values(t))if(n.flag===e)return n;return null}function K6(e){return e!==null&&typeof e=="object"&&"code"in e&&"flag"in e&&"name"in e&&"latin"in e&&"isMode"in e&&"geocoding"in e&&(typeof e.code=="string"||e.code===null)&&typeof e.flag=="string"&&typeof e.name=="string"&&typeof e.latin=="boolean"&&typeof e.isMode=="boolean"&&typeof e.geocoding=="boolean"}function Pk(e,t=gm){return K6(e)?Xx(e.flag,t):typeof e!="string"?null:Z6(e,t)||Kx(e,t)||Xx(e,t)||null}async function X6(e,t={}){if(qh.fetch===null)throw new Error("The fetch function was not found. If on NodeJS < 18 please specify the fetch function with config.fetch");if(new URL(e).searchParams.get("key").trim()==="")throw new Error("The MapTiler Cloud API key is missing. Set it in `config.apiKey` or get one for free at https://maptiler.com");return qh.fetch(e,t)}const xP={maptilerApiURL:"https://api.maptiler.com/",mapStyle:"streets-v2"};Object.freeze(xP);class Y6 extends Error{constructor(t,n=""){super(`Call to enpoint ${t.url} failed with the status code ${t.status}. ${n}`),this.res=t}}const Mk={403:"Key is missing, invalid or restricted"};async function J6(e={}){const t=new URL("geolocation/ip.json",xP.maptilerApiURL);t.searchParams.set("key",e.apiKey??qh.apiKey);const n=t.toString(),o=await X6(n);if(!o.ok)throw new Y6(o,o.status in Mk?Mk[o.status]:"");return await o.json()}const Ak={info:J6};function bP(e){const t=/^maptiler:\/\/(.*)/;let n;const o=e.trim();let a;return o.startsWith("http://")||o.startsWith("https://")?a=o:(n=t.exec(o))!==null?a=`https://api.maptiler.com/maps/${n[1]}/style.json`:a=`https://api.maptiler.com/maps/${o}/style.json`,a}class wP{constructor(t,n,o,a,h,d){this.name=t,this.variantType=n,this.id=o,this.referenceStyle=a,this.description=h,this.imageURL=d}getName(){return this.name}getFullName(){return`${this.referenceStyle.getName()} ${this.name}`}getType(){return this.variantType}getId(){return this.id}getDescription(){return this.description}getReferenceStyle(){return this.referenceStyle}hasVariant(t){return this.referenceStyle.hasVariant(t)}getVariant(t){return this.referenceStyle.getVariant(t)}getVariants(){return this.referenceStyle.getVariants().filter(t=>t!==this)}getImageURL(){return this.imageURL}getExpandedStyleURL(){return bP(this.getId())}}class SP{constructor(t,n){this.name=t,this.id=n,this.variants={},this.orderedVariants=[]}getName(){return this.name}getId(){return this.id}addVariant(t){this.variants[t.getType()]=t,this.orderedVariants.push(t)}hasVariant(t){return t in this.variants}getVariant(t){return t in this.variants?this.variants[t]:this.orderedVariants[0]}getVariants(){return Object.values(this.variants)}getDefaultVariant(){return this.orderedVariants[0]}}const xf=[{referenceStyleID:"STREETS",name:"Streets",description:"",variants:[{id:"streets-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"streets-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"streets-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"streets-v2-night",name:"Night",variantType:"NIGHT",description:"",imageURL:""},{id:"streets-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OUTDOOR",name:"Outdoor",description:"",variants:[{id:"outdoor-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"outdoor-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"WINTER",name:"Winter",description:"",variants:[{id:"winter-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"winter-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""}]},{referenceStyleID:"SATELLITE",name:"Satellite",description:"",variants:[{id:"satellite",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"HYBRID",name:"Hybrid",description:"",variants:[{id:"hybrid",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"BASIC",name:"Basic",description:"",variants:[{id:"basic-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"basic-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"basic-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BRIGHT",name:"Bright",description:"",variants:[{id:"bright-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"bright-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"bright-v2-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""},{id:"bright-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""}]},{referenceStyleID:"OPENSTREETMAP",name:"OpenStreetMap",description:"",variants:[{id:"openstreetmap",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]},{referenceStyleID:"TOPO",name:"Topo",description:"",variants:[{id:"topo-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"topo-v2-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"topo-v2-shiny",name:"Shiny",variantType:"SHINY",description:"",imageURL:""},{id:"topo-v2-pastel",name:"Pastel",variantType:"PASTEL",description:"",imageURL:""},{id:"topo-v2-topographique",name:"Topographique",variantType:"TOPOGRAPHIQUE",description:"",imageURL:""}]},{referenceStyleID:"VOYAGER",name:"Voyager",description:"",variants:[{id:"voyager-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"voyager-v2-darkmatter",name:"Darkmatter",variantType:"DARK",description:"",imageURL:""},{id:"voyager-v2-positron",name:"Positron",variantType:"LIGHT",description:"",imageURL:""},{id:"voyager-v2-vintage",name:"Vintage",variantType:"VINTAGE",description:"",imageURL:""}]},{referenceStyleID:"TONER",name:"Toner",description:"",variants:[{id:"toner-v2",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"toner-v2-background",name:"Background",variantType:"BACKGROUND",description:"",imageURL:""},{id:"toner-v2-lite",name:"Lite",variantType:"LITE",description:"",imageURL:""},{id:"toner-v2-lines",name:"Lines",variantType:"LINES",description:"",imageURL:""}]},{referenceStyleID:"DATAVIZ",name:"Dataviz",description:"",variants:[{id:"dataviz",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"dataviz-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"dataviz-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"BACKDROP",name:"Backdrop",description:"",variants:[{id:"backdrop",name:"Default",variantType:"DEFAULT",description:"",imageURL:""},{id:"backdrop-dark",name:"Dark",variantType:"DARK",description:"",imageURL:""},{id:"backdrop-light",name:"Light",variantType:"LIGHT",description:"",imageURL:""}]},{referenceStyleID:"OCEAN",name:"Ocean",description:"",variants:[{id:"ocean",name:"Default",variantType:"DEFAULT",description:"",imageURL:""}]}];function Q6(e){return new Proxy(e,{get(t,n,o){return t.hasVariant(n)?t.getVariant(n):n.toString().toUpperCase()===n?e.getDefaultVariant():Reflect.get(t,n,o)}})}function eD(){const e={};for(let t=0;t<xf.length;t+=1){const n=xf[t],o=Q6(new SP(n.name,n.referenceStyleID));for(let a=0;a<n.variants.length;a+=1){const h=n.variants[a],d=new wP(h.name,h.variantType,h.id,o,h.description,h.imageURL);o.addVariant(d)}e[n.referenceStyleID]=o}return e}const Gh=eD();var Aw={exports:{}},Hh=typeof Reflect=="object"?Reflect:null,Lk=Hh&&typeof Hh.apply=="function"?Hh.apply:function(t,n,o){return Function.prototype.apply.call(t,n,o)},yy;Hh&&typeof Hh.ownKeys=="function"?yy=Hh.ownKeys:Object.getOwnPropertySymbols?yy=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yy=function(t){return Object.getOwnPropertyNames(t)};function tD(e){console&&console.warn&&console.warn(e)}var CP=Number.isNaN||function(t){return t!==t};function Yn(){Yn.init.call(this)}Aw.exports=Yn;Aw.exports.once=oD;Yn.EventEmitter=Yn;Yn.prototype._events=void 0;Yn.prototype._eventsCount=0;Yn.prototype._maxListeners=void 0;var zk=10;function G0(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(Yn,"defaultMaxListeners",{enumerable:!0,get:function(){return zk},set:function(e){if(typeof e!="number"||e<0||CP(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");zk=e}});Yn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Yn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||CP(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function kP(e){return e._maxListeners===void 0?Yn.defaultMaxListeners:e._maxListeners}Yn.prototype.getMaxListeners=function(){return kP(this)};Yn.prototype.emit=function(t){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var a=t==="error",h=this._events;if(h!==void 0)a=a&&h.error===void 0;else if(!a)return!1;if(a){var d;if(n.length>0&&(d=n[0]),d instanceof Error)throw d;var u=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw u.context=d,u}var b=h[t];if(b===void 0)return!1;if(typeof b=="function")Lk(b,this,n);else for(var w=b.length,P=MP(b,w),o=0;o<w;++o)Lk(P[o],this,n);return!0};function TP(e,t,n,o){var a,h,d;if(G0(n),h=e._events,h===void 0?(h=e._events=Object.create(null),e._eventsCount=0):(h.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),h=e._events),d=h[t]),d===void 0)d=h[t]=n,++e._eventsCount;else if(typeof d=="function"?d=h[t]=o?[n,d]:[d,n]:o?d.unshift(n):d.push(n),a=kP(e),a>0&&d.length>a&&!d.warned){d.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=d.length,tD(u)}return e}Yn.prototype.addListener=function(t,n){return TP(this,t,n,!1)};Yn.prototype.on=Yn.prototype.addListener;Yn.prototype.prependListener=function(t,n){return TP(this,t,n,!0)};function nD(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function EP(e,t,n){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=nD.bind(o);return a.listener=n,o.wrapFn=a,a}Yn.prototype.once=function(t,n){return G0(n),this.on(t,EP(this,t,n)),this};Yn.prototype.prependOnceListener=function(t,n){return G0(n),this.prependListener(t,EP(this,t,n)),this};Yn.prototype.removeListener=function(t,n){var o,a,h,d,u;if(G0(n),a=this._events,a===void 0)return this;if(o=a[t],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,o.listener||n));else if(typeof o!="function"){for(h=-1,d=o.length-1;d>=0;d--)if(o[d]===n||o[d].listener===n){u=o[d].listener,h=d;break}if(h<0)return this;h===0?o.shift():rD(o,h),o.length===1&&(a[t]=o[0]),a.removeListener!==void 0&&this.emit("removeListener",t,u||n)}return this};Yn.prototype.off=Yn.prototype.removeListener;Yn.prototype.removeAllListeners=function(t){var n,o,a;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[t]),this;if(arguments.length===0){var h=Object.keys(o),d;for(a=0;a<h.length;++a)d=h[a],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(a=n.length-1;a>=0;a--)this.removeListener(t,n[a]);return this};function IP(e,t,n){var o=e._events;if(o===void 0)return[];var a=o[t];return a===void 0?[]:typeof a=="function"?n?[a.listener||a]:[a]:n?iD(a):MP(a,a.length)}Yn.prototype.listeners=function(t){return IP(this,t,!0)};Yn.prototype.rawListeners=function(t){return IP(this,t,!1)};Yn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):PP.call(e,t)};Yn.prototype.listenerCount=PP;function PP(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Yn.prototype.eventNames=function(){return this._eventsCount>0?yy(this._events):[]};function MP(e,t){for(var n=new Array(t),o=0;o<t;++o)n[o]=e[o];return n}function rD(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function iD(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function oD(e,t){return new Promise(function(n,o){function a(d){e.removeListener(t,h),o(d)}function h(){typeof e.removeListener=="function"&&e.removeListener("error",a),n([].slice.call(arguments))}AP(e,t,h,{once:!0}),t!=="error"&&sD(e,a,{once:!0})})}function sD(e,t,n){typeof e.on=="function"&&AP(e,"error",t,n)}function AP(e,t,n,o){if(typeof e.on=="function")o.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(h){o.once&&e.removeEventListener(t,a),n(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var aD=Aw.exports;const lD=cm(aD);let Gg;const uD=new Uint8Array(16);function cD(){if(!Gg&&(Gg=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gg))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gg(uD)}const xi=[];for(let e=0;e<256;++e)xi.push((e+256).toString(16).slice(1));function hD(e,t=0){return xi[e[t+0]]+xi[e[t+1]]+xi[e[t+2]]+xi[e[t+3]]+"-"+xi[e[t+4]]+xi[e[t+5]]+"-"+xi[e[t+6]]+xi[e[t+7]]+"-"+xi[e[t+8]]+xi[e[t+9]]+"-"+xi[e[t+10]]+xi[e[t+11]]+xi[e[t+12]]+xi[e[t+13]]+xi[e[t+14]]+xi[e[t+15]]}const dD=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rk={randomUUID:dD};function pD(e,t,n){if(Rk.randomUUID&&!t&&!e)return Rk.randomUUID();e=e||{};const o=e.random||(e.rng||cD)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,hD(o)}const LP="3.7.7",fD=LP,vd=typeof Buffer=="function",Dk=typeof TextDecoder=="function"?new TextDecoder:void 0,$k=typeof TextEncoder=="function"?new TextEncoder:void 0,mD="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",af=Array.prototype.slice.call(mD),Hg=(e=>{let t={};return e.forEach((n,o)=>t[n]=o),t})(af),gD=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,wi=String.fromCharCode.bind(String),Ok=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),zP=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),RP=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),DP=e=>{let t,n,o,a,h="";const d=e.length%3;for(let u=0;u<e.length;){if((n=e.charCodeAt(u++))>255||(o=e.charCodeAt(u++))>255||(a=e.charCodeAt(u++))>255)throw new TypeError("invalid character found");t=n<<16|o<<8|a,h+=af[t>>18&63]+af[t>>12&63]+af[t>>6&63]+af[t&63]}return d?h.slice(0,d-3)+"===".substring(d):h},Lw=typeof btoa=="function"?e=>btoa(e):vd?e=>Buffer.from(e,"binary").toString("base64"):DP,Yx=vd?e=>Buffer.from(e).toString("base64"):e=>{let n=[];for(let o=0,a=e.length;o<a;o+=4096)n.push(wi.apply(null,e.subarray(o,o+4096)));return Lw(n.join(""))},vy=(e,t=!1)=>t?zP(Yx(e)):Yx(e),yD=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?wi(192|t>>>6)+wi(128|t&63):wi(224|t>>>12&15)+wi(128|t>>>6&63)+wi(128|t&63)}else{var t=65536+(e.charCodeAt(0)-55296)*1024+(e.charCodeAt(1)-56320);return wi(240|t>>>18&7)+wi(128|t>>>12&63)+wi(128|t>>>6&63)+wi(128|t&63)}},vD=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,$P=e=>e.replace(vD,yD),Bk=vd?e=>Buffer.from(e,"utf8").toString("base64"):$k?e=>Yx($k.encode(e)):e=>Lw($P(e)),Zh=(e,t=!1)=>t?zP(Bk(e)):Bk(e),Fk=e=>Zh(e,!0),_D=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,xD=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return wi((n>>>10)+55296)+wi((n&1023)+56320);case 3:return wi((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return wi((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},OP=e=>e.replace(_D,xD),BP=e=>{if(e=e.replace(/\s+/g,""),!gD.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,n="",o,a;for(let h=0;h<e.length;)t=Hg[e.charAt(h++)]<<18|Hg[e.charAt(h++)]<<12|(o=Hg[e.charAt(h++)])<<6|(a=Hg[e.charAt(h++)]),n+=o===64?wi(t>>16&255):a===64?wi(t>>16&255,t>>8&255):wi(t>>16&255,t>>8&255,t&255);return n},zw=typeof atob=="function"?e=>atob(RP(e)):vd?e=>Buffer.from(e,"base64").toString("binary"):BP,FP=vd?e=>Ok(Buffer.from(e,"base64")):e=>Ok(zw(e).split("").map(t=>t.charCodeAt(0))),NP=e=>FP(jP(e)),bD=vd?e=>Buffer.from(e,"base64").toString("utf8"):Dk?e=>Dk.decode(FP(e)):e=>OP(zw(e)),jP=e=>RP(e.replace(/[-_]/g,t=>t=="-"?"+":"/")),Jx=e=>bD(jP(e)),wD=e=>{if(typeof e!="string")return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},UP=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),VP=function(){const e=(t,n)=>Object.defineProperty(String.prototype,t,UP(n));e("fromBase64",function(){return Jx(this)}),e("toBase64",function(t){return Zh(this,t)}),e("toBase64URI",function(){return Zh(this,!0)}),e("toBase64URL",function(){return Zh(this,!0)}),e("toUint8Array",function(){return NP(this)})},WP=function(){const e=(t,n)=>Object.defineProperty(Uint8Array.prototype,t,UP(n));e("toBase64",function(t){return vy(this,t)}),e("toBase64URI",function(){return vy(this,!0)}),e("toBase64URL",function(){return vy(this,!0)})},SD=()=>{VP(),WP()},CD={version:LP,VERSION:fD,atob:zw,atobPolyfill:BP,btoa:Lw,btoaPolyfill:DP,fromBase64:Jx,toBase64:Zh,encode:Zh,encodeURI:Fk,encodeURL:Fk,utob:$P,btou:OP,decode:Jx,isValid:wD,fromUint8Array:vy,toUint8Array:NP,extendString:VP,extendUint8Array:WP,extendBuiltins:SD};var kD=Object.defineProperty,qP=e=>{throw TypeError(e)},TD=(e,t,n)=>t in e?kD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,$n=(e,t,n)=>TD(e,typeof t!="symbol"?t+"":t,n),Rw=(e,t,n)=>t.has(e)||qP("Cannot "+n),vn=(e,t,n)=>(Rw(e,t,"read from private field"),n?n.call(e):t.get(e)),Ru=(e,t,n)=>t.has(e)?qP("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),vh=(e,t,n,o)=>(Rw(e,t,"write to private field"),t.set(e,n),n),$o=(e,t,n)=>(Rw(e,t,"access private method"),n);const bn={VISITOR:{code:null,flag:"visitor",name:"Visitor",latin:!0,isMode:!0,geocoding:!1},VISITOR_ENGLISH:{code:null,flag:"visitor_en",name:"Visitor English",latin:!0,isMode:!0,geocoding:!1},STYLE:{code:null,flag:"style",name:"Style",latin:!1,isMode:!0,geocoding:!1},STYLE_LOCK:{code:null,flag:"style_lock",name:"Style Lock",latin:!1,isMode:!0,geocoding:!1},...gm};function Nk(){if(typeof navigator>"u"){const e=Intl.DateTimeFormat().resolvedOptions().locale.split("-")[0];return Kx(e)||bn.ENGLISH}return Array.from(new Set(navigator.languages.map(e=>e.split("-")[0]))).map(e=>Kx(e)).filter(e=>e)[0]??bn.LOCAL}const go={maptilerLogoURL:"https://api.maptiler.com/resources/logo.svg",maptilerURL:"https://www.maptiler.com/",maptilerApiHost:"api.maptiler.com",rtlPluginURL:"https://cdn.maptiler.com/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.min.js",primaryLanguage:bn.STYLE,secondaryLanguage:bn.LOCAL,terrainSourceURL:"https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json",terrainSourceId:"maptiler-terrain"};Object.freeze(go);const GP=pD();class ED extends lD{constructor(){super(...arguments),$n(this,"primaryLanguage",go.primaryLanguage),$n(this,"secondaryLanguage"),$n(this,"session",!0),$n(this,"caching",!0),$n(this,"_unit","metric"),$n(this,"_apiKey","")}set unit(t){this._unit=t,this.emit("unit",t)}get unit(){return this._unit}set apiKey(t){this._apiKey=t,qh.apiKey=t,this.emit("apiKey",t)}get apiKey(){return this._apiKey}set fetch(t){qh.fetch=t}get fetch(){return qh.fetch}}const Qi=new ED,{addProtocol:jk}=Et,Qx="localcache_source",eb="localcache",ID="maptiler_sdk",PD=1e3,MD=100,tb=typeof caches<"u";function AD(e,t){if(tb&&Qi.caching&&Qi.session&&e.host===go.maptilerApiHost){if(t==="Source"&&e.href.includes("tiles.json"))return e.href.replace("https://",`${Qx}://`);if(t==="Tile"||t==="Glyphs")return e.href.replace("https://",`${eb}://`)}return e.href}let M_;async function HP(){return M_||(M_=await caches.open(ID)),M_}let Uk=0;async function LD(){const e=await HP(),t=await e.keys(),n=t.slice(0,Math.max(t.length-PD,0));for(const o of n)e.delete(o)}function zD(){jk(Qx,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${Qx}://`,"https://");const n=e;n.signal=t.signal;const o=await fetch(e.url,n),a=await o.json();return a.tiles&&a.tiles.length>0&&(a.tiles[0]+=`&last-modified=${o.headers.get("Last-Modified")}`),{data:a,cacheControl:o.headers.get("Cache-Control"),expires:o.headers.get("Expires")}}),jk(eb,async(e,t)=>{if(!e.url)throw new Error("");e.url=e.url.replace(`${eb}://`,"https://");const n=new URL(e.url),o=new URL(n);o.searchParams.delete("mtsid"),o.searchParams.delete("key");const a=o.toString(),h=new URL(n);h.searchParams.delete("last-modified");const d=h.toString(),u=async I=>({data:await I.arrayBuffer(),cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}),b=await HP(),w=await b.match(a);if(w)return u(w);const P=e;P.signal=t.signal;const E=await fetch(d,P);return E.status>=200&&E.status<300&&(b.put(a,E.clone()).catch(()=>{}),++Uk>MD&&(LD(),Uk=0)),u(E)})}function RD(){if(typeof window>"u")return;const e=Et.getRTLTextPluginStatus();if(e==="unavailable"||e==="requested")try{Et.setRTLTextPlugin(go.rtlPluginURL,!0)}catch{}}function DD(e,t){for(const n of e)typeof t[n]=="function"&&(t[n]=t[n].bind(t))}function Kh(e,t,n){const o=window.document.createElement(e);return t!==void 0&&(o.className=t),n&&n.appendChild(o),o}function ZP(e){e.parentNode&&e.parentNode.removeChild(e)}function Vk(e,t){let n=null;try{n=new URL(e)}catch{return{url:e}}return n.host===go.maptilerApiHost&&(n.searchParams.has("key")||n.searchParams.append("key",Qi.apiKey),Qi.session&&n.searchParams.append("mtsid",GP)),{url:AD(n,t)}}function Wk(e){return(t,n)=>{if(e!=null){const o=e(t,n),a=Vk((o==null?void 0:o.url)??"",n);return{...o,...a}}return Vk(t,n)}}function $D(){return document.createElement("canvas").getContext("webgl2")?null:typeof WebGL2RenderingContext<"u"?"Graphic rendering with WebGL2 has been disabled or is not supported by your graphic card. The map cannot be displayed.":"Your browser does not support graphic rendering with WebGL2. The map cannot be displayed."}function OD(e){const t=$D();if(!t)return;let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const o=document.createElement("div");throw o.innerHTML=t,o.classList.add("webgl-warning-div"),n.appendChild(o),new Error(t)}function BD(e){const t="The WebGL context was lost.";let n=null;if(typeof e=="string"?n=document.getElementById(e):e instanceof HTMLElement&&(n=e),!n)throw new Error("The Map container must be provided.");const o=document.createElement("div");o.innerHTML=t,o.classList.add("webgl-warning-div"),n.appendChild(o)}let Vp=class extends Et.Marker{addTo(e){return super.addTo(e)}};class Wp extends Et.Popup{addTo(t){return super.addTo(t)}}class tq extends Et.Style{constructor(t,n={}){super(t,n)}}class nq extends Et.CanvasSource{onAdd(t){super.onAdd(t)}}class rq extends Et.GeoJSONSource{onAdd(t){super.onAdd(t)}}class iq extends Et.ImageSource{onAdd(t){super.onAdd(t)}}class oq extends Et.RasterTileSource{onAdd(t){super.onAdd(t)}}class sq extends Et.RasterDEMTileSource{onAdd(t){super.onAdd(t)}}class aq extends Et.VectorTileSource{onAdd(t){super.onAdd(t)}}class lq extends Et.VideoSource{onAdd(t){super.onAdd(t)}}class FD extends Et.NavigationControl{onAdd(t){return super.onAdd(t)}}class ND extends Et.GeolocateControl{onAdd(t){return super.onAdd(t)}}class uq extends Et.AttributionControl{onAdd(t){return super.onAdd(t)}}class jD extends Et.LogoControl{onAdd(t){return super.onAdd(t)}}class UD extends Et.ScaleControl{onAdd(t){return super.onAdd(t)}}class VD extends Et.FullscreenControl{onAdd(t){return super.onAdd(t)}}class cq extends Et.TerrainControl{onAdd(t){return super.onAdd(t)}}class hq extends Et.BoxZoomHandler{constructor(t,n){super(t,n)}}class dq extends Et.ScrollZoomHandler{constructor(t,n){super(t,n)}}class pq extends Et.CooperativeGesturesHandler{constructor(t,n){super(t,n)}}class fq extends Et.KeyboardHandler{constructor(t){super(t)}}class mq extends Et.TwoFingersTouchPitchHandler{constructor(t){super(t)}}class gq extends Et.MapWheelEvent{constructor(t,n,o){super(t,n,o)}}class yq extends Et.MapTouchEvent{constructor(t,n,o){super(t,n,o)}}class vq extends Et.MapMouseEvent{constructor(t,n,o,a={}){super(t,n,o,a)}}let qk=class extends jD{constructor(t={}){super(t),$n(this,"logoURL",""),$n(this,"linkURL",""),this.logoURL=t.logoURL??go.maptilerLogoURL,this.linkURL=t.linkURL??go.maptilerURL}onAdd(t){this._map=t,this._compact=this.options.compact??!1,this._container=window.document.createElement("div"),this._container.className="maplibregl-ctrl";const n=window.document.createElement("a");return n.style.backgroundRepeat="no-repeat",n.style.cursor="pointer",n.style.display="block",n.style.height="23px",n.style.margin="0 0 -4px -4px",n.style.overflow="hidden",n.style.width="88px",n.style.backgroundImage=`url(${this.logoURL})`,n.style.backgroundSize="100px 30px",n.style.width="100px",n.style.height="30px",n.target="_blank",n.rel="noopener",n.href=this.linkURL,n.setAttribute("aria-label","MapTiler logo"),n.setAttribute("rel","noopener"),this._container.appendChild(n),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}};var WD=8,qD={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},GD={"*":{type:"source"}},HD=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],ZD={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},KD={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},XD={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},YD={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},JD={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},QD={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},e$={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},t$=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],n$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},r$={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},i$={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},o$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},s$={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},a$={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},l$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},u$={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},c$={type:"array",value:"*"},h$={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},d$={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},p$={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},f$={type:"array",value:"*",minimum:1},m$={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},g$={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},y$={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},v$={type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},_$=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],x$={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},b$={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},w$={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},S$={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},C$={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},k$={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},T$={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},E$={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},I$={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},P$={"*":{type:"string"}},M$={$version:WD,$root:qD,sources:GD,source:HD,source_vector:ZD,source_raster:KD,source_raster_dem:XD,source_geojson:YD,source_video:JD,source_image:QD,layer:e$,layout:t$,layout_background:n$,layout_fill:r$,layout_circle:i$,layout_heatmap:o$,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:s$,layout_symbol:a$,layout_raster:l$,layout_hillshade:u$,filter:c$,filter_operator:h$,geometry_type:d$,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:p$,expression:f$,light:m$,sky:g$,terrain:y$,projection:v$,paint:_$,paint_fill:x$,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:b$,paint_circle:w$,paint_heatmap:S$,paint_symbol:C$,paint_raster:k$,paint_hillshade:T$,paint_background:E$,transition:I$,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:P$};let rt=class{constructor(t,n,o,a){this.message=(t?`${t}: `:"")+o,a&&(this.identifier=a),n!=null&&n.__line__&&(this.line=n.__line__)}};function i0(e,...t){for(const n of t)for(const o in n)e[o]=n[o];return e}let ra=class extends Error{constructor(t,n){super(n),this.message=n,this.key=t}},A$=class KP{constructor(t,n=[]){this.parent=t,this.bindings={};for(const[o,a]of n)this.bindings[o]=a}concat(t){return new KP(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return this.bindings[t]?!0:this.parent?this.parent.has(t):!1}};const H0={kind:"null"},ot={kind:"number"},sn={kind:"string"},Kt={kind:"boolean"},aa={kind:"color"},Xh={kind:"object"},Xt={kind:"value"},L$={kind:"error"},Z0={kind:"collator"},K0={kind:"formatted"},X0={kind:"padding"},ym={kind:"resolvedImage"},Y0={kind:"variableAnchorOffsetCollection"};function No(e,t){return{kind:"array",itemType:e,N:t}}function xr(e){if(e.kind==="array"){const t=xr(e.itemType);return typeof e.N=="number"?`array<${t}, ${e.N}>`:e.itemType.kind==="value"?"array":`array<${t}>`}else return e.kind}const z$=[H0,ot,sn,Kt,aa,K0,Xh,No(Xt),X0,ym,Y0];function Hf(e,t){if(t.kind==="error")return null;if(e.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!Hf(e.itemType,t.itemType))&&(typeof e.N!="number"||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if(e.kind==="value"){for(const n of z$)if(!Hf(n,t))return null}}return`Expected ${xr(e)} but found ${xr(t)} instead.`}function Dw(e,t){return t.some(n=>n.kind===e.kind)}function Ju(e,t){return t.some(n=>n==="null"?e===null:n==="array"?Array.isArray(e):n==="object"?e&&!Array.isArray(e)&&typeof e=="object":n===typeof e)}function qp(e,t){return e.kind==="array"&&t.kind==="array"?e.itemType.kind===t.itemType.kind&&typeof e.N=="number":e.kind===t.kind}const XP=.96422,YP=1,JP=.82521,QP=4/29,Yh=6/29,eM=3*Yh*Yh,R$=Yh*Yh*Yh,D$=Math.PI/180,$$=180/Math.PI;function tM(e){return e=e%360,e<0&&(e+=360),e}function nM([e,t,n,o]){e=A_(e),t=A_(t),n=A_(n);let a,h;const d=L_((.2225045*e+.7168786*t+.0606169*n)/YP);e===t&&t===n?a=h=d:(a=L_((.4360747*e+.3850649*t+.1430804*n)/XP),h=L_((.0139322*e+.0971045*t+.7141733*n)/JP));const u=116*d-16;return[u<0?0:u,500*(a-d),200*(d-h),o]}function A_(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function L_(e){return e>R$?Math.pow(e,1/3):e/eM+QP}function rM([e,t,n,o]){let a=(e+16)/116,h=isNaN(t)?a:a+t/500,d=isNaN(n)?a:a-n/200;return a=YP*R_(a),h=XP*R_(h),d=JP*R_(d),[z_(3.1338561*h-1.6168667*a-.4906146*d),z_(-.9787684*h+1.9161415*a+.033454*d),z_(.0719453*h-.2289914*a+1.4052427*d),o]}function z_(e){return e=e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055,e<0?0:e>1?1:e}function R_(e){return e>Yh?e*e*e:eM*(e-QP)}function O$(e){const[t,n,o,a]=nM(e),h=Math.sqrt(n*n+o*o);return[Math.round(h*1e4)?tM(Math.atan2(o,n)*$$):NaN,h,t,a]}function B$([e,t,n,o]){return e=isNaN(e)?0:e*D$,rM([n,Math.cos(e)*t,Math.sin(e)*t,o])}function F$([e,t,n,o]){e=tM(e),t/=100,n/=100;function a(h){const d=(h+e/30)%12,u=t*Math.min(n,1-n);return n-u*Math.max(-1,Math.min(d-3,9-d,1))}return[a(0),a(8),a(4),o]}function N$(e){if(e=e.toLowerCase().trim(),e==="transparent")return[0,0,0,0];const t=j$[e];if(t){const[a,h,d]=t;return[a/255,h/255,d/255,1]}if(e.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(e)){const a=e.length<6?1:2;let h=1;return[Zg(e.slice(h,h+=a)),Zg(e.slice(h,h+=a)),Zg(e.slice(h,h+=a)),Zg(e.slice(h,h+a)||"ff")]}if(e.startsWith("rgb")){const a=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,h=e.match(a);if(h){const[d,u,b,w,P,E,I,R,F,U,K,D]=h,j=[w||" ",I||" ",U].join("");if(j==="  "||j==="  /"||j===",,"||j===",,,"){const V=[b,E,F].join(""),Y=V==="%%%"?100:V===""?255:0;if(Y){const ce=[_h(+u/Y,0,1),_h(+P/Y,0,1),_h(+R/Y,0,1),K?Gk(+K,D):1];if(Hk(ce))return ce}}return}}const n=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,o=e.match(n);if(o){const[a,h,d,u,b,w,P,E,I]=o,R=[d||" ",b||" ",P].join("");if(R==="  "||R==="  /"||R===",,"||R===",,,"){const F=[+h,_h(+u,0,100),_h(+w,0,100),E?Gk(+E,I):1];if(Hk(F))return F$(F)}}}function Zg(e){return parseInt(e.padEnd(2,e),16)/255}function Gk(e,t){return _h(t?e/100:e,0,1)}function _h(e,t,n){return Math.min(Math.max(t,e),n)}function Hk(e){return!e.some(Number.isNaN)}const j$={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class br{constructor(t,n,o,a=1,h=!0){this.r=t,this.g=n,this.b=o,this.a=a,h||(this.r*=a,this.g*=a,this.b*=a,a||this.overwriteGetter("rgb",[t,n,o,a]))}static parse(t){if(t instanceof br)return t;if(typeof t!="string")return;const n=N$(t);if(n)return new br(...n,!1)}get rgb(){const{r:t,g:n,b:o,a}=this,h=a||1/0;return this.overwriteGetter("rgb",[t/h,n/h,o/h,a])}get hcl(){return this.overwriteGetter("hcl",O$(this.rgb))}get lab(){return this.overwriteGetter("lab",nM(this.rgb))}overwriteGetter(t,n){return Object.defineProperty(this,t,{value:n}),n}toString(){const[t,n,o,a]=this.rgb;return`rgba(${[t,n,o].map(h=>Math.round(h*255)).join(",")},${a})`}}br.black=new br(0,0,0,1);br.white=new br(1,1,1,1);br.transparent=new br(0,0,0,0);br.red=new br(1,0,0,1);let $w=class{constructor(t,n,o){t?this.sensitivity=n?"variant":"case":this.sensitivity=n?"accent":"base",this.locale=o,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,n){return this.collator.compare(t,n)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}},nb=class{constructor(t,n,o,a,h){this.text=t,this.image=n,this.scale=o,this.fontStack=a,this.textColor=h}},vm=class _y{constructor(t){this.sections=t}static fromString(t){return new _y([new nb(t,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(t=>t.text.length!==0||t.image&&t.image.name.length!==0)}static factory(t){return t instanceof _y?t:_y.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map(t=>t.text).join("")}};class la{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof la)return t;if(typeof t=="number")return new la([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const n of t)if(typeof n!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]];break}return new la(t)}}toString(){return JSON.stringify(this.values)}}const U$=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Va{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Va)return t;if(!(!Array.isArray(t)||t.length<1||t.length%2!==0)){for(let n=0;n<t.length;n+=2){const o=t[n],a=t[n+1];if(typeof o!="string"||!U$.has(o)||!Array.isArray(a)||a.length!==2||typeof a[0]!="number"||typeof a[1]!="number")return}return new Va(t)}}toString(){return JSON.stringify(this.values)}}let _d=class iM{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new iM({name:t,available:!1}):null}};function oM(e,t,n,o){return typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof n=="number"&&n>=0&&n<=255?typeof o>"u"||typeof o=="number"&&o>=0&&o<=1?null:`Invalid rgba value [${[e,t,n,o].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof o=="number"?[e,t,n,o]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Zf(e){if(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||e instanceof br||e instanceof $w||e instanceof vm||e instanceof la||e instanceof Va||e instanceof _d)return!0;if(Array.isArray(e)){for(const t of e)if(!Zf(t))return!1;return!0}else if(typeof e=="object"){for(const t in e)if(!Zf(e[t]))return!1;return!0}else return!1}function ei(e){if(e===null)return H0;if(typeof e=="string")return sn;if(typeof e=="boolean")return Kt;if(typeof e=="number")return ot;if(e instanceof br)return aa;if(e instanceof $w)return Z0;if(e instanceof vm)return K0;if(e instanceof la)return X0;if(e instanceof Va)return Y0;if(e instanceof _d)return ym;if(Array.isArray(e)){const t=e.length;let n;for(const o of e){const a=ei(o);if(!n)n=a;else{if(n===a)continue;n=Xt;break}}return No(n||Xt,t)}else return Xh}function bf(e){const t=typeof e;return e===null?"":t==="string"||t==="number"||t==="boolean"?String(e):e instanceof br||e instanceof vm||e instanceof la||e instanceof Va||e instanceof _d?e.toString():JSON.stringify(e)}class ud{constructor(t,n){this.type=t,this.value=n}static parse(t,n){if(t.length!==2)return n.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Zf(t[1]))return n.error("invalid value");const o=t[1];let a=ei(o);const h=n.expectedType;return a.kind==="array"&&a.N===0&&h&&h.kind==="array"&&(typeof h.N!="number"||h.N===0)&&(a=h),new ud(a,o)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Nr{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const Kg={string:sn,number:ot,boolean:Kt,object:Xh};class Ls{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");let o=1,a;const h=t[0];if(h==="array"){let u;if(t.length>2){const w=t[1];if(typeof w!="string"||!(w in Kg)||w==="object")return n.error('The item type argument of "array" must be one of string, number, boolean',1);u=Kg[w],o++}else u=Xt;let b;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);b=t[2],o++}a=No(u,b)}else{if(!Kg[h])throw new Error(`Types doesn't contain name = ${h}`);a=Kg[h]}const d=[];for(;o<t.length;o++){const u=n.parse(t[o],o,Xt);if(!u)return null;d.push(u)}return new Ls(a,d)}evaluate(t){for(let n=0;n<this.args.length;n++){const o=this.args[n].evaluate(t);if(Hf(this.type,ei(o))){if(n===this.args.length-1)throw new Nr(`Expected value to be of type ${xr(this.type)}, but found ${xr(ei(o))} instead.`)}else return o}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}}const Zk={"to-boolean":Kt,"to-color":aa,"to-number":ot,"to-string":sn};let $h=class sM{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const o=t[0];if(!Zk[o])throw new Error(`Can't parse ${o} as it is not part of the known types`);if((o==="to-boolean"||o==="to-string")&&t.length!==2)return n.error("Expected one argument.");const a=Zk[o],h=[];for(let d=1;d<t.length;d++){const u=n.parse(t[d],d,Xt);if(!u)return null;h.push(u)}return new sM(a,h)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let n,o;for(const a of this.args){if(n=a.evaluate(t),o=null,n instanceof br)return n;if(typeof n=="string"){const h=t.parseColor(n);if(h)return h}else if(Array.isArray(n)&&(n.length<3||n.length>4?o=`Invalid rbga value ${JSON.stringify(n)}: expected an array containing either three or four numeric values.`:o=oM(n[0],n[1],n[2],n[3]),!o))return new br(n[0]/255,n[1]/255,n[2]/255,n[3])}throw new Nr(o||`Could not parse color from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"padding":{let n;for(const o of this.args){n=o.evaluate(t);const a=la.parse(n);if(a)return a}throw new Nr(`Could not parse padding from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"variableAnchorOffsetCollection":{let n;for(const o of this.args){n=o.evaluate(t);const a=Va.parse(n);if(a)return a}throw new Nr(`Could not parse variableAnchorOffsetCollection from value '${typeof n=="string"?n:JSON.stringify(n)}'`)}case"number":{let n=null;for(const o of this.args){if(n=o.evaluate(t),n===null)return 0;const a=Number(n);if(!isNaN(a))return a}throw new Nr(`Could not convert ${JSON.stringify(n)} to number.`)}case"formatted":return vm.fromString(bf(this.args[0].evaluate(t)));case"resolvedImage":return _d.fromString(bf(this.args[0].evaluate(t)));default:return bf(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};const V$=["Unknown","Point","LineString","Polygon"];let aM=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?V$[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let n=this._parseColorCache[t];return n||(n=this._parseColorCache[t]=br.parse(t)),n}},lM=class uM{constructor(t,n,o=[],a,h=new A$,d=[]){this.registry=t,this.path=o,this.key=o.map(u=>`[${u}]`).join(""),this.scope=h,this.errors=d,this.expectedType=a,this._isConstant=n}parse(t,n,o,a,h={}){return n?this.concat(n,o,a)._parse(t,h):this._parse(t,h)}_parse(t,n){(t===null||typeof t=="string"||typeof t=="boolean"||typeof t=="number")&&(t=["literal",t]);function o(a,h,d){return d==="assert"?new Ls(h,[a]):d==="coerce"?new $h(h,[a]):a}if(Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const a=t[0];if(typeof a!="string")return this.error(`Expression name must be a string, but found ${typeof a} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const h=this.registry[a];if(h){let d=h.parse(t,this);if(!d)return null;if(this.expectedType){const u=this.expectedType,b=d.type;if((u.kind==="string"||u.kind==="number"||u.kind==="boolean"||u.kind==="object"||u.kind==="array")&&b.kind==="value")d=o(d,u,n.typeAnnotation||"assert");else if((u.kind==="color"||u.kind==="formatted"||u.kind==="resolvedImage")&&(b.kind==="value"||b.kind==="string"))d=o(d,u,n.typeAnnotation||"coerce");else if(u.kind==="padding"&&(b.kind==="value"||b.kind==="number"||b.kind==="array"))d=o(d,u,n.typeAnnotation||"coerce");else if(u.kind==="variableAnchorOffsetCollection"&&(b.kind==="value"||b.kind==="array"))d=o(d,u,n.typeAnnotation||"coerce");else if(this.checkSubtype(u,b))return null}if(!(d instanceof ud)&&d.type.kind!=="resolvedImage"&&this._isConstant(d)){const u=new aM;try{d=new ud(d.type,d.evaluate(u))}catch(b){return this.error(b.message),null}}return d}return this.error(`Unknown expression "${a}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof t>"u"?this.error("'undefined' value invalid. Use null instead."):typeof t=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,n,o){const a=typeof t=="number"?this.path.concat(t):this.path,h=o?this.scope.concat(o):this.scope;return new uM(this.registry,this._isConstant,a,n||null,h,this.errors)}error(t,...n){const o=`${this.key}${n.map(a=>`[${a}]`).join("")}`;this.errors.push(new ra(o,t))}checkSubtype(t,n){const o=Hf(t,n);return o&&this.error(o),o}},cM=class hM{constructor(t,n){this.type=n.type,this.bindings=[].concat(t),this.result=n}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const n of this.bindings)t(n[1]);t(this.result)}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const o=[];for(let h=1;h<t.length-1;h+=2){const d=t[h];if(typeof d!="string")return n.error(`Expected string, but found ${typeof d} instead.`,h);if(/[^a-zA-Z0-9_]/.test(d))return n.error("Variable names must contain only alphanumeric characters or '_'.",h);const u=n.parse(t[h+1],h+1);if(!u)return null;o.push([d,u])}const a=n.parse(t[t.length-1],t.length-1,n.expectedType,o);return a?new hM(o,a):null}outputDefined(){return this.result.outputDefined()}},dM=class pM{constructor(t,n){this.type=n.type,this.name=t,this.boundExpression=n}static parse(t,n){if(t.length!==2||typeof t[1]!="string")return n.error("'var' expression requires exactly one string literal argument.");const o=t[1];return n.scope.has(o)?new pM(o,n.scope.get(o)):n.error(`Unknown variable "${o}". Make sure "${o}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}},W$=class fM{constructor(t,n,o){this.type=t,this.index=n,this.input=o}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,ot),a=n.parse(t[2],2,No(n.expectedType||Xt));if(!o||!a)return null;const h=a.type;return new fM(h.itemType,o,a)}evaluate(t){const n=this.index.evaluate(t),o=this.input.evaluate(t);if(n<0)throw new Nr(`Array index out of bounds: ${n} < 0.`);if(n>=o.length)throw new Nr(`Array index out of bounds: ${n} > ${o.length-1}.`);if(n!==Math.floor(n))throw new Nr(`Array index must be an integer, but found ${n} instead.`);return o[n]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}},q$=class mM{constructor(t,n){this.type=Kt,this.needle=t,this.haystack=n}static parse(t,n){if(t.length!==3)return n.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,Xt),a=n.parse(t[2],2,Xt);return!o||!a?null:Dw(o.type,[Kt,sn,ot,H0,Xt])?new mM(o,a):n.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(o.type)} instead`)}evaluate(t){const n=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!o)return!1;if(!Ju(n,["boolean","string","number","null"]))throw new Nr(`Expected first argument to be of type boolean, string, number or null, but found ${xr(ei(n))} instead.`);if(!Ju(o,["string","array"]))throw new Nr(`Expected second argument to be of type array or string, but found ${xr(ei(o))} instead.`);return o.indexOf(n)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}},G$=class rb{constructor(t,n,o){this.type=ot,this.needle=t,this.haystack=n,this.fromIndex=o}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,Xt),a=n.parse(t[2],2,Xt);if(!o||!a)return null;if(!Dw(o.type,[Kt,sn,ot,H0,Xt]))return n.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(o.type)} instead`);if(t.length===4){const h=n.parse(t[3],3,ot);return h?new rb(o,a,h):null}else return new rb(o,a)}evaluate(t){const n=this.needle.evaluate(t),o=this.haystack.evaluate(t);if(!Ju(n,["boolean","string","number","null"]))throw new Nr(`Expected first argument to be of type boolean, string, number or null, but found ${xr(ei(n))} instead.`);let a;if(this.fromIndex&&(a=this.fromIndex.evaluate(t)),Ju(o,["string"])){const h=o.indexOf(n,a);return h===-1?-1:[...o.slice(0,h)].length}else{if(Ju(o,["array"]))return o.indexOf(n,a);throw new Nr(`Expected second argument to be of type array or string, but found ${xr(ei(o))} instead.`)}}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}},H$=class gM{constructor(t,n,o,a,h,d){this.inputType=t,this.type=n,this.input=o,this.cases=a,this.outputs=h,this.otherwise=d}static parse(t,n){if(t.length<5)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!==1)return n.error("Expected an even number of arguments.");let o,a;n.expectedType&&n.expectedType.kind!=="value"&&(a=n.expectedType);const h={},d=[];for(let w=2;w<t.length-1;w+=2){let P=t[w];const E=t[w+1];Array.isArray(P)||(P=[P]);const I=n.concat(w);if(P.length===0)return I.error("Expected at least one branch label.");for(const F of P){if(typeof F!="number"&&typeof F!="string")return I.error("Branch labels must be numbers or strings.");if(typeof F=="number"&&Math.abs(F)>Number.MAX_SAFE_INTEGER)return I.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof F=="number"&&Math.floor(F)!==F)return I.error("Numeric branch labels must be integer values.");if(!o)o=ei(F);else if(I.checkSubtype(o,ei(F)))return null;if(typeof h[String(F)]<"u")return I.error("Branch labels must be unique.");h[String(F)]=d.length}const R=n.parse(E,w,a);if(!R)return null;a=a||R.type,d.push(R)}const u=n.parse(t[1],1,Xt);if(!u)return null;const b=n.parse(t[t.length-1],t.length-1,a);return!b||u.type.kind!=="value"&&n.concat(1).checkSubtype(o,u.type)?null:new gM(o,a,u,h,d,b)}evaluate(t){const n=this.input.evaluate(t);return(ei(n)===this.inputType&&this.outputs[this.cases[n]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every(t=>t.outputDefined())&&this.otherwise.outputDefined()}},Z$=class yM{constructor(t,n,o){this.type=t,this.branches=n,this.otherwise=o}static parse(t,n){if(t.length<4)return n.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!==0)return n.error("Expected an odd number of arguments.");let o;n.expectedType&&n.expectedType.kind!=="value"&&(o=n.expectedType);const a=[];for(let d=1;d<t.length-1;d+=2){const u=n.parse(t[d],d,Kt);if(!u)return null;const b=n.parse(t[d+1],d+1,o);if(!b)return null;a.push([u,b]),o=o||b.type}const h=n.parse(t[t.length-1],t.length-1,o);if(!h)return null;if(!o)throw new Error("Can't infer output type");return new yM(o,a,h)}evaluate(t){for(const[n,o]of this.branches)if(n.evaluate(t))return o.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[n,o]of this.branches)t(n),t(o);t(this.otherwise)}outputDefined(){return this.branches.every(([t,n])=>n.outputDefined())&&this.otherwise.outputDefined()}},K$=class ib{constructor(t,n,o,a){this.type=t,this.input=n,this.beginIndex=o,this.endIndex=a}static parse(t,n){if(t.length<=2||t.length>=5)return n.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const o=n.parse(t[1],1,Xt),a=n.parse(t[2],2,ot);if(!o||!a)return null;if(!Dw(o.type,[No(Xt),sn,Xt]))return n.error(`Expected first argument to be of type array or string, but found ${xr(o.type)} instead`);if(t.length===4){const h=n.parse(t[3],3,ot);return h?new ib(o.type,o,a,h):null}else return new ib(o.type,o,a)}evaluate(t){const n=this.input.evaluate(t),o=this.beginIndex.evaluate(t);let a;if(this.endIndex&&(a=this.endIndex.evaluate(t)),Ju(n,["string"]))return[...n].slice(o,a).join("");if(Ju(n,["array"]))return n.slice(o,a);throw new Nr(`Expected first argument to be of type array or string, but found ${xr(ei(n))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}};function vM(e,t){const n=e.length-1;let o=0,a=n,h=0,d,u;for(;o<=a;)if(h=Math.floor((o+a)/2),d=e[h],u=e[h+1],d<=t){if(h===n||t<u)return h;o=h+1}else if(d>t)a=h-1;else throw new Nr("Input is not a number.");return 0}let _M=class xM{constructor(t,n,o){this.type=t,this.input=n,this.labels=[],this.outputs=[];for(const[a,h]of o)this.labels.push(a),this.outputs.push(h)}static parse(t,n){if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");const o=n.parse(t[1],1,ot);if(!o)return null;const a=[];let h=null;n.expectedType&&n.expectedType.kind!=="value"&&(h=n.expectedType);for(let d=1;d<t.length;d+=2){const u=d===1?-1/0:t[d],b=t[d+1],w=d,P=d+1;if(typeof u!="number")return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',w);if(a.length&&a[a.length-1][0]>=u)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',w);const E=n.parse(b,P,h);if(!E)return null;h=h||E.type,a.push([u,E])}return new xM(h,o,a)}evaluate(t){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return o[0].evaluate(t);const h=n.length;if(a>=n[h-1])return o[h-1].evaluate(t);const d=vM(n,a);return o[d].evaluate(t)}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function X$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Y$=bM;function bM(e,t,n,o){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(o-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=o}bM.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(t===void 0&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,o=0;o<8;o++){var a=this.sampleCurveX(n)-e;if(Math.abs(a)<t)return n;var h=this.sampleCurveDerivativeX(n);if(Math.abs(h)<1e-6)break;n=n-a/h}var d=0,u=1;for(n=e,o=0;o<20&&(a=this.sampleCurveX(n),!(Math.abs(a-e)<t));o++)e>a?d=n:u=n,n=(u-d)*.5+d;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var J$=X$(Y$);function Qu(e,t,n){return e+n*(t-e)}function Q$(e,t,n,o="rgb"){switch(o){case"rgb":{const[a,h,d,u]=o0(e.rgb,t.rgb,n);return new br(a,h,d,u,!1)}case"hcl":{const[a,h,d,u]=e.hcl,[b,w,P,E]=t.hcl;let I,R;if(!isNaN(a)&&!isNaN(b)){let j=b-a;b>a&&j>180?j-=360:b<a&&a-b>180&&(j+=360),I=a+n*j}else isNaN(a)?isNaN(b)?I=NaN:(I=b,(d===1||d===0)&&(R=w)):(I=a,(P===1||P===0)&&(R=h));const[F,U,K,D]=B$([I,R??Qu(h,w,n),Qu(d,P,n),Qu(u,E,n)]);return new br(F,U,K,D,!1)}case"lab":{const[a,h,d,u]=rM(o0(e.lab,t.lab,n));return new br(a,h,d,u,!1)}}}function o0(e,t,n){return e.map((o,a)=>Qu(o,t[a],n))}function e8(e,t,n){return new la(o0(e.values,t.values,n))}function t8(e,t,n){const o=e.values,a=t.values;if(o.length!==a.length)throw new Nr(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${t.toString()}`);const h=[];for(let d=0;d<o.length;d+=2){if(o[d]!==a[d])throw new Nr(`Cannot interpolate values containing mismatched anchors. from[${d}]: ${o[d]}, to[${d}]: ${a[d]}`);h.push(o[d]);const[u,b]=o[d+1],[w,P]=a[d+1];h.push([Qu(u,w,n),Qu(b,P,n)])}return new Va(h)}const D_={number:Qu,color:Q$,array:o0,padding:e8,variableAnchorOffsetCollection:t8};let ec=class ob{constructor(t,n,o,a,h){this.type=t,this.operator=n,this.interpolation=o,this.input=a,this.labels=[],this.outputs=[];for(const[d,u]of h)this.labels.push(d),this.outputs.push(u)}static interpolationFactor(t,n,o,a){let h=0;if(t.name==="exponential")h=$_(n,t.base,o,a);else if(t.name==="linear")h=$_(n,1,o,a);else if(t.name==="cubic-bezier"){const d=t.controlPoints;h=new J$(d[0],d[1],d[2],d[3]).solve($_(n,1,o,a))}return h}static parse(t,n){let[o,a,h,...d]=t;if(!Array.isArray(a)||a.length===0)return n.error("Expected an interpolation type expression.",1);if(a[0]==="linear")a={name:"linear"};else if(a[0]==="exponential"){const w=a[1];if(typeof w!="number")return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:w}}else if(a[0]==="cubic-bezier"){const w=a.slice(1);if(w.length!==4||w.some(P=>typeof P!="number"||P<0||P>1))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:w}}else return n.error(`Unknown interpolation type ${String(a[0])}`,1,0);if(t.length-1<4)return n.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!==0)return n.error("Expected an even number of arguments.");if(h=n.parse(h,2,ot),!h)return null;const u=[];let b=null;o==="interpolate-hcl"||o==="interpolate-lab"?b=aa:n.expectedType&&n.expectedType.kind!=="value"&&(b=n.expectedType);for(let w=0;w<d.length;w+=2){const P=d[w],E=d[w+1],I=w+3,R=w+4;if(typeof P!="number")return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(u.length&&u[u.length-1][0]>=P)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',I);const F=n.parse(E,R,b);if(!F)return null;b=b||F.type,u.push([P,F])}return!qp(b,ot)&&!qp(b,aa)&&!qp(b,X0)&&!qp(b,Y0)&&!qp(b,No(ot))?n.error(`Type ${xr(b)} is not interpolatable.`):new ob(b,o,a,h,u)}evaluate(t){const n=this.labels,o=this.outputs;if(n.length===1)return o[0].evaluate(t);const a=this.input.evaluate(t);if(a<=n[0])return o[0].evaluate(t);const h=n.length;if(a>=n[h-1])return o[h-1].evaluate(t);const d=vM(n,a),u=n[d],b=n[d+1],w=ob.interpolationFactor(this.interpolation,a,u,b),P=o[d].evaluate(t),E=o[d+1].evaluate(t);switch(this.operator){case"interpolate":return D_[this.type.kind](P,E,w);case"interpolate-hcl":return D_.color(P,E,w,"hcl");case"interpolate-lab":return D_.color(P,E,w,"lab")}}eachChild(t){t(this.input);for(const n of this.outputs)t(n)}outputDefined(){return this.outputs.every(t=>t.outputDefined())}};function $_(e,t,n,o){const a=o-n,h=e-n;return a===0?0:t===1?h/a:(Math.pow(t,h)-1)/(Math.pow(t,a)-1)}let wM=class sb{constructor(t,n){this.type=t,this.args=n}static parse(t,n){if(t.length<2)return n.error("Expectected at least one argument.");let o=null;const a=n.expectedType;a&&a.kind!=="value"&&(o=a);const h=[];for(const d of t.slice(1)){const u=n.parse(d,1+h.length,o,void 0,{typeAnnotation:"omit"});if(!u)return null;o=o||u.type,h.push(u)}if(!o)throw new Error("No output type");return a&&h.some(d=>Hf(a,d.type))?new sb(Xt,h):new sb(o,h)}evaluate(t){let n=null,o=0,a;for(const h of this.args)if(o++,n=h.evaluate(t),n&&n instanceof _d&&!n.available&&(a||(a=n.name),n=null,o===this.args.length&&(n=a)),n!==null)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every(t=>t.outputDefined())}};function Kk(e,t){return e==="=="||e==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function n8(e,t,n){return t===n}function r8(e,t,n){return t!==n}function i8(e,t,n){return t<n}function o8(e,t,n){return t>n}function s8(e,t,n){return t<=n}function a8(e,t,n){return t>=n}function SM(e,t,n,o){return o.compare(t,n)===0}function l8(e,t,n,o){return!SM(e,t,n,o)}function u8(e,t,n,o){return o.compare(t,n)<0}function c8(e,t,n,o){return o.compare(t,n)>0}function h8(e,t,n,o){return o.compare(t,n)<=0}function d8(e,t,n,o){return o.compare(t,n)>=0}function xd(e,t,n){const o=e!=="=="&&e!=="!=";return class CM{constructor(h,d,u){this.type=Kt,this.lhs=h,this.rhs=d,this.collator=u,this.hasUntypedArgument=h.type.kind==="value"||d.type.kind==="value"}static parse(h,d){if(h.length!==3&&h.length!==4)return d.error("Expected two or three arguments.");const u=h[0];let b=d.parse(h[1],1,Xt);if(!b)return null;if(!Kk(u,b.type))return d.concat(1).error(`"${u}" comparisons are not supported for type '${xr(b.type)}'.`);let w=d.parse(h[2],2,Xt);if(!w)return null;if(!Kk(u,w.type))return d.concat(2).error(`"${u}" comparisons are not supported for type '${xr(w.type)}'.`);if(b.type.kind!==w.type.kind&&b.type.kind!=="value"&&w.type.kind!=="value")return d.error(`Cannot compare types '${xr(b.type)}' and '${xr(w.type)}'.`);o&&(b.type.kind==="value"&&w.type.kind!=="value"?b=new Ls(w.type,[b]):b.type.kind!=="value"&&w.type.kind==="value"&&(w=new Ls(b.type,[w])));let P=null;if(h.length===4){if(b.type.kind!=="string"&&w.type.kind!=="string"&&b.type.kind!=="value"&&w.type.kind!=="value")return d.error("Cannot use collator to compare non-string types.");if(P=d.parse(h[3],3,Z0),!P)return null}return new CM(b,w,P)}evaluate(h){const d=this.lhs.evaluate(h),u=this.rhs.evaluate(h);if(o&&this.hasUntypedArgument){const b=ei(d),w=ei(u);if(b.kind!==w.kind||!(b.kind==="string"||b.kind==="number"))throw new Nr(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${b.kind}, ${w.kind}) instead.`)}if(this.collator&&!o&&this.hasUntypedArgument){const b=ei(d),w=ei(u);if(b.kind!=="string"||w.kind!=="string")return t(h,d,u)}return this.collator?n(h,d,u,this.collator.evaluate(h)):t(h,d,u)}eachChild(h){h(this.lhs),h(this.rhs),this.collator&&h(this.collator)}outputDefined(){return!0}}}const p8=xd("==",n8,SM),f8=xd("!=",r8,l8),m8=xd("<",i8,u8),g8=xd(">",o8,c8),y8=xd("<=",s8,h8),v8=xd(">=",a8,d8);let kM=class TM{constructor(t,n,o){this.type=Z0,this.locale=o,this.caseSensitive=t,this.diacriticSensitive=n}static parse(t,n){if(t.length!==2)return n.error("Expected one argument.");const o=t[1];if(typeof o!="object"||Array.isArray(o))return n.error("Collator options argument must be an object.");const a=n.parse(o["case-sensitive"]===void 0?!1:o["case-sensitive"],1,Kt);if(!a)return null;const h=n.parse(o["diacritic-sensitive"]===void 0?!1:o["diacritic-sensitive"],1,Kt);if(!h)return null;let d=null;return o.locale&&(d=n.parse(o.locale,1,sn),!d)?null:new TM(a,h,d)}evaluate(t){return new $w(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}},_8=class EM{constructor(t,n,o,a,h){this.type=sn,this.number=t,this.locale=n,this.currency=o,this.minFractionDigits=a,this.maxFractionDigits=h}static parse(t,n){if(t.length!==3)return n.error("Expected two arguments.");const o=n.parse(t[1],1,ot);if(!o)return null;const a=t[2];if(typeof a!="object"||Array.isArray(a))return n.error("NumberFormat options argument must be an object.");let h=null;if(a.locale&&(h=n.parse(a.locale,1,sn),!h))return null;let d=null;if(a.currency&&(d=n.parse(a.currency,1,sn),!d))return null;let u=null;if(a["min-fraction-digits"]&&(u=n.parse(a["min-fraction-digits"],1,ot),!u))return null;let b=null;return a["max-fraction-digits"]&&(b=n.parse(a["max-fraction-digits"],1,ot),!b)?null:new EM(o,h,d,u,b)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}},x8=class IM{constructor(t){this.type=K0,this.sections=t}static parse(t,n){if(t.length<2)return n.error("Expected at least one argument.");const o=t[1];if(!Array.isArray(o)&&typeof o=="object")return n.error("First argument must be an image or text section.");const a=[];let h=!1;for(let d=1;d<=t.length-1;++d){const u=t[d];if(h&&typeof u=="object"&&!Array.isArray(u)){h=!1;let b=null;if(u["font-scale"]&&(b=n.parse(u["font-scale"],1,ot),!b))return null;let w=null;if(u["text-font"]&&(w=n.parse(u["text-font"],1,No(sn)),!w))return null;let P=null;if(u["text-color"]&&(P=n.parse(u["text-color"],1,aa),!P))return null;const E=a[a.length-1];E.scale=b,E.font=w,E.textColor=P}else{const b=n.parse(t[d],1,Xt);if(!b)return null;const w=b.type.kind;if(w!=="string"&&w!=="value"&&w!=="null"&&w!=="resolvedImage")return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");h=!0,a.push({content:b,scale:null,font:null,textColor:null})}}return new IM(a)}evaluate(t){const n=o=>{const a=o.content.evaluate(t);return ei(a)===ym?new nb("",a,null,null,null):new nb(bf(a),null,o.scale?o.scale.evaluate(t):null,o.font?o.font.evaluate(t).join(","):null,o.textColor?o.textColor.evaluate(t):null)};return new vm(this.sections.map(n))}eachChild(t){for(const n of this.sections)t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}outputDefined(){return!1}},b8=class PM{constructor(t){this.type=ym,this.input=t}static parse(t,n){if(t.length!==2)return n.error("Expected two arguments.");const o=n.parse(t[1],1,sn);return o?new PM(o):n.error("No image name provided.")}evaluate(t){const n=this.input.evaluate(t),o=_d.fromString(n);return o&&t.availableImages&&(o.available=t.availableImages.indexOf(n)>-1),o}eachChild(t){t(this.input)}outputDefined(){return!1}},w8=class MM{constructor(t){this.type=ot,this.input=t}static parse(t,n){if(t.length!==2)return n.error(`Expected 1 argument, but found ${t.length-1} instead.`);const o=n.parse(t[1],1);return o?o.type.kind!=="array"&&o.type.kind!=="string"&&o.type.kind!=="value"?n.error(`Expected argument of type string or array, but found ${xr(o.type)} instead.`):new MM(o):null}evaluate(t){const n=this.input.evaluate(t);if(typeof n=="string")return[...n].length;if(Array.isArray(n))return n.length;throw new Nr(`Expected value to be of type string or array, but found ${xr(ei(n))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}};const ua=8192;function S8(e,t){const n=C8(e[0]),o=T8(e[1]),a=Math.pow(2,t.z);return[Math.round(n*a*ua),Math.round(o*a*ua)]}function Ow(e,t){const n=Math.pow(2,t.z),o=(e[0]/ua+t.x)/n,a=(e[1]/ua+t.y)/n;return[k8(o),E8(a)]}function C8(e){return(180+e)/360}function k8(e){return e*360-180}function T8(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function E8(e){return 360/Math.PI*Math.atan(Math.exp((180-e*360)*Math.PI/180))-90}function _m(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function Kf(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function I8(e,t,n){return t[1]>e[1]!=n[1]>e[1]&&e[0]<(n[0]-t[0])*(e[1]-t[1])/(n[1]-t[1])+t[0]}function P8(e,t,n){const o=e[0]-t[0],a=e[1]-t[1],h=e[0]-n[0],d=e[1]-n[1];return o*d-h*a===0&&o*h<=0&&a*d<=0}function J0(e,t,n,o){const a=[t[0]-e[0],t[1]-e[1]],h=[o[0]-n[0],o[1]-n[1]];return z8(h,a)===0?!1:!!(Xk(e,t,n,o)&&Xk(n,o,e,t))}function M8(e,t,n){for(const o of n)for(let a=0;a<o.length-1;++a)if(J0(e,t,o[a],o[a+1]))return!0;return!1}function bd(e,t,n=!1){let o=!1;for(const a of t)for(let h=0;h<a.length-1;h++){if(P8(e,a[h],a[h+1]))return n;I8(e,a[h],a[h+1])&&(o=!o)}return o}function A8(e,t){for(const n of t)if(bd(e,n))return!0;return!1}function AM(e,t){for(const n of e)if(!bd(n,t))return!1;for(let n=0;n<e.length-1;++n)if(M8(e[n],e[n+1],t))return!1;return!0}function L8(e,t){for(const n of t)if(AM(e,n))return!0;return!1}function z8(e,t){return e[0]*t[1]-e[1]*t[0]}function Xk(e,t,n,o){const a=e[0]-n[0],h=e[1]-n[1],d=t[0]-n[0],u=t[1]-n[1],b=o[0]-n[0],w=o[1]-n[1],P=a*w-b*h,E=d*w-b*u;return P>0&&E<0||P<0&&E>0}function Bw(e,t,n){const o=[];for(let a=0;a<e.length;a++){const h=[];for(let d=0;d<e[a].length;d++){const u=S8(e[a][d],n);_m(t,u),h.push(u)}o.push(h)}return o}function LM(e,t,n){const o=[];for(let a=0;a<e.length;a++){const h=Bw(e[a],t,n);o.push(h)}return o}function zM(e,t,n,o){if(e[0]<n[0]||e[0]>n[2]){const a=o*.5;let h=e[0]-n[0]>a?-o:n[0]-e[0]>a?o:0;h===0&&(h=e[0]-n[2]>a?-o:n[2]-e[0]>a?o:0),e[0]+=h}_m(t,e)}function R8(e){e[0]=e[1]=1/0,e[2]=e[3]=-1/0}function Yk(e,t,n,o){const a=Math.pow(2,o.z)*ua,h=[o.x*ua,o.y*ua],d=[];for(const u of e)for(const b of u){const w=[b.x+h[0],b.y+h[1]];zM(w,t,n,a),d.push(w)}return d}function Jk(e,t,n,o){const a=Math.pow(2,o.z)*ua,h=[o.x*ua,o.y*ua],d=[];for(const u of e){const b=[];for(const w of u){const P=[w.x+h[0],w.y+h[1]];_m(t,P),b.push(P)}d.push(b)}if(t[2]-t[0]<=a/2){R8(t);for(const u of d)for(const b of u)zM(b,t,n,a)}return d}function D8(e,t){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const h=Bw(t.coordinates,o,a),d=Yk(e.geometry(),n,o,a);if(!Kf(n,o))return!1;for(const u of d)if(!bd(u,h))return!1}if(t.type==="MultiPolygon"){const h=LM(t.coordinates,o,a),d=Yk(e.geometry(),n,o,a);if(!Kf(n,o))return!1;for(const u of d)if(!A8(u,h))return!1}return!0}function $8(e,t){const n=[1/0,1/0,-1/0,-1/0],o=[1/0,1/0,-1/0,-1/0],a=e.canonicalID();if(t.type==="Polygon"){const h=Bw(t.coordinates,o,a),d=Jk(e.geometry(),n,o,a);if(!Kf(n,o))return!1;for(const u of d)if(!AM(u,h))return!1}if(t.type==="MultiPolygon"){const h=LM(t.coordinates,o,a),d=Jk(e.geometry(),n,o,a);if(!Kf(n,o))return!1;for(const u of d)if(!L8(u,h))return!1}return!0}class tc{constructor(t,n){this.type=Kt,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Zf(t[1])){const o=t[1];if(o.type==="FeatureCollection"){const a=[];for(const h of o.features){const{type:d,coordinates:u}=h.geometry;d==="Polygon"&&a.push(u),d==="MultiPolygon"&&a.push(...u)}if(a.length){const h={type:"MultiPolygon",coordinates:a};return new tc(o,h)}}else if(o.type==="Feature"){const a=o.geometry.type;if(a==="Polygon"||a==="MultiPolygon")return new tc(o,o.geometry)}else if(o.type==="Polygon"||o.type==="MultiPolygon")return new tc(o,o)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return D8(t,this.geometries);if(t.geometryType()==="LineString")return $8(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let RM=class{constructor(t=[],n=(o,a)=>o<a?-1:o>a?1:0){if(this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],n=this.data.pop();return--this.length>0&&(this.data[0]=n,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:n,compare:o}=this,a=n[t];for(;t>0;){const h=t-1>>1,d=n[h];if(o(a,d)>=0)break;n[t]=d,t=h}n[t]=a}_down(t){const{data:n,compare:o}=this,a=this.length>>1,h=n[t];for(;t<a;){let d=(t<<1)+1;const u=d+1;if(u<this.length&&o(n[u],n[d])<0&&(d=u),o(n[d],h)>=0)break;n[t]=n[d],t=d}n[t]=h}};function O8(e,t){if(e.length<=1)return[e];const n=[];let o,a;for(const h of e){const d=B8(h);d!==0&&(h.area=Math.abs(d),a===void 0&&(a=d<0),a===d<0?(o&&n.push(o),o=[h]):o.push(h))}return o&&n.push(o),n}function B8(e){let t=0;for(let n=0,o=e.length,a=o-1,h,d;n<o;a=n++)h=e[n],d=e[a],t+=(d.x-h.x)*(h.y+d.y);return t}const F8=6378.137,Qk=1/298.257223563,eT=Qk*(2-Qk),tT=Math.PI/180;let Fw=class{constructor(t){const n=tT*F8*1e3,o=Math.cos(t*tT),a=1/(1-eT*(1-o*o)),h=Math.sqrt(a);this.kx=n*h*o,this.ky=n*h*a*(1-eT)}distance(t,n){const o=this.wrap(t[0]-n[0])*this.kx,a=(t[1]-n[1])*this.ky;return Math.sqrt(o*o+a*a)}pointOnLine(t,n){let o=1/0,a,h,d,u;for(let b=0;b<t.length-1;b++){let w=t[b][0],P=t[b][1],E=this.wrap(t[b+1][0]-w)*this.kx,I=(t[b+1][1]-P)*this.ky,R=0;(E!==0||I!==0)&&(R=(this.wrap(n[0]-w)*this.kx*E+(n[1]-P)*this.ky*I)/(E*E+I*I),R>1?(w=t[b+1][0],P=t[b+1][1]):R>0&&(w+=E/this.kx*R,P+=I/this.ky*R)),E=this.wrap(n[0]-w)*this.kx,I=(n[1]-P)*this.ky;const F=E*E+I*I;F<o&&(o=F,a=w,h=P,d=b,u=R)}return{point:[a,h],index:d,t:Math.max(0,Math.min(1,u))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}};const ab=100,lb=50;function DM(e,t){return t[0]-e[0]}function s0(e){return e[1]-e[0]+1}function Wa(e,t){return e[1]>=e[0]&&e[1]<t}function ub(e,t){if(e[0]>e[1])return[null,null];const n=s0(e);if(t){if(n===2)return[e,null];const a=Math.floor(n/2);return[[e[0],e[0]+a],[e[0]+a,e[1]]]}if(n===1)return[e,null];const o=Math.floor(n/2)-1;return[[e[0],e[0]+o],[e[0]+o+1,e[1]]]}function cb(e,t){if(!Wa(t,e.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let o=t[0];o<=t[1];++o)_m(n,e[o]);return n}function hb(e){const t=[1/0,1/0,-1/0,-1/0];for(const n of e)for(const o of n)_m(t,o);return t}function nT(e){return e[0]!==-1/0&&e[1]!==-1/0&&e[2]!==1/0&&e[3]!==1/0}function Nw(e,t,n){if(!nT(e)||!nT(t))return NaN;let o=0,a=0;return e[2]<t[0]&&(o=t[0]-e[2]),e[0]>t[2]&&(o=e[0]-t[2]),e[1]>t[3]&&(a=e[1]-t[3]),e[3]<t[1]&&(a=t[1]-e[3]),n.distance([0,0],[o,a])}function Gu(e,t,n){const o=n.pointOnLine(t,e);return n.distance(e,o.point)}function jw(e,t,n,o,a){const h=Math.min(Gu(e,[n,o],a),Gu(t,[n,o],a)),d=Math.min(Gu(n,[e,t],a),Gu(o,[e,t],a));return Math.min(h,d)}function N8(e,t,n,o,a){if(!(Wa(t,e.length)&&Wa(o,n.length)))return 1/0;let h=1/0;for(let d=t[0];d<t[1];++d){const u=e[d],b=e[d+1];for(let w=o[0];w<o[1];++w){const P=n[w],E=n[w+1];if(J0(u,b,P,E))return 0;h=Math.min(h,jw(u,b,P,E,a))}}return h}function j8(e,t,n,o,a){if(!(Wa(t,e.length)&&Wa(o,n.length)))return NaN;let h=1/0;for(let d=t[0];d<=t[1];++d)for(let u=o[0];u<=o[1];++u)if(h=Math.min(h,a.distance(e[d],n[u])),h===0)return h;return h}function U8(e,t,n){if(bd(e,t,!0))return 0;let o=1/0;for(const a of t){const h=a[0],d=a[a.length-1];if(h!==d&&(o=Math.min(o,Gu(e,[d,h],n)),o===0))return o;const u=n.pointOnLine(a,e);if(o=Math.min(o,n.distance(e,u.point)),o===0)return o}return o}function V8(e,t,n,o){if(!Wa(t,e.length))return NaN;for(let h=t[0];h<=t[1];++h)if(bd(e[h],n,!0))return 0;let a=1/0;for(let h=t[0];h<t[1];++h){const d=e[h],u=e[h+1];for(const b of n)for(let w=0,P=b.length,E=P-1;w<P;E=w++){const I=b[E],R=b[w];if(J0(d,u,I,R))return 0;a=Math.min(a,jw(d,u,I,R,o))}}return a}function rT(e,t){for(const n of e)for(const o of n)if(bd(o,t,!0))return!0;return!1}function W8(e,t,n,o=1/0){const a=hb(e),h=hb(t);if(o!==1/0&&Nw(a,h,n)>=o)return o;if(Kf(a,h)){if(rT(e,t))return 0}else if(rT(t,e))return 0;let d=1/0;for(const u of e)for(let b=0,w=u.length,P=w-1;b<w;P=b++){const E=u[P],I=u[b];for(const R of t)for(let F=0,U=R.length,K=U-1;F<U;K=F++){const D=R[K],j=R[F];if(J0(E,I,D,j))return 0;d=Math.min(d,jw(E,I,D,j,n))}}return d}function iT(e,t,n,o,a,h){if(!h)return;const d=Nw(cb(o,h),a,n);d<t&&e.push([d,h,[0,0]])}function Xg(e,t,n,o,a,h,d){if(!h||!d)return;const u=Nw(cb(o,h),cb(a,d),n);u<t&&e.push([u,h,d])}function a0(e,t,n,o,a=1/0){let h=Math.min(o.distance(e[0],n[0][0]),a);if(h===0)return h;const d=new RM([[0,[0,e.length-1],[0,0]]],DM),u=hb(n);for(;d.length>0;){const b=d.pop();if(b[0]>=h)continue;const w=b[1],P=t?lb:ab;if(s0(w)<=P){if(!Wa(w,e.length))return NaN;if(t){const E=V8(e,w,n,o);if(isNaN(E)||E===0)return E;h=Math.min(h,E)}else for(let E=w[0];E<=w[1];++E){const I=U8(e[E],n,o);if(h=Math.min(h,I),h===0)return 0}}else{const E=ub(w,t);iT(d,h,o,e,u,E[0]),iT(d,h,o,e,u,E[1])}}return h}function l0(e,t,n,o,a,h=1/0){let d=Math.min(h,a.distance(e[0],n[0]));if(d===0)return d;const u=new RM([[0,[0,e.length-1],[0,n.length-1]]],DM);for(;u.length>0;){const b=u.pop();if(b[0]>=d)continue;const w=b[1],P=b[2],E=t?lb:ab,I=o?lb:ab;if(s0(w)<=E&&s0(P)<=I){if(!Wa(w,e.length)&&Wa(P,n.length))return NaN;let R;if(t&&o)R=N8(e,w,n,P,a),d=Math.min(d,R);else if(t&&!o){const F=e.slice(w[0],w[1]+1);for(let U=P[0];U<=P[1];++U)if(R=Gu(n[U],F,a),d=Math.min(d,R),d===0)return d}else if(!t&&o){const F=n.slice(P[0],P[1]+1);for(let U=w[0];U<=w[1];++U)if(R=Gu(e[U],F,a),d=Math.min(d,R),d===0)return d}else R=j8(e,w,n,P,a),d=Math.min(d,R)}else{const R=ub(w,t),F=ub(P,o);Xg(u,d,a,e,n,R[0],F[0]),Xg(u,d,a,e,n,R[0],F[1]),Xg(u,d,a,e,n,R[1],F[0]),Xg(u,d,a,e,n,R[1],F[1])}}return d}function q8(e,t){const n=e.geometry(),o=n.flat().map(d=>Ow([d.x,d.y],e.canonical));if(n.length===0)return NaN;const a=new Fw(o[0][1]);let h=1/0;for(const d of t){switch(d.type){case"Point":h=Math.min(h,l0(o,!1,[d.coordinates],!1,a,h));break;case"LineString":h=Math.min(h,l0(o,!1,d.coordinates,!0,a,h));break;case"Polygon":h=Math.min(h,a0(o,!1,d.coordinates,a,h));break}if(h===0)return h}return h}function G8(e,t){const n=e.geometry(),o=n.flat().map(d=>Ow([d.x,d.y],e.canonical));if(n.length===0)return NaN;const a=new Fw(o[0][1]);let h=1/0;for(const d of t){switch(d.type){case"Point":h=Math.min(h,l0(o,!0,[d.coordinates],!1,a,h));break;case"LineString":h=Math.min(h,l0(o,!0,d.coordinates,!0,a,h));break;case"Polygon":h=Math.min(h,a0(o,!0,d.coordinates,a,h));break}if(h===0)return h}return h}function H8(e,t){const n=e.geometry();if(n.length===0||n[0].length===0)return NaN;const o=O8(n).map(d=>d.map(u=>u.map(b=>Ow([b.x,b.y],e.canonical)))),a=new Fw(o[0][0][0][1]);let h=1/0;for(const d of t)for(const u of o){switch(d.type){case"Point":h=Math.min(h,a0([d.coordinates],!1,u,a,h));break;case"LineString":h=Math.min(h,a0(d.coordinates,!0,u,a,h));break;case"Polygon":h=Math.min(h,W8(u,d.coordinates,a,h));break}if(h===0)return h}return h}function O_(e){return e.type==="MultiPolygon"?e.coordinates.map(t=>({type:"Polygon",coordinates:t})):e.type==="MultiLineString"?e.coordinates.map(t=>({type:"LineString",coordinates:t})):e.type==="MultiPoint"?e.coordinates.map(t=>({type:"Point",coordinates:t})):[e]}let Uw=class xy{constructor(t,n){this.type=ot,this.geojson=t,this.geometries=n}static parse(t,n){if(t.length!==2)return n.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Zf(t[1])){const o=t[1];if(o.type==="FeatureCollection")return new xy(o,o.features.map(a=>O_(a.geometry)).flat());if(o.type==="Feature")return new xy(o,O_(o.geometry));if("type"in o&&"coordinates"in o)return new xy(o,O_(o))}return n.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return q8(t,this.geometries);if(t.geometryType()==="LineString")return G8(t,this.geometries);if(t.geometryType()==="Polygon")return H8(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}};const Vw={"==":p8,"!=":f8,">":g8,"<":m8,">=":v8,"<=":y8,array:Ls,at:W$,boolean:Ls,case:Z$,coalesce:wM,collator:kM,format:x8,image:b8,in:q$,"index-of":G$,interpolate:ec,"interpolate-hcl":ec,"interpolate-lab":ec,length:w8,let:cM,literal:ud,match:H$,number:Ls,"number-format":_8,object:Ls,slice:K$,step:_M,string:Ls,"to-boolean":$h,"to-color":$h,"to-number":$h,"to-string":$h,var:dM,within:tc,distance:Uw};class zs{constructor(t,n,o,a){this.name=t,this.type=n,this._evaluate=o,this.args=a}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,n){const o=t[0],a=zs.definitions[o];if(!a)return n.error(`Unknown expression "${o}". If you wanted a literal array, use ["literal", [...]].`,0);const h=Array.isArray(a)?a[0]:a.type,d=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=d.filter(([w])=>!Array.isArray(w)||w.length===t.length-1);let b=null;for(const[w,P]of u){b=new lM(n.registry,u0,n.path,null,n.scope);const E=[];let I=!1;for(let R=1;R<t.length;R++){const F=t[R],U=Array.isArray(w)?w[R-1]:w.type,K=b.parse(F,1+E.length,U);if(!K){I=!0;break}E.push(K)}if(!I){if(Array.isArray(w)&&w.length!==E.length){b.error(`Expected ${w.length} arguments, but found ${E.length} instead.`);continue}for(let R=0;R<E.length;R++){const F=Array.isArray(w)?w[R]:w.type,U=E[R];b.concat(R+1).checkSubtype(F,U.type)}if(b.errors.length===0)return new zs(o,h,P,E)}}if(u.length===1)n.errors.push(...b.errors);else{const w=(u.length?u:d).map(([E])=>K8(E)).join(" | "),P=[];for(let E=1;E<t.length;E++){const I=n.parse(t[E],1+P.length);if(!I)return null;P.push(xr(I.type))}n.error(`Expected arguments of type ${w}, but found (${P.join(", ")}) instead.`)}return null}static register(t,n){zs.definitions=n;for(const o in n)t[o]=zs}}function oT(e,[t,n,o,a]){t=t.evaluate(e),n=n.evaluate(e),o=o.evaluate(e);const h=a?a.evaluate(e):1,d=oM(t,n,o,h);if(d)throw new Nr(d);return new br(t/255,n/255,o/255,h,!1)}function sT(e,t){return e in t}function B_(e,t){const n=t[e];return typeof n>"u"?null:n}function Z8(e,t,n,o){for(;n<=o;){const a=n+o>>1;if(t[a]===e)return!0;t[a]>e?o=a-1:n=a+1}return!1}function Du(e){return{type:e}}zs.register(Vw,{error:[L$,[sn],(e,[t])=>{throw new Nr(t.evaluate(e))}],typeof:[sn,[Xt],(e,[t])=>xr(ei(t.evaluate(e)))],"to-rgba":[No(ot,4),[aa],(e,[t])=>{const[n,o,a,h]=t.evaluate(e).rgb;return[n*255,o*255,a*255,h]}],rgb:[aa,[ot,ot,ot],oT],rgba:[aa,[ot,ot,ot,ot],oT],has:{type:Kt,overloads:[[[sn],(e,[t])=>sT(t.evaluate(e),e.properties())],[[sn,Xh],(e,[t,n])=>sT(t.evaluate(e),n.evaluate(e))]]},get:{type:Xt,overloads:[[[sn],(e,[t])=>B_(t.evaluate(e),e.properties())],[[sn,Xh],(e,[t,n])=>B_(t.evaluate(e),n.evaluate(e))]]},"feature-state":[Xt,[sn],(e,[t])=>B_(t.evaluate(e),e.featureState||{})],properties:[Xh,[],e=>e.properties()],"geometry-type":[sn,[],e=>e.geometryType()],id:[Xt,[],e=>e.id()],zoom:[ot,[],e=>e.globals.zoom],"heatmap-density":[ot,[],e=>e.globals.heatmapDensity||0],"line-progress":[ot,[],e=>e.globals.lineProgress||0],accumulated:[Xt,[],e=>e.globals.accumulated===void 0?null:e.globals.accumulated],"+":[ot,Du(ot),(e,t)=>{let n=0;for(const o of t)n+=o.evaluate(e);return n}],"*":[ot,Du(ot),(e,t)=>{let n=1;for(const o of t)n*=o.evaluate(e);return n}],"-":{type:ot,overloads:[[[ot,ot],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ot],(e,[t])=>-t.evaluate(e)]]},"/":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ot,[ot],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))],log2:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ot,[ot],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ot,[ot],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ot,[ot],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ot,[ot],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ot,[ot],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ot,[ot],(e,[t])=>Math.atan(t.evaluate(e))],min:[ot,Du(ot),(e,t)=>Math.min(...t.map(n=>n.evaluate(e)))],max:[ot,Du(ot),(e,t)=>Math.max(...t.map(n=>n.evaluate(e)))],abs:[ot,[ot],(e,[t])=>Math.abs(t.evaluate(e))],round:[ot,[ot],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ot,[ot],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ot,[ot],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[Kt,[sn,Xt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[Kt,[Xt],(e,[t])=>e.id()===t.value],"filter-type-==":[Kt,[sn],(e,[t])=>e.geometryType()===t.value],"filter-<":[Kt,[sn,Xt],(e,[t,n])=>{const o=e.properties()[t.value],a=n.value;return typeof o==typeof a&&o<a}],"filter-id-<":[Kt,[Xt],(e,[t])=>{const n=e.id(),o=t.value;return typeof n==typeof o&&n<o}],"filter->":[Kt,[sn,Xt],(e,[t,n])=>{const o=e.properties()[t.value],a=n.value;return typeof o==typeof a&&o>a}],"filter-id->":[Kt,[Xt],(e,[t])=>{const n=e.id(),o=t.value;return typeof n==typeof o&&n>o}],"filter-<=":[Kt,[sn,Xt],(e,[t,n])=>{const o=e.properties()[t.value],a=n.value;return typeof o==typeof a&&o<=a}],"filter-id-<=":[Kt,[Xt],(e,[t])=>{const n=e.id(),o=t.value;return typeof n==typeof o&&n<=o}],"filter->=":[Kt,[sn,Xt],(e,[t,n])=>{const o=e.properties()[t.value],a=n.value;return typeof o==typeof a&&o>=a}],"filter-id->=":[Kt,[Xt],(e,[t])=>{const n=e.id(),o=t.value;return typeof n==typeof o&&n>=o}],"filter-has":[Kt,[Xt],(e,[t])=>t.value in e.properties()],"filter-has-id":[Kt,[],e=>e.id()!==null&&e.id()!==void 0],"filter-type-in":[Kt,[No(sn)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[Kt,[No(Xt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[Kt,[sn,No(Xt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[Kt,[sn,No(Xt)],(e,[t,n])=>Z8(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:Kt,overloads:[[[Kt,Kt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Du(Kt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Du(Kt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[Kt,[Kt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[Kt,[sn],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return n?n(t.evaluate(e)):!0}],upcase:[sn,[sn],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[sn,[sn],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[sn,Du(Xt),(e,t)=>t.map(n=>bf(n.evaluate(e))).join("")],"resolved-locale":[sn,[Z0],(e,[t])=>t.evaluate(e).resolvedLocale()]});function K8(e){return Array.isArray(e)?`(${e.map(xr).join(", ")})`:`(${xr(e.type)}...)`}function u0(e){if(e instanceof dM)return u0(e.boundExpression);if(e instanceof zs&&e.name==="error"||e instanceof kM||e instanceof tc||e instanceof Uw)return!1;const t=e instanceof $h||e instanceof Ls;let n=!0;return e.eachChild(o=>{t?n=n&&u0(o):n=n&&o instanceof ud}),n?Q0(e)&&ev(e,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Q0(e){if(e instanceof zs&&(e.name==="get"&&e.args.length===1||e.name==="feature-state"||e.name==="has"&&e.args.length===1||e.name==="properties"||e.name==="geometry-type"||e.name==="id"||/^filter-/.test(e.name))||e instanceof tc||e instanceof Uw)return!1;let t=!0;return e.eachChild(n=>{t&&!Q0(n)&&(t=!1)}),t}function Xf(e){if(e instanceof zs&&e.name==="feature-state")return!1;let t=!0;return e.eachChild(n=>{t&&!Xf(n)&&(t=!1)}),t}function ev(e,t){if(e instanceof zs&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(o=>{n&&!ev(o,t)&&(n=!1)}),n}function db(e){return{result:"success",value:e}}function xh(e){return{result:"error",value:e}}function c0(e){return e["property-type"]==="data-driven"||e["property-type"]==="cross-faded-data-driven"}function $M(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function OM(e){return!!e.expression&&e.expression.interpolated}function On(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":e===null?"null":typeof e}function Ww(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}class X8{constructor(t,n){this.expression=t,this._warningHistory={},this._evaluator=new aM,this._defaultValue=n?Q8(n):null,this._enumValues=n&&n.type==="enum"?n.values:null}evaluateWithoutErrorHandling(t,n,o,a,h,d){return this._evaluator.globals=t,this._evaluator.feature=n,this._evaluator.featureState=o,this._evaluator.canonical=a,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d,this.expression.evaluate(this._evaluator)}evaluate(t,n,o,a,h,d){this._evaluator.globals=t,this._evaluator.feature=n||null,this._evaluator.featureState=o||null,this._evaluator.canonical=a,this._evaluator.availableImages=h||null,this._evaluator.formattedSection=d||null;try{const u=this.expression.evaluate(this._evaluator);if(u==null||typeof u=="number"&&u!==u)return this._defaultValue;if(this._enumValues&&!(u in this._enumValues))throw new Nr(`Expected value to be one of ${Object.keys(this._enumValues).map(b=>JSON.stringify(b)).join(", ")}, but found ${JSON.stringify(u)} instead.`);return u}catch(u){return this._warningHistory[u.message]||(this._warningHistory[u.message]=!0,typeof console<"u"&&console.warn(u.message)),this._defaultValue}}}function BM(e){return Array.isArray(e)&&e.length>0&&typeof e[0]=="string"&&e[0]in Vw}function FM(e,t){const n=new lM(Vw,u0,[],t?J8(t):void 0),o=n.parse(e,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return o?db(new X8(o,t)):xh(n.errors)}class aT{constructor(t,n){this.kind=t,this._styleExpression=n,this.isStateDependent=t!=="constant"&&!Xf(n.expression)}evaluateWithoutErrorHandling(t,n,o,a,h,d){return this._styleExpression.evaluateWithoutErrorHandling(t,n,o,a,h,d)}evaluate(t,n,o,a,h,d){return this._styleExpression.evaluate(t,n,o,a,h,d)}}let lT=class{constructor(t,n,o,a){this.kind=t,this.zoomStops=o,this._styleExpression=n,this.isStateDependent=t!=="camera"&&!Xf(n.expression),this.interpolationType=a}evaluateWithoutErrorHandling(t,n,o,a,h,d){return this._styleExpression.evaluateWithoutErrorHandling(t,n,o,a,h,d)}evaluate(t,n,o,a,h,d){return this._styleExpression.evaluate(t,n,o,a,h,d)}interpolationFactor(t,n,o){return this.interpolationType?ec.interpolationFactor(this.interpolationType,t,n,o):0}};function Y8(e,t){const n=FM(e,t);if(n.result==="error")return n;const o=n.value.expression,a=Q0(o);if(!a&&!c0(t))return xh([new ra("","data expressions not supported")]);const h=ev(o,["zoom"]);if(!h&&!$M(t))return xh([new ra("","zoom expressions not supported")]);const d=by(o);if(!d&&!h)return xh([new ra("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(d instanceof ra)return xh([d]);if(d instanceof ec&&!OM(t))return xh([new ra("",'"interpolate" expressions cannot be used with this property')]);if(!d)return db(a?new aT("constant",n.value):new aT("source",n.value));const u=d instanceof ec?d.interpolation:void 0;return db(a?new lT("camera",n.value,d.labels,u):new lT("composite",n.value,d.labels,u))}function by(e){let t=null;if(e instanceof cM)t=by(e.result);else if(e instanceof wM){for(const n of e.args)if(t=by(n),t)break}else(e instanceof _M||e instanceof ec)&&e.input instanceof zs&&e.input.name==="zoom"&&(t=e);return t instanceof ra||e.eachChild(n=>{const o=by(n);o instanceof ra?t=o:!t&&o?t=new ra("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&o&&t!==o&&(t=new ra("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}function J8(e){const t={color:aa,string:sn,number:ot,enum:sn,boolean:Kt,formatted:K0,padding:X0,resolvedImage:ym,variableAnchorOffsetCollection:Y0};return e.type==="array"?No(t[e.value]||Xt,e.length):t[e.type]}function Q8(e){return e.type==="color"&&Ww(e.default)?new br(0,0,0,0):e.type==="color"?br.parse(e.default)||null:e.type==="padding"?la.parse(e.default)||null:e.type==="variableAnchorOffsetCollection"?Va.parse(e.default)||null:e.default===void 0?null:e.default}function NM(e){if(e===!0||e===!1)return!0;if(!Array.isArray(e)||e.length===0)return!1;switch(e[0]){case"has":return e.length>=2&&e[1]!=="$id"&&e[1]!=="$type";case"in":return e.length>=3&&(typeof e[1]!="string"||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return e.length!==3||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!NM(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}function jM(e){const t=e.key,n=e.value;return n?[new rt(t,n,"constants have been deprecated as of v8")]:[]}function $r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function lc(e){if(Array.isArray(e))return e.map(lc);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=lc(e[n]);return t}return $r(e)}function ps(e){const t=e.key,n=e.value,o=e.valueSpec||{},a=e.objectElementValidators||{},h=e.style,d=e.styleSpec,u=e.validateSpec;let b=[];const w=On(n);if(w!=="object")return[new rt(t,n,`object expected, ${w} found`)];for(const P in n){const E=P.split(".")[0],I=o[E]||o["*"];let R;if(a[E])R=a[E];else if(o[E])R=u;else if(a["*"])R=a["*"];else if(o["*"])R=u;else{b.push(new rt(t,n[P],`unknown property "${P}"`));continue}b=b.concat(R({key:(t&&`${t}.`)+P,value:n[P],valueSpec:I,style:h,styleSpec:d,object:n,objectKey:P,validateSpec:u},n))}for(const P in o)a[P]||o[P].required&&o[P].default===void 0&&n[P]===void 0&&b.push(new rt(t,n,`missing required property "${P}"`));return b}function qw(e){const t=e.value,n=e.valueSpec,o=e.validateSpec,a=e.style,h=e.styleSpec,d=e.key,u=e.arrayElementValidator||o;if(On(t)!=="array")return[new rt(d,t,`array expected, ${On(t)} found`)];if(n.length&&t.length!==n.length)return[new rt(d,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new rt(d,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let b={type:n.value,values:n.values};h.$version<7&&(b.function=n.function),On(n.value)==="object"&&(b=n.value);let w=[];for(let P=0;P<t.length;P++)w=w.concat(u({array:t,arrayIndex:P,value:t[P],valueSpec:b,validateSpec:e.validateSpec,style:a,styleSpec:h,key:`${d}[${P}]`}));return w}function Gw(e){const t=e.key,n=e.value,o=e.valueSpec;let a=On(n);return a==="number"&&n!==n&&(a="NaN"),a!=="number"?[new rt(t,n,`number expected, ${a} found`)]:"minimum"in o&&n<o.minimum?[new rt(t,n,`${n} is less than the minimum value ${o.minimum}`)]:"maximum"in o&&n>o.maximum?[new rt(t,n,`${n} is greater than the maximum value ${o.maximum}`)]:[]}function UM(e){const t=e.valueSpec,n=$r(e.value.type);let o,a={},h,d;const u=n!=="categorical"&&e.value.property===void 0,b=!u,w=On(e.value.stops)==="array"&&On(e.value.stops[0])==="array"&&On(e.value.stops[0][0])==="object",P=ps({key:e.key,value:e.value,valueSpec:e.styleSpec.function,validateSpec:e.validateSpec,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:E,default:F}});return n==="identity"&&u&&P.push(new rt(e.key,e.value,'missing required property "property"')),n!=="identity"&&!e.value.stops&&P.push(new rt(e.key,e.value,'missing required property "stops"')),n==="exponential"&&e.valueSpec.expression&&!OM(e.valueSpec)&&P.push(new rt(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(b&&!c0(e.valueSpec)?P.push(new rt(e.key,e.value,"property functions not supported")):u&&!$M(e.valueSpec)&&P.push(new rt(e.key,e.value,"zoom functions not supported"))),(n==="categorical"||w)&&e.value.property===void 0&&P.push(new rt(e.key,e.value,'"property" property is required')),P;function E(U){if(n==="identity")return[new rt(U.key,U.value,'identity function may not have a "stops" property')];let K=[];const D=U.value;return K=K.concat(qw({key:U.key,value:D,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:I})),On(D)==="array"&&D.length===0&&K.push(new rt(U.key,D,"array must have at least one stop")),K}function I(U){let K=[];const D=U.value,j=U.key;if(On(D)!=="array")return[new rt(j,D,`array expected, ${On(D)} found`)];if(D.length!==2)return[new rt(j,D,`array length 2 expected, length ${D.length} found`)];if(w){if(On(D[0])!=="object")return[new rt(j,D,`object expected, ${On(D[0])} found`)];if(D[0].zoom===void 0)return[new rt(j,D,"object stop key must have zoom")];if(D[0].value===void 0)return[new rt(j,D,"object stop key must have value")];if(d&&d>$r(D[0].zoom))return[new rt(j,D[0].zoom,"stop zoom values must appear in ascending order")];$r(D[0].zoom)!==d&&(d=$r(D[0].zoom),h=void 0,a={}),K=K.concat(ps({key:`${j}[0]`,value:D[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Gw,value:R}}))}else K=K.concat(R({key:`${j}[0]`,value:D[0],valueSpec:{},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},D));return BM(lc(D[1]))?K.concat([new rt(`${j}[1]`,D[1],"expressions are not allowed in function stops.")]):K.concat(U.validateSpec({key:`${j}[1]`,value:D[1],valueSpec:t,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function R(U,K){const D=On(U.value),j=$r(U.value),V=U.value!==null?U.value:K;if(!o)o=D;else if(D!==o)return[new rt(U.key,V,`${D} stop domain type must match previous stop domain type ${o}`)];if(D!=="number"&&D!=="string"&&D!=="boolean")return[new rt(U.key,V,"stop domain value must be a number, string, or boolean")];if(D!=="number"&&n!=="categorical"){let Y=`number expected, ${D} found`;return c0(t)&&n===void 0&&(Y+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rt(U.key,V,Y)]}return n==="categorical"&&D==="number"&&(!isFinite(j)||Math.floor(j)!==j)?[new rt(U.key,V,`integer expected, found ${j}`)]:n!=="categorical"&&D==="number"&&h!==void 0&&j<h?[new rt(U.key,V,"stop domain values must appear in ascending order")]:(h=j,n==="categorical"&&j in a?[new rt(U.key,V,"stop domain values must be unique")]:(a[j]=!0,[]))}function F(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:t,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}function cd(e){const t=(e.expressionContext==="property"?Y8:FM)(lc(e.value),e.valueSpec);if(t.result==="error")return t.value.map(o=>new rt(`${e.key}${o.key}`,e.value,o.message));const n=t.value.expression||t.value._styleExpression.expression;if(e.expressionContext==="property"&&e.propertyKey==="text-font"&&!n.outputDefined())return[new rt(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if(e.expressionContext==="property"&&e.propertyType==="layout"&&!Xf(n))return[new rt(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if(e.expressionContext==="filter"&&!Xf(n))return[new rt(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&e.expressionContext.indexOf("cluster")===0){if(!ev(n,["zoom","feature-state"]))return[new rt(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(e.expressionContext==="cluster-initial"&&!Q0(n))return[new rt(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function eO(e){const t=e.value,n=e.key,o=On(t);return o!=="boolean"?[new rt(n,t,`boolean expected, ${o} found`)]:[]}function tO(e){const t=e.key,n=e.value,o=On(n);return o!=="string"?[new rt(t,n,`color expected, ${o} found`)]:br.parse(String(n))?[]:[new rt(t,n,`color expected, "${n}" found`)]}function Yf(e){const t=e.key,n=e.value,o=e.valueSpec,a=[];return Array.isArray(o.values)?o.values.indexOf($r(n))===-1&&a.push(new rt(t,n,`expected one of [${o.values.join(", ")}], ${JSON.stringify(n)} found`)):Object.keys(o.values).indexOf($r(n))===-1&&a.push(new rt(t,n,`expected one of [${Object.keys(o.values).join(", ")}], ${JSON.stringify(n)} found`)),a}function Hw(e){return NM(lc(e.value))?cd(i0({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):VM(e)}function VM(e){const t=e.value,n=e.key;if(On(t)!=="array")return[new rt(n,t,`array expected, ${On(t)} found`)];const o=e.styleSpec;let a,h=[];if(t.length<1)return[new rt(n,t,"filter array must have at least 1 element")];switch(h=h.concat(Yf({key:`${n}[0]`,value:t[0],valueSpec:o.filter_operator,style:e.style,styleSpec:e.styleSpec})),$r(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&$r(t[1])==="$type"&&h.push(new rt(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&h.push(new rt(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(a=On(t[1]),a!=="string"&&h.push(new rt(`${n}[1]`,t[1],`string expected, ${a} found`)));for(let d=2;d<t.length;d++)a=On(t[d]),$r(t[1])==="$type"?h=h.concat(Yf({key:`${n}[${d}]`,value:t[d],valueSpec:o.geometry_type,style:e.style,styleSpec:e.styleSpec})):a!=="string"&&a!=="number"&&a!=="boolean"&&h.push(new rt(`${n}[${d}]`,t[d],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let d=1;d<t.length;d++)h=h.concat(VM({key:`${n}[${d}]`,value:t[d],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=On(t[1]),t.length!==2?h.push(new rt(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):a!=="string"&&h.push(new rt(`${n}[1]`,t[1],`string expected, ${a} found`));break}return h}function WM(e,t){const n=e.key,o=e.validateSpec,a=e.style,h=e.styleSpec,d=e.value,u=e.objectKey,b=h[`${t}_${e.layerType}`];if(!b)return[];const w=u.match(/^(.*)-transition$/);if(t==="paint"&&w&&b[w[1]]&&b[w[1]].transition)return o({key:n,value:d,valueSpec:h.transition,style:a,styleSpec:h});const P=e.valueSpec||b[u];if(!P)return[new rt(n,d,`unknown property "${u}"`)];let E;if(On(d)==="string"&&c0(P)&&!P.tokens&&(E=/^{([^}]+)}$/.exec(d)))return[new rt(n,d,`"${u}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(E[1])} }\`.`)];const I=[];return e.layerType==="symbol"&&(u==="text-field"&&a&&!a.glyphs&&I.push(new rt(n,d,'use of "text-field" requires a style "glyphs" property')),u==="text-font"&&Ww(lc(d))&&$r(d.type)==="identity"&&I.push(new rt(n,d,'"text-font" does not support identity functions'))),I.concat(o({key:e.key,value:d,valueSpec:P,style:a,styleSpec:h,expressionContext:"property",propertyType:t,propertyKey:u}))}function qM(e){return WM(e,"paint")}function GM(e){return WM(e,"layout")}function HM(e){let t=[];const n=e.value,o=e.key,a=e.style,h=e.styleSpec;!n.type&&!n.ref&&t.push(new rt(o,n,'either "type" or "ref" is required'));let d=$r(n.type);const u=$r(n.ref);if(n.id){const b=$r(n.id);for(let w=0;w<e.arrayIndex;w++){const P=a.layers[w];$r(P.id)===b&&t.push(new rt(o,n.id,`duplicate layer id "${n.id}", previously used at line ${P.id.__line__}`))}}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(w=>{w in n&&t.push(new rt(o,n[w],`"${w}" is prohibited for ref layers`))});let b;a.layers.forEach(w=>{$r(w.id)===u&&(b=w)}),b?b.ref?t.push(new rt(o,n.ref,"ref cannot reference another ref layer")):d=$r(b.type):t.push(new rt(o,n.ref,`ref layer "${u}" not found`))}else if(d!=="background")if(!n.source)t.push(new rt(o,n,'missing required property "source"'));else{const b=a.sources&&a.sources[n.source],w=b&&$r(b.type);b?w==="vector"&&d==="raster"?t.push(new rt(o,n.source,`layer "${n.id}" requires a raster source`)):w!=="raster-dem"&&d==="hillshade"?t.push(new rt(o,n.source,`layer "${n.id}" requires a raster-dem source`)):w==="raster"&&d!=="raster"?t.push(new rt(o,n.source,`layer "${n.id}" requires a vector source`)):w==="vector"&&!n["source-layer"]?t.push(new rt(o,n,`layer "${n.id}" must specify a "source-layer"`)):w==="raster-dem"&&d!=="hillshade"?t.push(new rt(o,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):d==="line"&&n.paint&&n.paint["line-gradient"]&&(w!=="geojson"||!b.lineMetrics)&&t.push(new rt(o,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new rt(o,n.source,`source "${n.source}" not found`))}return t=t.concat(ps({key:o,value:n,valueSpec:h.layer,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,objectElementValidators:{"*"(){return[]},type(){return e.validateSpec({key:`${o}.type`,value:n.type,valueSpec:h.layer.type,style:e.style,styleSpec:e.styleSpec,validateSpec:e.validateSpec,object:n,objectKey:"type"})},filter:Hw,layout(b){return ps({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return GM(i0({layerType:d},w))}}})},paint(b){return ps({layer:n,key:b.key,value:b.value,style:b.style,styleSpec:b.styleSpec,validateSpec:b.validateSpec,objectElementValidators:{"*"(w){return qM(i0({layerType:d},w))}}})}}})),t}function uc(e){const t=e.value,n=e.key,o=On(t);return o!=="string"?[new rt(n,t,`string expected, ${o} found`)]:[]}function nO(e){var t;const n=(t=e.sourceName)!==null&&t!==void 0?t:"",o=e.value,a=e.styleSpec,h=a.source_raster_dem,d=e.style;let u=[];const b=On(o);if(o===void 0)return u;if(b!=="object")return u.push(new rt("source_raster_dem",o,`object expected, ${b} found`)),u;const w=$r(o.encoding)==="custom",P=["redFactor","greenFactor","blueFactor","baseShift"],E=e.value.encoding?`"${e.value.encoding}"`:"Default";for(const I in o)!w&&P.includes(I)?u.push(new rt(I,o[I],`In "${n}": "${I}" is only valid when "encoding" is set to "custom". ${E} encoding found`)):h[I]?u=u.concat(e.validateSpec({key:I,value:o[I],valueSpec:h[I],validateSpec:e.validateSpec,style:d,styleSpec:a})):u.push(new rt(I,o[I],`unknown property "${I}"`));return u}const uT={promoteId:rO};function ZM(e){const t=e.value,n=e.key,o=e.styleSpec,a=e.style,h=e.validateSpec;if(!t.type)return[new rt(n,t,'"type" is required')];const d=$r(t.type);let u;switch(d){case"vector":case"raster":return u=ps({key:n,value:t,valueSpec:o[`source_${d.replace("-","_")}`],style:e.style,styleSpec:o,objectElementValidators:uT,validateSpec:h}),u;case"raster-dem":return u=nO({sourceName:n,value:t,style:e.style,styleSpec:o,validateSpec:h}),u;case"geojson":if(u=ps({key:n,value:t,valueSpec:o.source_geojson,style:a,styleSpec:o,validateSpec:h,objectElementValidators:uT}),t.cluster)for(const b in t.clusterProperties){const[w,P]=t.clusterProperties[b],E=typeof w=="string"?[w,["accumulated"],["get",b]]:w;u.push(...cd({key:`${n}.${b}.map`,value:P,validateSpec:h,expressionContext:"cluster-map"})),u.push(...cd({key:`${n}.${b}.reduce`,value:E,validateSpec:h,expressionContext:"cluster-reduce"}))}return u;case"video":return ps({key:n,value:t,valueSpec:o.source_video,style:a,validateSpec:h,styleSpec:o});case"image":return ps({key:n,value:t,valueSpec:o.source_image,style:a,validateSpec:h,styleSpec:o});case"canvas":return[new rt(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Yf({key:`${n}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:a,validateSpec:h,styleSpec:o})}}function rO({key:e,value:t}){if(On(t)==="string")return uc({key:e,value:t});{const n=[];for(const o in t)n.push(...uc({key:`${e}.${o}`,value:t[o]}));return n}}function KM(e){const t=e.value,n=e.styleSpec,o=n.light,a=e.style;let h=[];const d=On(t);if(t===void 0)return h;if(d!=="object")return h=h.concat([new rt("light",t,`object expected, ${d} found`)]),h;for(const u in t){const b=u.match(/^(.*)-transition$/);b&&o[b[1]]&&o[b[1]].transition?h=h.concat(e.validateSpec({key:u,value:t[u],valueSpec:n.transition,validateSpec:e.validateSpec,style:a,styleSpec:n})):o[u]?h=h.concat(e.validateSpec({key:u,value:t[u],valueSpec:o[u],validateSpec:e.validateSpec,style:a,styleSpec:n})):h=h.concat([new rt(u,t[u],`unknown property "${u}"`)])}return h}function XM(e){const t=e.value,n=e.styleSpec,o=n.sky,a=e.style,h=On(t);if(t===void 0)return[];if(h!=="object")return[new rt("sky",t,`object expected, ${h} found`)];let d=[];for(const u in t)o[u]?d=d.concat(e.validateSpec({key:u,value:t[u],valueSpec:o[u],style:a,styleSpec:n})):d=d.concat([new rt(u,t[u],`unknown property "${u}"`)]);return d}function YM(e){const t=e.value,n=e.styleSpec,o=n.terrain,a=e.style;let h=[];const d=On(t);if(t===void 0)return h;if(d!=="object")return h=h.concat([new rt("terrain",t,`object expected, ${d} found`)]),h;for(const u in t)o[u]?h=h.concat(e.validateSpec({key:u,value:t[u],valueSpec:o[u],validateSpec:e.validateSpec,style:a,styleSpec:n})):h=h.concat([new rt(u,t[u],`unknown property "${u}"`)]);return h}function iO(e){return uc(e).length===0?[]:cd(e)}function oO(e){return uc(e).length===0?[]:cd(e)}function sO(e){const t=e.key,n=e.value;if(On(n)==="array"){if(n.length<1||n.length>4)return[new rt(t,n,`padding requires 1 to 4 values; ${n.length} values found`)];const o={type:"number"};let a=[];for(let h=0;h<n.length;h++)a=a.concat(e.validateSpec({key:`${t}[${h}]`,value:n[h],validateSpec:e.validateSpec,valueSpec:o}));return a}else return Gw({key:t,value:n,valueSpec:{}})}function aO(e){const t=e.key,n=e.value,o=On(n),a=e.styleSpec;if(o!=="array"||n.length<1||n.length%2!==0)return[new rt(t,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let h=[];for(let d=0;d<n.length;d+=2)h=h.concat(Yf({key:`${t}[${d}]`,value:n[d],valueSpec:a.layout_symbol["text-anchor"]})),h=h.concat(qw({key:`${t}[${d+1}]`,value:n[d+1],valueSpec:{length:2,value:"number"},validateSpec:e.validateSpec,style:e.style,styleSpec:a}));return h}function JM(e){let t=[];const n=e.value,o=e.key;if(Array.isArray(n)){const a=[],h=[];for(const d in n){n[d].id&&a.includes(n[d].id)&&t.push(new rt(o,n,`all the sprites' ids must be unique, but ${n[d].id} is duplicated`)),a.push(n[d].id),n[d].url&&h.includes(n[d].url)&&t.push(new rt(o,n,`all the sprites' URLs must be unique, but ${n[d].url} is duplicated`)),h.push(n[d].url);const u={id:{type:"string",required:!0},url:{type:"string",required:!0}};t=t.concat(ps({key:`${o}[${d}]`,value:n[d],valueSpec:u,validateSpec:e.validateSpec}))}return t}else return uc({key:o,value:n})}function lO(e){const t=e.value,n=e.styleSpec,o=n.projection,a=e.style,h=On(t);if(t===void 0)return[];if(h!=="object")return[new rt("projection",t,`object expected, ${h} found`)];let d=[];for(const u in t)o[u]?d=d.concat(e.validateSpec({key:u,value:t[u],valueSpec:o[u],style:a,styleSpec:n})):d=d.concat([new rt(u,t[u],`unknown property "${u}"`)]);return d}const cT={"*"(){return[]},array:qw,boolean:eO,number:Gw,color:tO,constants:jM,enum:Yf,filter:Hw,function:UM,layer:HM,object:ps,source:ZM,light:KM,sky:XM,terrain:YM,projection:lO,string:uc,formatted:iO,resolvedImage:oO,padding:sO,variableAnchorOffsetCollection:aO,sprite:JM};function wf(e){const t=e.value,n=e.valueSpec,o=e.styleSpec;return e.validateSpec=wf,n.expression&&Ww($r(t))?UM(e):n.expression&&BM(lc(t))?cd(e):n.type&&cT[n.type]?cT[n.type](e):ps(i0({},e,{valueSpec:n.type?o[n.type]:n}))}function QM(e){const t=e.value,n=e.key,o=uc(e);return o.length||(t.indexOf("{fontstack}")===-1&&o.push(new rt(n,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&o.push(new rt(n,t,'"glyphs" url must include a "{range}" token'))),o}function _s(e,t=M$){let n=[];return n=n.concat(wf({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,validateSpec:wf,objectElementValidators:{glyphs:QM,"*"(){return[]}}})),e.constants&&(n=n.concat(jM({key:"constants",value:e.constants,style:e,styleSpec:t,validateSpec:wf}))),eA(n)}_s.source=da(ha(ZM));_s.sprite=da(ha(JM));_s.glyphs=da(ha(QM));_s.light=da(ha(KM));_s.sky=da(ha(XM));_s.terrain=da(ha(YM));_s.layer=da(ha(HM));_s.filter=da(ha(Hw));_s.paintProperty=da(ha(qM));_s.layoutProperty=da(ha(GM));function ha(e){return function(t){return e({...t,validateSpec:wf})}}function eA(e){return[].concat(e).sort((t,n)=>t.line-n.line)}function da(e){return function(...t){return eA(e.apply(this,t))}}function hT(e){if(!e)return{style:Gh[xf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0};if(typeof e=="string"){const t=cO(e);return t.isValidStyle?{style:t.styleObject,requiresUrlMonitoring:!1,isFallback:!1}:t.isValidJSON?{style:Gh[xf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}:e.startsWith("http")?{style:e,requiresUrlMonitoring:!0,isFallback:!1}:e.toLowerCase().includes(".json")?{style:uO(e),requiresUrlMonitoring:!0,isFallback:!1}:{style:bP(e),requiresUrlMonitoring:!0,isFallback:!1}}return e instanceof wP?{style:e.getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:e instanceof SP?{style:e.getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!1}:_s(e).length===0?{style:e,requiresUrlMonitoring:!1,isFallback:!1}:{style:Gh[xf[0].referenceStyleID].getDefaultVariant().getExpandedStyleURL(),requiresUrlMonitoring:!1,isFallback:!0}}function uO(e){try{return new URL(e).href}catch{}return new URL(e,location.origin).href}function cO(e){try{const t=JSON.parse(e),n=_s(t);return{isValidJSON:!0,isValidStyle:n.length===0,styleObject:n.length===0?t:null}}catch{return{isValidJSON:!1,isValidStyle:!1,styleObject:null}}}class hO{constructor(){$n(this,"_map"),$n(this,"_container"),$n(this,"_terrainButton"),DD(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=Kh("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Kh("button","maplibregl-ctrl-terrain",this._container),Kh("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){ZP(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}}class dO extends FD{constructor(t={}){super({showCompass:t.showCompass??!0,showZoom:t.showZoom??!0,visualizePitch:t.visualizePitch??!0}),$n(this,"_rotateCompassArrow",()=>{const n=this.options.visualizePitch?`scale(${Math.min(1.5,1/Math.cos(this._map.transform.pitch*(Math.PI/180))**.5)}) rotateX(${Math.min(70,this._map.transform.pitch)}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=n}),this._compass&&(this._compass.removeEventListener("click",this._compass.clickFunction),this._compass.addEventListener("click",n=>{this._map.getPitch()===0?this._map.easeTo({pitch:Math.min(this._map.getMaxPitch(),80)}):this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}))}_createButton(t,n){const o=super._createButton(t,n);return o.clickFunction=n,o}}const dT=Et.Marker,pT=Et.LngLat,pO=Et.LngLatBounds;class fO extends ND{constructor(){super(...arguments),$n(this,"lastUpdatedCenter",new pT(0,0)),$n(this,"_updateCamera",t=>{var n,o;const a=new pT(t.coords.longitude,t.coords.latitude),h=t.coords.accuracy,d={bearing:this._map.getBearing(),...this.options.fitBoundsOptions,linear:!0},u=this._map.getZoom();u>(((o=(n=this.options)==null?void 0:n.fitBoundsOptions)==null?void 0:o.maxZoom)??30)&&(d.zoom=u),this._map.fitBounds(pO.fromLngLat(a,h),d,{geolocateSource:!0});let b=!1;const w=()=>{b=!0};this._map.once("click",w),this._map.once("dblclick",w),this._map.once("dragstart",w),this._map.once("mousedown",w),this._map.once("touchstart",w),this._map.once("wheel",w),this._map.once("moveend",()=>{this._map.off("click",w),this._map.off("dblclick",w),this._map.off("dragstart",w),this._map.off("mousedown",w),this._map.off("touchstart",w),this._map.off("wheel",w),!b&&(this.lastUpdatedCenter=this._map.getCenter())})}),$n(this,"_finishSetupUI",t=>{if(this._map){if(t===!1){const n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}else{const n=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=n,this._geolocateButton.setAttribute("aria-label",n)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Kh("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new dT({element:this._dotElement}),this._circleElement=Kh("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new dT({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("move",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("moveend",n=>{const o=n.originalEvent&&n.originalEvent.type==="resize",a=this.lastUpdatedCenter.distanceTo(this._map.getCenter());!n.geolocateSource&&this._watchState==="ACTIVE_LOCK"&&!o&&a>1&&(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new Event("trackuserlocationend")))})}}),$n(this,"_onZoom",()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()})}_updateCircleRadius(){if(this._watchState!=="BACKGROUND"&&this._watchState!=="ACTIVE_LOCK")return;const t=[this._lastKnownPosition.coords.longitude,this._lastKnownPosition.coords.latitude],n=this._map.project(t),o=this._map.unproject([n.x,n.y]),a=this._map.unproject([n.x+20,n.y]),h=o.distanceTo(a)/20,d=Math.ceil(2*this._accuracy/h);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}}var Oo,Qs,Fu,Nu,rs,wy,Ji,tA,os,nA;class F_{constructor(t,n){Ru(this,Ji),Ru(this,Oo),$n(this,"map"),Ru(this,Qs),Ru(this,Fu),Ru(this,Nu),Ru(this,rs,!1),Ru(this,wy),t.style!==void 0&&vh(this,rs,!0),vh(this,Oo,{zoomAdjust:-4,position:"top-right",...n,forceNoAttributionControl:!0,attributionControl:!1,navigationControl:!1,geolocateControl:!1,maptilerLogo:!1,minimap:!1,hash:!1,pitchAdjust:!1,...t,containerStyle:{border:"1px solid #000",width:"400px",height:"300px",...t.containerStyle??{}}}),t.lockZoom!==void 0&&(vn(this,Oo).minZoom=t.lockZoom,vn(this,Oo).maxZoom=t.lockZoom)}setStyle(t,n){vn(this,rs)||this.map.setStyle(t,n),$o(this,Ji,os).call(this)}addLayer(t,n){return vn(this,rs)||this.map.addLayer(t,n),$o(this,Ji,os).call(this),this.map}moveLayer(t,n){return vn(this,rs)||this.map.moveLayer(t,n),$o(this,Ji,os).call(this),this.map}removeLayer(t){return vn(this,rs)||this.map.removeLayer(t),$o(this,Ji,os).call(this),this}setLayerZoomRange(t,n,o){return vn(this,rs)||this.map.setLayerZoomRange(t,n,o),$o(this,Ji,os).call(this),this}setFilter(t,n,o){return vn(this,rs)||this.map.setFilter(t,n,o),$o(this,Ji,os).call(this),this}setPaintProperty(t,n,o,a){return vn(this,rs)||this.map.setPaintProperty(t,n,o,a),$o(this,Ji,os).call(this),this}setLayoutProperty(t,n,o,a){return vn(this,rs)||this.map.setLayoutProperty(t,n,o,a),$o(this,Ji,os).call(this),this}setGlyphs(t,n){return vn(this,rs)||this.map.setGlyphs(t,n),$o(this,Ji,os).call(this),this}onAdd(t){vh(this,Qs,t),vh(this,Fu,Kh("div","maplibregl-ctrl maplibregl-ctrl-group"));for(const[n,o]of Object.entries(vn(this,Oo).containerStyle))vn(this,Fu).style.setProperty(n,o);return vn(this,Oo).container=vn(this,Fu),vn(this,Oo).zoom=t.getZoom()+vn(this,Oo).zoomAdjust,this.map=new rA(vn(this,Oo)),this.map.once("style.load",()=>{this.map.resize()}),this.map.once("load",()=>{$o(this,Ji,tA).call(this,vn(this,Oo).parentRect),vh(this,wy,$o(this,Ji,nA).call(this))}),vn(this,Fu)}onRemove(){var t;(t=vn(this,wy))==null||t.call(this),ZP(vn(this,Fu))}}Oo=new WeakMap,Qs=new WeakMap,Fu=new WeakMap,Nu=new WeakMap,rs=new WeakMap,wy=new WeakMap,Ji=new WeakSet,tA=function(e){e===void 0||e.linePaint===void 0&&e.fillPaint===void 0||(vh(this,Nu,{type:"Feature",properties:{name:"parentRect"},geometry:{type:"Polygon",coordinates:[[[],[],[],[],[]]]}}),this.map.addSource("parentRect",{type:"geojson",data:vn(this,Nu)}),(e.lineLayout!==void 0||e.linePaint!==void 0)&&this.map.addLayer({id:"parentRectOutline",type:"line",source:"parentRect",layout:{...e.lineLayout},paint:{"line-color":"#FFF","line-width":1,"line-opacity":.85,...e.linePaint}}),e.fillPaint!==void 0&&this.map.addLayer({id:"parentRectFill",type:"fill",source:"parentRect",layout:{},paint:{"fill-color":"#08F","fill-opacity":.135,...e.fillPaint}}),$o(this,Ji,os).call(this))},os=function(){if(vn(this,Nu)===void 0)return;const{devicePixelRatio:e}=window,t=vn(this,Qs).getCanvas(),n=t.width/e,o=t.height/e,a=vn(this,Qs).unproject.bind(vn(this,Qs)),h=a([0,0]),d=a([n,0]),u=a([0,o]),b=a([n,o]);vn(this,Nu).geometry.coordinates=[[u.toArray(),b.toArray(),d.toArray(),h.toArray(),u.toArray()]],this.map.getSource("parentRect").setData(vn(this,Nu))},nA=function(){const{pitchAdjust:e}=vn(this,Oo),t=()=>{h("parent")},n=()=>{h("minimap")},o=()=>{vn(this,Qs).on("move",t),this.map.on("move",n)},a=()=>{vn(this,Qs).off("move",t),this.map.off("move",n)},h=d=>{a();const u=d==="parent"?vn(this,Qs):this.map,b=d==="parent"?this.map:vn(this,Qs),w=u.getCenter(),P=u.getZoom()+vn(this,Oo).zoomAdjust*(d==="parent"?1:-1),E=u.getBearing(),I=u.getPitch();b.jumpTo({center:w,zoom:P,bearing:E,pitch:e?I:0}),$o(this,Ji,os).call(this),o()};return o(),()=>{a()}};const mO={POINT:"POINT",COUNTRY:"COUNTRY"};class rA extends Et.Map{constructor(t){OD(t.container),t.apiKey&&(Qi.apiKey=t.apiKey);const{style:n,requiresUrlMonitoring:o,isFallback:a}=hT(t.style);a&&console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style."),Qi.apiKey||console.warn("MapTiler Cloud API key is not set. Visit https://maptiler.com and try Cloud for free!");const h=location.hash;let d={compact:!1};t.customAttribution?d.customAttribution=t.customAttribution:t.attributionControl&&typeof t.attributionControl=="object"&&(d={...d,...t.attributionControl});const u={...t,style:n,maplibreLogo:!1,transformRequest:Wk(t.transformRequest),attributionControl:t.forceNoAttributionControl===!0?!1:d};delete u.style,super(u),$n(this,"isTerrainEnabled",!1),$n(this,"terrainExaggeration",1),$n(this,"primaryLanguage"),$n(this,"terrainGrowing",!1),$n(this,"terrainFlattening",!1),$n(this,"minimap"),$n(this,"forceLanguageUpdate"),$n(this,"languageAlwaysBeenStyle"),$n(this,"isReady",!1),$n(this,"terrainAnimationDuration",1e3),$n(this,"monitoredStyleUrls"),$n(this,"styleInProcess",!1),this.setStyle(n),o&&this.monitorStyleUrl(n);const b=()=>{let R="The distant style could not be loaded.";this.getStyle()?R+="Leaving the style as is.":(this.setStyle(Gh.STREETS),R+=`Loading default MapTiler Cloud style "${Gh.STREETS.getDefaultVariant().getId()}" as a fallback.`),console.warn(R)};if(this.on("style.load",()=>{this.styleInProcess=!1}),this.on("error",R=>{if(R.error instanceof Et.AJAXError){const F=R.error.url,U=new URL(F);U.search="";const K=U.href;this.monitoredStyleUrls.has(K)&&(this.monitoredStyleUrls.delete(K),b());return}if(this.styleInProcess)return b()}),Qi.caching&&!tb&&console.warn("The cache API is only available in secure contexts. More info at https://developer.mozilla.org/en-US/docs/Web/API/Cache"),Qi.caching&&tb&&zD(),typeof t.language>"u")this.primaryLanguage=Qi.primaryLanguage;else{const R=Pk(t.language,bn);this.primaryLanguage=R??Qi.primaryLanguage}this.forceLanguageUpdate=!(this.primaryLanguage===bn.STYLE||this.primaryLanguage===bn.STYLE_LOCK),this.languageAlwaysBeenStyle=this.primaryLanguage===bn.STYLE,this.terrainExaggeration=t.terrainExaggeration??this.terrainExaggeration,this.once("styledata",async()=>{if(!t.geolocate||t.center||t.hash&&h)return;try{if(t.geolocate===mO.COUNTRY){await this.fitToIpBounds();return}}catch(F){console.warn(F.message)}let R;try{await this.centerOnIpPoint(t.zoom),R=this.getCameraHash()}catch(F){console.warn(F.message)}(await navigator.permissions.query({name:"geolocation"})).state==="granted"&&navigator.geolocation.getCurrentPosition(F=>{R===this.getCameraHash()&&(this.terrain?this.easeTo({center:[F.coords.longitude,F.coords.latitude],zoom:t.zoom||12,duration:2e3}):this.once("terrain",()=>{this.easeTo({center:[F.coords.longitude,F.coords.latitude],zoom:t.zoom||12,duration:2e3})}))},null,{maximumAge:24*3600*1e3,timeout:5e3,enableHighAccuracy:!1})}),this.on("styledata",()=>{this.setPrimaryLanguage(this.primaryLanguage)}),this.on("styledata",()=>{this.getTerrain()===null&&this.isTerrainEnabled&&this.enableTerrain(this.terrainExaggeration)}),this.once("load",async()=>{let R={logo:null};try{const F=Object.keys(this.style.sourceCaches).map(K=>this.getSource(K)).filter(K=>K&&"url"in K&&typeof K.url=="string"&&(K==null?void 0:K.url.includes("tiles.json"))),U=new URL(F[0].url);U.searchParams.has("key")||U.searchParams.append("key",Qi.apiKey),R=await(await fetch(U.href)).json()}catch{}if(t.forceNoAttributionControl!==!0)if("logo"in R&&R.logo){const F=R.logo;this.addControl(new qk({logoURL:F}),t.logoPosition)}else t.maptilerLogo&&this.addControl(new qk,t.logoPosition);if(t.scaleControl){const F=t.scaleControl===!0||t.scaleControl===void 0?"bottom-right":t.scaleControl,U=new UD({unit:Qi.unit});this.addControl(U,F),Qi.on("unit",K=>{U.setUnit(K)})}if(t.navigationControl!==!1){const F=t.navigationControl===!0||t.navigationControl===void 0?"top-right":t.navigationControl;this.addControl(new dO,F)}if(t.geolocateControl!==!1){const F=t.geolocateControl===!0||t.geolocateControl===void 0?"top-right":t.geolocateControl;this.addControl(new fO({positionOptions:{enableHighAccuracy:!0,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!0,showAccuracyCircle:!0,showUserLocation:!0}),F)}if(t.terrainControl){const F=t.terrainControl===!0||t.terrainControl===void 0?"top-right":t.terrainControl;this.addControl(new hO,F)}if(t.fullscreenControl){const F=t.fullscreenControl===!0||t.fullscreenControl===void 0?"top-right":t.fullscreenControl;this.addControl(new VD({}),F)}this.isReady=!0,this.fire("ready",{target:this})});let w=!1,P=!1,E;this.once("ready",()=>{w=!0,P&&this.fire("loadWithTerrain",E)}),this.once("style.load",()=>{const{minimap:R}=t;if(typeof R=="object"){const{zoom:F,center:U,style:K,language:D,apiKey:j,maptilerLogo:V,antialias:Y,refreshExpiredTiles:ce,maxBounds:de,scrollZoom:le,minZoom:ge,maxZoom:Ae,boxZoom:H,locale:Ee,fadeDuration:je,crossSourceCollisions:$e,clickTolerance:Le,bounds:De,fitBoundsOptions:We,pixelRatio:ut,validateStyle:Be}=t;this.minimap=new F_(R,{zoom:F,center:U,style:K,language:D,apiKey:j,container:"null",maptilerLogo:V,antialias:Y,refreshExpiredTiles:ce,maxBounds:de,scrollZoom:le,minZoom:ge,maxZoom:Ae,boxZoom:H,locale:Ee,fadeDuration:je,crossSourceCollisions:$e,clickTolerance:Le,bounds:De,fitBoundsOptions:We,pixelRatio:ut,validateStyle:Be}),this.addControl(this.minimap,R.position??"bottom-left")}else R===!0?(this.minimap=new F_({},t),this.addControl(this.minimap,"bottom-left")):R!==void 0&&R!==!1&&(this.minimap=new F_({},t),this.addControl(this.minimap,R))});const I=R=>{R.terrain&&(P=!0,E={type:"loadWithTerrain",target:this,terrain:R.terrain},this.off("terrain",I),w&&this.fire("loadWithTerrain",E))};this.on("terrain",I),t.terrain&&this.enableTerrain(t.terrainExaggeration??this.terrainExaggeration),this.once("load",()=>{this.getCanvas().addEventListener("webglcontextlost",R=>{console.warn(R),BD(t.container),this.fire("webglContextLost",{error:R})})})}setTerrainAnimationDuration(t){this.terrainAnimationDuration=Math.max(t,0)}async onLoadAsync(){return new Promise(t=>{if(this.loaded())return t(this);this.once("load",()=>{t(this)})})}async onReadyAsync(){return new Promise(t=>{if(this.isReady)return t(this);this.once("ready",()=>{t(this)})})}async onLoadWithTerrainAsync(){return new Promise(t=>{if(this.isReady&&this.terrain)return t(this);this.once("loadWithTerrain",()=>{t(this)})})}monitorStyleUrl(t){typeof this.monitoredStyleUrls>"u"&&(this.monitoredStyleUrls=new Set);const n=new URL(t);n.search="",this.monitoredStyleUrls.add(n.href)}setStyle(t,n){var o;(o=this.minimap)==null||o.setStyle(t),this.forceLanguageUpdate=!0,this.once("idle",()=>{this.forceLanguageUpdate=!1});const a=hT(t);if(a.requiresUrlMonitoring&&this.monitorStyleUrl(a.style),a.isFallback){if(this.getStyle())return console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Keeping the curent style instead."),this;console.warn("Invalid style. A style must be a valid URL to a style.json, a JSON string representing a valid StyleSpecification or a valid StyleSpecification object. Fallback to default MapTiler style.")}return this.styleInProcess=!0,super.setStyle(a.style,n),this}addLayer(t,n){var o;return(o=this.minimap)==null||o.addLayer(t,n),super.addLayer(t,n)}moveLayer(t,n){var o;return(o=this.minimap)==null||o.moveLayer(t,n),super.moveLayer(t,n)}removeLayer(t){var n;return(n=this.minimap)==null||n.removeLayer(t),super.removeLayer(t)}setLayerZoomRange(t,n,o){var a;return(a=this.minimap)==null||a.setLayerZoomRange(t,n,o),super.setLayerZoomRange(t,n,o)}setFilter(t,n,o){var a;return(a=this.minimap)==null||a.setFilter(t,n,o),super.setFilter(t,n,o)}setPaintProperty(t,n,o,a){var h;return(h=this.minimap)==null||h.setPaintProperty(t,n,o,a),super.setPaintProperty(t,n,o,a)}setLayoutProperty(t,n,o,a){var h;return(h=this.minimap)==null||h.setLayoutProperty(t,n,o,a),super.setLayoutProperty(t,n,o,a)}setGlyphs(t,n){var o;return(o=this.minimap)==null||o.setGlyphs(t,n),super.setGlyphs(t,n)}getStyleLanguage(){return!this.style.stylesheet.metadata||typeof this.style.stylesheet.metadata!="object"?null:"maptiler:language"in this.style.stylesheet.metadata&&typeof this.style.stylesheet.metadata["maptiler:language"]=="string"?Xx(this.style.stylesheet.metadata["maptiler:language"]):null}setLanguage(t){var n,o;(o=(n=this.minimap)==null?void 0:n.map)==null||o.setLanguage(t),this.onStyleReady(()=>{this.setPrimaryLanguage(t)})}setPrimaryLanguage(t){const n=this.getStyleLanguage(),o=Pk(t,bn);if(!o){console.warn(`The language "${o}" is not supported.`);return}if(!(o.flag===bn.STYLE.flag&&n&&(n.flag===bn.AUTO.flag||n.flag===bn.VISITOR.flag))&&(o.flag!==bn.STYLE.flag&&(this.languageAlwaysBeenStyle=!1),this.languageAlwaysBeenStyle||this.primaryLanguage===o&&!this.forceLanguageUpdate))return;if(this.primaryLanguage.flag===bn.STYLE_LOCK.flag){console.warn("The language cannot be changed because this map has been instantiated with the STYLE_LOCK language flag.");return}this.primaryLanguage=o;let a=o;if(o.flag===bn.STYLE.flag){if(!n){console.warn("The style has no default languages or has an invalid one.");return}a=n}let h=bn.LOCAL.flag,d=`{${h}}`;a.flag===bn.VISITOR.flag?(h=Nk().flag,d=["case",["all",["has",h],["has",bn.LOCAL.flag]],["case",["==",["get",h],["get",bn.LOCAL.flag]],["get",bn.LOCAL.flag],["format",["get",h],{"font-scale":.8},`
`,["get",bn.LOCAL.flag],{"font-scale":1.1}]],["get",bn.LOCAL.flag]]):a.flag===bn.VISITOR_ENGLISH.flag?(h=bn.ENGLISH.flag,d=["case",["all",["has",h],["has",bn.LOCAL.flag]],["case",["==",["get",h],["get",bn.LOCAL.flag]],["get",bn.LOCAL.flag],["format",["get",h],{"font-scale":.8},`
`,["get",bn.LOCAL.flag],{"font-scale":1.1}]],["get",bn.LOCAL.flag]]):a.flag===bn.AUTO.flag?(h=Nk().flag,d=["case",["has",h],["get",h],["get",bn.LOCAL.flag]]):a===bn.LOCAL?(h=bn.LOCAL.flag,d=`{${h}}`):(h=a.flag,d=["case",["has",h],["get",h],["get",bn.LOCAL.flag]]);const{layers:u}=this.getStyle();for(const b of u){if(b.type!=="symbol")continue;const w=b,P=this.getSource(w.source);if(!P||!("url"in P&&typeof P.url=="string")||new URL(P.url).host!==go.maptilerApiHost)continue;const{id:E,layout:I}=w;if(!I||!("text-field"in I))continue;const R=this.getLayoutProperty(E,"text-field");typeof R=="string"&&(R.toLowerCase().includes("ref")||R.toLowerCase().includes("housenumber"))||this.setLayoutProperty(E,"text-field",d)}}getPrimaryLanguage(){return this.primaryLanguage}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(t){if(!this.terrain)return;const n=performance.now(),o=this.terrain.exaggeration,a=t-o,h=()=>{if(!this.terrain||this.terrainFlattening)return;const d=(performance.now()-n)/this.terrainAnimationDuration;if(d<.99){const u=1-(1-d)**4,b=o+u*a;this.terrain.exaggeration=b,requestAnimationFrame(h)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=t,this.fire("terrainAnimationStop",{terrain:this.terrain});this._elevationFreeze=!1,this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(h)}enableTerrain(t=this.terrainExaggeration){if(t<0){console.warn("Terrain exaggeration cannot be negative.");return}const n=async a=>{!this.terrain||a.type!=="data"||a.dataType!=="source"||!("source"in a)||a.sourceId!=="maptiler-terrain"||a.source.type!=="raster-dem"||a.isSourceLoaded&&(this.off("data",n),this.growTerrain(t))},o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=t,this.on("data",n),this.addSource(go.terrainSourceId,{type:"raster-dem",url:go.terrainSourceURL}),this.setTerrain({source:go.terrainSourceId,exaggeration:0})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(t);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource(go.terrainSourceId)||o()})}disableTerrain(){if(!this.terrain)return;this.isTerrainEnabled=!1;const t=performance.now(),n=this.terrain.exaggeration,o=()=>{if(!this.terrain||this.terrainGrowing)return;const a=(performance.now()-t)/this.terrainAnimationDuration;if(this._elevationFreeze=!1,a<.99){const h=(1-a)**4,d=n*h;this.terrain.exaggeration=d,requestAnimationFrame(o)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(go.terrainSourceId)&&this.removeSource(go.terrainSourceId),this.fire("terrainAnimationStop",{terrain:null});this.triggerRepaint()};!this.terrainGrowing&&!this.terrainFlattening&&this.fire("terrainAnimationStart",{terrain:this.terrain}),this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(o)}setTerrainExaggeration(t,n=!0){!n&&this.terrain?(this.terrainExaggeration=t,this.terrain.exaggeration=t,this.triggerRepaint()):this.enableTerrain(t)}onStyleReady(t){this.isStyleLoaded()?t():this.once("styledata",()=>{t()})}async fitToIpBounds(){const t=await Ak.info();this.fitBounds(t.country_bounds,{duration:0,padding:100})}async centerOnIpPoint(t){const n=await Ak.info();this.jumpTo({center:[(n==null?void 0:n.longitude)??0,(n==null?void 0:n.latitude)??0],zoom:t||11})}getCameraHash(){const t=new Float32Array(5),n=this.getCenter();return t[0]=n.lng,t[1]=n.lat,t[2]=this.getZoom(),t[3]=this.getPitch(),t[4]=this.getBearing(),CD.fromUint8Array(new Uint8Array(t.buffer))}getSdkConfig(){return Qi}getMaptilerSessionId(){return GP}setTransformRequest(t){return super.setTransformRequest(Wk(t)),this}}function Yg(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function gO(e){return`#${Yg(e[0])}${Yg(e[1])}${Yg(e[2])}${e.length===4?Yg(e[3]):""}`}class Dt extends Array{constructor(t={}){super(),$n(this,"min",0),$n(this,"max",1),"min"in t&&(this.min=t.min),"max"in t&&(this.max=t.max),"stops"in t&&this.setStops(t.stops,{clone:!1})}static fromArrayDefinition(t){return new Dt({stops:t.map(n=>({value:n[0],color:n[1]}))})}setStops(t,n={clone:!0}){const o=n.clone?this.clone():this;o.length=0;let a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(let d=0;d<t.length;d+=1)a=Math.min(a,t[d].value),h=Math.max(h,t[d].value),o.push({value:t[d].value,color:t[d].color.slice()});return o.sort((d,u)=>d.value<u.value?-1:1),this.min=a,this.max=h,o}scale(t,n,o={clone:!0}){const a=o.clone,h=this[0].value,d=this.at(-1).value-h,u=n-t,b=[];for(let w=0;w<this.length;w+=1){const P=(this[w].value-h)/d*u+t;a?b.push({value:P,color:this[w].color.slice()}):this[w].value=P}return a?new Dt({stops:b}):this}at(t){return t<0?this[this.length+t]:this[t]}clone(){return new Dt({stops:this.getRawColorStops()})}getRawColorStops(){const t=[];for(let n=0;n<this.length;n+=1)t.push({value:this[n].value,color:this[n].color});return t}reverse(t={clone:!0}){const n=t.clone?this.clone():this;for(let o=0;o<~~(n.length/2);o+=1){const a=n[o].color;n[o].color=n.at(-(o+1)).color,n.at(-(o+1)).color=a}return n}getBounds(){return{min:this.min,max:this.max}}getColor(t,n={smooth:!0}){if(t<=this[0].value)return this[0].color;if(t>=this.at(-1).value)return this.at(-1).color;for(let o=0;o<this.length-1;o+=1){if(t>this[o+1].value)continue;const a=this[o].color;if(!n.smooth)return a.slice();const h=this[o].value,d=this[o+1].value,u=this[o+1].color,b=(d-t)/(d-h);return a.map((w,P)=>Math.round(w*b+u[P]*(1-b)))}return[0,0,0]}getColorHex(t,n={smooth:!0,withAlpha:!1}){return gO(this.getColor(t,n))}getColorRelative(t,n={smooth:!0}){const o=this.getBounds();return this.getColor(o.min+t*(o.max-o.min),n)}getCanvasStrip(t={horizontal:!0,size:512,smooth:!0}){const n=document.createElement("canvas");n.width=t.horizontal?t.size:1,n.height=t.horizontal?1:t.size;const o=n.getContext("2d");if(!o)throw new Error("Canvs context is missing");const a=o.getImageData(0,0,n.width,n.height),h=a.data,d=t.size,u=this[0].value,b=(this.at(-1).value-u)/d;for(let w=0;w<d;w+=1){const P=this.getColor(u+w*b,{smooth:t.smooth});h[w*4]=P[0],h[w*4+1]=P[1],h[w*4+2]=P[2],h[w*4+3]=P.length>3?P[3]:255}return o.putImageData(a,0,0),n}resample(t,n=15){const o=this.getBounds(),a=this.scale(0,1),h=1/(n-1);let d;if(t==="ease-in-square")d=Array.from({length:n},(u,b)=>{const w=b*h,P=w**2,E=a.getColor(P);return{value:w,color:E}});else if(t==="ease-out-square")d=Array.from({length:n},(u,b)=>{const w=b*h,P=1-(1-w)**2,E=a.getColor(P);return{value:w,color:E}});else if(t==="ease-out-sqrt")d=Array.from({length:n},(u,b)=>{const w=b*h,P=w**.5,E=a.getColor(P);return{value:w,color:E}});else if(t==="ease-in-sqrt")d=Array.from({length:n},(u,b)=>{const w=b*h,P=1-(1-w)**.5,E=a.getColor(P);return{value:w,color:E}});else if(t==="ease-out-exp")d=Array.from({length:n},(u,b)=>{const w=b*h,P=1-2**(-10*w),E=a.getColor(P);return{value:w,color:E}});else if(t==="ease-in-exp")d=Array.from({length:n},(u,b)=>{const w=b*h,P=2**(10*w-10),E=a.getColor(P);return{value:w,color:E}});else throw new Error("Invalid ressampling method.");return new Dt({stops:d}).scale(o.min,o.max)}transparentStart(){const t=this.getRawColorStops();t.unshift({value:t[0].value,color:t[0].color.slice()}),t[1].value+=.001;for(const n of t)n.color.length===3&&n.color.push(255);return t[0].color[3]=0,new Dt({stops:t})}hasTransparentStart(){return this[0].color.length===4&&this[0].color[3]===0}}new Dt({stops:[{value:0,color:[0,0,0,0]},{value:1,color:[0,0,0,0]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Dt({stops:[{value:0,color:[0,0,131]},{value:.125,color:[0,60,170]},{value:.375,color:[5,255,255]},{value:.625,color:[255,255,0]},{value:.875,color:[250,0,0]},{value:1,color:[128,0,0]}]}),new Dt({stops:[{value:0,color:[255,0,0]},{value:.169,color:[253,255,2]},{value:.173,color:[247,255,2]},{value:.337,color:[0,252,4]},{value:.341,color:[0,252,10]},{value:.506,color:[1,249,255]},{value:.671,color:[2,0,253]},{value:.675,color:[8,0,253]},{value:.839,color:[255,0,251]},{value:.843,color:[255,0,245]},{value:1,color:[255,0,6]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.3,color:[230,0,0]},{value:.6,color:[255,210,0]},{value:1,color:[255,255,255]}]}),new Dt({stops:[{value:0,color:[255,0,255]},{value:1,color:[255,255,0]}]}),new Dt({stops:[{value:0,color:[0,128,102]},{value:1,color:[255,255,102]}]}),new Dt({stops:[{value:0,color:[255,0,0]},{value:1,color:[255,255,0]}]}),new Dt({stops:[{value:0,color:[0,0,255]},{value:1,color:[0,255,128]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.376,color:[84,84,116]},{value:.753,color:[169,200,200]},{value:1,color:[255,255,255]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.804,color:[255,160,102]},{value:1,color:[255,199,127]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:1,color:[255,255,255]}]}),new Dt({stops:[{value:0,color:[8,29,88]},{value:.125,color:[37,52,148]},{value:.25,color:[34,94,168]},{value:.375,color:[29,145,192]},{value:.5,color:[65,182,196]},{value:.625,color:[127,205,187]},{value:.75,color:[199,233,180]},{value:.875,color:[237,248,217]},{value:1,color:[255,255,217]}]}),new Dt({stops:[{value:0,color:[0,68,27]},{value:.125,color:[0,109,44]},{value:.25,color:[35,139,69]},{value:.375,color:[65,171,93]},{value:.5,color:[116,196,118]},{value:.625,color:[161,217,155]},{value:.75,color:[199,233,192]},{value:.875,color:[229,245,224]},{value:1,color:[247,252,245]}]}),new Dt({stops:[{value:0,color:[128,0,38]},{value:.125,color:[189,0,38]},{value:.25,color:[227,26,28]},{value:.375,color:[252,78,42]},{value:.5,color:[253,141,60]},{value:.625,color:[254,178,76]},{value:.75,color:[254,217,118]},{value:.875,color:[255,237,160]},{value:1,color:[255,255,204]}]}),new Dt({stops:[{value:0,color:[0,0,255]},{value:1,color:[255,0,0]}]}),new Dt({stops:[{value:0,color:[5,10,172]},{value:.35,color:[106,137,247]},{value:.5,color:[190,190,190]},{value:.6,color:[220,170,132]},{value:.7,color:[230,145,90]},{value:1,color:[178,10,28]}]}),new Dt({stops:[{value:0,color:[0,0,255]},{value:.1,color:[51,153,255]},{value:.2,color:[102,204,255]},{value:.3,color:[153,204,255]},{value:.4,color:[204,204,255]},{value:.5,color:[255,255,255]},{value:.6,color:[255,204,255]},{value:.7,color:[255,153,255]},{value:.8,color:[255,102,204]},{value:.9,color:[255,102,102]},{value:1,color:[255,0,0]}]}),new Dt({stops:[{value:0,color:[150,0,90]},{value:.125,color:[0,0,200]},{value:.25,color:[0,25,255]},{value:.375,color:[0,152,255]},{value:.5,color:[44,255,150]},{value:.625,color:[151,255,0]},{value:.75,color:[255,234,0]},{value:.875,color:[255,111,0]},{value:1,color:[255,0,0]}]}),new Dt({stops:[{value:0,color:[12,51,131]},{value:.25,color:[10,136,186]},{value:.5,color:[242,211,56]},{value:.75,color:[242,143,56]},{value:1,color:[217,30,30]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.2,color:[230,0,0]},{value:.4,color:[230,210,0]},{value:.7,color:[255,255,255]},{value:1,color:[160,200,255]}]}),new Dt({stops:[{value:0,color:[0,0,130]},{value:.1,color:[0,180,180]},{value:.2,color:[40,210,40]},{value:.4,color:[230,230,50]},{value:.6,color:[120,70,20]},{value:1,color:[255,255,255]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.15,color:[30,0,100]},{value:.4,color:[120,0,100]},{value:.6,color:[160,90,0]},{value:.8,color:[230,200,0]},{value:1,color:[255,250,220]}]}),new Dt({stops:[{value:0,color:[68,1,84]},{value:.13,color:[71,44,122]},{value:.25,color:[59,81,139]},{value:.38,color:[44,113,142]},{value:.5,color:[33,144,141]},{value:.63,color:[39,173,129]},{value:.75,color:[92,200,99]},{value:.88,color:[170,220,50]},{value:1,color:[253,231,37]}]}),new Dt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[31,12,72]},{value:.25,color:[85,15,109]},{value:.38,color:[136,34,106]},{value:.5,color:[186,54,85]},{value:.63,color:[227,89,51]},{value:.75,color:[249,140,10]},{value:.88,color:[249,201,50]},{value:1,color:[252,255,164]}]}),new Dt({stops:[{value:0,color:[0,0,4]},{value:.13,color:[28,16,68]},{value:.25,color:[79,18,123]},{value:.38,color:[129,37,129]},{value:.5,color:[181,54,122]},{value:.63,color:[229,80,100]},{value:.75,color:[251,135,97]},{value:.88,color:[254,194,135]},{value:1,color:[252,253,191]}]}),new Dt({stops:[{value:0,color:[13,8,135]},{value:.13,color:[75,3,161]},{value:.25,color:[125,3,168]},{value:.38,color:[168,34,150]},{value:.5,color:[203,70,121]},{value:.63,color:[229,107,93]},{value:.75,color:[248,148,65]},{value:.88,color:[253,195,40]},{value:1,color:[240,249,33]}]}),new Dt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[172,0,187]},{value:.25,color:[219,0,170]},{value:.38,color:[255,0,130]},{value:.5,color:[255,63,74]},{value:.63,color:[255,123,0]},{value:.75,color:[234,176,0]},{value:.88,color:[190,228,0]},{value:1,color:[147,255,0]}]}),new Dt({stops:[{value:0,color:[125,0,179]},{value:.13,color:[116,0,218]},{value:.25,color:[98,74,237]},{value:.38,color:[68,146,231]},{value:.5,color:[0,204,197]},{value:.63,color:[0,247,146]},{value:.75,color:[0,255,88]},{value:.88,color:[40,255,8]},{value:1,color:[147,255,0]}]}),new Dt({stops:[{value:0,color:[125,0,179]},{value:.1,color:[199,0,180]},{value:.2,color:[255,0,121]},{value:.3,color:[255,108,0]},{value:.4,color:[222,194,0]},{value:.5,color:[150,255,0]},{value:.6,color:[0,255,55]},{value:.7,color:[0,246,150]},{value:.8,color:[50,167,222]},{value:.9,color:[103,51,235]},{value:1,color:[124,0,186]}]}),new Dt({stops:[{value:0,color:[40,26,44]},{value:.13,color:[59,49,90]},{value:.25,color:[64,76,139]},{value:.38,color:[63,110,151]},{value:.5,color:[72,142,158]},{value:.63,color:[85,174,163]},{value:.75,color:[120,206,163]},{value:.88,color:[187,230,172]},{value:1,color:[253,254,204]}]}),new Dt({stops:[{value:0,color:[47,15,62]},{value:.13,color:[87,23,86]},{value:.25,color:[130,28,99]},{value:.38,color:[171,41,96]},{value:.5,color:[206,67,86]},{value:.63,color:[230,106,84]},{value:.75,color:[242,149,103]},{value:.88,color:[249,193,135]},{value:1,color:[254,237,176]}]}),new Dt({stops:[{value:0,color:[18,36,20]},{value:.13,color:[25,63,41]},{value:.25,color:[24,91,59]},{value:.38,color:[13,119,72]},{value:.5,color:[18,148,80]},{value:.63,color:[80,173,89]},{value:.75,color:[132,196,122]},{value:.88,color:[175,221,162]},{value:1,color:[215,249,208]}]}),new Dt({stops:[{value:0,color:[54,14,36]},{value:.13,color:[89,23,80]},{value:.25,color:[110,45,132]},{value:.38,color:[120,77,178]},{value:.5,color:[120,113,213]},{value:.63,color:[115,151,228]},{value:.75,color:[134,185,227]},{value:.88,color:[177,214,227]},{value:1,color:[230,241,241]}]}),new Dt({stops:[{value:0,color:[30,4,110]},{value:.13,color:[47,14,176]},{value:.25,color:[41,45,236]},{value:.38,color:[25,99,212]},{value:.5,color:[68,131,200]},{value:.63,color:[114,156,197]},{value:.75,color:[157,181,203]},{value:.88,color:[200,208,216]},{value:1,color:[241,237,236]}]}),new Dt({stops:[{value:0,color:[60,9,18]},{value:.13,color:[100,17,27]},{value:.25,color:[142,20,29]},{value:.38,color:[177,43,27]},{value:.5,color:[192,87,63]},{value:.63,color:[205,125,105]},{value:.75,color:[216,162,148]},{value:.88,color:[227,199,193]},{value:1,color:[241,237,236]}]}),new Dt({stops:[{value:0,color:[64,5,5]},{value:.13,color:[106,6,15]},{value:.25,color:[144,26,7]},{value:.38,color:[168,64,3]},{value:.5,color:[188,100,4]},{value:.63,color:[206,136,11]},{value:.75,color:[220,174,25]},{value:.88,color:[231,215,44]},{value:1,color:[248,254,105]}]}),new Dt({stops:[{value:0,color:[51,20,24]},{value:.13,color:[90,32,35]},{value:.25,color:[129,44,34]},{value:.38,color:[159,68,25]},{value:.5,color:[182,99,19]},{value:.63,color:[199,134,22]},{value:.75,color:[212,171,35]},{value:.88,color:[221,210,54]},{value:1,color:[225,253,75]}]}),new Dt({stops:[{value:0,color:[145,105,18]},{value:.13,color:[184,71,38]},{value:.25,color:[186,58,115]},{value:.38,color:[160,71,185]},{value:.5,color:[110,97,218]},{value:.63,color:[50,123,164]},{value:.75,color:[31,131,110]},{value:.88,color:[77,129,34]},{value:1,color:[145,105,18]}]}),new Dt({stops:[{value:0,color:[42,24,108]},{value:.13,color:[33,50,162]},{value:.25,color:[15,90,145]},{value:.38,color:[40,118,137]},{value:.5,color:[59,146,135]},{value:.63,color:[79,175,126]},{value:.75,color:[120,203,104]},{value:.88,color:[193,221,100]},{value:1,color:[253,239,154]}]}),new Dt({stops:[{value:0,color:[4,35,51]},{value:.13,color:[23,51,122]},{value:.25,color:[85,59,157]},{value:.38,color:[129,79,143]},{value:.5,color:[175,95,130]},{value:.63,color:[222,112,101]},{value:.75,color:[249,146,66]},{value:.88,color:[249,196,65]},{value:1,color:[232,250,91]}]}),new Dt({stops:[{value:0,color:[34,31,27]},{value:.13,color:[65,50,41]},{value:.25,color:[98,69,52]},{value:.38,color:[131,89,57]},{value:.5,color:[161,112,59]},{value:.63,color:[185,140,66]},{value:.75,color:[202,174,88]},{value:.88,color:[216,209,126]},{value:1,color:[233,246,171]}]}),new Dt({stops:[{value:0,color:[17,32,64]},{value:.13,color:[35,52,116]},{value:.25,color:[29,81,156]},{value:.38,color:[31,113,162]},{value:.5,color:[50,144,169]},{value:.63,color:[87,173,176]},{value:.75,color:[149,196,189]},{value:.88,color:[203,221,211]},{value:1,color:[254,251,230]}]}),new Dt({stops:[{value:0,color:[23,35,19]},{value:.13,color:[24,64,38]},{value:.25,color:[11,95,45]},{value:.38,color:[39,123,35]},{value:.5,color:[95,146,12]},{value:.63,color:[152,165,18]},{value:.75,color:[201,186,69]},{value:.88,color:[233,216,137]},{value:1,color:[255,253,205]}]}),new Dt({stops:[{value:0,color:[0,0,0]},{value:.07,color:[22,5,59]},{value:.13,color:[60,4,105]},{value:.2,color:[109,1,135]},{value:.27,color:[161,0,147]},{value:.33,color:[210,2,142]},{value:.4,color:[251,11,123]},{value:.47,color:[255,29,97]},{value:.53,color:[255,54,69]},{value:.6,color:[255,85,46]},{value:.67,color:[255,120,34]},{value:.73,color:[255,157,37]},{value:.8,color:[241,191,57]},{value:.87,color:[224,220,93]},{value:.93,color:[218,241,142]},{value:1,color:[227,253,198]}]}),new Dt({stops:[{value:0,color:[0,32,77,255]},{value:.125,color:[5,54,110,255]},{value:.25,color:[65,77,108,255]},{value:.375,color:[97,100,111,255]},{value:.5,color:[125,124,121,255]},{value:.625,color:[156,149,120,255]},{value:.75,color:[190,175,111,255]},{value:.875,color:[225,204,94,255]},{value:1,color:[255,235,70,255]}]}),new Dt({stops:[{value:0,color:[48,18,59,255]},{value:.125,color:[70,107,227,255]},{value:.25,color:[40,187,236,255]},{value:.375,color:[49,242,153,255]},{value:.5,color:[162,252,60,255]},{value:.625,color:[237,208,58,255]},{value:.75,color:[251,128,34,255]},{value:.875,color:[210,49,5,255]},{value:1,color:[122,4,3,255]}]}),new Dt({stops:[{value:0,color:[250,235,221,0]},{value:.133,color:[250,235,221,255]},{value:.266,color:[246,170,130,255]},{value:.4,color:[240,96,67,255]},{value:.533,color:[203,27,79,255]},{value:.666,color:[132,30,90,255]},{value:.8,color:[63,27,68,255]},{value:1,color:[3,5,26,255]}]}),new Dt({stops:[{value:0,color:[11,4,5,255]},{value:.125,color:[43,28,53,255]},{value:.25,color:[62,53,107,255]},{value:.375,color:[59,86,152,255]},{value:.5,color:[53,123,162,255]},{value:.625,color:[53,158,170,255]},{value:.75,color:[73,193,173,255]},{value:.875,color:[150,221,181,255]},{value:1,color:[222,245,229,255]}]});RD();Et.Map;Et.Marker;Et.Popup;Et.Style;Et.CanvasSource;Et.GeoJSONSource;Et.ImageSource;Et.RasterTileSource;Et.RasterDEMTileSource;Et.VectorTileSource;Et.VideoSource;Et.NavigationControl;Et.GeolocateControl;Et.AttributionControl;Et.LogoControl;Et.ScaleControl;Et.FullscreenControl;Et.TerrainControl;Et.BoxZoomHandler;Et.ScrollZoomHandler;Et.CooperativeGesturesHandler;Et.KeyboardHandler;Et.TwoFingersTouchPitchHandler;Et.MapWheelEvent;Et.MapTouchEvent;Et.MapMouseEvent;Et.config;Et.getVersion;var iA={},yO=Object.defineProperty,oA=e=>{throw TypeError(e)},vO=(e,t,n)=>t in e?yO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fT=(e,t,n)=>vO(e,typeof t!="symbol"?t+"":t,n),sA=(e,t,n)=>t.has(e)||oA("Cannot "+n),Is=(e,t,n)=>(sA(e,t,"read from private field"),t.get(e)),mT=(e,t,n)=>t.has(e)?oA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),N_=(e,t,n,o)=>(sA(e,t,"write to private field"),t.set(e,n),n);function cr(){}function _O(e,t){for(const n in t)e[n]=t[n];return e}function aA(e){return e()}function gT(){return Object.create(null)}function Xa(e){e.forEach(aA)}function lA(e){return typeof e=="function"}function ou(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let Jg;function Ui(e,t){return e===t?!0:(Jg||(Jg=document.createElement("a")),Jg.href=t,e===Jg.href)}function xO(e){return Object.keys(e).length===0}function bO(e,t,n,o){if(e){const a=uA(e,t,n,o);return e[0](a)}}function uA(e,t,n,o){return e[1]&&o?_O(n.ctx.slice(),e[1](o(t))):n.ctx}function wO(e,t,n,o){if(e[2]&&o){const a=e[2](o(n));if(t.dirty===void 0)return a;if(typeof a=="object"){const h=[],d=Math.max(t.dirty.length,a.length);for(let u=0;u<d;u+=1)h[u]=t.dirty[u]|a[u];return h}return t.dirty|a}return t.dirty}function SO(e,t,n,o,a,h){if(a){const d=uA(t,n,o,h);e.p(d,a)}}function CO(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let o=0;o<n;o++)t[o]=-1;return t}return-1}function yT(e){return e??""}function _n(e,t){e.appendChild(t)}function wr(e,t,n){e.insertBefore(t,n||null)}function hr(e){e.parentNode&&e.parentNode.removeChild(e)}function Xn(e){return document.createElement(e)}function Os(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Jl(e){return document.createTextNode(e)}function Fo(){return Jl(" ")}function kO(){return Jl("")}function to(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function TO(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Ve(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function EO(e){return Array.from(e.childNodes)}function Jf(e,t){t=""+t,e.data!==t&&(e.data=t)}function vT(e,t){e.value=t??""}function fs(e,t,n){e.classList.toggle(t,!!n)}function IO(e,t,{bubbles:n=!1,cancelable:o=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:o})}let Qf;function Sf(e){Qf=e}function cA(){if(!Qf)throw new Error("Function called outside component initialization");return Qf}function PO(e){cA().$$.on_destroy.push(e)}function MO(){const e=cA();return(t,n,{cancelable:o=!1}={})=>{const a=e.$$.callbacks[t];if(a){const h=IO(t,n,{cancelable:o});return a.slice().forEach(d=>{d.call(e,h)}),!h.defaultPrevented}return!0}}function _T(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(o=>o.call(this,t))}const bh=[],pb=[];let Jh=[];const xT=[],AO=Promise.resolve();let fb=!1;function LO(){fb||(fb=!0,AO.then(hA))}function mb(e){Jh.push(e)}const j_=new Set;let uh=0;function hA(){if(uh!==0)return;const e=Qf;do{try{for(;uh<bh.length;){const t=bh[uh];uh++,Sf(t),zO(t.$$)}}catch(t){throw bh.length=0,uh=0,t}for(Sf(null),bh.length=0,uh=0;pb.length;)pb.pop()();for(let t=0;t<Jh.length;t+=1){const n=Jh[t];j_.has(n)||(j_.add(n),n())}Jh.length=0}while(bh.length);for(;xT.length;)xT.pop()();fb=!1,j_.clear(),Sf(e)}function zO(e){if(e.fragment!==null){e.update(),Xa(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(mb)}}function RO(e){const t=[],n=[];Jh.forEach(o=>e.indexOf(o)===-1?t.push(o):n.push(o)),n.forEach(o=>o()),Jh=t}const Sy=new Set;let Hu;function Cy(){Hu={r:0,c:[],p:Hu}}function ky(){Hu.r||Xa(Hu.c),Hu=Hu.p}function Br(e,t){e&&e.i&&(Sy.delete(e),e.i(t))}function ci(e,t,n,o){if(e&&e.o){if(Sy.has(e))return;Sy.add(e),Hu.c.push(()=>{Sy.delete(e),o&&(n&&e.d(1),o())}),e.o(t)}else o&&o()}function bT(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function DO(e,t){ci(e,1,1,()=>{t.delete(e.key)})}function $O(e,t,n,o,a,h,d,u,b,w,P,E){let I=e.length,R=h.length,F=I;const U={};for(;F--;)U[e[F].key]=F;const K=[],D=new Map,j=new Map,V=[];for(F=R;F--;){const le=E(a,h,F),ge=n(le);let Ae=d.get(ge);Ae?V.push(()=>Ae.p(le,t)):(Ae=w(ge,le),Ae.c()),D.set(ge,K[F]=Ae),ge in U&&j.set(ge,Math.abs(F-U[ge]))}const Y=new Set,ce=new Set;function de(le){Br(le,1),le.m(u,P),d.set(le.key,le),P=le.first,R--}for(;I&&R;){const le=K[R-1],ge=e[I-1],Ae=le.key,H=ge.key;le===ge?(P=le.first,I--,R--):D.has(H)?!d.has(Ae)||Y.has(Ae)?de(le):ce.has(H)?I--:j.get(Ae)>j.get(H)?(ce.add(Ae),de(le)):(Y.add(H),I--):(b(ge,d),I--)}for(;I--;){const le=e[I];D.has(le.key)||b(le,d)}for(;R;)de(K[R-1]);return Xa(V),K}function Ql(e){e&&e.c()}function qa(e,t,n){const{fragment:o,after_update:a}=e.$$;o&&o.m(t,n),mb(()=>{const h=e.$$.on_mount.map(aA).filter(lA);e.$$.on_destroy?e.$$.on_destroy.push(...h):Xa(h),e.$$.on_mount=[]}),a.forEach(mb)}function Ga(e,t){const n=e.$$;n.fragment!==null&&(RO(n.after_update),Xa(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function OO(e,t){e.$$.dirty[0]===-1&&(bh.push(e),LO(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function su(e,t,n,o,a,h,d=null,u=[-1]){const b=Qf;Sf(e);const w=e.$$={fragment:null,ctx:[],props:h,update:cr,not_equal:a,bound:gT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(b?b.$$.context:[])),callbacks:gT(),dirty:u,skip_bound:!1,root:t.target||b.$$.root};d&&d(w.root);let P=!1;if(w.ctx=n?n(e,t.props||{},(E,I,...R)=>{const F=R.length?R[0]:I;return w.ctx&&a(w.ctx[E],w.ctx[E]=F)&&(!w.skip_bound&&w.bound[E]&&w.bound[E](F),P&&OO(e,E)),I}):[],w.update(),P=!0,Xa(w.before_update),w.fragment=o?o(w.ctx):!1,t.target){if(t.hydrate){const E=EO(t.target);w.fragment&&w.fragment.l(E),E.forEach(hr)}else w.fragment&&w.fragment.c();t.intro&&Br(e.$$.fragment),qa(e,t.target,t.anchor),hA()}Sf(b)}class au{constructor(){fT(this,"$$"),fT(this,"$$set")}$destroy(){Ga(this,1),this.$destroy=cr}$on(t,n){if(!lA(n))return cr;const o=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return o.push(n),()=>{const a=o.indexOf(n);a!==-1&&o.splice(a,1)}}$set(t){this.$$set&&!xO(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const BO="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(BO);function FO(e){let t,n;return{c(){t=Os("svg"),n=Os("path"),Ve(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),Ve(t,"viewBox","0 0 14 14"),Ve(t,"width","13"),Ve(t,"height","13"),Ve(t,"class","svelte-en2qvf")},m(o,a){wr(o,t,a),_n(t,n)},p:cr,i:cr,o:cr,d(o){o&&hr(t)}}}class dA extends au{constructor(t){super(),su(this,t,null,FO,ou,{})}}function NO(e){let t,n;return{c(){t=Os("svg"),n=Os("path"),Ve(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),Ve(t,"viewBox","0 0 30 30"),Ve(t,"fill","none"),Ve(t,"xmlns","http://www.w3.org/2000/svg"),Ve(t,"class","svelte-d2loi5")},m(o,a){wr(o,t,a),_n(t,n)},p:cr,i:cr,o:cr,d(o){o&&hr(t)}}}class pA extends au{constructor(t){super(),su(this,t,null,NO,ou,{})}}function jO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"area.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"area.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function UO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"reverse.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"reverse.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function VO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"poi.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"poi.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function WO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"postal_code.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"postal_code.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function qO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"street.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"street.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function GO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"road.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"road.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function HO(e){let t,n;return{c(){t=Xn("img"),Ui(t.src,n=e[3]+"housenumber.svg")||Ve(t,"src",n),Ve(t,"alt",e[6]),Ve(t,"class","svelte-ltkwvy")},m(o,a){wr(o,t,a)},p(o,a){a&8&&!Ui(t.src,n=o[3]+"housenumber.svg")&&Ve(t,"src",n),a&64&&Ve(t,"alt",o[6])},d(o){o&&hr(t)}}}function ZO(e){let t,n,o,a;return{c(){t=Xn("img"),Ui(t.src,n=e[5])||Ve(t,"src",n),Ve(t,"alt",e[4]),Ve(t,"class","svelte-ltkwvy")},m(h,d){wr(h,t,d),o||(a=to(t,"error",e[14]),o=!0)},p(h,d){d&32&&!Ui(t.src,n=h[5])&&Ve(t,"src",n),d&16&&Ve(t,"alt",h[4])},d(h){h&&hr(t),o=!1,a()}}}function wT(e){let t,n;return{c(){t=Xn("span"),n=Jl(e[6]),Ve(t,"class","secondary svelte-ltkwvy")},m(o,a){wr(o,t,a),_n(t,n)},p(o,a){a&64&&Jf(n,o[6])},d(o){o&&hr(t)}}}function KO(e){let t,n,o,a,h,d,u,b,w,P=(e[7]?e[0].place_name:e[0].place_name.replace(/,.*/,""))+"",E,I,R=e[2]==="always"||e[2]&&!e[0].address&&!e[0].id.startsWith("road.")&&!e[0].id.startsWith("address.")&&!e[0].id.startsWith("postal_code.")&&(!e[0].id.startsWith("poi.")||!e[5])&&!e[7],F,U,K=(e[7]?"":e[0].place_name.replace(/[^,]*,?\s*/,""))+"",D,j,V;function Y(ge,Ae){return Ae&1&&(n=null),Ae&1&&(o=null),Ae&1&&(a=null),Ae&1&&(h=null),ge[5]?ZO:ge[0].address?HO:(n==null&&(n=!!ge[0].id.startsWith("road.")),n?GO:(o==null&&(o=!!ge[0].id.startsWith("address.")),o?qO:(a==null&&(a=!!ge[0].id.startsWith("postal_code.")),a?WO:(h==null&&(h=!!ge[0].id.startsWith("poi.")),h?VO:ge[7]?UO:jO))))}let ce=Y(e,-1),de=ce(e),le=R&&wT(e);return{c(){t=Xn("li"),de.c(),d=Fo(),u=Xn("span"),b=Xn("span"),w=Xn("span"),E=Jl(P),I=Fo(),le&&le.c(),F=Fo(),U=Xn("span"),D=Jl(K),Ve(w,"class","primary svelte-ltkwvy"),Ve(b,"class","svelte-ltkwvy"),Ve(U,"class","line2 svelte-ltkwvy"),Ve(u,"class","texts svelte-ltkwvy"),Ve(t,"tabindex","0"),Ve(t,"data-selected",e[1]),Ve(t,"class","svelte-ltkwvy"),fs(t,"selected",e[1])},m(ge,Ae){wr(ge,t,Ae),de.m(t,null),_n(t,d),_n(t,u),_n(u,b),_n(b,w),_n(w,E),_n(b,I),le&&le.m(b,null),_n(u,F),_n(u,U),_n(U,D),j||(V=[to(t,"mouseenter",e[12]),to(t,"focus",e[13])],j=!0)},p(ge,[Ae]){ce===(ce=Y(ge,Ae))&&de?de.p(ge,Ae):(de.d(1),de=ce(ge),de&&(de.c(),de.m(t,d))),Ae&1&&P!==(P=(ge[7]?ge[0].place_name:ge[0].place_name.replace(/,.*/,""))+"")&&Jf(E,P),Ae&37&&(R=ge[2]==="always"||ge[2]&&!ge[0].address&&!ge[0].id.startsWith("road.")&&!ge[0].id.startsWith("address.")&&!ge[0].id.startsWith("postal_code.")&&(!ge[0].id.startsWith("poi.")||!ge[5])&&!ge[7]),R?le?le.p(ge,Ae):(le=wT(ge),le.c(),le.m(b,null)):le&&(le.d(1),le=null),Ae&1&&K!==(K=(ge[7]?"":ge[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Jf(D,K),Ae&2&&Ve(t,"data-selected",ge[1]),Ae&2&&fs(t,"selected",ge[1])},i:cr,o:cr,d(ge){ge&&hr(t),de.d(),le&&le.d(),j=!1,Xa(V)}}}function XO(e,t,n){var o;let a,h,{feature:d}=t,{selected:u=!1}=t,{showPlaceType:b}=t,{missingIconsCache:w}=t,{iconsBaseUrl:P}=t;const E=(o=d.properties)==null?void 0:o.categories;let I,R,F=0,U=d.place_type[0]==="reverse";function K(){R&&w.add(R),n(10,F++,F)}function D(Y){_T.call(this,e,Y)}function j(Y){_T.call(this,e,Y)}const V=()=>K();return e.$$set=Y=>{"feature"in Y&&n(0,d=Y.feature),"selected"in Y&&n(1,u=Y.selected),"showPlaceType"in Y&&n(2,b=Y.showPlaceType),"missingIconsCache"in Y&&n(9,w=Y.missingIconsCache),"iconsBaseUrl"in Y&&n(3,P=Y.iconsBaseUrl)},e.$$.update=()=>{var Y,ce,de,le;if(e.$$.dirty&3640)do n(11,a--,a),n(4,I=E==null?void 0:E[a]),n(5,R=I?P+I.replace(/ /g,"_")+".svg":void 0);while(a>-1&&(!R||w.has(R)));e.$$.dirty&1&&n(6,h=((ce=(Y=d.properties)==null?void 0:Y.categories)==null?void 0:ce.join(", "))??((le=(de=d.properties)==null?void 0:de.place_type_name)==null?void 0:le[0])??d.place_type[0])},n(11,a=(E==null?void 0:E.length)??0),[d,u,b,P,I,R,h,U,K,w,F,a,D,j,V]}class YO extends au{constructor(t){super(),su(this,t,XO,KO,ou,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function JO(e){let t;return{c(){t=Xn("div"),t.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',Ve(t,"class","svelte-7cmwmc")},m(n,o){wr(n,t,o)},p:cr,i:cr,o:cr,d(n){n&&hr(t)}}}class QO extends au{constructor(t){super(),su(this,t,null,JO,ou,{})}}function eB(e){let t,n,o;return{c(){t=Os("svg"),n=Os("path"),Ve(n,"stroke-width","4"),Ve(n,"d","M 5,33.103579 C 5,17.607779 18.457,5 35,5 C 51.543,5 65,17.607779 65,33.103579 C 65,56.388679 40.4668,76.048179 36.6112,79.137779 C 36.3714,79.329879 36.2116,79.457979 36.1427,79.518879 C 35.8203,79.800879 35.4102,79.942779 35,79.942779 C 34.5899,79.942779 34.1797,79.800879 33.8575,79.518879 C 33.7886,79.457979 33.6289,79.330079 33.3893,79.138079 C 29.5346,76.049279 5,56.389379 5,33.103579 Z M 35.0001,49.386379 C 43.1917,49.386379 49.8323,42.646079 49.8323,34.331379 C 49.8323,26.016779 43.1917,19.276479 35.0001,19.276479 C 26.8085,19.276479 20.1679,26.016779 20.1679,34.331379 C 20.1679,42.646079 26.8085,49.386379 35.0001,49.386379 Z"),Ve(n,"class","svelte-gzo3ar"),Ve(t,"width",o=e[0]==="list"?20:void 0),Ve(t,"viewBox","0 0 70 85"),Ve(t,"fill","none"),Ve(t,"class","svelte-gzo3ar"),fs(t,"in-map",e[0]!=="list"),fs(t,"list-icon",e[0]==="list")},m(a,h){wr(a,t,h),_n(t,n)},p(a,[h]){h&1&&o!==(o=a[0]==="list"?20:void 0)&&Ve(t,"width",o),h&1&&fs(t,"in-map",a[0]!=="list"),h&1&&fs(t,"list-icon",a[0]==="list")},i:cr,o:cr,d(a){a&&hr(t)}}}function tB(e,t,n){let{displayIn:o}=t;return e.$$set=a=>{"displayIn"in a&&n(0,o=a.displayIn)},[o]}class nB extends au{constructor(t){super(),su(this,t,tB,eB,ou,{displayIn:0})}}function rB(e){let t,n;return{c(){t=Os("svg"),n=Os("path"),Ve(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),Ve(t,"viewBox","0 0 60.006 21.412"),Ve(t,"width","14"),Ve(t,"height","20"),Ve(t,"class","svelte-en2qvf")},m(o,a){wr(o,t,a),_n(t,n)},p:cr,i:cr,o:cr,d(o){o&&hr(t)}}}class iB extends au{constructor(t){super(),su(this,t,null,rB,ou,{})}}function oB(e){let t,n,o;return{c(){t=Os("svg"),n=Os("circle"),o=Os("path"),Ve(n,"cx","4.789"),Ve(n,"cy","4.787"),Ve(n,"r","3.85"),Ve(n,"class","svelte-1aq105l"),Ve(o,"d","M12.063 12.063 7.635 7.635"),Ve(o,"class","svelte-1aq105l"),Ve(t,"xmlns","http://www.w3.org/2000/svg"),Ve(t,"width","13"),Ve(t,"height","13"),Ve(t,"viewBox","0 0 13 13"),Ve(t,"class","svelte-1aq105l")},m(a,h){wr(a,t,h),_n(t,n),_n(t,o)},p:cr,i:cr,o:cr,d(a){a&&hr(t)}}}class sB extends au{constructor(t){super(),su(this,t,null,oB,ou,{})}}function aB(e,t,n){const o=t[1],a=t[0],h=o-a;return e===o&&n?e:((e-a)%h+h)%h+a}function h0(e){const t=[...e];return t[2]<t[0]&&(Math.abs((t[0]+t[2]+360)/2)>Math.abs((t[0]-360+t[2])/2)?t[0]-=360:t[2]+=360),t}let Gp;async function lB(e,t,n){const o=e==null?void 0:e.getCenterAndZoom();for(const a of t??[])if(!(o&&(a.minZoom!=null&&a.minZoom>o[0]||a.maxZoom!=null&&a.maxZoom<o[0]))){if(a.type==="fixed")return a.coordinates.join(",");e:if(a.type==="client-geolocation"){if(Gp&&a.cachedLocationExpiry&&Gp.time+a.cachedLocationExpiry>Date.now()){if(!Gp.coords)break e;return Gp.coords}let h;try{return h=await new Promise((d,u)=>{n.signal.addEventListener("abort",()=>{u(Error("aborted"))}),navigator.geolocation.getCurrentPosition(b=>{d([b.coords.longitude,b.coords.latitude].map(w=>w.toFixed(6)).join(","))},b=>{u(b)},a)}),h}catch{}finally{a.cachedLocationExpiry&&(Gp={time:Date.now(),coords:h})}if(n.signal.aborted)return}if(a.type==="server-geolocation")return"ip";if(o&&a.type==="map-center")return o[1].toFixed(6)+","+o[2].toFixed(6)}}const uB=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([6-9][0-9])\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*(EAST|WEST|[EW])?$/i,ST=/^([+-]?[0-8]?[0-9])\s+([0-5]?[0-9]\.\d{3,})[\s,]{1,}([+-]?[0-1]?[0-9]?[0-9])\s+([0-5]?[0-9]\.\d{3,})$/,CT=/^(NORTH|SOUTH|[NS])?[\s]*([+-]?[0-8]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(NORTH|SOUTH|[NS])?[\s]*[,/;]?[\s]*(EAST|WEST|[EW])?[\s]*([+-]?[0-1]?[0-9]?[0-9](?:[\.,]\d{3,}))[\s]*([•º°]?)[\s]*(EAST|WEST|[EW])?$/i,kT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(\.)\s*([0-5]?[0-9])\s*(\.)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(EAST|WEST|[EW])?$/i,TT=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*(D(?:EG)?(?:REES)?)\s*([0-5]?[0-9])\s*(M(?:IN)?(?:UTES)?)\s*((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(S(?:EC)?(?:ONDS)?)\s*(EAST|WEST|[EW])?$/i,ET=/^(NORTH|SOUTH|[NS])?\s*([+-]?[0-8]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|’’|´´|["″”\.])?\s*(NORTH|SOUTH|[NS])?(?:\s*[,/;]\s*|\s*)(EAST|WEST|[EW])?\s*([+-]?[0-1]?[0-9]?[0-9])\s*([•º°\.:]|D(?:EG)?(?:REES)?)?\s*,?([0-5]?[0-9](?:[\.,]\d{1,})?)?\s*(['′´’\.:]|M(?:IN)?(?:UTES)?)?\s*,?((?:[0-5]?[0-9])(?:[\.,]\d{1,3})?)?\s*(''|′′|´´|’’|["″”\.])?\s*(EAST|WEST|[EW])?$/i;function cB(e){if(!["DMS","DM","DD"].includes(e))throw new Error("invalid format specified");if(this.decimalCoordinates&&this.decimalCoordinates.trim()){const t=this.decimalCoordinates.split(",").map(R=>Number(R.trim())),n=Number(t[0]),o=Number(t[1]),a=Math.abs(n),h=Math.abs(o),d=n>0?"N":"S",u=o>0?"E":"W";let b;e=="DD"&&(b=`${a}° ${d}, ${h}° ${u}`);const w=Math.floor(a),P=Math.floor(h),E=(a-w)*60,I=(h-P)*60;if(e=="DM"){let R=IT(E,3).toFixed(3).padStart(6,"0"),F=IT(I,3).toFixed(3).padStart(6,"0");R.endsWith(".000")&&F.endsWith(".000")&&(R=R.replace(/\.000$/,""),F=F.replace(/\.000$/,"")),b=`${w}° ${R}' ${d}, ${P}° ${F}' ${u}`}if(e=="DMS"){const R=Math.floor(E),F=Math.floor(I);let U=((E-R)*60).toFixed(1).padStart(4,"0"),K=((I-F)*60).toFixed(1).padStart(4,"0");const D=R.toString().padStart(2,"0"),j=F.toString().padStart(2,"0");U.endsWith(".0")&&K.endsWith(".0")&&(U=U.replace(/\.0$/,""),K=K.replace(/\.0$/,"")),b=`${w}° ${D}' ${U}" ${d}, ${P}° ${j}' ${K}" ${u}`}return b}else throw new Error("no decimal coordinates to convert")}function IT(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}function Zw(e,t){t||(t=5),e=e.replace(/\s+/g," ").trim();let n=null,o=null,a="",h="",d=null,u=[],b=!1;if(uB.test(e))throw new Error("invalid coordinate value");if(ST.test(e))if(u=ST.exec(e),b=Hp(u),b)n=Math.abs(u[1])+u[2]/60,Number(u[1])<0&&(n*=-1),o=Math.abs(u[3])+u[4]/60,Number(u[3])<0&&(o*=-1),d="DM";else throw new Error("invalid coordinate format");else if(CT.test(e))if(u=CT.exec(e),b=Hp(u),b){if(n=u[2],o=u[6],n.includes(",")&&(n=n.replace(",",".")),o.includes(",")&&(o=o.replace(",",".")),d="DD",Number(Math.round(n))==Number(n))throw new Error("integer only coordinate provided");if(Number(Math.round(o))==Number(o))throw new Error("integer only coordinate provided");u[1]?(a=u[1],h=u[5]):u[4]&&(a=u[4],h=u[8])}else throw new Error("invalid decimal coordinate format");else if(kT.test(e))if(u=kT.exec(e),b=Hp(u),b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60,d="DM"),u[6]&&(n+=u[6].replace(",",".")/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),o=Math.abs(parseInt(u[9])),u[11]&&(o+=u[11]/60),u[13]&&(o+=u[13].replace(",",".")/3600),parseInt(u[9])<0&&(o=-1*o),u[1]?(a=u[1],h=u[8]):u[7]&&(a=u[7],h=u[14]);else throw new Error("invalid DMS coordinates format");else if(TT.test(e))if(u=TT.exec(e),b=Hp(u),b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4]/60,d="DM"),u[6]&&(n+=u[6]/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),o=Math.abs(parseInt(u[10])),u[12]&&(o+=u[12]/60),u[14]&&(o+=u[14]/3600),parseInt(u[10])<0&&(o=-1*o),u[1]?(a=u[1],h=u[9]):u[8]&&(a=u[8],h=u[16]);else throw new Error("invalid DMS coordinates format");else if(ET.test(e)){if(u=ET.exec(e),b=Hp(u),u.filter(w=>w).length<=5)throw new Error("invalid coordinates format");if(b)n=Math.abs(parseInt(u[2])),u[4]&&(n+=u[4].replace(",",".")/60,d="DM"),u[6]&&(n+=u[6].replace(",",".")/3600,d="DMS"),parseInt(u[2])<0&&(n=-1*n),o=Math.abs(parseInt(u[10])),u[12]&&(o+=u[12].replace(",",".")/60),u[14]&&(o+=u[14].replace(",",".")/3600),parseInt(u[10])<0&&(o=-1*o),u[1]?(a=u[1],h=u[9]):u[8]&&(a=u[8],h=u[16]);else throw new Error("invalid coordinates format")}if(b){if(Math.abs(o)>=180)throw new Error("invalid longitude value");if(Math.abs(n)>=90)throw new Error("invalid latitude value");if(a&&!h||!a&&h)throw new Error("invalid coordinates value");if(a&&a==h)throw new Error("invalid coordinates format");n.toString().includes(",")&&(n=n.replace(",",".")),o.toString().includes(",")&&(o=o.replace(",","."));let w=/S|SOUTH/i;w.test(a)&&n>0&&(n=-1*n),w=/W|WEST/i,w.test(h)&&o>0&&(o=-1*o);const P=u[0].trim();let E,I;const R=/[,/;\u0020]/g,F=P.match(R);if(F==null){const D=Math.floor(e.length/2);E=P.substring(0,D).trim(),I=P.substring(D).trim()}else{let D;F.length%2==1?D=Math.floor(F.length/2):D=F.length/2-1;let j=0;if(D==0)j=P.indexOf(F[0]),E=P.substring(0,j).trim(),I=P.substring(j+1).trim();else{let V=0,Y=0;for(;V<=D;)j=P.indexOf(F[V],Y),Y=j+1,V++;E=P.substring(0,j).trim(),I=P.substring(j+1).trim()}}const U=E.split(".");if(U.length==2&&U[1]==0&&U[1].length!=2)throw new Error("invalid coordinates format");const K=I.split(".");if(K.length==2&&K[1]==0&&K[1].length!=2)throw new Error("invalid coordinates format");if(/^\d+$/.test(E)||/^\d+$/.test(I))throw new Error("degree only coordinate/s provided");return n=Number(Number(n).toFixed(t)),o=Number(Number(o).toFixed(t)),Object.freeze({verbatimCoordinates:P,verbatimLatitude:E,verbatimLongitude:I,decimalLatitude:n,decimalLongitude:o,decimalCoordinates:`${n},${o}`,originalFormat:d,closeEnough:hB,toCoordinateFormat:cB})}else throw new Error("coordinates pattern match failed")}function Hp(e){if(!isNaN(e[0]))return!1;const t=[...e];if(t.shift(),t.length%2>0)return!1;const n=/^[-+]?\d+([\.,]\d+)?$/,o=/[eastsouthnorthwest]+/i,a=t.length/2;for(let h=0;h<a;h++){const d=t[h],u=t[h+a],b=n.test(d)&&n.test(u),w=o.test(d)&&o.test(u),P=d==u;if(!(d==null&&u==null)){if(d==null||u==null)return!1;if(b||w||P)continue;return!1}}return!0}function PT(e,t){const n=Math.abs(e-t);return Number(n.toFixed(6))<=1e-5}function hB(e){if(!e)throw new Error("coords must be provided");if(e.includes(",")){const t=e.split(",");if(Number(t[0])==NaN||Number(t[1])==NaN)throw new Error("coords are not valid decimals");return PT(this.decimalLatitude,Number(t[0]))&&PT(this.decimalLongitude,t[1])}else throw new Error("coords being tested must be separated by a comma")}const dB=Object.freeze({DMS:"DMS",DM:"DM",DD:"DD"});Zw.to=dB;const pB=[{verbatimCoordinates:"40.123, -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:"40.123° N 74.123° W",verbatimLatitude:"40.123° N",verbatimLongitude:"74.123° W"},{verbatimCoordinates:'40° 7´ 22.8" N 74° 7´ 22.8" W',verbatimLatitude:'40° 7´ 22.8" N',verbatimLongitude:'74° 7´ 22.8" W'},{verbatimCoordinates:"40° 7.38’ , -74° 7.38’",verbatimLatitude:"40° 7.38’",verbatimLongitude:"-74° 7.38’"},{verbatimCoordinates:"N40°7’22.8’’, W74°7’22.8’’",verbatimLatitude:"N40°7’22.8’’",verbatimLongitude:"W74°7’22.8’’"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:`40°7'22.8"N, 74°7'22.8"W`,verbatimLatitude:`40°7'22.8"N`,verbatimLongitude:`74°7'22.8"W`},{verbatimCoordinates:"40 7 22.8, -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"},{verbatimCoordinates:"40.123 -74.123",verbatimLatitude:"40.123",verbatimLongitude:"-74.123"},{verbatimCoordinates:"40.123°,-74.123°",verbatimLatitude:"40.123°",verbatimLongitude:"-74.123°"},{verbatimCoordinates:"40.123N74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"4007.38N7407.38W",verbatimLatitude:"4007.38N",verbatimLongitude:"7407.38W"},{verbatimCoordinates:'40°7’22.8"N, 74°7’22.8"W',verbatimLatitude:'40°7’22.8"N',verbatimLongitude:'74°7’22.8"W'},{verbatimCoordinates:"400722.8N740722.8W",verbatimLatitude:"400722.8N",verbatimLongitude:"740722.8W"},{verbatimCoordinates:"N 40 7.38 W 74 7.38",verbatimLatitude:"N 40 7.38",verbatimLongitude:"W 74 7.38"},{verbatimCoordinates:"40:7:22.8N 74:7:22.8W",verbatimLatitude:"40:7:22.8N",verbatimLongitude:"74:7:22.8W"},{verbatimCoordinates:"40:7:23N,74:7:23W",verbatimLatitude:"40:7:23N",verbatimLongitude:"74:7:23W",decimalLatitude:40.1230555555,decimalLongitude:-74.1230555555},{verbatimCoordinates:'40°7’23"N 74°7’23"W',verbatimLatitude:'40°7’23"N',verbatimLongitude:'74°7’23"W',decimalLatitude:40.1230555555,decimalLongitude:-74.12305555555555},{verbatimCoordinates:'40°7’23"S 74°7’23"E',verbatimLatitude:'40°7’23"S',verbatimLongitude:'74°7’23"E',decimalLatitude:-40.1230555555,decimalLongitude:74.12305555555555},{verbatimCoordinates:'40°7’23" -74°7’23"',verbatimLatitude:'40°7’23"',verbatimLongitude:'-74°7’23"',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:'40d 7’ 23" N 74d 7’ 23" W',verbatimLatitude:'40d 7’ 23" N',verbatimLongitude:'74d 7’ 23" W',decimalLatitude:40.1230555555,decimalLongitude:-74.123055555},{verbatimCoordinates:"40.123N 74.123W",verbatimLatitude:"40.123N",verbatimLongitude:"74.123W"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40° 7.38, -74° 7.38",verbatimLatitude:"40° 7.38",verbatimLongitude:"-74° 7.38"},{verbatimCoordinates:"40 7 22.8; -74 7 22.8",verbatimLatitude:"40 7 22.8",verbatimLongitude:"-74 7 22.8"}],fB={decimalLatitude:40.123,decimalLongitude:-74.123},mB=[{verbatimCoordinates:`50°4'17.698"south, 14°24'2.826"east`,verbatimLatitude:`50°4'17.698"south`,verbatimLongitude:`14°24'2.826"east`,decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"50d4m17.698S 14d24m2.826E",verbatimLatitude:"50d4m17.698S",verbatimLongitude:"14d24m2.826E",decimalLatitude:-50.07158277777778,decimalLongitude:14.400785},{verbatimCoordinates:"40:26:46N,79:56:55W",verbatimLatitude:"40:26:46N",verbatimLongitude:"79:56:55W",decimalLatitude:40.44611111111111,decimalLongitude:-79.9486111111111},{verbatimCoordinates:"40:26:46.302N 79:56:55.903W",verbatimLatitude:"40:26:46.302N",verbatimLongitude:"79:56:55.903W",decimalLatitude:40.446195,decimalLongitude:-79.94886194444445},{verbatimCoordinates:"40°26′47″N 79°58′36″W",verbatimLatitude:"40°26′47″N",verbatimLongitude:"79°58′36″W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40d 26′ 47″ N 79d 58′ 36″ W",verbatimLatitude:"40d 26′ 47″ N",verbatimLongitude:"79d 58′ 36″ W",decimalLatitude:40.44638888888889,decimalLongitude:-79.97666666666667},{verbatimCoordinates:"40.446195N 79.948862W",verbatimLatitude:"40.446195N",verbatimLongitude:"79.948862W",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40,446195° 79,948862°",verbatimLatitude:"40,446195°",verbatimLongitude:"79,948862°",decimalLatitude:40.446195,decimalLongitude:79.948862},{verbatimCoordinates:"40° 26.7717, -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.446195, -79.948862",verbatimLatitude:"40.446195",verbatimLongitude:"-79.948862",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"40.123256; -74.123256",verbatimLatitude:"40.123256",verbatimLongitude:"-74.123256",decimalLatitude:40.123256,decimalLongitude:-74.123256},{verbatimCoordinates:"18°24S 22°45E",verbatimLatitude:"18°24S",verbatimLongitude:"22°45E",decimalLatitude:-18.4,decimalLongitude:22.75}],gB=[{verbatimCoordinates:"10.432342S 10.6345345E",verbatimLatitude:"10.432342S",verbatimLongitude:"10.6345345E",decimalLatitude:-10.432342,decimalLongitude:10.6345345},{verbatimCoordinates:"10.00S 10.00E",verbatimLatitude:"10.00S",verbatimLongitude:"10.00E",decimalLatitude:-10,decimalLongitude:10},{verbatimCoordinates:"00.00S 01.00E",verbatimLatitude:"00.00S",verbatimLongitude:"01.00E",decimalLatitude:0,decimalLongitude:1},{verbatimCoordinates:"18.24S 22.45E",verbatimLatitude:"18.24S",verbatimLongitude:"22.45E",decimalLatitude:-18.4,decimalLongitude:22.75},{verbatimCoordinates:"27deg 15min 45.2sec S 18deg 32min 53.7sec E",verbatimLatitude:"27deg 15min 45.2sec S",verbatimLongitude:"18deg 32min 53.7sec E",decimalLatitude:-27.262555555555554,decimalLongitude:18.54825},{verbatimCoordinates:"-23.3245° S / 28.2344° E",verbatimLatitude:"-23.3245° S",verbatimLongitude:"28.2344° E",decimalLatitude:-23.3245,decimalLongitude:28.2344},{verbatimCoordinates:"40° 26.7717 -79° 56.93172",verbatimLatitude:"40° 26.7717",verbatimLongitude:"-79° 56.93172",decimalLatitude:40.446195,decimalLongitude:-79.948862},{verbatimCoordinates:"27.15.45S 18.32.53E",verbatimLatitude:"27.15.45S",verbatimLongitude:"18.32.53E",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"-27.15.45 18.32.53",verbatimLatitude:"-27.15.45",verbatimLongitude:"18.32.53",decimalLatitude:-27.2625,decimalLongitude:18.548055},{verbatimCoordinates:"27.15.45.2S 18.32.53.4E",verbatimLatitude:"27.15.45.2S",verbatimLongitude:"18.32.53.4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"27.15.45,2S 18.32.53,4E",verbatimLatitude:"27.15.45,2S",verbatimLongitude:"18.32.53,4E",decimalLatitude:-27.262556,decimalLongitude:18.548167},{verbatimCoordinates:"S23.43563 °  E22.45634 °",verbatimLatitude:"S23.43563 °",verbatimLongitude:"E22.45634 °",decimalLatitude:-23.43563,decimalLongitude:22.45634},{verbatimCoordinates:"27,71372° S 23,07771° E",verbatimLatitude:"27,71372° S",verbatimLongitude:"23,07771° E",decimalLatitude:-27.71372,decimalLongitude:23.07771},{verbatimCoordinates:"27.45.34 S 23.23.23 E",verbatimLatitude:"27.45.34 S",verbatimLongitude:"23.23.23 E",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"S 27.45.34 E 23.23.23",verbatimLatitude:"S 27.45.34",verbatimLongitude:"E 23.23.23",decimalLatitude:-27.759444,decimalLongitude:23.38972222},{verbatimCoordinates:"53 16.3863,4 52.8171",verbatimLatitude:"53 16.3863",verbatimLongitude:"4 52.8171",decimalLatitude:53.273105,decimalLongitude:4.88029},{verbatimCoordinates:"50 8.2914,-5 2.4447",verbatimLatitude:"50 8.2914",verbatimLongitude:"-5 2.4447",decimalLatitude:50.13819,decimalLongitude:-5.040745},{verbatimCoordinates:"N 48° 30,6410', E 18° 57,4583'",verbatimLatitude:"N 48° 30,6410'",verbatimLongitude:"E 18° 57,4583'",decimalLatitude:48.51068,decimalLongitude:18.95764},{verbatimCoordinates:"1.23456, 18.33453",verbatimLatitude:"1.23456",verbatimLongitude:"18.33453",decimalLatitude:1.23456,decimalLongitude:18.33453}];function yB(){const e=[];return pB.forEach(t=>{t.decimalLatitude?e.push(t):e.push({...t,...fB})}),[...e,...mB,...gB]}const vB=yB();Zw.formats=vB.map(e=>e.verbatimCoordinates);const _B=Zw;function MT(e,t,n){const o=e.slice();return o[83]=t[n],o[85]=n,o}function AT(e){let t,n;return t=new QO({}),{c(){Ql(t.$$.fragment)},m(o,a){qa(t,o,a),n=!0},i(o){n||(Br(t.$$.fragment,o),n=!0)},o(o){ci(t.$$.fragment,o),n=!1},d(o){Ga(t,o)}}}function LT(e){let t,n,o,a,h;return n=new iB({}),{c(){t=Xn("button"),Ql(n.$$.fragment),Ve(t,"type","button"),Ve(t,"title",e[9]),Ve(t,"class","svelte-qnu791"),fs(t,"active",e[0])},m(d,u){wr(d,t,u),qa(n,t,null),o=!0,a||(h=to(t,"click",e[68]),a=!0)},p(d,u){(!o||u[0]&512)&&Ve(t,"title",d[9]),(!o||u[0]&1)&&fs(t,"active",d[0])},i(d){o||(Br(n.$$.fragment,d),o=!0)},o(d){ci(n.$$.fragment,d),o=!1},d(d){d&&hr(t),Ga(n),a=!1,h()}}}function xB(e){let t,n=[],o=new Map,a,h,d,u=bT(e[14]);const b=w=>w[83].id+(w[83].address?","+w[83].address:"");for(let w=0;w<u.length;w+=1){let P=MT(e,u,w),E=b(P);o.set(E,n[w]=zT(E,P))}return{c(){t=Xn("ul");for(let w=0;w<n.length;w+=1)n[w].c();Ve(t,"class","svelte-qnu791")},m(w,P){wr(w,t,P);for(let E=0;E<n.length;E+=1)n[E]&&n[E].m(t,null);a=!0,h||(d=[to(t,"mouseleave",e[72]),to(t,"blur",e[73])],h=!0)},p(w,P){P[0]&17880064&&(u=bT(w[14]),Cy(),n=$O(n,P,b,1,w,u,o,t,DO,zT,null,MT),ky())},i(w){if(!a){for(let P=0;P<u.length;P+=1)Br(n[P]);a=!0}},o(w){for(let P=0;P<n.length;P+=1)ci(n[P]);a=!1},d(w){w&&hr(t);for(let P=0;P<n.length;P+=1)n[P].d();h=!1,Xa(d)}}}function bB(e){let t,n,o,a,h,d;return n=new pA({}),{c(){t=Xn("div"),Ql(n.$$.fragment),o=Fo(),a=Xn("div"),h=Jl(e[7]),Ve(a,"class","svelte-qnu791"),Ve(t,"class","no-results svelte-qnu791")},m(u,b){wr(u,t,b),qa(n,t,null),_n(t,o),_n(t,a),_n(a,h),d=!0},p(u,b){(!d||b[0]&128)&&Jf(h,u[7])},i(u){d||(Br(n.$$.fragment,u),d=!0)},o(u){ci(n.$$.fragment,u),d=!1},d(u){u&&hr(t),Ga(n)}}}function wB(e){let t="",n;return{c(){n=Jl(t)},m(o,a){wr(o,n,a)},p:cr,i:cr,o:cr,d(o){o&&hr(n)}}}function SB(e){let t,n,o,a,h,d,u,b,w,P,E;return n=new pA({}),b=new dA({}),{c(){t=Xn("div"),Ql(n.$$.fragment),o=Fo(),a=Xn("div"),h=Jl(e[6]),d=Fo(),u=Xn("button"),Ql(b.$$.fragment),Ve(a,"class","svelte-qnu791"),Ve(u,"class","svelte-qnu791"),Ve(t,"class","error svelte-qnu791")},m(I,R){wr(I,t,R),qa(n,t,null),_n(t,o),_n(t,a),_n(a,h),_n(t,d),_n(t,u),qa(b,u,null),w=!0,P||(E=to(u,"click",e[69]),P=!0)},p(I,R){(!w||R[0]&64)&&Jf(h,I[6])},i(I){w||(Br(n.$$.fragment,I),Br(b.$$.fragment,I),w=!0)},o(I){ci(n.$$.fragment,I),ci(b.$$.fragment,I),w=!1},d(I){I&&hr(t),Ga(n),Ga(b),P=!1,E()}}}function zT(e,t){let n,o,a;function h(){return t[70](t[85])}function d(){return t[71](t[83])}return o=new YO({props:{feature:t[83],showPlaceType:t[10],selected:t[15]===t[85],missingIconsCache:t[20],iconsBaseUrl:t[12]}}),o.$on("mouseenter",h),o.$on("focus",d),{key:e,first:null,c(){n=kO(),Ql(o.$$.fragment),this.first=n},m(u,b){wr(u,n,b),qa(o,u,b),a=!0},p(u,b){t=u;const w={};b[0]&16384&&(w.feature=t[83]),b[0]&1024&&(w.showPlaceType=t[10]),b[0]&49152&&(w.selected=t[15]===t[85]),b[0]&4096&&(w.iconsBaseUrl=t[12]),o.$set(w)},i(u){a||(Br(o.$$.fragment,u),a=!0)},o(u){ci(o.$$.fragment,u),a=!1},d(u){u&&hr(n),Ga(o,u)}}}function CB(e){let t,n,o,a,h,d,u,b,w,P,E,I,R,F,U,K,D,j,V,Y,ce,de=!1;h=new sB({}),E=new dA({});let le=e[19]&&AT(),ge=e[5]===!0&&LT(e);const Ae=e[60].default,H=bO(Ae,e,e[59],null),Ee=[SB,wB,bB,xB],je=[];function $e(Le,De){var We,ut;return Le[18]?0:Le[16]?((We=Le[14])==null?void 0:We.length)===0?2:Le[16]&&(ut=Le[14])!=null&&ut.length?3:-1:1}return~(K=$e(e))&&(D=je[K]=Ee[K](e)),{c(){t=Fo(),n=Xn("form"),o=Xn("div"),a=Xn("button"),Ql(h.$$.fragment),d=Fo(),u=Xn("input"),b=Fo(),w=Xn("div"),P=Xn("button"),Ql(E.$$.fragment),I=Fo(),le&&le.c(),R=Fo(),ge&&ge.c(),F=Fo(),H&&H.c(),U=Fo(),D&&D.c(),Ve(a,"class","search-button svelte-qnu791"),Ve(a,"type","button"),Ve(u,"placeholder",e[8]),Ve(u,"aria-label",e[8]),Ve(u,"class","svelte-qnu791"),Ve(P,"type","button"),Ve(P,"title",e[3]),Ve(P,"class","svelte-qnu791"),Ve(w,"class","clear-button-container svelte-qnu791"),fs(w,"displayable",e[1]!==""),Ve(o,"class","input-group svelte-qnu791"),Ve(n,"tabindex","0"),Ve(n,"class",j=yT(e[2])+" svelte-qnu791"),fs(n,"can-collapse",e[4]&&e[1]==="")},m(Le,De){wr(Le,t,De),wr(Le,n,De),_n(n,o),_n(o,a),qa(h,a,null),_n(o,d),_n(o,u),e[62](u),vT(u,e[1]),_n(o,b),_n(o,w),_n(w,P),qa(E,P,null),_n(w,I),le&&le.m(w,null),_n(o,R),ge&&ge.m(o,null),_n(o,F),H&&H.m(o,null),_n(n,U),~K&&je[K].m(n,null),V=!0,Y||(ce=[to(a,"click",e[61]),to(u,"input",e[63]),to(u,"focus",e[64]),to(u,"blur",e[65]),to(u,"keydown",e[22]),to(u,"input",e[66]),to(P,"click",e[67]),to(n,"submit",TO(e[21]))],Y=!0)},p(Le,De){(!V||De[0]&256)&&Ve(u,"placeholder",Le[8]),(!V||De[0]&256)&&Ve(u,"aria-label",Le[8]),De[0]&2&&u.value!==Le[1]&&vT(u,Le[1]),(!V||De[0]&8)&&Ve(P,"title",Le[3]),Le[19]?le?De[0]&524288&&Br(le,1):(le=AT(),le.c(),Br(le,1),le.m(w,null)):le&&(Cy(),ci(le,1,1,()=>{le=null}),ky()),(!V||De[0]&2)&&fs(w,"displayable",Le[1]!==""),Le[5]===!0?ge?(ge.p(Le,De),De[0]&32&&Br(ge,1)):(ge=LT(Le),ge.c(),Br(ge,1),ge.m(o,F)):ge&&(Cy(),ci(ge,1,1,()=>{ge=null}),ky()),H&&H.p&&(!V||De[1]&268435456)&&SO(H,Ae,Le,Le[59],V?wO(Ae,Le[59],De,null):CO(Le[59]),null);let We=K;K=$e(Le),K===We?~K&&je[K].p(Le,De):(D&&(Cy(),ci(je[We],1,1,()=>{je[We]=null}),ky()),~K?(D=je[K],D?D.p(Le,De):(D=je[K]=Ee[K](Le),D.c()),Br(D,1),D.m(n,null)):D=null),(!V||De[0]&4&&j!==(j=yT(Le[2])+" svelte-qnu791"))&&Ve(n,"class",j),(!V||De[0]&22)&&fs(n,"can-collapse",Le[4]&&Le[1]==="")},i(Le){V||(Br(de),Br(h.$$.fragment,Le),Br(E.$$.fragment,Le),Br(le),Br(ge),Br(H,Le),Br(D),V=!0)},o(Le){ci(de),ci(h.$$.fragment,Le),ci(E.$$.fragment,Le),ci(le),ci(ge),ci(H,Le),ci(D),V=!1},d(Le){Le&&(hr(t),hr(n)),Ga(h),e[62](null),Ga(E),le&&le.d(),ge&&ge.d(),H&&H.d(Le),~K&&je[K].d(),Y=!1,Xa(ce)}}}function kB(e,t,n){let o,{$$slots:a={},$$scope:h}=t;const d={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:u=void 0}=t,{apiKey:b}=t,{bbox:w=void 0}=t,{clearButtonTitle:P="clear"}=t,{clearOnBlur:E=!1}=t,{collapsed:I=!1}=t,{country:R=void 0}=t,{debounceSearch:F=200}=t,{enableReverse:U=!1}=t,{errorMessage:K="Something went wrong…"}=t,{filter:D=()=>!0}=t,{flyTo:j=!0}=t,{fuzzyMatch:V=!0}=t,{language:Y=void 0}=t,{limit:ce=void 0}=t,{mapController:de=void 0}=t,{minLength:le=2}=t,{noResultsMessage:ge="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=t,{placeholder:Ae="Search"}=t,{proximity:H=[{type:"server-geolocation"}]}=t,{reverseActive:Ee=U==="always"}=t,{reverseButtonTitle:je="toggle reverse geocoding"}=t,{searchValue:$e=""}=t,{showFullGeometry:Le=!0}=t,{showPlaceType:De="ifNeeded"}=t,{showResultsWhileTyping:We=!0}=t,{selectFirst:ut=!0}=t,{flyToSelected:Be=!1}=t,{markerOnSelected:Ye=!0}=t,{types:pt=void 0}=t,{excludeTypes:St=!1}=t,{zoom:At=d}=t,{maxZoom:Nt=void 0}=t,{apiUrl:Lt="https://api.maptiler.com/geocoding"}=t,{fetchParameters:Zt={}}=t,{iconsBaseUrl:un="https://cdn.maptiler.com/maptiler-geocoding-control/v1.4.1/icons/"}=t,{adjustUrlQuery:en=()=>{}}=t;function Bn(){pn.focus()}function Sn(){pn.blur()}function jt(te,ue=!0,Me=!1){n(1,$e=te),ue?(n(15,ht=-1),Ge()):(it(!Me,Me),setTimeout(()=>{pn.focus(),pn.select()}))}function tn(){n(14,yt=void 0),n(56,we=void 0),n(15,ht=-1)}function Ut(){n(55,zt=[]),n(56,we=void 0)}let gn=!1,yt,zt,we,ir="",pn,ht=-1,Vt,an=[],Qn,bt,Mn,pr;const Zr=new Set,fr=MO();PO(()=>{de&&(de.setEventHandler(void 0),de.indicateReverse(!1),de.setSelectedMarker(-1),de.setMarkers(void 0,void 0))});function Ge(te){if(bt&&(clearTimeout(bt),bt=void 0),ht>-1&&yt)n(56,we=yt[ht]),n(1,$e=we.place_type[0]==="reverse"?we.place_name:we.place_name.replace(/,.*/,"")),n(18,Vt=void 0),n(55,zt=void 0),n(15,ht=-1);else if($e){const ue=te||!or($e);Wn($e,{exact:!0}).then(()=>{n(55,zt=yt),n(56,we=void 0),ue&&on()}).catch(Me=>n(18,Vt=Me))}}function or(te){try{return _B(te,6)}catch{return!1}}async function Wn(te,{byId:ue=!1,exact:Me=!1}={}){n(18,Vt=void 0),Qn==null||Qn.abort();const Re=new AbortController;n(19,Qn=Re);try{const Se=or(te),Ue=new URLSearchParams;if(Y!==void 0&&Ue.set("language",Array.isArray(Y)?Y.join(","):Y??""),pt&&Ue.set("types",pt.join(",")),St&&Ue.set("excludeTypes",String(St)),w&&Ue.set("bbox",w.map($t=>$t.toFixed(6)).join(",")),R&&Ue.set("country",Array.isArray(R)?R.join(","):R),!ue&&!Se){const $t=await lB(de,H,Re);$t&&Ue.set("proximity",$t),(Me||!We)&&Ue.set("autocomplete","false"),Ue.set("fuzzyMatch",String(V))}ce!==void 0&&(!Se||(pt==null?void 0:pt.length)===1)&&Ue.set("limit",String(ce)),Ue.set("key",b),en(Ue);const ft=Lt+"/"+encodeURIComponent(Se?Se.decimalLongitude+","+Se.decimalLatitude:te)+".json?"+Ue.toString();if(ft===ir){ue?(n(14,yt=void 0),n(56,we=an[0])):n(14,yt=an);return}ir=ft;const Tt=await fetch(ft,{signal:Re.signal,...Zt});if(!Tt.ok)throw new Error(await Tt.text());const Yt=await Tt.json();fr("response",{url:ft,featureCollection:Yt}),ue?(n(14,yt=void 0),n(56,we=Yt.features[0]),an=[we]):(n(14,yt=Yt.features.filter(D)),Se&&yt.unshift({type:"Feature",properties:{},id:"reverse_"+Se.decimalLongitude+"_"+Se.decimalLatitude,text:Se.decimalLatitude+", "+Se.decimalLongitude,place_name:Se.decimalLatitude+", "+Se.decimalLongitude,place_type:["reverse"],center:[Se.decimalLongitude,Se.decimalLatitude],bbox:[Se.decimalLongitude,Se.decimalLatitude,Se.decimalLongitude,Se.decimalLatitude],geometry:{type:"Point",coordinates:[Se.decimalLongitude,Se.decimalLatitude]}}),an=yt,Se&&pn.focus())}catch(Se){if(Se&&typeof Se=="object"&&"name"in Se&&Se.name==="AbortError")return;throw Se}finally{Re===Qn&&n(19,Qn=void 0)}}function on(){var te;if(!(zt!=null&&zt.length)||!j)return;const ue=[180,90,-180,-90],Me=!zt.some(Se=>!Se.matching_text);let Re;for(const Se of zt){const Ue=Ir(Se);if(Re=Nt??(Re===void 0?Ue:Ue===void 0?Re:Math.max(Re,Ue)),Me||!Se.matching_text)for(const ft of[0,1,2,3])ue[ft]=Math[ft<2?"min":"max"](ue[ft],((te=Se.bbox)==null?void 0:te[ft])??Se.center[ft%2])}de&&zt.length>0&&(we&&ue[0]===ue[2]&&ue[1]===ue[3]?de.flyTo(we.center,Ir(we)):de.fitBounds(h0(ue),50,Re))}function Ir(te){var ue;if(!te.bbox||te.bbox[0]!==te.bbox[2]&&te.bbox[1]!==te.bbox[3])return;if(typeof At=="number")return te.id.startsWith("poi.")||te.id.startsWith("address.")?Nt:At;const Me=te.id.replace(/\..*/,"");return(Array.isArray((ue=te.properties)==null?void 0:ue.categories)?te.properties.categories.reduce((Re,Se)=>{const Ue=At[Me+"."+Se];return Re===void 0?Ue:Ue===void 0?Re:Math.max(Re,Ue)},void 0):void 0)??At[Me]}function Ze(te){n(0,Ee=U==="always"),n(14,yt=void 0),n(56,we=void 0),n(15,ht=-1),jt(te[1].toFixed(6)+", "+aB(te[0],[-180,180],!0).toFixed(6),!1,!0)}function Ke(te){if(!yt)return;let ue=te.key==="ArrowDown"?1:te.key==="ArrowUp"?-1:0;ue&&(ht===(ut?0:-1)&&ue===-1&&n(15,ht=yt.length),n(15,ht+=ue),ht>=yt.length&&n(15,ht=-1),ht<0&&ut&&n(15,ht=0),te.preventDefault())}function it(te=!0,ue=!1){if(n(18,Vt=void 0),We||ue){if(bt&&clearTimeout(bt),$e.length<le)return;const Me=$e;bt=window.setTimeout(()=>{Wn(Me).catch(Re=>n(18,Vt=Re))},te?F:0)}else n(14,yt=void 0),n(18,Vt=void 0)}function ln(te){n(56,we=te),n(1,$e=te.place_name),n(15,ht=-1)}const Pr=()=>pn.focus();function Rt(te){pb[te?"unshift":"push"](()=>{pn=te,n(17,pn)})}function oo(){$e=this.value,n(1,$e),n(13,gn),n(28,E)}const So=()=>n(13,gn=!0),Xo=()=>n(13,gn=!1),so=()=>it(),he=()=>{n(1,$e=""),pn.focus()},q=()=>n(0,Ee=!Ee),W=()=>n(18,Vt=void 0),Q=te=>n(15,ht=te),oe=te=>ln(te),ve=()=>{ut||n(15,ht=-1)},be=()=>{};return e.$$set=te=>{"class"in te&&n(2,u=te.class),"apiKey"in te&&n(26,b=te.apiKey),"bbox"in te&&n(27,w=te.bbox),"clearButtonTitle"in te&&n(3,P=te.clearButtonTitle),"clearOnBlur"in te&&n(28,E=te.clearOnBlur),"collapsed"in te&&n(4,I=te.collapsed),"country"in te&&n(29,R=te.country),"debounceSearch"in te&&n(30,F=te.debounceSearch),"enableReverse"in te&&n(5,U=te.enableReverse),"errorMessage"in te&&n(6,K=te.errorMessage),"filter"in te&&n(31,D=te.filter),"flyTo"in te&&n(32,j=te.flyTo),"fuzzyMatch"in te&&n(33,V=te.fuzzyMatch),"language"in te&&n(34,Y=te.language),"limit"in te&&n(35,ce=te.limit),"mapController"in te&&n(36,de=te.mapController),"minLength"in te&&n(37,le=te.minLength),"noResultsMessage"in te&&n(7,ge=te.noResultsMessage),"placeholder"in te&&n(8,Ae=te.placeholder),"proximity"in te&&n(38,H=te.proximity),"reverseActive"in te&&n(0,Ee=te.reverseActive),"reverseButtonTitle"in te&&n(9,je=te.reverseButtonTitle),"searchValue"in te&&n(1,$e=te.searchValue),"showFullGeometry"in te&&n(39,Le=te.showFullGeometry),"showPlaceType"in te&&n(10,De=te.showPlaceType),"showResultsWhileTyping"in te&&n(40,We=te.showResultsWhileTyping),"selectFirst"in te&&n(11,ut=te.selectFirst),"flyToSelected"in te&&n(41,Be=te.flyToSelected),"markerOnSelected"in te&&n(42,Ye=te.markerOnSelected),"types"in te&&n(43,pt=te.types),"excludeTypes"in te&&n(44,St=te.excludeTypes),"zoom"in te&&n(45,At=te.zoom),"maxZoom"in te&&n(46,Nt=te.maxZoom),"apiUrl"in te&&n(47,Lt=te.apiUrl),"fetchParameters"in te&&n(48,Zt=te.fetchParameters),"iconsBaseUrl"in te&&n(12,un=te.iconsBaseUrl),"adjustUrlQuery"in te&&n(49,en=te.adjustUrlQuery),"$$scope"in te&&n(59,h=te.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&32&&n(0,Ee=U==="always"),e.$$.dirty[0]&268443648&&setTimeout(()=>{n(16,Mn=gn),E&&!gn&&n(1,$e="")}),e.$$.dirty[0]&16386|e.$$.dirty[1]&64&&$e.length<le&&(n(56,we=void 0),n(14,yt=void 0),n(18,Vt=void 0),n(55,zt=yt)),e.$$.dirty[1]&33554688&&Le&&we&&!we.address&&we.geometry.type==="Point"&&we.place_type[0]!=="reverse"&&Wn(we.id,{byId:!0}).catch(te=>n(18,Vt=te)),e.$$.dirty[1]&100663330&&(de&&we&&we.id!==pr&&j&&(!we.bbox||we.bbox[0]===we.bbox[2]&&we.bbox[1]===we.bbox[3]?de.flyTo(we.center,Ir(we)):de.fitBounds(h0(we.bbox),50,Ir(we)),n(14,yt=void 0),n(55,zt=void 0),n(15,ht=-1)),n(57,pr=we==null?void 0:we.id)),e.$$.dirty[0]&18432&&ut&&yt!=null&&yt.length&&n(15,ht=0),e.$$.dirty[0]&2050&&(ut||n(15,ht=-1)),e.$$.dirty[0]&16384|e.$$.dirty[1]&16777216&&zt!==yt&&n(55,zt=void 0),e.$$.dirty[0]&81921|e.$$.dirty[1]&16777248&&de&&de.setEventHandler(te=>{switch(te.type){case"mapClick":Ee&&Ze(te.coordinates);break;case"markerClick":{const ue=yt==null?void 0:yt.find(Me=>Me.id===te.id);ue&&ln(ue)}break;case"markerMouseEnter":zt&&n(15,ht=Mn?(yt==null?void 0:yt.findIndex(ue=>ue.id===te.id))??-1:-1);break;case"markerMouseLeave":zt&&n(15,ht=-1);break}}),e.$$.dirty[0]&49152&&n(58,o=yt==null?void 0:yt[ht]),e.$$.dirty[1]&134218786&&de&&o&&j&&Be&&de.flyTo(o.center,Ir(o)),e.$$.dirty[1]&2080&&(Ye||de==null||de.setMarkers(void 0,void 0)),e.$$.dirty[1]&150997024&&de&&Ye&&!zt&&(de.setMarkers(o?[o]:void 0,void 0),de.setSelectedMarker(o?0:-1)),e.$$.dirty[1]&50331680&&de&&de.setMarkers(zt,we),e.$$.dirty[0]&32768|e.$$.dirty[1]&16777248&&zt&&de&&de.setSelectedMarker(ht),e.$$.dirty[0]&2|e.$$.dirty[1]&32&&de){const te=or($e);de.setReverseMarker(te?[te.decimalLongitude,te.decimalLatitude]:void 0)}e.$$.dirty[1]&134217728&&fr("select",o),e.$$.dirty[1]&33554432&&fr("pick",we),e.$$.dirty[0]&81920&&fr("optionsVisibilityChange",Mn&&!!yt),e.$$.dirty[0]&16384&&fr("featuresListed",yt),e.$$.dirty[1]&16777216&&fr("featuresMarked",zt),e.$$.dirty[0]&1&&fr("reverseToggle",Ee),e.$$.dirty[0]&2&&fr("queryChange",$e),e.$$.dirty[0]&1|e.$$.dirty[1]&32&&de&&de.indicateReverse(Ee)},[Ee,$e,u,P,I,U,K,ge,Ae,je,De,ut,un,gn,yt,ht,Mn,pn,Vt,Qn,Zr,Ge,Ke,it,ln,d,b,w,E,R,F,D,j,V,Y,ce,de,le,H,Le,We,Be,Ye,pt,St,At,Nt,Lt,Zt,en,Bn,Sn,jt,tn,Ut,zt,we,pr,o,h,a,Pr,Rt,oo,So,Xo,so,he,q,W,Q,oe,ve,be]}let TB=class extends au{constructor(e){super(),su(this,e,kB,CB,ou,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,excludeTypes:44,zoom:45,maxZoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}};function em(e,t,n={}){const o={type:"Feature"};return(n.id===0||n.id)&&(o.id=n.id),n.bbox&&(o.bbox=n.bbox),o.properties=t||{},o.geometry=e,o}function Kw(e,t,n={}){for(const o of e){if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(o[o.length-1].length!==o[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return em({type:"Polygon",coordinates:e},t,n)}function tm(e,t={}){const n={type:"FeatureCollection"};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function fA(e,t,n={}){return em({type:"MultiPolygon",coordinates:e},t,n)}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function EB(e,t){var n={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},o,a,h,d;return d={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function u(w){return function(P){return b([w,P])}}function b(w){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,a&&(h=w[0]&2?a.return:w[0]?a.throw||((h=a.return)&&h.call(a),0):a.next)&&!(h=h.call(a,w[1])).done)return h;switch(a=0,h&&(w=[w[0]&2,h.value]),w[0]){case 0:case 1:h=w;break;case 4:return n.label++,{value:w[1],done:!1};case 5:n.label++,a=w[1],w=[0];continue;case 7:w=n.ops.pop(),n.trys.pop();continue;default:if(h=n.trys,!(h=h.length>0&&h[h.length-1])&&(w[0]===6||w[0]===2)){n=0;continue}if(w[0]===3&&(!h||w[1]>h[0]&&w[1]<h[3])){n.label=w[1];break}if(w[0]===6&&n.label<h[1]){n.label=h[1],h=w;break}if(h&&n.label<h[2]){n.label=h[2],n.ops.push(w);break}h[2]&&n.ops.pop(),n.trys.pop();continue}w=t.call(e,n)}catch(P){w=[6,P],a=0}finally{o=h=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var eu=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function IB(e,t){return e>t?1:e<t?-1:0}function $l(e,t,n){for(var o=new eu(null,null),a=o,h=o;;){var d=n(e,t.key);if(d<0){if(t.left===null)break;if(n(e,t.left.key)<0){var u=t.left;if(t.left=u.right,u.right=t,t=u,t.left===null)break}h.left=t,h=t,t=t.left}else if(d>0){if(t.right===null)break;if(n(e,t.right.key)>0){var u=t.right;if(t.right=u.left,u.left=t,t=u,t.right===null)break}a.right=t,a=t,t=t.right}else break}return a.right=t.left,h.left=t.right,t.left=o.right,t.right=o.left,t}function U_(e,t,n,o){var a=new eu(e,t);if(n===null)return a.left=a.right=null,a;n=$l(e,n,o);var h=o(e,n.key);return h<0?(a.left=n.left,a.right=n,n.left=null):h>=0&&(a.right=n.right,a.left=n,n.right=null),a}function RT(e,t,n){var o=null,a=null;if(t){t=$l(e,t,n);var h=n(t.key,e);h===0?(o=t.left,a=t.right):h<0?(a=t.right,t.right=null,o=t):(o=t.left,t.left=null,a=t)}return{left:o,right:a}}function PB(e,t,n){return t===null?e:(e===null||(t=$l(e.key,t,n),t.left=e),t)}function gb(e,t,n,o,a){if(e){o(""+t+(n?"└── ":"├── ")+a(e)+`
`);var h=t+(n?"    ":"│   ");e.left&&gb(e.left,h,!1,o,a),e.right&&gb(e.right,h,!0,o,a)}}var Xw=function(){function e(t){t===void 0&&(t=IB),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=U_(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var o=new eu(t,n);this._root===null&&(o.left=o.right=null,this._size++,this._root=o);var a=this._comparator,h=$l(t,this._root,a),d=a(t,h.key);return d===0?this._root=h:(d<0?(o.left=h.left,o.right=h,h.left=null):d>0&&(o.right=h.right,o.left=h,h.right=null),this._size++,this._root=o),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,o){var a;if(n===null)return null;n=$l(t,n,o);var h=o(t,n.key);return h===0?(n.left===null?a=n.right:(a=$l(t,n.left,o),a.right=n.right),this._size--,a):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=$l(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,o=this._comparator;n;){var a=o(t,n.key);if(a===0)return n;a<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=$l(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,o=this._comparator;n;){var a=o(t,n.key);if(a===0)return!0;a<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var o=this._root,a=[],h=!1;!h;)o!==null?(a.push(o),o=o.left):a.length!==0?(o=a.pop(),t.call(n,o),o=o.right):h=!0;return this},e.prototype.range=function(t,n,o,a){for(var h=[],d=this._comparator,u=this._root,b;h.length!==0||u;)if(u)h.push(u),u=u.left;else{if(u=h.pop(),b=d(u.key,n),b>0)break;if(d(u.key,t)>=0&&o.call(a,u))return this;u=u.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var o=n.key;return t.push(o)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var o=n.data;return t.push(o)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,o=!1,a=0,h=[];!o;)if(n)h.push(n),n=n.left;else if(h.length>0){if(n=h.pop(),a===t)return n;a++,n=n.right}else o=!0;return null},e.prototype.next=function(t){var n=this._root,o=null;if(t.right){for(o=t.right;o.left;)o=o.left;return o}for(var a=this._comparator;n;){var h=a(t.key,n.key);if(h===0)break;h<0?(o=n,n=n.left):n=n.right}return o},e.prototype.prev=function(t){var n=this._root,o=null;if(t.left!==null){for(o=t.left;o.right;)o=o.right;return o}for(var a=this._comparator;n;){var h=a(t.key,n.key);if(h===0)break;h<0?n=n.left:(o=n,n=n.right)}return o},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return AB(this._root)},e.prototype.load=function(t,n,o){n===void 0&&(n=[]),o===void 0&&(o=!1);var a=t.length,h=this._comparator;if(o&&_b(t,n,0,a-1,h),this._root===null)this._root=yb(t,n,0,a),this._size=a;else{var d=LB(this.toList(),MB(t,n),h);a=this._size+a,this._root=vb({head:d},0,a)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(o){return String(o.key)});var n=[];return gb(this._root,"",!0,function(o){return n.push(o)},t),n.join("")},e.prototype.update=function(t,n,o){var a=this._comparator,h=RT(t,this._root,a),d=h.left,u=h.right;a(t,n)<0?u=U_(n,o,u,a):d=U_(n,o,d,a),this._root=PB(d,u,a)},e.prototype.split=function(t){return RT(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,o;return EB(this,function(a){switch(a.label){case 0:t=this._root,n=[],o=!1,a.label=1;case 1:return o?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return a.sent(),t=t.right,[3,5];case 4:o=!0,a.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function yb(e,t,n,o){var a=o-n;if(a>0){var h=n+Math.floor(a/2),d=e[h],u=t[h],b=new eu(d,u);return b.left=yb(e,t,n,h),b.right=yb(e,t,h+1,o),b}return null}function MB(e,t){for(var n=new eu(null,null),o=n,a=0;a<e.length;a++)o=o.next=new eu(e[a],t[a]);return o.next=null,n.next}function AB(e){for(var t=e,n=[],o=!1,a=new eu(null,null),h=a;!o;)t?(n.push(t),t=t.left):n.length>0?(t=h=h.next=n.pop(),t=t.right):o=!0;return h.next=null,a.next}function vb(e,t,n){var o=n-t;if(o>0){var a=t+Math.floor(o/2),h=vb(e,t,a),d=e.head;return d.left=h,e.head=e.head.next,d.right=vb(e,a+1,n),d}return null}function LB(e,t,n){for(var o=new eu(null,null),a=o,h=e,d=t;h!==null&&d!==null;)n(h.key,d.key)<0?(a.next=h,h=h.next):(a.next=d,d=d.next),a=a.next;return h!==null?a.next=h:d!==null&&(a.next=d),o.next}function _b(e,t,n,o,a){if(!(n>=o)){for(var h=e[n+o>>1],d=n-1,u=o+1;;){do d++;while(a(e[d],h)<0);do u--;while(a(e[u],h)>0);if(d>=u)break;var b=e[d];e[d]=e[u],e[u]=b,b=t[d],t[d]=t[u],t[u]=b}_b(e,t,n,u,a),_b(e,t,u+1,o,a)}}const Ba=11102230246251565e-32,Oi=134217729,zB=(3+8*Ba)*Ba;function V_(e,t,n,o,a){let h,d,u,b,w=t[0],P=o[0],E=0,I=0;P>w==P>-w?(h=w,w=t[++E]):(h=P,P=o[++I]);let R=0;if(E<e&&I<n)for(P>w==P>-w?(d=w+h,u=h-(d-w),w=t[++E]):(d=P+h,u=h-(d-P),P=o[++I]),h=d,u!==0&&(a[R++]=u);E<e&&I<n;)P>w==P>-w?(d=h+w,b=d-h,u=h-(d-b)+(w-b),w=t[++E]):(d=h+P,b=d-h,u=h-(d-b)+(P-b),P=o[++I]),h=d,u!==0&&(a[R++]=u);for(;E<e;)d=h+w,b=d-h,u=h-(d-b)+(w-b),w=t[++E],h=d,u!==0&&(a[R++]=u);for(;I<n;)d=h+P,b=d-h,u=h-(d-b)+(P-b),P=o[++I],h=d,u!==0&&(a[R++]=u);return(h!==0||R===0)&&(a[R++]=h),R}function RB(e,t){let n=t[0];for(let o=1;o<e;o++)n+=t[o];return n}function xm(e){return new Float64Array(e)}const DB=(3+16*Ba)*Ba,$B=(2+12*Ba)*Ba,OB=(9+64*Ba)*Ba*Ba,ch=xm(4),DT=xm(8),$T=xm(12),OT=xm(16),Yi=xm(4);function BB(e,t,n,o,a,h,d){let u,b,w,P,E,I,R,F,U,K,D,j,V,Y,ce,de,le,ge;const Ae=e-a,H=n-a,Ee=t-h,je=o-h;Y=Ae*je,I=Oi*Ae,R=I-(I-Ae),F=Ae-R,I=Oi*je,U=I-(I-je),K=je-U,ce=F*K-(Y-R*U-F*U-R*K),de=Ee*H,I=Oi*Ee,R=I-(I-Ee),F=Ee-R,I=Oi*H,U=I-(I-H),K=H-U,le=F*K-(de-R*U-F*U-R*K),D=ce-le,E=ce-D,ch[0]=ce-(D+E)+(E-le),j=Y+D,E=j-Y,V=Y-(j-E)+(D-E),D=V-de,E=V-D,ch[1]=V-(D+E)+(E-de),ge=j+D,E=ge-j,ch[2]=j-(ge-E)+(D-E),ch[3]=ge;let $e=RB(4,ch),Le=$B*d;if($e>=Le||-$e>=Le||(E=e-Ae,u=e-(Ae+E)+(E-a),E=n-H,w=n-(H+E)+(E-a),E=t-Ee,b=t-(Ee+E)+(E-h),E=o-je,P=o-(je+E)+(E-h),u===0&&b===0&&w===0&&P===0)||(Le=OB*d+zB*Math.abs($e),$e+=Ae*P+je*u-(Ee*w+H*b),$e>=Le||-$e>=Le))return $e;Y=u*je,I=Oi*u,R=I-(I-u),F=u-R,I=Oi*je,U=I-(I-je),K=je-U,ce=F*K-(Y-R*U-F*U-R*K),de=b*H,I=Oi*b,R=I-(I-b),F=b-R,I=Oi*H,U=I-(I-H),K=H-U,le=F*K-(de-R*U-F*U-R*K),D=ce-le,E=ce-D,Yi[0]=ce-(D+E)+(E-le),j=Y+D,E=j-Y,V=Y-(j-E)+(D-E),D=V-de,E=V-D,Yi[1]=V-(D+E)+(E-de),ge=j+D,E=ge-j,Yi[2]=j-(ge-E)+(D-E),Yi[3]=ge;const De=V_(4,ch,4,Yi,DT);Y=Ae*P,I=Oi*Ae,R=I-(I-Ae),F=Ae-R,I=Oi*P,U=I-(I-P),K=P-U,ce=F*K-(Y-R*U-F*U-R*K),de=Ee*w,I=Oi*Ee,R=I-(I-Ee),F=Ee-R,I=Oi*w,U=I-(I-w),K=w-U,le=F*K-(de-R*U-F*U-R*K),D=ce-le,E=ce-D,Yi[0]=ce-(D+E)+(E-le),j=Y+D,E=j-Y,V=Y-(j-E)+(D-E),D=V-de,E=V-D,Yi[1]=V-(D+E)+(E-de),ge=j+D,E=ge-j,Yi[2]=j-(ge-E)+(D-E),Yi[3]=ge;const We=V_(De,DT,4,Yi,$T);Y=u*P,I=Oi*u,R=I-(I-u),F=u-R,I=Oi*P,U=I-(I-P),K=P-U,ce=F*K-(Y-R*U-F*U-R*K),de=b*w,I=Oi*b,R=I-(I-b),F=b-R,I=Oi*w,U=I-(I-w),K=w-U,le=F*K-(de-R*U-F*U-R*K),D=ce-le,E=ce-D,Yi[0]=ce-(D+E)+(E-le),j=Y+D,E=j-Y,V=Y-(j-E)+(D-E),D=V-de,E=V-D,Yi[1]=V-(D+E)+(E-de),ge=j+D,E=ge-j,Yi[2]=j-(ge-E)+(D-E),Yi[3]=ge;const ut=V_(We,$T,4,Yi,OT);return OT[ut-1]}function FB(e,t,n,o,a,h){const d=(t-h)*(n-a),u=(e-a)*(o-h),b=d-u,w=Math.abs(d+u);return Math.abs(b)>=DB*w?b:-BB(e,t,n,o,a,h,w)}const Zp=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,xb=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,a=e.ll.y<t.ll.y?t.ll.y:e.ll.y,h=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:a},ur:{x:o,y:h}}};let Nl=Number.EPSILON;Nl===void 0&&(Nl=Math.pow(2,-52));const NB=Nl*Nl,BT=(e,t)=>{if(-Nl<e&&e<Nl&&-Nl<t&&t<Nl)return 0;const n=e-t;return n*n<NB*e*t?0:e<t?-1:1};class jB{constructor(){this.reset()}reset(){this.xRounder=new FT,this.yRounder=new FT}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class FT{constructor(){this.tree=new Xw,this.round(0)}round(t){const n=this.tree.add(t),o=this.tree.prev(n);if(o!==null&&BT(n.key,o.key)===0)return this.tree.remove(t),o.key;const a=this.tree.next(n);return a!==null&&BT(n.key,a.key)===0?(this.tree.remove(t),a.key):t}}const nm=new jB,Ty=(e,t)=>e.x*t.y-e.y*t.x,mA=(e,t)=>e.x*t.x+e.y*t.y,NT=(e,t,n)=>{const o=FB(e.x,e.y,t.x,t.y,n.x,n.y);return o>0?-1:o<0?1:0},d0=e=>Math.sqrt(mA(e,e)),UB=(e,t,n)=>{const o={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return Ty(a,o)/d0(a)/d0(o)},VB=(e,t,n)=>{const o={x:t.x-e.x,y:t.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return mA(a,o)/d0(a)/d0(o)},jT=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},UT=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},WB=(e,t,n,o)=>{if(t.x===0)return UT(n,o,e.x);if(o.x===0)return UT(e,t,n.x);if(t.y===0)return jT(n,o,e.y);if(o.y===0)return jT(e,t,n.y);const a=Ty(t,o);if(a==0)return null;const h={x:n.x-e.x,y:n.y-e.y},d=Ty(h,t)/a,u=Ty(h,o)/a,b=e.x+u*t.x,w=n.x+d*o.x,P=e.y+u*t.y,E=n.y+d*o.y,I=(b+w)/2,R=(P+E)/2;return{x:I,y:R}};class ss{static compare(t,n){const o=ss.comparePoints(t.point,n.point);return o!==0?o:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:Kl.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let o=0,a=n.length;o<a;o++){const h=n[o];this.point.events.push(h),h.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const o=this.point.events[n];if(o.segment.consumedBy===void 0)for(let a=n+1;a<t;a++){const h=this.point.events[a];h.consumedBy===void 0&&o.otherSE.point.events===h.otherSE.point.events&&o.segment.consume(h.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,o=this.point.events.length;n<o;n++){const a=this.point.events[n];a!==this&&!a.segment.ringOut&&a.segment.isInResult()&&t.push(a)}return t}getLeftmostComparator(t){const n=new Map,o=a=>{const h=a.otherSE;n.set(a,{sine:UB(this.point,t.point,h.point),cosine:VB(this.point,t.point,h.point)})};return(a,h)=>{n.has(a)||o(a),n.has(h)||o(h);const{sine:d,cosine:u}=n.get(a),{sine:b,cosine:w}=n.get(h);return d>=0&&b>=0?u<w?1:u>w?-1:0:d<0&&b<0?u<w?-1:u>w?1:0:b<d?-1:b>d?1:0}}}let qB=0;class Kl{static compare(t,n){const o=t.leftSE.point.x,a=n.leftSE.point.x,h=t.rightSE.point.x,d=n.rightSE.point.x;if(d<o)return 1;if(h<a)return-1;const u=t.leftSE.point.y,b=n.leftSE.point.y,w=t.rightSE.point.y,P=n.rightSE.point.y;if(o<a){if(b<u&&b<w)return 1;if(b>u&&b>w)return-1;const E=t.comparePoint(n.leftSE.point);if(E<0)return 1;if(E>0)return-1;const I=n.comparePoint(t.rightSE.point);return I!==0?I:-1}if(o>a){if(u<b&&u<P)return-1;if(u>b&&u>P)return 1;const E=n.comparePoint(t.leftSE.point);if(E!==0)return E;const I=t.comparePoint(n.rightSE.point);return I<0?1:I>0?-1:1}if(u<b)return-1;if(u>b)return 1;if(h<d){const E=n.comparePoint(t.rightSE.point);if(E!==0)return E}if(h>d){const E=t.comparePoint(n.rightSE.point);if(E<0)return 1;if(E>0)return-1}if(h!==d){const E=w-u,I=h-o,R=P-b,F=d-a;if(E>I&&R<F)return 1;if(E<I&&R>F)return-1}return h>d?1:h<d||w<P?-1:w>P?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,o,a){this.id=++qB,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=o,this.windings=a}static fromRing(t,n,o){let a,h,d;const u=ss.comparePoints(t,n);if(u<0)a=t,h=n,d=1;else if(u>0)a=n,h=t,d=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const b=new ss(a,!0),w=new ss(h,!1);return new Kl(b,w,[o],[d])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,o=this.rightSE.point,a=this.vector();if(n.x===o.x)return t.x===n.x?0:t.x<n.x?1:-1;const h=(t.y-n.y)/a.y,d=n.x+h*a.x;if(t.x===d)return 0;const u=(t.x-n.x)/a.x,b=n.y+u*a.y;return t.y===b?0:t.y<b?-1:1}getIntersection(t){const n=this.bbox(),o=t.bbox(),a=xb(n,o);if(a===null)return null;const h=this.leftSE.point,d=this.rightSE.point,u=t.leftSE.point,b=t.rightSE.point,w=Zp(n,u)&&this.comparePoint(u)===0,P=Zp(o,h)&&t.comparePoint(h)===0,E=Zp(n,b)&&this.comparePoint(b)===0,I=Zp(o,d)&&t.comparePoint(d)===0;if(P&&w)return I&&!E?d:!I&&E?b:null;if(P)return E&&h.x===b.x&&h.y===b.y?null:h;if(w)return I&&d.x===u.x&&d.y===u.y?null:u;if(I&&E)return null;if(I)return d;if(E)return b;const R=WB(h,this.vector(),u,t.vector());return R===null||!Zp(a,R)?null:nm.round(R.x,R.y)}split(t){const n=[],o=t.events!==void 0,a=new ss(t,!0),h=new ss(t,!1),d=this.rightSE;this.replaceRightSE(h),n.push(h),n.push(a);const u=new Kl(a,d,this.rings.slice(),this.windings.slice());return ss.comparePoints(u.leftSE.point,u.rightSE.point)>0&&u.swapEvents(),ss.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(a.checkForConsuming(),h.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,o=this.windings.length;n<o;n++)this.windings[n]*=-1}consume(t){let n=this,o=t;for(;n.consumedBy;)n=n.consumedBy;for(;o.consumedBy;)o=o.consumedBy;const a=Kl.compare(n,o);if(a!==0){if(a>0){const h=n;n=o,o=h}if(n.prev===o){const h=n;n=o,o=h}for(let h=0,d=o.rings.length;h<d;h++){const u=o.rings[h],b=o.windings[h],w=n.rings.indexOf(u);w===-1?(n.rings.push(u),n.windings.push(b)):n.windings[w]+=b}o.rings=null,o.windings=null,o.consumedBy=n,o.leftSE.consumedBy=n.leftSE,o.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,o=this._afterState.windings,a=this._afterState.multiPolys;for(let u=0,b=this.rings.length;u<b;u++){const w=this.rings[u],P=this.windings[u],E=n.indexOf(w);E===-1?(n.push(w),o.push(P)):o[E]+=P}const h=[],d=[];for(let u=0,b=n.length;u<b;u++){if(o[u]===0)continue;const w=n[u],P=w.poly;if(d.indexOf(P)===-1)if(w.isExterior)h.push(P);else{d.indexOf(P)===-1&&d.push(P);const E=h.indexOf(w.poly);E!==-1&&h.splice(E,1)}}for(let u=0,b=h.length;u<b;u++){const w=h[u].multiPoly;a.indexOf(w)===-1&&a.push(w)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Rs.type){case"union":{const o=t.length===0,a=n.length===0;this._isInResult=o!==a;break}case"intersection":{let o,a;t.length<n.length?(o=t.length,a=n.length):(o=n.length,a=t.length),this._isInResult=a===Rs.numMultiPolys&&o<a;break}case"xor":{const o=Math.abs(t.length-n.length);this._isInResult=o%2===1;break}case"difference":{const o=a=>a.length===1&&a[0].isSubject;this._isInResult=o(t)!==o(n);break}default:throw new Error(`Unrecognized operation type found ${Rs.type}`)}return this._isInResult}}class VT{constructor(t,n,o){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=o,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=nm.round(t[0][0],t[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};let h=a;for(let d=1,u=t.length;d<u;d++){if(typeof t[d][0]!="number"||typeof t[d][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let b=nm.round(t[d][0],t[d][1]);b.x===h.x&&b.y===h.y||(this.segments.push(Kl.fromRing(h,b,this)),b.x<this.bbox.ll.x&&(this.bbox.ll.x=b.x),b.y<this.bbox.ll.y&&(this.bbox.ll.y=b.y),b.x>this.bbox.ur.x&&(this.bbox.ur.x=b.x),b.y>this.bbox.ur.y&&(this.bbox.ur.y=b.y),h=b)}(a.x!==h.x||a.y!==h.y)&&this.segments.push(Kl.fromRing(h,a,this))}getSweepEvents(){const t=[];for(let n=0,o=this.segments.length;n<o;n++){const a=this.segments[n];t.push(a.leftSE),t.push(a.rightSE)}return t}}class GB{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new VT(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let o=1,a=t.length;o<a;o++){const h=new VT(t[o],this,!1);h.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=h.bbox.ur.y),this.interiorRings.push(h)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,o=this.interiorRings.length;n<o;n++){const a=this.interiorRings[n].getSweepEvents();for(let h=0,d=a.length;h<d;h++)t.push(a[h])}return t}}class WT{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let o=0,a=t.length;o<a;o++){const h=new GB(t[o],this);h.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=h.bbox.ll.x),h.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=h.bbox.ll.y),h.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=h.bbox.ur.x),h.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=h.bbox.ur.y),this.polys.push(h)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,o=this.polys.length;n<o;n++){const a=this.polys[n].getSweepEvents();for(let h=0,d=a.length;h<d;h++)t.push(a[h])}return t}}class p0{static factory(t){const n=[];for(let o=0,a=t.length;o<a;o++){const h=t[o];if(!h.isInResult()||h.ringOut)continue;let d=null,u=h.leftSE,b=h.rightSE;const w=[u],P=u.point,E=[];for(;d=u,u=b,w.push(u),u.point!==P;)for(;;){const I=u.getAvailableLinkedEvents();if(I.length===0){const U=w[0].point,K=w[w.length-1].point;throw new Error(`Unable to complete output ring starting at [${U.x}, ${U.y}]. Last matching segment found ends at [${K.x}, ${K.y}].`)}if(I.length===1){b=I[0].otherSE;break}let R=null;for(let U=0,K=E.length;U<K;U++)if(E[U].point===u.point){R=U;break}if(R!==null){const U=E.splice(R)[0],K=w.splice(U.index);K.unshift(K[0].otherSE),n.push(new p0(K.reverse()));continue}E.push({index:w.length,point:u.point});const F=u.getLeftmostComparator(d);b=I.sort(F)[0].otherSE;break}n.push(new p0(w))}return n}constructor(t){this.events=t;for(let n=0,o=t.length;n<o;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let w=1,P=this.events.length-1;w<P;w++){const E=this.events[w].point,I=this.events[w+1].point;NT(E,t,I)!==0&&(n.push(E),t=E)}if(n.length===1)return null;const o=n[0],a=n[1];NT(o,t,a)===0&&n.shift(),n.push(n[0]);const h=this.isExteriorRing()?1:-1,d=this.isExteriorRing()?0:n.length-1,u=this.isExteriorRing()?n.length:-1,b=[];for(let w=d;w!=u;w+=h)b.push([n[w].x,n[w].y]);return b}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let a=1,h=this.events.length;a<h;a++){const d=this.events[a];ss.compare(t,d)>0&&(t=d)}let n=t.segment.prevInResult(),o=n?n.prevInResult():null;for(;;){if(!n)return null;if(!o)return n.ringOut;if(o.ringOut!==n.ringOut)return o.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=o.prevInResult(),o=n?n.prevInResult():null}}}class qT{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,o=this.interiorRings.length;n<o;n++){const a=this.interiorRings[n].getGeom();a!==null&&t.push(a)}return t}}class HB{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,o=this.polys.length;n<o;n++){const a=this.polys[n].getGeom();a!==null&&t.push(a)}return t}_composePolys(t){const n=[];for(let o=0,a=t.length;o<a;o++){const h=t[o];if(!h.poly)if(h.isExteriorRing())n.push(new qT(h));else{const d=h.enclosingRing();d.poly||n.push(new qT(d)),d.poly.addInterior(h)}}return n}}class ZB{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kl.compare;this.queue=t,this.tree=new Xw(n),this.segments=[]}process(t){const n=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),o;const a=t.isLeft?this.tree.add(n):this.tree.find(n);if(!a)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let h=a,d=a,u,b;for(;u===void 0;)h=this.tree.prev(h),h===null?u=null:h.key.consumedBy===void 0&&(u=h.key);for(;b===void 0;)d=this.tree.next(d),d===null?b=null:d.key.consumedBy===void 0&&(b=d.key);if(t.isLeft){let w=null;if(u){const E=u.getIntersection(n);if(E!==null&&(n.isAnEndpoint(E)||(w=E),!u.isAnEndpoint(E))){const I=this._splitSafely(u,E);for(let R=0,F=I.length;R<F;R++)o.push(I[R])}}let P=null;if(b){const E=b.getIntersection(n);if(E!==null&&(n.isAnEndpoint(E)||(P=E),!b.isAnEndpoint(E))){const I=this._splitSafely(b,E);for(let R=0,F=I.length;R<F;R++)o.push(I[R])}}if(w!==null||P!==null){let E=null;w===null?E=P:P===null?E=w:E=ss.comparePoints(w,P)<=0?w:P,this.queue.remove(n.rightSE),o.push(n.rightSE);const I=n.split(E);for(let R=0,F=I.length;R<F;R++)o.push(I[R])}o.length>0?(this.tree.remove(n),o.push(t)):(this.segments.push(n),n.prev=u)}else{if(u&&b){const w=u.getIntersection(b);if(w!==null){if(!u.isAnEndpoint(w)){const P=this._splitSafely(u,w);for(let E=0,I=P.length;E<I;E++)o.push(P[E])}if(!b.isAnEndpoint(w)){const P=this._splitSafely(b,w);for(let E=0,I=P.length;E<I;E++)o.push(P[E])}}}this.tree.remove(n)}return o}_splitSafely(t,n){this.tree.remove(t);const o=t.rightSE;this.queue.remove(o);const a=t.split(n);return a.push(o),t.consumedBy===void 0&&this.tree.add(t),a}}const GT=typeof process<"u"&&iA.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,KB=typeof process<"u"&&iA.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class XB{run(t,n,o){Rs.type=t,nm.reset();const a=[new WT(n,!0)];for(let P=0,E=o.length;P<E;P++)a.push(new WT(o[P],!1));if(Rs.numMultiPolys=a.length,Rs.type==="difference"){const P=a[0];let E=1;for(;E<a.length;)xb(a[E].bbox,P.bbox)!==null?E++:a.splice(E,1)}if(Rs.type==="intersection")for(let P=0,E=a.length;P<E;P++){const I=a[P];for(let R=P+1,F=a.length;R<F;R++)if(xb(I.bbox,a[R].bbox)===null)return[]}const h=new Xw(ss.compare);for(let P=0,E=a.length;P<E;P++){const I=a[P].getSweepEvents();for(let R=0,F=I.length;R<F;R++)if(h.insert(I[R]),h.size>GT)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const d=new ZB(h);let u=h.size,b=h.pop();for(;b;){const P=b.key;if(h.size===u){const I=P.segment;throw new Error(`Unable to pop() ${P.isLeft?"left":"right"} SweepEvent [${P.point.x}, ${P.point.y}] from segment #${I.id} [${I.leftSE.point.x}, ${I.leftSE.point.y}] -> [${I.rightSE.point.x}, ${I.rightSE.point.y}] from queue.`)}if(h.size>GT)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(d.segments.length>KB)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const E=d.process(P);for(let I=0,R=E.length;I<R;I++){const F=E[I];F.consumedBy===void 0&&h.insert(F)}u=h.size,b=h.pop()}nm.reset();const w=p0.factory(d.segments);return new HB(w).getGeom()}}const Rs=new XB,YB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Rs.run("union",e,n)},JB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Rs.run("intersection",e,n)},QB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Rs.run("xor",e,n)},eF=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Rs.run("difference",e,n)};var gA={union:YB,intersection:JB,xor:QB,difference:eF};function yA(e,t,n){if(e!==null)for(var o,a,h,d,u,b,w,P=0,E=0,I,R=e.type,F=R==="FeatureCollection",U=R==="Feature",K=F?e.features.length:1,D=0;D<K;D++){w=F?e.features[D].geometry:U?e.geometry:e,I=w?w.type==="GeometryCollection":!1,u=I?w.geometries.length:1;for(var j=0;j<u;j++){var V=0,Y=0;if(d=I?w.geometries[j]:w,d!==null){b=d.coordinates;var ce=d.type;switch(P=0,ce){case null:break;case"Point":if(t(b,E,D,V,Y)===!1)return!1;E++,V++;break;case"LineString":case"MultiPoint":for(o=0;o<b.length;o++){if(t(b[o],E,D,V,Y)===!1)return!1;E++,ce==="MultiPoint"&&V++}ce==="LineString"&&V++;break;case"Polygon":case"MultiLineString":for(o=0;o<b.length;o++){for(a=0;a<b[o].length-P;a++){if(t(b[o][a],E,D,V,Y)===!1)return!1;E++}ce==="MultiLineString"&&V++,ce==="Polygon"&&Y++}ce==="Polygon"&&V++;break;case"MultiPolygon":for(o=0;o<b.length;o++){for(Y=0,a=0;a<b[o].length;a++){for(h=0;h<b[o][a].length-P;h++){if(t(b[o][a][h],E,D,V,Y)===!1)return!1;E++}Y++}V++}break;case"GeometryCollection":for(o=0;o<d.geometries.length;o++)if(yA(d.geometries[o],t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Yw(e,t){var n,o,a,h,d,u,b,w,P,E,I=0,R=e.type==="FeatureCollection",F=e.type==="Feature",U=R?e.features.length:1;for(n=0;n<U;n++){for(u=R?e.features[n].geometry:F?e.geometry:e,w=R?e.features[n].properties:F?e.properties:{},P=R?e.features[n].bbox:F?e.bbox:void 0,E=R?e.features[n].id:F?e.id:void 0,b=u?u.type==="GeometryCollection":!1,d=b?u.geometries.length:1,a=0;a<d;a++){if(h=b?u.geometries[a]:u,h===null){if(t(null,I,w,P,E)===!1)return!1;continue}switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(h,I,w,P,E)===!1)return!1;break}case"GeometryCollection":{for(o=0;o<h.geometries.length;o++)if(t(h.geometries[o],I,w,P,E)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function tF(e,t){Yw(e,function(n,o,a,h,d){var u=n===null?null:n.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return t(em(n,a,{bbox:h,id:d}),o,0)===!1?!1:void 0}var b;switch(u){case"MultiPoint":b="Point";break;case"MultiLineString":b="LineString";break;case"MultiPolygon":b="Polygon";break}for(var w=0;w<n.coordinates.length;w++){var P=n.coordinates[w],E={type:b,coordinates:P};if(t(em(E,a),o,w)===!1)return!1}})}function nF(e,t={}){const n=[];if(Yw(e,a=>{n.push(a.coordinates)}),n.length<2)throw new Error("Must have at least 2 geometries");const o=gA.union(n[0],...n.slice(1));return o.length===0?null:o.length===1?Kw(o[0],t.properties):fA(o,t.properties)}var vA=nF;function rF(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;const n=[1/0,1/0,-1/0,-1/0];return yA(e,o=>{n[0]>o[0]&&(n[0]=o[0]),n[1]>o[1]&&(n[1]=o[1]),n[2]<o[0]&&(n[2]=o[0]),n[3]<o[1]&&(n[3]=o[1])}),n}var HT=rF;function iF(e){const t=[];if(Yw(e,a=>{t.push(a.coordinates)}),t.length<2)throw new Error("Must have at least two features");const n=e.features[0].properties||{},o=gA.difference(t[0],...t.slice(1));return o.length===0?null:o.length===1?Kw(o[0],n):fA(o,n)}var oF=iF;function sF(e){if(!e)throw new Error("geojson is required");var t=[];return tF(e,function(n){t.push(n)}),tm(t)}var aF=sF;function ZT(e,t){const n=oF(tm([Kw([[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]),e]));if(!n)return;n.properties={isMask:!0};const o=h0(HT(e)),a=(o[2]-o[0])/360/1e3,h=o[0]<-180,d=o[2]>180,u=aF(e);if(u.features.length>1&&(h||d))for(const b of u.features){const w=h0(HT(b));if(d&&w[0]<-180+a)for(const P of b.geometry.coordinates)for(const E of P)E[0]+=360-a;if(h&&w[2]>180-a)for(const P of b.geometry.coordinates)for(const E of P)E[0]-=360-a}t(tm([u.features.length<2?e:vA(u)??e,n]))}const KT=tm([]);function lF(e,t,n=!0,o=!0,a={},h={},d={fill:{paint:{"fill-color":"#000","fill-opacity":.1},filter:["all",["==",["geometry-type"],"Polygon"],["has","isMask"]]},line:{layout:{"line-cap":"square"},paint:{"line-width":["case",["==",["geometry-type"],"Polygon"],2,3],"line-dasharray":[1,1],"line-color":"#3170fe"},filter:["!",["has","isMask"]]}}){let u;const b=[];let w,P,E;function I(){!e.getSource("full-geom")&&(d!=null&&d.fill||d!=null&&d.line)&&e.addSource("full-geom",{type:"geojson",data:KT}),!e.getLayer("full-geom-fill")&&d!=null&&d.fill&&e.addLayer({...d==null?void 0:d.fill,id:"full-geom-fill",type:"fill",source:"full-geom"}),!e.getLayer("full-geom-line")&&d!=null&&d.line&&e.addLayer({...d==null?void 0:d.line,id:"full-geom-line",type:"line",source:"full-geom"}),E&&U(E)}e.loaded()?I():e.once("load",()=>{I()}),e.on("styledata",()=>{I()});const R=K=>{u==null||u({type:"mapClick",coordinates:[K.lngLat.lng,K.lngLat.lat]})};function F(K=!1){if(!t)throw new Error;const D=document.createElement("div");return K&&D.classList.add("marker-interactive"),new nB({props:{displayIn:"maplibre"},target:D}),new t.Marker({element:D,offset:[1,-13]})}function U(K){var D;E=K,K&&((D=e.getSource("full-geom"))==null||D.setData(K))}return{setEventHandler(K){K?(u=K,e.on("click",R)):(u=void 0,e.off("click",R))},flyTo(K,D){e.flyTo({center:K,...D?{zoom:D}:{},...a})},fitBounds(K,D,j){e.fitBounds([[K[0],K[1]],[K[2],K[3]]],{padding:D,...j?{maxZoom:j}:{},...h})},indicateReverse(K){e.getCanvasContainer().style.cursor=K?"crosshair":""},setReverseMarker(K){!t||!n||(P?K?P.setLngLat(K):(P.remove(),P=void 0):K&&(P=(typeof n=="object"?new t.Marker(n):F()).setLngLat(K).addTo(e),P.getElement().classList.add("marker-reverse")))},setMarkers(K,D){if(n){for(const j of b)j.remove();if(b.length=0,U(KT),!!t){if(D){let j=!1;if(D.geometry.type==="GeometryCollection"){const V=D.geometry.geometries.filter(Y=>Y.type==="Polygon"||Y.type==="MultiPolygon");e:if(V.length>0){const Y=vA(tm(V.map(ce=>em(ce))));if(!Y)break e;ZT({...D,geometry:Y.geometry},U),j=!0}else{const Y=D.geometry.geometries.filter(ce=>ce.type==="LineString"||ce.type==="MultiLineString");Y.length>0&&(U({...D,geometry:{type:"GeometryCollection",geometries:Y}}),j=!0)}}if(!j){if(D.geometry.type==="Polygon"||D.geometry.type==="MultiPolygon")ZT(D,U);else if(D.geometry.type==="LineString"||D.geometry.type==="MultiLineString"){U(D);return}}n&&b.push((typeof n=="object"?new t.Marker(n):F()).setLngLat(D.center).addTo(e))}if(o)for(const j of K??[]){if(j===D)continue;const V=(typeof o=="object"?new t.Marker(o):F(!0)).setLngLat(j.center).setPopup(new t.Popup({offset:[1,-27],closeButton:!1,closeOnMove:!0,className:"maptiler-gc-popup"}).setText(j.place_type[0]==="reverse"?j.place_name:j.place_name.replace(/,.*/,""))).addTo(e),Y=V.getElement();Y.addEventListener("click",ce=>{ce.stopPropagation(),u==null||u({type:"markerClick",id:j.id})}),Y.addEventListener("mouseenter",()=>{u==null||u({type:"markerMouseEnter",id:j.id}),V.togglePopup()}),Y.addEventListener("mouseleave",()=>{u==null||u({type:"markerMouseLeave",id:j.id}),V.togglePopup()}),b.push(V)}}}},setSelectedMarker(K){w&&w.getElement().classList.toggle("marker-selected",!1),w=K>-1?b[K]:void 0,w==null||w.getElement().classList.toggle("marker-selected",!0)},getCenterAndZoom(){const K=e.getCenter();return[e.getZoom(),K.lng,K.lat]}}}var is,wh;class uF extends EventTarget{constructor(t={}){super(),mT(this,is),mT(this,wh),N_(this,wh,t)}onAddInt(t){const n=document.createElement("div");n.className="mapboxgl-ctrl-geocoder mapboxgl-ctrl maplibregl-ctrl-geocoder maplibregl-ctrl mapboxgl-ctrl-group";const{marker:o,showResultMarkers:a,flyTo:h,fullGeometryStyle:d,...u}=Is(this,wh),b=typeof h=="boolean"?{}:h,w=this.getExtraProps(t,n),P={mapController:lF(t,this.getMapLibreGl(),o,a,b,b,d),flyTo:h===void 0?!0:!!h,apiKey:"",...w,...u};if(!P.apiKey)throw new Error("no apiKey provided");N_(this,is,new TB({target:n,props:P}));for(const E of["select","pick","featuresListed","featuresMarked","response","optionsVisibilityChange","reverseToggle","queryChange"])Is(this,is).$on(E,I=>this.dispatchEvent(I));return n}setOptions(t){var n;N_(this,wh,t);const{marker:o,showResultMarkers:a,flyTo:h,fullGeometryStyle:d,...u}=Is(this,wh);(n=Is(this,is))==null||n.$set(u)}setQuery(t,n=!0){var o;(o=Is(this,is))==null||o.setQuery(t,n)}clearMap(){var t;(t=Is(this,is))==null||t.clearMap()}clearList(){var t;(t=Is(this,is))==null||t.clearList()}setReverseMode(t){var n;(n=Is(this,is))==null||n.$set({reverseActive:t})}focus(){var t;(t=Is(this,is))==null||t.focus()}blur(){var t;(t=Is(this,is))==null||t.blur()}onRemove(){var t;(t=Is(this,is))==null||t.$destroy()}}is=new WeakMap,wh=new WeakMap;class cF extends uF{getMapLibreGl(){return q6}onAdd(t){return super.onAddInt(t)}getExtraProps(){return{}}}function hF(){const e=re.useRef(null),t=re.useRef(null),n={lng:139.753,lat:35.6844},o=15;return Qi.apiKey="0RIdnIp4oGo6HhkfVfWj",re.useEffect(()=>{if(t.current)return;t.current=new rA({container:e.current,style:Gh.STREETS,center:[n.lng,n.lat],zoom:o}),new Vp({color:"#2CDA9D"}).setLngLat([139.7525,35.6846]).setPopup(new Wp().setHTML("Traditional Tea Sets Anzuri")).addTo(t.current),new Vp({color:"#2CDA9D"}).setLngLat([139.74,35.69]).setPopup(new Wp().setHTML("Tokyo Souvenir Mimoto")).addTo(t.current),new Vp({color:"#2CDA9D"}).setLngLat([139.71,35.71]).setPopup(new Wp().setHTML("SHIBUYA Souvenirs")).addTo(t.current),new Vp({color:"#2CDA9D"}).setLngLat([139.74,35.68]).setPopup(new Wp().setHTML("KYOTOTO")).addTo(t.current),new Vp({color:"#2CDA9D"}).setLngLat([8.432436222,47.14508040683401]).setPopup(new Wp().setHTML("Cool HSLU store")).addTo(t.current);const a=new cF({apiKey:"0RIdnIp4oGo6HhkfVfWj",maplibregl:Et,flyTo:!0});t.current.addControl(a,"top-left")},[n.lng,n.lat,o]),Ie.jsx("div",{className:"map-wrap",children:Ie.jsx("div",{ref:e,className:"map"})})}const rm={black:"#000",white:"#fff"},hh={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},dh={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ph={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},fh={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},mh={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Kp={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},dF={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Ha(e,...t){const n=new URL(`https://mui.com/production-error/?code=${e}`);return t.forEach(o=>n.searchParams.append("args[]",o)),`Minified MUI error #${e}; visit ${n} for the full message.`}const tv="$$material";function f0(){return f0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f0.apply(null,arguments)}function _A(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var pF=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,fF=_A(function(e){return pF.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),mF=!1;function gF(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function yF(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var vF=function(){function e(n){var o=this;this._insertTag=function(a){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(a,h),o.tags.push(a)},this.isSpeedy=n.speedy===void 0?!mF:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(yF(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var h=gF(a);try{h.insertRule(o,h.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var a;return(a=o.parentNode)==null?void 0:a.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Bi="-ms-",m0="-moz-",Rn="-webkit-",xA="comm",Jw="rule",Qw="decl",_F="@import",bA="@keyframes",xF="@layer",bF=Math.abs,nv=String.fromCharCode,wF=Object.assign;function SF(e,t){return Si(e,0)^45?(((t<<2^Si(e,0))<<2^Si(e,1))<<2^Si(e,2))<<2^Si(e,3):0}function wA(e){return e.trim()}function CF(e,t){return(e=t.exec(e))?e[0]:e}function Dn(e,t,n){return e.replace(t,n)}function bb(e,t){return e.indexOf(t)}function Si(e,t){return e.charCodeAt(t)|0}function im(e,t,n){return e.slice(t,n)}function ea(e){return e.length}function e2(e){return e.length}function Qg(e,t){return t.push(e),e}function kF(e,t){return e.map(t).join("")}var rv=1,hd=1,SA=0,wo=0,Gr=0,wd="";function iv(e,t,n,o,a,h,d){return{value:e,root:t,parent:n,type:o,props:a,children:h,line:rv,column:hd,length:d,return:""}}function Xp(e,t){return wF(iv("",null,null,"",null,null,0),e,{length:-e.length},t)}function TF(){return Gr}function EF(){return Gr=wo>0?Si(wd,--wo):0,hd--,Gr===10&&(hd=1,rv--),Gr}function qo(){return Gr=wo<SA?Si(wd,wo++):0,hd++,Gr===10&&(hd=1,rv++),Gr}function ca(){return Si(wd,wo)}function Ey(){return wo}function bm(e,t){return im(wd,e,t)}function om(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CA(e){return rv=hd=1,SA=ea(wd=e),wo=0,[]}function kA(e){return wd="",e}function Iy(e){return wA(bm(wo-1,wb(e===91?e+2:e===40?e+1:e)))}function IF(e){for(;(Gr=ca())&&Gr<33;)qo();return om(e)>2||om(Gr)>3?"":" "}function PF(e,t){for(;--t&&qo()&&!(Gr<48||Gr>102||Gr>57&&Gr<65||Gr>70&&Gr<97););return bm(e,Ey()+(t<6&&ca()==32&&qo()==32))}function wb(e){for(;qo();)switch(Gr){case e:return wo;case 34:case 39:e!==34&&e!==39&&wb(Gr);break;case 40:e===41&&wb(e);break;case 92:qo();break}return wo}function MF(e,t){for(;qo()&&e+Gr!==57;)if(e+Gr===84&&ca()===47)break;return"/*"+bm(t,wo-1)+"*"+nv(e===47?e:qo())}function AF(e){for(;!om(ca());)qo();return bm(e,wo)}function LF(e){return kA(Py("",null,null,null,[""],e=CA(e),0,[0],e))}function Py(e,t,n,o,a,h,d,u,b){for(var w=0,P=0,E=d,I=0,R=0,F=0,U=1,K=1,D=1,j=0,V="",Y=a,ce=h,de=o,le=V;K;)switch(F=j,j=qo()){case 40:if(F!=108&&Si(le,E-1)==58){bb(le+=Dn(Iy(j),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:le+=Iy(j);break;case 9:case 10:case 13:case 32:le+=IF(F);break;case 92:le+=PF(Ey()-1,7);continue;case 47:switch(ca()){case 42:case 47:Qg(zF(MF(qo(),Ey()),t,n),b);break;default:le+="/"}break;case 123*U:u[w++]=ea(le)*D;case 125*U:case 59:case 0:switch(j){case 0:case 125:K=0;case 59+P:D==-1&&(le=Dn(le,/\f/g,"")),R>0&&ea(le)-E&&Qg(R>32?YT(le+";",o,n,E-1):YT(Dn(le," ","")+";",o,n,E-2),b);break;case 59:le+=";";default:if(Qg(de=XT(le,t,n,w,P,a,u,V,Y=[],ce=[],E),h),j===123)if(P===0)Py(le,t,de,de,Y,h,E,u,ce);else switch(I===99&&Si(le,3)===110?100:I){case 100:case 108:case 109:case 115:Py(e,de,de,o&&Qg(XT(e,de,de,0,0,a,u,V,a,Y=[],E),ce),a,ce,E,u,o?Y:ce);break;default:Py(le,de,de,de,[""],ce,0,u,ce)}}w=P=R=0,U=D=1,V=le="",E=d;break;case 58:E=1+ea(le),R=F;default:if(U<1){if(j==123)--U;else if(j==125&&U++==0&&EF()==125)continue}switch(le+=nv(j),j*U){case 38:D=P>0?1:(le+="\f",-1);break;case 44:u[w++]=(ea(le)-1)*D,D=1;break;case 64:ca()===45&&(le+=Iy(qo())),I=ca(),P=E=ea(V=le+=AF(Ey())),j++;break;case 45:F===45&&ea(le)==2&&(U=0)}}return h}function XT(e,t,n,o,a,h,d,u,b,w,P){for(var E=a-1,I=a===0?h:[""],R=e2(I),F=0,U=0,K=0;F<o;++F)for(var D=0,j=im(e,E+1,E=bF(U=d[F])),V=e;D<R;++D)(V=wA(U>0?I[D]+" "+j:Dn(j,/&\f/g,I[D])))&&(b[K++]=V);return iv(e,t,n,a===0?Jw:u,b,w,P)}function zF(e,t,n){return iv(e,t,n,xA,nv(TF()),im(e,2,-2),0)}function YT(e,t,n,o){return iv(e,t,n,Qw,im(e,0,o),im(e,o+1,-1),o)}function Qh(e,t){for(var n="",o=e2(e),a=0;a<o;a++)n+=t(e[a],a,e,t)||"";return n}function RF(e,t,n,o){switch(e.type){case xF:if(e.children.length)break;case _F:case Qw:return e.return=e.return||e.value;case xA:return"";case bA:return e.return=e.value+"{"+Qh(e.children,o)+"}";case Jw:e.value=e.props.join(",")}return ea(n=Qh(e.children,o))?e.return=e.value+"{"+n+"}":""}function DF(e){var t=e2(e);return function(n,o,a,h){for(var d="",u=0;u<t;u++)d+=e[u](n,o,a,h)||"";return d}}function $F(e){return function(t){t.root||(t=t.return)&&e(t)}}var OF=function(t,n,o){for(var a=0,h=0;a=h,h=ca(),a===38&&h===12&&(n[o]=1),!om(h);)qo();return bm(t,wo)},BF=function(t,n){var o=-1,a=44;do switch(om(a)){case 0:a===38&&ca()===12&&(n[o]=1),t[o]+=OF(wo-1,n,o);break;case 2:t[o]+=Iy(a);break;case 4:if(a===44){t[++o]=ca()===58?"&\f":"",n[o]=t[o].length;break}default:t[o]+=nv(a)}while(a=qo());return t},FF=function(t,n){return kA(BF(CA(t),n))},JT=new WeakMap,NF=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,o=t.parent,a=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!JT.get(o))&&!a){JT.set(t,!0);for(var h=[],d=FF(n,h),u=o.props,b=0,w=0;b<d.length;b++)for(var P=0;P<u.length;P++,w++)t.props[w]=h[b]?d[b].replace(/&\f/g,u[P]):u[P]+" "+d[b]}}},jF=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function TA(e,t){switch(SF(e,t)){case 5103:return Rn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Rn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Rn+e+m0+e+Bi+e+e;case 6828:case 4268:return Rn+e+Bi+e+e;case 6165:return Rn+e+Bi+"flex-"+e+e;case 5187:return Rn+e+Dn(e,/(\w+).+(:[^]+)/,Rn+"box-$1$2"+Bi+"flex-$1$2")+e;case 5443:return Rn+e+Bi+"flex-item-"+Dn(e,/flex-|-self/,"")+e;case 4675:return Rn+e+Bi+"flex-line-pack"+Dn(e,/align-content|flex-|-self/,"")+e;case 5548:return Rn+e+Bi+Dn(e,"shrink","negative")+e;case 5292:return Rn+e+Bi+Dn(e,"basis","preferred-size")+e;case 6060:return Rn+"box-"+Dn(e,"-grow","")+Rn+e+Bi+Dn(e,"grow","positive")+e;case 4554:return Rn+Dn(e,/([^-])(transform)/g,"$1"+Rn+"$2")+e;case 6187:return Dn(Dn(Dn(e,/(zoom-|grab)/,Rn+"$1"),/(image-set)/,Rn+"$1"),e,"")+e;case 5495:case 3959:return Dn(e,/(image-set\([^]*)/,Rn+"$1$`$1");case 4968:return Dn(Dn(e,/(.+:)(flex-)?(.*)/,Rn+"box-pack:$3"+Bi+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Rn+e+e;case 4095:case 3583:case 4068:case 2532:return Dn(e,/(.+)-inline(.+)/,Rn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ea(e)-1-t>6)switch(Si(e,t+1)){case 109:if(Si(e,t+4)!==45)break;case 102:return Dn(e,/(.+:)(.+)-([^]+)/,"$1"+Rn+"$2-$3$1"+m0+(Si(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~bb(e,"stretch")?TA(Dn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Si(e,t+1)!==115)break;case 6444:switch(Si(e,ea(e)-3-(~bb(e,"!important")&&10))){case 107:return Dn(e,":",":"+Rn)+e;case 101:return Dn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Rn+(Si(e,14)===45?"inline-":"")+"box$3$1"+Rn+"$2$3$1"+Bi+"$2box$3")+e}break;case 5936:switch(Si(e,t+11)){case 114:return Rn+e+Bi+Dn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Rn+e+Bi+Dn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Rn+e+Bi+Dn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Rn+e+Bi+e+e}return e}var UF=function(t,n,o,a){if(t.length>-1&&!t.return)switch(t.type){case Qw:t.return=TA(t.value,t.length);break;case bA:return Qh([Xp(t,{value:Dn(t.value,"@","@"+Rn)})],a);case Jw:if(t.length)return kF(t.props,function(h){switch(CF(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qh([Xp(t,{props:[Dn(h,/:(read-\w+)/,":"+m0+"$1")]})],a);case"::placeholder":return Qh([Xp(t,{props:[Dn(h,/:(plac\w+)/,":"+Rn+"input-$1")]}),Xp(t,{props:[Dn(h,/:(plac\w+)/,":"+m0+"$1")]}),Xp(t,{props:[Dn(h,/:(plac\w+)/,Bi+"input-$1")]})],a)}return""})}},VF=[UF],WF=function(t){var n=t.key;if(n==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(U){var K=U.getAttribute("data-emotion");K.indexOf(" ")!==-1&&(document.head.appendChild(U),U.setAttribute("data-s",""))})}var a=t.stylisPlugins||VF,h={},d,u=[];d=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(U){for(var K=U.getAttribute("data-emotion").split(" "),D=1;D<K.length;D++)h[K[D]]=!0;u.push(U)});var b,w=[NF,jF];{var P,E=[RF,$F(function(U){P.insert(U)})],I=DF(w.concat(a,E)),R=function(K){return Qh(LF(K),I)};b=function(K,D,j,V){P=j,R(K?K+"{"+D.styles+"}":D.styles),V&&(F.inserted[D.name]=!0)}}var F={key:n,sheet:new vF({key:n,container:d,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return F.sheet.hydrate(u),F},EA={exports:{}},Vn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fi=typeof Symbol=="function"&&Symbol.for,t2=fi?Symbol.for("react.element"):60103,n2=fi?Symbol.for("react.portal"):60106,ov=fi?Symbol.for("react.fragment"):60107,sv=fi?Symbol.for("react.strict_mode"):60108,av=fi?Symbol.for("react.profiler"):60114,lv=fi?Symbol.for("react.provider"):60109,uv=fi?Symbol.for("react.context"):60110,r2=fi?Symbol.for("react.async_mode"):60111,cv=fi?Symbol.for("react.concurrent_mode"):60111,hv=fi?Symbol.for("react.forward_ref"):60112,dv=fi?Symbol.for("react.suspense"):60113,qF=fi?Symbol.for("react.suspense_list"):60120,pv=fi?Symbol.for("react.memo"):60115,fv=fi?Symbol.for("react.lazy"):60116,GF=fi?Symbol.for("react.block"):60121,HF=fi?Symbol.for("react.fundamental"):60117,ZF=fi?Symbol.for("react.responder"):60118,KF=fi?Symbol.for("react.scope"):60119;function Ko(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case t2:switch(e=e.type,e){case r2:case cv:case ov:case av:case sv:case dv:return e;default:switch(e=e&&e.$$typeof,e){case uv:case hv:case fv:case pv:case lv:return e;default:return t}}case n2:return t}}}function IA(e){return Ko(e)===cv}Vn.AsyncMode=r2;Vn.ConcurrentMode=cv;Vn.ContextConsumer=uv;Vn.ContextProvider=lv;Vn.Element=t2;Vn.ForwardRef=hv;Vn.Fragment=ov;Vn.Lazy=fv;Vn.Memo=pv;Vn.Portal=n2;Vn.Profiler=av;Vn.StrictMode=sv;Vn.Suspense=dv;Vn.isAsyncMode=function(e){return IA(e)||Ko(e)===r2};Vn.isConcurrentMode=IA;Vn.isContextConsumer=function(e){return Ko(e)===uv};Vn.isContextProvider=function(e){return Ko(e)===lv};Vn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===t2};Vn.isForwardRef=function(e){return Ko(e)===hv};Vn.isFragment=function(e){return Ko(e)===ov};Vn.isLazy=function(e){return Ko(e)===fv};Vn.isMemo=function(e){return Ko(e)===pv};Vn.isPortal=function(e){return Ko(e)===n2};Vn.isProfiler=function(e){return Ko(e)===av};Vn.isStrictMode=function(e){return Ko(e)===sv};Vn.isSuspense=function(e){return Ko(e)===dv};Vn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ov||e===cv||e===av||e===sv||e===dv||e===qF||typeof e=="object"&&e!==null&&(e.$$typeof===fv||e.$$typeof===pv||e.$$typeof===lv||e.$$typeof===uv||e.$$typeof===hv||e.$$typeof===HF||e.$$typeof===ZF||e.$$typeof===KF||e.$$typeof===GF)};Vn.typeOf=Ko;EA.exports=Vn;var XF=EA.exports,PA=XF,YF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},JF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MA={};MA[PA.ForwardRef]=YF;MA[PA.Memo]=JF;var QF=!0;function eN(e,t,n){var o="";return n.split(" ").forEach(function(a){e[a]!==void 0?t.push(e[a]+";"):a&&(o+=a+" ")}),o}var AA=function(t,n,o){var a=t.key+"-"+n.name;(o===!1||QF===!1)&&t.registered[a]===void 0&&(t.registered[a]=n.styles)},LA=function(t,n,o){AA(t,n,o);var a=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var h=n;do t.insert(n===h?"."+a:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function tN(e){for(var t=0,n,o=0,a=e.length;a>=4;++o,a-=4)n=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(a){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var nN={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},rN=!1,iN=/[A-Z]|^ms/g,oN=/_EMO_([^_]+?)_([^]*?)_EMO_/g,zA=function(t){return t.charCodeAt(1)===45},QT=function(t){return t!=null&&typeof t!="boolean"},W_=_A(function(e){return zA(e)?e:e.replace(iN,"-$&").toLowerCase()}),eE=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(oN,function(o,a,h){return ta={name:a,styles:h,next:ta},a})}return nN[t]!==1&&!zA(t)&&typeof n=="number"&&n!==0?n+"px":n},sN="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function sm(e,t,n){if(n==null)return"";var o=n;if(o.__emotion_styles!==void 0)return o;switch(typeof n){case"boolean":return"";case"object":{var a=n;if(a.anim===1)return ta={name:a.name,styles:a.styles,next:ta},a.name;var h=n;if(h.styles!==void 0){var d=h.next;if(d!==void 0)for(;d!==void 0;)ta={name:d.name,styles:d.styles,next:ta},d=d.next;var u=h.styles+";";return u}return aN(e,t,n)}case"function":{if(e!==void 0){var b=ta,w=n(e);return ta=b,sm(e,t,w)}break}}var P=n;if(t==null)return P;var E=t[P];return E!==void 0?E:P}function aN(e,t,n){var o="";if(Array.isArray(n))for(var a=0;a<n.length;a++)o+=sm(e,t,n[a])+";";else for(var h in n){var d=n[h];if(typeof d!="object"){var u=d;t!=null&&t[u]!==void 0?o+=h+"{"+t[u]+"}":QT(u)&&(o+=W_(h)+":"+eE(h,u)+";")}else{if(h==="NO_COMPONENT_SELECTOR"&&rN)throw new Error(sN);if(Array.isArray(d)&&typeof d[0]=="string"&&(t==null||t[d[0]]===void 0))for(var b=0;b<d.length;b++)QT(d[b])&&(o+=W_(h)+":"+eE(h,d[b])+";");else{var w=sm(e,t,d);switch(h){case"animation":case"animationName":{o+=W_(h)+":"+w+";";break}default:o+=h+"{"+w+"}"}}}}return o}var tE=/label:\s*([^\s;{]+)\s*(;|$)/g,ta;function mv(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,a="";ta=void 0;var h=e[0];if(h==null||h.raw===void 0)o=!1,a+=sm(n,t,h);else{var d=h;a+=d[0]}for(var u=1;u<e.length;u++)if(a+=sm(n,t,e[u]),o){var b=h;a+=b[u]}tE.lastIndex=0;for(var w="",P;(P=tE.exec(a))!==null;)w+="-"+P[1];var E=tN(a)+w;return{name:E,styles:a,next:ta}}var lN=function(t){return t()},RA=Ly.useInsertionEffect?Ly.useInsertionEffect:!1,uN=RA||lN,nE=RA||re.useLayoutEffect,DA=re.createContext(typeof HTMLElement<"u"?WF({key:"css"}):null);DA.Provider;var $A=function(t){return re.forwardRef(function(n,o){var a=re.useContext(DA);return t(n,a,o)})},i2=re.createContext({}),cN=$A(function(e,t){var n=e.styles,o=mv([n],void 0,re.useContext(i2)),a=re.useRef();return nE(function(){var h=t.key+"-global",d=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,b=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(d.before=t.sheet.tags[0]),b!==null&&(u=!0,b.setAttribute("data-emotion",h),d.hydrate([b])),a.current=[d,u],function(){d.flush()}},[t]),nE(function(){var h=a.current,d=h[0],u=h[1];if(u){h[1]=!1;return}if(o.next!==void 0&&LA(t,o.next,!0),d.tags.length){var b=d.tags[d.tags.length-1].nextElementSibling;d.before=b,d.flush()}t.insert("",o,d,!1)},[t,o.name]),null});function hN(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return mv(t)}var o2=function(){var t=hN.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},dN=fF,pN=function(t){return t!=="theme"},rE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?dN:pN},iE=function(t,n,o){var a;if(n){var h=n.shouldForwardProp;a=t.__emotion_forwardProp&&h?function(d){return t.__emotion_forwardProp(d)&&h(d)}:h}return typeof a!="function"&&o&&(a=t.__emotion_forwardProp),a},fN=!1,mN=function(t){var n=t.cache,o=t.serialized,a=t.isStringTag;return AA(n,o,a),uN(function(){return LA(n,o,a)}),null},gN=function e(t,n){var o=t.__emotion_real===t,a=o&&t.__emotion_base||t,h,d;n!==void 0&&(h=n.label,d=n.target);var u=iE(t,n,o),b=u||rE(a),w=!b("as");return function(){var P=arguments,E=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&E.push("label:"+h+";"),P[0]==null||P[0].raw===void 0)E.push.apply(E,P);else{E.push(P[0][0]);for(var I=P.length,R=1;R<I;R++)E.push(P[R],P[0][R])}var F=$A(function(U,K,D){var j=w&&U.as||a,V="",Y=[],ce=U;if(U.theme==null){ce={};for(var de in U)ce[de]=U[de];ce.theme=re.useContext(i2)}typeof U.className=="string"?V=eN(K.registered,Y,U.className):U.className!=null&&(V=U.className+" ");var le=mv(E.concat(Y),K.registered,ce);V+=K.key+"-"+le.name,d!==void 0&&(V+=" "+d);var ge=w&&u===void 0?rE(j):b,Ae={};for(var H in U)w&&H==="as"||ge(H)&&(Ae[H]=U[H]);return Ae.className=V,D&&(Ae.ref=D),re.createElement(re.Fragment,null,re.createElement(mN,{cache:K,serialized:le,isStringTag:typeof j=="string"}),re.createElement(j,Ae))});return F.displayName=h!==void 0?h:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",F.defaultProps=t.defaultProps,F.__emotion_real=F,F.__emotion_base=a,F.__emotion_styles=E,F.__emotion_forwardProp=u,Object.defineProperty(F,"toString",{value:function(){return d===void 0&&fN?"NO_COMPONENT_SELECTOR":"."+d}}),F.withComponent=function(U,K){return e(U,f0({},n,K,{shouldForwardProp:iE(F,K,!0)})).apply(void 0,E)},F}},yN=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Sb=gN.bind();yN.forEach(function(e){Sb[e]=Sb(e)});var OA={exports:{}},vN="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_N=vN,xN=_N;function BA(){}function FA(){}FA.resetWarningCache=BA;var bN=function(){function e(o,a,h,d,u,b){if(b!==xN){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:FA,resetWarningCache:BA};return n.PropTypes=n,n};OA.exports=bN();var wN=OA.exports;const oE=cm(wN);function SN(e){return e==null||Object.keys(e).length===0}function CN(e){const{styles:t,defaultTheme:n={}}=e,o=typeof t=="function"?a=>t(SN(a)?n:a):t;return Ie.jsx(cN,{styles:o})}/**
 * @mui/styled-engine v6.1.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function NA(e,t){return Sb(e,t)}function kN(e,t){Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))}const sE=[];function aE(e){return sE[0]=e,mv(sE)}function ia(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function jA(e){if(!ia(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=jA(e[n])}),t}function Ni(e,t,n={clone:!0}){const o=n.clone?{...e}:e;return ia(e)&&ia(t)&&Object.keys(t).forEach(a=>{ia(t[a])&&Object.prototype.hasOwnProperty.call(e,a)&&ia(e[a])?o[a]=Ni(e[a],t[a],n):n.clone?o[a]=ia(t[a])?jA(t[a]):t[a]:o[a]=t[a]}),o}const TN=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,o)=>n.val-o.val),t.reduce((n,o)=>({...n,[o.key]:o.val}),{})};function EN(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:o=5,...a}=e,h=TN(t),d=Object.keys(h);function u(I){return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n})`}function b(I){return`@media (max-width:${(typeof t[I]=="number"?t[I]:I)-o/100}${n})`}function w(I,R){const F=d.indexOf(R);return`@media (min-width:${typeof t[I]=="number"?t[I]:I}${n}) and (max-width:${(F!==-1&&typeof t[d[F]]=="number"?t[d[F]]:R)-o/100}${n})`}function P(I){return d.indexOf(I)+1<d.length?w(I,d[d.indexOf(I)+1]):u(I)}function E(I){const R=d.indexOf(I);return R===0?u(d[1]):R===d.length-1?b(d[R]):w(I,d[d.indexOf(I)+1]).replace("@media","@media not all and")}return{keys:d,values:h,up:u,down:b,between:w,only:P,not:E,unit:n,...a}}function IN(e,t){if(!e.containerQueries)return t;const n=Object.keys(t).filter(o=>o.startsWith("@container")).sort((o,a)=>{var d,u;const h=/min-width:\s*([0-9.]+)/;return+(((d=o.match(h))==null?void 0:d[1])||0)-+(((u=a.match(h))==null?void 0:u[1])||0)});return n.length?n.reduce((o,a)=>{const h=t[a];return delete o[a],o[a]=h,o},{...t}):t}function PN(e,t){return t==="@"||t.startsWith("@")&&(e.some(n=>t.startsWith(`@${n}`))||!!t.match(/^@\d/))}function MN(e,t){const n=t.match(/^@([^/]+)?\/?(.+)?$/);if(!n)return null;const[,o,a]=n,h=Number.isNaN(+o)?o||0:+o;return e.containerQueries(a).up(h)}function AN(e){const t=(h,d)=>h.replace("@media",d?`@container ${d}`:"@container");function n(h,d){h.up=(...u)=>t(e.breakpoints.up(...u),d),h.down=(...u)=>t(e.breakpoints.down(...u),d),h.between=(...u)=>t(e.breakpoints.between(...u),d),h.only=(...u)=>t(e.breakpoints.only(...u),d),h.not=(...u)=>{const b=t(e.breakpoints.not(...u),d);return b.includes("not all and")?b.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):b}}const o={},a=h=>(n(o,h),o);return n(a),{...e,containerQueries:a}}const LN={borderRadius:4};function Cf(e,t){return t?Ni(e,t,{clone:!1}):e}const gv={xs:0,sm:600,md:900,lg:1200,xl:1536},lE={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gv[e]}px)`},zN={containerQueries:e=>({up:t=>{let n=typeof t=="number"?t:gv[t]||t;return typeof n=="number"&&(n=`${n}px`),e?`@container ${e} (min-width:${n})`:`@container (min-width:${n})`}})};function vs(e,t,n){const o=e.theme||{};if(Array.isArray(t)){const h=o.breakpoints||lE;return t.reduce((d,u,b)=>(d[h.up(h.keys[b])]=n(t[b]),d),{})}if(typeof t=="object"){const h=o.breakpoints||lE;return Object.keys(t).reduce((d,u)=>{if(PN(h.keys,u)){const b=MN(o.containerQueries?o:zN,u);b&&(d[b]=n(t[u],u))}else if(Object.keys(h.values||gv).includes(u)){const b=h.up(u);d[b]=n(t[u],u)}else{const b=u;d[b]=t[b]}return d},{})}return n(t)}function RN(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((o,a)=>{const h=e.up(a);return o[h]={},o},{}))||{}}function DN(e,t){return e.reduce((n,o)=>{const a=n[o];return(!a||Object.keys(a).length===0)&&delete n[o],n},t)}function $N(e,t){if(typeof e!="object")return{};const n={},o=Object.keys(t);return Array.isArray(e)?o.forEach((a,h)=>{h<e.length&&(n[a]=!0)}):o.forEach(a=>{e[a]!=null&&(n[a]=!0)}),n}function yv({values:e,breakpoints:t,base:n}){const o=n||$N(e,t),a=Object.keys(o);if(a.length===0)return e;let h;return a.reduce((d,u,b)=>(Array.isArray(e)?(d[u]=e[b]!=null?e[b]:e[h],h=b):typeof e=="object"?(d[u]=e[u]!=null?e[u]:e[h],h=u):d[u]=e,d),{})}function hn(e){if(typeof e!="string")throw new Error(Ha(7));return e.charAt(0).toUpperCase()+e.slice(1)}function vv(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const o=`vars.${t}`.split(".").reduce((a,h)=>a&&a[h]?a[h]:null,e);if(o!=null)return o}return t.split(".").reduce((o,a)=>o&&o[a]!=null?o[a]:null,e)}function g0(e,t,n,o=n){let a;return typeof e=="function"?a=e(n):Array.isArray(e)?a=e[n]||o:a=vv(e,n)||o,t&&(a=t(a,o,e)),a}function jr(e){const{prop:t,cssProperty:n=e.prop,themeKey:o,transform:a}=e,h=d=>{if(d[t]==null)return null;const u=d[t],b=d.theme,w=vv(b,o)||{};return vs(d,u,E=>{let I=g0(w,a,E);return E===I&&typeof E=="string"&&(I=g0(w,a,`${t}${E==="default"?"":hn(E)}`,E)),n===!1?I:{[n]:I}})};return h.propTypes={},h.filterProps=[t],h}function ON(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const BN={m:"margin",p:"padding"},FN={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},uE={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},NN=ON(e=>{if(e.length>2)if(uE[e])e=uE[e];else return[e];const[t,n]=e.split(""),o=BN[t],a=FN[n]||"";return Array.isArray(a)?a.map(h=>o+h):[o+a]}),s2=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],a2=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...s2,...a2];function wm(e,t,n,o){const a=vv(e,t,!0)??n;return typeof a=="number"||typeof a=="string"?h=>typeof h=="string"?h:typeof a=="string"?`calc(${h} * ${a})`:a*h:Array.isArray(a)?h=>{if(typeof h=="string")return h;const d=Math.abs(h),u=a[d];return h>=0?u:typeof u=="number"?-u:`-${u}`}:typeof a=="function"?a:()=>{}}function l2(e){return wm(e,"spacing",8)}function Sm(e,t){return typeof t=="string"||t==null?t:e(t)}function jN(e,t){return n=>e.reduce((o,a)=>(o[a]=Sm(t,n),o),{})}function UN(e,t,n,o){if(!t.includes(n))return null;const a=NN(n),h=jN(a,o),d=e[n];return vs(e,d,h)}function UA(e,t){const n=l2(e.theme);return Object.keys(e).map(o=>UN(e,t,o,n)).reduce(Cf,{})}function zr(e){return UA(e,s2)}zr.propTypes={};zr.filterProps=s2;function Rr(e){return UA(e,a2)}Rr.propTypes={};Rr.filterProps=a2;function VA(e=8,t=l2({spacing:e})){if(e.mui)return e;const n=(...o)=>(o.length===0?[1]:o).map(h=>{const d=t(h);return typeof d=="number"?`${d}px`:d}).join(" ");return n.mui=!0,n}function _v(...e){const t=e.reduce((o,a)=>(a.filterProps.forEach(h=>{o[h]=a}),o),{}),n=o=>Object.keys(o).reduce((a,h)=>t[h]?Cf(a,t[h](o)):a,{});return n.propTypes={},n.filterProps=e.reduce((o,a)=>o.concat(a.filterProps),[]),n}function cs(e){return typeof e!="number"?e:`${e}px solid`}function xs(e,t){return jr({prop:e,themeKey:"borders",transform:t})}const VN=xs("border",cs),WN=xs("borderTop",cs),qN=xs("borderRight",cs),GN=xs("borderBottom",cs),HN=xs("borderLeft",cs),ZN=xs("borderColor"),KN=xs("borderTopColor"),XN=xs("borderRightColor"),YN=xs("borderBottomColor"),JN=xs("borderLeftColor"),QN=xs("outline",cs),e7=xs("outlineColor"),xv=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=wm(e.theme,"shape.borderRadius",4),n=o=>({borderRadius:Sm(t,o)});return vs(e,e.borderRadius,n)}return null};xv.propTypes={};xv.filterProps=["borderRadius"];_v(VN,WN,qN,GN,HN,ZN,KN,XN,YN,JN,xv,QN,e7);const bv=e=>{if(e.gap!==void 0&&e.gap!==null){const t=wm(e.theme,"spacing",8),n=o=>({gap:Sm(t,o)});return vs(e,e.gap,n)}return null};bv.propTypes={};bv.filterProps=["gap"];const wv=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=wm(e.theme,"spacing",8),n=o=>({columnGap:Sm(t,o)});return vs(e,e.columnGap,n)}return null};wv.propTypes={};wv.filterProps=["columnGap"];const Sv=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=wm(e.theme,"spacing",8),n=o=>({rowGap:Sm(t,o)});return vs(e,e.rowGap,n)}return null};Sv.propTypes={};Sv.filterProps=["rowGap"];const t7=jr({prop:"gridColumn"}),n7=jr({prop:"gridRow"}),r7=jr({prop:"gridAutoFlow"}),i7=jr({prop:"gridAutoColumns"}),o7=jr({prop:"gridAutoRows"}),s7=jr({prop:"gridTemplateColumns"}),a7=jr({prop:"gridTemplateRows"}),l7=jr({prop:"gridTemplateAreas"}),u7=jr({prop:"gridArea"});_v(bv,wv,Sv,t7,n7,r7,i7,o7,s7,a7,l7,u7);function ed(e,t){return t==="grey"?t:e}const c7=jr({prop:"color",themeKey:"palette",transform:ed}),h7=jr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ed}),d7=jr({prop:"backgroundColor",themeKey:"palette",transform:ed});_v(c7,h7,d7);function jo(e){return e<=1&&e!==0?`${e*100}%`:e}const p7=jr({prop:"width",transform:jo}),u2=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var a,h,d,u,b;const o=((d=(h=(a=e.theme)==null?void 0:a.breakpoints)==null?void 0:h.values)==null?void 0:d[n])||gv[n];return o?((b=(u=e.theme)==null?void 0:u.breakpoints)==null?void 0:b.unit)!=="px"?{maxWidth:`${o}${e.theme.breakpoints.unit}`}:{maxWidth:o}:{maxWidth:jo(n)}};return vs(e,e.maxWidth,t)}return null};u2.filterProps=["maxWidth"];const f7=jr({prop:"minWidth",transform:jo}),m7=jr({prop:"height",transform:jo}),g7=jr({prop:"maxHeight",transform:jo}),y7=jr({prop:"minHeight",transform:jo});jr({prop:"size",cssProperty:"width",transform:jo});jr({prop:"size",cssProperty:"height",transform:jo});const v7=jr({prop:"boxSizing"});_v(p7,u2,f7,m7,g7,y7,v7);const Cm={border:{themeKey:"borders",transform:cs},borderTop:{themeKey:"borders",transform:cs},borderRight:{themeKey:"borders",transform:cs},borderBottom:{themeKey:"borders",transform:cs},borderLeft:{themeKey:"borders",transform:cs},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:cs},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:xv},color:{themeKey:"palette",transform:ed},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ed},backgroundColor:{themeKey:"palette",transform:ed},p:{style:Rr},pt:{style:Rr},pr:{style:Rr},pb:{style:Rr},pl:{style:Rr},px:{style:Rr},py:{style:Rr},padding:{style:Rr},paddingTop:{style:Rr},paddingRight:{style:Rr},paddingBottom:{style:Rr},paddingLeft:{style:Rr},paddingX:{style:Rr},paddingY:{style:Rr},paddingInline:{style:Rr},paddingInlineStart:{style:Rr},paddingInlineEnd:{style:Rr},paddingBlock:{style:Rr},paddingBlockStart:{style:Rr},paddingBlockEnd:{style:Rr},m:{style:zr},mt:{style:zr},mr:{style:zr},mb:{style:zr},ml:{style:zr},mx:{style:zr},my:{style:zr},margin:{style:zr},marginTop:{style:zr},marginRight:{style:zr},marginBottom:{style:zr},marginLeft:{style:zr},marginX:{style:zr},marginY:{style:zr},marginInline:{style:zr},marginInlineStart:{style:zr},marginInlineEnd:{style:zr},marginBlock:{style:zr},marginBlockStart:{style:zr},marginBlockEnd:{style:zr},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:bv},rowGap:{style:Sv},columnGap:{style:wv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:jo},maxWidth:{style:u2},minWidth:{transform:jo},height:{transform:jo},maxHeight:{transform:jo},minHeight:{transform:jo},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function _7(...e){const t=e.reduce((o,a)=>o.concat(Object.keys(a)),[]),n=new Set(t);return e.every(o=>n.size===Object.keys(o).length)}function x7(e,t){return typeof e=="function"?e(t):e}function b7(){function e(n,o,a,h){const d={[n]:o,theme:a},u=h[n];if(!u)return{[n]:o};const{cssProperty:b=n,themeKey:w,transform:P,style:E}=u;if(o==null)return null;if(w==="typography"&&o==="inherit")return{[n]:o};const I=vv(a,w)||{};return E?E(d):vs(d,o,F=>{let U=g0(I,P,F);return F===U&&typeof F=="string"&&(U=g0(I,P,`${n}${F==="default"?"":hn(F)}`,F)),b===!1?U:{[b]:U}})}function t(n){const{sx:o,theme:a={}}=n||{};if(!o)return null;const h=a.unstable_sxConfig??Cm;function d(u){let b=u;if(typeof u=="function")b=u(a);else if(typeof u!="object")return u;if(!b)return null;const w=RN(a.breakpoints),P=Object.keys(w);let E=w;return Object.keys(b).forEach(I=>{const R=x7(b[I],a);if(R!=null)if(typeof R=="object")if(h[I])E=Cf(E,e(I,R,a,h));else{const F=vs({theme:a},R,U=>({[I]:U}));_7(F,R)?E[I]=t({sx:R,theme:a}):E=Cf(E,F)}else E=Cf(E,e(I,R,a,h))}),IN(a,DN(P,E))}return Array.isArray(o)?o.map(d):d(o)}return t}const cc=b7();cc.filterProps=["sx"];function w7(e,t){var o;const n=this;if(n.vars){if(!((o=n.colorSchemes)!=null&&o[e])||typeof n.getColorSchemeSelector!="function")return{};let a=n.getColorSchemeSelector(e);return a==="&"?t:((a.includes("data-")||a.includes("."))&&(a=`*:where(${a.replace(/\s*&$/,"")}) &`),{[a]:t})}return n.palette.mode===e?t:{}}function Cv(e={},...t){const{breakpoints:n={},palette:o={},spacing:a,shape:h={},...d}=e,u=EN(n),b=VA(a);let w=Ni({breakpoints:u,direction:"ltr",components:{},palette:{mode:"light",...o},spacing:b,shape:{...LN,...h}},d);return w=AN(w),w.applyStyles=w7,w=t.reduce((P,E)=>Ni(P,E),w),w.unstable_sxConfig={...Cm,...d==null?void 0:d.unstable_sxConfig},w.unstable_sx=function(E){return cc({sx:E,theme:this})},w}function S7(e){return Object.keys(e).length===0}function C7(e=null){const t=re.useContext(i2);return!t||S7(t)?e:t}const k7=Cv();function kv(e=k7){return C7(e)}function T7({styles:e,themeId:t,defaultTheme:n={}}){const o=kv(n),a=typeof e=="function"?e(t&&o[t]||o):e;return Ie.jsx(CN,{styles:a})}const E7=e=>{var o;const t={systemProps:{},otherProps:{}},n=((o=e==null?void 0:e.theme)==null?void 0:o.unstable_sxConfig)??Cm;return Object.keys(e).forEach(a=>{n[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function c2(e){const{sx:t,...n}=e,{systemProps:o,otherProps:a}=E7(n);let h;return Array.isArray(t)?h=[o,...t]:typeof t=="function"?h=(...d)=>{const u=t(...d);return ia(u)?{...o,...u}:o}:h={...o,...t},{...a,sx:h}}const cE=e=>e,I7=()=>{let e=cE;return{configure(t){e=t},generate(t){return e(t)},reset(){e=cE}}},WA=I7();function qA(e){var t,n,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=qA(e[t]))&&(o&&(o+=" "),o+=n)}else for(n in e)e[n]&&(o&&(o+=" "),o+=n);return o}function Wt(){for(var e,t,n=0,o="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=qA(e))&&(o&&(o+=" "),o+=t);return o}function P7(e={}){const{themeId:t,defaultTheme:n,defaultClassName:o="MuiBox-root",generateClassName:a}=e,h=NA("div",{shouldForwardProp:u=>u!=="theme"&&u!=="sx"&&u!=="as"})(cc);return re.forwardRef(function(b,w){const P=kv(n),{className:E,component:I="div",...R}=c2(b);return Ie.jsx(h,{as:I,ref:w,className:Wt(E,a?a(o):o),theme:t&&P[t]||P,...R})})}const M7={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function kn(e,t,n="Mui"){const o=M7[t];return o?`${n}-${o}`:`${WA.generate(e)}-${t}`}function wn(e,t,n="Mui"){const o={};return t.forEach(a=>{o[a]=kn(e,a,n)}),o}function GA(e){const{variants:t,...n}=e,o={variants:t,style:aE(n),isProcessed:!0};return o.style===n||t&&t.forEach(a=>{typeof a.style!="function"&&(a.style=aE(a.style))}),o}const A7=Cv();function q_(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function L7(e){return e?(t,n)=>n[e]:null}function z7(e,t,n){e.theme=D7(e.theme)?n:e.theme[t]||e.theme}function My(e,t){const n=typeof t=="function"?t(e):t;if(Array.isArray(n))return n.flatMap(o=>My(e,o));if(Array.isArray(n==null?void 0:n.variants)){let o;if(n.isProcessed)o=n.style;else{const{variants:a,...h}=n;o=h}return HA(e,n.variants,[o])}return n!=null&&n.isProcessed?n.style:n}function HA(e,t,n=[]){var a;let o;e:for(let h=0;h<t.length;h+=1){const d=t[h];if(typeof d.props=="function"){if(o??(o={...e,...e.ownerState,ownerState:e.ownerState}),!d.props(o))continue}else for(const u in d.props)if(e[u]!==d.props[u]&&((a=e.ownerState)==null?void 0:a[u])!==d.props[u])continue e;typeof d.style=="function"?(o??(o={...e,...e.ownerState,ownerState:e.ownerState}),n.push(d.style(o))):n.push(d.style)}return n}function ZA(e={}){const{themeId:t,defaultTheme:n=A7,rootShouldForwardProp:o=q_,slotShouldForwardProp:a=q_}=e;function h(u){z7(u,t,n)}return(u,b={})=>{kN(u,ce=>ce.filter(de=>de!==cc));const{name:w,slot:P,skipVariantsResolver:E,skipSx:I,overridesResolver:R=L7(O7(P)),...F}=b,U=E!==void 0?E:P&&P!=="Root"&&P!=="root"||!1,K=I||!1;let D=q_;P==="Root"||P==="root"?D=o:P?D=a:$7(u)&&(D=void 0);const j=NA(u,{shouldForwardProp:D,label:R7(),...F}),V=ce=>{if(typeof ce=="function"&&ce.__emotion_real!==ce)return function(le){return My(le,ce)};if(ia(ce)){const de=GA(ce);return de.variants?function(ge){return My(ge,de)}:de.style}return ce},Y=(...ce)=>{const de=[],le=ce.map(V),ge=[];if(de.push(h),w&&R&&ge.push(function(je){var We,ut;const Le=(ut=(We=je.theme.components)==null?void 0:We[w])==null?void 0:ut.styleOverrides;if(!Le)return null;const De={};for(const Be in Le)De[Be]=My(je,Le[Be]);return R(je,De)}),w&&!U&&ge.push(function(je){var De,We;const $e=je.theme,Le=(We=(De=$e==null?void 0:$e.components)==null?void 0:De[w])==null?void 0:We.variants;return Le?HA(je,Le):null}),K||ge.push(cc),Array.isArray(le[0])){const Ee=le.shift(),je=new Array(de.length).fill(""),$e=new Array(ge.length).fill("");let Le;Le=[...je,...Ee,...$e],Le.raw=[...je,...Ee.raw,...$e],de.unshift(Le)}const Ae=[...de,...le,...ge],H=j(...Ae);return u.muiName&&(H.muiName=u.muiName),H};return j.withConfig&&(Y.withConfig=j.withConfig),Y}}function R7(e,t){return void 0}function D7(e){for(const t in e)return!1;return!0}function $7(e){return typeof e=="string"&&e.charCodeAt(0)>96}function O7(e){return e&&e.charAt(0).toLowerCase()+e.slice(1)}const B7=ZA();function am(e,t){const n={...t};for(const o in e)if(Object.prototype.hasOwnProperty.call(e,o)){const a=o;if(a==="components"||a==="slots")n[a]={...e[a],...n[a]};else if(a==="componentsProps"||a==="slotProps"){const h=e[a],d=t[a];if(!d)n[a]=h||{};else if(!h)n[a]=d;else{n[a]={...d};for(const u in h)if(Object.prototype.hasOwnProperty.call(h,u)){const b=u;n[a][b]=am(h[b],d[b])}}}else n[a]===void 0&&(n[a]=e[a])}return n}function F7(e){const{theme:t,name:n,props:o}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?o:am(t.components[n].defaultProps,o)}function N7({props:e,name:t,defaultTheme:n,themeId:o}){let a=kv(n);return o&&(a=a[o]||a),F7({theme:a,name:t,props:e})}const hc=typeof window<"u"?re.useLayoutEffect:re.useEffect;function j7(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}function h2(e,t=0,n=1){return j7(e,t,n)}function U7(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(o=>o+o)),n?`rgb${n.length===4?"a":""}(${n.map((o,a)=>a<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function tu(e){if(e.type)return e;if(e.charAt(0)==="#")return tu(U7(e));const t=e.indexOf("("),n=e.substring(0,t);if(!["rgb","rgba","hsl","hsla","color"].includes(n))throw new Error(Ha(9,e));let o=e.substring(t+1,e.length-1),a;if(n==="color"){if(o=o.split(" "),a=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(a))throw new Error(Ha(10,a))}else o=o.split(",");return o=o.map(h=>parseFloat(h)),{type:n,values:o,colorSpace:a}}const V7=e=>{const t=tu(e);return t.values.slice(0,3).map((n,o)=>t.type.includes("hsl")&&o!==0?`${n}%`:n).join(" ")},lf=(e,t)=>{try{return V7(e)}catch{return e}};function Tv(e){const{type:t,colorSpace:n}=e;let{values:o}=e;return t.includes("rgb")?o=o.map((a,h)=>h<3?parseInt(a,10):a):t.includes("hsl")&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.includes("color")?o=`${n} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function KA(e){e=tu(e);const{values:t}=e,n=t[0],o=t[1]/100,a=t[2]/100,h=o*Math.min(a,1-a),d=(w,P=(w+n/30)%12)=>a-h*Math.max(Math.min(P-3,9-P,1),-1);let u="rgb";const b=[Math.round(d(0)*255),Math.round(d(8)*255),Math.round(d(4)*255)];return e.type==="hsla"&&(u+="a",b.push(t[3])),Tv({type:u,values:b})}function Cb(e){e=tu(e);let t=e.type==="hsl"||e.type==="hsla"?tu(KA(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function W7(e,t){const n=Cb(e),o=Cb(t);return(Math.max(n,o)+.05)/(Math.min(n,o)+.05)}function Ra(e,t){return e=tu(e),t=h2(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,Tv(e)}function ey(e,t,n){try{return Ra(e,t)}catch{return e}}function d2(e,t){if(e=tu(e),t=h2(t),e.type.includes("hsl"))e.values[2]*=1-t;else if(e.type.includes("rgb")||e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]*=1-t;return Tv(e)}function tr(e,t,n){try{return d2(e,t)}catch{return e}}function p2(e,t){if(e=tu(e),t=h2(t),e.type.includes("hsl"))e.values[2]+=(100-e.values[2])*t;else if(e.type.includes("rgb"))for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.includes("color"))for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return Tv(e)}function nr(e,t,n){try{return p2(e,t)}catch{return e}}function q7(e,t=.15){return Cb(e)>.5?d2(e,t):p2(e,t)}function ty(e,t,n){try{return q7(e,t)}catch{return e}}function hE(...e){return e.reduce((t,n)=>n==null?t:function(...a){t.apply(this,a),n.apply(this,a)},()=>{})}function XA(e,t=166){let n;function o(...a){const h=()=>{e.apply(this,a)};clearTimeout(n),n=setTimeout(h,t)}return o.clear=()=>{clearTimeout(n)},o}function Ay(e,t){var n,o,a;return re.isValidElement(e)&&t.indexOf(e.type.muiName??((a=(o=(n=e.type)==null?void 0:n._payload)==null?void 0:o.value)==null?void 0:a.muiName))!==-1}function Fs(e){return e&&e.ownerDocument||document}function Za(e){return Fs(e).defaultView||window}function kb(e,t){typeof e=="function"?e(t):e&&(e.current=t)}let dE=0;function G7(e){const[t,n]=re.useState(e),o=e||t;return re.useEffect(()=>{t==null&&(dE+=1,n(`mui-${dE}`))},[t]),o}const H7={...Ly},pE=H7.useId;function YA(e){if(pE!==void 0){const t=pE();return e??t}return G7(e)}function fE({controlled:e,default:t,name:n,state:o="value"}){const{current:a}=re.useRef(e!==void 0),[h,d]=re.useState(t),u=a?e:h,b=re.useCallback(w=>{a||d(w)},[]);return[u,b]}function Oh(e){const t=re.useRef(e);return hc(()=>{t.current=e}),re.useRef((...n)=>(0,t.current)(...n)).current}function Ti(...e){return re.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{kb(n,t)})},e)}const mE={};function JA(e,t){const n=re.useRef(mE);return n.current===mE&&(n.current=e(t)),n}const Z7=[];function K7(e){re.useEffect(e,Z7)}class f2{constructor(){Rp(this,"currentId",null);Rp(this,"clear",()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)});Rp(this,"disposeEffect",()=>this.clear)}static create(){return new f2}start(t,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},t)}}function QA(){const e=JA(f2.create).current;return K7(e.disposeEffect),e}function gE(e){try{return e.matches(":focus-visible")}catch{}return!1}function e3(e=window){const t=e.document.documentElement.clientWidth;return e.innerWidth-t}function In(e,t,n=void 0){const o={};for(const a in e){const h=e[a];let d="",u=!0;for(let b=0;b<h.length;b+=1){const w=h[b];w&&(d+=(u===!0?"":" ")+t(w),u=!1,n&&n[w]&&(d+=" "+n[w]))}o[a]=d}return o}function X7(e){return typeof e=="string"}function t3(e,t,n){return e===void 0||X7(e)?t:{...t,ownerState:{...t.ownerState,...n}}}function n3(e,t=[]){if(e===void 0)return{};const n={};return Object.keys(e).filter(o=>o.match(/^on[A-Z]/)&&typeof e[o]=="function"&&!t.includes(o)).forEach(o=>{n[o]=e[o]}),n}function yE(e){if(e===void 0)return{};const t={};return Object.keys(e).filter(n=>!(n.match(/^on[A-Z]/)&&typeof e[n]=="function")).forEach(n=>{t[n]=e[n]}),t}function r3(e){const{getSlotProps:t,additionalProps:n,externalSlotProps:o,externalForwardedProps:a,className:h}=e;if(!t){const R=Wt(n==null?void 0:n.className,h,a==null?void 0:a.className,o==null?void 0:o.className),F={...n==null?void 0:n.style,...a==null?void 0:a.style,...o==null?void 0:o.style},U={...n,...a,...o};return R.length>0&&(U.className=R),Object.keys(F).length>0&&(U.style=F),{props:U,internalRef:void 0}}const d=n3({...a,...o}),u=yE(o),b=yE(a),w=t(d),P=Wt(w==null?void 0:w.className,n==null?void 0:n.className,h,a==null?void 0:a.className,o==null?void 0:o.className),E={...w==null?void 0:w.style,...n==null?void 0:n.style,...a==null?void 0:a.style,...o==null?void 0:o.style},I={...w,...n,...b,...u};return P.length>0&&(I.className=P),Object.keys(E).length>0&&(I.style=E),{props:I,internalRef:w.ref}}function i3(e,t,n){return typeof e=="function"?e(t,n):e}function vE(e){var E;const{elementType:t,externalSlotProps:n,ownerState:o,skipResolvingSlotProps:a=!1,...h}=e,d=a?{}:i3(n,o),{props:u,internalRef:b}=r3({...h,externalSlotProps:d}),w=Ti(b,d==null?void 0:d.ref,(E=e.additionalProps)==null?void 0:E.ref);return t3(t,{...u,ref:w},o)}function km(e){var t;return parseInt(re.version,10)>=19?((t=e==null?void 0:e.props)==null?void 0:t.ref)||null:(e==null?void 0:e.ref)||null}const Y7=re.createContext(),J7=()=>re.useContext(Y7)??!1,Q7=re.createContext(void 0);function e9(e){const{theme:t,name:n,props:o}=e;if(!t||!t.components||!t.components[n])return o;const a=t.components[n];return a.defaultProps?am(a.defaultProps,o):!a.styleOverrides&&!a.variants?am(a,o):o}function t9({props:e,name:t}){const n=re.useContext(Q7);return e9({props:e,name:t,theme:{components:n}})}const _E={theme:void 0};function n9(e){let t,n;return function(a){let h=t;return(h===void 0||a.theme!==n)&&(_E.theme=a.theme,h=GA(e(_E)),t=h,n=a.theme),h}}function r9(e=""){function t(...o){if(!o.length)return"";const a=o[0];return typeof a=="string"&&!a.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${e?`${e}-`:""}${a}${t(...o.slice(1))})`:`, ${a}`}return(o,...a)=>`var(--${e?`${e}-`:""}${o}${t(...a)})`}const xE=(e,t,n,o=[])=>{let a=e;t.forEach((h,d)=>{d===t.length-1?Array.isArray(a)?a[Number(h)]=n:a&&typeof a=="object"&&(a[h]=n):a&&typeof a=="object"&&(a[h]||(a[h]=o.includes(h)?[]:{}),a=a[h])})},i9=(e,t,n)=>{function o(a,h=[],d=[]){Object.entries(a).forEach(([u,b])=>{(!n||n&&!n([...h,u]))&&b!=null&&(typeof b=="object"&&Object.keys(b).length>0?o(b,[...h,u],Array.isArray(b)?[...d,u]:d):t([...h,u],b,d))})}o(e)},o9=(e,t)=>typeof t=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(o=>e.includes(o))||e[e.length-1].toLowerCase().includes("opacity")?t:`${t}px`:t;function G_(e,t){const{prefix:n,shouldSkipGeneratingVar:o}=t||{},a={},h={},d={};return i9(e,(u,b,w)=>{if((typeof b=="string"||typeof b=="number")&&(!o||!o(u,b))){const P=`--${n?`${n}-`:""}${u.join("-")}`,E=o9(u,b);Object.assign(a,{[P]:E}),xE(h,u,`var(${P})`,w),xE(d,u,`var(${P}, ${E})`,w)}},u=>u[0]==="vars"),{css:a,vars:h,varsWithDefaults:d}}function s9(e,t={}){const{getSelector:n=K,disableCssColorScheme:o,colorSchemeSelector:a}=t,{colorSchemes:h={},components:d,defaultColorScheme:u="light",...b}=e,{vars:w,css:P,varsWithDefaults:E}=G_(b,t);let I=E;const R={},{[u]:F,...U}=h;if(Object.entries(U||{}).forEach(([V,Y])=>{const{vars:ce,css:de,varsWithDefaults:le}=G_(Y,t);I=Ni(I,le),R[V]={css:de,vars:ce}}),F){const{css:V,vars:Y,varsWithDefaults:ce}=G_(F,t);I=Ni(I,ce),R[u]={css:V,vars:Y}}function K(V,Y){var de,le;let ce=a;if(a==="class"&&(ce=".%s"),a==="data"&&(ce="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(ce=`[${a}="%s"]`),V){if(ce==="media")return e.defaultColorScheme===V?":root":{[`@media (prefers-color-scheme: ${((le=(de=h[V])==null?void 0:de.palette)==null?void 0:le.mode)||V})`]:{":root":Y}};if(ce)return e.defaultColorScheme===V?`:root, ${ce.replace("%s",String(V))}`:ce.replace("%s",String(V))}return":root"}return{vars:I,generateThemeVars:()=>{let V={...w};return Object.entries(R).forEach(([,{vars:Y}])=>{V=Ni(V,Y)}),V},generateStyleSheets:()=>{var ge,Ae;const V=[],Y=e.defaultColorScheme||"light";function ce(H,Ee){Object.keys(Ee).length&&V.push(typeof H=="string"?{[H]:{...Ee}}:H)}ce(n(void 0,{...P}),P);const{[Y]:de,...le}=R;if(de){const{css:H}=de,Ee=(Ae=(ge=h[Y])==null?void 0:ge.palette)==null?void 0:Ae.mode,je=!o&&Ee?{colorScheme:Ee,...H}:{...H};ce(n(Y,{...je}),je)}return Object.entries(le).forEach(([H,{css:Ee}])=>{var Le,De;const je=(De=(Le=h[H])==null?void 0:Le.palette)==null?void 0:De.mode,$e=!o&&je?{colorScheme:je,...Ee}:{...Ee};ce(n(H,{...$e}),$e)}),V}}}function a9(e){return function(n){return e==="media"?`@media (prefers-color-scheme: ${n})`:e?e.startsWith("data-")&&!e.includes("%s")?`[${e}="${n}"] &`:e==="class"?`.${n} &`:e==="data"?`[data-${n}] &`:`${e.replace("%s",n)} &`:"&"}}const l9=Cv(),u9=B7("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${hn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),c9=e=>N7({props:e,name:"MuiContainer",defaultTheme:l9}),h9=(e,t)=>{const n=b=>kn(t,b),{classes:o,fixed:a,disableGutters:h,maxWidth:d}=e,u={root:["root",d&&`maxWidth${hn(String(d))}`,a&&"fixed",h&&"disableGutters"]};return In(u,n,o)};function d9(e={}){const{createStyledComponent:t=u9,useThemeProps:n=c9,componentName:o="MuiContainer"}=e,a=t(({theme:d,ownerState:u})=>({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",...!u.disableGutters&&{paddingLeft:d.spacing(2),paddingRight:d.spacing(2),[d.breakpoints.up("sm")]:{paddingLeft:d.spacing(3),paddingRight:d.spacing(3)}}}),({theme:d,ownerState:u})=>u.fixed&&Object.keys(d.breakpoints.values).reduce((b,w)=>{const P=w,E=d.breakpoints.values[P];return E!==0&&(b[d.breakpoints.up(P)]={maxWidth:`${E}${d.breakpoints.unit}`}),b},{}),({theme:d,ownerState:u})=>({...u.maxWidth==="xs"&&{[d.breakpoints.up("xs")]:{maxWidth:Math.max(d.breakpoints.values.xs,444)}},...u.maxWidth&&u.maxWidth!=="xs"&&{[d.breakpoints.up(u.maxWidth)]:{maxWidth:`${d.breakpoints.values[u.maxWidth]}${d.breakpoints.unit}`}}}));return re.forwardRef(function(u,b){const w=n(u),{className:P,component:E="div",disableGutters:I=!1,fixed:R=!1,maxWidth:F="lg",classes:U,...K}=w,D={...w,component:E,disableGutters:I,fixed:R,maxWidth:F},j=h9(D,o);return Ie.jsx(a,{as:E,ownerState:D,className:Wt(j.root,P),ref:b,...K})})}function o3(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:rm.white,default:rm.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const p9=o3();function s3(){return{text:{primary:rm.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:rm.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const bE=s3();function wE(e,t,n,o){const a=o.light||o,h=o.dark||o*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=p2(e.main,a):t==="dark"&&(e.dark=d2(e.main,h)))}function f9(e="light"){return e==="dark"?{main:ph[200],light:ph[50],dark:ph[400]}:{main:ph[700],light:ph[400],dark:ph[800]}}function m9(e="light"){return e==="dark"?{main:dh[200],light:dh[50],dark:dh[400]}:{main:dh[500],light:dh[300],dark:dh[700]}}function g9(e="light"){return e==="dark"?{main:hh[500],light:hh[300],dark:hh[700]}:{main:hh[700],light:hh[400],dark:hh[800]}}function y9(e="light"){return e==="dark"?{main:fh[400],light:fh[300],dark:fh[700]}:{main:fh[700],light:fh[500],dark:fh[900]}}function v9(e="light"){return e==="dark"?{main:mh[400],light:mh[300],dark:mh[700]}:{main:mh[800],light:mh[500],dark:mh[900]}}function _9(e="light"){return e==="dark"?{main:Kp[400],light:Kp[300],dark:Kp[700]}:{main:"#ed6c02",light:Kp[500],dark:Kp[900]}}function m2(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:o=.2,...a}=e,h=e.primary||f9(t),d=e.secondary||m9(t),u=e.error||g9(t),b=e.info||y9(t),w=e.success||v9(t),P=e.warning||_9(t);function E(U){return W7(U,bE.text.primary)>=n?bE.text.primary:p9.text.primary}const I=({color:U,name:K,mainShade:D=500,lightShade:j=300,darkShade:V=700})=>{if(U={...U},!U.main&&U[D]&&(U.main=U[D]),!U.hasOwnProperty("main"))throw new Error(Ha(11,K?` (${K})`:"",D));if(typeof U.main!="string")throw new Error(Ha(12,K?` (${K})`:"",JSON.stringify(U.main)));return wE(U,"light",j,o),wE(U,"dark",V,o),U.contrastText||(U.contrastText=E(U.main)),U};let R;return t==="light"?R=o3():t==="dark"&&(R=s3()),Ni({common:{...rm},mode:t,primary:I({color:h,name:"primary"}),secondary:I({color:d,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:I({color:u,name:"error"}),warning:I({color:P,name:"warning"}),info:I({color:b,name:"info"}),success:I({color:w,name:"success"}),grey:dF,contrastThreshold:n,getContrastText:E,augmentColor:I,tonalOffset:o,...R},a)}function x9(e){const t={};return Object.entries(e).forEach(o=>{const[a,h]=o;typeof h=="object"&&(t[a]=`${h.fontStyle?`${h.fontStyle} `:""}${h.fontVariant?`${h.fontVariant} `:""}${h.fontWeight?`${h.fontWeight} `:""}${h.fontStretch?`${h.fontStretch} `:""}${h.fontSize||""}${h.lineHeight?`/${h.lineHeight} `:""}${h.fontFamily||""}`)}),t}function b9(e,t){return{toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}},...t}}function w9(e){return Math.round(e*1e5)/1e5}const SE={textTransform:"uppercase"},CE='"Roboto", "Helvetica", "Arial", sans-serif';function S9(e,t){const{fontFamily:n=CE,fontSize:o=14,fontWeightLight:a=300,fontWeightRegular:h=400,fontWeightMedium:d=500,fontWeightBold:u=700,htmlFontSize:b=16,allVariants:w,pxToRem:P,...E}=typeof t=="function"?t(e):t,I=o/14,R=P||(K=>`${K/b*I}rem`),F=(K,D,j,V,Y)=>({fontFamily:n,fontWeight:K,fontSize:R(D),lineHeight:j,...n===CE?{letterSpacing:`${w9(V/D)}em`}:{},...Y,...w}),U={h1:F(a,96,1.167,-1.5),h2:F(a,60,1.2,-.5),h3:F(h,48,1.167,0),h4:F(h,34,1.235,.25),h5:F(h,24,1.334,0),h6:F(d,20,1.6,.15),subtitle1:F(h,16,1.75,.15),subtitle2:F(d,14,1.57,.1),body1:F(h,16,1.5,.15),body2:F(h,14,1.43,.15),button:F(d,14,1.75,.4,SE),caption:F(h,12,1.66,.4),overline:F(h,12,2.66,1,SE),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ni({htmlFontSize:b,pxToRem:R,fontFamily:n,fontSize:o,fontWeightLight:a,fontWeightRegular:h,fontWeightMedium:d,fontWeightBold:u,...U},E,{clone:!1})}const C9=.2,k9=.14,T9=.12;function vr(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${C9})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${k9})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${T9})`].join(",")}const E9=["none",vr(0,2,1,-1,0,1,1,0,0,1,3,0),vr(0,3,1,-2,0,2,2,0,0,1,5,0),vr(0,3,3,-2,0,3,4,0,0,1,8,0),vr(0,2,4,-1,0,4,5,0,0,1,10,0),vr(0,3,5,-1,0,5,8,0,0,1,14,0),vr(0,3,5,-1,0,6,10,0,0,1,18,0),vr(0,4,5,-2,0,7,10,1,0,2,16,1),vr(0,5,5,-3,0,8,10,1,0,3,14,2),vr(0,5,6,-3,0,9,12,1,0,3,16,2),vr(0,6,6,-3,0,10,14,1,0,4,18,3),vr(0,6,7,-4,0,11,15,1,0,4,20,3),vr(0,7,8,-4,0,12,17,2,0,5,22,4),vr(0,7,8,-4,0,13,19,2,0,5,24,4),vr(0,7,9,-4,0,14,21,2,0,5,26,4),vr(0,8,9,-5,0,15,22,2,0,6,28,5),vr(0,8,10,-5,0,16,24,2,0,6,30,5),vr(0,8,11,-5,0,17,26,2,0,6,32,5),vr(0,9,11,-5,0,18,28,2,0,7,34,6),vr(0,9,12,-6,0,19,29,2,0,7,36,6),vr(0,10,13,-6,0,20,31,3,0,8,38,7),vr(0,10,13,-6,0,21,33,3,0,8,40,7),vr(0,10,14,-6,0,22,35,3,0,8,42,7),vr(0,11,14,-7,0,23,36,3,0,9,44,8),vr(0,11,15,-7,0,24,38,3,0,9,46,8)],I9={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},P9={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function kE(e){return`${Math.round(e)}ms`}function M9(e){if(!e)return 0;const t=e/36;return Math.min(Math.round((4+15*t**.25+t/5)*10),3e3)}function A9(e){const t={...I9,...e.easing},n={...P9,...e.duration};return{getAutoHeightDuration:M9,create:(a=["all"],h={})=>{const{duration:d=n.standard,easing:u=t.easeInOut,delay:b=0,...w}=h;return(Array.isArray(a)?a:[a]).map(P=>`${P} ${typeof d=="string"?d:kE(d)} ${u} ${typeof b=="string"?b:kE(b)}`).join(",")},...e,easing:t,duration:n}}const L9={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};function z9(e){return ia(e)||typeof e>"u"||typeof e=="string"||typeof e=="boolean"||typeof e=="number"||Array.isArray(e)}function a3(e={}){const t={...e};function n(o){const a=Object.entries(o);for(let h=0;h<a.length;h++){const[d,u]=a[h];!z9(u)||d.startsWith("unstable_")?delete o[d]:ia(u)&&(o[d]={...u},n(o[d]))}}return n(t),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(t,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function Tb(e={},...t){const{breakpoints:n,mixins:o={},spacing:a,palette:h={},transitions:d={},typography:u={},shape:b,...w}=e;if(e.vars)throw new Error(Ha(20));const P=m2(h),E=Cv(e);let I=Ni(E,{mixins:b9(E.breakpoints,o),palette:P,shadows:E9.slice(),typography:S9(P,u),transitions:A9(d),zIndex:{...L9}});return I=Ni(I,w),I=t.reduce((R,F)=>Ni(R,F),I),I.unstable_sxConfig={...Cm,...w==null?void 0:w.unstable_sxConfig},I.unstable_sx=function(F){return cc({sx:F,theme:this})},I.toRuntimeSource=a3,I}function Eb(e){let t;return e<1?t=5.11916*e**2:t=4.5*Math.log(e+1)+2,Math.round(t*10)/1e3}const R9=[...Array(25)].map((e,t)=>{if(t===0)return"none";const n=Eb(t);return`linear-gradient(rgba(255 255 255 / ${n}), rgba(255 255 255 / ${n}))`});function l3(e){return{inputPlaceholder:e==="dark"?.5:.42,inputUnderline:e==="dark"?.7:.42,switchTrackDisabled:e==="dark"?.2:.12,switchTrack:e==="dark"?.3:.38}}function u3(e){return e==="dark"?R9:[]}function D9(e){const{palette:t={mode:"light"},opacity:n,overlays:o,...a}=e,h=m2(t);return{palette:h,opacity:{...l3(h.mode),...n},overlays:o||u3(h.mode),...a}}function $9(e){var t;return!!e[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!e[0].match(/sxConfig$/)||e[0]==="palette"&&!!((t=e[1])!=null&&t.match(/(mode|contrastThreshold|tonalOffset)/))}const O9=e=>[...[...Array(25)].map((t,n)=>`--${e?`${e}-`:""}overlays-${n}`),`--${e?`${e}-`:""}palette-AppBar-darkBg`,`--${e?`${e}-`:""}palette-AppBar-darkColor`],B9=e=>(t,n)=>{const o=e.rootSelector||":root",a=e.colorSchemeSelector;let h=a;if(a==="class"&&(h=".%s"),a==="data"&&(h="[data-%s]"),a!=null&&a.startsWith("data-")&&!a.includes("%s")&&(h=`[${a}="%s"]`),e.defaultColorScheme===t){if(t==="dark"){const d={};return O9(e.cssVarPrefix).forEach(u=>{d[u]=n[u],delete n[u]}),h==="media"?{[o]:n,"@media (prefers-color-scheme: dark)":{[o]:d}}:h?{[h.replace("%s",t)]:d,[`${o}, ${h.replace("%s",t)}`]:n}:{[o]:{...n,...d}}}if(h&&h!=="media")return`${o}, ${h.replace("%s",String(t))}`}else if(t){if(h==="media")return{[`@media (prefers-color-scheme: ${String(t)})`]:{[o]:n}};if(h)return h.replace("%s",String(t))}return o};function F9(e,t){t.forEach(n=>{e[n]||(e[n]={})})}function Fe(e,t,n){!e[t]&&n&&(e[t]=n)}function uf(e){return!e||!e.startsWith("hsl")?e:KA(e)}function Aa(e,t){`${t}Channel`in e||(e[`${t}Channel`]=lf(uf(e[t]),`MUI: Can't create \`palette.${t}Channel\` because \`palette.${t}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${t}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function N9(e){return typeof e=="number"?`${e}px`:typeof e=="string"||typeof e=="function"||Array.isArray(e)?e:"8px"}const Xs=e=>{try{return e()}catch{}},j9=(e="mui")=>r9(e);function H_(e,t,n,o){if(!t)return;t=t===!0?{}:t;const a=o==="dark"?"dark":"light";if(!n){e[o]=D9({...t,palette:{mode:a,...t==null?void 0:t.palette}});return}const{palette:h,...d}=Tb({...n,palette:{mode:a,...t==null?void 0:t.palette}});return e[o]={...t,palette:h,opacity:{...l3(a),...t==null?void 0:t.opacity},overlays:(t==null?void 0:t.overlays)||u3(a)},d}function U9(e={},...t){const{colorSchemes:n={light:!0},defaultColorScheme:o,disableCssColorScheme:a=!1,cssVarPrefix:h="mui",shouldSkipGeneratingVar:d=$9,colorSchemeSelector:u=n.light&&n.dark?"media":void 0,rootSelector:b=":root",...w}=e,P=Object.keys(n)[0],E=o||(n.light&&P!=="light"?"light":P),I=j9(h),{[E]:R,light:F,dark:U,...K}=n,D={...K};let j=R;if((E==="dark"&&!("dark"in n)||E==="light"&&!("light"in n))&&(j=!0),!j)throw new Error(Ha(21,E));const V=H_(D,j,w,E);F&&!D.light&&H_(D,F,void 0,"light"),U&&!D.dark&&H_(D,U,void 0,"dark");let Y={defaultColorScheme:E,...V,cssVarPrefix:h,colorSchemeSelector:u,rootSelector:b,getCssVar:I,colorSchemes:D,font:{...x9(V.typography),...V.font},spacing:N9(w.spacing)};Object.keys(Y.colorSchemes).forEach(Ae=>{const H=Y.colorSchemes[Ae].palette,Ee=je=>{const $e=je.split("-"),Le=$e[1],De=$e[2];return I(je,H[Le][De])};if(H.mode==="light"&&(Fe(H.common,"background","#fff"),Fe(H.common,"onBackground","#000")),H.mode==="dark"&&(Fe(H.common,"background","#000"),Fe(H.common,"onBackground","#fff")),F9(H,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),H.mode==="light"){Fe(H.Alert,"errorColor",tr(H.error.light,.6)),Fe(H.Alert,"infoColor",tr(H.info.light,.6)),Fe(H.Alert,"successColor",tr(H.success.light,.6)),Fe(H.Alert,"warningColor",tr(H.warning.light,.6)),Fe(H.Alert,"errorFilledBg",Ee("palette-error-main")),Fe(H.Alert,"infoFilledBg",Ee("palette-info-main")),Fe(H.Alert,"successFilledBg",Ee("palette-success-main")),Fe(H.Alert,"warningFilledBg",Ee("palette-warning-main")),Fe(H.Alert,"errorFilledColor",Xs(()=>H.getContrastText(H.error.main))),Fe(H.Alert,"infoFilledColor",Xs(()=>H.getContrastText(H.info.main))),Fe(H.Alert,"successFilledColor",Xs(()=>H.getContrastText(H.success.main))),Fe(H.Alert,"warningFilledColor",Xs(()=>H.getContrastText(H.warning.main))),Fe(H.Alert,"errorStandardBg",nr(H.error.light,.9)),Fe(H.Alert,"infoStandardBg",nr(H.info.light,.9)),Fe(H.Alert,"successStandardBg",nr(H.success.light,.9)),Fe(H.Alert,"warningStandardBg",nr(H.warning.light,.9)),Fe(H.Alert,"errorIconColor",Ee("palette-error-main")),Fe(H.Alert,"infoIconColor",Ee("palette-info-main")),Fe(H.Alert,"successIconColor",Ee("palette-success-main")),Fe(H.Alert,"warningIconColor",Ee("palette-warning-main")),Fe(H.AppBar,"defaultBg",Ee("palette-grey-100")),Fe(H.Avatar,"defaultBg",Ee("palette-grey-400")),Fe(H.Button,"inheritContainedBg",Ee("palette-grey-300")),Fe(H.Button,"inheritContainedHoverBg",Ee("palette-grey-A100")),Fe(H.Chip,"defaultBorder",Ee("palette-grey-400")),Fe(H.Chip,"defaultAvatarColor",Ee("palette-grey-700")),Fe(H.Chip,"defaultIconColor",Ee("palette-grey-700")),Fe(H.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),Fe(H.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),Fe(H.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),Fe(H.LinearProgress,"primaryBg",nr(H.primary.main,.62)),Fe(H.LinearProgress,"secondaryBg",nr(H.secondary.main,.62)),Fe(H.LinearProgress,"errorBg",nr(H.error.main,.62)),Fe(H.LinearProgress,"infoBg",nr(H.info.main,.62)),Fe(H.LinearProgress,"successBg",nr(H.success.main,.62)),Fe(H.LinearProgress,"warningBg",nr(H.warning.main,.62)),Fe(H.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.11)`),Fe(H.Slider,"primaryTrack",nr(H.primary.main,.62)),Fe(H.Slider,"secondaryTrack",nr(H.secondary.main,.62)),Fe(H.Slider,"errorTrack",nr(H.error.main,.62)),Fe(H.Slider,"infoTrack",nr(H.info.main,.62)),Fe(H.Slider,"successTrack",nr(H.success.main,.62)),Fe(H.Slider,"warningTrack",nr(H.warning.main,.62));const je=ty(H.background.default,.8);Fe(H.SnackbarContent,"bg",je),Fe(H.SnackbarContent,"color",Xs(()=>H.getContrastText(je))),Fe(H.SpeedDialAction,"fabHoverBg",ty(H.background.paper,.15)),Fe(H.StepConnector,"border",Ee("palette-grey-400")),Fe(H.StepContent,"border",Ee("palette-grey-400")),Fe(H.Switch,"defaultColor",Ee("palette-common-white")),Fe(H.Switch,"defaultDisabledColor",Ee("palette-grey-100")),Fe(H.Switch,"primaryDisabledColor",nr(H.primary.main,.62)),Fe(H.Switch,"secondaryDisabledColor",nr(H.secondary.main,.62)),Fe(H.Switch,"errorDisabledColor",nr(H.error.main,.62)),Fe(H.Switch,"infoDisabledColor",nr(H.info.main,.62)),Fe(H.Switch,"successDisabledColor",nr(H.success.main,.62)),Fe(H.Switch,"warningDisabledColor",nr(H.warning.main,.62)),Fe(H.TableCell,"border",nr(ey(H.divider,1),.88)),Fe(H.Tooltip,"bg",ey(H.grey[700],.92))}if(H.mode==="dark"){Fe(H.Alert,"errorColor",nr(H.error.light,.6)),Fe(H.Alert,"infoColor",nr(H.info.light,.6)),Fe(H.Alert,"successColor",nr(H.success.light,.6)),Fe(H.Alert,"warningColor",nr(H.warning.light,.6)),Fe(H.Alert,"errorFilledBg",Ee("palette-error-dark")),Fe(H.Alert,"infoFilledBg",Ee("palette-info-dark")),Fe(H.Alert,"successFilledBg",Ee("palette-success-dark")),Fe(H.Alert,"warningFilledBg",Ee("palette-warning-dark")),Fe(H.Alert,"errorFilledColor",Xs(()=>H.getContrastText(H.error.dark))),Fe(H.Alert,"infoFilledColor",Xs(()=>H.getContrastText(H.info.dark))),Fe(H.Alert,"successFilledColor",Xs(()=>H.getContrastText(H.success.dark))),Fe(H.Alert,"warningFilledColor",Xs(()=>H.getContrastText(H.warning.dark))),Fe(H.Alert,"errorStandardBg",tr(H.error.light,.9)),Fe(H.Alert,"infoStandardBg",tr(H.info.light,.9)),Fe(H.Alert,"successStandardBg",tr(H.success.light,.9)),Fe(H.Alert,"warningStandardBg",tr(H.warning.light,.9)),Fe(H.Alert,"errorIconColor",Ee("palette-error-main")),Fe(H.Alert,"infoIconColor",Ee("palette-info-main")),Fe(H.Alert,"successIconColor",Ee("palette-success-main")),Fe(H.Alert,"warningIconColor",Ee("palette-warning-main")),Fe(H.AppBar,"defaultBg",Ee("palette-grey-900")),Fe(H.AppBar,"darkBg",Ee("palette-background-paper")),Fe(H.AppBar,"darkColor",Ee("palette-text-primary")),Fe(H.Avatar,"defaultBg",Ee("palette-grey-600")),Fe(H.Button,"inheritContainedBg",Ee("palette-grey-800")),Fe(H.Button,"inheritContainedHoverBg",Ee("palette-grey-700")),Fe(H.Chip,"defaultBorder",Ee("palette-grey-700")),Fe(H.Chip,"defaultAvatarColor",Ee("palette-grey-300")),Fe(H.Chip,"defaultIconColor",Ee("palette-grey-300")),Fe(H.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),Fe(H.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),Fe(H.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),Fe(H.LinearProgress,"primaryBg",tr(H.primary.main,.5)),Fe(H.LinearProgress,"secondaryBg",tr(H.secondary.main,.5)),Fe(H.LinearProgress,"errorBg",tr(H.error.main,.5)),Fe(H.LinearProgress,"infoBg",tr(H.info.main,.5)),Fe(H.LinearProgress,"successBg",tr(H.success.main,.5)),Fe(H.LinearProgress,"warningBg",tr(H.warning.main,.5)),Fe(H.Skeleton,"bg",`rgba(${Ee("palette-text-primaryChannel")} / 0.13)`),Fe(H.Slider,"primaryTrack",tr(H.primary.main,.5)),Fe(H.Slider,"secondaryTrack",tr(H.secondary.main,.5)),Fe(H.Slider,"errorTrack",tr(H.error.main,.5)),Fe(H.Slider,"infoTrack",tr(H.info.main,.5)),Fe(H.Slider,"successTrack",tr(H.success.main,.5)),Fe(H.Slider,"warningTrack",tr(H.warning.main,.5));const je=ty(H.background.default,.98);Fe(H.SnackbarContent,"bg",je),Fe(H.SnackbarContent,"color",Xs(()=>H.getContrastText(je))),Fe(H.SpeedDialAction,"fabHoverBg",ty(H.background.paper,.15)),Fe(H.StepConnector,"border",Ee("palette-grey-600")),Fe(H.StepContent,"border",Ee("palette-grey-600")),Fe(H.Switch,"defaultColor",Ee("palette-grey-300")),Fe(H.Switch,"defaultDisabledColor",Ee("palette-grey-600")),Fe(H.Switch,"primaryDisabledColor",tr(H.primary.main,.55)),Fe(H.Switch,"secondaryDisabledColor",tr(H.secondary.main,.55)),Fe(H.Switch,"errorDisabledColor",tr(H.error.main,.55)),Fe(H.Switch,"infoDisabledColor",tr(H.info.main,.55)),Fe(H.Switch,"successDisabledColor",tr(H.success.main,.55)),Fe(H.Switch,"warningDisabledColor",tr(H.warning.main,.55)),Fe(H.TableCell,"border",tr(ey(H.divider,1),.68)),Fe(H.Tooltip,"bg",ey(H.grey[700],.92))}Aa(H.background,"default"),Aa(H.background,"paper"),Aa(H.common,"background"),Aa(H.common,"onBackground"),Aa(H,"divider"),Object.keys(H).forEach(je=>{const $e=H[je];$e&&typeof $e=="object"&&($e.main&&Fe(H[je],"mainChannel",lf(uf($e.main))),$e.light&&Fe(H[je],"lightChannel",lf(uf($e.light))),$e.dark&&Fe(H[je],"darkChannel",lf(uf($e.dark))),$e.contrastText&&Fe(H[je],"contrastTextChannel",lf(uf($e.contrastText))),je==="text"&&(Aa(H[je],"primary"),Aa(H[je],"secondary")),je==="action"&&($e.active&&Aa(H[je],"active"),$e.selected&&Aa(H[je],"selected")))})}),Y=t.reduce((Ae,H)=>Ni(Ae,H),Y);const ce={prefix:h,disableCssColorScheme:a,shouldSkipGeneratingVar:d,getSelector:B9(Y)},{vars:de,generateThemeVars:le,generateStyleSheets:ge}=s9(Y,ce);return Y.vars=de,Object.entries(Y.colorSchemes[Y.defaultColorScheme]).forEach(([Ae,H])=>{Y[Ae]=H}),Y.generateThemeVars=le,Y.generateStyleSheets=ge,Y.generateSpacing=function(){return VA(w.spacing,l2(this))},Y.getColorSchemeSelector=a9(u),Y.spacing=Y.generateSpacing(),Y.shouldSkipGeneratingVar=d,Y.unstable_sxConfig={...Cm,...w==null?void 0:w.unstable_sxConfig},Y.unstable_sx=function(H){return cc({sx:H,theme:this})},Y.toRuntimeSource=a3,Y}function TE(e,t,n){e.colorSchemes&&n&&(e.colorSchemes[t]={...n!==!0&&n,palette:m2({...n===!0?{}:n.palette,mode:t})})}function c3(e={},...t){const{palette:n,cssVariables:o=!1,colorSchemes:a=n?void 0:{light:!0},defaultColorScheme:h=n==null?void 0:n.mode,...d}=e,u=h||"light",b=a==null?void 0:a[u],w={...a,...n?{[u]:{...typeof b!="boolean"&&b,palette:n}}:void 0};if(o===!1){if(!("colorSchemes"in e))return Tb(e,...t);let P=n;"palette"in e||w[u]&&(w[u]!==!0?P=w[u].palette:u==="dark"&&(P={mode:"dark"}));const E=Tb({...e,palette:P},...t);return E.defaultColorScheme=u,E.colorSchemes=w,E.palette.mode==="light"&&(E.colorSchemes.light={...w.light!==!0&&w.light,palette:E.palette},TE(E,"dark",w.dark)),E.palette.mode==="dark"&&(E.colorSchemes.dark={...w.dark!==!0&&w.dark,palette:E.palette},TE(E,"light",w.light)),E}return!n&&!("light"in w)&&u==="light"&&(w.light=!0),U9({...d,colorSchemes:w,defaultColorScheme:u,...typeof o!="boolean"&&o},...t)}const g2=c3();function Ev(){const e=kv(g2);return e[tv]||e}function h3(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Ns=e=>h3(e)&&e!=="classes",It=ZA({themeId:tv,defaultTheme:g2,rootShouldForwardProp:Ns});function V9(e){return Ie.jsx(T7,{...e,defaultTheme:g2,themeId:tv})}function W9(e){return function(n){return Ie.jsx(V9,{styles:typeof e=="function"?o=>e({theme:o,...n}):e})}}function q9(){return c2}const dr=n9;function Pn(e){return t9(e)}function G9(e){return kn("MuiSvgIcon",e)}wn("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const H9=e=>{const{color:t,fontSize:n,classes:o}=e,a={root:["root",t!=="inherit"&&`color${hn(t)}`,`fontSize${hn(n)}`]};return In(a,G9,o)},Z9=It("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.color!=="inherit"&&t[`color${hn(n.color)}`],t[`fontSize${hn(n.fontSize)}`]]}})(dr(({theme:e})=>{var t,n,o,a,h,d,u,b,w,P,E,I,R,F;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(a=(t=e.transitions)==null?void 0:t.create)==null?void 0:a.call(t,"fill",{duration:(o=(n=(e.vars??e).transitions)==null?void 0:n.duration)==null?void 0:o.shorter}),variants:[{props:U=>!U.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((d=(h=e.typography)==null?void 0:h.pxToRem)==null?void 0:d.call(h,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((b=(u=e.typography)==null?void 0:u.pxToRem)==null?void 0:b.call(u,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((P=(w=e.typography)==null?void 0:w.pxToRem)==null?void 0:P.call(w,35))||"2.1875rem"}},...Object.entries((e.vars??e).palette).filter(([,U])=>U&&U.main).map(([U])=>{var K,D;return{props:{color:U},style:{color:(D=(K=(e.vars??e).palette)==null?void 0:K[U])==null?void 0:D.main}}}),{props:{color:"action"},style:{color:(I=(E=(e.vars??e).palette)==null?void 0:E.action)==null?void 0:I.active}},{props:{color:"disabled"},style:{color:(F=(R=(e.vars??e).palette)==null?void 0:R.action)==null?void 0:F.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),nc=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiSvgIcon"}),{children:a,className:h,color:d="inherit",component:u="svg",fontSize:b="medium",htmlColor:w,inheritViewBox:P=!1,titleAccess:E,viewBox:I="0 0 24 24",...R}=o,F=re.isValidElement(a)&&a.type==="svg",U={...o,color:d,component:u,fontSize:b,instanceFontSize:t.fontSize,inheritViewBox:P,viewBox:I,hasSvgAsChild:F},K={};P||(K.viewBox=I);const D=H9(U);return Ie.jsxs(Z9,{as:u,className:Wt(D.root,h),focusable:"false",color:w,"aria-hidden":E?void 0:!0,role:E?"img":void 0,ref:n,...K,...R,...F&&a.props,ownerState:U,children:[F?a.props.children:a,E?Ie.jsx("title",{children:E}):null]})});nc&&(nc.muiName="SvgIcon");function d3(e,t){function n(o,a){return Ie.jsx(nc,{"data-testid":`${t}Icon`,ref:a,...o,children:e})}return n.muiName=nc.muiName,re.memo(re.forwardRef(n))}var Jn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=Symbol.for("react.element"),v2=Symbol.for("react.portal"),Iv=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Mv=Symbol.for("react.profiler"),Av=Symbol.for("react.provider"),Lv=Symbol.for("react.context"),K9=Symbol.for("react.server_context"),zv=Symbol.for("react.forward_ref"),Rv=Symbol.for("react.suspense"),Dv=Symbol.for("react.suspense_list"),$v=Symbol.for("react.memo"),Ov=Symbol.for("react.lazy"),X9=Symbol.for("react.offscreen"),p3;p3=Symbol.for("react.module.reference");function bs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case y2:switch(e=e.type,e){case Iv:case Mv:case Pv:case Rv:case Dv:return e;default:switch(e=e&&e.$$typeof,e){case K9:case Lv:case zv:case Ov:case $v:case Av:return e;default:return t}}case v2:return t}}}Jn.ContextConsumer=Lv;Jn.ContextProvider=Av;Jn.Element=y2;Jn.ForwardRef=zv;Jn.Fragment=Iv;Jn.Lazy=Ov;Jn.Memo=$v;Jn.Portal=v2;Jn.Profiler=Mv;Jn.StrictMode=Pv;Jn.Suspense=Rv;Jn.SuspenseList=Dv;Jn.isAsyncMode=function(){return!1};Jn.isConcurrentMode=function(){return!1};Jn.isContextConsumer=function(e){return bs(e)===Lv};Jn.isContextProvider=function(e){return bs(e)===Av};Jn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===y2};Jn.isForwardRef=function(e){return bs(e)===zv};Jn.isFragment=function(e){return bs(e)===Iv};Jn.isLazy=function(e){return bs(e)===Ov};Jn.isMemo=function(e){return bs(e)===$v};Jn.isPortal=function(e){return bs(e)===v2};Jn.isProfiler=function(e){return bs(e)===Mv};Jn.isStrictMode=function(e){return bs(e)===Pv};Jn.isSuspense=function(e){return bs(e)===Rv};Jn.isSuspenseList=function(e){return bs(e)===Dv};Jn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Iv||e===Mv||e===Pv||e===Rv||e===Dv||e===X9||typeof e=="object"&&e!==null&&(e.$$typeof===Ov||e.$$typeof===$v||e.$$typeof===Av||e.$$typeof===Lv||e.$$typeof===zv||e.$$typeof===p3||e.getModuleId!==void 0)};Jn.typeOf=bs;function f3(e,t){if(e==null)return{};var n={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.includes(o))continue;n[o]=e[o]}return n}function Ib(e,t){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Ib(e,t)}function m3(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ib(e,t)}const EE={disabled:!1},y0=di.createContext(null);var Y9=function(t){return t.scrollTop},cf="unmounted",ju="exited",Uu="entering",Sh="entered",Pb="exiting",pa=function(e){m3(t,e);function t(o,a){var h;h=e.call(this,o,a)||this;var d=a,u=d&&!d.isMounting?o.enter:o.appear,b;return h.appearStatus=null,o.in?u?(b=ju,h.appearStatus=Uu):b=Sh:o.unmountOnExit||o.mountOnEnter?b=cf:b=ju,h.state={status:b},h.nextCallback=null,h}t.getDerivedStateFromProps=function(a,h){var d=a.in;return d&&h.status===cf?{status:ju}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(a){var h=null;if(a!==this.props){var d=this.state.status;this.props.in?d!==Uu&&d!==Sh&&(h=Uu):(d===Uu||d===Sh)&&(h=Pb)}this.updateStatus(!1,h)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var a=this.props.timeout,h,d,u;return h=d=u=a,a!=null&&typeof a!="number"&&(h=a.exit,d=a.enter,u=a.appear!==void 0?a.appear:d),{exit:h,enter:d,appear:u}},n.updateStatus=function(a,h){if(a===void 0&&(a=!1),h!==null)if(this.cancelNextCallback(),h===Uu){if(this.props.unmountOnExit||this.props.mountOnEnter){var d=this.props.nodeRef?this.props.nodeRef.current:qg.findDOMNode(this);d&&Y9(d)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ju&&this.setState({status:cf})},n.performEnter=function(a){var h=this,d=this.props.enter,u=this.context?this.context.isMounting:a,b=this.props.nodeRef?[u]:[qg.findDOMNode(this),u],w=b[0],P=b[1],E=this.getTimeouts(),I=u?E.appear:E.enter;if(!a&&!d||EE.disabled){this.safeSetState({status:Sh},function(){h.props.onEntered(w)});return}this.props.onEnter(w,P),this.safeSetState({status:Uu},function(){h.props.onEntering(w,P),h.onTransitionEnd(I,function(){h.safeSetState({status:Sh},function(){h.props.onEntered(w,P)})})})},n.performExit=function(){var a=this,h=this.props.exit,d=this.getTimeouts(),u=this.props.nodeRef?void 0:qg.findDOMNode(this);if(!h||EE.disabled){this.safeSetState({status:ju},function(){a.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:Pb},function(){a.props.onExiting(u),a.onTransitionEnd(d.exit,function(){a.safeSetState({status:ju},function(){a.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(a,h){h=this.setNextCallback(h),this.setState(a,h)},n.setNextCallback=function(a){var h=this,d=!0;return this.nextCallback=function(u){d&&(d=!1,h.nextCallback=null,a(u))},this.nextCallback.cancel=function(){d=!1},this.nextCallback},n.onTransitionEnd=function(a,h){this.setNextCallback(h);var d=this.props.nodeRef?this.props.nodeRef.current:qg.findDOMNode(this),u=a==null&&!this.props.addEndListener;if(!d||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var b=this.props.nodeRef?[this.nextCallback]:[d,this.nextCallback],w=b[0],P=b[1];this.props.addEndListener(w,P)}a!=null&&setTimeout(this.nextCallback,a)},n.render=function(){var a=this.state.status;if(a===cf)return null;var h=this.props,d=h.children;h.in,h.mountOnEnter,h.unmountOnExit,h.appear,h.enter,h.exit,h.timeout,h.addEndListener,h.onEnter,h.onEntering,h.onEntered,h.onExit,h.onExiting,h.onExited,h.nodeRef;var u=f3(h,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return di.createElement(y0.Provider,{value:null},typeof d=="function"?d(a,u):di.cloneElement(di.Children.only(d),u))},t}(di.Component);pa.contextType=y0;pa.propTypes={};function gh(){}pa.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gh,onEntering:gh,onEntered:gh,onExit:gh,onExiting:gh,onExited:gh};pa.UNMOUNTED=cf;pa.EXITED=ju;pa.ENTERING=Uu;pa.ENTERED=Sh;pa.EXITING=Pb;function J9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _2(e,t){var n=function(h){return t&&re.isValidElement(h)?t(h):h},o=Object.create(null);return e&&re.Children.map(e,function(a){return a}).forEach(function(a){o[a.key]=n(a)}),o}function Q9(e,t){e=e||{},t=t||{};function n(P){return P in t?t[P]:e[P]}var o=Object.create(null),a=[];for(var h in e)h in t?a.length&&(o[h]=a,a=[]):a.push(h);var d,u={};for(var b in t){if(o[b])for(d=0;d<o[b].length;d++){var w=o[b][d];u[o[b][d]]=n(w)}u[b]=n(b)}for(d=0;d<a.length;d++)u[a[d]]=n(a[d]);return u}function Zu(e,t,n){return n[t]!=null?n[t]:e.props[t]}function ej(e,t){return _2(e.children,function(n){return re.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:Zu(n,"appear",e),enter:Zu(n,"enter",e),exit:Zu(n,"exit",e)})})}function tj(e,t,n){var o=_2(e.children),a=Q9(t,o);return Object.keys(a).forEach(function(h){var d=a[h];if(re.isValidElement(d)){var u=h in t,b=h in o,w=t[h],P=re.isValidElement(w)&&!w.props.in;b&&(!u||P)?a[h]=re.cloneElement(d,{onExited:n.bind(null,d),in:!0,exit:Zu(d,"exit",e),enter:Zu(d,"enter",e)}):!b&&u&&!P?a[h]=re.cloneElement(d,{in:!1}):b&&u&&re.isValidElement(w)&&(a[h]=re.cloneElement(d,{onExited:n.bind(null,d),in:w.props.in,exit:Zu(d,"exit",e),enter:Zu(d,"enter",e)}))}}),a}var nj=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},rj={component:"div",childFactory:function(t){return t}},x2=function(e){m3(t,e);function t(o,a){var h;h=e.call(this,o,a)||this;var d=h.handleExited.bind(J9(h));return h.state={contextValue:{isMounting:!0},handleExited:d,firstRender:!0},h}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(a,h){var d=h.children,u=h.handleExited,b=h.firstRender;return{children:b?ej(a,u):tj(a,d,u),firstRender:!1}},n.handleExited=function(a,h){var d=_2(this.props.children);a.key in d||(a.props.onExited&&a.props.onExited(h),this.mounted&&this.setState(function(u){var b=f0({},u.children);return delete b[a.key],{children:b}}))},n.render=function(){var a=this.props,h=a.component,d=a.childFactory,u=f3(a,["component","childFactory"]),b=this.state.contextValue,w=nj(this.state.children).map(d);return delete u.appear,delete u.enter,delete u.exit,h===null?di.createElement(y0.Provider,{value:b},w):di.createElement(y0.Provider,{value:b},di.createElement(h,u,w))},t}(di.Component);x2.propTypes={};x2.defaultProps=rj;const g3=e=>e.scrollTop;function v0(e,t){const{timeout:n,easing:o,style:a={}}=e;return{duration:a.transitionDuration??(typeof n=="number"?n:n[t.mode]||0),easing:a.transitionTimingFunction??(typeof o=="object"?o[t.mode]:o),delay:a.transitionDelay}}function ij(e){return kn("MuiPaper",e)}wn("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const oj=e=>{const{square:t,elevation:n,variant:o,classes:a}=e,h={root:["root",o,!t&&"rounded",o==="elevation"&&`elevation${n}`]};return In(h,ij,a)},sj=It("div",{name:"MuiPaper",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],!n.square&&t.rounded,n.variant==="elevation"&&t[`elevation${n.elevation}`]]}})(dr(({theme:e})=>({backgroundColor:(e.vars||e).palette.background.paper,color:(e.vars||e).palette.text.primary,transition:e.transitions.create("box-shadow"),variants:[{props:({ownerState:t})=>!t.square,style:{borderRadius:e.shape.borderRadius}},{props:{variant:"outlined"},style:{border:`1px solid ${(e.vars||e).palette.divider}`}},{props:{variant:"elevation"},style:{boxShadow:"var(--Paper-shadow)",backgroundImage:"var(--Paper-overlay)"}}]}))),b2=re.forwardRef(function(t,n){var R;const o=Pn({props:t,name:"MuiPaper"}),a=Ev(),{className:h,component:d="div",elevation:u=1,square:b=!1,variant:w="elevation",...P}=o,E={...o,component:d,elevation:u,square:b,variant:w},I=oj(E);return Ie.jsx(sj,{as:d,ownerState:E,className:Wt(I.root,h),ref:n,...P,style:{...w==="elevation"&&{"--Paper-shadow":(a.vars||a).shadows[u],...a.vars&&{"--Paper-overlay":(R=a.vars.overlays)==null?void 0:R[u]},...!a.vars&&a.palette.mode==="dark"&&{"--Paper-overlay":`linear-gradient(${Ra("#fff",Eb(u))}, ${Ra("#fff",Eb(u))})`}},...P.style}})});function hs(e,t){const{className:n,elementType:o,ownerState:a,externalForwardedProps:h,getSlotOwnerState:d,internalForwardedProps:u,...b}=t,{component:w,slots:P={[e]:void 0},slotProps:E={[e]:void 0},...I}=h,R=P[e]||o,F=i3(E[e],a),{props:{component:U,...K},internalRef:D}=r3({className:n,...b,externalForwardedProps:e==="root"?I:void 0,externalSlotProps:F}),j=Ti(D,F==null?void 0:F.ref,t.ref),V=d?d(K):{},Y={...a,...V},ce=e==="root"?U||w:U,de=t3(R,{...e==="root"&&!w&&!P[e]&&u,...e!=="root"&&!P[e]&&u,...K,...ce&&{as:ce},ref:j},Y);return Object.keys(V).forEach(le=>{delete de[le]}),[R,de]}class _0{constructor(){Rp(this,"mountEffect",()=>{this.shouldMount&&!this.didMount&&this.ref.current!==null&&(this.didMount=!0,this.mounted.resolve())});this.ref={current:null},this.mounted=null,this.didMount=!1,this.shouldMount=!1,this.setShouldMount=null}static create(){return new _0}static use(){const t=JA(_0.create).current,[n,o]=re.useState(!1);return t.shouldMount=n,t.setShouldMount=o,re.useEffect(t.mountEffect,[n]),t}mount(){return this.mounted||(this.mounted=lj(),this.shouldMount=!0,this.setShouldMount(this.shouldMount)),this.mounted}start(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.start(...t)})}stop(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.stop(...t)})}pulsate(...t){this.mount().then(()=>{var n;return(n=this.ref.current)==null?void 0:n.pulsate(...t)})}}function aj(){return _0.use()}function lj(){let e,t;const n=new Promise((o,a)=>{e=o,t=a});return n.resolve=e,n.reject=t,n}function uj(e){const{className:t,classes:n,pulsate:o=!1,rippleX:a,rippleY:h,rippleSize:d,in:u,onExited:b,timeout:w}=e,[P,E]=re.useState(!1),I=Wt(t,n.ripple,n.rippleVisible,o&&n.ripplePulsate),R={width:d,height:d,top:-(d/2)+h,left:-(d/2)+a},F=Wt(n.child,P&&n.childLeaving,o&&n.childPulsate);return!u&&!P&&E(!0),re.useEffect(()=>{if(!u&&b!=null){const U=setTimeout(b,w);return()=>{clearTimeout(U)}}},[b,u,w]),Ie.jsx("span",{className:I,style:R,children:Ie.jsx("span",{className:F})})}const as=wn("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Mb=550,cj=80,hj=o2`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`,dj=o2`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`,pj=o2`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`,fj=It("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),mj=It(uj,{name:"MuiTouchRipple",slot:"Ripple"})`
  opacity: 0;
  position: absolute;

  &.${as.rippleVisible} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${hj};
    animation-duration: ${Mb}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  &.${as.ripplePulsate} {
    animation-duration: ${({theme:e})=>e.transitions.duration.shorter}ms;
  }

  & .${as.child} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${as.childLeaving} {
    opacity: 0;
    animation-name: ${dj};
    animation-duration: ${Mb}ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
  }

  & .${as.childPulsate} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${pj};
    animation-duration: 2500ms;
    animation-timing-function: ${({theme:e})=>e.transitions.easing.easeInOut};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`,gj=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiTouchRipple"}),{center:a=!1,classes:h={},className:d,...u}=o,[b,w]=re.useState([]),P=re.useRef(0),E=re.useRef(null);re.useEffect(()=>{E.current&&(E.current(),E.current=null)},[b]);const I=re.useRef(!1),R=QA(),F=re.useRef(null),U=re.useRef(null),K=re.useCallback(Y=>{const{pulsate:ce,rippleX:de,rippleY:le,rippleSize:ge,cb:Ae}=Y;w(H=>[...H,Ie.jsx(mj,{classes:{ripple:Wt(h.ripple,as.ripple),rippleVisible:Wt(h.rippleVisible,as.rippleVisible),ripplePulsate:Wt(h.ripplePulsate,as.ripplePulsate),child:Wt(h.child,as.child),childLeaving:Wt(h.childLeaving,as.childLeaving),childPulsate:Wt(h.childPulsate,as.childPulsate)},timeout:Mb,pulsate:ce,rippleX:de,rippleY:le,rippleSize:ge},P.current)]),P.current+=1,E.current=Ae},[h]),D=re.useCallback((Y={},ce={},de=()=>{})=>{const{pulsate:le=!1,center:ge=a||ce.pulsate,fakeElement:Ae=!1}=ce;if((Y==null?void 0:Y.type)==="mousedown"&&I.current){I.current=!1;return}(Y==null?void 0:Y.type)==="touchstart"&&(I.current=!0);const H=Ae?null:U.current,Ee=H?H.getBoundingClientRect():{width:0,height:0,left:0,top:0};let je,$e,Le;if(ge||Y===void 0||Y.clientX===0&&Y.clientY===0||!Y.clientX&&!Y.touches)je=Math.round(Ee.width/2),$e=Math.round(Ee.height/2);else{const{clientX:De,clientY:We}=Y.touches&&Y.touches.length>0?Y.touches[0]:Y;je=Math.round(De-Ee.left),$e=Math.round(We-Ee.top)}if(ge)Le=Math.sqrt((2*Ee.width**2+Ee.height**2)/3),Le%2===0&&(Le+=1);else{const De=Math.max(Math.abs((H?H.clientWidth:0)-je),je)*2+2,We=Math.max(Math.abs((H?H.clientHeight:0)-$e),$e)*2+2;Le=Math.sqrt(De**2+We**2)}Y!=null&&Y.touches?F.current===null&&(F.current=()=>{K({pulsate:le,rippleX:je,rippleY:$e,rippleSize:Le,cb:de})},R.start(cj,()=>{F.current&&(F.current(),F.current=null)})):K({pulsate:le,rippleX:je,rippleY:$e,rippleSize:Le,cb:de})},[a,K,R]),j=re.useCallback(()=>{D({},{pulsate:!0})},[D]),V=re.useCallback((Y,ce)=>{if(R.clear(),(Y==null?void 0:Y.type)==="touchend"&&F.current){F.current(),F.current=null,R.start(0,()=>{V(Y,ce)});return}F.current=null,w(de=>de.length>0?de.slice(1):de),E.current=ce},[R]);return re.useImperativeHandle(n,()=>({pulsate:j,start:D,stop:V}),[j,D,V]),Ie.jsx(fj,{className:Wt(as.root,h.root,d),ref:U,...u,children:Ie.jsx(x2,{component:null,exit:!0,children:b})})});function yj(e){return kn("MuiButtonBase",e)}const vj=wn("MuiButtonBase",["root","disabled","focusVisible"]),_j=e=>{const{disabled:t,focusVisible:n,focusVisibleClassName:o,classes:a}=e,d=In({root:["root",t&&"disabled",n&&"focusVisible"]},yj,a);return n&&o&&(d.root+=` ${o}`),d},xj=It("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${vj.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),y3=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiButtonBase"}),{action:a,centerRipple:h=!1,children:d,className:u,component:b="button",disabled:w=!1,disableRipple:P=!1,disableTouchRipple:E=!1,focusRipple:I=!1,focusVisibleClassName:R,LinkComponent:F="a",onBlur:U,onClick:K,onContextMenu:D,onDragLeave:j,onFocus:V,onFocusVisible:Y,onKeyDown:ce,onKeyUp:de,onMouseDown:le,onMouseLeave:ge,onMouseUp:Ae,onTouchEnd:H,onTouchMove:Ee,onTouchStart:je,tabIndex:$e=0,TouchRippleProps:Le,touchRippleRef:De,type:We,...ut}=o,Be=re.useRef(null),Ye=aj(),pt=Ti(Ye.ref,De),[St,At]=re.useState(!1);w&&St&&At(!1),re.useImperativeHandle(a,()=>({focusVisible:()=>{At(!0),Be.current.focus()}}),[]);const Nt=Ye.shouldMount&&!P&&!w;re.useEffect(()=>{St&&I&&!P&&Ye.pulsate()},[P,I,St,Ye]);function Lt(bt,Mn,pr=E){return Oh(Zr=>(Mn&&Mn(Zr),pr||Ye[bt](Zr),!0))}const Zt=Lt("start",le),un=Lt("stop",D),en=Lt("stop",j),Bn=Lt("stop",Ae),Sn=Lt("stop",bt=>{St&&bt.preventDefault(),ge&&ge(bt)}),jt=Lt("start",je),tn=Lt("stop",H),Ut=Lt("stop",Ee),gn=Lt("stop",bt=>{gE(bt.target)||At(!1),U&&U(bt)},!1),yt=Oh(bt=>{Be.current||(Be.current=bt.currentTarget),gE(bt.target)&&(At(!0),Y&&Y(bt)),V&&V(bt)}),zt=()=>{const bt=Be.current;return b&&b!=="button"&&!(bt.tagName==="A"&&bt.href)},we=Oh(bt=>{I&&!bt.repeat&&St&&bt.key===" "&&Ye.stop(bt,()=>{Ye.start(bt)}),bt.target===bt.currentTarget&&zt()&&bt.key===" "&&bt.preventDefault(),ce&&ce(bt),bt.target===bt.currentTarget&&zt()&&bt.key==="Enter"&&!w&&(bt.preventDefault(),K&&K(bt))}),ir=Oh(bt=>{I&&bt.key===" "&&St&&!bt.defaultPrevented&&Ye.stop(bt,()=>{Ye.pulsate(bt)}),de&&de(bt),K&&bt.target===bt.currentTarget&&zt()&&bt.key===" "&&!bt.defaultPrevented&&K(bt)});let pn=b;pn==="button"&&(ut.href||ut.to)&&(pn=F);const ht={};pn==="button"?(ht.type=We===void 0?"button":We,ht.disabled=w):(!ut.href&&!ut.to&&(ht.role="button"),w&&(ht["aria-disabled"]=w));const Vt=Ti(n,Be),an={...o,centerRipple:h,component:b,disabled:w,disableRipple:P,disableTouchRipple:E,focusRipple:I,tabIndex:$e,focusVisible:St},Qn=_j(an);return Ie.jsxs(xj,{as:pn,className:Wt(Qn.root,u),ownerState:an,onBlur:gn,onClick:K,onContextMenu:un,onFocus:yt,onKeyDown:we,onKeyUp:ir,onMouseDown:Zt,onMouseLeave:Sn,onMouseUp:Bn,onDragLeave:en,onTouchEnd:tn,onTouchMove:Ut,onTouchStart:jt,ref:Vt,tabIndex:w?-1:$e,type:We,...ht,...ut,children:[d,Nt?Ie.jsx(gj,{ref:pt,center:h,...Le}):null]})});function bj(e){return typeof e.main=="string"}function wj(e,t=[]){if(!bj(e))return!1;for(const n of t)if(!e.hasOwnProperty(n)||typeof e[n]!="string")return!1;return!0}function Sd(e=[]){return([,t])=>t&&wj(t,e)}function Sj(e){return kn("MuiTypography",e)}const IE=wn("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]),Cj={primary:!0,secondary:!0,error:!0,info:!0,success:!0,warning:!0,textPrimary:!0,textSecondary:!0,textDisabled:!0},kj=q9(),Tj=e=>{const{align:t,gutterBottom:n,noWrap:o,paragraph:a,variant:h,classes:d}=e,u={root:["root",h,e.align!=="inherit"&&`align${hn(t)}`,n&&"gutterBottom",o&&"noWrap",a&&"paragraph"]};return In(u,Sj,d)},Ej=It("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${hn(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(dr(({theme:e})=>{var t;return{margin:0,variants:[{props:{variant:"inherit"},style:{font:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}},...Object.entries(e.typography).filter(([n,o])=>n!=="inherit"&&o&&typeof o=="object").map(([n,o])=>({props:{variant:n},style:o})),...Object.entries(e.palette).filter(Sd()).map(([n])=>({props:{color:n},style:{color:(e.vars||e).palette[n].main}})),...Object.entries(((t=e.palette)==null?void 0:t.text)||{}).filter(([,n])=>typeof n=="string").map(([n])=>({props:{color:`text${hn(n)}`},style:{color:(e.vars||e).palette.text[n]}})),{props:({ownerState:n})=>n.align!=="inherit",style:{textAlign:"var(--Typography-textAlign)"}},{props:({ownerState:n})=>n.noWrap,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{props:({ownerState:n})=>n.gutterBottom,style:{marginBottom:"0.35em"}},{props:({ownerState:n})=>n.paragraph,style:{marginBottom:16}}]}})),PE={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Uo=re.forwardRef(function(t,n){const{color:o,...a}=Pn({props:t,name:"MuiTypography"}),h=!Cj[o],d=kj({...a,...h&&{color:o}}),{align:u="inherit",className:b,component:w,gutterBottom:P=!1,noWrap:E=!1,paragraph:I=!1,variant:R="body1",variantMapping:F=PE,...U}=d,K={...d,align:u,color:o,className:b,component:w,gutterBottom:P,noWrap:E,paragraph:I,variant:R,variantMapping:F},D=w||(I?"p":F[R]||PE[R])||"span",j=Tj(K);return Ie.jsx(Ej,{as:D,ref:n,className:Wt(j.root,b),...U,ownerState:K,style:{...u!=="inherit"&&{"--Typography-textAlign":u},...U.style}})});function Ij(e){return typeof e=="function"?e():e}const Pj=re.forwardRef(function(t,n){const{children:o,container:a,disablePortal:h=!1}=t,[d,u]=re.useState(null),b=Ti(re.isValidElement(o)?km(o):null,n);if(hc(()=>{h||u(Ij(a)||document.body)},[a,h]),hc(()=>{if(d&&!h)return kb(n,d),()=>{kb(n,null)}},[n,d,h]),h){if(re.isValidElement(o)){const w={ref:b};return re.cloneElement(o,w)}return Ie.jsx(re.Fragment,{children:o})}return Ie.jsx(re.Fragment,{children:d&&Ew.createPortal(o,d)})});function ny(e){return parseInt(e,10)||0}const Mj={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function Aj(e){return e==null||Object.keys(e).length===0||e.outerHeightStyle===0&&!e.overflowing}const Lj=re.forwardRef(function(t,n){const{onChange:o,maxRows:a,minRows:h=1,style:d,value:u,...b}=t,{current:w}=re.useRef(u!=null),P=re.useRef(null),E=Ti(n,P),I=re.useRef(null),R=re.useRef(null),F=re.useCallback(()=>{const D=P.current,V=Za(D).getComputedStyle(D);if(V.width==="0px")return{outerHeightStyle:0,overflowing:!1};const Y=R.current;Y.style.width=V.width,Y.value=D.value||t.placeholder||"x",Y.value.slice(-1)===`
`&&(Y.value+=" ");const ce=V.boxSizing,de=ny(V.paddingBottom)+ny(V.paddingTop),le=ny(V.borderBottomWidth)+ny(V.borderTopWidth),ge=Y.scrollHeight;Y.value="x";const Ae=Y.scrollHeight;let H=ge;h&&(H=Math.max(Number(h)*Ae,H)),a&&(H=Math.min(Number(a)*Ae,H)),H=Math.max(H,Ae);const Ee=H+(ce==="border-box"?de+le:0),je=Math.abs(H-ge)<=1;return{outerHeightStyle:Ee,overflowing:je}},[a,h,t.placeholder]),U=re.useCallback(()=>{const D=F();if(Aj(D))return;const j=D.outerHeightStyle,V=P.current;I.current!==j&&(I.current=j,V.style.height=`${j}px`),V.style.overflow=D.overflowing?"hidden":""},[F]);hc(()=>{const D=()=>{U()};let j;const V=XA(D),Y=P.current,ce=Za(Y);ce.addEventListener("resize",V);let de;return typeof ResizeObserver<"u"&&(de=new ResizeObserver(D),de.observe(Y)),()=>{V.clear(),cancelAnimationFrame(j),ce.removeEventListener("resize",V),de&&de.disconnect()}},[F,U]),hc(()=>{U()});const K=D=>{w||U(),o&&o(D)};return Ie.jsxs(re.Fragment,{children:[Ie.jsx("textarea",{value:u,onChange:K,ref:E,rows:h,style:d,...b}),Ie.jsx("textarea",{"aria-hidden":!0,className:t.className,readOnly:!0,ref:R,tabIndex:-1,style:{...Mj.shadow,...d,paddingTop:0,paddingBottom:0}})]})});function lm(e){return typeof e=="string"}function Cd({props:e,states:t,muiFormControl:n}){return t.reduce((o,a)=>(o[a]=e[a],n&&typeof e[a]>"u"&&(o[a]=n[a]),o),{})}const w2=re.createContext(void 0);function kd(){return re.useContext(w2)}function ME(e){return e!=null&&!(Array.isArray(e)&&e.length===0)}function x0(e,t=!1){return e&&(ME(e.value)&&e.value!==""||t&&ME(e.defaultValue)&&e.defaultValue!=="")}function zj(e){return e.startAdornment}function Rj(e){return kn("MuiInputBase",e)}const dd=wn("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]);var AE;const Bv=(e,t)=>{const{ownerState:n}=e;return[t.root,n.formControl&&t.formControl,n.startAdornment&&t.adornedStart,n.endAdornment&&t.adornedEnd,n.error&&t.error,n.size==="small"&&t.sizeSmall,n.multiline&&t.multiline,n.color&&t[`color${hn(n.color)}`],n.fullWidth&&t.fullWidth,n.hiddenLabel&&t.hiddenLabel]},Fv=(e,t)=>{const{ownerState:n}=e;return[t.input,n.size==="small"&&t.inputSizeSmall,n.multiline&&t.inputMultiline,n.type==="search"&&t.inputTypeSearch,n.startAdornment&&t.inputAdornedStart,n.endAdornment&&t.inputAdornedEnd,n.hiddenLabel&&t.inputHiddenLabel]},Dj=e=>{const{classes:t,color:n,disabled:o,error:a,endAdornment:h,focused:d,formControl:u,fullWidth:b,hiddenLabel:w,multiline:P,readOnly:E,size:I,startAdornment:R,type:F}=e,U={root:["root",`color${hn(n)}`,o&&"disabled",a&&"error",b&&"fullWidth",d&&"focused",u&&"formControl",I&&I!=="medium"&&`size${hn(I)}`,P&&"multiline",R&&"adornedStart",h&&"adornedEnd",w&&"hiddenLabel",E&&"readOnly"],input:["input",o&&"disabled",F==="search"&&"inputTypeSearch",P&&"inputMultiline",I==="small"&&"inputSizeSmall",w&&"inputHiddenLabel",R&&"inputAdornedStart",h&&"inputAdornedEnd",E&&"readOnly"]};return In(U,Rj,t)},Nv=It("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Bv})(dr(({theme:e})=>({...e.typography.body1,color:(e.vars||e).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${dd.disabled}`]:{color:(e.vars||e).palette.text.disabled,cursor:"default"},variants:[{props:({ownerState:t})=>t.multiline,style:{padding:"4px 0 5px"}},{props:({ownerState:t,size:n})=>t.multiline&&n==="small",style:{paddingTop:1}},{props:({ownerState:t})=>t.fullWidth,style:{width:"100%"}}]}))),jv=It("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Fv})(dr(({theme:e})=>{const t=e.palette.mode==="light",n={color:"currentColor",...e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5},transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},o={opacity:"0 !important"},a=e.vars?{opacity:e.vars.opacity.inputPlaceholder}:{opacity:t?.42:.5};return{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%","&::-webkit-input-placeholder":n,"&::-moz-placeholder":n,"&::-ms-input-placeholder":n,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${dd.formControl} &`]:{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus::-ms-input-placeholder":a},[`&.${dd.disabled}`]:{opacity:1,WebkitTextFillColor:(e.vars||e).palette.text.disabled},variants:[{props:({ownerState:h})=>!h.disableInjectingGlobalStyles,style:{animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}}},{props:{size:"small"},style:{paddingTop:1}},{props:({ownerState:h})=>h.multiline,style:{height:"auto",resize:"none",padding:0,paddingTop:0}},{props:{type:"search"},style:{MozAppearance:"textfield"}}]}})),LE=W9({"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}),S2=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiInputBase"}),{"aria-describedby":a,autoComplete:h,autoFocus:d,className:u,color:b,components:w={},componentsProps:P={},defaultValue:E,disabled:I,disableInjectingGlobalStyles:R,endAdornment:F,error:U,fullWidth:K=!1,id:D,inputComponent:j="input",inputProps:V={},inputRef:Y,margin:ce,maxRows:de,minRows:le,multiline:ge=!1,name:Ae,onBlur:H,onChange:Ee,onClick:je,onFocus:$e,onKeyDown:Le,onKeyUp:De,placeholder:We,readOnly:ut,renderSuffix:Be,rows:Ye,size:pt,slotProps:St={},slots:At={},startAdornment:Nt,type:Lt="text",value:Zt,...un}=o,en=V.value!=null?V.value:Zt,{current:Bn}=re.useRef(en!=null),Sn=re.useRef(),jt=re.useCallback(on=>{},[]),tn=Ti(Sn,Y,V.ref,jt),[Ut,gn]=re.useState(!1),yt=kd(),zt=Cd({props:o,muiFormControl:yt,states:["color","disabled","error","hiddenLabel","size","required","filled"]});zt.focused=yt?yt.focused:Ut,re.useEffect(()=>{!yt&&I&&Ut&&(gn(!1),H&&H())},[yt,I,Ut,H]);const we=yt&&yt.onFilled,ir=yt&&yt.onEmpty,pn=re.useCallback(on=>{x0(on)?we&&we():ir&&ir()},[we,ir]);hc(()=>{Bn&&pn({value:en})},[en,pn,Bn]);const ht=on=>{$e&&$e(on),V.onFocus&&V.onFocus(on),yt&&yt.onFocus?yt.onFocus(on):gn(!0)},Vt=on=>{H&&H(on),V.onBlur&&V.onBlur(on),yt&&yt.onBlur?yt.onBlur(on):gn(!1)},an=(on,...Ir)=>{if(!Bn){const Ze=on.target||Sn.current;if(Ze==null)throw new Error(Ha(1));pn({value:Ze.value})}V.onChange&&V.onChange(on,...Ir),Ee&&Ee(on,...Ir)};re.useEffect(()=>{pn(Sn.current)},[]);const Qn=on=>{Sn.current&&on.currentTarget===on.target&&Sn.current.focus(),je&&je(on)};let bt=j,Mn=V;ge&&bt==="input"&&(Ye?Mn={type:void 0,minRows:Ye,maxRows:Ye,...Mn}:Mn={type:void 0,maxRows:de,minRows:le,...Mn},bt=Lj);const pr=on=>{pn(on.animationName==="mui-auto-fill-cancel"?Sn.current:{value:"x"})};re.useEffect(()=>{yt&&yt.setAdornedStart(!!Nt)},[yt,Nt]);const Zr={...o,color:zt.color||"primary",disabled:zt.disabled,endAdornment:F,error:zt.error,focused:zt.focused,formControl:yt,fullWidth:K,hiddenLabel:zt.hiddenLabel,multiline:ge,size:zt.size,startAdornment:Nt,type:Lt},fr=Dj(Zr),Ge=At.root||w.Root||Nv,or=St.root||P.root||{},Wn=At.input||w.Input||jv;return Mn={...Mn,...St.input??P.input},Ie.jsxs(re.Fragment,{children:[!R&&typeof LE=="function"&&(AE||(AE=Ie.jsx(LE,{}))),Ie.jsxs(Ge,{...or,ref:n,onClick:Qn,...un,...!lm(Ge)&&{ownerState:{...Zr,...or.ownerState}},className:Wt(fr.root,or.className,u,ut&&"MuiInputBase-readOnly"),children:[Nt,Ie.jsx(w2.Provider,{value:null,children:Ie.jsx(Wn,{"aria-invalid":zt.error,"aria-describedby":a,autoComplete:h,autoFocus:d,defaultValue:E,disabled:zt.disabled,id:D,onAnimationStart:pr,name:Ae,placeholder:We,readOnly:ut,required:zt.required,rows:Ye,value:en,onKeyDown:Le,onKeyUp:De,type:Lt,...Mn,...!lm(Wn)&&{as:bt,ownerState:{...Zr,...Mn.ownerState}},ref:tn,className:Wt(fr.input,Mn.className,ut&&"MuiInputBase-readOnly"),onBlur:Vt,onChange:an,onFocus:ht})}),F,Be?Be({...zt,startAdornment:Nt}):null]})]})});function $j(e){return kn("MuiInput",e)}const Yp={...dd,...wn("MuiInput",["root","underline","input"])};function Oj(e){return kn("MuiOutlinedInput",e)}const Ys={...dd,...wn("MuiOutlinedInput",["root","notchedOutline","input"])};function Bj(e){return kn("MuiFilledInput",e)}const $u={...dd,...wn("MuiFilledInput",["root","underline","input","adornedStart","adornedEnd","sizeSmall","multiline","hiddenLabel"])},Fj=d3(Ie.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Nj=d3(Ie.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function jj(e){return kn("MuiAvatar",e)}wn("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Uj=e=>{const{classes:t,variant:n,colorDefault:o}=e;return In({root:["root",n,o&&"colorDefault"],img:["img"],fallback:["fallback"]},jj,t)},Vj=It("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})(dr(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),Wj=It("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),qj=It(Nj,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function Gj({crossOrigin:e,referrerPolicy:t,src:n,srcSet:o}){const[a,h]=re.useState(!1);return re.useEffect(()=>{if(!n&&!o)return;h(!1);let d=!0;const u=new Image;return u.onload=()=>{d&&h("loaded")},u.onerror=()=>{d&&h("error")},u.crossOrigin=e,u.referrerPolicy=t,u.src=n,o&&(u.srcset=o),()=>{d=!1}},[e,t,n,o]),a}const Hj=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiAvatar"}),{alt:a,children:h,className:d,component:u="div",slots:b={},slotProps:w={},imgProps:P,sizes:E,src:I,srcSet:R,variant:F="circular",...U}=o;let K=null;const D=Gj({...P,src:I,srcSet:R}),j=I||R,V=j&&D!=="error",Y={...o,colorDefault:!V,component:u,variant:F};delete Y.ownerState;const ce=Uj(Y),[de,le]=hs("img",{className:ce.img,elementType:Wj,externalForwardedProps:{slots:b,slotProps:{img:{...P,...w.img}}},additionalProps:{alt:a,src:I,srcSet:R,sizes:E},ownerState:Y});return V?K=Ie.jsx(de,{...le}):h||h===0?K=h:j&&a?K=a[0]:K=Ie.jsx(qj,{ownerState:Y,className:ce.fallback}),Ie.jsx(Vj,{as:u,className:Wt(ce.root,d),ref:n,...U,ownerState:Y,children:K})}),Zj={entering:{opacity:1},entered:{opacity:1}},Kj=re.forwardRef(function(t,n){const o=Ev(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{addEndListener:h,appear:d=!0,children:u,easing:b,in:w,onEnter:P,onEntered:E,onEntering:I,onExit:R,onExited:F,onExiting:U,style:K,timeout:D=a,TransitionComponent:j=pa,...V}=t,Y=re.useRef(null),ce=Ti(Y,km(u),n),de=Le=>De=>{if(Le){const We=Y.current;De===void 0?Le(We):Le(We,De)}},le=de(I),ge=de((Le,De)=>{g3(Le);const We=v0({style:K,timeout:D,easing:b},{mode:"enter"});Le.style.webkitTransition=o.transitions.create("opacity",We),Le.style.transition=o.transitions.create("opacity",We),P&&P(Le,De)}),Ae=de(E),H=de(U),Ee=de(Le=>{const De=v0({style:K,timeout:D,easing:b},{mode:"exit"});Le.style.webkitTransition=o.transitions.create("opacity",De),Le.style.transition=o.transitions.create("opacity",De),R&&R(Le)}),je=de(F),$e=Le=>{h&&h(Y.current,Le)};return Ie.jsx(j,{appear:d,in:w,nodeRef:Y,onEnter:ge,onEntered:Ae,onEntering:le,onExit:Ee,onExited:je,onExiting:H,addEndListener:$e,timeout:D,...V,children:(Le,De)=>re.cloneElement(u,{style:{opacity:0,visibility:Le==="exited"&&!w?"hidden":void 0,...Zj[Le],...K,...u.props.style},ref:ce,...De})})});function Xj(e){return kn("MuiBackdrop",e)}wn("MuiBackdrop",["root","invisible"]);const Yj=e=>{const{ownerState:t,...n}=e;return n},Jj=e=>{const{classes:t,invisible:n}=e;return In({root:["root",n&&"invisible"]},Xj,t)},Qj=It("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.invisible&&t.invisible]}})({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent",variants:[{props:{invisible:!0},style:{backgroundColor:"transparent"}}]}),eU=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiBackdrop"}),{children:a,className:h,component:d="div",invisible:u=!1,open:b,components:w={},componentsProps:P={},slotProps:E={},slots:I={},TransitionComponent:R,transitionDuration:F,...U}=o,K={...o,component:d,invisible:u},D=Jj(K),j={transition:R,root:w.Root,...I},V={...P,...E},Y={slots:j,slotProps:V},[ce,de]=hs("root",{elementType:Qj,externalForwardedProps:Y,className:Wt(D.root,h),ownerState:K}),[le,ge]=hs("transition",{elementType:Kj,externalForwardedProps:Y,ownerState:K}),Ae=Yj(ge);return Ie.jsx(le,{in:b,timeout:F,...U,...Ae,children:Ie.jsx(ce,{"aria-hidden":!0,...de,classes:D,ref:n,children:a})})});function tU(e){return kn("MuiBottomNavigation",e)}wn("MuiBottomNavigation",["root"]);const nU=e=>{const{classes:t}=e;return In({root:["root"]},tU,t)},rU=It("div",{name:"MuiBottomNavigation",slot:"Root",overridesResolver:(e,t)=>t.root})(dr(({theme:e})=>({display:"flex",justifyContent:"center",height:56,backgroundColor:(e.vars||e).palette.background.paper}))),iU=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiBottomNavigation"}),{children:a,className:h,component:d="div",onChange:u,showLabels:b=!1,value:w,...P}=o,E={...o,component:d,showLabels:b},I=nU(E);return Ie.jsx(rU,{as:d,className:Wt(I.root,h),ref:n,ownerState:E,...P,children:re.Children.map(a,(R,F)=>{if(!re.isValidElement(R))return null;const U=R.props.value===void 0?F:R.props.value;return re.cloneElement(R,{selected:U===w,showLabel:R.props.showLabel!==void 0?R.props.showLabel:b,value:U,onChange:u})})})});function oU(e){return kn("MuiBottomNavigationAction",e)}const v3=wn("MuiBottomNavigationAction",["root","iconOnly","selected","label"]),sU=e=>{const{classes:t,showLabel:n,selected:o}=e;return In({root:["root",!n&&!o&&"iconOnly",o&&"selected"],label:["label",!n&&!o&&"iconOnly",o&&"selected"]},oU,t)},aU=It(y3,{name:"MuiBottomNavigationAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.showLabel&&!n.selected&&t.iconOnly]}})(dr(({theme:e})=>({transition:e.transitions.create(["color","padding-top"],{duration:e.transitions.duration.short}),padding:"0px 12px",minWidth:80,maxWidth:168,color:(e.vars||e).palette.text.secondary,flexDirection:"column",flex:"1",[`&.${v3.selected}`]:{color:(e.vars||e).palette.primary.main},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{paddingTop:14}},{props:({showLabel:t,selected:n,label:o})=>!t&&!n&&!o,style:{paddingTop:0}}]}))),lU=It("span",{name:"MuiBottomNavigationAction",slot:"Label",overridesResolver:(e,t)=>t.label})(dr(({theme:e})=>({fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(12),opacity:1,transition:"font-size 0.2s, opacity 0.2s",transitionDelay:"0.1s",[`&.${v3.selected}`]:{fontSize:e.typography.pxToRem(14)},variants:[{props:({showLabel:t,selected:n})=>!t&&!n,style:{opacity:0,transitionDelay:"0s"}}]}))),Z_=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiBottomNavigationAction"}),{className:a,icon:h,label:d,onChange:u,onClick:b,selected:w,showLabel:P,value:E,...I}=o,R=o,F=sU(R),U=K=>{u&&u(K,E),b&&b(K)};return Ie.jsxs(aU,{ref:n,className:Wt(F.root,a),focusRipple:!0,onClick:U,ownerState:R,...I,children:[h,Ie.jsx(lU,{className:F.label,ownerState:R,children:d})]})}),uU=wn("MuiBox",["root"]),cU=c3(),kf=P7({themeId:tv,defaultTheme:cU,defaultClassName:uU.root,generateClassName:WA.generate});function hU(e){return kn("MuiButton",e)}const yh=wn("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),dU=re.createContext({}),pU=re.createContext(void 0),fU=e=>{const{color:t,disableElevation:n,fullWidth:o,size:a,variant:h,classes:d}=e,u={root:["root",h,`${h}${hn(t)}`,`size${hn(a)}`,`${h}Size${hn(a)}`,`color${hn(t)}`,n&&"disableElevation",o&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${hn(a)}`],endIcon:["icon","endIcon",`iconSize${hn(a)}`]},b=In(u,hU,d);return{...d,...b}},_3=[{props:{size:"small"},style:{"& > *:nth-of-type(1)":{fontSize:18}}},{props:{size:"medium"},style:{"& > *:nth-of-type(1)":{fontSize:20}}},{props:{size:"large"},style:{"& > *:nth-of-type(1)":{fontSize:22}}}],mU=It(y3,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`${n.variant}${hn(n.color)}`],t[`size${hn(n.size)}`],t[`${n.variant}Size${hn(n.size)}`],n.color==="inherit"&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})(dr(({theme:e})=>{const t=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],n=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return{...e.typography.button,minWidth:64,padding:"6px 16px",border:0,borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none"},[`&.${yh.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{variant:"contained"},style:{color:"var(--variant-containedColor)",backgroundColor:"var(--variant-containedBg)",boxShadow:(e.vars||e).shadows[2],"&:hover":{boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2]}},"&:active":{boxShadow:(e.vars||e).shadows[8]},[`&.${yh.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]},[`&.${yh.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}},{props:{variant:"outlined"},style:{padding:"5px 15px",border:"1px solid currentColor",borderColor:"var(--variant-outlinedBorder, currentColor)",backgroundColor:"var(--variant-outlinedBg)",color:"var(--variant-outlinedColor)",[`&.${yh.disabled}`]:{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`}}},{props:{variant:"text"},style:{padding:"6px 8px",color:"var(--variant-textColor)",backgroundColor:"var(--variant-textBg)"}},...Object.entries(e.palette).filter(Sd()).map(([o])=>({props:{color:o},style:{"--variant-textColor":(e.vars||e).palette[o].main,"--variant-outlinedColor":(e.vars||e).palette[o].main,"--variant-outlinedBorder":e.vars?`rgba(${e.vars.palette[o].mainChannel} / 0.5)`:Ra(e.palette[o].main,.5),"--variant-containedColor":(e.vars||e).palette[o].contrastText,"--variant-containedBg":(e.vars||e).palette[o].main,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":(e.vars||e).palette[o].dark,"--variant-textBg":e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ra(e.palette[o].main,e.palette.action.hoverOpacity),"--variant-outlinedBorder":(e.vars||e).palette[o].main,"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette[o].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:Ra(e.palette[o].main,e.palette.action.hoverOpacity)}}}})),{props:{color:"inherit"},style:{color:"inherit",borderColor:"currentColor","--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedBg:t,"@media (hover: hover)":{"&:hover":{"--variant-containedBg":e.vars?e.vars.palette.Button.inheritContainedHoverBg:n,"--variant-textBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Ra(e.palette.text.primary,e.palette.action.hoverOpacity),"--variant-outlinedBg":e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:Ra(e.palette.text.primary,e.palette.action.hoverOpacity)}}}},{props:{size:"small",variant:"text"},style:{padding:"4px 5px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"text"},style:{padding:"8px 11px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"outlined"},style:{padding:"3px 9px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"outlined"},style:{padding:"7px 21px",fontSize:e.typography.pxToRem(15)}},{props:{size:"small",variant:"contained"},style:{padding:"4px 10px",fontSize:e.typography.pxToRem(13)}},{props:{size:"large",variant:"contained"},style:{padding:"8px 22px",fontSize:e.typography.pxToRem(15)}},{props:{disableElevation:!0},style:{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${yh.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${yh.disabled}`]:{boxShadow:"none"}}},{props:{fullWidth:!0},style:{width:"100%"}}]}})),gU=It("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.startIcon,t[`iconSize${hn(n.size)}`]]}})({display:"inherit",marginRight:8,marginLeft:-4,variants:[{props:{size:"small"},style:{marginLeft:-2}},..._3]}),yU=It("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.endIcon,t[`iconSize${hn(n.size)}`]]}})({display:"inherit",marginRight:-4,marginLeft:8,variants:[{props:{size:"small"},style:{marginRight:-2}},..._3]}),Bh=re.forwardRef(function(t,n){const o=re.useContext(dU),a=re.useContext(pU),h=am(o,t),d=Pn({props:h,name:"MuiButton"}),{children:u,color:b="primary",component:w="button",className:P,disabled:E=!1,disableElevation:I=!1,disableFocusRipple:R=!1,endIcon:F,focusVisibleClassName:U,fullWidth:K=!1,size:D="medium",startIcon:j,type:V,variant:Y="text",...ce}=d,de={...d,color:b,component:w,disabled:E,disableElevation:I,disableFocusRipple:R,fullWidth:K,size:D,type:V,variant:Y},le=fU(de),ge=j&&Ie.jsx(gU,{className:le.startIcon,ownerState:de,children:j}),Ae=F&&Ie.jsx(yU,{className:le.endIcon,ownerState:de,children:F}),H=a||"";return Ie.jsxs(mU,{ownerState:de,className:Wt(o.className,le.root,P,H),component:w,disabled:E,focusRipple:!R,focusVisibleClassName:Wt(le.focusVisible,U),ref:n,type:V,...ce,classes:le,children:[ge,u,Ae]})});function vU(e){return kn("MuiCard",e)}wn("MuiCard",["root"]);const _U=e=>{const{classes:t}=e;return In({root:["root"]},vU,t)},xU=It(b2,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})({overflow:"hidden"}),bU=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiCard"}),{className:a,raised:h=!1,...d}=o,u={...o,raised:h},b=_U(u);return Ie.jsx(xU,{className:Wt(b.root,a),elevation:h?8:void 0,ref:n,ownerState:u,...d})});function wU(e){return kn("MuiCardMedia",e)}wn("MuiCardMedia",["root","media","img"]);const SU=e=>{const{classes:t,isMediaComponent:n,isImageComponent:o}=e;return In({root:["root",n&&"media",o&&"img"]},wU,t)},CU=It("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{isMediaComponent:o,isImageComponent:a}=n;return[t.root,o&&t.media,a&&t.img]}})({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",variants:[{props:{isMediaComponent:!0},style:{width:"100%"}},{props:{isImageComponent:!0},style:{objectFit:"cover"}}]}),kU=["video","audio","picture","iframe","img"],TU=["picture","img"],EU=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiCardMedia"}),{children:a,className:h,component:d="div",image:u,src:b,style:w,...P}=o,E=kU.includes(d),I=!E&&u?{backgroundImage:`url("${u}")`,...w}:w,R={...o,component:d,isMediaComponent:E,isImageComponent:TU.includes(d)},F=SU(R);return Ie.jsx(CU,{className:Wt(F.root,h),as:d,role:!E&&u?"img":void 0,ref:n,style:I,ownerState:R,src:E?u||b:void 0,...P,children:a})}),IU=d9({createStyledComponent:It("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${hn(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Pn({props:e,name:"MuiContainer"})});function PU(e){const t=Fs(e);return t.body===e?Za(e).innerWidth>t.documentElement.clientWidth:e.scrollHeight>e.clientHeight}function Tf(e,t){t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden")}function zE(e){return parseInt(Za(e).getComputedStyle(e).paddingRight,10)||0}function MU(e){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].includes(e.tagName),o=e.tagName==="INPUT"&&e.getAttribute("type")==="hidden";return n||o}function RE(e,t,n,o,a){const h=[t,n,...o];[].forEach.call(e.children,d=>{const u=!h.includes(d),b=!MU(d);u&&b&&Tf(d,a)})}function K_(e,t){let n=-1;return e.some((o,a)=>t(o)?(n=a,!0):!1),n}function AU(e,t){const n=[],o=e.container;if(!t.disableScrollLock){if(PU(o)){const d=e3(Za(o));n.push({value:o.style.paddingRight,property:"padding-right",el:o}),o.style.paddingRight=`${zE(o)+d}px`;const u=Fs(o).querySelectorAll(".mui-fixed");[].forEach.call(u,b=>{n.push({value:b.style.paddingRight,property:"padding-right",el:b}),b.style.paddingRight=`${zE(b)+d}px`})}let h;if(o.parentNode instanceof DocumentFragment)h=Fs(o).body;else{const d=o.parentElement,u=Za(o);h=(d==null?void 0:d.nodeName)==="HTML"&&u.getComputedStyle(d).overflowY==="scroll"?d:o}n.push({value:h.style.overflow,property:"overflow",el:h},{value:h.style.overflowX,property:"overflow-x",el:h},{value:h.style.overflowY,property:"overflow-y",el:h}),h.style.overflow="hidden"}return()=>{n.forEach(({value:h,el:d,property:u})=>{h?d.style.setProperty(u,h):d.style.removeProperty(u)})}}function LU(e){const t=[];return[].forEach.call(e.children,n=>{n.getAttribute("aria-hidden")==="true"&&t.push(n)}),t}class zU{constructor(){this.modals=[],this.containers=[]}add(t,n){let o=this.modals.indexOf(t);if(o!==-1)return o;o=this.modals.length,this.modals.push(t),t.modalRef&&Tf(t.modalRef,!1);const a=LU(n);RE(n,t.mount,t.modalRef,a,!0);const h=K_(this.containers,d=>d.container===n);return h!==-1?(this.containers[h].modals.push(t),o):(this.containers.push({modals:[t],container:n,restore:null,hiddenSiblings:a}),o)}mount(t,n){const o=K_(this.containers,h=>h.modals.includes(t)),a=this.containers[o];a.restore||(a.restore=AU(a,n))}remove(t,n=!0){const o=this.modals.indexOf(t);if(o===-1)return o;const a=K_(this.containers,d=>d.modals.includes(t)),h=this.containers[a];if(h.modals.splice(h.modals.indexOf(t),1),this.modals.splice(o,1),h.modals.length===0)h.restore&&h.restore(),t.modalRef&&Tf(t.modalRef,n),RE(h.container,t.mount,t.modalRef,h.hiddenSiblings,!1),this.containers.splice(a,1);else{const d=h.modals[h.modals.length-1];d.modalRef&&Tf(d.modalRef,!1)}return o}isTopModal(t){return this.modals.length>0&&this.modals[this.modals.length-1]===t}}const RU=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function DU(e){const t=parseInt(e.getAttribute("tabindex")||"",10);return Number.isNaN(t)?e.contentEditable==="true"||(e.nodeName==="AUDIO"||e.nodeName==="VIDEO"||e.nodeName==="DETAILS")&&e.getAttribute("tabindex")===null?0:e.tabIndex:t}function $U(e){if(e.tagName!=="INPUT"||e.type!=="radio"||!e.name)return!1;const t=o=>e.ownerDocument.querySelector(`input[type="radio"]${o}`);let n=t(`[name="${e.name}"]:checked`);return n||(n=t(`[name="${e.name}"]`)),n!==e}function OU(e){return!(e.disabled||e.tagName==="INPUT"&&e.type==="hidden"||$U(e))}function BU(e){const t=[],n=[];return Array.from(e.querySelectorAll(RU)).forEach((o,a)=>{const h=DU(o);h===-1||!OU(o)||(h===0?t.push(o):n.push({documentOrder:a,tabIndex:h,node:o}))}),n.sort((o,a)=>o.tabIndex===a.tabIndex?o.documentOrder-a.documentOrder:o.tabIndex-a.tabIndex).map(o=>o.node).concat(t)}function FU(){return!0}function NU(e){const{children:t,disableAutoFocus:n=!1,disableEnforceFocus:o=!1,disableRestoreFocus:a=!1,getTabbable:h=BU,isEnabled:d=FU,open:u}=e,b=re.useRef(!1),w=re.useRef(null),P=re.useRef(null),E=re.useRef(null),I=re.useRef(null),R=re.useRef(!1),F=re.useRef(null),U=Ti(km(t),F),K=re.useRef(null);re.useEffect(()=>{!u||!F.current||(R.current=!n)},[n,u]),re.useEffect(()=>{if(!u||!F.current)return;const V=Fs(F.current);return F.current.contains(V.activeElement)||(F.current.hasAttribute("tabIndex")||F.current.setAttribute("tabIndex","-1"),R.current&&F.current.focus()),()=>{a||(E.current&&E.current.focus&&(b.current=!0,E.current.focus()),E.current=null)}},[u]),re.useEffect(()=>{if(!u||!F.current)return;const V=Fs(F.current),Y=le=>{K.current=le,!(o||!d()||le.key!=="Tab")&&V.activeElement===F.current&&le.shiftKey&&(b.current=!0,P.current&&P.current.focus())},ce=()=>{var Ae,H;const le=F.current;if(le===null)return;if(!V.hasFocus()||!d()||b.current){b.current=!1;return}if(le.contains(V.activeElement)||o&&V.activeElement!==w.current&&V.activeElement!==P.current)return;if(V.activeElement!==I.current)I.current=null;else if(I.current!==null)return;if(!R.current)return;let ge=[];if((V.activeElement===w.current||V.activeElement===P.current)&&(ge=h(F.current)),ge.length>0){const Ee=!!((Ae=K.current)!=null&&Ae.shiftKey&&((H=K.current)==null?void 0:H.key)==="Tab"),je=ge[0],$e=ge[ge.length-1];typeof je!="string"&&typeof $e!="string"&&(Ee?$e.focus():je.focus())}else le.focus()};V.addEventListener("focusin",ce),V.addEventListener("keydown",Y,!0);const de=setInterval(()=>{V.activeElement&&V.activeElement.tagName==="BODY"&&ce()},50);return()=>{clearInterval(de),V.removeEventListener("focusin",ce),V.removeEventListener("keydown",Y,!0)}},[n,o,a,d,u,h]);const D=V=>{E.current===null&&(E.current=V.relatedTarget),R.current=!0,I.current=V.target;const Y=t.props.onFocus;Y&&Y(V)},j=V=>{E.current===null&&(E.current=V.relatedTarget),R.current=!0};return Ie.jsxs(re.Fragment,{children:[Ie.jsx("div",{tabIndex:u?0:-1,onFocus:j,ref:w,"data-testid":"sentinelStart"}),re.cloneElement(t,{ref:U,onFocus:D}),Ie.jsx("div",{tabIndex:u?0:-1,onFocus:j,ref:P,"data-testid":"sentinelEnd"})]})}function jU(e){return typeof e=="function"?e():e}function UU(e){return e?e.props.hasOwnProperty("in"):!1}const ry=new zU;function VU(e){const{container:t,disableEscapeKeyDown:n=!1,disableScrollLock:o=!1,closeAfterTransition:a=!1,onTransitionEnter:h,onTransitionExited:d,children:u,onClose:b,open:w,rootRef:P}=e,E=re.useRef({}),I=re.useRef(null),R=re.useRef(null),F=Ti(R,P),[U,K]=re.useState(!w),D=UU(u);let j=!0;(e["aria-hidden"]==="false"||e["aria-hidden"]===!1)&&(j=!1);const V=()=>Fs(I.current),Y=()=>(E.current.modalRef=R.current,E.current.mount=I.current,E.current),ce=()=>{ry.mount(Y(),{disableScrollLock:o}),R.current&&(R.current.scrollTop=0)},de=Oh(()=>{const De=jU(t)||V().body;ry.add(Y(),De),R.current&&ce()}),le=()=>ry.isTopModal(Y()),ge=Oh(De=>{I.current=De,De&&(w&&le()?ce():R.current&&Tf(R.current,j))}),Ae=re.useCallback(()=>{ry.remove(Y(),j)},[j]);re.useEffect(()=>()=>{Ae()},[Ae]),re.useEffect(()=>{w?de():(!D||!a)&&Ae()},[w,Ae,D,a,de]);const H=De=>We=>{var ut;(ut=De.onKeyDown)==null||ut.call(De,We),!(We.key!=="Escape"||We.which===229||!le())&&(n||(We.stopPropagation(),b&&b(We,"escapeKeyDown")))},Ee=De=>We=>{var ut;(ut=De.onClick)==null||ut.call(De,We),We.target===We.currentTarget&&b&&b(We,"backdropClick")};return{getRootProps:(De={})=>{const We=n3(e);delete We.onTransitionEnter,delete We.onTransitionExited;const ut={...We,...De};return{role:"presentation",...ut,onKeyDown:H(ut),ref:F}},getBackdropProps:(De={})=>{const We=De;return{"aria-hidden":!0,...We,onClick:Ee(We),open:w}},getTransitionProps:()=>{const De=()=>{K(!1),h&&h()},We=()=>{K(!0),d&&d(),a&&Ae()};return{onEnter:hE(De,u==null?void 0:u.props.onEnter),onExited:hE(We,u==null?void 0:u.props.onExited)}},rootRef:F,portalRef:ge,isTopModal:le,exited:U,hasTransition:D}}function WU(e){return kn("MuiModal",e)}wn("MuiModal",["root","hidden","backdrop"]);const qU=e=>{const{open:t,exited:n,classes:o}=e;return In({root:["root",!t&&n&&"hidden"],backdrop:["backdrop"]},WU,o)},GU=It("div",{name:"MuiModal",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.open&&n.exited&&t.hidden]}})(dr(({theme:e})=>({position:"fixed",zIndex:(e.vars||e).zIndex.modal,right:0,bottom:0,top:0,left:0,variants:[{props:({ownerState:t})=>!t.open&&t.exited,style:{visibility:"hidden"}}]}))),HU=It(eU,{name:"MuiModal",slot:"Backdrop",overridesResolver:(e,t)=>t.backdrop})({zIndex:-1}),ZU=re.forwardRef(function(t,n){const o=Pn({name:"MuiModal",props:t}),{BackdropComponent:a=HU,BackdropProps:h,classes:d,className:u,closeAfterTransition:b=!1,children:w,container:P,component:E,components:I={},componentsProps:R={},disableAutoFocus:F=!1,disableEnforceFocus:U=!1,disableEscapeKeyDown:K=!1,disablePortal:D=!1,disableRestoreFocus:j=!1,disableScrollLock:V=!1,hideBackdrop:Y=!1,keepMounted:ce=!1,onBackdropClick:de,onClose:le,onTransitionEnter:ge,onTransitionExited:Ae,open:H,slotProps:Ee={},slots:je={},theme:$e,...Le}=o,De={...o,closeAfterTransition:b,disableAutoFocus:F,disableEnforceFocus:U,disableEscapeKeyDown:K,disablePortal:D,disableRestoreFocus:j,disableScrollLock:V,hideBackdrop:Y,keepMounted:ce},{getRootProps:We,getBackdropProps:ut,getTransitionProps:Be,portalRef:Ye,isTopModal:pt,exited:St,hasTransition:At}=VU({...De,rootRef:n}),Nt={...De,exited:St},Lt=qU(Nt),Zt={};if(w.props.tabIndex===void 0&&(Zt.tabIndex="-1"),At){const{onEnter:Ut,onExited:gn}=Be();Zt.onEnter=Ut,Zt.onExited=gn}const un={...Le,slots:{root:I.Root,backdrop:I.Backdrop,...je},slotProps:{...R,...Ee}},[en,Bn]=hs("root",{elementType:GU,externalForwardedProps:un,getSlotProps:We,additionalProps:{ref:n,as:E},ownerState:Nt,className:Wt(u,Lt==null?void 0:Lt.root,!Nt.open&&Nt.exited&&(Lt==null?void 0:Lt.hidden))}),[Sn,jt]=hs("backdrop",{elementType:a,externalForwardedProps:un,additionalProps:h,getSlotProps:Ut=>ut({...Ut,onClick:gn=>{de&&de(gn),Ut!=null&&Ut.onClick&&Ut.onClick(gn)}}),className:Wt(h==null?void 0:h.className,Lt==null?void 0:Lt.backdrop),ownerState:Nt}),tn=Ti(h==null?void 0:h.ref,jt.ref);return!ce&&!H&&(!At||St)?null:Ie.jsx(Pj,{ref:Ye,container:P,disablePortal:D,children:Ie.jsxs(en,{...Bn,children:[!Y&&a?Ie.jsx(Sn,{...jt,ref:tn}):null,Ie.jsx(NU,{disableEnforceFocus:U,disableAutoFocus:F,disableRestoreFocus:j,isEnabled:pt,open:H,children:re.cloneElement(w,Zt)})]})})});function KU(e){return kn("MuiDivider",e)}wn("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);const XU=e=>{const{absolute:t,children:n,classes:o,flexItem:a,light:h,orientation:d,textAlign:u,variant:b}=e;return In({root:["root",t&&"absolute",b,h&&"light",d==="vertical"&&"vertical",a&&"flexItem",n&&"withChildren",n&&d==="vertical"&&"withChildrenVertical",u==="right"&&d!=="vertical"&&"textAlignRight",u==="left"&&d!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",d==="vertical"&&"wrapperVertical"]},KU,o)},YU=It("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.absolute&&t.absolute,t[n.variant],n.light&&t.light,n.orientation==="vertical"&&t.vertical,n.flexItem&&t.flexItem,n.children&&t.withChildren,n.children&&n.orientation==="vertical"&&t.withChildrenVertical,n.textAlign==="right"&&n.orientation!=="vertical"&&t.textAlignRight,n.textAlign==="left"&&n.orientation!=="vertical"&&t.textAlignLeft]}})(dr(({theme:e})=>({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin",variants:[{props:{absolute:!0},style:{position:"absolute",bottom:0,left:0,width:"100%"}},{props:{light:!0},style:{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:Ra(e.palette.divider,.08)}},{props:{variant:"inset"},style:{marginLeft:72}},{props:{variant:"middle",orientation:"horizontal"},style:{marginLeft:e.spacing(2),marginRight:e.spacing(2)}},{props:{variant:"middle",orientation:"vertical"},style:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}},{props:{orientation:"vertical"},style:{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"}},{props:{flexItem:!0},style:{alignSelf:"stretch",height:"auto"}},{props:({ownerState:t})=>!!t.children,style:{display:"flex",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}},{props:({ownerState:t})=>t.children&&t.orientation!=="vertical",style:{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}},{props:({ownerState:t})=>t.orientation==="vertical"&&t.children,style:{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}},{props:({ownerState:t})=>t.textAlign==="right"&&t.orientation!=="vertical",style:{"&::before":{width:"90%"},"&::after":{width:"10%"}}},{props:({ownerState:t})=>t.textAlign==="left"&&t.orientation!=="vertical",style:{"&::before":{width:"10%"},"&::after":{width:"90%"}}}]}))),JU=It("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.wrapper,n.orientation==="vertical"&&t.wrapperVertical]}})(dr(({theme:e})=>({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`,whiteSpace:"nowrap",variants:[{props:{orientation:"vertical"},style:{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`}}]}))),b0=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiDivider"}),{absolute:a=!1,children:h,className:d,orientation:u="horizontal",component:b=h||u==="vertical"?"div":"hr",flexItem:w=!1,light:P=!1,role:E=b!=="hr"?"separator":void 0,textAlign:I="center",variant:R="fullWidth",...F}=o,U={...o,absolute:a,component:b,flexItem:w,light:P,orientation:u,role:E,textAlign:I,variant:R},K=XU(U);return Ie.jsx(YU,{as:b,className:Wt(K.root,d),role:E,ref:n,ownerState:U,"aria-orientation":E==="separator"&&(b!=="hr"||u==="vertical")?u:void 0,...F,children:h?Ie.jsx(JU,{className:K.wrapper,ownerState:U,children:h}):null})});b0&&(b0.muiSkipListHighlight=!0);const QU=e=>{const{classes:t,disableUnderline:n,startAdornment:o,endAdornment:a,size:h,hiddenLabel:d,multiline:u}=e,b={root:["root",!n&&"underline",o&&"adornedStart",a&&"adornedEnd",h==="small"&&`size${hn(h)}`,d&&"hiddenLabel",u&&"multiline"],input:["input"]},w=In(b,Bj,t);return{...t,...w}},eV=It(Nv,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Bv(e,t),!n.disableUnderline&&t.underline]}})(dr(({theme:e})=>{const t=e.palette.mode==="light",n=t?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",o=t?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",a=t?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",h=t?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return{position:"relative",backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o,borderTopLeftRadius:(e.vars||e).shape.borderRadius,borderTopRightRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),"&:hover":{backgroundColor:e.vars?e.vars.palette.FilledInput.hoverBg:a,"@media (hover: none)":{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o}},[`&.${$u.focused}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.bg:o},[`&.${$u.disabled}`]:{backgroundColor:e.vars?e.vars.palette.FilledInput.disabledBg:h},variants:[{props:({ownerState:d})=>!d.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${$u.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${$u.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`:n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${$u.disabled}, .${$u.error}):before`]:{borderBottom:`1px solid ${(e.vars||e).palette.text.primary}`},[`&.${$u.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Sd()).map(([d])=>{var u;return{props:{disableUnderline:!1,color:d},style:{"&::after":{borderBottom:`2px solid ${(u=(e.vars||e).palette[d])==null?void 0:u.main}`}}}}),{props:({ownerState:d})=>d.startAdornment,style:{paddingLeft:12}},{props:({ownerState:d})=>d.endAdornment,style:{paddingRight:12}},{props:({ownerState:d})=>d.multiline,style:{padding:"25px 12px 8px"}},{props:({ownerState:d,size:u})=>d.multiline&&u==="small",style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:d})=>d.multiline&&d.hiddenLabel&&d.size==="small",style:{paddingTop:8,paddingBottom:9}}]}})),tV=It(jv,{name:"MuiFilledInput",slot:"Input",overridesResolver:Fv})(dr(({theme:e})=>({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{paddingTop:21,paddingBottom:4}},{props:({ownerState:t})=>t.hiddenLabel,style:{paddingTop:16,paddingBottom:17}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}},{props:({ownerState:t})=>t.hiddenLabel&&t.size==="small",style:{paddingTop:8,paddingBottom:9}},{props:({ownerState:t})=>t.multiline,style:{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0}}]}))),w0=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiFilledInput"}),{disableUnderline:a=!1,components:h={},componentsProps:d,fullWidth:u=!1,hiddenLabel:b,inputComponent:w="input",multiline:P=!1,slotProps:E,slots:I={},type:R="text",...F}=o,U={...o,disableUnderline:a,fullWidth:u,inputComponent:w,multiline:P,type:R},K=QU(o),D={root:{ownerState:U},input:{ownerState:U}},j=E??d?Ni(D,E??d):D,V=I.root??h.Root??eV,Y=I.input??h.Input??tV;return Ie.jsx(S2,{slots:{root:V,input:Y},componentsProps:j,fullWidth:u,inputComponent:w,multiline:P,ref:n,type:R,...F,classes:K})});w0&&(w0.muiName="Input");function nV(e){return kn("MuiFormControl",e)}wn("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const rV=e=>{const{classes:t,margin:n,fullWidth:o}=e,a={root:["root",n!=="none"&&`margin${hn(n)}`,o&&"fullWidth"]};return In(a,nV,t)},iV=It("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...t[`margin${hn(e.margin)}`],...e.fullWidth&&t.fullWidth})})({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top",variants:[{props:{margin:"normal"},style:{marginTop:16,marginBottom:8}},{props:{margin:"dense"},style:{marginTop:8,marginBottom:4}},{props:{fullWidth:!0},style:{width:"100%"}}]}),oV=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiFormControl"}),{children:a,className:h,color:d="primary",component:u="div",disabled:b=!1,error:w=!1,focused:P,fullWidth:E=!1,hiddenLabel:I=!1,margin:R="none",required:F=!1,size:U="medium",variant:K="outlined",...D}=o,j={...o,color:d,component:u,disabled:b,error:w,fullWidth:E,hiddenLabel:I,margin:R,required:F,size:U,variant:K},V=rV(j),[Y,ce]=re.useState(()=>{let $e=!1;return a&&re.Children.forEach(a,Le=>{if(!Ay(Le,["Input","Select"]))return;const De=Ay(Le,["Select"])?Le.props.input:Le;De&&zj(De.props)&&($e=!0)}),$e}),[de,le]=re.useState(()=>{let $e=!1;return a&&re.Children.forEach(a,Le=>{Ay(Le,["Input","Select"])&&(x0(Le.props,!0)||x0(Le.props.inputProps,!0))&&($e=!0)}),$e}),[ge,Ae]=re.useState(!1);b&&ge&&Ae(!1);const H=P!==void 0&&!b?P:ge;let Ee;re.useRef(!1);const je=re.useMemo(()=>({adornedStart:Y,setAdornedStart:ce,color:d,disabled:b,error:w,filled:de,focused:H,fullWidth:E,hiddenLabel:I,size:U,onBlur:()=>{Ae(!1)},onEmpty:()=>{le(!1)},onFilled:()=>{le(!0)},onFocus:()=>{Ae(!0)},registerEffect:Ee,required:F,variant:K}),[Y,d,b,w,de,H,E,I,Ee,F,U,K]);return Ie.jsx(w2.Provider,{value:je,children:Ie.jsx(iV,{as:u,ownerState:j,className:Wt(V.root,h),ref:n,...D,children:a})})});function sV(e){return kn("MuiFormHelperText",e)}const DE=wn("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var $E;const aV=e=>{const{classes:t,contained:n,size:o,disabled:a,error:h,filled:d,focused:u,required:b}=e,w={root:["root",a&&"disabled",h&&"error",o&&`size${hn(o)}`,n&&"contained",u&&"focused",d&&"filled",b&&"required"]};return In(w,sV,t)},lV=It("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.size&&t[`size${hn(n.size)}`],n.contained&&t.contained,n.filled&&t.filled]}})(dr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${DE.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${DE.error}`]:{color:(e.vars||e).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:t})=>t.contained,style:{marginLeft:14,marginRight:14}}]}))),uV=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiFormHelperText"}),{children:a,className:h,component:d="p",disabled:u,error:b,filled:w,focused:P,margin:E,required:I,variant:R,...F}=o,U=kd(),K=Cd({props:o,muiFormControl:U,states:["variant","size","disabled","error","filled","focused","required"]}),D={...o,component:d,contained:K.variant==="filled"||K.variant==="outlined",variant:K.variant,size:K.size,disabled:K.disabled,error:K.error,filled:K.filled,focused:K.focused,required:K.required};delete D.ownerState;const j=aV(D);return Ie.jsx(lV,{as:d,className:Wt(j.root,h),ref:n,...F,ownerState:D,children:a===" "?$E||($E=Ie.jsx("span",{className:"notranslate",children:"​"})):a})});function cV(e){return kn("MuiFormLabel",e)}const Ef=wn("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),hV=e=>{const{classes:t,color:n,focused:o,disabled:a,error:h,filled:d,required:u}=e,b={root:["root",`color${hn(n)}`,a&&"disabled",h&&"error",d&&"filled",o&&"focused",u&&"required"],asterisk:["asterisk",h&&"error"]};return In(b,cV,t)},dV=It("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:e},t)=>({...t.root,...e.color==="secondary"&&t.colorSecondary,...e.filled&&t.filled})})(dr(({theme:e})=>({color:(e.vars||e).palette.text.secondary,...e.typography.body1,lineHeight:"1.4375em",padding:0,position:"relative",variants:[...Object.entries(e.palette).filter(Sd()).map(([t])=>({props:{color:t},style:{[`&.${Ef.focused}`]:{color:(e.vars||e).palette[t].main}}})),{props:{},style:{[`&.${Ef.disabled}`]:{color:(e.vars||e).palette.text.disabled},[`&.${Ef.error}`]:{color:(e.vars||e).palette.error.main}}}]}))),pV=It("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(e,t)=>t.asterisk})(dr(({theme:e})=>({[`&.${Ef.error}`]:{color:(e.vars||e).palette.error.main}}))),fV=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiFormLabel"}),{children:a,className:h,color:d,component:u="label",disabled:b,error:w,filled:P,focused:E,required:I,...R}=o,F=kd(),U=Cd({props:o,muiFormControl:F,states:["color","required","focused","disabled","error","filled"]}),K={...o,color:U.color||"primary",component:u,disabled:U.disabled,error:U.error,filled:U.filled,focused:U.focused,required:U.required},D=hV(K);return Ie.jsxs(dV,{as:u,ownerState:K,className:Wt(D.root,h),ref:n,...R,children:[a,U.required&&Ie.jsxs(pV,{ownerState:K,"aria-hidden":!0,className:D.asterisk,children:[" ","*"]})]})}),OE=re.createContext();function mV(e){return kn("MuiGrid",e)}const gV=[0,1,2,3,4,5,6,7,8,9,10],yV=["column-reverse","column","row-reverse","row"],vV=["nowrap","wrap-reverse","wrap"],Jp=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],um=wn("MuiGrid",["root","container","item","zeroMinWidth",...gV.map(e=>`spacing-xs-${e}`),...yV.map(e=>`direction-xs-${e}`),...vV.map(e=>`wrap-xs-${e}`),...Jp.map(e=>`grid-xs-${e}`),...Jp.map(e=>`grid-sm-${e}`),...Jp.map(e=>`grid-md-${e}`),...Jp.map(e=>`grid-lg-${e}`),...Jp.map(e=>`grid-xl-${e}`)]);function _V({theme:e,ownerState:t}){let n;return e.breakpoints.keys.reduce((o,a)=>{let h={};if(t[a]&&(n=t[a]),!n)return o;if(n===!0)h={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(n==="auto")h={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const d=yv({values:t.columns,breakpoints:e.breakpoints.values}),u=typeof d=="object"?d[a]:d;if(u==null)return o;const b=`${Math.round(n/u*1e8)/1e6}%`;let w={};if(t.container&&t.item&&t.columnSpacing!==0){const P=e.spacing(t.columnSpacing);if(P!=="0px"){const E=`calc(${b} + ${P})`;w={flexBasis:E,maxWidth:E}}}h={flexBasis:b,flexGrow:0,maxWidth:b,...w}}return e.breakpoints.values[a]===0?Object.assign(o,h):o[e.breakpoints.up(a)]=h,o},{})}function xV({theme:e,ownerState:t}){const n=yv({values:t.direction,breakpoints:e.breakpoints.values});return vs({theme:e},n,o=>{const a={flexDirection:o};return o.startsWith("column")&&(a[`& > .${um.item}`]={maxWidth:"none"}),a})}function x3({breakpoints:e,values:t}){let n="";Object.keys(t).forEach(a=>{n===""&&t[a]!==0&&(n=a)});const o=Object.keys(e).sort((a,h)=>e[a]-e[h]);return o.slice(0,o.indexOf(n))}function bV({theme:e,ownerState:t}){const{container:n,rowSpacing:o}=t;let a={};if(n&&o!==0){const h=yv({values:o,breakpoints:e.breakpoints.values});let d;typeof h=="object"&&(d=x3({breakpoints:e.breakpoints.values,values:h})),a=vs({theme:e},h,(u,b)=>{const w=e.spacing(u);return w!=="0px"?{marginTop:e.spacing(-u),[`& > .${um.item}`]:{paddingTop:w}}:d!=null&&d.includes(b)?{}:{marginTop:0,[`& > .${um.item}`]:{paddingTop:0}}})}return a}function wV({theme:e,ownerState:t}){const{container:n,columnSpacing:o}=t;let a={};if(n&&o!==0){const h=yv({values:o,breakpoints:e.breakpoints.values});let d;typeof h=="object"&&(d=x3({breakpoints:e.breakpoints.values,values:h})),a=vs({theme:e},h,(u,b)=>{const w=e.spacing(u);if(w!=="0px"){const P=e.spacing(-u);return{width:`calc(100% + ${w})`,marginLeft:P,[`& > .${um.item}`]:{paddingLeft:w}}}return d!=null&&d.includes(b)?{}:{width:"100%",marginLeft:0,[`& > .${um.item}`]:{paddingLeft:0}}})}return a}function SV(e,t,n={}){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[n[`spacing-xs-${String(e)}`]];const o=[];return t.forEach(a=>{const h=e[a];Number(h)>0&&o.push(n[`spacing-${a}-${String(h)}`])}),o}const CV=It("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{container:o,direction:a,item:h,spacing:d,wrap:u,zeroMinWidth:b,breakpoints:w}=n;let P=[];o&&(P=SV(d,w,t));const E=[];return w.forEach(I=>{const R=n[I];R&&E.push(t[`grid-${I}-${String(R)}`])}),[t.root,o&&t.container,h&&t.item,b&&t.zeroMinWidth,...P,a!=="row"&&t[`direction-xs-${String(a)}`],u!=="wrap"&&t[`wrap-xs-${String(u)}`],...E]}})(({ownerState:e})=>({boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},...e.item&&{margin:0},...e.zeroMinWidth&&{minWidth:0},...e.wrap!=="wrap"&&{flexWrap:e.wrap}}),xV,bV,wV,_V);function kV(e,t){if(!e||e<=0)return[];if(typeof e=="string"&&!Number.isNaN(Number(e))||typeof e=="number")return[`spacing-xs-${String(e)}`];const n=[];return t.forEach(o=>{const a=e[o];if(Number(a)>0){const h=`spacing-${o}-${String(a)}`;n.push(h)}}),n}const TV=e=>{const{classes:t,container:n,direction:o,item:a,spacing:h,wrap:d,zeroMinWidth:u,breakpoints:b}=e;let w=[];n&&(w=kV(h,b));const P=[];b.forEach(I=>{const R=e[I];R&&P.push(`grid-${I}-${String(R)}`)});const E={root:["root",n&&"container",a&&"item",u&&"zeroMinWidth",...w,o!=="row"&&`direction-xs-${String(o)}`,d!=="wrap"&&`wrap-xs-${String(d)}`,...P]};return In(E,mV,t)},BE=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiGrid"}),{breakpoints:a}=Ev(),h=c2(o),{className:d,columns:u,columnSpacing:b,component:w="div",container:P=!1,direction:E="row",item:I=!1,rowSpacing:R,spacing:F=0,wrap:U="wrap",zeroMinWidth:K=!1,...D}=h,j=R||F,V=b||F,Y=re.useContext(OE),ce=P?u||12:Y,de={},le={...D};a.keys.forEach(H=>{D[H]!=null&&(de[H]=D[H],delete le[H])});const ge={...h,columns:ce,container:P,direction:E,item:I,rowSpacing:j,columnSpacing:V,wrap:U,zeroMinWidth:K,spacing:F,...de,breakpoints:a.keys},Ae=TV(ge);return Ie.jsx(OE.Provider,{value:ce,children:Ie.jsx(CV,{ownerState:ge,className:Wt(Ae.root,d),as:w,ref:n,...le})})});function Ab(e){return`scale(${e}, ${e**2})`}const EV={entering:{opacity:1,transform:Ab(1)},entered:{opacity:1,transform:"none"}},X_=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),Lb=re.forwardRef(function(t,n){const{addEndListener:o,appear:a=!0,children:h,easing:d,in:u,onEnter:b,onEntered:w,onEntering:P,onExit:E,onExited:I,onExiting:R,style:F,timeout:U="auto",TransitionComponent:K=pa,...D}=t,j=QA(),V=re.useRef(),Y=Ev(),ce=re.useRef(null),de=Ti(ce,km(h),n),le=De=>We=>{if(De){const ut=ce.current;We===void 0?De(ut):De(ut,We)}},ge=le(P),Ae=le((De,We)=>{g3(De);const{duration:ut,delay:Be,easing:Ye}=v0({style:F,timeout:U,easing:d},{mode:"enter"});let pt;U==="auto"?(pt=Y.transitions.getAutoHeightDuration(De.clientHeight),V.current=pt):pt=ut,De.style.transition=[Y.transitions.create("opacity",{duration:pt,delay:Be}),Y.transitions.create("transform",{duration:X_?pt:pt*.666,delay:Be,easing:Ye})].join(","),b&&b(De,We)}),H=le(w),Ee=le(R),je=le(De=>{const{duration:We,delay:ut,easing:Be}=v0({style:F,timeout:U,easing:d},{mode:"exit"});let Ye;U==="auto"?(Ye=Y.transitions.getAutoHeightDuration(De.clientHeight),V.current=Ye):Ye=We,De.style.transition=[Y.transitions.create("opacity",{duration:Ye,delay:ut}),Y.transitions.create("transform",{duration:X_?Ye:Ye*.666,delay:X_?ut:ut||Ye*.333,easing:Be})].join(","),De.style.opacity=0,De.style.transform=Ab(.75),E&&E(De)}),$e=le(I),Le=De=>{U==="auto"&&j.start(V.current||0,De),o&&o(ce.current,De)};return Ie.jsx(K,{appear:a,in:u,nodeRef:ce,onEnter:Ae,onEntered:H,onEntering:ge,onExit:je,onExited:$e,onExiting:Ee,addEndListener:Le,timeout:U==="auto"?null:U,...D,children:(De,We)=>re.cloneElement(h,{style:{opacity:0,transform:Ab(.75),visibility:De==="exited"&&!u?"hidden":void 0,...EV[De],...F,...h.props.style},ref:de,...We})})});Lb&&(Lb.muiSupportAuto=!0);const IV=e=>{const{classes:t,disableUnderline:n}=e,a=In({root:["root",!n&&"underline"],input:["input"]},$j,t);return{...t,...a}},PV=It(Nv,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiInput",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[...Bv(e,t),!n.disableUnderline&&t.underline]}})(dr(({theme:e})=>{let n=e.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return e.vars&&(n=`rgba(${e.vars.palette.common.onBackgroundChannel} / ${e.vars.opacity.inputUnderline})`),{position:"relative",variants:[{props:({ownerState:o})=>o.formControl,style:{"label + &":{marginTop:16}}},{props:({ownerState:o})=>!o.disableUnderline,style:{"&::after":{left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Yp.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Yp.error}`]:{"&::before, &::after":{borderBottomColor:(e.vars||e).palette.error.main}},"&::before":{borderBottom:`1px solid ${n}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Yp.disabled}, .${Yp.error}):before`]:{borderBottom:`2px solid ${(e.vars||e).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${n}`}},[`&.${Yp.disabled}:before`]:{borderBottomStyle:"dotted"}}},...Object.entries(e.palette).filter(Sd()).map(([o])=>({props:{color:o,disableUnderline:!1},style:{"&::after":{borderBottom:`2px solid ${(e.vars||e).palette[o].main}`}}}))]}})),MV=It(jv,{name:"MuiInput",slot:"Input",overridesResolver:Fv})({}),S0=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiInput"}),{disableUnderline:a=!1,components:h={},componentsProps:d,fullWidth:u=!1,inputComponent:b="input",multiline:w=!1,slotProps:P,slots:E={},type:I="text",...R}=o,F=IV(o),K={root:{ownerState:{disableUnderline:a}}},D=P??d?Ni(P??d,K):K,j=E.root??h.Root??PV,V=E.input??h.Input??MV;return Ie.jsx(S2,{slots:{root:j,input:V},slotProps:D,fullWidth:u,inputComponent:b,multiline:w,ref:n,type:I,...R,classes:F})});S0&&(S0.muiName="Input");function AV(e){return kn("MuiInputLabel",e)}wn("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const LV=e=>{const{classes:t,formControl:n,size:o,shrink:a,disableAnimation:h,variant:d,required:u}=e,b={root:["root",n&&"formControl",!h&&"animated",a&&"shrink",o&&o!=="normal"&&`size${hn(o)}`,d],asterisk:[u&&"asterisk"]},w=In(b,AV,t);return{...t,...w}},zV=It(fV,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ef.asterisk}`]:t.asterisk},t.root,n.formControl&&t.formControl,n.size==="small"&&t.sizeSmall,n.shrink&&t.shrink,!n.disableAnimation&&t.animated,n.focused&&t.focused,t[n.variant]]}})(dr(({theme:e})=>({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",variants:[{props:({ownerState:t})=>t.formControl,style:{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"}},{props:{size:"small"},style:{transform:"translate(0, 17px) scale(1)"}},{props:({ownerState:t})=>t.shrink,style:{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"}},{props:({ownerState:t})=>!t.disableAnimation,style:{transition:e.transitions.create(["color","transform","max-width"],{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut})}},{props:{variant:"filled"},style:{zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"filled",size:"small"},style:{transform:"translate(12px, 13px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="filled"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"}},{props:({variant:t,ownerState:n,size:o})=>t==="filled"&&n.shrink&&o==="small",style:{transform:"translate(12px, 4px) scale(0.75)"}},{props:{variant:"outlined"},style:{zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"}},{props:{variant:"outlined",size:"small"},style:{transform:"translate(14px, 9px) scale(1)"}},{props:({variant:t,ownerState:n})=>t==="outlined"&&n.shrink,style:{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}}]}))),RV=re.forwardRef(function(t,n){const o=Pn({name:"MuiInputLabel",props:t}),{disableAnimation:a=!1,margin:h,shrink:d,variant:u,className:b,...w}=o,P=kd();let E=d;typeof E>"u"&&P&&(E=P.filled||P.focused||P.adornedStart);const I=Cd({props:o,muiFormControl:P,states:["size","variant","required","focused"]}),R={...o,disableAnimation:a,formControl:P,shrink:E,size:I.size,variant:I.variant,required:I.required,focused:I.focused},F=LV(R);return Ie.jsx(zV,{"data-shrink":E,ref:n,className:Wt(F.root,b),...w,ownerState:R,classes:F})}),td=re.createContext({});function DV(e){return kn("MuiList",e)}wn("MuiList",["root","padding","dense","subheader"]);const $V=e=>{const{classes:t,disablePadding:n,dense:o,subheader:a}=e;return In({root:["root",!n&&"padding",o&&"dense",a&&"subheader"]},DV,t)},OV=It("ul",{name:"MuiList",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disablePadding&&t.padding,n.dense&&t.dense,n.subheader&&t.subheader]}})({listStyle:"none",margin:0,padding:0,position:"relative",variants:[{props:({ownerState:e})=>!e.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:e})=>e.subheader,style:{paddingTop:0}}]}),b3=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiList"}),{children:a,className:h,component:d="ul",dense:u=!1,disablePadding:b=!1,subheader:w,...P}=o,E=re.useMemo(()=>({dense:u}),[u]),I={...o,component:d,dense:u,disablePadding:b},R=$V(I);return Ie.jsx(td.Provider,{value:E,children:Ie.jsxs(OV,{as:d,className:Wt(R.root,h),ref:n,ownerState:I,...P,children:[w,a]})})});function BV(e){return kn("MuiListItem",e)}wn("MuiListItem",["root","container","dense","alignItemsFlexStart","divider","gutters","padding","secondaryAction"]);const FV=wn("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function NV(e){return kn("MuiListItemSecondaryAction",e)}wn("MuiListItemSecondaryAction",["root","disableGutters"]);const jV=e=>{const{disableGutters:t,classes:n}=e;return In({root:["root",t&&"disableGutters"]},NV,n)},UV=It("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.disableGutters&&t.disableGutters]}})({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)",variants:[{props:({ownerState:e})=>e.disableGutters,style:{right:0}}]}),w3=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiListItemSecondaryAction"}),{className:a,...h}=o,d=re.useContext(td),u={...o,disableGutters:d.disableGutters},b=jV(u);return Ie.jsx(UV,{className:Wt(b.root,a),ownerState:u,ref:n,...h})});w3.muiName="ListItemSecondaryAction";const VV=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.alignItems==="flex-start"&&t.alignItemsFlexStart,n.divider&&t.divider,!n.disableGutters&&t.gutters,!n.disablePadding&&t.padding,n.hasSecondaryAction&&t.secondaryAction]},WV=e=>{const{alignItems:t,classes:n,dense:o,disableGutters:a,disablePadding:h,divider:d,hasSecondaryAction:u}=e;return In({root:["root",o&&"dense",!a&&"gutters",!h&&"padding",d&&"divider",t==="flex-start"&&"alignItemsFlexStart",u&&"secondaryAction"],container:["container"]},BV,n)},qV=It("div",{name:"MuiListItem",slot:"Root",overridesResolver:VV})(dr(({theme:e})=>({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left",variants:[{props:({ownerState:t})=>!t.disablePadding,style:{paddingTop:8,paddingBottom:8}},{props:({ownerState:t})=>!t.disablePadding&&t.dense,style:{paddingTop:4,paddingBottom:4}},{props:({ownerState:t})=>!t.disablePadding&&!t.disableGutters,style:{paddingLeft:16,paddingRight:16}},{props:({ownerState:t})=>!t.disablePadding&&!!t.secondaryAction,style:{paddingRight:48}},{props:({ownerState:t})=>!!t.secondaryAction,style:{[`& > .${FV.root}`]:{paddingRight:48}}},{props:{alignItems:"flex-start"},style:{alignItems:"flex-start"}},{props:({ownerState:t})=>t.divider,style:{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"}},{props:({ownerState:t})=>t.button,style:{transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}}},{props:({ownerState:t})=>t.hasSecondaryAction,style:{paddingRight:48}}]}))),GV=It("li",{name:"MuiListItem",slot:"Container",overridesResolver:(e,t)=>t.container})({position:"relative"}),HV=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiListItem"}),{alignItems:a="center",children:h,className:d,component:u,components:b={},componentsProps:w={},ContainerComponent:P="li",ContainerProps:{className:E,...I}={},dense:R=!1,disableGutters:F=!1,disablePadding:U=!1,divider:K=!1,secondaryAction:D,slotProps:j={},slots:V={},...Y}=o,ce=re.useContext(td),de=re.useMemo(()=>({dense:R||ce.dense||!1,alignItems:a,disableGutters:F}),[a,ce.dense,R,F]),le=re.useRef(null),ge=re.Children.toArray(h),Ae=ge.length&&Ay(ge[ge.length-1],["ListItemSecondaryAction"]),H={...o,alignItems:a,dense:de.dense,disableGutters:F,disablePadding:U,divider:K,hasSecondaryAction:Ae},Ee=WV(H),je=Ti(le,n),$e=V.root||b.Root||qV,Le=j.root||w.root||{},De={className:Wt(Ee.root,Le.className,d),...Y};let We=u||"li";return Ae?(We=!De.component&&!u?"div":We,P==="li"&&(We==="li"?We="div":De.component==="li"&&(De.component="div")),Ie.jsx(td.Provider,{value:de,children:Ie.jsxs(GV,{as:P,className:Wt(Ee.container,E),ref:je,ownerState:H,...I,children:[Ie.jsx($e,{...Le,...!lm($e)&&{as:We,ownerState:{...H,...Le.ownerState}},...De,children:ge}),ge.pop()]})})):Ie.jsx(td.Provider,{value:de,children:Ie.jsxs($e,{...Le,as:We,ref:je,...!lm($e)&&{ownerState:{...H,...Le.ownerState}},...De,children:[ge,D&&Ie.jsx(w3,{children:D})]})})});function ZV(e){return kn("MuiListItemText",e)}const iy=wn("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),KV=e=>{const{classes:t,inset:n,primary:o,secondary:a,dense:h}=e;return In({root:["root",n&&"inset",h&&"dense",o&&a&&"multiline"],primary:["primary"],secondary:["secondary"]},ZV,t)},XV=It("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${iy.primary}`]:t.primary},{[`& .${iy.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4,[`.${IE.root}:where(& .${iy.primary})`]:{display:"block"},[`.${IE.root}:where(& .${iy.secondary})`]:{display:"block"},variants:[{props:({ownerState:e})=>e.primary&&e.secondary,style:{marginTop:6,marginBottom:6}},{props:({ownerState:e})=>e.inset,style:{paddingLeft:56}}]}),YV=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiListItemText"}),{children:a,className:h,disableTypography:d=!1,inset:u=!1,primary:b,primaryTypographyProps:w,secondary:P,secondaryTypographyProps:E,...I}=o,{dense:R}=re.useContext(td);let F=b??a,U=P;const K={...o,disableTypography:d,inset:u,primary:!!F,secondary:!!U,dense:R},D=KV(K);return F!=null&&F.type!==Uo&&!d&&(F=Ie.jsx(Uo,{variant:R?"body2":"body1",className:D.primary,component:w!=null&&w.variant?void 0:"span",...w,children:F})),U!=null&&U.type!==Uo&&!d&&(U=Ie.jsx(Uo,{variant:"body2",className:D.secondary,color:"textSecondary",...E,children:U})),Ie.jsxs(XV,{className:Wt(D.root,h),ownerState:K,ref:n,...I,children:[F,U]})});function Y_(e,t,n){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:n?null:e.firstChild}function FE(e,t,n){return e===t?n?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:n?null:e.lastChild}function S3(e,t){if(t===void 0)return!0;let n=e.innerText;return n===void 0&&(n=e.textContent),n=n.trim().toLowerCase(),n.length===0?!1:t.repeating?n[0]===t.keys[0]:n.startsWith(t.keys.join(""))}function Qp(e,t,n,o,a,h){let d=!1,u=a(e,t,t?n:!1);for(;u;){if(u===e.firstChild){if(d)return!1;d=!0}const b=o?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!S3(u,h)||b)u=a(e,u,n);else return u.focus(),!0}return!1}const JV=re.forwardRef(function(t,n){const{actions:o,autoFocus:a=!1,autoFocusItem:h=!1,children:d,className:u,disabledItemsFocusable:b=!1,disableListWrap:w=!1,onKeyDown:P,variant:E="selectedMenu",...I}=t,R=re.useRef(null),F=re.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});hc(()=>{a&&R.current.focus()},[a]),re.useImperativeHandle(o,()=>({adjustStyleForScrollbar:(V,{direction:Y})=>{const ce=!R.current.style.width;if(V.clientHeight<R.current.clientHeight&&ce){const de=`${e3(Za(V))}px`;R.current.style[Y==="rtl"?"paddingLeft":"paddingRight"]=de,R.current.style.width=`calc(100% + ${de})`}return R.current}}),[]);const U=V=>{const Y=R.current,ce=V.key;if(V.ctrlKey||V.metaKey||V.altKey){P&&P(V);return}const le=Fs(Y).activeElement;if(ce==="ArrowDown")V.preventDefault(),Qp(Y,le,w,b,Y_);else if(ce==="ArrowUp")V.preventDefault(),Qp(Y,le,w,b,FE);else if(ce==="Home")V.preventDefault(),Qp(Y,null,w,b,Y_);else if(ce==="End")V.preventDefault(),Qp(Y,null,w,b,FE);else if(ce.length===1){const ge=F.current,Ae=ce.toLowerCase(),H=performance.now();ge.keys.length>0&&(H-ge.lastTime>500?(ge.keys=[],ge.repeating=!0,ge.previousKeyMatched=!0):ge.repeating&&Ae!==ge.keys[0]&&(ge.repeating=!1)),ge.lastTime=H,ge.keys.push(Ae);const Ee=le&&!ge.repeating&&S3(le,ge);ge.previousKeyMatched&&(Ee||Qp(Y,le,!1,b,Y_,ge))?V.preventDefault():ge.previousKeyMatched=!1}P&&P(V)},K=Ti(R,n);let D=-1;re.Children.forEach(d,(V,Y)=>{if(!re.isValidElement(V)){D===Y&&(D+=1,D>=d.length&&(D=-1));return}V.props.disabled||(E==="selectedMenu"&&V.props.selected||D===-1)&&(D=Y),D===Y&&(V.props.disabled||V.props.muiSkipListHighlight||V.type.muiSkipListHighlight)&&(D+=1,D>=d.length&&(D=-1))});const j=re.Children.map(d,(V,Y)=>{if(Y===D){const ce={};return h&&(ce.autoFocus=!0),V.props.tabIndex===void 0&&E==="selectedMenu"&&(ce.tabIndex=0),re.cloneElement(V,ce)}return V});return Ie.jsx(b3,{role:"menu",ref:K,className:u,onKeyDown:U,tabIndex:a?0:-1,...I,children:j})});function QV(e){return kn("MuiPopover",e)}wn("MuiPopover",["root","paper"]);function NE(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.height/2:t==="bottom"&&(n=e.height),n}function jE(e,t){let n=0;return typeof t=="number"?n=t:t==="center"?n=e.width/2:t==="right"&&(n=e.width),n}function UE(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function J_(e){return typeof e=="function"?e():e}const eW=e=>{const{classes:t}=e;return In({root:["root"],paper:["paper"]},QV,t)},tW=It(ZU,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),C3=It(b2,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),nW=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiPopover"}),{action:a,anchorEl:h,anchorOrigin:d={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:b="anchorEl",children:w,className:P,container:E,elevation:I=8,marginThreshold:R=16,open:F,PaperProps:U={},slots:K={},slotProps:D={},transformOrigin:j={vertical:"top",horizontal:"left"},TransitionComponent:V=Lb,transitionDuration:Y="auto",TransitionProps:{onEntering:ce,...de}={},disableScrollLock:le=!1,...ge}=o,Ae=(D==null?void 0:D.paper)??U,H=re.useRef(),Ee={...o,anchorOrigin:d,anchorReference:b,elevation:I,marginThreshold:R,externalPaperSlotProps:Ae,transformOrigin:j,TransitionComponent:V,transitionDuration:Y,TransitionProps:de},je=eW(Ee),$e=re.useCallback(()=>{if(b==="anchorPosition")return u;const jt=J_(h),Ut=(jt&&jt.nodeType===1?jt:Fs(H.current).body).getBoundingClientRect();return{top:Ut.top+NE(Ut,d.vertical),left:Ut.left+jE(Ut,d.horizontal)}},[h,d.horizontal,d.vertical,u,b]),Le=re.useCallback(jt=>({vertical:NE(jt,j.vertical),horizontal:jE(jt,j.horizontal)}),[j.horizontal,j.vertical]),De=re.useCallback(jt=>{const tn={width:jt.offsetWidth,height:jt.offsetHeight},Ut=Le(tn);if(b==="none")return{top:null,left:null,transformOrigin:UE(Ut)};const gn=$e();let yt=gn.top-Ut.vertical,zt=gn.left-Ut.horizontal;const we=yt+tn.height,ir=zt+tn.width,pn=Za(J_(h)),ht=pn.innerHeight-R,Vt=pn.innerWidth-R;if(R!==null&&yt<R){const an=yt-R;yt-=an,Ut.vertical+=an}else if(R!==null&&we>ht){const an=we-ht;yt-=an,Ut.vertical+=an}if(R!==null&&zt<R){const an=zt-R;zt-=an,Ut.horizontal+=an}else if(ir>Vt){const an=ir-Vt;zt-=an,Ut.horizontal+=an}return{top:`${Math.round(yt)}px`,left:`${Math.round(zt)}px`,transformOrigin:UE(Ut)}},[h,b,$e,Le,R]),[We,ut]=re.useState(F),Be=re.useCallback(()=>{const jt=H.current;if(!jt)return;const tn=De(jt);tn.top!==null&&jt.style.setProperty("top",tn.top),tn.left!==null&&(jt.style.left=tn.left),jt.style.transformOrigin=tn.transformOrigin,ut(!0)},[De]);re.useEffect(()=>(le&&window.addEventListener("scroll",Be),()=>window.removeEventListener("scroll",Be)),[h,le,Be]);const Ye=(jt,tn)=>{ce&&ce(jt,tn),Be()},pt=()=>{ut(!1)};re.useEffect(()=>{F&&Be()}),re.useImperativeHandle(a,()=>F?{updatePosition:()=>{Be()}}:null,[F,Be]),re.useEffect(()=>{if(!F)return;const jt=XA(()=>{Be()}),tn=Za(h);return tn.addEventListener("resize",jt),()=>{jt.clear(),tn.removeEventListener("resize",jt)}},[h,F,Be]);let St=Y;Y==="auto"&&!V.muiSupportAuto&&(St=void 0);const At=E||(h?Fs(J_(h)).body:void 0),Nt={slots:K,slotProps:{...D,paper:Ae}},[Lt,Zt]=hs("paper",{elementType:C3,externalForwardedProps:Nt,additionalProps:{elevation:I,className:Wt(je.paper,Ae==null?void 0:Ae.className),style:We?Ae.style:{...Ae.style,opacity:0}},ownerState:Ee}),[un,{slotProps:en,...Bn}]=hs("root",{elementType:tW,externalForwardedProps:Nt,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:At,open:F},ownerState:Ee,className:Wt(je.root,P)}),Sn=Ti(H,Zt.ref);return Ie.jsx(un,{...Bn,...!lm(un)&&{slotProps:en,disableScrollLock:le},...ge,ref:n,children:Ie.jsx(V,{appear:!0,in:F,onEntering:Ye,onExited:pt,timeout:St,...de,children:Ie.jsx(Lt,{...Zt,ref:Sn,children:w})})})});function rW(e){return kn("MuiMenu",e)}wn("MuiMenu",["root","paper","list"]);const iW={vertical:"top",horizontal:"right"},oW={vertical:"top",horizontal:"left"},sW=e=>{const{classes:t}=e;return In({root:["root"],paper:["paper"],list:["list"]},rW,t)},aW=It(nW,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),lW=It(C3,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),uW=It(JV,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),cW=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiMenu"}),{autoFocus:a=!0,children:h,className:d,disableAutoFocusItem:u=!1,MenuListProps:b={},onClose:w,open:P,PaperProps:E={},PopoverClasses:I,transitionDuration:R="auto",TransitionProps:{onEntering:F,...U}={},variant:K="selectedMenu",slots:D={},slotProps:j={},...V}=o,Y=J7(),ce={...o,autoFocus:a,disableAutoFocusItem:u,MenuListProps:b,onEntering:F,PaperProps:E,transitionDuration:R,TransitionProps:U,variant:K},de=sW(ce),le=a&&!u&&P,ge=re.useRef(null),Ae=(We,ut)=>{ge.current&&ge.current.adjustStyleForScrollbar(We,{direction:Y?"rtl":"ltr"}),F&&F(We,ut)},H=We=>{We.key==="Tab"&&(We.preventDefault(),w&&w(We,"tabKeyDown"))};let Ee=-1;re.Children.map(h,(We,ut)=>{re.isValidElement(We)&&(We.props.disabled||(K==="selectedMenu"&&We.props.selected||Ee===-1)&&(Ee=ut))});const je=D.paper??lW,$e=j.paper??E,Le=vE({elementType:D.root,externalSlotProps:j.root,ownerState:ce,className:[de.root,d]}),De=vE({elementType:je,externalSlotProps:$e,ownerState:ce,className:de.paper});return Ie.jsx(aW,{onClose:w,anchorOrigin:{vertical:"bottom",horizontal:Y?"right":"left"},transformOrigin:Y?iW:oW,slots:{paper:je,root:D.root},slotProps:{root:Le,paper:De},open:P,ref:n,transitionDuration:R,TransitionProps:{onEntering:Ae,...U},ownerState:ce,...V,classes:I,children:Ie.jsx(uW,{onKeyDown:H,actions:ge,autoFocus:a&&(Ee===-1||u),autoFocusItem:le,variant:K,...b,className:Wt(de.list,b.className),children:h})})});function hW(e){return kn("MuiNativeSelect",e)}const C2=wn("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),dW=e=>{const{classes:t,variant:n,disabled:o,multiple:a,open:h,error:d}=e,u={select:["select",n,o&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${hn(n)}`,h&&"iconOpen",o&&"disabled"]};return In(u,hW,t)},k3=It("select")(({theme:e})=>({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{borderRadius:0},[`&.${C2.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},variants:[{props:({ownerState:t})=>t.variant!=="filled"&&t.variant!=="outlined",style:{"&&&":{paddingRight:24,minWidth:16}}},{props:{variant:"filled"},style:{"&&&":{paddingRight:32}}},{props:{variant:"outlined"},style:{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}}]})),pW=It(k3,{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Ns,overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.select,t[n.variant],n.error&&t.error,{[`&.${C2.multiple}`]:t.multiple}]}})({}),T3=It("svg")(({theme:e})=>({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${C2.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:({ownerState:t})=>t.open,style:{transform:"rotate(180deg)"}},{props:{variant:"filled"},style:{right:7}},{props:{variant:"outlined"},style:{right:7}}]})),fW=It(T3,{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${hn(n.variant)}`],n.open&&t.iconOpen]}})({}),mW=re.forwardRef(function(t,n){const{className:o,disabled:a,error:h,IconComponent:d,inputRef:u,variant:b="standard",...w}=t,P={...t,disabled:a,variant:b,error:h},E=dW(P);return Ie.jsxs(re.Fragment,{children:[Ie.jsx(pW,{ownerState:P,className:Wt(E.select,o),disabled:a,ref:u||n,...w}),t.multiple?null:Ie.jsx(fW,{as:d,ownerState:P,className:E.icon})]})});var VE;const gW=It("fieldset",{shouldForwardProp:Ns})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),yW=It("legend",{shouldForwardProp:Ns})(dr(({theme:e})=>({float:"unset",width:"auto",overflow:"hidden",variants:[{props:({ownerState:t})=>!t.withLabel,style:{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})}},{props:({ownerState:t})=>t.withLabel,style:{display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}}},{props:({ownerState:t})=>t.withLabel&&t.notched,style:{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}}]})));function vW(e){const{children:t,classes:n,className:o,label:a,notched:h,...d}=e,u=a!=null&&a!=="",b={...e,notched:h,withLabel:u};return Ie.jsx(gW,{"aria-hidden":!0,className:o,ownerState:b,...d,children:Ie.jsx(yW,{ownerState:b,children:u?Ie.jsx("span",{children:a}):VE||(VE=Ie.jsx("span",{className:"notranslate",children:"​"}))})})}const _W=e=>{const{classes:t}=e,o=In({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Oj,t);return{...t,...o}},xW=It(Nv,{shouldForwardProp:e=>Ns(e)||e==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:Bv})(dr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{position:"relative",borderRadius:(e.vars||e).shape.borderRadius,[`&:hover .${Ys.notchedOutline}`]:{borderColor:(e.vars||e).palette.text.primary},"@media (hover: none)":{[`&:hover .${Ys.notchedOutline}`]:{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}},[`&.${Ys.focused} .${Ys.notchedOutline}`]:{borderWidth:2},variants:[...Object.entries(e.palette).filter(Sd()).map(([n])=>({props:{color:n},style:{[`&.${Ys.focused} .${Ys.notchedOutline}`]:{borderColor:(e.vars||e).palette[n].main}}})),{props:{},style:{[`&.${Ys.error} .${Ys.notchedOutline}`]:{borderColor:(e.vars||e).palette.error.main},[`&.${Ys.disabled} .${Ys.notchedOutline}`]:{borderColor:(e.vars||e).palette.action.disabled}}},{props:({ownerState:n})=>n.startAdornment,style:{paddingLeft:14}},{props:({ownerState:n})=>n.endAdornment,style:{paddingRight:14}},{props:({ownerState:n})=>n.multiline,style:{padding:"16.5px 14px"}},{props:({ownerState:n,size:o})=>n.multiline&&o==="small",style:{padding:"8.5px 14px"}}]}})),bW=It(vW,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(e,t)=>t.notchedOutline})(dr(({theme:e})=>{const t=e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:e.vars?`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:t}})),wW=It(jv,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Fv})(dr(({theme:e})=>({padding:"16.5px 14px",...!e.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:e.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:e.palette.mode==="light"?null:"#fff",caretColor:e.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},...e.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[e.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},variants:[{props:{size:"small"},style:{padding:"8.5px 14px"}},{props:({ownerState:t})=>t.multiline,style:{padding:0}},{props:({ownerState:t})=>t.startAdornment,style:{paddingLeft:0}},{props:({ownerState:t})=>t.endAdornment,style:{paddingRight:0}}]}))),C0=re.forwardRef(function(t,n){var o;const a=Pn({props:t,name:"MuiOutlinedInput"}),{components:h={},fullWidth:d=!1,inputComponent:u="input",label:b,multiline:w=!1,notched:P,slots:E={},type:I="text",...R}=a,F=_W(a),U=kd(),K=Cd({props:a,muiFormControl:U,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),D={...a,color:K.color||"primary",disabled:K.disabled,error:K.error,focused:K.focused,formControl:U,fullWidth:d,hiddenLabel:K.hiddenLabel,multiline:w,size:K.size,type:I},j=E.root??h.Root??xW,V=E.input??h.Input??wW;return Ie.jsx(S2,{slots:{root:j,input:V},renderSuffix:Y=>Ie.jsx(bW,{ownerState:D,className:F.notchedOutline,label:b!=null&&b!==""&&K.required?o||(o=Ie.jsxs(re.Fragment,{children:[b," ","*"]})):b,notched:typeof P<"u"?P:!!(Y.startAdornment||Y.filled||Y.focused)}),fullWidth:d,inputComponent:u,multiline:w,ref:n,type:I,...R,classes:{...F,notchedOutline:null}})});C0&&(C0.muiName="Input");function SW(e){return kn("MuiSelect",e)}const ef=wn("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var WE;const CW=It(k3,{name:"MuiSelect",slot:"Select",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`&.${ef.select}`]:t.select},{[`&.${ef.select}`]:t[n.variant]},{[`&.${ef.error}`]:t.error},{[`&.${ef.multiple}`]:t.multiple}]}})({[`&.${ef.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),kW=It(T3,{name:"MuiSelect",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,n.variant&&t[`icon${hn(n.variant)}`],n.open&&t.iconOpen]}})({}),TW=It("input",{shouldForwardProp:e=>h3(e)&&e!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(e,t)=>t.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function qE(e,t){return typeof t=="object"&&t!==null?e===t:String(e)===String(t)}function EW(e){return e==null||typeof e=="string"&&!e.trim()}const IW=e=>{const{classes:t,variant:n,disabled:o,multiple:a,open:h,error:d}=e,u={select:["select",n,o&&"disabled",a&&"multiple",d&&"error"],icon:["icon",`icon${hn(n)}`,h&&"iconOpen",o&&"disabled"],nativeInput:["nativeInput"]};return In(u,SW,t)},PW=re.forwardRef(function(t,n){var Ze;const{"aria-describedby":o,"aria-label":a,autoFocus:h,autoWidth:d,children:u,className:b,defaultOpen:w,defaultValue:P,disabled:E,displayEmpty:I,error:R=!1,IconComponent:F,inputRef:U,labelId:K,MenuProps:D={},multiple:j,name:V,onBlur:Y,onChange:ce,onClose:de,onFocus:le,onOpen:ge,open:Ae,readOnly:H,renderValue:Ee,SelectDisplayProps:je={},tabIndex:$e,type:Le,value:De,variant:We="standard",...ut}=t,[Be,Ye]=fE({controlled:De,default:P,name:"Select"}),[pt,St]=fE({controlled:Ae,default:w,name:"Select"}),At=re.useRef(null),Nt=re.useRef(null),[Lt,Zt]=re.useState(null),{current:un}=re.useRef(Ae!=null),[en,Bn]=re.useState(),Sn=Ti(n,U),jt=re.useCallback(Ke=>{Nt.current=Ke,Ke&&Zt(Ke)},[]),tn=Lt==null?void 0:Lt.parentNode;re.useImperativeHandle(Sn,()=>({focus:()=>{Nt.current.focus()},node:At.current,value:Be}),[Be]),re.useEffect(()=>{w&&pt&&Lt&&!un&&(Bn(d?null:tn.clientWidth),Nt.current.focus())},[Lt,d]),re.useEffect(()=>{h&&Nt.current.focus()},[h]),re.useEffect(()=>{if(!K)return;const Ke=Fs(Nt.current).getElementById(K);if(Ke){const it=()=>{getSelection().isCollapsed&&Nt.current.focus()};return Ke.addEventListener("click",it),()=>{Ke.removeEventListener("click",it)}}},[K]);const Ut=(Ke,it)=>{Ke?ge&&ge(it):de&&de(it),un||(Bn(d?null:tn.clientWidth),St(Ke))},gn=Ke=>{Ke.button===0&&(Ke.preventDefault(),Nt.current.focus(),Ut(!0,Ke))},yt=Ke=>{Ut(!1,Ke)},zt=re.Children.toArray(u),we=Ke=>{const it=zt.find(ln=>ln.props.value===Ke.target.value);it!==void 0&&(Ye(it.props.value),ce&&ce(Ke,it))},ir=Ke=>it=>{let ln;if(it.currentTarget.hasAttribute("tabindex")){if(j){ln=Array.isArray(Be)?Be.slice():[];const Pr=Be.indexOf(Ke.props.value);Pr===-1?ln.push(Ke.props.value):ln.splice(Pr,1)}else ln=Ke.props.value;if(Ke.props.onClick&&Ke.props.onClick(it),Be!==ln&&(Ye(ln),ce)){const Pr=it.nativeEvent||it,Rt=new Pr.constructor(Pr.type,Pr);Object.defineProperty(Rt,"target",{writable:!0,value:{value:ln,name:V}}),ce(Rt,Ke)}j||Ut(!1,it)}},pn=Ke=>{H||[" ","ArrowUp","ArrowDown","Enter"].includes(Ke.key)&&(Ke.preventDefault(),Ut(!0,Ke))},ht=Lt!==null&&pt,Vt=Ke=>{!ht&&Y&&(Object.defineProperty(Ke,"target",{writable:!0,value:{value:Be,name:V}}),Y(Ke))};delete ut["aria-invalid"];let an,Qn;const bt=[];let Mn=!1;(x0({value:Be})||I)&&(Ee?an=Ee(Be):Mn=!0);const pr=zt.map(Ke=>{if(!re.isValidElement(Ke))return null;let it;if(j){if(!Array.isArray(Be))throw new Error(Ha(2));it=Be.some(ln=>qE(ln,Ke.props.value)),it&&Mn&&bt.push(Ke.props.children)}else it=qE(Be,Ke.props.value),it&&Mn&&(Qn=Ke.props.children);return re.cloneElement(Ke,{"aria-selected":it?"true":"false",onClick:ir(Ke),onKeyUp:ln=>{ln.key===" "&&ln.preventDefault(),Ke.props.onKeyUp&&Ke.props.onKeyUp(ln)},role:"option",selected:it,value:void 0,"data-value":Ke.props.value})});Mn&&(j?bt.length===0?an=null:an=bt.reduce((Ke,it,ln)=>(Ke.push(it),ln<bt.length-1&&Ke.push(", "),Ke),[]):an=Qn);let Zr=en;!d&&un&&Lt&&(Zr=tn.clientWidth);let fr;typeof $e<"u"?fr=$e:fr=E?null:0;const Ge=je.id||(V?`mui-component-select-${V}`:void 0),or={...t,variant:We,value:Be,open:ht,error:R},Wn=IW(or),on={...D.PaperProps,...(Ze=D.slotProps)==null?void 0:Ze.paper},Ir=YA();return Ie.jsxs(re.Fragment,{children:[Ie.jsx(CW,{as:"div",ref:jt,tabIndex:fr,role:"combobox","aria-controls":Ir,"aria-disabled":E?"true":void 0,"aria-expanded":ht?"true":"false","aria-haspopup":"listbox","aria-label":a,"aria-labelledby":[K,Ge].filter(Boolean).join(" ")||void 0,"aria-describedby":o,onKeyDown:pn,onMouseDown:E||H?null:gn,onBlur:Vt,onFocus:le,...je,ownerState:or,className:Wt(je.className,Wn.select,b),id:Ge,children:EW(an)?WE||(WE=Ie.jsx("span",{className:"notranslate",children:"​"})):an}),Ie.jsx(TW,{"aria-invalid":R,value:Array.isArray(Be)?Be.join(","):Be,name:V,ref:At,"aria-hidden":!0,onChange:we,tabIndex:-1,disabled:E,className:Wn.nativeInput,autoFocus:h,...ut,ownerState:or}),Ie.jsx(kW,{as:F,className:Wn.icon,ownerState:or}),Ie.jsx(cW,{id:`menu-${V||""}`,anchorEl:tn,open:ht,onClose:yt,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},...D,MenuListProps:{"aria-labelledby":K,role:"listbox","aria-multiselectable":j?"true":void 0,disableListWrap:!0,id:Ir,...D.MenuListProps},slotProps:{...D.slotProps,paper:{...on,style:{minWidth:Zr,...on!=null?on.style:null}}},children:pr})]})}),MW=e=>{const{classes:t}=e;return t},k2={name:"MuiSelect",overridesResolver:(e,t)=>t.root,shouldForwardProp:e=>Ns(e)&&e!=="variant",slot:"Root"},AW=It(S0,k2)(""),LW=It(C0,k2)(""),zW=It(w0,k2)(""),E3=re.forwardRef(function(t,n){const o=Pn({name:"MuiSelect",props:t}),{autoWidth:a=!1,children:h,classes:d={},className:u,defaultOpen:b=!1,displayEmpty:w=!1,IconComponent:P=Fj,id:E,input:I,inputProps:R,label:F,labelId:U,MenuProps:K,multiple:D=!1,native:j=!1,onClose:V,onOpen:Y,open:ce,renderValue:de,SelectDisplayProps:le,variant:ge="outlined",...Ae}=o,H=j?mW:PW,Ee=kd(),je=Cd({props:o,muiFormControl:Ee,states:["variant","error"]}),$e=je.variant||ge,Le={...o,variant:$e,classes:d},De=MW(Le),{root:We,...ut}=De,Be=I||{standard:Ie.jsx(AW,{ownerState:Le}),outlined:Ie.jsx(LW,{label:F,ownerState:Le}),filled:Ie.jsx(zW,{ownerState:Le})}[$e],Ye=Ti(n,km(Be));return Ie.jsx(re.Fragment,{children:re.cloneElement(Be,{inputComponent:H,inputProps:{children:h,error:je.error,IconComponent:P,variant:$e,type:void 0,multiple:D,...j?{id:E}:{autoWidth:a,defaultOpen:b,displayEmpty:w,labelId:U,MenuProps:K,onClose:V,onOpen:Y,open:ce,renderValue:de,SelectDisplayProps:{id:E,...le}},...R,classes:R?Ni(ut,R.classes):ut,...I?I.props.inputProps:{}},...(D&&j||w)&&$e==="outlined"?{notched:!0}:{},ref:Ye,className:Wt(Be.props.className,u,De.root),...!I&&{variant:$e},...Ae})})});E3.muiName="Select";function RW(e){return kn("MuiTextField",e)}wn("MuiTextField",["root"]);const DW={standard:S0,filled:w0,outlined:C0},$W=e=>{const{classes:t}=e;return In({root:["root"]},RW,t)},OW=It(oV,{name:"MuiTextField",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Q_=re.forwardRef(function(t,n){const o=Pn({props:t,name:"MuiTextField"}),{autoComplete:a,autoFocus:h=!1,children:d,className:u,color:b="primary",defaultValue:w,disabled:P=!1,error:E=!1,FormHelperTextProps:I,fullWidth:R=!1,helperText:F,id:U,InputLabelProps:K,inputProps:D,InputProps:j,inputRef:V,label:Y,maxRows:ce,minRows:de,multiline:le=!1,name:ge,onBlur:Ae,onChange:H,onFocus:Ee,placeholder:je,required:$e=!1,rows:Le,select:De=!1,SelectProps:We,slots:ut={},slotProps:Be={},type:Ye,value:pt,variant:St="outlined",...At}=o,Nt={...o,autoFocus:h,color:b,disabled:P,error:E,fullWidth:R,multiline:le,required:$e,select:De,variant:St},Lt=$W(Nt),Zt=YA(U),un=F&&Zt?`${Zt}-helper-text`:void 0,en=Y&&Zt?`${Zt}-label`:void 0,Bn=DW[St],Sn={slots:ut,slotProps:{input:j,inputLabel:K,htmlInput:D,formHelperText:I,select:We,...Be}},jt={},tn=Sn.slotProps.inputLabel;St==="outlined"&&(tn&&typeof tn.shrink<"u"&&(jt.notched=tn.shrink),jt.label=Y),De&&((!We||!We.native)&&(jt.id=void 0),jt["aria-describedby"]=void 0);const[Ut,gn]=hs("input",{elementType:Bn,externalForwardedProps:Sn,additionalProps:jt,ownerState:Nt}),[yt,zt]=hs("inputLabel",{elementType:RV,externalForwardedProps:Sn,ownerState:Nt}),[we,ir]=hs("htmlInput",{elementType:"input",externalForwardedProps:Sn,ownerState:Nt}),[pn,ht]=hs("formHelperText",{elementType:uV,externalForwardedProps:Sn,ownerState:Nt}),[Vt,an]=hs("select",{elementType:E3,externalForwardedProps:Sn,ownerState:Nt}),Qn=Ie.jsx(Ut,{"aria-describedby":un,autoComplete:a,autoFocus:h,defaultValue:w,fullWidth:R,multiline:le,name:ge,rows:Le,maxRows:ce,minRows:de,type:Ye,value:pt,id:Zt,inputRef:V,onBlur:Ae,onChange:H,onFocus:Ee,placeholder:je,inputProps:ir,slots:{input:ut.htmlInput?we:void 0},...gn});return Ie.jsxs(OW,{className:Wt(Lt.root,u),disabled:P,error:E,fullWidth:R,ref:n,required:$e,color:b,variant:St,ownerState:Nt,...At,children:[Y!=null&&Y!==""&&Ie.jsx(yt,{htmlFor:Zt,id:en,...zt,children:Y}),De?Ie.jsx(Vt,{"aria-describedby":un,id:Zt,labelId:en,value:pt,input:Qn,...an,children:d}):Qn,F&&Ie.jsx(pn,{id:un,...ht,children:F})]})}),BW="/foundhere/assets/logo-BSIhHKFo.png";function FW(){const e=Mw(),[t,n]=re.useState(""),[o,a]=re.useState(""),[h,d]=re.useState(""),u=b=>{b.preventDefault(),localStorage.setItem("username",t),localStorage.setItem("email",o),localStorage.setItem("password",h),e("/map")};return Ie.jsxs(kf,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#f5f5f5"},children:[Ie.jsx("img",{src:BW,alt:"Logo",style:{width:"150px",marginBottom:"20px",borderRadius:"8%"}}),Ie.jsx(Uo,{variant:"h6",gutterBottom:!0,children:"Welcome to the Login"}),Ie.jsxs("form",{onSubmit:u,style:{width:"100%",maxWidth:400},children:[Ie.jsx(Q_,{label:"Username",variant:"outlined",fullWidth:!0,margin:"normal",value:t,onChange:b=>n(b.target.value),required:!0}),Ie.jsx(Q_,{label:"Email",variant:"outlined",fullWidth:!0,margin:"normal",value:o,onChange:b=>a(b.target.value),required:!0}),Ie.jsx(Q_,{label:"Password",variant:"outlined",fullWidth:!0,margin:"normal",type:"password",value:h,onChange:b=>d(b.target.value),required:!0}),Ie.jsx(Bh,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:2,bgcolor:"#4BB3FD"},children:"Login"})]})]})}const NW=()=>{const e=Mw(),t=localStorage.getItem("email"),n=localStorage.getItem("username"),o=()=>{localStorage.clear(),e("/foundhere/")};return Ie.jsxs(IU,{maxWidth:"sm",sx:{textAlign:"center",pt:6},children:[Ie.jsx(Hj,{alt:"User Avatar",src:"/images/user-avatar.jpg",sx:{width:100,height:100,mx:"auto"}}),Ie.jsx(Uo,{variant:"h5",gutterBottom:!0,sx:{mt:2},children:n||"User"}),Ie.jsx(Uo,{variant:"body1",color:"text.secondary",children:t||"user@example.com"}),Ie.jsx(b0,{sx:{my:3}}),Ie.jsxs(kf,{display:"flex",flexDirection:"column",gap:2,alignItems:"center",children:[Ie.jsx(Bh,{variant:"contained",fullWidth:!0,sx:{bgcolor:"#2CDA9D"},children:"Edit Profile"}),Ie.jsx(Bh,{variant:"outlined",fullWidth:!0,sx:{color:"#22333B",borderColor:"#22333B"},children:"Account Settings"}),Ie.jsx(Bh,{variant:"outlined",fullWidth:!0,sx:{color:"#22333B",borderColor:"#22333B"},children:"My Liked Souvenirs"}),Ie.jsx(Bh,{variant:"contained",sx:{bgcolor:"#FF8A5B"},fullWidth:!0,onClick:o,children:"Logout"})]})]})};var I3={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},GE=di.createContext&&di.createContext(I3),jW=["attr","size","title"];function UW(e,t){if(e==null)return{};var n=VW(e,t),o,a;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(a=0;a<h.length;a++)o=h[a],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function VW(e,t){if(e==null)return{};var n={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;n[o]=e[o]}return n}function k0(){return k0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},k0.apply(this,arguments)}function HE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function T0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HE(Object(n),!0).forEach(function(o){WW(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function WW(e,t,n){return t=qW(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qW(e){var t=GW(e,"string");return typeof t=="symbol"?t:t+""}function GW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function P3(e){return e&&e.map((t,n)=>di.createElement(t.tag,T0({key:n},t.attr),P3(t.child)))}function T2(e){return t=>di.createElement(HW,k0({attr:T0({},e.attr)},t),P3(e.child))}function HW(e){var t=n=>{var{attr:o,size:a,title:h}=e,d=UW(e,jW),u=a||n.size||"1em",b;return n.className&&(b=n.className),e.className&&(b=(b?b+" ":"")+e.className),di.createElement("svg",k0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,o,d,{className:b,style:T0(T0({color:e.color||n.color},n.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),h&&di.createElement("title",null,h),e.children)};return GE!==void 0?di.createElement(GE.Consumer,null,n=>t(n)):t(I3)}function ZW(e){return T2({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"},child:[]}]})(e)}function KW(e){return T2({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(e)}function XW(e){return T2({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}const YW=()=>{const[e,t]=re.useState("map"),n=Mw(),o=(a,h)=>{t(h),h==="map"?n("/map"):h==="liked"?n("/liked"):h==="profile"&&n("/profile")};return Ie.jsx(b2,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:"10",minHeight:"60px"},elevation:3,children:Ie.jsxs(iU,{value:e,onChange:o,children:[Ie.jsx(Z_,{label:"Map",value:"map",icon:Ie.jsx(nc,{children:Ie.jsx(KW,{})})}),Ie.jsx(Z_,{label:"Liked",value:"liked",icon:Ie.jsx(nc,{children:Ie.jsx(ZW,{})})}),Ie.jsx(Z_,{label:"Profile",value:"profile",icon:Ie.jsx(nc,{children:Ie.jsx(XW,{})})})]})})},M3=({store:e,onBack:t})=>Ie.jsxs(bU,{sx:{p:3,maxWidth:500,mx:"auto",boxShadow:3},children:[t&&Ie.jsx(Bh,{onClick:t,sx:{mb:2,color:"#22333B"},children:"← Back to List"}),Ie.jsx(Uo,{variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold"},children:e.name}),Ie.jsxs(Uo,{variant:"subtitle1",color:"textSecondary",gutterBottom:!0,children:["📍 ",e.location]}),Ie.jsxs(Uo,{variant:"body1",color:"textSecondary",children:["📞 ",e.phone]}),Ie.jsxs(Uo,{variant:"body1",color:"textSecondary",gutterBottom:!0,children:["🕒 ",e.hours]}),Ie.jsx(Uo,{variant:"body1",sx:{mt:2,fontStyle:"italic"},children:e.description}),Ie.jsx(BE,{container:!0,spacing:1,sx:{mt:2},children:e.images.map((n,o)=>Ie.jsx(BE,{item:!0,xs:4,children:Ie.jsx(EU,{component:"img",image:n,alt:`${e.name} ${o+1}`,sx:{width:"100%",height:"80px",borderRadius:1,boxShadow:1}})},o))})]});M3.propTypes={store:oE.object.isRequired,onBack:oE.func};const JW=()=>{const e=[{id:1,name:"Traditional Tea Sets Anzuri",location:" 123 Shibuya, Tokyo",phone:" +81 123-456-7890",description:"A wonderful place to find authentic souvenirs!",hours:" 10am - 8pm",images:["https://lh5.googleusercontent.com/p/AF1QipMtCNyKc-aTLUAXVOyUTCloYFfrrJSmGpwa1sME=w390-h262-n-k-no","https://lh5.googleusercontent.com/p/AF1QipOADK5eAdt0SVVLXY2iLDZoxsT8C-KZWM9TJ3-q=w195-h130-n-k-no","https://lh5.googleusercontent.com/p/AF1QipN6gXHNtz4YRRU5lVbnLEsxYPFAJzYhqNxuNTvN=w129-h130-n-k-no"]},{id:2,name:"Tokyo Souvenir Mimoto",location:" 456 Akihabara, Tokyo",phone:" +81 098-765-4321",description:"Find the best souvenirs here!",hours:" 11am - 7pm",images:["https://via.placeholder.com/300x180","https://via.placeholder.com/300x180"]}],[t,n]=re.useState(null),o=h=>{n(h)},a=()=>{n(null)};return Ie.jsx(kf,{children:t?Ie.jsx(M3,{store:t,onBack:a}):Ie.jsxs(kf,{children:[Ie.jsx(Uo,{variant:"h5",sx:{textAlign:"center",my:2},children:"Liked Souvenir Places"}),Ie.jsx(b3,{children:e.map(h=>Ie.jsxs(kf,{children:[Ie.jsx(HV,{button:!0,onClick:()=>o(h),children:Ie.jsx(YV,{primary:h.name,secondary:h.location})}),Ie.jsx(b0,{})]},h.id))})]})})};function QW(){const e=Pw();return Ie.jsxs(Ie.Fragment,{children:[Ie.jsxs(j6,{children:[Ie.jsx(sf,{path:"foundhere/",element:Ie.jsx(FW,{})}),Ie.jsx(sf,{path:"/map",element:Ie.jsx(hF,{})}),Ie.jsx(sf,{path:"/profile",element:Ie.jsx(NW,{})}),Ie.jsx(sf,{path:"/liked",element:Ie.jsx(JW,{})})]}),e.pathname!=="/foundhere/"&&Ie.jsx(YW,{})]})}ex.createRoot(document.getElementById("root")).render(Ie.jsx(di.StrictMode,{children:Ie.jsx(W6,{children:Ie.jsx(QW,{})})}));
